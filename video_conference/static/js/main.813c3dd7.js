/*! For license information please see main.813c3dd7.js.LICENSE.txt */
(function(){var __webpack_modules__={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(c){a=!0,n=c}finally{try{s||null==r.return||r.return()}finally{if(a)throw n}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,r){var o=r(2858),n=r(3884),i=r(379),s=r(521);e.exports=function(e,t){return o(e)||n(e,t)||i(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,r){var o=r(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7214:function(e){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),o=0,n=2,i=!0;for(;n<arguments.length;)r[o++]=arguments[n++];return new Promise((function(n,s){r[o]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(a){i&&(i=!1,s(a))}}))}},734:function(e,t){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),n=new Array(123),i=0;i<64;)n[o[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var n,i=null,s=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:s[a++]=o[u>>2],n=(3&u)<<4,c=1;break;case 1:s[a++]=o[n|u>>4],n=(15&u)<<2,c=2;break;case 2:s[a++]=o[n|u>>6],s[a++]=o[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=o[n],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var o,i=r,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(s);switch(a){case 0:o=u,a=1;break;case 1:t[r++]=o<<2|(48&u)>>4,o=u,a=2;break;case 2:t[r++]=(15&o)<<4|(60&u)>>2,o=u,a=3;break;case 3:t[r++]=(3&o)<<6|u,a=0}}if(1===a)throw Error(s);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},7875:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},249:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),o=128===r[3];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3]}function i(e,o,n){t[0]=e,o[n]=r[3],o[n+1]=r[2],o[n+2]=r[1],o[n+3]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],t[0]}function a(e,o){return r[3]=e[o],r[2]=e[o+1],r[1]=e[o+2],r[0]=e[o+3],t[0]}e.writeFloatLE=o?n:i,e.writeFloatBE=o?i:n,e.readFloatLE=o?s:a,e.readFloatBE=o?a:s}():function(){function t(e,t,r,o){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,o);else if(isNaN(t))e(2143289344,r,o);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,o);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,o);else{var i=Math.floor(Math.log(t)/Math.LN2);e((n<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,o)}}function s(e,t,r){var o=e(t,r),n=2*(o>>31)+1,i=o>>>23&255,s=8388607&o;return 255===i?s?NaN:n*(1/0):0===i?1401298464324817e-60*n*s:n*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,o),e.readFloatLE=s.bind(null,n),e.readFloatBE=s.bind(null,i)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),o=128===r[7];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3],o[n+4]=r[4],o[n+5]=r[5],o[n+6]=r[6],o[n+7]=r[7]}function i(e,o,n){t[0]=e,o[n]=r[7],o[n+1]=r[6],o[n+2]=r[5],o[n+3]=r[4],o[n+4]=r[3],o[n+5]=r[2],o[n+6]=r[1],o[n+7]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],r[4]=e[o+4],r[5]=e[o+5],r[6]=e[o+6],r[7]=e[o+7],t[0]}function a(e,o){return r[7]=e[o],r[6]=e[o+1],r[5]=e[o+2],r[4]=e[o+3],r[3]=e[o+4],r[2]=e[o+5],r[1]=e[o+6],r[0]=e[o+7],t[0]}e.writeDoubleLE=o?n:i,e.writeDoubleBE=o?i:n,e.readDoubleLE=o?s:a,e.readDoubleBE=o?a:s}():function(){function t(e,t,r,o,n,i){var s=o<0?1:0;if(s&&(o=-o),0===o)e(0,n,i+t),e(1/o>0?0:2147483648,n,i+r);else if(isNaN(o))e(0,n,i+t),e(2146959360,n,i+r);else if(o>17976931348623157e292)e(0,n,i+t),e((s<<31|2146435072)>>>0,n,i+r);else{var a;if(o<22250738585072014e-324)e((a=o/5e-324)>>>0,n,i+t),e((s<<31|a/4294967296)>>>0,n,i+r);else{var c=Math.floor(Math.log(o)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=o*Math.pow(2,-c))>>>0,n,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,n,i+r)}}}function s(e,t,r,o,n){var i=e(o,n+t),s=e(o,n+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=s.bind(null,n,0,4),e.readDoubleBE=s.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function o(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},6858:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},7423:function(e){"use strict";e.exports=function(e,t,r){var o=r||8192,n=o>>>1,i=null,s=o;return function(r){if(r<1||r>n)return e(r);s+r>o&&(i=e(o),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},248:function(e,t){"use strict";var r=t;r.length=function(e){for(var t=0,r=0,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,i=[],s=0;t<r;)(o=e[t++])<128?i[s++]=o:o>191&&o<224?i[s++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(o>>10),i[s++]=56320+(1023&o)):i[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,i.slice(0,s))),n.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(e,t,r){for(var o,n,i=r,s=0;s<e.length;++s)(o=e.charCodeAt(s))<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296===(64512&o)&&56320===(64512&(n=e.charCodeAt(s+1)))?(o=65536+((1023&o)<<10)+(1023&n),++s,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128);return r-i}},4418:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(6644),r(9142),r(7804),r(7149),function(){var e=i,t=e.lib.BlockCipher,r=e.algo,o=[],n=[],s=[],a=[],c=[],u=[],l=[],d=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,i=0;for(t=0;t<256;t++){var f=i^i<<1^i<<2^i<<3^i<<4;f=f>>>8^255&f^99,o[r]=f,n[f]=r;var _=e[r],g=e[_],m=e[g],v=257*e[f]^16843008*f;s[r]=v<<24|v>>>8,a[r]=v<<16|v>>>16,c[r]=v<<8|v>>>24,u[r]=v,v=16843009*m^65537*g^257*_^16843008*r,l[f]=v<<24|v>>>8,d[f]=v<<16|v>>>16,h[f]=v<<8|v>>>24,p[f]=v,r?(r=_^e[e[e[m^_]]],i^=e[e[i]]):r=i=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],_=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],s=0;s<n;s++)s<r?i[s]=t[s]:(u=i[s-1],s%r?r>6&&s%r==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=f[s/r|0]<<24),i[s]=i[s-r]^u);for(var a=this._invKeySchedule=[],c=0;c<n;c++){if(s=n-c,c%4)var u=i[s];else u=i[s-4];a[c]=c<4||s<=4?u:l[o[u>>>24]]^d[o[u>>>16&255]]^h[o[u>>>8&255]]^p[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,d,h,p,n),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,o,n,i,s,a){for(var c=this._nRounds,u=e[t]^r[0],l=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<c;f++){var _=o[u>>>24]^n[l>>>16&255]^i[d>>>8&255]^s[255&h]^r[p++],g=o[l>>>24]^n[d>>>16&255]^i[h>>>8&255]^s[255&u]^r[p++],m=o[d>>>24]^n[h>>>16&255]^i[u>>>8&255]^s[255&l]^r[p++],v=o[h>>>24]^n[u>>>16&255]^i[l>>>8&255]^s[255&d]^r[p++];u=_,l=g,d=m,h=v}_=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[p++],g=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^r[p++],m=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^r[p++],v=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^r[p++],e[t]=_,e[t+1]=g,e[t+2]=m,e[t+3]=v},keySize:8});e.AES=t._createHelper(_)}(),i.AES)}()},7149:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7804),void(i.lib.Cipher||function(e){var t=i,r=t.lib,o=r.Base,n=r.WordArray,s=r.BufferedBlockAlgorithm,a=t.enc,c=(a.Utf8,a.Base64),u=t.algo.EvpKDF,l=r.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?y:m}return function(t){return{encrypt:function(r,o,n){return e(o).encrypt(t,r,o,n)},decrypt:function(r,o,n){return e(o).decrypt(t,r,o,n)}}}}()}),d=(r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),h=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=d.CBC=function(){var t=h.extend();function r(t,r,o){var n,i=this._iv;i?(n=i,this._iv=e):n=this._prevBlock;for(var s=0;s<o;s++)t[r+s]^=n[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize;r.call(this,e,t,n),o.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),t.Decryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,i=e.slice(t,t+n);o.decryptBlock(e,t),r.call(this,e,t,n),this._prevBlock=i}}),t}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,o=r-e.sigBytes%r,i=o<<24|o<<16|o<<8|o,s=[],a=0;a<o;a+=4)s.push(i);var c=n.create(s,o);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},_=(r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:f}),reset:function(){var e;l.reset.call(this);var t=this.cfg,r=t.iv,o=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=o.createEncryptor:(e=o.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(o,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?n.create([1398893684,1701076831]).concat(r).concat(t):t).toString(c)},parse:function(e){var t,r=c.parse(e),o=r.words;return 1398893684==o[0]&&1701076831==o[1]&&(t=n.create(o.slice(2,4)),o.splice(0,4),r.sigBytes-=16),_.create({ciphertext:r,salt:t})}},m=r.SerializableCipher=o.extend({cfg:o.extend({format:g}),encrypt:function(e,t,r,o){o=this.cfg.extend(o);var n=e.createEncryptor(r,o),i=n.finalize(t),s=n.cfg;return _.create({ciphertext:i,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(r,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(t.kdf={}).OpenSSL={execute:function(e,t,r,o){o||(o=n.random(8));var i=u.create({keySize:t+r}).compute(e,o),s=n.create(i.words.slice(t),4*r);return i.sigBytes=4*t,_.create({key:i,iv:s,salt:o})}},y=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:v}),encrypt:function(e,t,r,o){var n=(o=this.cfg.extend(o)).kdf.execute(r,e.keySize,e.ivSize);o.iv=n.iv;var i=m.encrypt.call(this,e,t,n.key,o);return i.mixIn(n),i},decrypt:function(e,t,r,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var n=o.kdf.execute(r,e.keySize,e.ivSize,t.salt);return o.iv=n.iv,m.decrypt.call(this,e,t,n.key,o)}})}()))}()},169:function(e,t,r){e.exports=function(){var e=e||function(e,t){var o;if("undefined"!==typeof window&&window.crypto&&(o=window.crypto),"undefined"!==typeof self&&self.crypto&&(o=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(o=globalThis.crypto),!o&&"undefined"!==typeof window&&window.msCrypto&&(o=window.msCrypto),!o&&"undefined"!==typeof r.g&&r.g.crypto&&(o=r.g.crypto),!o)try{o=r(2480)}catch(g){}var n=function(){if(o){if("function"===typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"===typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(var a=0;a<n;a+=4)t[o+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(n());return new u.init(t,e)}}),l=s.enc={},d=l.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new u.init(r,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new u.init(r,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,o=this._data,n=o.words,i=o.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,i);if(c){for(var d=0;d<c;d+=s)this._doProcessBlock(n,d);r=n.splice(0,c),o.sigBytes-=l}return new u.init(r,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),_=(a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new _.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math);return e}()},6644:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(){var e=n,t=e.lib.WordArray;function r(e,r,o){for(var n=[],i=0,s=0;s<r;s++)if(s%4){var a=o[e.charCodeAt(s-1)]<<s%4*2|o[e.charCodeAt(s)]>>>6-s%4*2;n[i>>>2]|=a<<24-i%4*8,i++}return t.create(n,i)}e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,o=this._map;e.clamp();for(var n=[],i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)n.push(o.charAt(s>>>6*(3-a)&63));var c=o.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,o=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<o.length;i++)n[o.charCodeAt(i)]=i}var s=o.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return r(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}()},6326:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(){var e=n,t=e.lib.WordArray;function r(e,r,o){for(var n=[],i=0,s=0;s<r;s++)if(s%4){var a=o[e.charCodeAt(s-1)]<<s%4*2|o[e.charCodeAt(s)]>>>6-s%4*2;n[i>>>2]|=a<<24-i%4*8,i++}return t.create(n,i)}e.enc.Base64url={stringify:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.words,o=e.sigBytes,n=t?this._safe_map:this._map;e.clamp();for(var i=[],s=0;s<o;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<o;c++)i.push(n.charAt(a>>>6*(3-c)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e.length,n=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<n.length;s++)i[n.charCodeAt(s)]=s}var a=n.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(o=c)}return r(e,o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)}()},6246:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(){var e=n,t=e.lib.WordArray,r=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n+=2){var i=t[n>>>2]>>>16-n%4*8&65535;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var r=e.length,o=[],n=0;n<r;n++)o[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return t.create(o,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var s=o(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var r=e.length,n=[],i=0;i<r;i++)n[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return t.create(n,2*r)}}}(),n.enc.Utf16)}()},7804:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(336),r(2503),function(){var e=i,t=e.lib,r=t.Base,o=t.WordArray,n=e.algo,s=n.MD5,a=n.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),s=o.create(),a=s.words,c=n.keySize,u=n.iterations;a.length<c;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)r=i.finalize(r),i.reset();s.concat(r)}return s.sigBytes=4*c,s}});e.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)}}(),i.EvpKDF)}()},2501:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),function(e){var t=i,r=t.lib.CipherParams,o=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return r.create({ciphertext:t})}}}(),i.format.Hex)}()},2503:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),void function(){var e=n,t=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var o=e.blockSize,n=4*o;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,c=s.words,u=0;u<o;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}())}()},6686:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(8230),r(362),r(6246),r(6644),r(6326),r(9142),r(336),r(5990),r(9524),r(9308),r(9111),r(5562),r(8088),r(2503),r(1778),r(7804),r(7149),r(7655),r(818),r(5081),r(2139),r(6749),r(4852),r(7202),r(2721),r(6277),r(1459),r(2501),r(4418),r(543),r(7419),r(3936),r(7476),i)}()},362:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,o=[],n=0;n<r;n++)o[n>>>2]|=e[n]<<24-n%4*8;t.call(this,o,r)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)}()},9142:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(e){var t=n,r=t.lib,o=r.WordArray,i=r.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var o=t+r,n=e[o];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],_=e[t+4],g=e[t+5],m=e[t+6],v=e[t+7],y=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],T=e[t+12],w=e[t+13],C=e[t+14],I=e[t+15],O=i[0],k=i[1],R=i[2],A=i[3];O=u(O,k,R,A,s,7,a[0]),A=u(A,O,k,R,c,12,a[1]),R=u(R,A,O,k,p,17,a[2]),k=u(k,R,A,O,f,22,a[3]),O=u(O,k,R,A,_,7,a[4]),A=u(A,O,k,R,g,12,a[5]),R=u(R,A,O,k,m,17,a[6]),k=u(k,R,A,O,v,22,a[7]),O=u(O,k,R,A,y,7,a[8]),A=u(A,O,k,R,b,12,a[9]),R=u(R,A,O,k,S,17,a[10]),k=u(k,R,A,O,E,22,a[11]),O=u(O,k,R,A,T,7,a[12]),A=u(A,O,k,R,w,12,a[13]),R=u(R,A,O,k,C,17,a[14]),O=l(O,k=u(k,R,A,O,I,22,a[15]),R,A,c,5,a[16]),A=l(A,O,k,R,m,9,a[17]),R=l(R,A,O,k,E,14,a[18]),k=l(k,R,A,O,s,20,a[19]),O=l(O,k,R,A,g,5,a[20]),A=l(A,O,k,R,S,9,a[21]),R=l(R,A,O,k,I,14,a[22]),k=l(k,R,A,O,_,20,a[23]),O=l(O,k,R,A,b,5,a[24]),A=l(A,O,k,R,C,9,a[25]),R=l(R,A,O,k,f,14,a[26]),k=l(k,R,A,O,y,20,a[27]),O=l(O,k,R,A,w,5,a[28]),A=l(A,O,k,R,p,9,a[29]),R=l(R,A,O,k,v,14,a[30]),O=d(O,k=l(k,R,A,O,T,20,a[31]),R,A,g,4,a[32]),A=d(A,O,k,R,y,11,a[33]),R=d(R,A,O,k,E,16,a[34]),k=d(k,R,A,O,C,23,a[35]),O=d(O,k,R,A,c,4,a[36]),A=d(A,O,k,R,_,11,a[37]),R=d(R,A,O,k,v,16,a[38]),k=d(k,R,A,O,S,23,a[39]),O=d(O,k,R,A,w,4,a[40]),A=d(A,O,k,R,s,11,a[41]),R=d(R,A,O,k,f,16,a[42]),k=d(k,R,A,O,m,23,a[43]),O=d(O,k,R,A,b,4,a[44]),A=d(A,O,k,R,T,11,a[45]),R=d(R,A,O,k,I,16,a[46]),O=h(O,k=d(k,R,A,O,p,23,a[47]),R,A,s,6,a[48]),A=h(A,O,k,R,v,10,a[49]),R=h(R,A,O,k,C,15,a[50]),k=h(k,R,A,O,g,21,a[51]),O=h(O,k,R,A,T,6,a[52]),A=h(A,O,k,R,f,10,a[53]),R=h(R,A,O,k,S,15,a[54]),k=h(k,R,A,O,c,21,a[55]),O=h(O,k,R,A,y,6,a[56]),A=h(A,O,k,R,I,10,a[57]),R=h(R,A,O,k,m,15,a[58]),k=h(k,R,A,O,w,21,a[59]),O=h(O,k,R,A,_,6,a[60]),A=h(A,O,k,R,E,10,a[61]),R=h(R,A,O,k,p,15,a[62]),k=h(k,R,A,O,b,21,a[63]),i[0]=i[0]+O|0,i[1]=i[1]+k|0,i[2]=i[2]+R|0,i[3]=i[3]+A|0},_doFinalize:function(){var t=this._data,r=t.words,o=8*this._nDataBytes,n=8*t.sigBytes;r[n>>>5]|=128<<24-n%32;var i=e.floor(o/4294967296),s=o;r[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,o,n,i,s){var a=e+(t&r|~t&o)+n+s;return(a<<i|a>>>32-i)+t}function l(e,t,r,o,n,i,s){var a=e+(t&o|r&~o)+n+s;return(a<<i|a>>>32-i)+t}function d(e,t,r,o,n,i,s){var a=e+(t^r^o)+n+s;return(a<<i|a>>>32-i)+t}function h(e,t,r,o,n,i,s){var a=e+(r^(t|~o))+n+s;return(a<<i|a>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),n.MD5)}()},7655:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.mode.CFB=function(){var e=i.lib.BlockCipherMode.extend();function t(e,t,r,o){var n,i=this._iv;i?(n=i.slice(0),this._iv=void 0):n=this._prevBlock,o.encryptBlock(n,0);for(var s=0;s<r;s++)e[t+s]^=n[s]}return e.Encryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize;t.call(this,e,r,n,o),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize,i=e.slice(r,r+n);t.call(this,e,r,n,o),this._prevBlock=i}}),e}(),i.mode.CFB)}()},5081:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.mode.CTRGladman=function(){var e=i.lib.BlockCipherMode.extend();function t(e){if(255===(e>>24&255)){var t=e>>16&255,r=e>>8&255,o=255&e;255===t?(t=0,255===r?(r=0,255===o?o=0:++o):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=o}else e+=1<<24;return e}function r(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var o=e.Encryptor=e.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=i.slice(0),this._iv=void 0),r(s);var a=s.slice(0);o.encryptBlock(a,0);for(var c=0;c<n;c++)e[t+c]^=a[c]}});return e.Decryptor=o,e}(),i.mode.CTRGladman)}()},818:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.mode.CTR=function(){var e=i.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,n=this._iv,i=this._counter;n&&(i=this._counter=n.slice(0),this._iv=void 0);var s=i.slice(0);r.encryptBlock(s,0),i[o-1]=i[o-1]+1|0;for(var a=0;a<o;a++)e[t+a]^=s[a]}});return e.Decryptor=t,e}(),i.mode.CTR)}()},6749:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.mode.ECB=function(){var e=i.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),i.mode.ECB)}()},2139:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.mode.OFB=function(){var e=i.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,n=this._iv,i=this._keystream;n&&(i=this._keystream=n.slice(0),this._iv=void 0),r.encryptBlock(i,0);for(var s=0;s<o;s++)e[t+s]^=i[s]}});return e.Decryptor=t,e}(),i.mode.OFB)}()},4852:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,o=4*t,n=o-r%o,i=r+n-1;e.clamp(),e.words[i>>>2]|=n<<24-i%4*8,e.sigBytes+=n},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.pad.Ansix923)}()},7202:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.pad.Iso10126={pad:function(e,t){var r=4*t,o=r-e.sigBytes%r;e.concat(i.lib.WordArray.random(o-1)).concat(i.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.pad.Iso10126)}()},2721:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.pad.Iso97971={pad:function(e,t){e.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(e,t)},unpad:function(e){i.pad.ZeroPadding.unpad(e),e.sigBytes--}},i.pad.Iso97971)}()},1459:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding)}()},6277:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(7149),i.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},i.pad.ZeroPadding)}()},1778:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(336),r(2503),function(){var e=i,t=e.lib,r=t.Base,o=t.WordArray,n=e.algo,s=n.SHA1,a=n.HMAC,c=n.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=a.create(r.hasher,e),i=o.create(),s=o.create([1]),c=i.words,u=s.words,l=r.keySize,d=r.iterations;c.length<l;){var h=n.update(t).finalize(s);n.reset();for(var p=h.words,f=p.length,_=h,g=1;g<d;g++){_=n.finalize(_),n.reset();for(var m=_.words,v=0;v<f;v++)p[v]^=m[v]}i.concat(h),u[0]++}return i.sigBytes=4*l,i}});e.PBKDF2=function(e,t,r){return c.create(r).compute(e,t)}}(),i.PBKDF2)}()},7476:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(6644),r(9142),r(7804),r(7149),function(){var e=i,t=e.lib.StreamCipher,r=e.algo,o=[],n=[],s=[],a=r.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=r[n+4&7];if(t){var i=t.words,s=i[0],a=i[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=u>>>16|4294901760&l,h=l<<16|65535&u;for(o[0]^=u,o[1]^=d,o[2]^=l,o[3]^=h,o[4]^=u,o[5]^=d,o[6]^=l,o[7]^=h,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),o[0]=r[0]^r[5]>>>16^r[3]<<16,o[1]=r[2]^r[7]>>>16^r[5]<<16,o[2]=r[4]^r[1]>>>16^r[7]<<16,o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8),e[t+n]^=o[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)n[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<n[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<n[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<n[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<n[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<n[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<n[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<n[6]>>>0?1:0)|0,this._b=t[7]>>>0<n[7]>>>0?1:0,r=0;r<8;r++){var o=e[r]+t[r],i=65535&o,a=o>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&o)*o|0)+((65535&o)*o|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.RabbitLegacy=t._createHelper(a)}(),i.RabbitLegacy)}()},3936:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(6644),r(9142),r(7804),r(7149),function(){var e=i,t=e.lib.StreamCipher,r=e.algo,o=[],n=[],s=[],a=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)n[r]^=o[r+4&7];if(t){var i=t.words,s=i[0],a=i[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=u>>>16|4294901760&l,h=l<<16|65535&u;for(n[0]^=u,n[1]^=d,n[2]^=l,n[3]^=h,n[4]^=u,n[5]^=d,n[6]^=l,n[7]^=h,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),o[0]=r[0]^r[5]>>>16^r[3]<<16,o[1]=r[2]^r[7]>>>16^r[5]<<16,o[2]=r[4]^r[1]>>>16^r[7]<<16,o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8),e[t+n]^=o[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)n[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<n[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<n[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<n[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<n[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<n[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<n[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<n[6]>>>0?1:0)|0,this._b=t[7]>>>0<n[7]>>>0?1:0,r=0;r<8;r++){var o=e[r]+t[r],i=65535&o,a=o>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&o)*o|0)+((65535&o)*o|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.Rabbit=t._createHelper(a)}(),i.Rabbit)}()},7419:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(6644),r(9142),r(7804),r(7149),function(){var e=i,t=e.lib.StreamCipher,r=e.algo,o=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,o=this._S=[],n=0;n<256;n++)o[n]=n;n=0;for(var i=0;n<256;n++){var s=n%r,a=t[s>>>2]>>>24-s%4*8&255;i=(i+o[n]+a)%256;var c=o[n];o[n]=o[i],o[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0});function n(){for(var e=this._S,t=this._i,r=this._j,o=0,n=0;n<4;n++){r=(r+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[r],e[r]=i,o|=e[(e[t]+e[r])%256]<<24-8*n}return this._i=t,this._j=r,o}e.RC4=t._createHelper(o);var s=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)n.call(this)}});e.RC4Drop=t._createHelper(s)}(),i.RC4)}()},8088:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(e){var t=n,r=t.lib,o=r.WordArray,i=r.Hasher,s=t.algo,a=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),h=o.create([1352829926,1548603684,1836072691,2053994217,0]),p=s.RIPEMD160=i.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var o=t+r,n=e[o];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i,s,p,b,S,E,T,w,C,I,O,k=this._hash.words,R=d.words,A=h.words,P=a.words,L=c.words,N=u.words,D=l.words;for(E=i=k[0],T=s=k[1],w=p=k[2],C=b=k[3],I=S=k[4],r=0;r<80;r+=1)O=i+e[t+P[r]]|0,O+=r<16?f(s,p,b)+R[0]:r<32?_(s,p,b)+R[1]:r<48?g(s,p,b)+R[2]:r<64?m(s,p,b)+R[3]:v(s,p,b)+R[4],O=(O=y(O|=0,N[r]))+S|0,i=S,S=b,b=y(p,10),p=s,s=O,O=E+e[t+L[r]]|0,O+=r<16?v(T,w,C)+A[0]:r<32?m(T,w,C)+A[1]:r<48?g(T,w,C)+A[2]:r<64?_(T,w,C)+A[3]:f(T,w,C)+A[4],O=(O=y(O|=0,D[r]))+I|0,E=I,I=C,C=y(w,10),w=T,T=O;O=k[1]+p+C|0,k[1]=k[2]+b+I|0,k[2]=k[3]+S+E|0,k[3]=k[4]+i+T|0,k[4]=k[0]+s+w|0,k[0]=O},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var n=this._hash,i=n.words,s=0;s<5;s++){var a=i[s];i[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return n},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,r){return e^t^r}function _(e,t,r){return e&t|~e&r}function g(e,t,r){return(e|~t)^r}function m(e,t,r){return e&r|t&~r}function v(e,t,r){return e^(t|~r)}function y(e,t){return e<<t|e>>>32-t}t.RIPEMD160=i._createHelper(p),t.HmacRIPEMD160=i._createHmacHelper(p)}(Math),n.RIPEMD160)}()},336:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(){var e=n,t=e.lib,r=t.WordArray,o=t.Hasher,i=e.algo,s=[],a=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],i=r[2],a=r[3],c=r[4],u=0;u<80;u++){if(u<16)s[u]=0|e[t+u];else{var l=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=l<<1|l>>>31}var d=(o<<5|o>>>27)+c+s[u];d+=u<20?1518500249+(n&i|~n&a):u<40?1859775393+(n^i^a):u<60?(n&i|n&a|i&a)-1894007588:(n^i^a)-899497514,c=a,a=i,i=n<<30|n>>>2,n=o,o=d}r[0]=r[0]+o|0,r[1]=r[1]+n|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(o+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(a),e.HmacSHA1=o._createHmacHelper(a)}(),n.SHA1)}()},9524:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(5990),function(){var e=i,t=e.lib.WordArray,r=e.algo,o=r.SHA256,n=r.SHA224=o.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=o._createHelper(n),e.HmacSHA224=o._createHmacHelper(n)}(),i.SHA224)}()},5990:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(e){var t=n,r=t.lib,o=r.WordArray,i=r.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),o=2;o<=r;o++)if(!(t%o))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var o=2,n=0;n<64;)t(o)&&(n<8&&(a[n]=r(e.pow(o,.5))),c[n]=r(e.pow(o,1/3)),n++),o++}();var u=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],i=r[2],s=r[3],a=r[4],l=r[5],d=r[6],h=r[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var f=u[p-15],_=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=u[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[p]=_+u[p-7]+m+u[p-16]}var v=o&n^o&i^n&i,y=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),b=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&d)+c[p]+u[p];h=d,d=l,l=a,a=s+b|0,s=i,i=n,n=o,o=b+(y+v)|0}r[0]=r[0]+o|0,r[1]=r[1]+n|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+l|0,r[6]=r[6]+d|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,r=t.words,o=8*this._nDataBytes,n=8*t.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=e.floor(o/4294967296),r[15+(n+64>>>9<<4)]=o,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),n.SHA256)}()},5562:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(8230),function(e){var t=i,r=t.lib,o=r.WordArray,n=r.Hasher,s=t.x64.Word,a=t.algo,c=[],u=[],l=[];!function(){for(var e=1,t=0,r=0;r<24;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,i=0;i<24;i++){for(var a=0,d=0,h=0;h<7;h++){if(1&n){var p=(1<<h)-1;p<32?d^=1<<p:a^=1<<p-32}128&n?n=n<<1^113:n<<=1}l[i]=s.create(a,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=s.create()}();var h=a.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,o=this.blockSize/2,n=0;n<o;n++){var i=e[t+2*n],s=e[t+2*n+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(k=r[n]).high^=s,k.low^=i}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var p=0,f=0,_=0;_<5;_++)p^=(k=r[h+5*_]).high,f^=k.low;var g=d[h];g.high=p,g.low=f}for(h=0;h<5;h++){var m=d[(h+4)%5],v=d[(h+1)%5],y=v.high,b=v.low;for(p=m.high^(y<<1|b>>>31),f=m.low^(b<<1|y>>>31),_=0;_<5;_++)(k=r[h+5*_]).high^=p,k.low^=f}for(var S=1;S<25;S++){var E=(k=r[S]).high,T=k.low,w=c[S];w<32?(p=E<<w|T>>>32-w,f=T<<w|E>>>32-w):(p=T<<w-32|E>>>64-w,f=E<<w-32|T>>>64-w);var C=d[u[S]];C.high=p,C.low=f}var I=d[0],O=r[0];for(I.high=O.high,I.low=O.low,h=0;h<5;h++)for(_=0;_<5;_++){var k=r[S=h+5*_],R=d[S],A=d[(h+1)%5+5*_],P=d[(h+2)%5+5*_];k.high=R.high^~A.high&P.high,k.low=R.low^~A.low&P.low}k=r[0];var L=l[a];k.high^=L.high,k.low^=L.low}},_doFinalize:function(){var t=this._data,r=t.words,n=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,u=[],l=0;l<c;l++){var d=s[l],h=d.high,p=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),u.push(p),u.push(h)}return new o.init(u,a)},clone:function(){for(var e=n.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});t.SHA3=n._createHelper(h),t.HmacSHA3=n._createHmacHelper(h)}(Math),i.SHA3)}()},9111:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(8230),r(9308),function(){var e=i,t=e.x64,r=t.Word,o=t.WordArray,n=e.algo,s=n.SHA512,a=n.SHA384=s.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=s._createHelper(a),e.HmacSHA384=s._createHmacHelper(a)}(),i.SHA384)}()},9308:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(8230),function(){var e=i,t=e.lib.Hasher,r=e.x64,o=r.Word,n=r.WordArray,s=e.algo;function a(){return o.create.apply(o,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=a()}();var l=s.SHA512=t.extend({_doReset:function(){this._hash=new n.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],i=r[2],s=r[3],a=r[4],l=r[5],d=r[6],h=r[7],p=o.high,f=o.low,_=n.high,g=n.low,m=i.high,v=i.low,y=s.high,b=s.low,S=a.high,E=a.low,T=l.high,w=l.low,C=d.high,I=d.low,O=h.high,k=h.low,R=p,A=f,P=_,L=g,N=m,D=v,M=y,x=b,B=S,U=E,j=T,H=w,z=C,V=I,q=O,G=k,Z=0;Z<80;Z++){var F,W,Y=u[Z];if(Z<16)W=Y.high=0|e[t+2*Z],F=Y.low=0|e[t+2*Z+1];else{var Q=u[Z-15],K=Q.high,J=Q.low,X=(K>>>1|J<<31)^(K>>>8|J<<24)^K>>>7,$=(J>>>1|K<<31)^(J>>>8|K<<24)^(J>>>7|K<<25),ee=u[Z-2],te=ee.high,re=ee.low,oe=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ne=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ie=u[Z-7],se=ie.high,ae=ie.low,ce=u[Z-16],ue=ce.high,le=ce.low;W=(W=(W=X+se+((F=$+ae)>>>0<$>>>0?1:0))+oe+((F+=ne)>>>0<ne>>>0?1:0))+ue+((F+=le)>>>0<le>>>0?1:0),Y.high=W,Y.low=F}var de,he=B&j^~B&z,pe=U&H^~U&V,fe=R&P^R&N^P&N,_e=A&L^A&D^L&D,ge=(R>>>28|A<<4)^(R<<30|A>>>2)^(R<<25|A>>>7),me=(A>>>28|R<<4)^(A<<30|R>>>2)^(A<<25|R>>>7),ve=(B>>>14|U<<18)^(B>>>18|U<<14)^(B<<23|U>>>9),ye=(U>>>14|B<<18)^(U>>>18|B<<14)^(U<<23|B>>>9),be=c[Z],Se=be.high,Ee=be.low,Te=q+ve+((de=G+ye)>>>0<G>>>0?1:0),we=me+_e;q=z,G=V,z=j,V=H,j=B,H=U,B=M+(Te=(Te=(Te=Te+he+((de+=pe)>>>0<pe>>>0?1:0))+Se+((de+=Ee)>>>0<Ee>>>0?1:0))+W+((de+=F)>>>0<F>>>0?1:0))+((U=x+de|0)>>>0<x>>>0?1:0)|0,M=N,x=D,N=P,D=L,P=R,L=A,R=Te+(ge+fe+(we>>>0<me>>>0?1:0))+((A=de+we|0)>>>0<de>>>0?1:0)|0}f=o.low=f+A,o.high=p+R+(f>>>0<A>>>0?1:0),g=n.low=g+L,n.high=_+P+(g>>>0<L>>>0?1:0),v=i.low=v+D,i.high=m+N+(v>>>0<D>>>0?1:0),b=s.low=b+x,s.high=y+M+(b>>>0<x>>>0?1:0),E=a.low=E+U,a.high=S+B+(E>>>0<U>>>0?1:0),w=l.low=w+H,l.high=T+j+(w>>>0<H>>>0?1:0),I=d.low=I+V,d.high=C+z+(I>>>0<V>>>0?1:0),k=h.low=k+G,h.high=O+q+(k>>>0<G>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(o+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),i.SHA512)}()},543:function(e,t,r){!function(t,o,n){var i;e.exports=(i=r(169),r(6644),r(9142),r(7804),r(7149),function(){var e=i,t=e.lib,r=t.WordArray,o=t.BlockCipher,n=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=n.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var o=s[r]-1;t[r]=e[o>>>5]>>>31-o%32&1}for(var n=this._subKeys=[],i=0;i<16;i++){var u=n[i]=[],l=c[i];for(r=0;r<24;r++)u[r/6|0]|=t[(a[r]-1+l)%28]<<31-r%6,u[4+(r/6|0)]|=t[28+(a[r+24]-1+l)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var d=this._invSubKeys=[];for(r=0;r<16;r++)d[r]=n[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),h.call(this,1,1431655765);for(var o=0;o<16;o++){for(var n=r[o],i=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=u[c][((s^n[c])&l[c])>>>0];this._lBlock=s,this._rBlock=i^a}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function p(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}e.DES=o._createHelper(d);var f=n.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),o=e.length<4?e.slice(0,2):e.slice(2,4),n=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(r.create(t)),this._des2=d.createEncryptor(r.create(o)),this._des3=d.createEncryptor(r.create(n))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=o._createHelper(f)}(),i.TripleDES)}()},8230:function(e,t,r){!function(t,o){var n;e.exports=(n=r(169),function(e){var t=n,r=t.lib,o=r.Base,i=r.WordArray,s=t.x64={};s.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=o.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:8*t.length},toX32:function(){for(var e=this.words,t=e.length,r=[],o=0;o<t;o++){var n=e[o];r.push(n.high),r.push(n.low)}return i.create(r,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),n)}()},9518:function(e){var t;self,t=function(){return function(){var e={"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,r){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"===typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,s=void 0,a=function(e,t){b[n]=e,b[n+1]=t,2===(n+=2)&&(s?s(S):T())};function c(e){s=e}function u(e){a=e}var l="undefined"!==typeof window?window:void 0,d=l||{},h=d.MutationObserver||d.WebKitMutationObserver,p="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function _(){return function(){return process.nextTick(S)}}function g(){return"undefined"!==typeof i?function(){i(S)}:y()}function m(){var e=0,t=new h(S),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function v(){var e=new MessageChannel;return e.port1.onmessage=S,function(){return e.port2.postMessage(0)}}function y(){var e=setTimeout;return function(){return e(S,1)}}var b=new Array(1e3);function S(){for(var e=0;e<n;e+=2)(0,b[e])(b[e+1]),b[e]=void 0,b[e+1]=void 0;n=0}function E(){try{var e=Function("return this")().require("vertx");return i=e.runOnLoop||e.runOnContext,g()}catch(t){return y()}}var T=void 0;function w(e,t){var r=this,o=new this.constructor(O);void 0===o[I]&&W(o);var n=r._state;if(n){var i=arguments[n-1];a((function(){return q(n,o,i,r._result)}))}else z(r,o,e,t);return o}function C(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var r=new t(O);return B(r,e),r}T=p?_():h?m():f?v():void 0===l?E():y();var I=Math.random().toString(36).substring(2);function O(){}var k=void 0,R=1,A=2;function P(){return new TypeError("You cannot resolve a promise with itself")}function L(){return new TypeError("A promises callback cannot return that same promise.")}function N(e,t,r,o){try{e.call(t,r,o)}catch(n){return n}}function D(e,t,r){a((function(e){var o=!1,n=N(r,t,(function(r){o||(o=!0,t!==r?B(e,r):j(e,r))}),(function(t){o||(o=!0,H(e,t))}),"Settle: "+(e._label||" unknown promise"));!o&&n&&(o=!0,H(e,n))}),e)}function M(e,t){t._state===R?j(e,t._result):t._state===A?H(e,t._result):z(t,void 0,(function(t){return B(e,t)}),(function(t){return H(e,t)}))}function x(e,r,o){r.constructor===e.constructor&&o===w&&r.constructor.resolve===C?M(e,r):void 0===o?j(e,r):t(o)?D(e,r,o):j(e,r)}function B(t,r){if(t===r)H(t,P());else if(e(r)){var o=void 0;try{o=r.then}catch(error){return void H(t,error)}x(t,r,o)}else j(t,r)}function U(e){e._onerror&&e._onerror(e._result),V(e)}function j(e,t){e._state===k&&(e._result=t,e._state=R,0!==e._subscribers.length&&a(V,e))}function H(e,t){e._state===k&&(e._state=A,e._result=t,a(U,e))}function z(e,t,r,o){var n=e._subscribers,i=n.length;e._onerror=null,n[i]=t,n[i+R]=r,n[i+A]=o,0===i&&e._state&&a(V,e)}function V(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var o=void 0,n=void 0,i=e._result,s=0;s<t.length;s+=3)o=t[s],n=t[s+r],o?q(r,o,n,i):n(i);e._subscribers.length=0}}function q(e,r,o,n){var i=t(o),s=void 0,a=void 0,c=!0;if(i){try{s=o(n)}catch(u){c=!1,a=u}if(r===s)return void H(r,L())}else s=n;r._state!==k||(i&&c?B(r,s):!1===c?H(r,a):e===R?j(r,s):e===A&&H(r,s))}function G(e,t){try{t((function(t){B(e,t)}),(function(t){H(e,t)}))}catch(r){H(e,r)}}var Z=0;function F(){return Z++}function W(e){e[I]=Z++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var Q=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(O),this.promise[I]||W(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&j(this.promise,this._result))):H(this.promise,Y())}return e.prototype._enumerate=function(e){for(var t=0;this._state===k&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,o=r.resolve;if(o===C){var n=void 0,i=void 0,s=!1;try{n=e.then}catch(c){s=!0,i=c}if(n===w&&e._state!==k)this._settledAt(e._state,t,e._result);else if("function"!==typeof n)this._remaining--,this._result[t]=e;else if(r===te){var a=new r(O);s?H(a,i):x(a,e,n),this._willSettleAt(a,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(o(e),t)},e.prototype._settledAt=function(e,t,r){var o=this.promise;o._state===k&&(this._remaining--,e===A?H(o,r):this._result[t]=r),0===this._remaining&&j(o,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;z(e,void 0,(function(e){return r._settledAt(R,t,e)}),(function(e){return r._settledAt(A,t,e)}))},e}();function K(e){return new Q(this,e).promise}function J(e){var t=this;return o(e)?new t((function(r,o){for(var n=e.length,i=0;i<n;i++)t.resolve(e[i]).then(r,o)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function X(e){var t=new this(O);return H(t,e),t}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[I]=F(),this._result=this._state=void 0,this._subscribers=[],O!==t&&("function"!==typeof t&&$(),this instanceof e?G(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var r=this,o=r.constructor;return t(e)?r.then((function(t){return o.resolve(e()).then((function(){return t}))}),(function(t){return o.resolve(e()).then((function(){throw t}))})):r.then(e,e)},e}();function re(){var e=void 0;if("undefined"!==typeof r.g)e=r.g;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var o=null;try{o=Object.prototype.toString.call(t.resolve())}catch(n){}if("[object Promise]"===o&&!t.cast)return}e.Promise=te}return te.prototype.then=w,te.all=K,te.race=J,te.resolve=C,te.reject=X,te._setScheduler=c,te._setAsap=u,te._asap=a,te.polyfill=re,te.Promise=te,te}()},"./node_modules/events/events.js":function(e){"use strict";var t,r="object"===typeof Reflect?Reflect:null,o=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,o){function n(r){e.removeListener(t,i),o(r)}function i(){"function"===typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}_(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&_(e,"error",t,r)}(e,n,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,r,o){var n,i,s,u;if(a(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"===typeof s?s=i[t]=o?[r,s]:[s,r]:o?s.unshift(r):s.push(r),(n=c(e))>0&&s.length>n&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=l.bind(o);return n.listener=r,o.wrapFn=n,n}function h(e,t,r){var o=e._events;if(void 0===o)return[];var n=o[t];return void 0===n?[]:"function"===typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):f(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),o=0;o<t;++o)r[o]=e[o];return r}function _(e,t,r,o){if("function"===typeof e.on)o.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(i){o.once&&e.removeEventListener(t,n),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!==typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)o(c,this,t);else{var u=c.length,l=f(c,u);for(r=0;r<u;++r)o(l[r],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,o,n,i,s;if(a(t),void 0===(o=this._events))return this;if(void 0===(r=o[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(n=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,n=i;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(o[e]=r[0]),void 0!==o.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,o;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,i=Object.keys(r);for(o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},i.prototype.listeners=function(e){return h(this,e,!0)},i.prototype.rawListeners=function(e){return h(this,e,!1)},i.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function o(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var o=r(r.s=ENTRY_MODULE);return o.default||o}var n="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function s(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(e,t,o){var a={};a[o]=[];var c=t.toString(),u=c.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return a;for(var l,d=u[1],h=new RegExp("(\\\\n|\\W)"+s(d)+i,"g");l=h.exec(c);)"dll-reference"!==l[3]&&a[o].push(l[3]);for(h=new RegExp("\\("+s(d)+'\\("(dll-reference\\s('+n+'))"\\)\\)'+i,"g");l=h.exec(c);)e[l[2]]||(a[o].push(l[1]),e[l[2]]=r(l[1]).m),a[l[2]]=a[l[2]]||[],a[l[2]].push(l[4]);for(var p,f=Object.keys(a),_=0;_<f.length;_++)for(var g=0;g<a[f[_]].length;g++)p=a[f[_]][g],isNaN(1*p)||(a[f[_]][g]=1*a[f[_]][g]);return a}function c(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var n={main:r.m},i=t.all?{main:Object.keys(n.main)}:function(e,t){for(var r={main:[t]},o={main:[]},n={main:{}};c(r);)for(var i=Object.keys(r),s=0;s<i.length;s++){var u=i[s],l=r[u].pop();if(n[u]=n[u]||{},!n[u][l]&&e[u][l]){n[u][l]=!0,o[u]=o[u]||[],o[u].push(l);for(var d=a(e,e[u][l],u),h=Object.keys(d),p=0;p<h.length;p++)r[h[p]]=r[h[p]]||[],r[h[p]]=r[h[p]].concat(d[h[p]])}}return o}(n,e),s="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+e+" = ("+o.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+n[e][t].toString()})).join(",")+"});\n"})),s=s+"new (("+o.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+n.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([s],{type:"text/javascript"});if(t.bare)return u;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(l);return d.objectURL=l,d}},"./src/config.js":function(e,t,r){"use strict";r.r(t),r.d(t,{defaultConfig:function(){return o},createDefaultConfig:function(){return n}});var o={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function n(){return Object.assign({},o)}},"./src/core/features.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/io/io-controller.js"),n=r("./src/config.js"),i=function(){function e(){}return e.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},e.supportNetworkStreamIO=function(){var e=new o.default({},(0,n.createDefaultConfig)()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},e.getNetworkLoaderTypeName=function(){var e=new o.default({},(0,n.createDefaultConfig)()),t=e.loaderType;return e.destroy(),t},e.supportNativeMediaPlayback=function(t){void 0==e.videoElement&&(e.videoElement=window.document.createElement("video"));var r=e.videoElement.canPlayType(t);return"probably"===r||"maybe"==r},e.getFeatureList=function(){var t={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return t.mseFlvPlayback=e.supportMSEH264Playback(),t.networkStreamIO=e.supportNetworkStreamIO(),t.networkLoaderName=e.getNetworkLoaderTypeName(),t.mseLiveFlvPlayback=t.mseFlvPlayback&&t.networkStreamIO,t.nativeMP4H264Playback=e.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),t.nativeWebmVP8Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),t.nativeWebmVP9Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp9"'),t},e}();t.default=i},"./src/core/media-info.js":function(e,t,r){"use strict";r.r(t);var o=function(){function e(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},e.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},e.prototype.getNearestKeyframe=function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,r=this._search(t.times,e);return{index:r,milliseconds:t.times[r],fileposition:t.filepositions[r]}},e.prototype._search=function(e,t){var r=0,o=e.length-1,n=0,i=0,s=o;for(t<e[0]&&(r=0,i=s+1);i<=s;){if((n=i+Math.floor((s-i)/2))===o||t>=e[n]&&t<e[n+1]){r=n;break}e[n]<t?i=n+1:s=n-1}return r},e}();t.default=o},"./src/core/media-segment-info.js":function(e,t,r){"use strict";r.r(t),r.d(t,{SampleInfo:function(){return o},MediaSegmentInfo:function(){return n},IDRSampleList:function(){return i},MediaSegmentInfoList:function(){return s}});var o=function(e,t,r,o,n){this.dts=e,this.pts=t,this.duration=r,this.originalDts=o,this.isSyncPoint=n,this.fileposition=null},n=function(){function e(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return e.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},e}(),i=function(){function e(){this._list=[]}return e.prototype.clear=function(){this._list=[]},e.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},e.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t=this._list,r=0,o=t.length-1,n=0,i=0,s=o;for(e<t[0].dts&&(r=0,i=s+1);i<=s;){if((n=i+Math.floor((s-i)/2))===o||e>=t[n].dts&&e<t[n+1].dts){r=n;break}t[n].dts<e?i=n+1:s=n-1}return this._list[r]},e}(),s=function(){function e(e){this._type=e,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._list.length},e.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},e.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var r=t.length-1,o=0,n=0,i=r,s=0;if(e<t[0].originalBeginDts)return s=-1;for(;n<=i;){if((o=n+Math.floor((i-n)/2))===r||e>t[o].lastSample.originalDts&&e<t[o+1].originalBeginDts){s=o;break}t[o].originalBeginDts<e?n=o+1:i=o-1}return s},e.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},e.prototype.append=function(e){var t=this._list,r=e,o=this._lastAppendLocation,n=0;-1!==o&&o<t.length&&r.originalBeginDts>=t[o].lastSample.originalDts&&(o===t.length-1||o<t.length-1&&r.originalBeginDts<t[o+1].originalBeginDts)?n=o+1:t.length>0&&(n=this._searchNearestSegmentBefore(r.originalBeginDts)+1),this._lastAppendLocation=n,this._list.splice(n,0,r)},e.prototype.getLastSegmentBefore=function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null},e.prototype.getLastSampleBefore=function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null},e.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),r=this._list[t].syncPoints;0===r.length&&t>0;)t--,r=this._list[t].syncPoints;return r.length>0?r[r.length-1]:null},e}()},"./src/core/mse-controller.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/events/events.js"),n=r.n(o),i=r("./src/utils/logger.js"),s=r("./src/utils/browser.js"),a=r("./src/core/mse-events.js"),c=r("./src/core/media-segment-info.js"),u=r("./src/utils/exception.js"),l=function(){function e(e){this.TAG="MSEController",this._config=e,this._emitter=new(n()),this._config.isLive&&void 0==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new c.IDRSampleList}return e.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new u.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},e.prototype.detachMediaElement=function(){if(this._mediaSource){var e=this._mediaSource;for(var t in this._sourceBuffers){var r=this._pendingSegments[t];r.splice(0,r.length),this._pendingSegments[t]=null,this._pendingRemoveRanges[t]=null,this._lastInitSegments[t]=null;var o=this._sourceBuffers[t];if(o){if("closed"!==e.readyState){try{e.removeSourceBuffer(o)}catch(error){i.default.e(this.TAG,error.message)}o.removeEventListener("error",this.e.onSourceBufferError),o.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[t]=null,this._sourceBuffers[t]=null}}if("open"===e.readyState)try{e.endOfStream()}catch(error){i.default.e(this.TAG,error.message)}e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},e.prototype.appendInitSegment=function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var r=e,o=""+r.container;r.codec&&r.codec.length>0&&(o+=";codecs="+r.codec);var n=!1;if(i.default.v(this.TAG,"Received Initialization Segment, mimeType: "+o),this._lastInitSegments[r.type]=r,o!==this._mimeTypes[r.type]){if(this._mimeTypes[r.type])i.default.v(this.TAG,"Notice: "+r.type+" mimeType changed, origin: "+this._mimeTypes[r.type]+", target: "+o);else{n=!0;try{var c=this._sourceBuffers[r.type]=this._mediaSource.addSourceBuffer(o);c.addEventListener("error",this.e.onSourceBufferError),c.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(error){return i.default.e(this.TAG,error.message),void this._emitter.emit(a.default.ERROR,{code:error.code,msg:error.message})}}this._mimeTypes[r.type]=o}t||this._pendingSegments[r.type].push(r),n||this._sourceBuffers[r.type]&&!this._sourceBuffers[r.type].updating&&this._doAppendSegments(),s.default.safari&&"audio/mpeg"===r.container&&r.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=r.mediaDuration/1e3,this._updateMediaSourceDuration())},e.prototype.appendMediaSegment=function(e){var t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var r=this._sourceBuffers[t.type];!r||r.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},e.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var r=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{r.abort()}catch(error){i.default.e(this.TAG,error.message)}this._idrList.clear();var o=this._pendingSegments[t];if(o.splice(0,o.length),"closed"!==this._mediaSource.readyState){for(var n=0;n<r.buffered.length;n++){var a=r.buffered.start(n),c=r.buffered.end(n);this._pendingRemoveRanges[t].push({start:a,end:c})}if(r.updating||this._doRemoveRanges(),s.default.safari){var u=this._lastInitSegments[t];u&&(this._pendingSegments[t].push(u),r.updating||this._doAppendSegments())}}}},e.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},e.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},e.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var r=this._sourceBuffers[t];if(r){var o=r.buffered;if(o.length>=1&&e-o.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},e.prototype._doCleanupSourceBuffer=function(){var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var r=this._sourceBuffers[t];if(r){for(var o=r.buffered,n=!1,i=0;i<o.length;i++){var s=o.start(i),a=o.end(i);if(s<=e&&e<a+3){if(e-s>=this._config.autoCleanupMaxBackwardDuration){n=!0;var c=e-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[t].push({start:s,end:c})}}else a<e&&(n=!0,this._pendingRemoveRanges[t].push({start:s,end:a}))}n&&!r.updating&&this._doRemoveRanges()}}},e.prototype._updateMediaSourceDuration=function(){var e=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(e.video&&e.video.updating||e.audio&&e.audio.updating)){var t=this._mediaSource.duration,r=this._pendingMediaDuration;r>0&&(isNaN(t)||r>t)&&(i.default.v(this.TAG,"Update MediaSource duration from "+t+" to "+r),this._mediaSource.duration=r),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},e.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],r=this._pendingRemoveRanges[e];r.length&&!t.updating;){var o=r.shift();t.remove(o.start,o.end)}},e.prototype._doAppendSegments=function(){var e=this._pendingSegments;for(var t in e)if(this._sourceBuffers[t]&&!this._sourceBuffers[t].updating&&e[t].length>0){var r=e[t].shift();if(r.timestampOffset){var o=this._sourceBuffers[t].timestampOffset,n=r.timestampOffset/1e3;Math.abs(o-n)>.1&&(i.default.v(this.TAG,"Update MPEG audio timestampOffset from "+o+" to "+n),this._sourceBuffers[t].timestampOffset=n),delete r.timestampOffset}if(!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[t].appendBuffer(r.data),this._isBufferFull=!1,"video"===t&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(error){this._pendingSegments[t].unshift(r),22===error.code?(this._isBufferFull||this._emitter.emit(a.default.BUFFER_FULL),this._isBufferFull=!0):(i.default.e(this.TAG,error.message),this._emitter.emit(a.default.ERROR,{code:error.code,msg:error.message}))}}},e.prototype._onSourceOpen=function(){if(i.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(a.default.SOURCE_OPEN)},e.prototype._onSourceEnded=function(){i.default.v(this.TAG,"MediaSource onSourceEnded")},e.prototype._onSourceClose=function(){i.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},e.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return e.video.length>0||e.audio.length>0},e.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0},e.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(a.default.UPDATE_END)},e.prototype._onSourceBufferError=function(e){i.default.e(this.TAG,"SourceBuffer Error: "+e)},e}();t.default=l},"./src/core/mse-events.js":function(e,t,r){"use strict";r.r(t),t.default={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"}},"./src/core/transmuxer.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/events/events.js"),n=r.n(o),i=r("./node_modules/webworkify-webpack/index.js"),s=r.n(i),a=r("./src/utils/logger.js"),c=r("./src/utils/logging-control.js"),u=r("./src/core/transmuxing-controller.js"),l=r("./src/core/transmuxing-events.js"),d=r("./src/core/media-info.js"),h=function(){function e(e,t){if(this.TAG="Transmuxer",this._emitter=new(n()),t.enableWorker&&"undefined"!==typeof Worker)try{this._worker=s()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},c.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:c.default.getConfig()})}catch(error){a.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new u.default(e,t)}else this._controller=new u.default(e,t);if(this._controller){var r=this._controller;r.on(l.default.IO_ERROR,this._onIOError.bind(this)),r.on(l.default.DEMUX_ERROR,this._onDemuxError.bind(this)),r.on(l.default.INIT_SEGMENT,this._onInitSegment.bind(this)),r.on(l.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),r.on(l.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),r.on(l.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),r.on(l.default.MEDIA_INFO,this._onMediaInfo.bind(this)),r.on(l.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),r.on(l.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),r.on(l.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),r.on(l.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return e.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),c.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.hasWorker=function(){return null!=this._worker},e.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},e.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},e.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},e.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},e.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},e.prototype._onInitSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(l.default.INIT_SEGMENT,e,t)}))},e.prototype._onMediaSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(l.default.MEDIA_SEGMENT,e,t)}))},e.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(l.default.LOADING_COMPLETE)}))},e.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(l.default.RECOVERED_EARLY_EOF)}))},e.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(l.default.MEDIA_INFO,e)}))},e.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(l.default.METADATA_ARRIVED,e)}))},e.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(l.default.SCRIPTDATA_ARRIVED,e)}))},e.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(l.default.STATISTICS_INFO,e)}))},e.prototype._onIOError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(l.default.IO_ERROR,e,t)}))},e.prototype._onDemuxError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(l.default.DEMUX_ERROR,e,t)}))},e.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(l.default.RECOMMEND_SEEKPOINT,e)}))},e.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},e.prototype._onWorkerMessage=function(e){var t=e.data,r=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case l.default.INIT_SEGMENT:case l.default.MEDIA_SEGMENT:this._emitter.emit(t.msg,r.type,r.data);break;case l.default.LOADING_COMPLETE:case l.default.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case l.default.MEDIA_INFO:Object.setPrototypeOf(r,d.default.prototype),this._emitter.emit(t.msg,r);break;case l.default.METADATA_ARRIVED:case l.default.SCRIPTDATA_ARRIVED:case l.default.STATISTICS_INFO:this._emitter.emit(t.msg,r);break;case l.default.IO_ERROR:case l.default.DEMUX_ERROR:this._emitter.emit(t.msg,r.type,r.info);break;case l.default.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,r);break;case"logcat_callback":a.default.emitter.emit("log",r.type,r.logcat)}},e}();t.default=h},"./src/core/transmuxing-controller.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/events/events.js"),n=r.n(o),i=r("./src/utils/logger.js"),s=r("./src/utils/browser.js"),a=r("./src/core/media-info.js"),c=r("./src/demux/flv-demuxer.js"),u=r("./src/remux/mp4-remuxer.js"),l=r("./src/demux/demux-errors.js"),d=r("./src/io/io-controller.js"),h=r("./src/core/transmuxing-events.js"),p=function(){function e(e,t){this.TAG="TransmuxingController",this._emitter=new(n()),this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!==typeof e.cors&&(e.cors=!0),"boolean"!==typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;var r=0;this._mediaDataSource.segments.forEach((function(o){o.timestampBase=r,r+=o.duration,o.cors=e.cors,o.withCredentials=e.withCredentials,t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy)})),isNaN(r)||this._mediaDataSource.duration===r||(this._mediaDataSource.duration=r),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return e.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},e.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var r=this._mediaDataSource.segments[e],o=this._ioctl=new d.default(r,this._config,e);o.onError=this._onIOException.bind(this),o.onSeeked=this._onIOSeeked.bind(this),o.onComplete=this._onIOComplete.bind(this),o.onRedirect=this._onIORedirect.bind(this),o.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):o.onDataArrival=this._onInitChunkArrival.bind(this),o.open(t)},e.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},e.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},e.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},e.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},e.prototype.seek=function(e){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var t=this._searchSegmentIndexContains(e);if(t===this._currentSegmentIndex){var r=this._mediaInfo.segments[t];if(void 0==r)this._pendingSeekTime=e;else{var o=r.getNearestKeyframe(e);this._remuxer.seek(o.milliseconds),this._ioctl.seek(o.fileposition),this._pendingResolveSeekPoint=o.milliseconds}}else{var n=this._mediaInfo.segments[t];void 0==n?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(o=n.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,o.fileposition),this._pendingResolveSeekPoint=o.milliseconds,this._reportSegmentMediaInfo(t))}this._enableStatisticsReporter()}},e.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,r=t.length-1,o=0;o<t.length;o++)if(e<t[o].timestampBase){r=o-1;break}return r},e.prototype._onInitChunkArrival=function(e,t){var r=this,o=null,n=0;if(t>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,n=this._demuxer.parseChunks(e,t);else if((o=c.default.probe(e)).match){this._demuxer=new c.default(o,this._config),this._remuxer||(this._remuxer=new u.default(this._config));var s=this._mediaDataSource;void 0==s.duration||isNaN(s.duration)||(this._demuxer.overridedDuration=s.duration),"boolean"===typeof s.hasAudio&&(this._demuxer.overridedHasAudio=s.hasAudio),"boolean"===typeof s.hasVideo&&(this._demuxer.overridedHasVideo=s.hasVideo),this._demuxer.timestampBase=s.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),n=this._demuxer.parseChunks(e,t)}else o=null,i.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then((function(){r._internalAbort()})),this._emitter.emit(h.default.DEMUX_ERROR,l.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),n=0;return n},e.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,a.default.prototype));var r=Object.assign({},e);Object.setPrototypeOf(r,a.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=r,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},e.prototype._onMetaDataArrived=function(e){this._emitter.emit(h.default.METADATA_ARRIVED,e)},e.prototype._onScriptDataArrived=function(e){this._emitter.emit(h.default.SCRIPTDATA_ARRIVED,e)},e.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},e.prototype._onIOComplete=function(e){var t=e+1;t<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(t)):(this._remuxer.flushStashedSamples(),this._emitter.emit(h.default.LOADING_COMPLETE),this._disableStatisticsReporter())},e.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},e.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(h.default.RECOVERED_EARLY_EOF)},e.prototype._onIOException=function(e,t){i.default.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(h.default.IO_ERROR,e,t),this._disableStatisticsReporter()},e.prototype._onDemuxException=function(e,t){i.default.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(h.default.DEMUX_ERROR,e,t)},e.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(h.default.INIT_SEGMENT,e,t)},e.prototype._onRemuxerMediaSegmentArrival=function(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(h.default.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){var r=t.info.syncPoints,o=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,s.default.safari&&r.length>0&&r[0].originalDts===o&&(o=r[0].pts),this._emitter.emit(h.default.RECOMMEND_SEEKPOINT,o)}},e.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},e.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype._reportSegmentMediaInfo=function(e){var t=this._mediaInfo.segments[e],r=Object.assign({},t);r.duration=this._mediaInfo.duration,r.segmentCount=this._mediaInfo.segmentCount,delete r.segments,delete r.keyframesIndex,this._emitter.emit(h.default.MEDIA_INFO,r)},e.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(h.default.STATISTICS_INFO,e)},e}();t.default=p},"./src/core/transmuxing-events.js":function(e,t,r){"use strict";r.r(t),t.default={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},"./src/core/transmuxing-worker.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/logging-control.js"),n=r("./src/utils/polyfill.js"),i=r("./src/core/transmuxing-controller.js"),s=r("./src/core/transmuxing-events.js");t.default=function(e){var t=null,r=function(t,r){e.postMessage({msg:"logcat_callback",data:{type:t,logcat:r}})}.bind(this);function a(t,r){var o={msg:s.default.INIT_SEGMENT,data:{type:t,data:r}};e.postMessage(o,[r.data])}function c(t,r){var o={msg:s.default.MEDIA_SEGMENT,data:{type:t,data:r}};e.postMessage(o,[r.data])}function u(){var t={msg:s.default.LOADING_COMPLETE};e.postMessage(t)}function l(){var t={msg:s.default.RECOVERED_EARLY_EOF};e.postMessage(t)}function d(t){var r={msg:s.default.MEDIA_INFO,data:t};e.postMessage(r)}function h(t){var r={msg:s.default.METADATA_ARRIVED,data:t};e.postMessage(r)}function p(t){var r={msg:s.default.SCRIPTDATA_ARRIVED,data:t};e.postMessage(r)}function f(t){var r={msg:s.default.STATISTICS_INFO,data:t};e.postMessage(r)}function _(t,r){e.postMessage({msg:s.default.IO_ERROR,data:{type:t,info:r}})}function g(t,r){e.postMessage({msg:s.default.DEMUX_ERROR,data:{type:t,info:r}})}function m(t){e.postMessage({msg:s.default.RECOMMEND_SEEKPOINT,data:t})}n.default.install(),e.addEventListener("message",(function(n){switch(n.data.cmd){case"init":(t=new i.default(n.data.param[0],n.data.param[1])).on(s.default.IO_ERROR,_.bind(this)),t.on(s.default.DEMUX_ERROR,g.bind(this)),t.on(s.default.INIT_SEGMENT,a.bind(this)),t.on(s.default.MEDIA_SEGMENT,c.bind(this)),t.on(s.default.LOADING_COMPLETE,u.bind(this)),t.on(s.default.RECOVERED_EARLY_EOF,l.bind(this)),t.on(s.default.MEDIA_INFO,d.bind(this)),t.on(s.default.METADATA_ARRIVED,h.bind(this)),t.on(s.default.SCRIPTDATA_ARRIVED,p.bind(this)),t.on(s.default.STATISTICS_INFO,f.bind(this)),t.on(s.default.RECOMMEND_SEEKPOINT,m.bind(this));break;case"destroy":t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(n.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":var v=n.data.param;o.default.applyConfig(v),!0===v.enableCallback?o.default.addLogListener(r):o.default.removeLogListener(r)}}))}},"./src/demux/amf-parser.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/logger.js"),n=r("./src/utils/utf8-conv.js"),i=r("./src/utils/exception.js"),s=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),a=function(){function e(){}return e.parseScriptData=function(t,r,n){var i={};try{var s=e.parseValue(t,r,n),a=e.parseValue(t,r+s.size,n-s.size);i[s.data]=a.data}catch(c){o.default.e("AMF",c.toString())}return i},e.parseObject=function(t,r,o){if(o<3)throw new i.IllegalStateException("Data not enough when parse ScriptDataObject");var n=e.parseString(t,r,o),s=e.parseValue(t,r+n.size,o-n.size),a=s.objectEnd;return{data:{name:n.data,value:s.data},size:n.size+s.size,objectEnd:a}},e.parseVariable=function(t,r,o){return e.parseObject(t,r,o)},e.parseString=function(e,t,r){if(r<2)throw new i.IllegalStateException("Data not enough when parse String");var o=new DataView(e,t,r).getUint16(0,!s);return{data:o>0?(0,n.default)(new Uint8Array(e,t+2,o)):"",size:2+o}},e.parseLongString=function(e,t,r){if(r<4)throw new i.IllegalStateException("Data not enough when parse LongString");var o=new DataView(e,t,r).getUint32(0,!s);return{data:o>0?(0,n.default)(new Uint8Array(e,t+4,o)):"",size:4+o}},e.parseDate=function(e,t,r){if(r<10)throw new i.IllegalStateException("Data size invalid when parse Date");var o=new DataView(e,t,r),n=o.getFloat64(0,!s),a=o.getInt16(8,!s);return{data:new Date(n+=60*a*1e3),size:10}},e.parseValue=function(t,r,n){if(n<1)throw new i.IllegalStateException("Data not enough when parse Value");var a,c=new DataView(t,r,n),u=1,l=c.getUint8(0),d=!1;try{switch(l){case 0:a=c.getFloat64(1,!s),u+=8;break;case 1:a=!!c.getUint8(1),u+=1;break;case 2:var h=e.parseString(t,r+1,n-1);a=h.data,u+=h.size;break;case 3:a={};var p=0;for(9===(16777215&c.getUint32(n-4,!s))&&(p=3);u<n-4;){var f=e.parseObject(t,r+u,n-u-p);if(f.objectEnd)break;a[f.data.name]=f.data.value,u+=f.size}u<=n-3&&9===(16777215&c.getUint32(u-1,!s))&&(u+=3);break;case 8:for(a={},u+=4,p=0,9===(16777215&c.getUint32(n-4,!s))&&(p=3);u<n-8;){var _=e.parseVariable(t,r+u,n-u-p);if(_.objectEnd)break;a[_.data.name]=_.data.value,u+=_.size}u<=n-3&&9===(16777215&c.getUint32(u-1,!s))&&(u+=3);break;case 9:a=void 0,u=1,d=!0;break;case 10:a=[];var g=c.getUint32(1,!s);u+=4;for(var m=0;m<g;m++){var v=e.parseValue(t,r+u,n-u);a.push(v.data),u+=v.size}break;case 11:var y=e.parseDate(t,r+1,n-1);a=y.data,u+=y.size;break;case 12:var b=e.parseString(t,r+1,n-1);a=b.data,u+=b.size;break;default:u=n,o.default.w("AMF","Unsupported AMF value type "+l)}}catch(S){o.default.e("AMF",S.toString())}return{data:a,size:u,objectEnd:d}},e}();t.default=a},"./src/demux/demux-errors.js":function(e,t,r){"use strict";r.r(t),t.default={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},"./src/demux/exp-golomb.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/exception.js"),n=function(){function e(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}return e.prototype.destroy=function(){this._buffer=null},e.prototype._fillCurrentWord=function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new o.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),r=new Uint8Array(4);r.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(r.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t},e.prototype.readBits=function(e){if(e>32)throw new o.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var r=this._current_word_bits_left?this._current_word:0;r>>>=32-this._current_word_bits_left;var n=e-this._current_word_bits_left;this._fillCurrentWord();var i=Math.min(n,this._current_word_bits_left),s=this._current_word>>>32-i;return this._current_word<<=i,this._current_word_bits_left-=i,r=r<<i|s},e.prototype.readBool=function(){return 1===this.readBits(1)},e.prototype.readByte=function(){return this.readBits(8)},e.prototype._skipLeadingZero=function(){var e;for(e=0;e<this._current_word_bits_left;e++)if(0!==(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},e.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},e.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},e}();t.default=n},"./src/demux/flv-demuxer.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/logger.js"),n=r("./src/demux/amf-parser.js"),i=r("./src/demux/sps-parser.js"),s=r("./src/demux/demux-errors.js"),a=r("./src/core/media-info.js"),c=r("./src/utils/exception.js"),u=function(){function e(e,t){this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new a.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}()}return e.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},e.probe=function(e){var t=new Uint8Array(e),r={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return r;var o,n,i=(4&t[4])>>>2!==0,s=0!==(1&t[4]),a=(o=t)[n=5]<<24|o[n+1]<<16|o[n+2]<<8|o[n+3];return a<9?r:{match:!0,consumed:a,dataOffset:a,hasAudioTrack:i,hasVideoTrack:s}},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(e.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),e.prototype.resetMediaInfo=function(){this._mediaInfo=new a.default},e.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},e.prototype.parseChunks=function(t,r){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new c.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0,i=this._littleEndian;if(0===r){if(!(t.byteLength>13))return 0;n=e.probe(t).dataOffset}for(this._firstParse&&(this._firstParse=!1,r+n!==this._dataOffset&&o.default.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(s=new DataView(t,n)).getUint32(0,!i)&&o.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4);n<t.byteLength;){this._dispatch=!0;var s=new DataView(t,n);if(n+11+4>t.byteLength)break;var a=s.getUint8(0),u=16777215&s.getUint32(0,!i);if(n+11+u+4>t.byteLength)break;if(8===a||9===a||18===a){var l=s.getUint8(4),d=s.getUint8(5),h=s.getUint8(6)|d<<8|l<<16|s.getUint8(7)<<24;0!==(16777215&s.getUint32(7,!i))&&o.default.w(this.TAG,"Meet tag which has StreamID != 0!");var p=n+11;switch(a){case 8:this._parseAudioData(t,p,u,h);break;case 9:this._parseVideoData(t,p,u,h,r+n);break;case 18:this._parseScriptData(t,p,u)}var f=s.getUint32(11+u,!i);f!==11+u&&o.default.w(this.TAG,"Invalid PrevTagSize "+f),n+=11+u+4}else o.default.w(this.TAG,"Unsupported tag type "+a+", skipped"),n+=11+u+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),n},e.prototype._parseScriptData=function(e,t,r){var i=n.default.parseScriptData(e,t,r);if(i.hasOwnProperty("onMetaData")){if(null==i.onMetaData||"object"!==typeof i.onMetaData)return void o.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&o.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=i;var s=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},s)),"boolean"===typeof s.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=s.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"===typeof s.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=s.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"===typeof s.audiodatarate&&(this._mediaInfo.audioDataRate=s.audiodatarate),"number"===typeof s.videodatarate&&(this._mediaInfo.videoDataRate=s.videodatarate),"number"===typeof s.width&&(this._mediaInfo.width=s.width),"number"===typeof s.height&&(this._mediaInfo.height=s.height),"number"===typeof s.duration){if(!this._durationOverrided){var a=Math.floor(s.duration*this._timescale);this._duration=a,this._mediaInfo.duration=a}}else this._mediaInfo.duration=0;if("number"===typeof s.framerate){var c=Math.floor(1e3*s.framerate);if(c>0){var u=c/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=u,this._referenceFrameRate.fps_num=c,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=u}}if("object"===typeof s.keyframes){this._mediaInfo.hasKeyframesIndex=!0;var l=s.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(l),s.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=s,o.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(i).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},i))},e.prototype._parseKeyframesIndex=function(e){for(var t=[],r=[],o=1;o<e.times.length;o++){var n=this._timestampBase+Math.floor(1e3*e.times[o]);t.push(n),r.push(e.filepositions[o])}return{times:t,filepositions:r}},e.prototype._parseAudioData=function(e,t,r,n){if(r<=1)o.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var i=new DataView(e,t,r).getUint8(0),a=i>>>4;if(2===a||10===a){var c=0,u=(12&i)>>>2;if(u>=0&&u<=4){c=this._flvSoundRateTable[u];var l=1&i,d=this._audioMetadata,h=this._audioTrack;if(d||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(d=this._audioMetadata={}).type="audio",d.id=h.id,d.timescale=this._timescale,d.duration=this._duration,d.audioSampleRate=c,d.channelCount=0===l?1:2),10===a){var p=this._parseAACAudioData(e,t+1,r-1);if(void 0==p)return;if(0===p.packetType){d.config&&o.default.w(this.TAG,"Found another AudioSpecificConfig!");var f=p.data;d.audioSampleRate=f.samplingRate,d.channelCount=f.channelCount,d.codec=f.codec,d.originalCodec=f.originalCodec,d.config=f.config,d.refSampleDuration=1024/d.audioSampleRate*d.timescale,o.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",d),(m=this._mediaInfo).audioCodec=d.originalCodec,m.audioSampleRate=d.audioSampleRate,m.audioChannelCount=d.channelCount,m.hasVideo?null!=m.videoCodec&&(m.mimeType='video/x-flv; codecs="'+m.videoCodec+","+m.audioCodec+'"'):m.mimeType='video/x-flv; codecs="'+m.audioCodec+'"',m.isComplete()&&this._onMediaInfo(m)}else if(1===p.packetType){var _=this._timestampBase+n,g={unit:p.data,length:p.data.byteLength,dts:_,pts:_};h.samples.push(g),h.length+=p.data.length}else o.default.e(this.TAG,"Flv: Unsupported AAC data type "+p.packetType)}else if(2===a){if(!d.codec){var m;if(void 0==(f=this._parseMP3AudioData(e,t+1,r-1,!0)))return;d.audioSampleRate=f.samplingRate,d.channelCount=f.channelCount,d.codec=f.codec,d.originalCodec=f.originalCodec,d.refSampleDuration=1152/d.audioSampleRate*d.timescale,o.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",d),(m=this._mediaInfo).audioCodec=d.codec,m.audioSampleRate=d.audioSampleRate,m.audioChannelCount=d.channelCount,m.audioDataRate=f.bitRate,m.hasVideo?null!=m.videoCodec&&(m.mimeType='video/x-flv; codecs="'+m.videoCodec+","+m.audioCodec+'"'):m.mimeType='video/x-flv; codecs="'+m.audioCodec+'"',m.isComplete()&&this._onMediaInfo(m)}var v=this._parseMP3AudioData(e,t+1,r-1,!1);if(void 0==v)return;_=this._timestampBase+n;var y={unit:v,length:v.byteLength,dts:_,pts:_};h.samples.push(y),h.length+=v.length}}else this._onError(s.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+u)}else this._onError(s.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+a)}},e.prototype._parseAACAudioData=function(e,t,r){if(!(r<=1)){var n={},i=new Uint8Array(e,t,r);return n.packetType=i[0],0===i[0]?n.data=this._parseAACAudioSpecificConfig(e,t+1,r-1):n.data=i.subarray(1),n}o.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},e.prototype._parseAACAudioSpecificConfig=function(e,t,r){var o,n,i=new Uint8Array(e,t,r),a=null,c=0,u=null;if(c=o=i[0]>>>3,(n=(7&i[0])<<1|i[1]>>>7)<0||n>=this._mpegSamplingRates.length)this._onError(s.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var l=this._mpegSamplingRates[n],d=(120&i[1])>>>3;if(!(d<0||d>=8)){5===c&&(u=(7&i[1])<<1|i[2]>>>7,i[2]);var h=self.navigator.userAgent.toLowerCase();return-1!==h.indexOf("firefox")?n>=6?(c=5,a=new Array(4),u=n-3):(c=2,a=new Array(2),u=n):-1!==h.indexOf("android")?(c=2,a=new Array(2),u=n):(c=5,u=n,a=new Array(4),n>=6?u=n-3:1===d&&(c=2,a=new Array(2),u=n)),a[0]=c<<3,a[0]|=(15&n)>>>1,a[1]=(15&n)<<7,a[1]|=(15&d)<<3,5===c&&(a[1]|=(15&u)>>>1,a[2]=(1&u)<<7,a[2]|=8,a[3]=0),{config:a,samplingRate:l,channelCount:d,codec:"mp4a.40."+c,originalCodec:"mp4a.40."+o}}this._onError(s.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},e.prototype._parseMP3AudioData=function(e,t,r,n){if(!(r<4)){this._littleEndian;var i=new Uint8Array(e,t,r),s=null;if(n){if(255!==i[0])return;var a=i[1]>>>3&3,c=(6&i[1])>>1,u=(240&i[2])>>>4,l=(12&i[2])>>>2,d=3!==(i[3]>>>6&3)?2:1,h=0,p=0;switch(a){case 0:h=this._mpegAudioV25SampleRateTable[l];break;case 2:h=this._mpegAudioV20SampleRateTable[l];break;case 3:h=this._mpegAudioV10SampleRateTable[l]}switch(c){case 1:u<this._mpegAudioL3BitRateTable.length&&(p=this._mpegAudioL3BitRateTable[u]);break;case 2:u<this._mpegAudioL2BitRateTable.length&&(p=this._mpegAudioL2BitRateTable[u]);break;case 3:u<this._mpegAudioL1BitRateTable.length&&(p=this._mpegAudioL1BitRateTable[u])}s={bitRate:p,samplingRate:h,channelCount:d,codec:"mp3",originalCodec:"mp3"}}else s=i;return s}o.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},e.prototype._parseVideoData=function(e,t,r,n,i){if(r<=1)o.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var a=new Uint8Array(e,t,r)[0],c=(240&a)>>>4,u=15&a;7===u?this._parseAVCVideoPacket(e,t+1,r-1,n,i,c):this._onError(s.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+u)}},e.prototype._parseAVCVideoPacket=function(e,t,r,n,i,a){if(r<4)o.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var c=this._littleEndian,u=new DataView(e,t,r),l=u.getUint8(0),d=(16777215&u.getUint32(0,!c))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,r-4);else if(1===l)this._parseAVCVideoData(e,t+4,r-4,n,i,a,d);else if(2!==l)return void this._onError(s.default.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}},e.prototype._parseAVCDecoderConfigurationRecord=function(e,t,r){if(r<7)o.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var n=this._videoMetadata,a=this._videoTrack,c=this._littleEndian,u=new DataView(e,t,r);n?"undefined"!==typeof n.avcc&&o.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(n=this._videoMetadata={}).type="video",n.id=a.id,n.timescale=this._timescale,n.duration=this._duration);var l=u.getUint8(0),d=u.getUint8(1);if(u.getUint8(2),u.getUint8(3),1===l&&0!==d)if(this._naluLengthSize=1+(3&u.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var h=31&u.getUint8(5);if(0!==h){h>1&&o.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+h);for(var p=6,f=0;f<h;f++){var _=u.getUint16(p,!c);if(p+=2,0!==_){var g=new Uint8Array(e,t+p,_);p+=_;var m=i.default.parseSPS(g);if(0===f){n.codecWidth=m.codec_size.width,n.codecHeight=m.codec_size.height,n.presentWidth=m.present_size.width,n.presentHeight=m.present_size.height,n.profile=m.profile_string,n.level=m.level_string,n.bitDepth=m.bit_depth,n.chromaFormat=m.chroma_format,n.sarRatio=m.sar_ratio,n.frameRate=m.frame_rate,!1!==m.frame_rate.fixed&&0!==m.frame_rate.fps_num&&0!==m.frame_rate.fps_den||(n.frameRate=this._referenceFrameRate);var v=n.frameRate.fps_den,y=n.frameRate.fps_num;n.refSampleDuration=n.timescale*(v/y);for(var b=g.subarray(1,4),S="avc1.",E=0;E<3;E++){var T=b[E].toString(16);T.length<2&&(T="0"+T),S+=T}n.codec=S;var w=this._mediaInfo;w.width=n.codecWidth,w.height=n.codecHeight,w.fps=n.frameRate.fps,w.profile=n.profile,w.level=n.level,w.refFrames=m.ref_frames,w.chromaFormat=m.chroma_format_string,w.sarNum=n.sarRatio.width,w.sarDen=n.sarRatio.height,w.videoCodec=S,w.hasAudio?null!=w.audioCodec&&(w.mimeType='video/x-flv; codecs="'+w.videoCodec+","+w.audioCodec+'"'):w.mimeType='video/x-flv; codecs="'+w.videoCodec+'"',w.isComplete()&&this._onMediaInfo(w)}}}var C=u.getUint8(p);if(0!==C){for(C>1&&o.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+C),p++,f=0;f<C;f++)_=u.getUint16(p,!c),p+=2,0!==_&&(p+=_);n.avcc=new Uint8Array(r),n.avcc.set(new Uint8Array(e,t,r),0),o.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",n)}else this._onError(s.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(s.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(s.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(s.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},e.prototype._parseAVCVideoData=function(e,t,r,n,i,s,a){for(var c=this._littleEndian,u=new DataView(e,t,r),l=[],d=0,h=0,p=this._naluLengthSize,f=this._timestampBase+n,_=1===s;h<r;){if(h+4>=r){o.default.w(this.TAG,"Malformed Nalu near timestamp "+f+", offset = "+h+", dataSize = "+r);break}var g=u.getUint32(h,!c);if(3===p&&(g>>>=8),g>r-p)return void o.default.w(this.TAG,"Malformed Nalus near timestamp "+f+", NaluSize > DataSize!");var m=31&u.getUint8(h+p);5===m&&(_=!0);var v=new Uint8Array(e,t+h,p+g),y={type:m,data:v};l.push(y),d+=v.byteLength,h+=p+g}if(l.length){var b=this._videoTrack,S={units:l,length:d,isKeyframe:_,dts:f,cts:a,pts:f+a};_&&(S.fileposition=i),b.samples.push(S),b.length+=d}},e}();t.default=u},"./src/demux/sps-parser.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/demux/exp-golomb.js"),n=function(){function e(){}return e._ebsp2rbsp=function(e){for(var t=e,r=t.byteLength,o=new Uint8Array(r),n=0,i=0;i<r;i++)i>=2&&3===t[i]&&0===t[i-1]&&0===t[i-2]||(o[n]=t[i],n++);return new Uint8Array(o.buffer,0,n)},e.parseSPS=function(t){var r=e._ebsp2rbsp(t),n=new o.default(r);n.readByte();var i=n.readByte();n.readByte();var s=n.readByte();n.readUEG();var a=e.getProfileString(i),c=e.getLevelString(s),u=1,l=420,d=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(u=n.readUEG())&&n.readBits(1),u<=3&&(l=[0,420,422,444][u]),d=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool()))for(var h=3!==u?8:12,p=0;p<h;p++)n.readBool()&&(p<6?e._skipScalingList(n,16):e._skipScalingList(n,64));n.readUEG();var f=n.readUEG();if(0===f)n.readUEG();else if(1===f){n.readBits(1),n.readSEG(),n.readSEG();var _=n.readUEG();for(p=0;p<_;p++)n.readSEG()}var g=n.readUEG();n.readBits(1);var m=n.readUEG(),v=n.readUEG(),y=n.readBits(1);0===y&&n.readBits(1),n.readBits(1);var b=0,S=0,E=0,T=0;n.readBool()&&(b=n.readUEG(),S=n.readUEG(),E=n.readUEG(),T=n.readUEG());var w=1,C=1,I=0,O=!0,k=0,R=0;if(n.readBool()){if(n.readBool()){var A=n.readByte();A>0&&A<16?(w=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][A-1],C=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][A-1]):255===A&&(w=n.readByte()<<8|n.readByte(),C=n.readByte()<<8|n.readByte())}if(n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()){var P=n.readBits(32),L=n.readBits(32);O=n.readBool(),I=(k=L)/(R=2*P)}}var N=1;1===w&&1===C||(N=w/C);var D=0,M=0;0===u?(D=1,M=2-y):(D=3===u?1:2,M=(1===u?2:1)*(2-y));var x=16*(m+1),B=16*(v+1)*(2-y);x-=(b+S)*D,B-=(E+T)*M;var U=Math.ceil(x*N);return n.destroy(),n=null,{profile_string:a,level_string:c,bit_depth:d,ref_frames:g,chroma_format:l,chroma_format_string:e.getChromaFormatString(l),frame_rate:{fixed:O,fps:I,fps_den:R,fps_num:k},sar_ratio:{width:w,height:C},codec_size:{width:x,height:B},present_size:{width:U,height:B}}},e._skipScalingList=function(e,t){for(var r=8,o=8,n=0;n<t;n++)0!==o&&(o=(r+e.readSEG()+256)%256),r=0===o?r:o},e.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},e.getLevelString=function(e){return(e/10).toFixed(1)},e.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},e}();t.default=n},"./src/flv.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/polyfill.js"),n=r("./src/core/features.js"),i=r("./src/io/loader.js"),s=r("./src/player/flv-player.js"),a=r("./src/player/native-player.js"),c=r("./src/player/player-events.js"),u=r("./src/player/player-errors.js"),l=r("./src/utils/logging-control.js"),d=r("./src/utils/exception.js");o.default.install();var h={createPlayer:function(e,t){var r=e;if(null==r||"object"!==typeof r)throw new d.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!r.hasOwnProperty("type"))throw new d.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");return"flv"===r.type?new s.default(r,t):new a.default(r,t)},isSupported:function(){return n.default.supportMSEH264Playback()},getFeatureList:function(){return n.default.getFeatureList()}};h.BaseLoader=i.BaseLoader,h.LoaderStatus=i.LoaderStatus,h.LoaderErrors=i.LoaderErrors,h.Events=c.default,h.ErrorTypes=u.ErrorTypes,h.ErrorDetails=u.ErrorDetails,h.FlvPlayer=s.default,h.NativePlayer=a.default,h.LoggingControl=l.default,Object.defineProperty(h,"version",{enumerable:!0,get:function(){return"1.6.2"}}),t.default=h},"./src/index.js":function(e,t,r){e.exports=r("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/browser.js"),n=r("./src/io/loader.js"),i=r("./src/utils/exception.js"),s=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(t,r){var o=e.call(this,"fetch-stream-loader")||this;return o.TAG="FetchStreamLoader",o._seekHandler=t,o._config=r,o._needStash=!0,o._requestAbort=!1,o._contentLength=null,o._receivedLength=0,o}return s(t,e),t.isSupported=function(){try{var e=o.default.msedge&&o.default.version.minor>=15048,t=!o.default.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(r){return!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){var r=this;this._dataSource=e,this._range=t;var o=e.url;this._config.reuseRedirectedURL&&void 0!=e.redirectedURL&&(o=e.redirectedURL);var s=this._seekHandler.getConfig(o,t),a=new self.Headers;if("object"===typeof s.headers){var c=s.headers;for(var u in c)c.hasOwnProperty(u)&&a.append(u,c[u])}var l={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"===typeof this._config.headers)for(var u in this._config.headers)a.append(u,this._config.headers[u]);!1===e.cors&&(l.mode="same-origin"),e.withCredentials&&(l.credentials="include"),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,l.signal=this._abortController.signal),this._status=n.LoaderStatus.kConnecting,self.fetch(s.url,l).then((function(e){if(r._requestAbort)return r._status=n.LoaderStatus.kIdle,void e.body.cancel();if(e.ok&&e.status>=200&&e.status<=299){if(e.url!==s.url&&r._onURLRedirect){var t=r._seekHandler.removeURLParameters(e.url);r._onURLRedirect(t)}var o=e.headers.get("Content-Length");return null!=o&&(r._contentLength=parseInt(o),0!==r._contentLength&&r._onContentLengthKnown&&r._onContentLengthKnown(r._contentLength)),r._pump.call(r,e.body.getReader())}if(r._status=n.LoaderStatus.kError,!r._onError)throw new i.RuntimeException("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);r._onError(n.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})})).catch((function(e){if(!r._abortController||!r._abortController.signal.aborted){if(r._status=n.LoaderStatus.kError,!r._onError)throw e;r._onError(n.LoaderErrors.EXCEPTION,{code:-1,msg:e.message})}}))},t.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==n.LoaderStatus.kBuffering||!o.default.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},t.prototype._pump=function(e){var t=this;return e.read().then((function(r){if(r.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=n.LoaderStatus.kError;var o=n.LoaderErrors.EARLY_EOF,s={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new i.RuntimeException(s.msg);t._onError(o,s)}else t._status=n.LoaderStatus.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else{if(t._abortController&&t._abortController.signal.aborted)return void(t._status=n.LoaderStatus.kComplete);if(!0===t._requestAbort)return t._status=n.LoaderStatus.kComplete,e.cancel();t._status=n.LoaderStatus.kBuffering;var a=r.value.buffer,c=t._range.from+t._receivedLength;t._receivedLength+=a.byteLength,t._onDataArrival&&t._onDataArrival(a,c,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=n.LoaderStatus.kComplete;else if(11!==e.code||!o.default.msedge){t._status=n.LoaderStatus.kError;var r=0,s=null;if(19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(r=n.LoaderErrors.EXCEPTION,s={code:e.code,msg:e.message}):(r=n.LoaderErrors.EARLY_EOF,s={code:e.code,msg:"Fetch stream meet Early-EOF"}),!t._onError)throw new i.RuntimeException(s.msg);t._onError(r,s)}}))},t}(n.BaseLoader);t.default=a},"./src/io/io-controller.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/logger.js"),n=r("./src/io/speed-sampler.js"),i=r("./src/io/loader.js"),s=r("./src/io/fetch-stream-loader.js"),a=r("./src/io/xhr-moz-chunked-loader.js"),c=r("./src/io/xhr-range-loader.js"),u=r("./src/io/websocket-loader.js"),l=r("./src/io/range-seek-handler.js"),d=r("./src/io/param-seek-handler.js"),h=r("./src/utils/exception.js"),p=function(){function e(e,t,r){this.TAG="IOController",this._config=t,this._extraData=r,this._stashInitialSize=393216,void 0!=t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new n.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return e.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},e.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},e.prototype.isPaused=function(){return this._paused},Object.defineProperty(e.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||void 0!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSpeed",{get:function(){return this._loaderClass===c.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),e.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new l.default(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",r=e.seekParamEnd||"bend";this._seekHandler=new d.default(t,r)}else{if("custom"!==e.seekType)throw new h.InvalidArgumentException("Invalid seekType in config: "+e.seekType);if("function"!==typeof e.customSeekHandler)throw new h.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},e.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=u.default;else if(s.default.isSupported())this._loaderClass=s.default;else if(a.default.isSupported())this._loaderClass=a.default;else{if(!c.default.isSupported())throw new h.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=c.default}},e.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},e.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},e.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},e.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},e.prototype.resume=function(){if(this._paused){this._paused=!1;var e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}},e.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},e.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;var r={from:e,to:-1};this._currentRange={from:r.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,r),this._onSeeked&&this._onSeeked()},e.prototype.updateUrl=function(e){if(!e||"string"!==typeof e||0===e.length)throw new h.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=e},e.prototype._expandBuffer=function(e){for(var t=this._stashSize;t+1048576<e;)t*=2;if((t+=1048576)!==this._bufferSize){var r=new ArrayBuffer(t);if(this._stashUsed>0){var o=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(r,0,t).set(o,0)}this._stashBuffer=r,this._bufferSize=t}},e.prototype._normalizeSpeed=function(e){var t=this._speedNormalizeList,r=t.length-1,o=0,n=0,i=r;if(e<t[0])return t[0];for(;n<=i;){if((o=n+Math.floor((i-n)/2))===r||e>=t[o]&&e<t[o+1])return t[o];t[o]<e?n=o+1:i=o-1}},e.prototype._adjustStashSize=function(e){var t=0;(t=this._config.isLive||e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e)>8192&&(t=8192);var r=1024*t+1048576;this._bufferSize<r&&this._expandBuffer(r),this._stashSize=1024*t},e.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},e.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},e.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},e.prototype._onLoaderChunkArrival=function(e,t,r){if(!this._onDataArrival)throw new h.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(e.byteLength);var o=this._speedSampler.lastSecondKBps;if(0!==o){var n=this._normalizeSpeed(o);this._speedNormalized!==n&&(this._speedNormalized=n,this._adjustStashSize(n))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize)(a=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;else if(a=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var i=this._stashBuffer.slice(0,this._stashUsed);(c=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?c>0&&(u=new Uint8Array(i,c),a.set(u,0),this._stashUsed=u.byteLength,this._stashByteStart+=c):(this._stashUsed=0,this._stashByteStart+=c),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else(c=this._dispatchChunks(e,t))<e.byteLength&&((s=e.byteLength-c)>this._bufferSize&&(this._expandBuffer(s),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e,c),0),this._stashUsed+=s,this._stashByteStart=t+c);else if(0===this._stashUsed){var s;(c=this._dispatchChunks(e,t))<e.byteLength&&((s=e.byteLength-c)>this._bufferSize&&this._expandBuffer(s),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,c),0),this._stashUsed+=s,this._stashByteStart=t+c)}else{var a,c;if(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(c=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&c>0){var u=new Uint8Array(this._stashBuffer,c);a.set(u,0)}this._stashUsed-=c,this._stashByteStart+=c}}},e.prototype._flushStashBuffer=function(e){if(this._stashUsed>0){var t=this._stashBuffer.slice(0,this._stashUsed),r=this._dispatchChunks(t,this._stashByteStart),n=t.byteLength-r;if(r<t.byteLength){if(!e){if(r>0){var i=new Uint8Array(this._stashBuffer,0,this._bufferSize),s=new Uint8Array(t,r);i.set(s,0),this._stashUsed=s.byteLength,this._stashByteStart+=r}return 0}o.default.w(this.TAG,n+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,n}return 0},e.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},e.prototype._onLoaderError=function(e,t){switch(o.default.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF),e){case i.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var r=this._currentRange.to+1;return void(r<this._totalLength&&(o.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(r,!1)))}e=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF;case i.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case i.LoaderErrors.CONNECTING_TIMEOUT:case i.LoaderErrors.HTTP_STATUS_CODE_INVALID:case i.LoaderErrors.EXCEPTION:}if(!this._onError)throw new h.RuntimeException("IOException: "+t.msg);this._onError(e,t)},e}();t.default=p},"./src/io/loader.js":function(e,t,r){"use strict";r.r(t),r.d(t,{LoaderStatus:function(){return n},LoaderErrors:function(){return i},BaseLoader:function(){return s}});var o=r("./src/utils/exception.js"),n={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},i={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},s=function(){function e(e){this._type=e||"undefined",this._status=n.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return e.prototype.destroy=function(){this._status=n.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},e.prototype.isWorking=function(){return this._status===n.kConnecting||this._status===n.kBuffering},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),e.prototype.open=function(e,t){throw new o.NotImplementedException("Unimplemented abstract function!")},e.prototype.abort=function(){throw new o.NotImplementedException("Unimplemented abstract function!")},e}()},"./src/io/param-seek-handler.js":function(e,t,r){"use strict";r.r(t);var o=function(){function e(e,t){this._startName=e,this._endName=t}return e.prototype.getConfig=function(e,t){var r=e;if(0!==t.from||-1!==t.to){var o=!0;-1===r.indexOf("?")&&(r+="?",o=!1),o&&(r+="&"),r+=this._startName+"="+t.from.toString(),-1!==t.to&&(r+="&"+this._endName+"="+t.to.toString())}return{url:r,headers:{}}},e.prototype.removeURLParameters=function(e){var t=e.split("?")[0],r=void 0,o=e.indexOf("?");-1!==o&&(r=e.substring(o+1));var n="";if(void 0!=r&&r.length>0)for(var i=r.split("&"),s=0;s<i.length;s++){var a=i[s].split("="),c=s>0;a[0]!==this._startName&&a[0]!==this._endName&&(c&&(n+="&"),n+=i[s])}return 0===n.length?t:t+"?"+n},e}();t.default=o},"./src/io/range-seek-handler.js":function(e,t,r){"use strict";r.r(t);var o=function(){function e(e){this._zeroStart=e||!1}return e.prototype.getConfig=function(e,t){var r={};if(0!==t.from||-1!==t.to){var o=void 0;o=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",r.Range=o}else this._zeroStart&&(r.Range="bytes=0-");return{url:e,headers:r}},e.prototype.removeURLParameters=function(e){return e},e}();t.default=o},"./src/io/speed-sampler.js":function(e,t,r){"use strict";r.r(t);var o=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return e.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0==e&&(e=1),this._intervalBytes/e/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),e}();t.default=o},"./src/io/websocket-loader.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/io/loader.js"),n=r("./src/utils/exception.js"),i=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),s=function(e){function t(){var t=e.call(this,"websocket-loader")||this;return t.TAG="WebSocketLoader",t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return i(t,e),t.isSupported=function(){try{return"undefined"!==typeof self.WebSocket}catch(e){return!1}},t.prototype.destroy=function(){this._ws&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=o.LoaderStatus.kConnecting}catch(i){this._status=o.LoaderStatus.kError;var r={code:i.code,msg:i.message};if(!this._onError)throw new n.RuntimeException(r.msg);this._onError(o.LoaderErrors.EXCEPTION,r)}},t.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=o.LoaderStatus.kComplete},t.prototype._onWebSocketOpen=function(e){this._status=o.LoaderStatus.kBuffering},t.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},t.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var r=new FileReader;r.onload=function(){t._dispatchArrayBuffer(r.result)},r.readAsArrayBuffer(e.data)}else{this._status=o.LoaderStatus.kError;var i={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new n.RuntimeException(i.msg);this._onError(o.LoaderErrors.EXCEPTION,i)}},t.prototype._dispatchArrayBuffer=function(e){var t=e,r=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)},t.prototype._onWebSocketError=function(e){this._status=o.LoaderStatus.kError;var t={code:e.code,msg:e.message};if(!this._onError)throw new n.RuntimeException(t.msg);this._onError(o.LoaderErrors.EXCEPTION,t)},t}(o.BaseLoader);t.default=s},"./src/io/xhr-moz-chunked-loader.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/logger.js"),n=r("./src/io/loader.js"),i=r("./src/utils/exception.js"),s=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(t,r){var o=e.call(this,"xhr-moz-chunked-loader")||this;return o.TAG="MozChunkedLoader",o._seekHandler=t,o._config=r,o._needStash=!0,o._xhr=null,o._requestAbort=!1,o._contentLength=null,o._receivedLength=0,o}return s(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(t){return o.default.w("MozChunkedLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){this._dataSource=e,this._range=t;var r=e.url;this._config.reuseRedirectedURL&&void 0!=e.redirectedURL&&(r=e.redirectedURL);var o=this._seekHandler.getConfig(r,t);this._requestURL=o.url;var i=this._xhr=new XMLHttpRequest;if(i.open("GET",o.url,!0),i.responseType="moz-chunked-arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onloadend=this._onLoadEnd.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"===typeof o.headers){var s=o.headers;for(var a in s)s.hasOwnProperty(a)&&i.setRequestHeader(a,s[a])}if("object"===typeof this._config.headers)for(var a in s=this._config.headers)s.hasOwnProperty(a)&&i.setRequestHeader(a,s[a]);this._status=n.LoaderStatus.kConnecting,i.send()},t.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=n.LoaderStatus.kComplete},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(void 0!=t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){var r=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(r)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=n.LoaderStatus.kError,!this._onError)throw new i.RuntimeException("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(n.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=n.LoaderStatus.kBuffering}},t.prototype._onProgress=function(e){if(this._status!==n.LoaderStatus.kError){null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var t=e.target.response,r=this._range.from+this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)}},t.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==n.LoaderStatus.kError&&(this._status=n.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},t.prototype._onXhrError=function(e){this._status=n.LoaderStatus.kError;var t=0,r=null;if(this._contentLength&&e.loaded<this._contentLength?(t=n.LoaderErrors.EARLY_EOF,r={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=n.LoaderErrors.EXCEPTION,r={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new i.RuntimeException(r.msg);this._onError(t,r)},t}(n.BaseLoader);t.default=a},"./src/io/xhr-range-loader.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/logger.js"),n=r("./src/io/speed-sampler.js"),i=r("./src/io/loader.js"),s=r("./src/utils/exception.js"),a=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),c=function(e){function t(t,r){var o=e.call(this,"xhr-range-loader")||this;return o.TAG="RangeLoader",o._seekHandler=t,o._config=r,o._needStash=!1,o._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],o._currentChunkSizeKB=384,o._currentSpeedNormalized=0,o._zeroSpeedChunkCount=0,o._xhr=null,o._speedSampler=new n.default,o._requestAbort=!1,o._waitForTotalLength=!1,o._totalLengthReceived=!1,o._currentRequestURL=null,o._currentRedirectedURL=null,o._currentRequestRange=null,o._totalLength=null,o._contentLength=null,o._receivedLength=0,o._lastTimeLoaded=0,o}return a(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(t){return o.default.w("RangeLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),t.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=i.LoaderStatus.kConnecting;var r=!1;void 0!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(r=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||r?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},t.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,r=t+e;null!=this._contentLength&&r-this._range.from>=this._contentLength&&(r=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:r},this._internalOpen(this._dataSource,this._currentRequestRange)},t.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var r=e.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?r=this._currentRedirectedURL:void 0!=e.redirectedURL&&(r=e.redirectedURL));var o=this._seekHandler.getConfig(r,t);this._currentRequestURL=o.url;var n=this._xhr=new XMLHttpRequest;if(n.open("GET",o.url,!0),n.responseType="arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onload=this._onLoad.bind(this),n.onerror=this._onXhrError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"===typeof o.headers){var i=o.headers;for(var s in i)i.hasOwnProperty(s)&&n.setRequestHeader(s,i[s])}if("object"===typeof this._config.headers)for(var s in i=this._config.headers)i.hasOwnProperty(s)&&n.setRequestHeader(s,i[s]);n.send()},t.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=i.LoaderStatus.kComplete},t.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(void 0!=t.responseURL){var r=this._seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&r!==this._currentRedirectedURL&&(this._currentRedirectedURL=r,this._onURLRedirect&&this._onURLRedirect(r))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=i.LoaderStatus.kBuffering}else{if(this._status=i.LoaderStatus.kError,!this._onError)throw new s.RuntimeException("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(i.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}},t.prototype._onProgress=function(e){if(this._status!==i.LoaderStatus.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;var r=e.total;this._internalAbort(),null!=r&0!==r&&(this._totalLength=r)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var o=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(o)}},t.prototype._normalizeSpeed=function(e){var t=this._chunkSizeKBList,r=t.length-1,o=0,n=0,i=r;if(e<t[0])return t[0];for(;n<=i;){if((o=n+Math.floor((i-n)/2))===r||e>=t[o]&&e<t[o+1])return t[o];t[o]<e?n=o+1:i=o-1}},t.prototype._onLoad=function(e){if(this._status!==i.LoaderStatus.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){var r=this._normalizeSpeed(t);this._currentSpeedNormalized!==r&&(this._currentSpeedNormalized=r,this._currentChunkSizeKB=r)}var o=e.target.response,n=this._range.from+this._receivedLength;this._receivedLength+=o.byteLength;var s=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():s=!0,this._onDataArrival&&this._onDataArrival(o,n,this._receivedLength),s&&(this._status=i.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},t.prototype._onXhrError=function(e){this._status=i.LoaderStatus.kError;var t=0,r=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(t=i.LoaderErrors.EARLY_EOF,r={code:-1,msg:"RangeLoader meet Early-Eof"}):(t=i.LoaderErrors.EXCEPTION,r={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new s.RuntimeException(r.msg);this._onError(t,r)},t}(i.BaseLoader);t.default=c},"./src/player/flv-player.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/events/events.js"),n=r.n(o),i=r("./src/utils/logger.js"),s=r("./src/utils/browser.js"),a=r("./src/player/player-events.js"),c=r("./src/core/transmuxer.js"),u=r("./src/core/transmuxing-events.js"),l=r("./src/core/mse-controller.js"),d=r("./src/core/mse-events.js"),h=r("./src/player/player-errors.js"),p=r("./src/config.js"),f=r("./src/utils/exception.js"),_=function(){function e(e,t){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(n()),this._config=(0,p.createDefaultConfig)(),"object"===typeof t&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new f.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var r=s.default.chrome&&(s.default.version.major<50||50===s.default.version.major&&s.default.version.build<2661);this._alwaysSeekKeyframe=!!(r||s.default.msedge||s.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return e.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var r=this;e===a.default.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){r._emitter.emit(a.default.MEDIA_INFO,r.mediaInfo)})):e===a.default.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){r._emitter.emit(a.default.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){var t=this;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new l.default(this._config),this._msectl.on(d.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(d.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(d.default.SOURCE_OPEN,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(d.default.ERROR,(function(e){t._emitter.emit(a.default.ERROR,h.ErrorTypes.MEDIA_ERROR,h.ErrorDetails.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(r){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},e.prototype.load=function(){var e=this;if(!this._mediaElement)throw new f.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new f.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new c.default(this._mediaDataSource,this._config),this._transmuxer.on(u.default.INIT_SEGMENT,(function(t,r){e._msectl.appendInitSegment(r)})),this._transmuxer.on(u.default.MEDIA_SEGMENT,(function(t,r){if(e._msectl.appendMediaSegment(r),e._config.lazyLoad&&!e._config.isLive){var o=e._mediaElement.currentTime;r.info.endDts>=1e3*(o+e._config.lazyLoadMaxDuration)&&null==e._progressChecker&&(i.default.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())}})),this._transmuxer.on(u.default.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(a.default.LOADING_COMPLETE)})),this._transmuxer.on(u.default.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(a.default.RECOVERED_EARLY_EOF)})),this._transmuxer.on(u.default.IO_ERROR,(function(t,r){e._emitter.emit(a.default.ERROR,h.ErrorTypes.NETWORK_ERROR,t,r)})),this._transmuxer.on(u.default.DEMUX_ERROR,(function(t,r){e._emitter.emit(a.default.ERROR,h.ErrorTypes.MEDIA_ERROR,t,{code:-1,msg:r})})),this._transmuxer.on(u.default.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(a.default.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(u.default.METADATA_ARRIVED,(function(t){e._emitter.emit(a.default.METADATA_ARRIVED,t)})),this._transmuxer.on(u.default.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(a.default.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(u.default.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(a.default.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(u.default.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},e.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),e.prototype._fillStatisticsInfo=function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,o=0;if(this._mediaElement.getVideoPlaybackQuality){var n=this._mediaElement.getVideoPlaybackQuality();r=n.totalVideoFrames,o=n.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,o=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=o),e},e.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,r=0,o=0;o<e.length;o++){var n=e.start(o),s=e.end(o);if(n<=t&&t<s){r=s;break}}r>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(i.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},e.prototype._onmseBufferFull=function(){i.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},e.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},e.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,r=!1,o=0;o<t.length;o++){var n=t.start(o),s=t.end(o);if(e>=n&&e<s){e>=s-this._config.lazyLoadRecoverDuration&&(r=!0);break}}r&&(window.clearInterval(this._progressChecker),this._progressChecker=null,r&&(i.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},e.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,r=0;r<t.length;r++){var o=t.start(r),n=t.end(r);if(e>=o&&e<n)return!0}return!1},e.prototype._internalSeek=function(e){var t=this._isTimepointBuffered(e),r=!1,o=0;if(e<1&&this._mediaElement.buffered.length>0){var n=this._mediaElement.buffered.start(0);(n<1&&e<n||s.default.safari)&&(r=!0,o=s.default.safari?.1:n)}if(r)this._requestSetTime=!0,this._mediaElement.currentTime=o;else if(t){if(this._alwaysSeekKeyframe){var i=this._msectl.getNearestKeyframe(Math.floor(1e3*e));this._requestSetTime=!0,this._mediaElement.currentTime=null!=i?i.dts/1e3:e}else this._requestSetTime=!0,this._mediaElement.currentTime=e;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e)},e.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var e=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},e.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){var r=t.buffered;r.length>0&&t.currentTime<r.start(0)&&(i.default.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+r.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=r.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},e.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,r=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&r.length>0){var o=r.start(0);if(o<1&&t<o||s.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=s.default.safari?.1:o)}if(this._isTimepointBuffered(t)){if(this._alwaysSeekKeyframe){var n=this._msectl.getNearestKeyframe(Math.floor(1e3*t));null!=n&&(this._requestSetTime=!0,this._mediaElement.currentTime=n.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},e.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},e.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},e.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},e}();t.default=_},"./src/player/native-player.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/events/events.js"),n=r.n(o),i=r("./src/player/player-events.js"),s=r("./src/config.js"),a=r("./src/utils/exception.js"),c=function(){function e(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(n()),this._config=(0,s.createDefaultConfig)(),"object"===typeof t&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new a.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new a.InvalidArgumentException("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}return e.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var r=this;e===i.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(i.default.MEDIA_INFO,r.mediaInfo)})):e===i.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(i.default.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.load=function(){if(!this._mediaElement)throw new a.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},e.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){var e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,o=0;if(this._mediaElement.getVideoPlaybackQuality){var n=this._mediaElement.getVideoPlaybackQuality();r=n.totalVideoFrames,o=n.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,o=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=o),e},enumerable:!1,configurable:!0}),e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(i.default.MEDIA_INFO,this.mediaInfo)},e.prototype._reportStatisticsInfo=function(){this._emitter.emit(i.default.STATISTICS_INFO,this.statisticsInfo)},e}();t.default=c},"./src/player/player-errors.js":function(e,t,r){"use strict";r.r(t),r.d(t,{ErrorTypes:function(){return i},ErrorDetails:function(){return s}});var o=r("./src/io/loader.js"),n=r("./src/demux/demux-errors.js"),i={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},s={NETWORK_EXCEPTION:o.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:o.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:o.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:o.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:n.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:n.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:n.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(e,t,r){"use strict";r.r(t),t.default={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"}},"./src/remux/aac-silent.js":function(e,t,r){"use strict";r.r(t);var o=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=o},"./src/remux/mp4-generator.js":function(e,t,r){"use strict";r.r(t);var o=function(){function e(){}return e.init=function(){for(var t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=e.constants={};r.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),r.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),r.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),r.STSC=r.STCO=r.STTS,r.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),r.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),r.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),r.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},e.box=function(e){for(var t=8,r=null,o=Array.prototype.slice.call(arguments,1),n=o.length,i=0;i<n;i++)t+=o[i].byteLength;(r=new Uint8Array(t))[0]=t>>>24&255,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r.set(e,4);var s=8;for(i=0;i<n;i++)r.set(o[i],s),s+=o[i].byteLength;return r},e.generateInitSegment=function(t){var r=e.box(e.types.ftyp,e.constants.FTYP),o=e.moov(t),n=new Uint8Array(r.byteLength+o.byteLength);return n.set(r,0),n.set(o,r.byteLength),n},e.moov=function(t){var r=e.mvhd(t.timescale,t.duration),o=e.trak(t),n=e.mvex(t);return e.box(e.types.moov,r,o,n)},e.mvhd=function(t,r){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},e.trak=function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.tkhd=function(t){var r=t.id,o=t.duration,n=t.presentWidth,i=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,i>>>8&255,255&i,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))},e.mdhd=function(t){var r=t.timescale,o=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,o>>>24&255,o>>>16&255,o>>>8&255,255&o,85,196,0,0]))},e.hdlr=function(t){var r=null;return r="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,r)},e.minf=function(t){var r=null;return r="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,r,e.dinf(),e.stbl(t))},e.dinf=function(){return e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF))},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.codec?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp3(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))},e.mp3=function(t){var r=t.channelCount,o=t.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,o>>>8&255,255&o,0,0]);return e.box(e.types[".mp3"],n)},e.mp4a=function(t){var r=t.channelCount,o=t.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,o>>>8&255,255&o,0,0]);return e.box(e.types.mp4a,n,e.esds(t))},e.esds=function(t){var r=t.config||[],o=r.length,n=new Uint8Array([0,0,0,0,3,23+o,0,1,0,4,15+o,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([o]).concat(r).concat([6,1,2]));return e.box(e.types.esds,n)},e.avc1=function(t){var r=t.avcc,o=t.codecWidth,n=t.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>>8&255,255&o,n>>>8&255,255&n,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,i,e.box(e.types.avcC,r))},e.mvex=function(t){return e.box(e.types.mvex,e.trex(t))},e.trex=function(t){var r=t.id,o=new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,o)},e.moof=function(t,r){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,r))},e.mfhd=function(t){var r=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,r)},e.traf=function(t,r){var o=t.id,n=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),i=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r])),s=e.sdtp(t),a=e.trun(t,s.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,n,i,a,s)},e.sdtp=function(t){for(var r=t.samples||[],o=r.length,n=new Uint8Array(4+o),i=0;i<o;i++){var s=r[i].flags;n[i+4]=s.isLeading<<6|s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy}return e.box(e.types.sdtp,n)},e.trun=function(t,r){var o=t.samples||[],n=o.length,i=12+16*n,s=new Uint8Array(i);r+=8+i,s.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0);for(var a=0;a<n;a++){var c=o[a].duration,u=o[a].size,l=o[a].flags,d=o[a].cts;s.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,u>>>24&255,u>>>16&255,u>>>8&255,255&u,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a)}return e.box(e.types.trun,s)},e.mdat=function(t){return e.box(e.types.mdat,t)},e}();o.init(),t.default=o},"./src/remux/mp4-remuxer.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/utils/logger.js"),n=r("./src/remux/mp4-generator.js"),i=r("./src/remux/aac-silent.js"),s=r("./src/utils/browser.js"),a=r("./src/core/media-segment-info.js"),c=r("./src/utils/exception.js"),u=function(){function e(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new a.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new a.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!s.default.chrome||!(s.default.version.major<50||50===s.default.version.major&&s.default.version.build<2661)),this._fillSilentAfterSeek=s.default.msedge||s.default.msie,this._mp3UseMpegAudio=!s.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return e.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},e.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(e.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),e.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},e.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},e.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new c.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},e.prototype._onTrackMetadataReceived=function(e,t){var r=null,o="mp4",i=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(o="mpeg",i="",r=new Uint8Array):r=n.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,r=n.default.generateInitSegment(t)}if(!this._onInitSegment)throw new c.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:r.buffer,codec:i,container:e+"/"+o,mediaDuration:t.duration})},e.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},e.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,r={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(r.samples.push(e),r.length=e.length);var o={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(o.samples.push(t),o.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(r,!0),this._remuxAudio(o,!0)},e.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var r,c=e,u=c.samples,l=void 0,d=-1,h=this._audioMeta.refSampleDuration,p="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,f=this._dtsBaseInited&&void 0===this._audioNextDts,_=!1;if(u&&0!==u.length&&(1!==u.length||t)){var g=0,m=null,v=0;p?(g=0,v=c.length):(g=8,v=8+c.length);var y=null;if(u.length>1&&(v-=(y=u.pop()).length),null!=this._audioStashedLastSample){var b=this._audioStashedLastSample;this._audioStashedLastSample=null,u.unshift(b),v+=b.length}null!=y&&(this._audioStashedLastSample=y);var S=u[0].dts-this._dtsBase;if(this._audioNextDts)l=S-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())l=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(_=!0);else{var E=this._audioSegmentInfoList.getLastSampleBefore(S);if(null!=E){var T=S-(E.originalDts+E.duration);T<=3&&(T=0),l=S-(E.dts+E.duration+T)}else l=0}if(_){var w=S-l,C=this._videoSegmentInfoList.getLastSegmentBefore(S);if(null!=C&&C.beginDts<w){if(x=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var I=C.beginDts,O=w-C.beginDts;o.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+I+", duration: "+O),u.unshift({unit:x,dts:I,pts:I}),v+=x.byteLength}}else _=!1}for(var k=[],R=0;R<u.length;R++){var A=(b=u[R]).unit,P=b.dts-this._dtsBase,L=(I=P,!1),N=null,D=0;if(!(P<-.001)){if("mp3"!==this._audioMeta.codec){var M=P;if(this._audioNextDts&&(M=this._audioNextDts),(l=P-M)<=-3*h){o.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+P+" ms ,curRefDts: "+M+" ms)  due to dtsCorrection: "+l+" ms overlap.");continue}if(l>=3*h&&this._fillAudioTimestampGap&&!s.default.safari){L=!0;var x,B=Math.floor(l/h);o.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+P+" ms, curRefDts: "+M+" ms, dtsCorrection: "+Math.round(l)+" ms, generate: "+B+" frames"),I=Math.floor(M),D=Math.floor(M+h)-I,null==(x=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(o.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),x=A),N=[];for(var U=0;U<B;U++){M+=h;var j=Math.floor(M),H=Math.floor(M+h)-j,z={dts:j,pts:j,cts:0,unit:x,size:x.byteLength,duration:H,originalDts:P,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};N.push(z),v+=z.size}this._audioNextDts=M+h}else I=Math.floor(M),D=Math.floor(M+h)-I,this._audioNextDts=M+h}else I=P-l,D=R!==u.length-1?u[R+1].dts-this._dtsBase-l-I:null!=y?y.dts-this._dtsBase-l-I:k.length>=1?k[k.length-1].duration:Math.floor(h),this._audioNextDts=I+D;-1===d&&(d=I),k.push({dts:I,pts:I,cts:0,unit:b.unit,size:b.unit.byteLength,duration:D,originalDts:P,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),L&&k.push.apply(k,N)}}if(0===k.length)return c.samples=[],void(c.length=0);for(p?m=new Uint8Array(v):((m=new Uint8Array(v))[0]=v>>>24&255,m[1]=v>>>16&255,m[2]=v>>>8&255,m[3]=255&v,m.set(n.default.types.mdat,4)),R=0;R<k.length;R++)A=k[R].unit,m.set(A,g),g+=A.byteLength;var V=k[k.length-1];r=V.dts+V.duration;var q=new a.MediaSegmentInfo;q.beginDts=d,q.endDts=r,q.beginPts=d,q.endPts=r,q.originalBeginDts=k[0].originalDts,q.originalEndDts=V.originalDts+V.duration,q.firstSample=new a.SampleInfo(k[0].dts,k[0].pts,k[0].duration,k[0].originalDts,!1),q.lastSample=new a.SampleInfo(V.dts,V.pts,V.duration,V.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(q),c.samples=k,c.sequenceNumber++;var G=null;G=p?new Uint8Array:n.default.moof(c,d),c.samples=[],c.length=0;var Z={type:"audio",data:this._mergeBoxes(G,m).buffer,sampleCount:k.length,info:q};p&&f&&(Z.timestampOffset=d),this._onMediaSegment("audio",Z)}}},e.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var r,o,i=e,s=i.samples,c=void 0,u=-1,l=-1;if(s&&0!==s.length&&(1!==s.length||t)){var d=8,h=null,p=8+e.length,f=null;if(s.length>1&&(p-=(f=s.pop()).length),null!=this._videoStashedLastSample){var _=this._videoStashedLastSample;this._videoStashedLastSample=null,s.unshift(_),p+=_.length}null!=f&&(this._videoStashedLastSample=f);var g=s[0].dts-this._dtsBase;if(this._videoNextDts)c=g-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())c=0;else{var m=this._videoSegmentInfoList.getLastSampleBefore(g);if(null!=m){var v=g-(m.originalDts+m.duration);v<=3&&(v=0),c=g-(m.dts+m.duration+v)}else c=0}for(var y=new a.MediaSegmentInfo,b=[],S=0;S<s.length;S++){var E=(_=s[S]).dts-this._dtsBase,T=_.isKeyframe,w=E-c,C=_.cts,I=w+C;-1===u&&(u=w,l=I);var O=0;if(O=S!==s.length-1?s[S+1].dts-this._dtsBase-c-w:null!=f?f.dts-this._dtsBase-c-w:b.length>=1?b[b.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),T){var k=new a.SampleInfo(w,I,O,_.dts,!0);k.fileposition=_.fileposition,y.appendSyncPoint(k)}b.push({dts:w,pts:I,cts:C,units:_.units,size:_.length,isKeyframe:T,duration:O,originalDts:E,flags:{isLeading:0,dependsOn:T?2:1,isDependedOn:T?1:0,hasRedundancy:0,isNonSync:T?0:1}})}for((h=new Uint8Array(p))[0]=p>>>24&255,h[1]=p>>>16&255,h[2]=p>>>8&255,h[3]=255&p,h.set(n.default.types.mdat,4),S=0;S<b.length;S++)for(var R=b[S].units;R.length;){var A=R.shift().data;h.set(A,d),d+=A.byteLength}var P=b[b.length-1];if(r=P.dts+P.duration,o=P.pts+P.duration,this._videoNextDts=r,y.beginDts=u,y.endDts=r,y.beginPts=l,y.endPts=o,y.originalBeginDts=b[0].originalDts,y.originalEndDts=P.originalDts+P.duration,y.firstSample=new a.SampleInfo(b[0].dts,b[0].pts,b[0].duration,b[0].originalDts,b[0].isKeyframe),y.lastSample=new a.SampleInfo(P.dts,P.pts,P.duration,P.originalDts,P.isKeyframe),this._isLive||this._videoSegmentInfoList.append(y),i.samples=b,i.sequenceNumber++,this._forceFirstIDR){var L=b[0].flags;L.dependsOn=2,L.isNonSync=0}var N=n.default.moof(i,u);i.samples=[],i.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(N,h).buffer,sampleCount:b.length,info:y})}}},e.prototype._mergeBoxes=function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r},e}();t.default=u},"./src/utils/browser.js":function(e,t,r){"use strict";r.r(t);var o={};!function(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],r=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],n={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:r[0]||""},i={};if(n.browser){i[n.browser]=!0;var s=n.majorVersion.split(".");i.version={major:parseInt(n.majorVersion,10),string:n.version},s.length>1&&(i.version.minor=parseInt(s[1],10)),s.length>2&&(i.version.build=parseInt(s[2],10))}if(n.platform&&(i[n.platform]=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv||i.iemobile){i.rv&&delete i.rv;var a="msie";n.browser=a,i.msie=!0}if(i.edge){delete i.edge;var c="msedge";n.browser=c,i.msedge=!0}if(i.opr){var u="opera";n.browser=u,i.opera=!0}if(i.safari&&i.android){var l="android";n.browser=l,i.android=!0}for(var d in i.name=n.browser,i.platform=n.platform,o)o.hasOwnProperty(d)&&delete o[d];Object.assign(o,i)}(),t.default=o},"./src/utils/exception.js":function(e,t,r){"use strict";r.r(t),r.d(t,{RuntimeException:function(){return n},IllegalStateException:function(){return i},InvalidArgumentException:function(){return s},NotImplementedException:function(){return a}});var o=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(){function e(e){this._message=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.name+": "+this.message},e}(),i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),t}(n),s=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),t}(n),a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),t}(n)},"./src/utils/logger.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/events/events.js"),n=r.n(o),i=function(){function e(){}return e.e=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var o="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","error",o),e.ENABLE_ERROR&&(console.error?console.error(o):console.warn?console.warn(o):console.log(o))},e.i=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var o="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","info",o),e.ENABLE_INFO&&(console.info?console.info(o):console.log(o))},e.w=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var o="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","warn",o),e.ENABLE_WARN&&(console.warn?console.warn(o):console.log(o))},e.d=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var o="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","debug",o),e.ENABLE_DEBUG&&(console.debug?console.debug(o):console.log(o))},e.v=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var o="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","verbose",o),e.ENABLE_VERBOSE&&console.log(o)},e}();i.GLOBAL_TAG="flv.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new(n()),t.default=i},"./src/utils/logging-control.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/events/events.js"),n=r.n(o),i=r("./src/utils/logger.js"),s=function(){function e(){}return Object.defineProperty(e,"forceGlobalTag",{get:function(){return i.default.FORCE_GLOBAL_TAG},set:function(t){i.default.FORCE_GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"globalTag",{get:function(){return i.default.GLOBAL_TAG},set:function(t){i.default.GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableAll",{get:function(){return i.default.ENABLE_VERBOSE&&i.default.ENABLE_DEBUG&&i.default.ENABLE_INFO&&i.default.ENABLE_WARN&&i.default.ENABLE_ERROR},set:function(t){i.default.ENABLE_VERBOSE=t,i.default.ENABLE_DEBUG=t,i.default.ENABLE_INFO=t,i.default.ENABLE_WARN=t,i.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableDebug",{get:function(){return i.default.ENABLE_DEBUG},set:function(t){i.default.ENABLE_DEBUG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableVerbose",{get:function(){return i.default.ENABLE_VERBOSE},set:function(t){i.default.ENABLE_VERBOSE=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableInfo",{get:function(){return i.default.ENABLE_INFO},set:function(t){i.default.ENABLE_INFO=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableWarn",{get:function(){return i.default.ENABLE_WARN},set:function(t){i.default.ENABLE_WARN=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableError",{get:function(){return i.default.ENABLE_ERROR},set:function(t){i.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),e.getConfig=function(){return{globalTag:i.default.GLOBAL_TAG,forceGlobalTag:i.default.FORCE_GLOBAL_TAG,enableVerbose:i.default.ENABLE_VERBOSE,enableDebug:i.default.ENABLE_DEBUG,enableInfo:i.default.ENABLE_INFO,enableWarn:i.default.ENABLE_WARN,enableError:i.default.ENABLE_ERROR,enableCallback:i.default.ENABLE_CALLBACK}},e.applyConfig=function(e){i.default.GLOBAL_TAG=e.globalTag,i.default.FORCE_GLOBAL_TAG=e.forceGlobalTag,i.default.ENABLE_VERBOSE=e.enableVerbose,i.default.ENABLE_DEBUG=e.enableDebug,i.default.ENABLE_INFO=e.enableInfo,i.default.ENABLE_WARN=e.enableWarn,i.default.ENABLE_ERROR=e.enableError,i.default.ENABLE_CALLBACK=e.enableCallback},e._notifyChange=function(){var t=e.emitter;if(t.listenerCount("change")>0){var r=e.getConfig();t.emit("change",r)}},e.registerListener=function(t){e.emitter.addListener("change",t)},e.removeListener=function(t){e.emitter.removeListener("change",t)},e.addLogListener=function(t){i.default.emitter.addListener("log",t),i.default.emitter.listenerCount("log")>0&&(i.default.ENABLE_CALLBACK=!0,e._notifyChange())},e.removeLogListener=function(t){i.default.emitter.removeListener("log",t),0===i.default.emitter.listenerCount("log")&&(i.default.ENABLE_CALLBACK=!1,e._notifyChange())},e}();s.emitter=new(n()),t.default=s},"./src/utils/polyfill.js":function(e,t,r){"use strict";r.r(t);var o=function(){function e(){}return e.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])}return t},"function"!==typeof self.Promise&&r("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},e}();o.install(),t.default=o},"./src/utils/utf8-conv.js":function(e,t,r){"use strict";function o(e,t,r){var o=e;if(t+r<o.length){for(;r--;)if(128!==(192&o[++t]))return!1;return!0}return!1}r.r(t),t.default=function(e){for(var t=[],r=e,n=0,i=e.length;n<i;)if(r[n]<128)t.push(String.fromCharCode(r[n])),++n;else{if(r[n]<192);else if(r[n]<224){if(o(r,n,1)&&(s=(31&r[n])<<6|63&r[n+1])>=128){t.push(String.fromCharCode(65535&s)),n+=2;continue}}else if(r[n]<240){if(o(r,n,2)&&(s=(15&r[n])<<12|(63&r[n+1])<<6|63&r[n+2])>=2048&&55296!==(63488&s)){t.push(String.fromCharCode(65535&s)),n+=3;continue}}else if(r[n]<248){var s;if(o(r,n,3)&&(s=(7&r[n])<<18|(63&r[n+1])<<12|(63&r[n+2])<<6|63&r[n+3])>65536&&s<1114112){s-=65536,t.push(String.fromCharCode(s>>>10|55296)),t.push(String.fromCharCode(1023&s|56320)),n+=4;continue}}t.push(String.fromCharCode(65533)),++n}return t.join("")}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,r),i.exports}return r.m=e,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r("./src/index.js")}()},e.exports=t()},9053:function(e,t,r){"use strict";var o=r(91),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return o.isMemo(e)?s:a[e.$$typeof]||n}a[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[o.Memo]=s;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,o){if("string"!==typeof r){if(f){var n=p(r);n&&n!==f&&e(t,n,o)}var s=l(r);d&&(s=s.concat(d(r)));for(var a=c(t),_=c(r),g=0;g<s.length;++g){var m=s[g];if(!i[m]&&(!o||!o[m])&&(!_||!_[m])&&(!a||!a[m])){var v=h(r,m);try{u(t,m,v)}catch(y){}}}}return t}},3248:function(e,t,r){var o=r(3038).default;Object.fromEntries||Object.defineProperty(Object,"fromEntries",{value:function(e){if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");var t={};return Object.keys(e).forEach((function(r){var n=o(e[r],2),i=n[0],s=n[1];t[i]=s})),t}})},9772:function(e,t,r){"use strict";var o=r(9867),n=r(2882);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function _(e,t,r,o,n,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=o,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new _(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new _(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new _(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new _(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new _(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new _(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,r,o){var n=g.hasOwnProperty(t)?g[t]:null;(null!==n?0!==n.type:o||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,o){if(null===t||"undefined"===typeof t||function(e,t,r,o){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,o))return!0;if(o)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,o)&&(r=null),o||null===n?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,o=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,v);g[t]=new _(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,v);g[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,v);g[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),O=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var x,B=Object.assign;function U(e){if(void 0===x)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);x=t&&t[1]||""}return"\n"+x+e}var j=!1;function H(e,t){if(!e||j)return"";j=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var o=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){o=u}e.call(t.prototype)}else{try{throw Error()}catch(u){o=u}e()}}catch(u){if(u&&o&&"string"===typeof u.stack){for(var n=u.stack.split("\n"),i=o.stack.split("\n"),s=n.length-1,a=i.length-1;1<=s&&0<=a&&n[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(n[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||n[s]!==i[a]){var c="\n"+n[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 1:return e=H(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case E:return"Portal";case C:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function F(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){o=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=Z(e)?e.checked?"true":"false":e.value),(e=o)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var r=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function K(e,t){var r=null==t.defaultValue?"":t.defaultValue,o=null!=t.checked?t.checked:t.defaultChecked;r=G(null!=t.value?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){J(e,t);var r=G(t.value),o=t.type;if(null!=r)"number"===o?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===o||"reset"===o)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!("submit"!==o&&"reset"!==o||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,o){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&o&&(e[r].defaultSelected=!0)}else{for(r=""+G(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(o&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:G(r)}}function ie(e,t){var r=G(t.value),o=G(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=o&&(e.defaultValue=""+o)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function _e(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var o=0===r.indexOf("--"),n=_e(r,t[r],o);"float"===r&&(r="cssFloat"),o?e.setProperty(r,n):e[r]=n}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var me=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Te=null,we=null;function Ce(e){if(e=bn(e)){if("function"!==typeof Ee)throw Error(i(280));var t=e.stateNode;t&&(t=En(t),Ee(e.stateNode,e.type,t))}}function Ie(e){Te?we?we.push(e):we=[e]:Te=e}function Oe(){if(Te){var e=Te,t=we;if(we=Te=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function ke(e,t){return e(t)}function Re(){}var Ae=!1;function Pe(e,t,r){if(Ae)return e(t,r);Ae=!0;try{return ke(e,t,r)}finally{Ae=!1,(null!==Te||null!==we)&&(Re(),Oe())}}function Le(e,t){var r=e.stateNode;if(null===r)return null;var o=En(r);if(null===o)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Ne=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Ne=!1}function Me(e,t,r,o,n,i,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(l){this.onError(l)}}var xe=!1,Be=null,Ue=!1,je=null,He={onError:function(e){xe=!0,Be=e}};function ze(e,t,r,o,n,i,s,a,c){xe=!1,Be=null,Me.apply(He,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ve(e)!==e)throw Error(i(188))}function Ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,o=t;;){var n=r.return;if(null===n)break;var s=n.alternate;if(null===s){if(null!==(o=n.return)){r=o;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return Ge(n),e;if(s===o)return Ge(n),t;s=s.sibling}throw Error(i(188))}if(r.return!==o.return)r=n,o=s;else{for(var a=!1,c=n.child;c;){if(c===r){a=!0,r=n,o=s;break}if(c===o){a=!0,o=n,r=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===r){a=!0,r=s,o=n;break}if(c===o){a=!0,o=s,r=n;break}c=c.sibling}if(!a)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?Fe(e):null}function Fe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Fe(e);if(null!==t)return t;e=e.sibling}return null}var We=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,Qe=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Je=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,$e=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,ot=n.unstable_IdlePriority,nt=null,it=null;var st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var o=0,n=e.suspendedLanes,i=e.pingedLanes,s=268435455&r;if(0!==s){var a=s&~n;0!==a?o=dt(a):0!==(i&=s)&&(o=dt(i))}else 0!==(s=r&~n)?o=dt(s):0!==i&&(o=dt(i));if(0===o)return 0;if(0!==t&&t!==o&&0===(t&n)&&((n=o&-o)>=(i=t&-t)||16===n&&0!==(4194240&i)))return t;if(0!==(4&o)&&(o|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)n=1<<(r=31-st(t)),o|=e[r],t&=~n;return o}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function _t(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-st(r),n=1<<o;n&t|e[o]&t&&(e[o]|=t),r&=~n}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,Et,Tt,wt,Ct,It=!1,Ot=[],kt=null,Rt=null,At=null,Pt=new Map,Lt=new Map,Nt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function xt(e,t,r,o,n,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:i,targetContainers:[n]},null!==t&&(null!==(t=bn(t))&&Et(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Bt(e){var t=yn(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void Ct(e.priority,(function(){Tt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bn(r))&&Et(t),e.blockedOn=r,!1;var o=new(r=e.nativeEvent).constructor(r.type,r);be=o,r.target.dispatchEvent(o),be=null,t.shift()}return!0}function jt(e,t,r){Ut(e)&&r.delete(t)}function Ht(){It=!1,null!==kt&&Ut(kt)&&(kt=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Lt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ht)))}function Vt(e){function t(t){return zt(t,e)}if(0<Ot.length){zt(Ot[0],e);for(var r=1;r<Ot.length;r++){var o=Ot[r];o.blockedOn===e&&(o.blockedOn=null)}}for(null!==kt&&zt(kt,e),null!==Rt&&zt(Rt,e),null!==At&&zt(At,e),Pt.forEach(t),Lt.forEach(t),r=0;r<Nt.length;r++)(o=Nt[r]).blockedOn===e&&(o.blockedOn=null);for(;0<Nt.length&&null===(r=Nt[0]).blockedOn;)Bt(r),null===r.blockedOn&&Nt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Zt(e,t,r,o){var n=yt,i=qt.transition;qt.transition=null;try{yt=1,Wt(e,t,r,o)}finally{yt=n,qt.transition=i}}function Ft(e,t,r,o){var n=yt,i=qt.transition;qt.transition=null;try{yt=4,Wt(e,t,r,o)}finally{yt=n,qt.transition=i}}function Wt(e,t,r,o){if(Gt){var n=Qt(e,t,r,o);if(null===n)Go(e,t,o,Yt,r),Mt(e,o);else if(function(e,t,r,o,n){switch(t){case"focusin":return kt=xt(kt,e,t,r,o,n),!0;case"dragenter":return Rt=xt(Rt,e,t,r,o,n),!0;case"mouseover":return At=xt(At,e,t,r,o,n),!0;case"pointerover":var i=n.pointerId;return Pt.set(i,xt(Pt.get(i)||null,e,t,r,o,n)),!0;case"gotpointercapture":return i=n.pointerId,Lt.set(i,xt(Lt.get(i)||null,e,t,r,o,n)),!0}return!1}(n,e,t,r,o))o.stopPropagation();else if(Mt(e,o),4&t&&-1<Dt.indexOf(e)){for(;null!==n;){var i=bn(n);if(null!==i&&St(i),null===(i=Qt(e,t,r,o))&&Go(e,t,o,Yt,r),i===n)break;n=i}null!==n&&o.stopPropagation()}else Go(e,t,o,null,r)}}var Yt=null;function Qt(e,t,r,o){if(Yt=null,null!==(e=yn(e=Se(o))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case ot:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,$t=null;function er(){if($t)return $t;var e,t,r=Xt,o=r.length,n="value"in Jt?Jt.value:Jt.textContent,i=n.length;for(e=0;e<o&&r[e]===n[e];e++);var s=o-e;for(t=1;t<=s&&r[o-t]===n[i-t];t++);return $t=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function or(){return!1}function nr(e){function t(t,r,o,n,i){for(var s in this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=n,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(n):n[s]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:or,this.isPropagationStopped=or,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,sr,ar,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=nr(cr),lr=B({},cr,{view:0,detail:0}),dr=nr(lr),hr=B({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(ir=e.screenX-ar.screenX,sr=e.screenY-ar.screenY):sr=ir=0,ar=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),pr=nr(hr),fr=nr(B({},hr,{dataTransfer:0})),_r=nr(B({},lr,{relatedTarget:0})),gr=nr(B({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),mr=B({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=nr(mr),yr=nr(B({},cr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function wr(){return Tr}var Cr=B({},lr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ir=nr(Cr),Or=nr(B({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kr=nr(B({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr})),Rr=nr(B({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=B({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=nr(Ar),Lr=[9,13,27,32],Nr=l&&"CompositionEvent"in window,Dr=null;l&&"documentMode"in document&&(Dr=document.documentMode);var Mr=l&&"TextEvent"in window&&!Dr,xr=l&&(!Nr||Dr&&8<Dr&&11>=Dr),Br=String.fromCharCode(32),Ur=!1;function jr(e,t){switch(e){case"keyup":return-1!==Lr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Gr(e,t,r,o){Ie(o),0<(t=Fo(t,"onChange")).length&&(r=new ur("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Zr=null,Fr=null;function Wr(e){Uo(e,0)}function Yr(e){if(W(Sn(e)))return e}function Qr(e,t){if("change"===e)return t}var Kr=!1;if(l){var Jr;if(l){var Xr="oninput"in document;if(!Xr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Xr="function"===typeof $r.oninput}Jr=Xr}else Jr=!1;Kr=Jr&&(!document.documentMode||9<document.documentMode)}function eo(){Zr&&(Zr.detachEvent("onpropertychange",to),Fr=Zr=null)}function to(e){if("value"===e.propertyName&&Yr(Fr)){var t=[];Gr(t,Fr,e,Se(e)),Pe(Wr,t)}}function ro(e,t,r){"focusin"===e?(eo(),Fr=r,(Zr=t).attachEvent("onpropertychange",to)):"focusout"===e&&eo()}function oo(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Fr)}function no(e,t){if("click"===e)return Yr(t)}function io(e,t){if("input"===e||"change"===e)return Yr(t)}var so="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ao(e,t){if(so(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var n=r[o];if(!d.call(t,n)||!so(e[n],t[n]))return!1}return!0}function co(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uo(e,t){var r,o=co(e);for(e=0;o;){if(3===o.nodeType){if(r=e+o.textContent.length,e<=t&&r>=t)return{node:o,offset:t-e};e=r}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=co(o)}}function lo(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?lo(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ho(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(o){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fo(e){var t=ho(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&lo(r.ownerDocument.documentElement,r)){if(null!==o&&po(r))if(t=o.start,void 0===(e=o.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(o.start,n);o=void 0===o.end?i:Math.min(o.end,n),!e.extend&&i>o&&(n=o,o=i,i=n),n=uo(r,i);var s=uo(r,o);n&&s&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),i>o?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _o=l&&"documentMode"in document&&11>=document.documentMode,go=null,mo=null,vo=null,yo=!1;function bo(e,t,r){var o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yo||null==go||go!==Y(o)||("selectionStart"in(o=go)&&po(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},vo&&ao(vo,o)||(vo=o,0<(o=Fo(mo,"onSelect")).length&&(t=new ur("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=go)))}function So(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Eo={animationend:So("Animation","AnimationEnd"),animationiteration:So("Animation","AnimationIteration"),animationstart:So("Animation","AnimationStart"),transitionend:So("Transition","TransitionEnd")},To={},wo={};function Co(e){if(To[e])return To[e];if(!Eo[e])return e;var t,r=Eo[e];for(t in r)if(r.hasOwnProperty(t)&&t in wo)return To[e]=r[t];return e}l&&(wo=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);var Io=Co("animationend"),Oo=Co("animationiteration"),ko=Co("animationstart"),Ro=Co("transitionend"),Ao=new Map,Po="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(e,t){Ao.set(e,t),c(t,[e])}for(var No=0;No<Po.length;No++){var Do=Po[No];Lo(Do.toLowerCase(),"on"+(Do[0].toUpperCase()+Do.slice(1)))}Lo(Io,"onAnimationEnd"),Lo(Oo,"onAnimationIteration"),Lo(ko,"onAnimationStart"),Lo("dblclick","onDoubleClick"),Lo("focusin","onFocus"),Lo("focusout","onBlur"),Lo(Ro,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mo));function Bo(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,o,n,s,a,c,u){if(ze.apply(this,arguments),xe){if(!xe)throw Error(i(198));var l=Be;xe=!1,Be=null,Ue||(Ue=!0,je=l)}}(o,t,void 0,e),e.currentTarget=null}function Uo(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var o=e[r],n=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var s=o.length-1;0<=s;s--){var a=o[s],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&n.isPropagationStopped())break e;Bo(n,a,u),i=c}else for(s=0;s<o.length;s++){if(c=(a=o[s]).instance,u=a.currentTarget,a=a.listener,c!==i&&n.isPropagationStopped())break e;Bo(n,a,u),i=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jo(e,t){var r=t[gn];void 0===r&&(r=t[gn]=new Set);var o=e+"__bubble";r.has(o)||(qo(t,e,2,!1),r.add(o))}function Ho(e,t,r){var o=0;t&&(o|=4),qo(r,e,o,t)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[zo]){e[zo]=!0,s.forEach((function(t){"selectionchange"!==t&&(xo.has(t)||Ho(t,!1,e),Ho(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zo]||(t[zo]=!0,Ho("selectionchange",!1,t))}}function qo(e,t,r,o){switch(Kt(t)){case 1:var n=Zt;break;case 4:n=Ft;break;default:n=Wt}r=n.bind(null,t,r,e),n=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),o?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Go(e,t,r,o,n){var i=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var s=o.tag;if(3===s||4===s){var a=o.stateNode.containerInfo;if(a===n||8===a.nodeType&&a.parentNode===n)break;if(4===s)for(s=o.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===n||8===c.nodeType&&c.parentNode===n))return;s=s.return}for(;null!==a;){if(null===(s=yn(a)))return;if(5===(c=s.tag)||6===c){o=i=s;continue e}a=a.parentNode}}o=o.return}Pe((function(){var o=i,n=Se(r),s=[];e:{var a=Ao.get(e);if(void 0!==a){var c=ur,u=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":c=Ir;break;case"focusin":u="focus",c=_r;break;case"focusout":u="blur",c=_r;break;case"beforeblur":case"afterblur":c=_r;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=kr;break;case Io:case Oo:case ko:c=gr;break;case Ro:c=Rr;break;case"scroll":c=dr;break;case"wheel":c=Pr;break;case"copy":case"cut":case"paste":c=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Or}var l=0!==(4&t),d=!l&&"scroll"===e,h=l?null!==a?a+"Capture":null:a;l=[];for(var p,f=o;null!==f;){var _=(p=f).stateNode;if(5===p.tag&&null!==_&&(p=_,null!==h&&(null!=(_=Le(f,h))&&l.push(Zo(f,_,p)))),d)break;f=f.return}0<l.length&&(a=new c(a,u,null,r,n),s.push({event:a,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===be||!(u=r.relatedTarget||r.fromElement)||!yn(u)&&!u[_n])&&(c||a)&&(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=o,null!==(u=(u=r.relatedTarget||r.toElement)?yn(u):null)&&(u!==(d=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=o),c!==u)){if(l=pr,_="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(l=Or,_="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==c?a:Sn(c),p=null==u?a:Sn(u),(a=new l(_,f+"leave",c,r,n)).target=d,a.relatedTarget=p,_=null,yn(n)===o&&((l=new l(h,f+"enter",u,r,n)).target=p,l.relatedTarget=d,_=l),d=_,c&&u)e:{for(h=u,f=0,p=l=c;p;p=Wo(p))f++;for(p=0,_=h;_;_=Wo(_))p++;for(;0<f-p;)l=Wo(l),f--;for(;0<p-f;)h=Wo(h),p--;for(;f--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wo(l),h=Wo(h)}l=null}else l=null;null!==c&&Yo(s,a,c,l,!1),null!==u&&null!==d&&Yo(s,d,u,l,!0)}if("select"===(c=(a=o?Sn(o):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Qr;else if(qr(a))if(Kr)g=io;else{g=oo;var m=ro}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=no);switch(g&&(g=g(e,o))?Gr(s,g,r,n):(m&&m(e,a,o),"focusout"===e&&(m=a._wrapperState)&&m.controlled&&"number"===a.type&&ee(a,"number",a.value)),m=o?Sn(o):window,e){case"focusin":(qr(m)||"true"===m.contentEditable)&&(go=m,mo=o,vo=null);break;case"focusout":vo=mo=go=null;break;case"mousedown":yo=!0;break;case"contextmenu":case"mouseup":case"dragend":yo=!1,bo(s,r,n);break;case"selectionchange":if(_o)break;case"keydown":case"keyup":bo(s,r,n)}var v;if(Nr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zr?jr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(xr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==y?"onCompositionEnd"===y&&zr&&(v=er()):(Xt="value"in(Jt=n)?Jt.value:Jt.textContent,zr=!0)),0<(m=Fo(o,y)).length&&(y=new yr(y,e,null,r,n),s.push({event:y,listeners:m}),v?y.data=v:null!==(v=Hr(r))&&(y.data=v))),(v=Mr?function(e,t){switch(e){case"compositionend":return Hr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Br);case"textInput":return(e=t.data)===Br&&Ur?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Nr&&jr(e,t)?(e=er(),$t=Xt=Jt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(o=Fo(o,"onBeforeInput")).length&&(n=new yr("onBeforeInput","beforeinput",null,r,n),s.push({event:n,listeners:o}),n.data=v))}Uo(s,t)}))}function Zo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fo(e,t){for(var r=t+"Capture",o=[];null!==e;){var n=e,i=n.stateNode;5===n.tag&&null!==i&&(n=i,null!=(i=Le(e,r))&&o.unshift(Zo(e,i,n)),null!=(i=Le(e,t))&&o.push(Zo(e,i,n))),e=e.return}return o}function Wo(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yo(e,t,r,o,n){for(var i=t._reactName,s=[];null!==r&&r!==o;){var a=r,c=a.alternate,u=a.stateNode;if(null!==c&&c===o)break;5===a.tag&&null!==u&&(a=u,n?null!=(c=Le(r,i))&&s.unshift(Zo(r,c,a)):n||null!=(c=Le(r,i))&&s.push(Zo(r,c,a))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Qo=/\r\n?/g,Ko=/\u0000|\uFFFD/g;function Jo(e){return("string"===typeof e?e:""+e).replace(Qo,"\n").replace(Ko,"")}function Xo(e,t,r){if(t=Jo(t),Jo(e)!==t&&r)throw Error(i(425))}function $o(){}var en=null,tn=null;function rn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var on="function"===typeof setTimeout?setTimeout:void 0,nn="function"===typeof clearTimeout?clearTimeout:void 0,sn="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sn?function(e){return sn.resolve(null).then(e).catch(cn)}:on;function cn(e){setTimeout((function(){throw e}))}function un(e,t){var r=t,o=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===o)return e.removeChild(n),void Vt(t);o--}else"$"!==r&&"$?"!==r&&"$!"!==r||o++;r=n}while(r);Vt(t)}function ln(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var hn=Math.random().toString(36).slice(2),pn="__reactFiber$"+hn,fn="__reactProps$"+hn,_n="__reactContainer$"+hn,gn="__reactEvents$"+hn,mn="__reactListeners$"+hn,vn="__reactHandles$"+hn;function yn(e){var t=e[pn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_n]||r[pn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=dn(e);null!==e;){if(r=e[pn])return r;e=dn(e)}return t}r=(e=r).parentNode}return null}function bn(e){return!(e=e[pn]||e[_n])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Sn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function En(e){return e[fn]||null}var Tn=[],wn=-1;function Cn(e){return{current:e}}function In(e){0>wn||(e.current=Tn[wn],Tn[wn]=null,wn--)}function On(e,t){wn++,Tn[wn]=e.current,e.current=t}var kn={},Rn=Cn(kn),An=Cn(!1),Pn=kn;function Ln(e,t){var r=e.type.contextTypes;if(!r)return kn;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var n,i={};for(n in r)i[n]=t[n];return o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Dn(){In(An),In(Rn)}function Mn(e,t,r){if(Rn.current!==kn)throw Error(i(168));On(Rn,t),On(An,r)}function xn(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,"function"!==typeof o.getChildContext)return r;for(var n in o=o.getChildContext())if(!(n in t))throw Error(i(108,q(e)||"Unknown",n));return B({},r,o)}function Bn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kn,Pn=Rn.current,On(Rn,e),On(An,An.current),!0}function Un(e,t,r){var o=e.stateNode;if(!o)throw Error(i(169));r?(e=xn(e,t,Pn),o.__reactInternalMemoizedMergedChildContext=e,In(An),In(Rn),On(Rn,e)):In(An),On(An,r)}var jn=null,Hn=!1,zn=!1;function Vn(e){null===jn?jn=[e]:jn.push(e)}function qn(){if(!zn&&null!==jn){zn=!0;var e=0,t=yt;try{var r=jn;for(yt=1;e<r.length;e++){var o=r[e];do{o=o(!0)}while(null!==o)}jn=null,Hn=!1}catch(n){throw null!==jn&&(jn=jn.slice(e+1)),We($e,qn),n}finally{yt=t,zn=!1}}return null}var Gn=[],Zn=0,Fn=null,Wn=0,Yn=[],Qn=0,Kn=null,Jn=1,Xn="";function $n(e,t){Gn[Zn++]=Wn,Gn[Zn++]=Fn,Fn=e,Wn=t}function ei(e,t,r){Yn[Qn++]=Jn,Yn[Qn++]=Xn,Yn[Qn++]=Kn,Kn=e;var o=Jn;e=Xn;var n=32-st(o)-1;o&=~(1<<n),r+=1;var i=32-st(t)+n;if(30<i){var s=n-n%5;i=(o&(1<<s)-1).toString(32),o>>=s,n-=s,Jn=1<<32-st(t)+n|r<<n|o,Xn=i+e}else Jn=1<<i|r<<n|o,Xn=e}function ti(e){null!==e.return&&($n(e,1),ei(e,1,0))}function ri(e){for(;e===Fn;)Fn=Gn[--Zn],Gn[Zn]=null,Wn=Gn[--Zn],Gn[Zn]=null;for(;e===Kn;)Kn=Yn[--Qn],Yn[Qn]=null,Xn=Yn[--Qn],Yn[Qn]=null,Jn=Yn[--Qn],Yn[Qn]=null}var oi=null,ni=null,ii=!1,si=null;function ai(e,t){var r=Pu(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ci(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oi=e,ni=ln(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oi=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Kn?{id:Jn,overflow:Xn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pu(18,null,null,0)).stateNode=t,r.return=e,e.child=r,oi=e,ni=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(ii){var t=ni;if(t){var r=t;if(!ci(e,t)){if(ui(e))throw Error(i(418));t=ln(r.nextSibling);var o=oi;t&&ci(e,t)?ai(o,r):(e.flags=-4097&e.flags|2,ii=!1,oi=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,oi=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oi=e}function hi(e){if(e!==oi)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rn(e.type,e.memoizedProps)),t&&(t=ni)){if(ui(e))throw pi(),Error(i(418));for(;t;)ai(e,t),t=ln(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ni=ln(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ni=null}}else ni=oi?ln(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ni;e;)e=ln(e.nextSibling)}function fi(){ni=oi=null,ii=!1}function _i(e){null===si?si=[e]:si.push(e)}var gi=b.ReactCurrentBatchConfig;function mi(e,t){if(e&&e.defaultProps){for(var r in t=B({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var vi=Cn(null),yi=null,bi=null,Si=null;function Ei(){Si=bi=yi=null}function Ti(e){var t=vi.current;In(vi),e._currentValue=t}function wi(e,t,r){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Ci(e,t){yi=e,Si=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Oi=null;function ki(e){null===Oi?Oi=[e]:Oi.push(e)}function Ri(e,t,r,o){var n=t.interleaved;return null===n?(r.next=r,ki(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ai(e,o)}function Ai(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Pi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ni(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,r){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&kc)){var n=o.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),o.pending=t,Ai(e,r)}return null===(n=o.interleaved)?(t.next=t,ki(o)):(t.next=n.next,n.next=t),o.interleaved=t,Ai(e,r)}function xi(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var o=t.lanes;r|=o&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Bi(e,t){var r=e.updateQueue,o=e.alternate;if(null!==o&&r===(o=o.updateQueue)){var n=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?n=i=s:i=i.next=s,r=r.next}while(null!==r);null===i?n=i=t:i=i.next=t}else n=i=t;return r={baseState:o.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:o.shared,effects:o.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ui(e,t,r,o){var n=e.updateQueue;Pi=!1;var i=n.firstBaseUpdate,s=n.lastBaseUpdate,a=n.shared.pending;if(null!==a){n.shared.pending=null;var c=a,u=c.next;c.next=null,null===s?i=u:s.next=u,s=c;var l=e.alternate;null!==l&&((a=(l=l.updateQueue).lastBaseUpdate)!==s&&(null===a?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=c))}if(null!==i){var d=n.baseState;for(s=0,l=u=c=null,a=i;;){var h=a.lane,p=a.eventTime;if((o&h)===h){null!==l&&(l=l.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,_=a;switch(h=t,p=r,_.tag){case 1:if("function"===typeof(f=_.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=_.payload)?f.call(p,d,h):f)||void 0===h)break e;d=B({},d,h);break e;case 2:Pi=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=n.effects)?n.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(u=l=p,c=d):l=l.next=p,s|=h;if(null===(a=a.next)){if(null===(a=n.shared.pending))break;a=(h=a).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}if(null===l&&(c=d),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=l,null!==(t=n.shared.interleaved)){n=t;do{s|=n.lane,n=n.next}while(n!==t)}else null===i&&(n.shared.lanes=0);xc|=s,e.lanes=s,e.memoizedState=d}}function ji(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],n=o.callback;if(null!==n){if(o.callback=null,o=r,"function"!==typeof n)throw Error(i(191,n));n.call(o)}}}var Hi=(new o.Component).refs;function zi(e,t,r,o){r=null===(r=r(o,t=e.memoizedState))||void 0===r?t:B({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Vi={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=eu(),n=tu(e),i=Di(o,n);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Mi(e,i,n))&&(ru(t,e,n,o),xi(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=eu(),n=tu(e),i=Di(o,n);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Mi(e,i,n))&&(ru(t,e,n,o),xi(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=eu(),o=tu(e),n=Di(r,o);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Mi(e,n,o))&&(ru(t,e,o,r),xi(t,e,o))}};function qi(e,t,r,o,n,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!ao(r,o)||!ao(n,i))}function Gi(e,t,r){var o=!1,n=kn,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(n=Nn(t)?Pn:Rn.current,i=(o=null!==(o=t.contextTypes)&&void 0!==o)?Ln(e,n):kn),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vi,e.stateNode=t,t._reactInternals=e,o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function Zi(e,t,r,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Vi.enqueueReplaceState(t,t.state,null)}function Fi(e,t,r,o){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=Hi,Li(e);var i=t.contextType;"object"===typeof i&&null!==i?n.context=Ii(i):(i=Nn(t)?Pn:Rn.current,n.context=Ln(e,i)),n.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(zi(e,t,i,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&Vi.enqueueReplaceState(n,n.state,null),Ui(e,r,n,o),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function Wi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var o=r.stateNode}if(!o)throw Error(i(147,e));var n=o,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=n.refs;t===Hi&&(t=n.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qi(e){return(0,e._init)(e._payload)}function Ki(e){function t(t,r){if(e){var o=t.deletions;null===o?(t.deletions=[r],t.flags|=16):o.push(r)}}function r(r,o){if(!e)return null;for(;null!==o;)t(r,o),o=o.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function s(t,r,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<r?(t.flags|=2,r):o:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,r,o){return null===t||6!==t.tag?((t=Bu(r,e.mode,o)).return=e,t):((t=n(t,r)).return=e,t)}function u(e,t,r,o){var i=r.type;return i===T?d(e,t,r.props.children,o,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===L&&Qi(i)===t.type)?((o=n(t,r.props)).ref=Wi(e,t,r),o.return=e,o):((o=Du(r.type,r.key,r.props,null,e.mode,o)).ref=Wi(e,t,r),o.return=e,o)}function l(e,t,r,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Uu(r,e.mode,o)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function d(e,t,r,o,i){return null===t||7!==t.tag?((t=Mu(r,e.mode,o,i)).return=e,t):((t=n(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bu(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(r=Du(t.type,t.key,t.props,null,e.mode,r)).ref=Wi(e,null,t),r.return=e,r;case E:return(t=Uu(t,e.mode,r)).return=e,t;case L:return h(e,(0,t._init)(t._payload),r)}if(te(t)||M(t))return(t=Mu(t,e.mode,r,null)).return=e,t;Yi(e,t)}return null}function p(e,t,r,o){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:c(e,t,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return r.key===n?u(e,t,r,o):null;case E:return r.key===n?l(e,t,r,o):null;case L:return p(e,t,(n=r._init)(r._payload),o)}if(te(r)||M(r))return null!==n?null:d(e,t,r,o,null);Yi(e,r)}return null}function f(e,t,r,o,n){if("string"===typeof o&&""!==o||"number"===typeof o)return c(t,e=e.get(r)||null,""+o,n);if("object"===typeof o&&null!==o){switch(o.$$typeof){case S:return u(t,e=e.get(null===o.key?r:o.key)||null,o,n);case E:return l(t,e=e.get(null===o.key?r:o.key)||null,o,n);case L:return f(e,t,r,(0,o._init)(o._payload),n)}if(te(o)||M(o))return d(t,e=e.get(r)||null,o,n,null);Yi(t,o)}return null}function _(n,i,a,c){for(var u=null,l=null,d=i,_=i=0,g=null;null!==d&&_<a.length;_++){d.index>_?(g=d,d=null):g=d.sibling;var m=p(n,d,a[_],c);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(n,d),i=s(m,i,_),null===l?u=m:l.sibling=m,l=m,d=g}if(_===a.length)return r(n,d),ii&&$n(n,_),u;if(null===d){for(;_<a.length;_++)null!==(d=h(n,a[_],c))&&(i=s(d,i,_),null===l?u=d:l.sibling=d,l=d);return ii&&$n(n,_),u}for(d=o(n,d);_<a.length;_++)null!==(g=f(d,n,_,a[_],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?_:g.key),i=s(g,i,_),null===l?u=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(n,e)})),ii&&$n(n,_),u}function g(n,a,c,u){var l=M(c);if("function"!==typeof l)throw Error(i(150));if(null==(c=l.call(c)))throw Error(i(151));for(var d=l=null,_=a,g=a=0,m=null,v=c.next();null!==_&&!v.done;g++,v=c.next()){_.index>g?(m=_,_=null):m=_.sibling;var y=p(n,_,v.value,u);if(null===y){null===_&&(_=m);break}e&&_&&null===y.alternate&&t(n,_),a=s(y,a,g),null===d?l=y:d.sibling=y,d=y,_=m}if(v.done)return r(n,_),ii&&$n(n,g),l;if(null===_){for(;!v.done;g++,v=c.next())null!==(v=h(n,v.value,u))&&(a=s(v,a,g),null===d?l=v:d.sibling=v,d=v);return ii&&$n(n,g),l}for(_=o(n,_);!v.done;g++,v=c.next())null!==(v=f(_,n,g,v.value,u))&&(e&&null!==v.alternate&&_.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?l=v:d.sibling=v,d=v);return e&&_.forEach((function(e){return t(n,e)})),ii&&$n(n,g),l}return function e(o,i,s,c){if("object"===typeof s&&null!==s&&s.type===T&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case S:e:{for(var u=s.key,l=i;null!==l;){if(l.key===u){if((u=s.type)===T){if(7===l.tag){r(o,l.sibling),(i=n(l,s.props.children)).return=o,o=i;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===L&&Qi(u)===l.type){r(o,l.sibling),(i=n(l,s.props)).ref=Wi(o,l,s),i.return=o,o=i;break e}r(o,l);break}t(o,l),l=l.sibling}s.type===T?((i=Mu(s.props.children,o.mode,c,s.key)).return=o,o=i):((c=Du(s.type,s.key,s.props,null,o.mode,c)).ref=Wi(o,i,s),c.return=o,o=c)}return a(o);case E:e:{for(l=s.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){r(o,i.sibling),(i=n(i,s.children||[])).return=o,o=i;break e}r(o,i);break}t(o,i),i=i.sibling}(i=Uu(s,o.mode,c)).return=o,o=i}return a(o);case L:return e(o,i,(l=s._init)(s._payload),c)}if(te(s))return _(o,i,s,c);if(M(s))return g(o,i,s,c);Yi(o,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(r(o,i.sibling),(i=n(i,s)).return=o,o=i):(r(o,i),(i=Bu(s,o.mode,c)).return=o,o=i),a(o)):r(o,i)}}var Ji=Ki(!0),Xi=Ki(!1),$i={},es=Cn($i),ts=Cn($i),rs=Cn($i);function os(e){if(e===$i)throw Error(i(174));return e}function ns(e,t){switch(On(rs,t),On(ts,e),On(es,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}In(es),On(es,t)}function is(){In(es),In(ts),In(rs)}function ss(e){os(rs.current);var t=os(es.current),r=ce(t,e.type);t!==r&&(On(ts,e),On(es,r))}function as(e){ts.current===e&&(In(es),In(ts))}var cs=Cn(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ls=[];function ds(){for(var e=0;e<ls.length;e++)ls[e]._workInProgressVersionPrimary=null;ls.length=0}var hs=b.ReactCurrentDispatcher,ps=b.ReactCurrentBatchConfig,fs=0,_s=null,gs=null,ms=null,vs=!1,ys=!1,bs=0,Ss=0;function Es(){throw Error(i(321))}function Ts(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!so(e[r],t[r]))return!1;return!0}function ws(e,t,r,o,n,s){if(fs=s,_s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?aa:ca,e=r(o,n),ys){s=0;do{if(ys=!1,bs=0,25<=s)throw Error(i(301));s+=1,ms=gs=null,t.updateQueue=null,hs.current=ua,e=r(o,n)}while(ys)}if(hs.current=sa,t=null!==gs&&null!==gs.next,fs=0,ms=gs=_s=null,vs=!1,t)throw Error(i(300));return e}function Cs(){var e=0!==bs;return bs=0,e}function Is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ms?_s.memoizedState=ms=e:ms=ms.next=e,ms}function Os(){if(null===gs){var e=_s.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ms?_s.memoizedState:ms.next;if(null!==t)ms=t,gs=e;else{if(null===e)throw Error(i(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ms?_s.memoizedState=ms=e:ms=ms.next=e}return ms}function ks(e,t){return"function"===typeof t?t(e):t}function Rs(e){var t=Os(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var o=gs,n=o.baseQueue,s=r.pending;if(null!==s){if(null!==n){var a=n.next;n.next=s.next,s.next=a}o.baseQueue=n=s,r.pending=null}if(null!==n){s=n.next,o=o.baseState;var c=a=null,u=null,l=s;do{var d=l.lane;if((fs&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),o=l.hasEagerState?l.eagerState:e(o,l.action);else{var h={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=h,a=o):u=u.next=h,_s.lanes|=d,xc|=d}l=l.next}while(null!==l&&l!==s);null===u?a=o:u.next=c,so(o,t.memoizedState)||(ba=!0),t.memoizedState=o,t.baseState=a,t.baseQueue=u,r.lastRenderedState=o}if(null!==(e=r.interleaved)){n=e;do{s=n.lane,_s.lanes|=s,xc|=s,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function As(e){var t=Os(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,n=r.pending,s=t.memoizedState;if(null!==n){r.pending=null;var a=n=n.next;do{s=e(s,a.action),a=a.next}while(a!==n);so(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,o]}function Ps(){}function Ls(e,t){var r=_s,o=Os(),n=t(),s=!so(o.memoizedState,n);if(s&&(o.memoizedState=n,ba=!0),o=o.queue,Gs(Ms.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==ms&&1&ms.memoizedState.tag){if(r.flags|=2048,js(9,Ds.bind(null,r,o,n,t),void 0,null),null===Rc)throw Error(i(349));0!==(30&fs)||Ns(r,t,n)}return n}function Ns(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=_s.updateQueue)?(t={lastEffect:null,stores:null},_s.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ds(e,t,r,o){t.value=r,t.getSnapshot=o,xs(t)&&Bs(e)}function Ms(e,t,r){return r((function(){xs(t)&&Bs(e)}))}function xs(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!so(e,r)}catch(o){return!0}}function Bs(e){var t=Ai(e,1);null!==t&&ru(t,e,1,-1)}function Us(e){var t=Is();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,_s,e),[t.memoizedState,e]}function js(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},null===(t=_s.updateQueue)?(t={lastEffect:null,stores:null},_s.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function Hs(){return Os().memoizedState}function zs(e,t,r,o){var n=Is();_s.flags|=e,n.memoizedState=js(1|t,r,void 0,void 0===o?null:o)}function Vs(e,t,r,o){var n=Os();o=void 0===o?null:o;var i=void 0;if(null!==gs){var s=gs.memoizedState;if(i=s.destroy,null!==o&&Ts(o,s.deps))return void(n.memoizedState=js(t,r,i,o))}_s.flags|=e,n.memoizedState=js(1|t,r,i,o)}function qs(e,t){return zs(8390656,8,e,t)}function Gs(e,t){return Vs(2048,8,e,t)}function Zs(e,t){return Vs(4,2,e,t)}function Fs(e,t){return Vs(4,4,e,t)}function Ws(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Vs(4,4,Ws.bind(null,t,e),r)}function Qs(){}function Ks(e,t){var r=Os();t=void 0===t?null:t;var o=r.memoizedState;return null!==o&&null!==t&&Ts(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function Js(e,t){var r=Os();t=void 0===t?null:t;var o=r.memoizedState;return null!==o&&null!==t&&Ts(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function Xs(e,t,r){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=r):(so(r,t)||(r=_t(),_s.lanes|=r,xc|=r,e.baseState=!0),t)}function $s(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var o=ps.transition;ps.transition={};try{e(!1),t()}finally{yt=r,ps.transition=o}}function ea(){return Os().memoizedState}function ta(e,t,r){var o=tu(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},oa(e))na(t,r);else if(null!==(r=Ri(e,t,r,o))){ru(r,e,o,eu()),ia(r,t,o)}}function ra(e,t,r){var o=tu(e),n={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(oa(e))na(t,n);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,r);if(n.hasEagerState=!0,n.eagerState=a,so(a,s)){var c=t.interleaved;return null===c?(n.next=n,ki(t)):(n.next=c.next,c.next=n),void(t.interleaved=n)}}catch(u){}null!==(r=Ri(e,t,n,o))&&(ru(r,e,o,n=eu()),ia(r,t,o))}}function oa(e){var t=e.alternate;return e===_s||null!==t&&t===_s}function na(e,t){ys=vs=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ia(e,t,r){if(0!==(4194240&r)){var o=t.lanes;r|=o&=e.pendingLanes,t.lanes=r,vt(e,r)}}var sa={readContext:Ii,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},aa={readContext:Ii,useCallback:function(e,t){return Is().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:qs,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,zs(4194308,4,Ws.bind(null,t,e),r)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var r=Is();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Is();return t=void 0!==r?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=ta.bind(null,_s,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},Is().memoizedState=e},useState:Us,useDebugValue:Qs,useDeferredValue:function(e){return Is().memoizedState=e},useTransition:function(){var e=Us(!1),t=e[0];return e=$s.bind(null,e[1]),Is().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=_s,n=Is();if(ii){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===Rc)throw Error(i(349));0!==(30&fs)||Ns(o,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,qs(Ms.bind(null,o,s,e),[e]),o.flags|=2048,js(9,Ds.bind(null,o,s,r,t),void 0,null),r},useId:function(){var e=Is(),t=Rc.identifierPrefix;if(ii){var r=Xn;t=":"+t+"R"+(r=(Jn&~(1<<32-st(Jn)-1)).toString(32)+r),0<(r=bs++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=Ss++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ii,useCallback:Ks,useContext:Ii,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:Zs,useLayoutEffect:Fs,useMemo:Js,useReducer:Rs,useRef:Hs,useState:function(){return Rs(ks)},useDebugValue:Qs,useDeferredValue:function(e){return Xs(Os(),gs.memoizedState,e)},useTransition:function(){return[Rs(ks)[0],Os().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Ls,useId:ea,unstable_isNewReconciler:!1},ua={readContext:Ii,useCallback:Ks,useContext:Ii,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:Zs,useLayoutEffect:Fs,useMemo:Js,useReducer:As,useRef:Hs,useState:function(){return As(ks)},useDebugValue:Qs,useDeferredValue:function(e){var t=Os();return null===gs?t.memoizedState=e:Xs(t,gs.memoizedState,e)},useTransition:function(){return[As(ks)[0],Os().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Ls,useId:ea,unstable_isNewReconciler:!1};function la(e,t){try{var r="",o=t;do{r+=z(o),o=o.return}while(o);var n=r}catch(i){n="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:n,digest:null}}function da(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,r){(r=Di(-1,r)).tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Gc||(Gc=!0,Zc=o),ha(0,t)},r}function _a(e,t,r){(r=Di(-1,r)).tag=3;var o=e.type.getDerivedStateFromError;if("function"===typeof o){var n=t.value;r.payload=function(){return o(n)},r.callback=function(){ha(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){ha(0,t),"function"!==typeof o&&(null===Fc?Fc=new Set([this]):Fc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ga(e,t,r){var o=e.pingCache;if(null===o){o=e.pingCache=new pa;var n=new Set;o.set(t,n)}else void 0===(n=o.get(t))&&(n=new Set,o.set(t,n));n.has(r)||(n.add(r),e=Cu.bind(null,e,t,r),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,r,o,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Di(-1,1)).tag=2,Mi(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var ya=b.ReactCurrentOwner,ba=!1;function Sa(e,t,r,o){t.child=null===e?Xi(t,null,r,o):Ji(t,e.child,r,o)}function Ea(e,t,r,o,n){r=r.render;var i=t.ref;return Ci(t,n),o=ws(e,t,r,o,i,n),r=Cs(),null===e||ba?(ii&&r&&ti(t),t.flags|=1,Sa(e,t,o,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ga(e,t,n))}function Ta(e,t,r,o,n){if(null===e){var i=r.type;return"function"!==typeof i||Lu(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Du(r.type,null,o,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,wa(e,t,i,o,n))}if(i=e.child,0===(e.lanes&n)){var s=i.memoizedProps;if((r=null!==(r=r.compare)?r:ao)(s,o)&&e.ref===t.ref)return Ga(e,t,n)}return t.flags|=1,(e=Nu(i,o)).ref=t.ref,e.return=t,t.child=e}function wa(e,t,r,o,n){if(null!==e){var i=e.memoizedProps;if(ao(i,o)&&e.ref===t.ref){if(ba=!1,t.pendingProps=o=i,0===(e.lanes&n))return t.lanes=e.lanes,Ga(e,t,n);0!==(131072&e.flags)&&(ba=!0)}}return Oa(e,t,r,o,n)}function Ca(e,t,r){var o=t.pendingProps,n=o.children,i=null!==e?e.memoizedState:null;if("hidden"===o.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(Nc,Lc),Lc|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,On(Nc,Lc),Lc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==i?i.baseLanes:r,On(Nc,Lc),Lc|=o}else null!==i?(o=i.baseLanes|r,t.memoizedState=null):o=r,On(Nc,Lc),Lc|=o;return Sa(e,t,n,r),t.child}function Ia(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Oa(e,t,r,o,n){var i=Nn(r)?Pn:Rn.current;return i=Ln(t,i),Ci(t,n),r=ws(e,t,r,o,i,n),o=Cs(),null===e||ba?(ii&&o&&ti(t),t.flags|=1,Sa(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ga(e,t,n))}function ka(e,t,r,o,n){if(Nn(r)){var i=!0;Bn(t)}else i=!1;if(Ci(t,n),null===t.stateNode)qa(e,t),Gi(t,r,o),Fi(t,r,o,n),o=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=r.contextType;"object"===typeof u&&null!==u?u=Ii(u):u=Ln(t,u=Nn(r)?Pn:Rn.current);var l=r.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==o||c!==u)&&Zi(t,s,o,u),Pi=!1;var h=t.memoizedState;s.state=h,Ui(t,o,s,n),c=t.memoizedState,a!==o||h!==c||An.current||Pi?("function"===typeof l&&(zi(t,r,l,o),c=t.memoizedState),(a=Pi||qi(t,r,a,o,h,c,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=c),s.props=o,s.state=c,s.context=u,o=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,Ni(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:mi(t.type,a),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(c=r.contextType)&&null!==c?c=Ii(c):c=Ln(t,c=Nn(r)?Pn:Rn.current);var p=r.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==c)&&Zi(t,s,o,c),Pi=!1,h=t.memoizedState,s.state=h,Ui(t,o,s,n);var f=t.memoizedState;a!==d||h!==f||An.current||Pi?("function"===typeof p&&(zi(t,r,p,o),f=t.memoizedState),(u=Pi||qi(t,r,u,o,h,f,c)||!1)?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(o,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(o,f,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=f),s.props=o,s.state=f,s.context=c,o=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return Ra(e,t,r,o,i,n)}function Ra(e,t,r,o,n,i){Ia(e,t);var s=0!==(128&t.flags);if(!o&&!s)return n&&Un(t,r,!1),Ga(e,t,i);o=t.stateNode,ya.current=t;var a=s&&"function"!==typeof r.getDerivedStateFromError?null:o.render();return t.flags|=1,null!==e&&s?(t.child=Ji(t,e.child,null,i),t.child=Ji(t,null,a,i)):Sa(e,t,a,i),t.memoizedState=o.state,n&&Un(t,r,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Mn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mn(0,t.context,!1),ns(e,t.containerInfo)}function Pa(e,t,r,o,n){return fi(),_i(n),t.flags|=256,Sa(e,t,r,o),t.child}var La,Na,Da,Ma={dehydrated:null,treeContext:null,retryLane:0};function xa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,r){var o,n=t.pendingProps,s=cs.current,a=!1,c=0!==(128&t.flags);if((o=c)||(o=(null===e||null!==e.memoizedState)&&0!==(2&s)),o?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),On(cs,1&s),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=n.children,e=n.fallback,a?(n=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&n)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=xu(c,n,0,null),e=Mu(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=xa(r),t.memoizedState=Ma,e):Ua(t,c));if(null!==(s=e.memoizedState)&&null!==(o=s.dehydrated))return function(e,t,r,o,n,s,a){if(r)return 256&t.flags?(t.flags&=-257,ja(e,t,a,o=da(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=o.fallback,n=t.mode,o=xu({mode:"visible",children:o.children},n,0,null),(s=Mu(s,n,a,null)).flags|=2,o.return=t,s.return=t,o.sibling=s,t.child=o,0!==(1&t.mode)&&Ji(t,e.child,null,a),t.child.memoizedState=xa(a),t.memoizedState=Ma,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===n.data){if(o=n.nextSibling&&n.nextSibling.dataset)var c=o.dgst;return o=c,ja(e,t,a,o=da(s=Error(i(419)),o,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(o=Rc)){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(o.suspendedLanes|a))?0:n)&&n!==s.retryLane&&(s.retryLane=n,Ai(e,n),ru(o,e,n,-1))}return _u(),ja(e,t,a,o=da(Error(i(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Ou.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,ni=ln(n.nextSibling),oi=t,ii=!0,si=null,null!==e&&(Yn[Qn++]=Jn,Yn[Qn++]=Xn,Yn[Qn++]=Kn,Jn=e.id,Xn=e.overflow,Kn=t),(t=Ua(t,o.children)).flags|=4096,t)}(e,t,c,n,o,s,r);if(a){a=n.fallback,c=t.mode,o=(s=e.child).sibling;var u={mode:"hidden",children:n.children};return 0===(1&c)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Nu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==o?a=Nu(o,a):(a=Mu(a,c,r,null)).flags|=2,a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,c=null===(c=e.child.memoizedState)?xa(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~r,t.memoizedState=Ma,n}return e=(a=e.child).sibling,n=Nu(a,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ua(e,t){return(t=xu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,r,o){return null!==o&&_i(o),Ji(t,e.child,null,r),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,r){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),wi(e.return,t,r)}function za(e,t,r,o,n){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=r,i.tailMode=n)}function Va(e,t,r){var o=t.pendingProps,n=o.revealOrder,i=o.tail;if(Sa(e,t,o.children,r),0!==(2&(o=cs.current)))o=1&o|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,r,t);else if(19===e.tag)Ha(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(On(cs,o),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===us(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),za(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===us(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}za(t,!0,r,null,i);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),xc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Nu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Nu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Za(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;null!==r;)null!==r.alternate&&(o=r),r=r.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Fa(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,o=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,o|=14680064&n.subtreeFlags,o|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,o|=n.subtreeFlags,o|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function Wa(e,t,r){var o=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fa(t),null;case 1:case 17:return Nn(t.type)&&Dn(),Fa(t),null;case 3:return o=t.stateNode,is(),In(An),In(Rn),ds(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==si&&(su(si),si=null))),Fa(t),null;case 5:as(t);var n=os(rs.current);if(r=t.type,null!==e&&null!=t.stateNode)Na(e,t,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(null===t.stateNode)throw Error(i(166));return Fa(t),null}if(e=os(es.current),hi(t)){o=t.stateNode,r=t.type;var s=t.memoizedProps;switch(o[pn]=t,o[fn]=s,e=0!==(1&t.mode),r){case"dialog":jo("cancel",o),jo("close",o);break;case"iframe":case"object":case"embed":jo("load",o);break;case"video":case"audio":for(n=0;n<Mo.length;n++)jo(Mo[n],o);break;case"source":jo("error",o);break;case"img":case"image":case"link":jo("error",o),jo("load",o);break;case"details":jo("toggle",o);break;case"input":K(o,s),jo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},jo("invalid",o);break;case"textarea":ne(o,s),jo("invalid",o)}for(var c in ve(r,s),n=null,s)if(s.hasOwnProperty(c)){var u=s[c];"children"===c?"string"===typeof u?o.textContent!==u&&(!0!==s.suppressHydrationWarning&&Xo(o.textContent,u,e),n=["children",u]):"number"===typeof u&&o.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Xo(o.textContent,u,e),n=["children",""+u]):a.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&jo("scroll",o)}switch(r){case"input":F(o),$(o,s,!0);break;case"textarea":F(o),se(o);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(o.onclick=$o)}o=n,t.updateQueue=o,null!==o&&(t.flags|=4)}else{c=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof o.is?e=c.createElement(r,{is:o.is}):(e=c.createElement(r),"select"===r&&(c=e,o.multiple?c.multiple=!0:o.size&&(c.size=o.size))):e=c.createElementNS(e,r),e[pn]=t,e[fn]=o,La(e,t),t.stateNode=e;e:{switch(c=ye(r,o),r){case"dialog":jo("cancel",e),jo("close",e),n=o;break;case"iframe":case"object":case"embed":jo("load",e),n=o;break;case"video":case"audio":for(n=0;n<Mo.length;n++)jo(Mo[n],e);n=o;break;case"source":jo("error",e),n=o;break;case"img":case"image":case"link":jo("error",e),jo("load",e),n=o;break;case"details":jo("toggle",e),n=o;break;case"input":K(e,o),n=Q(e,o),jo("invalid",e);break;case"option":default:n=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},n=B({},o,{value:void 0}),jo("invalid",e);break;case"textarea":ne(e,o),n=oe(e,o),jo("invalid",e)}for(s in ve(r,n),u=n)if(u.hasOwnProperty(s)){var l=u[s];"style"===s?ge(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===s?"string"===typeof l?("textarea"!==r||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=l&&"onScroll"===s&&jo("scroll",e):null!=l&&y(e,s,l,c))}switch(r){case"input":F(e),$(e,o,!1);break;case"textarea":F(e),se(e);break;case"option":null!=o.value&&e.setAttribute("value",""+G(o.value));break;case"select":e.multiple=!!o.multiple,null!=(s=o.value)?re(e,!!o.multiple,s,!1):null!=o.defaultValue&&re(e,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=$o)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Fa(t),null;case 6:if(e&&null!=t.stateNode)Da(0,t,e.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(i(166));if(r=os(rs.current),os(es.current),hi(t)){if(o=t.stateNode,r=t.memoizedProps,o[pn]=t,(s=o.nodeValue!==r)&&null!==(e=oi))switch(e.tag){case 3:Xo(o.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xo(o.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[pn]=t,t.stateNode=o}return Fa(t),null;case 13:if(In(cs),o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==ni&&0!==(1&t.mode)&&0===(128&t.flags))pi(),fi(),t.flags|=98560,s=!1;else if(s=hi(t),null!==o&&null!==o.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[pn]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Fa(t),s=!1}else null!==si&&(su(si),si=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((o=null!==o)!==(null!==e&&null!==e.memoizedState)&&o&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&cs.current)?0===Dc&&(Dc=3):_u())),null!==t.updateQueue&&(t.flags|=4),Fa(t),null);case 4:return is(),null===e&&Vo(t.stateNode.containerInfo),Fa(t),null;case 10:return Ti(t.type._context),Fa(t),null;case 19:if(In(cs),null===(s=t.memoizedState))return Fa(t),null;if(o=0!==(128&t.flags),null===(c=s.rendering))if(o)Za(s,!1);else{if(0!==Dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=us(e))){for(t.flags|=128,Za(s,!1),null!==(o=c.updateQueue)&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;null!==r;)e=o,(s=r).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return On(cs,1&cs.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Vc&&(t.flags|=128,o=!0,Za(s,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=us(c))){if(t.flags|=128,o=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Za(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!ii)return Fa(t),null}else 2*Je()-s.renderingStartTime>Vc&&1073741824!==r&&(t.flags|=128,o=!0,Za(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=s.last)?r.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,r=cs.current,On(cs,o?1&r|2:1&r),t):(Fa(t),null);case 22:case 23:return du(),o=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==o&&(t.flags|=8192),o&&0!==(1&t.mode)?0!==(1073741824&Lc)&&(Fa(t),6&t.subtreeFlags&&(t.flags|=8192)):Fa(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ya(e,t){switch(ri(t),t.tag){case 1:return Nn(t.type)&&Dn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return is(),In(An),In(Rn),ds(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(In(cs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return In(cs),null;case 4:return is(),null;case 10:return Ti(t.type._context),null;case 22:case 23:return du(),null;default:return null}}La=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Na=function(e,t,r,o){var n=e.memoizedProps;if(n!==o){e=t.stateNode,os(es.current);var i,s=null;switch(r){case"input":n=Q(e,n),o=Q(e,o),s=[];break;case"select":n=B({},n,{value:void 0}),o=B({},o,{value:void 0}),s=[];break;case"textarea":n=oe(e,n),o=oe(e,o),s=[];break;default:"function"!==typeof n.onClick&&"function"===typeof o.onClick&&(e.onclick=$o)}for(l in ve(r,o),r=null,n)if(!o.hasOwnProperty(l)&&n.hasOwnProperty(l)&&null!=n[l])if("style"===l){var c=n[l];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in o){var u=o[l];if(c=null!=n?n[l]:void 0,o.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(r||(r={}),r[i]=u[i])}else r||(s||(s=[]),s.push(l,r)),r=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(a.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&jo("scroll",e),s||c===u||(s=[])):(s=s||[]).push(l,u))}r&&(s=s||[]).push("style",r);var l=s;(t.updateQueue=l)&&(t.flags|=4)}},Da=function(e,t,r,o){r!==o&&(t.flags|=4)};var Qa=!1,Ka=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function $a(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(o){wu(e,t,o)}else r.current=null}function ec(e,t,r){try{r()}catch(o){wu(e,t,o)}}var tc=!1;function rc(e,t,r){var o=t.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var n=o=o.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,void 0!==i&&ec(t,r,i)}n=n.next}while(n!==o)}}function oc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function nc(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pn],delete t[fn],delete t[gn],delete t[mn],delete t[vn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,r){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=$o));else if(4!==o&&null!==(e=e.child))for(cc(e,t,r),e=e.sibling;null!==e;)cc(e,t,r),e=e.sibling}function uc(e,t,r){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==o&&null!==(e=e.child))for(uc(e,t,r),e=e.sibling;null!==e;)uc(e,t,r),e=e.sibling}var lc=null,dc=!1;function hc(e,t,r){for(r=r.child;null!==r;)pc(e,t,r),r=r.sibling}function pc(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(nt,r)}catch(a){}switch(r.tag){case 5:Ka||$a(r,t);case 6:var o=lc,n=dc;lc=null,hc(e,t,r),dc=n,null!==(lc=o)&&(dc?(e=lc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):lc.removeChild(r.stateNode));break;case 18:null!==lc&&(dc?(e=lc,r=r.stateNode,8===e.nodeType?un(e.parentNode,r):1===e.nodeType&&un(e,r),Vt(e)):un(lc,r.stateNode));break;case 4:o=lc,n=dc,lc=r.stateNode.containerInfo,dc=!0,hc(e,t,r),lc=o,dc=n;break;case 0:case 11:case 14:case 15:if(!Ka&&(null!==(o=r.updateQueue)&&null!==(o=o.lastEffect))){n=o=o.next;do{var i=n,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&ec(r,t,s),n=n.next}while(n!==o)}hc(e,t,r);break;case 1:if(!Ka&&($a(r,t),"function"===typeof(o=r.stateNode).componentWillUnmount))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(a){wu(r,t,a)}hc(e,t,r);break;case 21:hc(e,t,r);break;case 22:1&r.mode?(Ka=(o=Ka)||null!==r.memoizedState,hc(e,t,r),Ka=o):hc(e,t,r);break;default:hc(e,t,r)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ja),t.forEach((function(t){var o=ku.bind(null,e,t);r.has(t)||(r.add(t),t.then(o,o))}))}}function _c(e,t){var r=t.deletions;if(null!==r)for(var o=0;o<r.length;o++){var n=r[o];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:lc=c.stateNode,dc=!1;break e;case 3:case 4:lc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===lc)throw Error(i(160));pc(s,a,n),lc=null,dc=!1;var u=n.alternate;null!==u&&(u.return=null),n.return=null}catch(l){wu(n,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_c(t,e),mc(e),4&o){try{rc(3,e,e.return),oc(3,e)}catch(g){wu(e,e.return,g)}try{rc(5,e,e.return)}catch(g){wu(e,e.return,g)}}break;case 1:_c(t,e),mc(e),512&o&&null!==r&&$a(r,r.return);break;case 5:if(_c(t,e),mc(e),512&o&&null!==r&&$a(r,r.return),32&e.flags){var n=e.stateNode;try{he(n,"")}catch(g){wu(e,e.return,g)}}if(4&o&&null!=(n=e.stateNode)){var s=e.memoizedProps,a=null!==r?r.memoizedProps:s,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===s.type&&null!=s.name&&J(n,s),ye(c,a);var l=ye(c,s);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];"style"===d?ge(n,h):"dangerouslySetInnerHTML"===d?de(n,h):"children"===d?he(n,h):y(n,d,h,l)}switch(c){case"input":X(n,s);break;case"textarea":ie(n,s);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?re(n,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?re(n,!!s.multiple,s.defaultValue,!0):re(n,!!s.multiple,s.multiple?[]:"",!1))}n[fn]=s}catch(g){wu(e,e.return,g)}}break;case 6:if(_c(t,e),mc(e),4&o){if(null===e.stateNode)throw Error(i(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(g){wu(e,e.return,g)}}break;case 3:if(_c(t,e),mc(e),4&o&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){wu(e,e.return,g)}break;case 4:default:_c(t,e),mc(e);break;case 13:_c(t,e),mc(e),8192&(n=e.child).flags&&(s=null!==n.memoizedState,n.stateNode.isHidden=s,!s||null!==n.alternate&&null!==n.alternate.memoizedState||(zc=Je())),4&o&&fc(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Ka=(l=Ka)||d,_c(t,e),Ka=l):_c(t,e),mc(e),8192&o){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(f=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:rc(4,p,p.return);break;case 1:$a(p,p.return);var _=p.stateNode;if("function"===typeof _.componentWillUnmount){o=p,r=p.return;try{t=o,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(g){wu(o,r,g)}}break;case 5:$a(p,p.return);break;case 22:if(null!==p.memoizedState){Sc(h);continue}}null!==f?(f.return=p,Xa=f):Sc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{n=h.stateNode,l?"function"===typeof(s=n.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=h.stateNode,a=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=_e("display",a))}catch(g){wu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(g){wu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_c(t,e),mc(e),4&o&&fc(e);case 21:}}function mc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(sc(r)){var o=r;break e}r=r.return}throw Error(i(160))}switch(o.tag){case 5:var n=o.stateNode;32&o.flags&&(he(n,""),o.flags&=-33),uc(e,ac(e),n);break;case 3:case 4:var s=o.stateNode.containerInfo;cc(e,ac(e),s);break;default:throw Error(i(161))}}catch(a){wu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,r){Xa=e,yc(e,t,r)}function yc(e,t,r){for(var o=0!==(1&e.mode);null!==Xa;){var n=Xa,i=n.child;if(22===n.tag&&o){var s=null!==n.memoizedState||Qa;if(!s){var a=n.alternate,c=null!==a&&null!==a.memoizedState||Ka;a=Qa;var u=Ka;if(Qa=s,(Ka=c)&&!u)for(Xa=n;null!==Xa;)c=(s=Xa).child,22===s.tag&&null!==s.memoizedState?Ec(n):null!==c?(c.return=s,Xa=c):Ec(n);for(;null!==i;)Xa=i,yc(i,t,r),i=i.sibling;Xa=n,Qa=a,Ka=u}bc(e)}else 0!==(8772&n.subtreeFlags)&&null!==i?(i.return=n,Xa=i):bc(e)}}function bc(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ka||oc(5,t);break;case 1:var o=t.stateNode;if(4&t.flags&&!Ka)if(null===r)o.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:mi(t.type,r.memoizedProps);o.componentDidUpdate(n,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&ji(t,s,o);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}ji(t,a,r)}break;case 5:var c=t.stateNode;if(null===r&&4&t.flags){r=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}Ka||512&t.flags&&nc(t)}catch(p){wu(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xa=r;break}Xa=t.return}}function Sc(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xa=r;break}Xa=t.return}}function Ec(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{oc(4,t)}catch(c){wu(t,r,c)}break;case 1:var o=t.stateNode;if("function"===typeof o.componentDidMount){var n=t.return;try{o.componentDidMount()}catch(c){wu(t,n,c)}}var i=t.return;try{nc(t)}catch(c){wu(t,i,c)}break;case 5:var s=t.return;try{nc(t)}catch(c){wu(t,s,c)}}}catch(c){wu(t,t.return,c)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Tc,wc=Math.ceil,Cc=b.ReactCurrentDispatcher,Ic=b.ReactCurrentOwner,Oc=b.ReactCurrentBatchConfig,kc=0,Rc=null,Ac=null,Pc=0,Lc=0,Nc=Cn(0),Dc=0,Mc=null,xc=0,Bc=0,Uc=0,jc=null,Hc=null,zc=0,Vc=1/0,qc=null,Gc=!1,Zc=null,Fc=null,Wc=!1,Yc=null,Qc=0,Kc=0,Jc=null,Xc=-1,$c=0;function eu(){return 0!==(6&kc)?Je():-1!==Xc?Xc:Xc=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&kc)&&0!==Pc?Pc&-Pc:null!==gi.transition?(0===$c&&($c=_t()),$c):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function ru(e,t,r,o){if(50<Kc)throw Kc=0,Jc=null,Error(i(185));mt(e,r,o),0!==(2&kc)&&e===Rc||(e===Rc&&(0===(2&kc)&&(Bc|=r),4===Dc&&au(e,Pc)),ou(e,o),1===r&&0===kc&&0===(1&t.mode)&&(Vc=Je()+500,Hn&&qn()))}function ou(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),a=1<<s,c=n[s];-1===c?0!==(a&r)&&0===(a&o)||(n[s]=pt(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var o=ht(e,e===Rc?Pc:0);if(0===o)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Hn=!0,Vn(e)}(cu.bind(null,e)):Vn(cu.bind(null,e)),an((function(){0===(6&kc)&&qn()})),r=null;else{switch(bt(o)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=ot}r=Ru(r,nu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nu(e,t){if(Xc=-1,$c=0,0!==(6&kc))throw Error(i(327));var r=e.callbackNode;if(Eu()&&e.callbackNode!==r)return null;var o=ht(e,e===Rc?Pc:0);if(0===o)return null;if(0!==(30&o)||0!==(o&e.expiredLanes)||t)t=gu(e,o);else{t=o;var n=kc;kc|=2;var s=fu();for(Rc===e&&Pc===t||(qc=null,Vc=Je()+500,hu(e,t));;)try{vu();break}catch(c){pu(e,c)}Ei(),Cc.current=s,kc=n,null!==Ac?t=0:(Rc=null,Pc=0,t=Dc)}if(0!==t){if(2===t&&(0!==(n=ft(e))&&(o=n,t=iu(e,n))),1===t)throw r=Mc,hu(e,0),au(e,o),ou(e,Je()),r;if(6===t)au(e,o);else{if(n=e.current.alternate,0===(30&o)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var o=0;o<r.length;o++){var n=r[o],i=n.getSnapshot;n=n.value;try{if(!so(i(),n))return!1}catch(a){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=gu(e,o))&&(0!==(s=ft(e))&&(o=s,t=iu(e,s))),1===t))throw r=Mc,hu(e,0),au(e,o),ou(e,Je()),r;switch(e.finishedWork=n,e.finishedLanes=o,t){case 0:case 1:throw Error(i(345));case 2:case 5:Su(e,Hc,qc);break;case 3:if(au(e,o),(130023424&o)===o&&10<(t=zc+500-Je())){if(0!==ht(e,0))break;if(((n=e.suspendedLanes)&o)!==o){eu(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=on(Su.bind(null,e,Hc,qc),t);break}Su(e,Hc,qc);break;case 4:if(au(e,o),(4194240&o)===o)break;for(t=e.eventTimes,n=-1;0<o;){var a=31-st(o);s=1<<a,(a=t[a])>n&&(n=a),o&=~s}if(o=n,10<(o=(120>(o=Je()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*wc(o/1960))-o)){e.timeoutHandle=on(Su.bind(null,e,Hc,qc),o);break}Su(e,Hc,qc);break;default:throw Error(i(329))}}}return ou(e,Je()),e.callbackNode===r?nu.bind(null,e):null}function iu(e,t){var r=jc;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Hc,Hc=r,null!==t&&su(t)),e}function su(e){null===Hc?Hc=e:Hc.push.apply(Hc,e)}function au(e,t){for(t&=~Uc,t&=~Bc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),o=1<<r;e[r]=-1,t&=~o}}function cu(e){if(0!==(6&kc))throw Error(i(327));Eu();var t=ht(e,0);if(0===(1&t))return ou(e,Je()),null;var r=gu(e,t);if(0!==e.tag&&2===r){var o=ft(e);0!==o&&(t=o,r=iu(e,o))}if(1===r)throw r=Mc,hu(e,0),au(e,t),ou(e,Je()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,Hc,qc),ou(e,Je()),null}function uu(e,t){var r=kc;kc|=1;try{return e(t)}finally{0===(kc=r)&&(Vc=Je()+500,Hn&&qn())}}function lu(e){null!==Yc&&0===Yc.tag&&0===(6&kc)&&Eu();var t=kc;kc|=1;var r=Oc.transition,o=yt;try{if(Oc.transition=null,yt=1,e)return e()}finally{yt=o,Oc.transition=r,0===(6&(kc=t))&&qn()}}function du(){Lc=Nc.current,In(Nc)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,nn(r)),null!==Ac)for(r=Ac.return;null!==r;){var o=r;switch(ri(o),o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Dn();break;case 3:is(),In(An),In(Rn),ds();break;case 5:as(o);break;case 4:is();break;case 13:case 19:In(cs);break;case 10:Ti(o.type._context);break;case 22:case 23:du()}r=r.return}if(Rc=e,Ac=e=Nu(e.current,null),Pc=Lc=t,Dc=0,Mc=null,Uc=Bc=xc=0,Hc=jc=null,null!==Oi){for(t=0;t<Oi.length;t++)if(null!==(o=(r=Oi[t]).interleaved)){r.interleaved=null;var n=o.next,i=r.pending;if(null!==i){var s=i.next;i.next=n,o.next=s}r.pending=o}Oi=null}return e}function pu(e,t){for(;;){var r=Ac;try{if(Ei(),hs.current=sa,vs){for(var o=_s.memoizedState;null!==o;){var n=o.queue;null!==n&&(n.pending=null),o=o.next}vs=!1}if(fs=0,ms=gs=_s=null,ys=!1,bs=0,Ic.current=null,null===r||null===r.return){Dc=1,Mc=t,Ac=null;break}e:{var s=e,a=r.return,c=r,u=t;if(t=Pc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ma(a);if(null!==f){f.flags&=-257,va(f,a,c,0,t),1&f.mode&&ga(s,l,t),u=l;var _=(t=f).updateQueue;if(null===_){var g=new Set;g.add(u),t.updateQueue=g}else _.add(u);break e}if(0===(1&t)){ga(s,l,t),_u();break e}u=Error(i(426))}else if(ii&&1&c.mode){var m=ma(a);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),va(m,a,c,0,t),_i(la(u,c));break e}}s=u=la(u,c),4!==Dc&&(Dc=2),null===jc?jc=[s]:jc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,fa(0,u,t));break e;case 1:c=u;var v=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Fc||!Fc.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,_a(s,c,t));break e}}s=s.return}while(null!==s)}bu(r)}catch(b){t=b,Ac===r&&null!==r&&(Ac=r=r.return);continue}break}}function fu(){var e=Cc.current;return Cc.current=sa,null===e?sa:e}function _u(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Rc||0===(268435455&xc)&&0===(268435455&Bc)||au(Rc,Pc)}function gu(e,t){var r=kc;kc|=2;var o=fu();for(Rc===e&&Pc===t||(qc=null,hu(e,t));;)try{mu();break}catch(n){pu(e,n)}if(Ei(),kc=r,Cc.current=o,null!==Ac)throw Error(i(261));return Rc=null,Pc=0,Dc}function mu(){for(;null!==Ac;)yu(Ac)}function vu(){for(;null!==Ac&&!Qe();)yu(Ac)}function yu(e){var t=Tc(e.alternate,e,Lc);e.memoizedProps=e.pendingProps,null===t?bu(e):Ac=t,Ic.current=null}function bu(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Wa(r,t,Lc)))return void(Ac=r)}else{if(null!==(r=Ya(r,t)))return r.flags&=32767,void(Ac=r);if(null===e)return Dc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Dc&&(Dc=5)}function Su(e,t,r){var o=yt,n=Oc.transition;try{Oc.transition=null,yt=1,function(e,t,r,o){do{Eu()}while(null!==Yc);if(0!==(6&kc))throw Error(i(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-st(r),i=1<<n;t[n]=0,o[n]=-1,e[n]=-1,r&=~i}}(e,s),e===Rc&&(Ac=Rc=null,Pc=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Wc||(Wc=!0,Ru(tt,(function(){return Eu(),null}))),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Oc.transition,Oc.transition=null;var a=yt;yt=1;var c=kc;kc|=4,Ic.current=null,function(e,t){if(en=Gt,po(e=ho())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(o&&0!==o.rangeCount){r=o.anchorNode;var n=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{r.nodeType,s.nodeType}catch(S){r=null;break e}var a=0,c=-1,u=-1,l=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==n&&3!==h.nodeType||(c=a+n),h!==s||0!==o&&3!==h.nodeType||(u=a+o),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++l===n&&(c=a),p===s&&++d===o&&(u=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===c||-1===u?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(tn={focusedElem:e,selectionRange:r},Gt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var _=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==_){var g=_.memoizedProps,m=_.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:mi(t.type,g),m);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(S){wu(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}_=tc,tc=!1}(e,r),gc(r,e),fo(tn),Gt=!!en,tn=en=null,e.current=r,vc(r,e,n),Ke(),kc=c,yt=a,Oc.transition=s}else e.current=r;if(Wc&&(Wc=!1,Yc=e,Qc=n),0===(s=e.pendingLanes)&&(Fc=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ou(e,Je()),null!==t)for(o=e.onRecoverableError,r=0;r<t.length;r++)o((n=t[r]).value,{componentStack:n.stack,digest:n.digest});if(Gc)throw Gc=!1,e=Zc,Zc=null,e;0!==(1&Qc)&&0!==e.tag&&Eu(),0!==(1&(s=e.pendingLanes))?e===Jc?Kc++:(Kc=0,Jc=e):Kc=0,qn()}(e,t,r,o)}finally{Oc.transition=n,yt=o}return null}function Eu(){if(null!==Yc){var e=bt(Qc),t=Oc.transition,r=yt;try{if(Oc.transition=null,yt=16>e?16:e,null===Yc)var o=!1;else{if(e=Yc,Yc=null,Qc=0,0!==(6&kc))throw Error(i(331));var n=kc;for(kc|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var c=s.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for(Xa=l;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:rc(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var p=(d=Xa).sibling,f=d.return;if(ic(d),d===l){Xa=null;break}if(null!==p){p.return=f,Xa=p;break}Xa=f}}}var _=s.alternate;if(null!==_){var g=_.child;if(null!==g){_.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:rc(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Xa=v;break e}Xa=s.return}}var y=e.current;for(Xa=y;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=y;null!==Xa;){if(0!==(2048&(c=Xa).flags))try{switch(c.tag){case 0:case 11:case 15:oc(9,c)}}catch(E){wu(c,c.return,E)}if(c===a){Xa=null;break e}var S=c.sibling;if(null!==S){S.return=c.return,Xa=S;break e}Xa=c.return}}if(kc=n,qn(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(nt,e)}catch(E){}o=!0}return o}finally{yt=r,Oc.transition=t}}return!1}function Tu(e,t,r){e=Mi(e,t=fa(0,t=la(r,t),1),1),t=eu(),null!==e&&(mt(e,1,t),ou(e,t))}function wu(e,t,r){if(3===e.tag)Tu(e,e,r);else for(;null!==t;){if(3===t.tag){Tu(t,e,r);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Fc||!Fc.has(o))){t=Mi(t,e=_a(t,e=la(r,e),1),1),e=eu(),null!==t&&(mt(t,1,e),ou(t,e));break}}t=t.return}}function Cu(e,t,r){var o=e.pingCache;null!==o&&o.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&r,Rc===e&&(Pc&r)===r&&(4===Dc||3===Dc&&(130023424&Pc)===Pc&&500>Je()-zc?hu(e,0):Uc|=r),ou(e,t)}function Iu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var r=eu();null!==(e=Ai(e,t))&&(mt(e,t,r),ou(e,r))}function Ou(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Iu(e,r)}function ku(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(i(314))}null!==o&&o.delete(t),Iu(e,r)}function Ru(e,t){return We(e,t)}function Au(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,r,o){return new Au(e,t,r,o)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var r=e.alternate;return null===r?((r=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Du(e,t,r,o,n,s){var a=2;if(o=e,"function"===typeof e)Lu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case T:return Mu(r.children,n,s,t);case w:a=8,n|=8;break;case C:return(e=Pu(12,r,t,2|n)).elementType=C,e.lanes=s,e;case R:return(e=Pu(13,r,t,n)).elementType=R,e.lanes=s,e;case A:return(e=Pu(19,r,t,n)).elementType=A,e.lanes=s,e;case N:return xu(r,n,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case O:a=9;break e;case k:a=11;break e;case P:a=14;break e;case L:a=16,o=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pu(a,r,t,n)).elementType=e,t.type=o,t.lanes=s,t}function Mu(e,t,r,o){return(e=Pu(7,e,o,t)).lanes=r,e}function xu(e,t,r,o){return(e=Pu(22,e,o,t)).elementType=N,e.lanes=r,e.stateNode={isHidden:!1},e}function Bu(e,t,r){return(e=Pu(6,e,null,t)).lanes=r,e}function Uu(e,t,r){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,r,o,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=o,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Hu(e,t,r,o,n,i,s,a,c){return e=new ju(e,t,r,a,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pu(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function zu(e,t,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==o?null:""+o,children:e,containerInfo:t,implementation:r}}function Vu(e){if(!e)return kn;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Nn(r))return xn(e,r,t)}return t}function qu(e,t,r,o,n,i,s,a,c){return(e=Hu(r,o,!0,e,0,i,0,a,c)).context=Vu(null),r=e.current,(i=Di(o=eu(),n=tu(r))).callback=void 0!==t&&null!==t?t:null,Mi(r,i,n),e.current.lanes=n,mt(e,n,o),ou(e,o),e}function Gu(e,t,r,o){var n=t.current,i=eu(),s=tu(n);return r=Vu(r),null===t.context?t.context=r:t.pendingContext=r,(t=Di(i,s)).payload={element:e},null!==(o=void 0===o?null:o)&&(t.callback=o),null!==(e=Mi(n,t,s))&&(ru(e,n,s,i),xi(e,n,s)),s}function Zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Fu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wu(e,t){Fu(e,t),(e=e.alternate)&&Fu(e,t)}Tc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||An.current)ba=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ba=!1,function(e,t,r){switch(t.tag){case 3:Aa(t),fi();break;case 5:ss(t);break;case 1:Nn(t.type)&&Bn(t);break;case 4:ns(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,n=t.memoizedProps.value;On(vi,o._currentValue),o._currentValue=n;break;case 13:if(null!==(o=t.memoizedState))return null!==o.dehydrated?(On(cs,1&cs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ba(e,t,r):(On(cs,1&cs.current),null!==(e=Ga(e,t,r))?e.sibling:null);On(cs,1&cs.current);break;case 19:if(o=0!==(r&t.childLanes),0!==(128&e.flags)){if(o)return Va(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),On(cs,cs.current),o)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,r)}return Ga(e,t,r)}(e,t,r);ba=0!==(131072&e.flags)}else ba=!1,ii&&0!==(1048576&t.flags)&&ei(t,Wn,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;qa(e,t),e=t.pendingProps;var n=Ln(t,Rn.current);Ci(t,r),n=ws(null,t,o,e,n,r);var s=Cs();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nn(o)?(s=!0,Bn(t)):s=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Li(t),n.updater=Vi,t.stateNode=n,n._reactInternals=t,Fi(t,o,e,r),t=Ra(null,t,o,!0,s,r)):(t.tag=0,ii&&s&&ti(t),Sa(null,t,n,r),t=t.child),t;case 16:o=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,o=(n=o._init)(o._payload),t.type=o,n=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===P)return 14}return 2}(o),e=mi(o,e),n){case 0:t=Oa(null,t,o,e,r);break e;case 1:t=ka(null,t,o,e,r);break e;case 11:t=Ea(null,t,o,e,r);break e;case 14:t=Ta(null,t,o,mi(o.type,e),r);break e}throw Error(i(306,o,""))}return t;case 0:return o=t.type,n=t.pendingProps,Oa(e,t,o,n=t.elementType===o?n:mi(o,n),r);case 1:return o=t.type,n=t.pendingProps,ka(e,t,o,n=t.elementType===o?n:mi(o,n),r);case 3:e:{if(Aa(t),null===e)throw Error(i(387));o=t.pendingProps,n=(s=t.memoizedState).element,Ni(e,t),Ui(t,o,null,r);var a=t.memoizedState;if(o=a.element,s.isDehydrated){if(s={element:o,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Pa(e,t,o,r,n=la(Error(i(423)),t));break e}if(o!==n){t=Pa(e,t,o,r,n=la(Error(i(424)),t));break e}for(ni=ln(t.stateNode.containerInfo.firstChild),oi=t,ii=!0,si=null,r=Xi(t,null,o,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fi(),o===n){t=Ga(e,t,r);break e}Sa(e,t,o,r)}t=t.child}return t;case 5:return ss(t),null===e&&li(t),o=t.type,n=t.pendingProps,s=null!==e?e.memoizedProps:null,a=n.children,rn(o,n)?a=null:null!==s&&rn(o,s)&&(t.flags|=32),Ia(e,t),Sa(e,t,a,r),t.child;case 6:return null===e&&li(t),null;case 13:return Ba(e,t,r);case 4:return ns(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=Ji(t,null,o,r):Sa(e,t,o,r),t.child;case 11:return o=t.type,n=t.pendingProps,Ea(e,t,o,n=t.elementType===o?n:mi(o,n),r);case 7:return Sa(e,t,t.pendingProps,r),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,On(vi,o._currentValue),o._currentValue=a,null!==s)if(so(s.value,a)){if(s.children===n.children&&!An.current){t=Ga(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var u=c.firstContext;null!==u;){if(u.context===o){if(1===s.tag){(u=Di(-1,r&-r)).tag=2;var l=s.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}s.lanes|=r,null!==(u=s.alternate)&&(u.lanes|=r),wi(s.return,r,t),c.lanes|=r;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(i(341));a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),wi(a,r,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Sa(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,o=t.pendingProps.children,Ci(t,r),o=o(n=Ii(n)),t.flags|=1,Sa(e,t,o,r),t.child;case 14:return n=mi(o=t.type,t.pendingProps),Ta(e,t,o,n=mi(o.type,n),r);case 15:return wa(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,n=t.pendingProps,n=t.elementType===o?n:mi(o,n),qa(e,t),t.tag=1,Nn(o)?(e=!0,Bn(t)):e=!1,Ci(t,r),Gi(t,o,n),Fi(t,o,n,r),Ra(null,t,o,!0,e,r);case 19:return Va(e,t,r);case 22:return Ca(e,t,r)}throw Error(i(156,t.tag))};var Yu="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function el(e,t,r,o,n){var i=r._reactRootContainer;if(i){var s=i;if("function"===typeof n){var a=n;n=function(){var e=Zu(s);a.call(e)}}Gu(t,s,e,n)}else s=function(e,t,r,o,n){if(n){if("function"===typeof o){var i=o;o=function(){var e=Zu(s);i.call(e)}}var s=qu(t,o,e,0,null,!1,0,"",$u);return e._reactRootContainer=s,e[_n]=s.current,Vo(8===e.nodeType?e.parentNode:e),lu(),s}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof o){var a=o;o=function(){var e=Zu(c);a.call(e)}}var c=Hu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=c,e[_n]=c.current,Vo(8===e.nodeType?e.parentNode:e),lu((function(){Gu(t,c,r,o)})),c}(r,t,e,n,o);return Zu(s)}Ku.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Gu(e,t,null,null)},Ku.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu((function(){Gu(null,e,null,null)})),t[_n]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nt.length&&0!==t&&t<Nt[r].priority;r++);Nt.splice(r,0,e),0===r&&Bt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(vt(t,1|r),ou(t,Je()),0===(6&kc)&&(Vc=Je()+500,qn()))}break;case 13:lu((function(){var t=Ai(e,1);if(null!==t){var r=eu();ru(t,e,1,r)}})),Wu(e,1)}},Et=function(e){if(13===e.tag){var t=Ai(e,134217728);if(null!==t)ru(t,e,134217728,eu());Wu(e,134217728)}},Tt=function(e){if(13===e.tag){var t=tu(e),r=Ai(e,t);if(null!==r)ru(r,e,t,eu());Wu(e,t)}},wt=function(){return yt},Ct=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},Ee=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var n=En(o);if(!n)throw Error(i(90));W(o),X(o,n)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},ke=uu,Re=lu;var tl={usingClientEntryPoint:!1,Events:[bn,Sn,En,Ie,Oe,uu]},rl={findFiberByHostInstance:yn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ol={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{nt=nl.inject(ol),it=nl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(i(200));return zu(e,t,null,r)},t.createRoot=function(e,t){if(!Ju(e))throw Error(i(299));var r=!1,o="",n=Yu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Hu(e,1,!1,null,0,r,0,o,n),e[_n]=t.current,Vo(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return lu(e)},t.hydrate=function(e,t,r){if(!Xu(t))throw Error(i(200));return el(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Ju(e))throw Error(i(405));var o=null!=r&&r.hydratedSources||null,n=!1,s="",a=Yu;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=qu(t,null,e,1,null!=r?r:null,n,0,s,a),e[_n]=t.current,Vo(e),o)for(e=0;e<o.length;e++)n=(n=(r=o[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Ku(t)},t.render=function(e,t,r){if(!Xu(t))throw Error(i(200));return el(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(i(40));return!!e._reactRootContainer&&(lu((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[_n]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Xu(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,r,!1,o)},t.version="18.2.0-next-9e3b772b8-20220608"},8192:function(e,t,r){"use strict";var o=r(8544);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot},8544:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(9772)},1424:function(e,t){"use strict";var r="function"===typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,_=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,y=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case l:case d:case i:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case u:case h:case g:case _:case c:return e;default:return t}}case n:return t}}}function E(e){return S(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=o,t.ForwardRef=h,t.Fragment=i,t.Lazy=g,t.Memo=_,t.Portal=n,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return E(e)||S(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return S(e)===u},t.isContextProvider=function(e){return S(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return S(e)===h},t.isFragment=function(e){return S(e)===i},t.isLazy=function(e){return S(e)===g},t.isMemo=function(e){return S(e)===_},t.isPortal=function(e){return S(e)===n},t.isProfiler=function(e){return S(e)===a},t.isStrictMode=function(e){return S(e)===s},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===c||e.$$typeof===u||e.$$typeof===h||e.$$typeof===v||e.$$typeof===y||e.$$typeof===b||e.$$typeof===m)},t.typeOf=S},91:function(e,t,r){"use strict";e.exports=r(1424)},6482:function(e,t,r){"use strict";var o=r(9867),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var o,i={},u=null,l=null;for(o in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,o)&&!c.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:n,type:e,key:u,ref:l,props:i,_owner:a.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},3285:function(e,t){"use strict";var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,g={};function m(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function v(){}function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var b=y.prototype=new v;b.constructor=y,_(b,m.prototype),b.isPureReactComponent=!0;var S=Array.isArray,E=Object.prototype.hasOwnProperty,T={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,o){var n,i={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,n)&&!w.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(1===c)i.children=o;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===i[n]&&(i[n]=c[n]);return{$$typeof:r,type:e,key:s,ref:a,props:i,_owner:T.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var O=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,n,i,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case o:c=!0}}if(c)return s=s(c=e),e=""===i?"."+k(c,0):i,S(s)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),R(s,t,n,"",(function(e){return e}))):null!=s&&(I(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),t.push(s)),1;if(c=0,i=""===i?".":i+":",S(e))for(var u=0;u<e.length;u++){var l=i+k(a=e[u],u);c+=R(a,t,n,l,s)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(a=e.next()).done;)c+=R(a=a.value,t,n,l=i+k(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,r){if(null==e)return e;var o=[],n=0;return R(e,o,"","",(function(e){return t.call(r,e,n++)})),o}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},N={transition:null},D={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:N,ReactCurrentOwner:T};t.Children={map:A,forEach:function(e,t,r){A(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=n,t.Profiler=s,t.PureComponent=y,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,o){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=_({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=T.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)E.call(t,u)&&!w.hasOwnProperty(u)&&(n[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)n.children=o;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];n.children=c}return{$$typeof:r,type:e.type,key:i,ref:s,props:n,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,r){return L.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,r){return L.current.useReducer(e,t,r)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return L.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return L.current.useTransition()},t.version="18.2.0"},9867:function(e,t,r){"use strict";e.exports=r(3285)},2834:function(e,t,r){"use strict";e.exports=r(6482)},6073:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var o=r-1>>>1,n=e[o];if(!(0<i(n,t)))break e;e[o]=t,e[r]=n,r=o}}function o(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var o=0,n=e.length,s=n>>>1;o<s;){var a=2*(o+1)-1,c=e[a],u=a+1,l=e[u];if(0>i(c,r))u<n&&0>i(l,c)?(e[o]=l,e[u]=r,o=u):(e[o]=c,e[a]=r,o=a);else{if(!(u<n&&0>i(l,r)))break e;e[o]=l,e[u]=r,o=u}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],l=[],d=1,h=null,p=3,f=!1,_=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=o(l);null!==t;){if(null===t.callback)n(l);else{if(!(t.startTime<=e))break;n(l),t.sortIndex=t.expirationTime,r(u,t)}t=o(l)}}function S(e){if(g=!1,b(e),!_)if(null!==o(u))_=!0,N(E);else{var t=o(l);null!==t&&D(S,t.startTime-e)}}function E(e,r){_=!1,g&&(g=!1,v(I),I=-1),f=!0;var i=p;try{for(b(r),h=o(u);null!==h&&(!(h.expirationTime>r)||e&&!R());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof a?h.callback=a:h===o(u)&&n(u),b(r)}else n(u);h=o(u)}if(null!==h)var c=!0;else{var d=o(l);null!==d&&D(S,d.startTime-r),c=!1}return c}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,w=!1,C=null,I=-1,O=5,k=-1;function R(){return!(t.unstable_now()-k<O)}function A(){if(null!==C){var e=t.unstable_now();k=e;var r=!0;try{r=C(!0,e)}finally{r?T():(w=!1,C=null)}}else w=!1}if("function"===typeof y)T=function(){y(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=A,T=function(){L.postMessage(null)}}else T=function(){m(A,0)};function N(e){C=e,w||(w=!0,T())}function D(e,r){I=m((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){_||f||(_=!0,N(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return o(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,n,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:n,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,r(l,e),null===o(u)&&e===o(l)&&(g?(v(I),I=-1):g=!0,D(S,i-s))):(e.sortIndex=a,r(u,e),_||f||(_=!0,N(E))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},2882:function(e,t,r){"use strict";e.exports=r(6073)},1998:function(module,__unused_webpack_exports,__webpack_require__){var t;"undefined"!=typeof self&&self,t=function(__WEBPACK_EXTERNAL_MODULE__4119__){return function(){var __webpack_modules__={812:function(e){"undefined"!=typeof self&&self,e.exports=function(){return t={24:function(e,t,r){"use strict";function o(e){return e}r.r(t),(r=n=n||{}).LIVE_SEND_SIGNAL="zm.lv.ssg",r.LIVE_RESPOND_JOIN_LIVE="zm.lv.rjl",r.LIVE_PUSH_SIGNAL="zm.lv.pss",r.SERVICE_PUSH="zm.sv.ps",r.SERVICE_SEND="zm.sv.sd";var n,i={event:"/liveroom/send_end_join_live",to_user_id:o,request_id:o},s={event:"/liveroom/send_invite_join_live",to_user_id:o,request_id:o},a={event:"/liveroom/send_join_live_result",to_user_id:o,request_id:o,join_result:function(e){return e}},c={event:"/liveroom/send_request_join_live",to_user_id:o,request_id:o},u={code:1002014,msg:"room not exist"},l={code:1002099,msg:"room inner error"},d=(h.prototype.resetLiveHandler=function(){this.joinLiveCallbackMap={},this.joinLiveRequestMap={}},h.prototype.getSignalCmdContent=function(e,t,r){return e={request_id:e,room_id:this.room.roomID,from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,to_userid:t},null!=r&&(e.result=r),JSON.stringify(e)},h.prototype.requestJoinLive=function(e,t,r,o){var n,i=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(i,e);return null!=o&&(this.stateCenter.reporter.spanSetAttributes({key:c.event,par:null==(n=this.room)?void 0:n.roomID},{request_id:c.request_id(i)}),this.joinLiveCallbackMap[i]=o,this.sendSignalCmd(1001,s,e,t,r),!0)},h.prototype.sendSignalCmd=function(e,t,r,o,i){var s=this;this.room.isLogin()?((this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendSignalCmd({sub_cmd:e,signal_msg:t,dest_id_name:[r]},(function(e){o&&o(e.header.seq)}),(function(e){var t=l;e.header&&e.body?i&&i(s.rtm.getServerError(e.body.err_code),e.header.seq):(e.code&&e.msg&&(t=e),i&&i(t,0))}),this.room),this.logger.info(n.LIVE_SEND_SIGNAL+" call success"+e)):this.logger.error(n.LIVE_SEND_SIGNAL+" state error")},h.prototype.inviteJoinLive=function(e,t,r,o){var n,i=this.stateCenter.getRequestId(),a=this.getSignalCmdContent(i,e);return null!=o&&(this.stateCenter.reporter.spanSetAttributes({key:s.event,par:null==(n=this.room)?void 0:n.roomID},{request_id:s.request_id(i)}),this.joinLiveCallbackMap[i]=o,this.sendSignalCmd(1003,a,e,t,r),!0)},h.prototype.endJoinLive=function(e,t,r){var o,n=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(n,e);return this.stateCenter.reporter.spanSetAttributes({key:i.event,par:null==(o=this.room)?void 0:o.roomID},{request_id:i.request_id(n)}),this.sendSignalCmd(1004,s,e,t,r),!0},h.prototype.respondJoinLive=function(e,t,r,o){var i=this.joinLiveRequestMap[e];if(!i)return this.logger.info(n.LIVE_RESPOND_JOIN_LIVE+" no dest id name"),!1;this.stateCenter.reporter.spanSetAttributes({key:a.event,par:null==(s=this.room)?void 0:s.roomID},{to_user_id:a.to_user_id(i)});var s=0;return t=this.getSignalCmdContent(e,i,s=!0===t?1:s),this.sendSignalCmd(1002,t,i,r,o),delete this.joinLiveRequestMap[e],!0},h.prototype.handlePushSignalMsg=function(e){var t=JSON.parse(e.body.signal_msg);switch(this.logger.info(n.LIVE_PUSH_SIGNAL+" hpsm= ",t),e.body.sub_cmd){case 11001:this.handlePushJoinLiveRequestMsg(t);break;case 11002:this.handlePushJoinLiveResultMsg(t);break;case 11003:this.handlePushJoinLiveInviteMsg(t);break;case 11004:this.handlePushJoinLiveStopMsg(t)}},h.prototype.handlePushJoinLiveRequestMsg=function(e){var t,r=e.request_id;"string"!=typeof r?this.logger.error(n.LIVE_PUSH_SIGNAL+" no requestId"):"string"!=typeof(t=e.from_userid)?this.logger.error(n.LIVE_PUSH_SIGNAL+" no from user"):(this.joinLiveRequestMap[r]=t,this.onRecvJoinLiveRequest(r,e.from_userid,e.from_username,e.room_id),this.logger.info(n.LIVE_PUSH_SIGNAL+" onRecvJoinLiveRequest "+t))},h.prototype.onRecvJoinLiveRequest=function(e,t,r,o){this.stateCenter.actionListener("recvJoinLiveRequest",e,t,r,o)},h.prototype.handlePushJoinLiveInviteMsg=function(e){var t,r=e.request_id;"string"!=typeof r?this.logger.error(n.LIVE_PUSH_SIGNAL+"no requestId"):"string"!=typeof(t=e.from_userid)?this.logger.error(n.LIVE_PUSH_SIGNAL+" no from user"):(this.joinLiveRequestMap[r]=t,this.onRecvInviteJoinLiveRequest(r,e.from_userid,e.from_username,e.room_id),this.logger.info(n.LIVE_PUSH_SIGNAL+" onRecvInviteJoinLiveRequest "+t))},h.prototype.onRecvInviteJoinLiveRequest=function(e,t,r,o){this.stateCenter.actionListener("recvInviteJoinLiveRequest",e,t,r,o)},h.prototype.handlePushJoinLiveResultMsg=function(e){var t,r,o=e.request_id;"string"!=typeof o?this.logger.error(n.LIVE_PUSH_SIGNAL+" no requestId"):null==(t=e.result)?this.logger.info(n.LIVE_PUSH_SIGNAL+" no result"):(t=1==t,this.joinLiveCallbackMap[o]&&((r=this.joinLiveCallbackMap[o])?(this.logger.info(n.LIVE_PUSH_SIGNAL+" joinLiveRequest/invite result "+t),delete this.joinLiveCallbackMap[o],r(t,e.from_userid,e.from_username)):this.logger.info(n.LIVE_PUSH_SIGNAL+" no callback")))},h.prototype.handlePushJoinLiveStopMsg=function(e){var t=e.request_id;"string"!=typeof t?this.logger.error(n.LIVE_PUSH_SIGNAL+" no requestId"):(this.logger.info(n.LIVE_PUSH_SIGNAL+" onRecvEndJoinLiveCommand "+e.from_userid),this.onRecvEndJoinLiveCommand(t,e.from_userid,e.from_username,e.room_id))},h.prototype.onRecvEndJoinLiveCommand=function(e,t,r,o){this.stateCenter.actionListener("recvEndJoinLiveCommand",e,t,r,o)},h);function h(e,t,r,o,n,i){this.logger=e,this.stateCenter=t,this.service=r,this.liveRoomHandler=o,this.rtm=n,this.room=i,this.joinLiveCallbackMap={},this.joinLiveRequestMap={}}var p={requestJoinLive:function(e,t,r,o,n){var i=this,s=this.getMsgSpan(c.event,n||(null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomID),!0),a=this.getRoomModules(n)||this.stateCenter.roomModulesList[0];return a?(s.setAttributes({to_user_id:c.to_user_id(e)}),a.liveHandler.requestJoinLive(e,(function(e){s.end(),t(e)}),(function(e,t){i.stateCenter.reporter.setError(s,e),r(e,t)}),o)):(this.stateCenter.reporter.setError(s,u),r&&r(u,0),!1)},inviteJoinLive:function(e,t,r,o,n){var i=this,a=this.getMsgSpan(s.event,n||(null==(c=this.stateCenter.roomModulesList[0])?void 0:c.roomID),!0),c=this.getRoomModules(n)||this.stateCenter.roomModulesList[0];return c?(a.setAttributes({to_user_id:s.to_user_id(e)}),c.liveHandler.inviteJoinLive(e,(function(e){a.end(),t(e)}),(function(e,t){i.stateCenter.reporter.setError(a,e),r(e,t)}),o)):(this.stateCenter.reporter.setError(a,u),r&&r(u,0),!1)},endJoinLive:function(e,t,r,o){var n=this,s=this.getMsgSpan(i.event,o||(null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomID),!0),a=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return a?(s.setAttributes({to_user_id:i.to_user_id(e)}),a.liveHandler.endJoinLive(e,(function(e){s.end(),t(e)}),(function(e,t){n.stateCenter.reporter.setError(s,e),r(e,t)}))):(this.stateCenter.reporter.setError(s,u),r&&r(u,0),!1)},respondJoinLive:function(e,t,r,o,n){var i=this,s=this.getMsgSpan(a.event,n||(null==(c=this.stateCenter.roomModulesList[0])?void 0:c.roomID),!0),c=this.getRoomModules(n)||this.stateCenter.roomModulesList[0];return c?(s.setAttributes({request_id:a.request_id(e),join_result:a.join_result(t)}),c.liveHandler.respondJoinLive(e,t,(function(e){s.end(),r(e)}),(function(e,t){i.stateCenter.reporter.setError(s,e),o(e,t)}))):(this.stateCenter.reporter.setError(s,u),o&&o(u,0),!1)}},f={handlePushSignalMsg:function(e){var t=null==(r=null==e?void 0:e.header)?void 0:r.room_id,r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t}));r?r.liveHandler.handlePushSignalMsg(e):this.logger.error(n.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}},_={initLiveHandler:function(){this.liveHandler=new d(this.logger,this.stateCenter,this.service,this.liveRoomHandler,this.rtm,this)}};t.default={type:"live",install:function(e,t,r,o){for(var n in p)Object.defineProperty(e.prototype,n,{value:p[n],writable:!1});for(var n in f)Object.defineProperty(r.prototype,n,{value:f[n],writable:!1}),Object.defineProperty(o.prototype,n,{value:f[n],writable:!1});for(var n in _)Object.defineProperty(t.prototype,n,{value:_[n],writable:!1})}}}},r={},e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:o})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var n in t)e.d(o,n,function(e){return t[e]}.bind(null,n));return o},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=24);function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var t,r}()},7368:function(e){"undefined"!=typeof self&&self,e.exports=function(){return t={1:function(e,t,r){var o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function o(e){return!0===(e&&e.__isLong__)}function n(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var i={},s={};function a(e,t){var r,o,n;return t?(n=0<=(e>>>=0)&&e<256)&&(o=s[e])?o:(r=u(e,0,!0),n&&(s[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(o=i[e])?o:(r=u(e,e<0?-1:0,!1),n&&(i[e]=r),r)}function c(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(f<=e)return T}else{if(e<=-_)return w;if(_<=e+1)return E}return e<0?c(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,o){return new r(e,t,o)}r.fromInt=a,r.fromNumber=c,r.fromBits=u;var l=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(r=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:m;if((r=r||10)<2||36<r)throw RangeError("radix");var o;if(0<(o=e.indexOf("-")))throw Error("interior hyphen");if(0===o)return d(e.substring(1),t,r).neg();for(var n=c(l(r,8)),i=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);i=a<8?(a=c(l(r,a)),i.mul(a).add(c(u))):(i=i.mul(n)).add(c(u))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,_=f/2,g=a(1<<24),m=a(0),v=(r.ZERO=m,a(0,!0)),y=(r.UZERO=v,a(1)),b=(r.ONE=y,a(1,!0)),S=(r.UONE=b,a(-1)),E=(r.NEG_ONE=S,u(-1,2147483647,!1)),T=(r.MAX_VALUE=E,u(-1,-1,!0)),w=(r.MAX_UNSIGNED_VALUE=T,u(0,-2147483648,!1)),C=(r.MIN_VALUE=w,r.prototype);return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,r;if(this.isNegative())return this.eq(w)?(r=c(e),r=(t=this.div(r)).mul(r).sub(this),t.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(var o=c(l(e,6),this.unsigned),n=this,i="";;){var s=n.div(o),a=(n.sub(s.mul(o)).toInt()>>>0).toString(e);if((n=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||0<=this.high},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return o(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return 0<this.comp(e)},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return 0<=this.comp(e)},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(o(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(y)},C.neg=C.negate,C.add=function(e){o(e)||(e=h(e));var t=0,r=0,n=0,i=0;return r+=(n=n+((i+=(65535&this.low)+(65535&e.low))>>>16)+((this.low>>>16)+(e.low>>>16)))>>>16,u((n&=65535)<<16|(i&=65535),((t+=(r+=(65535&this.high)+(65535&e.high))>>>16)+((this.high>>>16)+(e.high>>>16))&65535)<<16|(r&=65535),this.unsigned)},C.subtract=function(e){return o(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return this;if(o(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:m;if(this.eq(w))return e.isOdd()?w:m;if(e.eq(w))return this.isOdd()?w:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,d=0,p=0,f=0,_=(_=0)+((p=p+((f+=i*(e=65535&e.low))>>>16)+n*e)>>>16)+((p=(65535&p)+i*l)>>>16);return u((p&=65535)<<16|(f&=65535),((d+=(_+=r*e)>>>16)+((_=(65535&_)+n*l)>>>16)+((_=(65535&_)+i*a)>>>16)+((this.high>>>16)*e+r*l+n*a+i*s)&65535)<<16|(_&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if((e=o(e)?e:h(e)).isZero())throw Error("division by zero");var r,n,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return v;if(e.gt(this.shru(1)))return b;n=v}else{if(this.eq(w))return e.eq(y)||e.eq(S)?w:e.eq(w)?y:(i=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:S:(r=this.sub(e.mul(i)),i.add(r.div(e)));if(e.eq(w))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=m}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:l(2,s-48),d=c(i),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=c(i-=a,this.unsigned)).mul(e);d.isZero()&&(d=y),n=n.add(d),r=r.sub(p)}return n},C.div=C.divide,C.modulo=function(e){return o(e)||(e=h(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?n(this.low):n(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(e){return o(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return o(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return o(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(e){var t;return o(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):u(this.high<<(e-=32)|this.low>>>(t=32-e),this.low<<e|this.high>>>t,this.unsigned)},C.rotl=C.rotateLeft,C.rotateRight=function(e){var t;return o(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):u(this.low<<(t=32-(e-=32))|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,o){return o?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=r,"default"in e?e.default:e}({});void 0!==(t=function(){return o}.apply(t,[]))&&(e.exports=t)},23:function(e,t,r){"use strict";function o(e){return e}function n(e){return e}function i(e){return e}r.r(t),(l=s=s||{}).RTM_SEND_CUSTOM="zm.scc",l.RTM_SEND_BCM="zm.sbcm",l.RTM_SEND_RLM="zm.srlm",l.RTM_SEND_BRM="zm.sbrm",l.RTM_SEND_RAM="zm.sram",l.MESSAGE_SEND_RELIABLE="zm.msg.sdr",l.MESSAGE_FETCH_RELIABLE="zm.msg.frm",l.MESSAGE_RELIABLE_RSP="zm.msg.rlr",l.MESSAGE_RELIABLE_PUSH="zm.msg.rps",l.MESSAGE_SEND_ROOM_MSG="zm.msg.srm",l.MESSAGE_SEND_CUSTOM_MSG="zm.msg.scm",l.MESSAGE_SEND_BIG_MSG="zm.msg.sbm",l.MESSAGE_BIG_MSG_PUSH="zm.msg.bps",l.MESSAGE_SEND_RELAY_MSG="zm.msg.slm",l.SERVICE_PUSH="zm.sv.ps";var s,a,c={INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},NOT_LOGIN:{code:1000002,msg:"not login"},IM_CONTENT_NULL:{code:1009001,msg:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,msg:"message content is too long"},IM_SEND_FAILED:{code:1009010,msg:"failed to send message"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},TRANS_FREQUENTLY:{code:1102022,msg:"trans send frequently"},FREQ_LIMITED:{code:1109001,msg:"frequency limited."}},u={kZMLoginRoom:{event:"/sdk/login"},kZMLiveSendRoomBigIM:{event:"/liveroom/send_big_room_message",room_sid_string:o,error:{INPUT_PARAM:c.INPUT_PARAM,IM_CONTENT_NULL:c.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:c.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMRoomSendCustomCommand:{event:"/liveroom/send_custom_command",room_sid_string:o,request_id:n,error:{INPUT_PARAM:c.INPUT_PARAM,IM_CONTENT_NULL:c.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:c.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMRoomSendRoomMessage:{event:"/liveroom/send_room_message",room_id:n,room_sid_string:n,msg_content_size:i,send_seq:i,msg_id:i,error:{INPUT_PARAM:c.INPUT_PARAM,IM_CONTENT_NULL:c.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:c.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMRoomSendRoomExtraInfo:{event:"/liveroom/set_room_extrainfo",room_id:n,room_sid_string:o,key:n,value:n,error:{INPUT_PARAM:c.INPUT_PARAM,TRANS_FREQUENTLY:c.TRANS_FREQUENTLY,ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMRoomGetRoomExtraInfo:{event:"/liveroom/get_room_extrainfo",fetch_array:o,result_array:o,error:{INPUT_PARAM:c.INPUT_PARAM,TRANS_FREQUENTLY:c.TRANS_FREQUENTLY,ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMRoomRecvRoomExtraInfo:{event:"/liveroom/recv_room_extrainfo",trans_type:n,trans_seq:i,error:{ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMLiveRecvRoomBigIM:{event:"/liveroom/recv_big_room_message",error:{ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMRoomGetRoomMessage:{event:"/liveroom/recv_room_message",error:{ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}},kZMRoomRecvCustomCommand:{event:"/liveroom/recv_custom_command",error:{ROOM_NOT_EXIST:c.ROOM_NOT_EXIST}}},l=((l=a=a||{})[l.I=0]="I",l[l.H=10]="H",l[l.M=100]="M",l[l.L=1e3]="L",r(1)),d=r.n(l),h=(p.prototype.loginRsp=function(e){var t,r=this;if(null!=e.body.ret_timestamp&&"string"==typeof e.body.ret_timestamp&&(t=parseFloat(e.body.ret_timestamp),this.serverTimeOffset=0==t?0:e.body.ret_timestamp-(new Date).getTime()),e.body.bigim_time_window&&"number"==typeof e.body.bigim_time_window&&(this.bigimTimeWindow=e.body.bigim_time_window),e.body.dati_time_window&&"number"==typeof e.body.dati_time_window&&(this.datiTimeWindow=e.body.dati_time_window),e.body.trans_seqs)for(var o=0;o<e.body.trans_seqs.length;o++){var n=e.body.trans_seqs[o].trans_channel,i=e.body.trans_seqs[o].trans_seq_array;0<(i=(i=i.filter((function(e){var t=e.trans_type;return e=e.trans_seq,!r.transSeqMap[t]||r.transSeqMap[t].seq<e}))).map((function(e){return{trans_type:e.trans_type,trans_local_seq:e.trans_seq}}))).length&&this.fetchReliableMessage(n,i)}},p.prototype.sendReliableMessage=function(e,t,r,o){var n=this;this.logger.info(s.MESSAGE_SEND_RELIABLE+" call"),this.room.isLogin()?this.isReliable?(this.logger.error(s.MESSAGE_SEND_RELIABLE+" send too often"),o(u.kZMRoomSendRoomExtraInfo.error.TRANS_FREQUENTLY)):(this.transSeqMap[e]||(this.transSeqMap[e]={seq:0}),t={trans_type:e,trans_data:t,trans_local_seq:this.transSeqMap[e].seq,trans_channel:"clt"},this.isReliable=!0,(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendReliableMessage(t,(function(t){n.transSeqMap[e].seq=t.body.trans_seq,n.logger.info(s.MESSAGE_SEND_RELIABLE+" trans "+e+" seq "+t.body.trans_seq),n.isReliable=!1,r({seq:t.header.seq,errorCode:0})}),(function(e){var t=c.ROOM_INNER_ERROR;e.body&&e.body.err_code?(t=n.rtm.getServerError(e.body.err_code),n.logger.error(s.MESSAGE_SEND_ROOM_MSG+"  "+t.msg)):t=e,n.isReliable=!1,o(t)}),this.room)):(this.logger.error(s.MESSAGE_SEND_RELIABLE+" state error"),o&&o(c.NOT_LOGIN))},p.prototype.fetchReliableMessage=function(e,t){function r(e){o.handleFetchTransRsp(e,n)}var o=this,n=(e={trans_channel:e,fetch_array:t},this.stateCenter.reporter.createSpan(a.H,{key:u.kZMLoginRoom.event,par:this.room.roomID},{key:""},u.kZMRoomGetRoomExtraInfo.event));n.setAttributes({fetch_array:u.kZMRoomGetRoomExtraInfo.fetch_array(t)}),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchReliableMessage(e,r,r,this.room),this.logger.info(s.MESSAGE_FETCH_RELIABLE+" call success")},p.prototype.handleFetchTransRsp=function(e,t){if(e.body&&0!=e.body.err_code)this.logger.error(s.MESSAGE_RELIABLE_RSP+" trans send error "+e.body.err_code),this.stateCenter.tracer.setError(t,{code:e.body.err_code});else if(e.header&&e.body){var r=e.body.trans_fetch_results,o=[],n=[];if(Array.isArray(r)&&0<r.length){for(var i=0;i<r.length;i++){var a,l,d=r[i];1000001109===d.err_code?this.logger.warn(s.MESSAGE_RELIABLE_RSP+" fetch trans unknown type "+d.err_code):(n.push({trans_type:a=d.trans_type,trans_seq:l=d.trans_seq}),1000001110===d.err_code?(this.logger.warn(s.MESSAGE_RELIABLE_RSP+" fetch trans seq is wrong "+d.err_code),this.transSeqMap[a]={seq:l}):!this.transSeqMap[a]||this.transSeqMap[a].seq<l?(this.transSeqMap[a]={seq:l},o.push(d)):this.logger.warn(s.MESSAGE_RELIABLE_RSP+" fetch trans seq wrong"))}0<o.length&&this.onRecvReliableMessage(o)}t.setAttributes({result_array:u.kZMRoomGetRoomExtraInfo.result_array(n)}),t.end()}else this.logger.error(s.MESSAGE_RELIABLE_RSP+" trans send error "+e),this.stateCenter.tracer.setError(t,c.TIMEOUT)},p.prototype.handlePushTransMsg=function(e){var t,r=e.body.trans_type,o=e.body.trans_seq;!this.transSeqMap[r]||this.transSeqMap[r].seq<o?(this.transSeqMap[r]={seq:o},(null==(t=null==e?void 0:e.body)?void 0:t.trans_idname)!==this.stateCenter.idName?this.onRecvReliableMessage([e.body]):this.logger.warn(s.MESSAGE_RELIABLE_PUSH+" id name same")):this.logger.warn(s.MESSAGE_RELIABLE_PUSH+" trans seq wrong"),this.logger.info(s.MESSAGE_RELIABLE_PUSH+" trans "+r+" seq "+o)},p.prototype.sendRoomMsg=function(e,t,r,o,n,i){var a=this;if(!this.room.isLogin())return this.logger.error(s.MESSAGE_SEND_ROOM_MSG+" state error"),i(c.NOT_LOGIN),!1;var l=Date.parse(new Date+"");return 0<this.sendRoomMsgTime&&this.sendRoomMsgTime+this.sendRoomMsgInterval>l?(this.logger.info(s.MESSAGE_SEND_ROOM_MSG+" freq error"),i&&i(c.FREQ_LIMITED,0,e,o),!1):(this.sendRoomMsgTime=l,l=(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendRoomMsg({msg_category:e,msg_type:1,msg_priority:1,msg_content:o},(function(e){n({seq:e.header.seq,errorCode:0,messageID:e.body.msg_id})}),(function(e){var t,r,o=c.ROOM_INNER_ERROR;e.header&&e.body?(r=(t=[a.rtm.getServerError(e.body.err_code),e.body.msg_id])[1],a.logger.error(s.MESSAGE_SEND_ROOM_MSG+"  "+(o=t[0]).msg),i({seq:e.header.seq,errorCode:(o=o==c.TIMEOUT?c.IM_SEND_FAILED:o).code,messageID:r})):(e.code&&e.msg&&(o=e),i({seq:0,errorCode:o.code,messageID:0}))}),this.room),this.stateCenter.reporter.spanSetAttributes({key:u.kZMRoomSendRoomMessage.event,par:null==(e=this.room)?void 0:e.roomID},{send_seq:u.kZMRoomSendRoomMessage.send_seq(l)}),this.logger.info(s.MESSAGE_SEND_ROOM_MSG+"  call success"),!0)},p.prototype.handlePushRoomMsg=function(e){var t,r=[];this.stateCenter.useNetAgent?(t=e.body.msg_data,e.body.msg_data.forEach((function(e){e={fromUser:{userID:e.id_name,userName:e.nick_name},message:e.msg_content,sendTime:e.send_time.toNumber(),messageID:e.msg_id.toNumber()},r.push(e)})),e.body.server_msg_id=e.body.server_msg_id.toNumber(),e.body.ret_msg_id=e.body.ret_msg_id.toNumber()):(t=e.body.chat_data,e.body.chat_data.forEach((function(e){r.push(e={fromUser:{userID:e.id_name,userName:e.nick_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id})}))),this.stateCenter.actionListener("IMRecvBroadcastMessage",this.room.roomID,r),this.stateCenter.actionListener("_recvRoomMsg",t,e.body.server_msg_id,e.body.ret_msg_id)},p.prototype.sendCustomCommand=function(e,t,r,o){var n=this;if(!this.room.isLogin())return this.logger.error(s.MESSAGE_SEND_CUSTOM_MSG+" state error"),o(c.NOT_LOGIN),!1;t={from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,request_id:this.stateCenter.getRequestId(),custom_content:t||"",room_id:this.room.roomID};var i=(this.stateCenter.reporter.spanSetAttributes({key:u.kZMRoomSendCustomCommand.event,par:null==(i=this.room)?void 0:i.roomID},{request_id:u.kZMRoomSendCustomCommand.request_id(t.request_id)}),{dest_id_name:e,custom_msg:JSON.stringify(t)});return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendCustomCommand(i,(function(e){r({seq:e.header.seq,errorCode:0})}),(function(e){var t=n.rtm.getServerError(e.body.err_code);n.logger.error(s.MESSAGE_SEND_CUSTOM_MSG+" "+t.msg),o({seq:e.header.seq,errorCode:(t==c.TIMEOUT?c.IM_SEND_FAILED:t).code})}),this.room),this.logger.info(s.MESSAGE_SEND_CUSTOM_MSG+" call success"),!0},p.prototype.handlePushCustomMsg=function(e){e=[(e=JSON.parse(e.body.custommsg)).from_userid,e.from_username,e.room_id,e.custom_content],this.stateCenter.actionListener("IMRecvCustomCommand",e[2],{userID:e[0],userName:e[1]},e[3])},p.prototype.sendBigRoomMessage=function(e,t,r,o,n,i){var a,u,l,d,h=this;this.room.isLogin()?(a=this.bigimTimeWindow,u=this.serverTimeOffset,l=(new Date).getTime()+u,d=this.rtm.getSeq().toString(),this.bigImCallbackMap[d]={success:n,error:i},0==a?this.sendBigRoomMessageInternal([{msg_category:e,msg_type:1,msg_content:o,bigmsg_client_id:d}],(function(e){h.handleBigImMsgRsp(e)}),(function(e){i&&i(e)})):(n=Math.floor(l/a),this.bigImLastTimeIndex<n&&0==this.bigIMmessageList.length?(this.bigImLastTimeIndex=n,this.sendBigRoomMessageInternal([{msg_category:e,msg_type:1,msg_content:o,bigmsg_client_id:d}],(function(e){h.handleBigImMsgRsp(e)}),(function(e){i&&i(e)}))):(this.bigIMmessageList.push({msg_category:e,msg_type:1,msg_content:o,bigmsg_client_id:d}),1==this.bigIMmessageList.length&&this.setBigImTimer(u,a)))):(this.logger.error(s.MESSAGE_SEND_BIG_MSG+" state error"),i&&i(c.NOT_LOGIN))},p.prototype.sendBigRoomMessageInternal=function(e,t,r){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendBigRoomMessage({msgs:e},(function(e){t(e)}),(function(e){var t=c.ROOM_INNER_ERROR;e.header&&e.body||(e.code&&e.msg&&(t=e),r(t)),r(t)}),this.room),this.logger.info(s.MESSAGE_SEND_BIG_MSG+" sendBigRoomMessage called")},p.prototype.handleBigImMsgRsp=function(e){this.bigimTimeWindow=e.body.bigim_time_window;for(var t=0;t<e.body.msgs.length;t++){var r,o=e.body.msgs[t].bigmsg_client_id;this.bigImCallbackMap[o]&&(null!=(r=this.bigImCallbackMap[o].success)&&r({seq:e.header.seq,errorCode:0,messageID:e.body.msgs[t].bigmsg_id}),delete this.bigImCallbackMap[o])}},p.prototype.setBigImTimer=function(e,t){var r=this;e=t-((new Date).getTime()+e)%t,t=this.rtm.generateRandumNumber(t)+e,this.bigImTimer=setTimeout((function(){r.onBigImTimer()}),t)},p.prototype.onBigImTimer=function(){for(var e=this,t=(new Date).getTime()+this.serverTimeOffset,r=(this.bigImLastTimeIndex=Math.floor(t/this.bigimTimeWindow),[]),o=[],n=0;n<this.bigIMmessageList.length&&!(20<=n);n++){var i=this.bigIMmessageList[n];r.push({msg_category:i.msg_category,msg_type:i.msg_type,msg_content:i.msg_content,bigmsg_client_id:i.bigmsg_client_id}),o.push(i.bigmsg_client_id)}20<this.bigIMmessageList.length?this.bigIMmessageList.splice(0,20):this.bigIMmessageList=[],this.sendBigRoomMessageInternal(r,(function(t){e.handleBigImMsgRsp(t)}),(function(t,r){for(var n=0;n<o.length;n++){var i=o[n],s=e.bigImCallbackMap[i];s&&(null!=s.error&&s.error(t,r),delete e.bigImCallbackMap[i])}})),this.bigImTimer&&clearTimeout(this.bigImTimer),this.bigImTimer=null,0<this.bigIMmessageList.length&&this.setBigImTimer(this.serverTimeOffset,this.bigimTimeWindow)},p.prototype.handlePushMergeMsg=function(e){for(var t=0;t<e.body.messages.length;t++)14001!==e.body.messages[t].sub_cmd&&"/lr/push/bigim_chat"!==e.body.messages[t].sub_cmd||this.handlePushBigRooMsg(e.body.messages[t].msg_body)},p.prototype.handlePushBigRooMsg=function(e){var t;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){return void this.logger.warn(s.MESSAGE_BIG_MSG_PUSH+"parse json error")}else t=e;if(t){e=t.room_id;for(var r=[],o=0;o<t.msg_data.length;o++){var n=t.msg_data[o];n.id_name==this.stateCenter.idName?this.logger.info(s.MESSAGE_BIG_MSG_PUSH+" self message"):r.push({idName:n.id_name,nickName:n.nick_name,messageId:n.bigmsg_id,category:n.msg_category,type:n.msg_type,content:n.msg_content,time:n.send_time||d.a.isLong(n.msg_timestamp)&&n.msg_timestamp.toNumber()})}0==r.length?this.logger.info(s.MESSAGE_BIG_MSG_PUSH+" no other pushData except self"):this.onRecvBigRoomMessage(r,e),this.logger.info(s.MESSAGE_BIG_MSG_PUSH+"call success")}else this.logger.warn(s.MESSAGE_BIG_MSG_PUSH+" cann't find message body")},p.prototype.onRecvBigRoomMessage=function(e,t){var r=[];e.forEach((function(e){r.push(e={fromUser:{userID:e.idName,userName:e.nickName},message:e.content,sendTime:e.time,messageID:e.messageId})})),this.stateCenter.actionListener("IMRecvBarrageMessage",t,r),this.stateCenter.actionListener("_recvBigRoomMessage",e,t)},p.prototype.resetMessageInfo=function(){this.transSeqMap={},this.realyMessageList=[],this.relayTimer&&(clearTimeout(this.relayTimer),this.relayTimer=null),this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImCallbackMap={},this.bigImTimer&&(clearTimeout(this.bigImTimer),this.bigImTimer=null),this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0},p.prototype.sendRelayMessage=function(e,t,r,o){var n=this.datiTimeWindow,i=this.serverTimeOffset;0<n?(this.realyMessageList.push({type:e,data:t,success:r,error:o}),1==this.realyMessageList.length&&this.setRelayTimer(i,n)):this.sendRelayMessageInternal(e,t,r,o)},p.prototype.sendRelayMessageInternal=function(e,t,r,o){var n=this;this.logger.info(s.MESSAGE_SEND_RELAY_MSG+" call"),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendRelayMessage(e={relay_type:e,relay_data:t},(function(e){r&&r(e.header.seq,e.body.relay_result)}),(function(e){var t=c.ROOM_INNER_ERROR;e.header&&e.body?o&&o(n.rtm.getServerError(e.body.err_code),e.header.seq):(e.code&&e.msg&&(t=e),o&&o(t,0))}),t=this.room)},p.prototype.setRelayTimer=function(e,t){var r=this;e=(new Date).getTime()+e,e=this.rtm.generateRandumNumber(2*t-e%t),this.logger.info(s.MESSAGE_SEND_RELAY_MSG+" setTimer "+e),this.relayTimer=setTimeout((function(){r.onRelayTimer()}),e)},p.prototype.onRelayTimer=function(){var e;0==this.realyMessageList.length?this.logger.info(s.MESSAGE_SEND_RELAY_MSG+"  no relay data"):(this.sendRelayMessageInternal((e=this.realyMessageList[0]).type,e.data,e.success,e.error),this.relayTimer&&clearTimeout(this.relayTimer),this.relayTimer=null,this.realyMessageList.splice(0,1),0<this.realyMessageList.length&&this.setRelayTimer(this.serverTimeOffset,this.datiTimeWindow))},p);function p(e,t,r,o,n,i,s){var a=this;this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=o,this.liveRoomHandler=n,this.rtm=i,this.room=s,this.sendRoomMsgTime=0,this.sendRoomMsgInterval=500,this.bigImCallbackMap={},this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImTimer=null,this.relayTimer=null,this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0,this.isReliable=!1,this.transSeqMap={},this.onRecvReliableMessage=function(e){var t=e.map((function(e){return{key:e.trans_type,value:e.trans_data,updateUser:{userID:e.trans_idname,userName:e.trans_nickname},updateTime:d.a.isLong(e.trans_send_time)?e.trans_send_time.toNumber():e.trans_send_time}}));0<t.length&&a.stateCenter.actionListener("roomExtraInfoUpdate",a.room.roomID,t),e.forEach((function(e){a.stateCenter.actionListener("recvReliableMessage",e.trans_type,e.trans_seq,e.trans_data)}))},this.realyMessageList=[]}function f(e,t,r,o){var n=this;return void 0===r&&(r=1),void 0===o&&(o=1),new Promise((function(i,a){var c,l=n.getMsgSpan(u.kZMRoomSendRoomMessage.event,e,!0),d=(a=n.stateCenter.proxyRes(l,(function(e){l.setAttributes({msg_id:u.kZMRoomSendRoomMessage.msg_id(e.messageID)}),i(e)}),a)).interResolve;a=a.interReject,"string"!=typeof e||""==e?(n.logger.error(s.RTM_SEND_BCM+" roomid must be string and not empty"),a(u.kZMRoomSendRoomMessage.error.INPUT_PARAM," param roomID error")):void 0===t||""==t?(n.logger.error(s.RTM_SEND_BCM+" message is empty"),a(u.kZMRoomSendRoomMessage.error.IM_CONTENT_NULL)):"string"!=typeof t?(n.logger.error(s.RTM_SEND_BCM+" message must be string"),a(u.kZMRoomSendRoomMessage.error.INPUT_PARAM," param message error")):1024<t.length?(n.logger.error(s.RTM_SEND_BCM+" message too long"),a(u.kZMRoomSendRoomMessage.error.IM_CONTENT_TOO_LONG)):(c=n.getRoomModules(e),l.setAttributes({send_seq:u.kZMRoomSendRoomMessage.send_seq(),msg_content:t}),c?c.messageHandler.sendRoomMsg(r,o,e,t,(function(e){e.messageID&&l.setAttributes({msg_id:e.messageID}),d(e)}),a):a(u.kZMRoomSendRoomMessage.error.ROOM_NOT_EXIST))}))}function _(e,t,r){var o=this;return new Promise((function(n,i){var a,l,d=o.getMsgSpan(u.kZMRoomSendCustomCommand.event,e,!0);i=(n=o.stateCenter.proxyRes(d,n,i)).interResolve,n=n.interReject,"string"!=typeof e||""==e?(o.logger.error(s.RTM_SEND_CUSTOM+" roomid must be string and not empty"),n(c.INPUT_PARAM," param roomID error")):r instanceof Array&&!r.find((function(e){return"string"!=typeof e}))?"string"!=typeof t&&"object"!=typeof t?(o.logger.error(s.RTM_SEND_CUSTOM+" custom content must be a non empty string or object"),n(u.kZMRoomSendCustomCommand.error.INPUT_PARAM," param command error")):"string"==typeof t&&1024<t.length?(o.logger.error(s.RTM_SEND_CUSTOM+" command too long"),n(u.kZMRoomSendCustomCommand.error.IM_CONTENT_TOO_LONG)):(a=o.getRoomModules(e),l="string"==typeof t?t:JSON.stringify(t),d.setAttributes({msg_content:l}),a?a.messageHandler.sendCustomCommand(r,t,i,n):n(u.kZMRoomSendCustomCommand.error.ROOM_NOT_EXIST)):(o.logger.error(s.RTM_SEND_CUSTOM+" dstMembers must be string array"),n(u.kZMRoomSendCustomCommand.error.INPUT_PARAM," param toUserList error"))}))}function g(e,t,r,o){var n=this;return void 0===r&&(r=1),void 0===o&&(o=1),new Promise((function(i,a){var c=n.getMsgSpan(u.kZMLiveSendRoomBigIM.event,e);a=(i=n.stateCenter.proxyRes(c,i,a)).interResolve,i=i.interReject,"string"!=typeof e||""==e?(n.logger.error(s.RTM_SEND_BRM+"roomid must be string and not empty"),i(u.kZMLiveSendRoomBigIM.error.INPUT_PARAM," param roomID error")):void 0===t||""==t?(n.logger.error(s.RTM_SEND_BRM+" message is empty"),i(u.kZMLiveSendRoomBigIM.error.IM_CONTENT_NULL)):"string"!=typeof t?(n.logger.error(s.RTM_SEND_BRM+" message must be string"),i(u.kZMLiveSendRoomBigIM.error.INPUT_PARAM," param message error")):1024<t.length?(n.logger.error(s.RTM_SEND_BRM+" message too long"),i(u.kZMLiveSendRoomBigIM.error.IM_CONTENT_TOO_LONG)):(c.setAttributes({msg_content:t}),(c=n.getRoomModules(e))?c.messageHandler.sendBigRoomMessage(r,o,e,t,a,i):i(u.kZMLiveSendRoomBigIM.error.ROOM_NOT_EXIST))}))}function m(e,t,r){var o=this;return new Promise((function(n,i){var a=o.getMsgSpan(u.kZMRoomSendRoomExtraInfo.event,e);i=(n=o.stateCenter.proxyRes(a,n,i)).interResolve,n=n.interReject,"string"!=typeof e||""==e?(o.logger.error(s.RTM_SEND_BCM+" roomid must be string and not empty"),n(u.kZMRoomSendRoomMessage.error.INPUT_PARAM," param roomID error")):t&&"string"==typeof t?128<t.length?(o.logger.error(s.RTM_SEND_RLM+" type is too long"),n({errorCode:u.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):r&&"string"==typeof r?4096<r.length?(o.logger.error(s.RTM_SEND_RLM+" type is too long"),n({errorCode:u.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):(a.setAttributes({key:u.kZMRoomSendRoomExtraInfo.key(t),value:u.kZMRoomSendRoomExtraInfo.value(r)}),(a=o.getRoomModules(e))?a.messageHandler.sendReliableMessage(t,r,i,n):n(u.kZMRoomSendRoomExtraInfo.error.ROOM_NOT_EXIST)):(o.logger.error(s.RTM_SEND_RLM+" data must be string"),n({errorCode:u.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):(o.logger.error(s.RTM_SEND_RLM+" type must be string"),n({errorCode:u.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code}))}))}var v={_sendBroadcastMessage:f,sendBroadcastMessage:function(e,t){var r=this;return new Promise((function(o,n){f.call(r,e,t).then((function(e){o({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){n(e)}))}))},_sendCustomCommand:_,sendCustomCommand:function(e,t,r){var o=this;return new Promise((function(n,i){_.call(o,e,t,r).then((function(e){n({errorCode:e.errorCode,extendedData:e.extendedData})})).catch((function(e){i(e)}))}))},_sendBarrageMessage:g,sendBarrageMessage:function(e,t){var r=this;return new Promise((function(o,n){g.call(r,e,t).then((function(e){o({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){n(e)}))}))},_setRoomExtraInfo:m,setRoomExtraInfo:function(e,t,r){return m.call(this,e,t,r)},sendRelayMessage:function(e,t,r,o,n){(n=this.getRoomModules(n)||this.stateCenter.roomModulesList[0])?n.messageHandler.sendRelayMessage(e,t,r,o):o&&o(c.ROOM_NOT_EXIST,0)}},y={handlePushRoomMsg:function(e){var t=this.handlePushMsg(e);t[0].messageHandler.handlePushRoomMsg(e=t[1])},handlePushCustomMsg:function(e){var t=this.handlePushMsg(e);t[0].messageHandler.handlePushCustomMsg(e=t[1])},handlePushMergeMsg:function(e){var t=null==(t=null==e?void 0:e.header)?void 0:t.room_id;(t=this.rtm.getRoomModules(t))?t.messageHandler.handlePushMergeMsg(e):this.logger.error(s.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))},handlePushTransMsg:function(e){var t,r=(o=this.handlePushMsg(e))[0],o=null==(o=null==(e=o[1])?void 0:e.header)?void 0:o.room_id;(o=this.rtm.getMsgSpan(u.kZMRoomRecvRoomExtraInfo.event,o)).setAttributes({trans_type:u.kZMRoomRecvRoomExtraInfo.trans_type(null==(t=null==e?void 0:e.body)?void 0:t.trans_type),trans_seq:u.kZMRoomRecvRoomExtraInfo.trans_seq(null==(t=null==e?void 0:e.body)?void 0:t.trans_seq)}),o.end(),r.messageHandler.handlePushTransMsg(e)},handleBigImMsgRsp:function(e){var t=null==(t=null==e?void 0:e.header)?void 0:t.room_id;(t=this.rtm.getRoomModules(t))?t.messageHandler.handleBigImMsgRsp(e):this.logger.error(s.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))},handlePushMsg:function(e){var t=null==(t=null==e?void 0:e.header)?void 0:t.room_id;if(t=this.rtm.getRoomModules(t))return[t,e];this.logger.error(s.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}},b={initMessageHandler:function(){this.messageHandler=new h(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this.rtm,this)}};t.default={type:"message",install:function(e,t,r,o){for(var n in v)Object.defineProperty(e.prototype,n,{value:v[n],writable:!1});for(var n in y)Object.defineProperty(r.prototype,n,{value:y[n],writable:!1}),Object.defineProperty(o.prototype,n,{value:y[n],writable:!1});for(var n in b)Object.defineProperty(t.prototype,n,{value:b[n],writable:!1})}}}},r={},e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:o})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var n in t)e.d(o,n,function(e){return t[e]}.bind(null,n));return o},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=23);function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var t,r}()},4537:function(e){"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),o=0,n=2,i=!0;n<arguments.length;)r[o++]=arguments[n++];return new Promise((function(n,s){r[o]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},7419:function(e,t){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),n=new Array(123),i=0;i<64;)n[o[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var n,i=null,s=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:s[a++]=o[u>>2],n=(3&u)<<4,c=1;break;case 1:s[a++]=o[n|u>>4],n=(15&u)<<2,c=2;break;case 2:s[a++]=o[n|u>>6],s[a++]=o[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=o[n],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var o,i=r,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(s);switch(a){case 0:o=u,a=1;break;case 1:t[r++]=o<<2|(48&u)>>4,o=u,a=2;break;case 2:t[r++]=(15&o)<<4|(60&u)>>2,o=u,a=3;break;case 3:t[r++]=(3&o)<<6|u,a=0}}if(1===a)throw Error(s);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),o=128===r[3];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3]}function i(e,o,n){t[0]=e,o[n]=r[3],o[n+1]=r[2],o[n+2]=r[1],o[n+3]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],t[0]}function a(e,o){return r[3]=e[o],r[2]=e[o+1],r[1]=e[o+2],r[0]=e[o+3],t[0]}e.writeFloatLE=o?n:i,e.writeFloatBE=o?i:n,e.readFloatLE=o?s:a,e.readFloatBE=o?a:s}():function(){function t(e,t,r,o){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,o);else if(isNaN(t))e(2143289344,r,o);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,o);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,o);else{var i=Math.floor(Math.log(t)/Math.LN2);e((n<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,o)}}function s(e,t,r){var o=e(t,r),n=2*(o>>31)+1,i=o>>>23&255,s=8388607&o;return 255===i?s?NaN:n*(1/0):0===i?1401298464324817e-60*n*s:n*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,o),e.readFloatLE=s.bind(null,n),e.readFloatBE=s.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),o=128===r[7];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3],o[n+4]=r[4],o[n+5]=r[5],o[n+6]=r[6],o[n+7]=r[7]}function i(e,o,n){t[0]=e,o[n]=r[7],o[n+1]=r[6],o[n+2]=r[5],o[n+3]=r[4],o[n+4]=r[3],o[n+5]=r[2],o[n+6]=r[1],o[n+7]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],r[4]=e[o+4],r[5]=e[o+5],r[6]=e[o+6],r[7]=e[o+7],t[0]}function a(e,o){return r[7]=e[o],r[6]=e[o+1],r[5]=e[o+2],r[4]=e[o+3],r[3]=e[o+4],r[2]=e[o+5],r[1]=e[o+6],r[0]=e[o+7],t[0]}e.writeDoubleLE=o?n:i,e.writeDoubleBE=o?i:n,e.readDoubleLE=o?s:a,e.readDoubleBE=o?a:s}():function(){function t(e,t,r,o,n,i){var s=o<0?1:0;if(s&&(o=-o),0===o)e(0,n,i+t),e(1/o>0?0:2147483648,n,i+r);else if(isNaN(o))e(0,n,i+t),e(2146959360,n,i+r);else if(o>17976931348623157e292)e(0,n,i+t),e((s<<31|2146435072)>>>0,n,i+r);else{var a;if(o<22250738585072014e-324)e((a=o/5e-324)>>>0,n,i+t),e((s<<31|a/4294967296)>>>0,n,i+r);else{var c=Math.floor(Math.log(o)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=o*Math.pow(2,-c))>>>0,n,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,n,i+r)}}}function s(e,t,r,o,n){var i=e(o,n+t),s=e(o,n+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=s.bind(null,n,0,4),e.readDoubleBE=s.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function o(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function _(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:function(e){"use strict";e.exports=function(e,t,r){var o=r||8192,n=o>>>1,i=null,s=o;return function(r){if(r<1||r>n)return e(r);s+r>o&&(i=e(o),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},4997:function(e,t){"use strict";var r=t;r.length=function(e){for(var t=0,r=0,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,i=[],s=0;t<r;)(o=e[t++])<128?i[s++]=o:o>191&&o<224?i[s++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(o>>10),i[s++]=56320+(1023&o)):i[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,i.slice(0,s))),n.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(e,t,r){for(var o,n,i=r,s=0;s<e.length;++s)(o=e.charCodeAt(s))<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&56320==(64512&(n=e.charCodeAt(s+1)))?(++s,t[r++]=(o=65536+((1023&o)<<10)+(1023&n))>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128);return r-i}},3720:function(e){e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function o(e){return!0===(e&&e.__isLong__)}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var n={},i={};function s(e,t){var r,o,s;return t?(s=0<=(e>>>=0)&&e<256)&&(o=i[e])?o:(r=c(e,(0|e)<0?-1:0,!0),s&&(i[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(o=n[e])?o:(r=c(e,e<0?-1:0,!1),s&&(n[e]=r),r)}function a(e,t){if(isNaN(e))return t?m:g;if(t){if(e<0)return m;if(e>=p)return E}else{if(e<=-f)return T;if(e+1>=f)return S}return e<0?a(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,o){return new r(e,t,o)}r.fromInt=s,r.fromNumber=a,r.fromBits=c;var u=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return l(e.substring(1),t,r).neg();for(var n=a(u(r,8)),i=g,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+c),r);if(c<8){var h=a(u(r,c));i=i.mul(h).add(a(d))}else i=(i=i.mul(n)).add(a(d))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=d;var h=4294967296,p=h*h,f=p/2,_=s(1<<24),g=s(0);r.ZERO=g;var m=s(0,!0);r.UZERO=m;var v=s(1);r.ONE=v;var y=s(1,!0);r.UONE=y;var b=s(-1);r.NEG_ONE=b;var S=c(-1,2147483647,!1);r.MAX_VALUE=S;var E=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=E;var T=c(0,-2147483648,!1);r.MIN_VALUE=T;var w=r.prototype;w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},w.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var t=a(e),r=this.div(t),o=r.mul(t).sub(this);return r.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=a(u(e,6),this.unsigned),i=this,s="";;){var c=i.div(n),l=(i.sub(c.mul(n)).toInt()>>>0).toString(e);if((i=c).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},w.isZero=function(){return 0===this.high&&0===this.low},w.eqz=w.isZero,w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||this.high>=0},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(e){return o(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},w.eq=w.equals,w.notEquals=function(e){return!this.eq(e)},w.neq=w.notEquals,w.ne=w.notEquals,w.lessThan=function(e){return this.comp(e)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(e){return this.comp(e)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.greaterThan=function(e){return this.comp(e)>0},w.gt=w.greaterThan,w.greaterThanOrEqual=function(e){return this.comp(e)>=0},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqual,w.compare=function(e){if(o(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(v)},w.neg=w.negate,w.add=function(e){o(e)||(e=d(e));var t=0,r=0,n=0,i=0;return n+=(i+=(65535&this.low)+(65535&e.low))>>>16,r+=(n+=(this.low>>>16)+(e.low>>>16))>>>16,t+=(r+=(65535&this.high)+(65535&e.high))>>>16,t+=(this.high>>>16)+(e.high>>>16),c((n&=65535)<<16|(i&=65535),(t&=65535)<<16|(r&=65535),this.unsigned)},w.subtract=function(e){return o(e)||(e=d(e)),this.add(e.neg())},w.sub=w.subtract,w.multiply=function(e){if(this.isZero())return g;if(o(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(T))return e.isOdd()?T:g;if(e.eq(T))return this.isOdd()?T:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(_)&&e.lt(_))return a(this.toNumber()*e.toNumber(),this.unsigned);var r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=65535&e.high,u=e.low>>>16,l=65535&e.low,h=0,p=0,f=0,m=0;return f+=(m+=i*l)>>>16,p+=(f+=n*l)>>>16,f&=65535,p+=(f+=i*u)>>>16,h+=(p+=r*l)>>>16,p&=65535,h+=(p+=n*u)>>>16,p&=65535,h+=(p+=i*s)>>>16,h+=(this.high>>>16)*l+r*u+n*s+i*(e.high>>>16),c((f&=65535)<<16|(m&=65535),(h&=65535)<<16|(p&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(e){if(o(e)||(e=d(e)),e.isZero())throw Error("division by zero");var r,n,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return y;i=m}else{if(this.eq(T))return e.eq(v)||e.eq(b)?T:e.eq(T)?v:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:b:(n=this.sub(e.mul(r)),i=r.add(n.div(e)));if(e.eq(T))return this.unsigned?m:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),l=s<=48?1:u(2,s-48),h=a(r),p=h.mul(e);p.isNegative()||p.gt(n);)p=(h=a(r-=l,this.unsigned)).mul(e);h.isZero()&&(h=v),i=i.add(h),n=n.sub(p)}return i},w.div=w.divide,w.modulo=function(e){return o(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},w.mod=w.modulo,w.rem=w.modulo,w.not=function(){return c(~this.low,~this.high,this.unsigned)},w.and=function(e){return o(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},w.or=function(e){return o(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},w.xor=function(e){return o(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},w.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},w.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},w.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,o){return o?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},2100:function(e,t,r){"use strict";e.exports=r(9482)},9482:function(e,t,r){"use strict";var o=t;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=r(1173),o.BufferWriter=r(3155),o.Reader=r(1408),o.BufferReader=r(593),o.util=r(9693),o.rpc=r(5994),o.roots=r(5054),o.configure=n,n()},1408:function(e,t,r){"use strict";e.exports=c;var o,n=r(9693),i=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){o=e,c.create=d(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:function(e,t,r){"use strict";e.exports=i;var o=r(1408);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(9693);function i(e){o.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},5054:function(e){"use strict";e.exports={}},5994:function(e,t,r){"use strict";t.Service=r(7948)},7948:function(e,t,r){"use strict";e.exports=n;var o=r(9693);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return o.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(e,t,r){"use strict";e.exports=n;var o=r(9693);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===s?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9693:function(e,t,r){"use strict";var o=t;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)void 0!==e[o[n]]&&r||(e[o[n]]=t[o[n]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(4537),o.base64=r(7419),o.EventEmitter=r(9211),o.float=r(945),o.inquire=r(7199),o.utf8=r(4997),o.pool=r(6662),o.LongBits=r(1945),o.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),o.global=o.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&null!=this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}},1173:function(e,t,r){"use strict";e.exports=d;var o,n=r(9693),i=n.LongBits,s=n.base64,a=n.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(d.create=function(){return new o})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function _(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},(f.prototype=Object.create(c.prototype)).fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(_,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.int64=d.prototype.uint64=function(e){var t=i.from(e);return this._push(_,t.length(),t)},d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(_,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.sfixed32=d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed64=d.prototype.fixed64=function(e){var t=i.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var m=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){o=e,d.create=h(),o._configure()}},3155:function(e,t,r){"use strict";e.exports=i;var o=r(1173);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(9693);function i(){o.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},4095:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoAudioEffectPlayer=void 0;var o=function(){function e(e,t){this.zegoWebRTC=e,this.stream=t}return e.prototype.start=function(e,t,o,n){this.zegoWebRTC.playEffect(r({stream:this.stream,effectID:e},t||{}),o,n)},e.prototype.stop=function(e){return this.zegoWebRTC.stopEffect(this.stream,e)},e.prototype.pause=function(e){return this.zegoWebRTC.pauseEffect(this.stream,e)},e.prototype.resume=function(e){return this.zegoWebRTC.resumeEffect(this.stream,e)},e.prototype.setVolume=function(e,t){return this.zegoWebRTC.setEffectVolume(this.stream,t,e)},e.prototype.getTotalDuration=function(e){return this.zegoWebRTC.getEffectDuration(e)},e.prototype.getCurrentProgress=function(e){return this.zegoWebRTC.getEffectCurrentProgress(this.stream,e)},e.prototype.seekTo=function(e,t){return this.zegoWebRTC.seekAudioEffect(this.stream,e,t)},e}();t.ZegoAudioEffectPlayer=o},8835:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRealTimeSequentialDataManager=void 0;var o=r(3504),n=function(){function e(e,t){this.dataChannelManager=new o.DataChannelListener(e,t)}return e.prototype.startBroadcasting=function(e){return this.dataChannelManager.startBroadcasting(e)},e.prototype.stopBroadcasting=function(e){return this.dataChannelManager.stopBroadcasting(e)},e.prototype.sendRealTimeSequentialData=function(e,t){return this.dataChannelManager.sendRealTimeSequentialData(e,t)},e.prototype.startSubscribing=function(e){return this.dataChannelManager.startSubscribing(e)},e.prototype.stopSubscribing=function(e){return this.dataChannelManager.stopSubscribing(e)},e.prototype.on=function(e,t){this.dataChannelManager.on(e,t)},e.prototype.off=function(e,t){this.dataChannelManager.off(e,t)},e}();t.ZegoRealTimeSequentialDataManager=n},1297:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSEIType=t.ZegoRangeAudioMode=t.ZegoRangeAudioMicrophoneState=t.ZegoMixStreamRenderMode=t.ZegoLowlightEnhancementMode=void 0,function(e){e[e.Off=0]="Off",e[e.On=1]="On"}(t.ZegoLowlightEnhancementMode||(t.ZegoLowlightEnhancementMode={})),function(e){e[e.AspectFill=0]="AspectFill",e[e.AspectFit=1]="AspectFit"}(t.ZegoMixStreamRenderMode||(t.ZegoMixStreamRenderMode={})),function(e){e[e.Off=0]="Off",e[e.TurningOn=1]="TurningOn",e[e.On=2]="On"}(t.ZegoRangeAudioMicrophoneState||(t.ZegoRangeAudioMicrophoneState={})),function(e){e[e.World=0]="World",e[e.Team=1]="Team"}(t.ZegoRangeAudioMode||(t.ZegoRangeAudioMode={})),function(e){e[e.ZegoDefined=0]="ZegoDefined",e[e.UserUnregister=1]="UserUnregister"}(t.ZegoSEIType||(t.ZegoSEIType={}))},3116:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressRangeAudio=void 0;var s=i(r(2760)),a=function(){function e(e,t){this.zegoAudioListener=s.default.getInstance(e,t)}return e.getInstance=function(t,r){if(!e.instance){if(!t)throw Error("create instance failed.");e.instance=new e(t,r)}return e.instance},e.prototype.on=function(e,t){return this.zegoAudioListener.on(e,t)},e.prototype.off=function(e,t){return this.zegoAudioListener.off(e,t)},e.prototype.setAudioReceiveRange=function(e){this.zegoAudioListener.setAudioReceiveRange(e)},e.prototype.updateSelfPosition=function(e,t,r,o){this.zegoAudioListener.updateSelfPosition(e,t,r,o)},e.prototype.updateAudioSource=function(e,t){this.zegoAudioListener.updateAudioSource(e,t)},e.prototype.enableSpatializer=function(e){return this.zegoAudioListener.enableSpatializer(e)},e.prototype.enableAiDenoise=function(e){return this.zegoAudioListener.enableAiDenoise(e)},e.prototype.enableMicrophone=function(e){return this.zegoAudioListener.enableMicrophone(e)},e.prototype.selectMicrophone=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.zegoAudioListener.selectMic(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.selectSpeaker=function(e){return this.zegoAudioListener.selectSpeaker(e)},e.prototype.enableSpeaker=function(e){return this.zegoAudioListener.enableSpeaker(e)},e.prototype.setRangeAudioMode=function(e){this.zegoAudioListener.setRangeAudioMode(e)},e.prototype.setTeamID=function(e){this.zegoAudioListener.setRangeAudioTeamID(e)},e.prototype.setPositionUpdateFrequency=function(e){return this.zegoAudioListener.setPositionUpdateFrequency(e)},e.prototype.setRangeAudioVolume=function(e){return this.zegoAudioListener.setAudioVolume(e)},e.prototype.isAudioContextRunning=function(){return"running"===this.zegoAudioListener.getAudioContextState()},e.prototype.resumeAudioContext=function(){return this.zegoAudioListener.resumeAudioContext()},e.prototype.setStreamVocalRange=function(e,t){this.zegoAudioListener.setStreamVocalRange(e,t)},e.prototype.updateStreamPosition=function(e,t){this.zegoAudioListener.updateStreamPosition(e,t)},e.prototype.setCustomSourceVocalRange=function(e,t){this.zegoAudioListener.setStreamVocalRange(e,t)},e.prototype.updateCustomSourcePosition=function(e,t){this.zegoAudioListener.updateStreamPosition(e,t)},e}();t.ZegoExpressRangeAudio=a},5028:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamView=void 0;var r=function(){function e(e){this.v=e}return e.prototype.takeStreamSnapshot=function(e){return this.v.takeStreamSnapshot(e)},e.prototype.play=function(e,t){return this.v.play(e,t)},e.prototype.stop=function(){return this.v.stop()},e.prototype.resume=function(){this.v.resume()},e.prototype.setAudioMuted=function(e){return this.v.setAudioMuted(e)},e.prototype.setVideoMuted=function(e){return this.v.setVideoMuted(e)},e.prototype.useAudioOutputDevice=function(e){return this.v.useAudioOut(e)},e.prototype.setVolume=function(e){return this.v.setVolume(e)},e.prototype.on=function(e,t){return this.v.on(e,t)},e.prototype.off=function(e,t){return this.v.off(e,t)},e}();t.ZegoStreamView=r},4780:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressEngine=t.WebRTCUtil=void 0;var s=r(9880),a=i(r(7368)),c=i(r(812)),u=i(r(3824)),l=i(r(6012)),d=i(r(7526)),h=i(r(577)),p=r(2777),f=r(4897),_=r(957);s.ZegoExpressEngine.use(a.default),s.ZegoExpressEngine.use(c.default),s.ZegoExpressEngine.use(u.default),s.ZegoExpressEngine.use(l.default),s.ZegoExpressEngine.use(d.default),s.ZegoExpressEngine.use(h.default),s.ZegoExpressEngine.use(p.RangeAudio),s.ZegoExpressEngine.use(f.DataChannel),s.ZegoExpressEngine.use(_.BeautyEffect);var g=r(9880);Object.defineProperty(t,"WebRTCUtil",{enumerable:!0,get:function(){return g.WebRTCUtil}});var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.ZegoExpressEngine);t.ZegoExpressEngine=m},9880:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCUtil=t.ZegoExpressEngine=void 0;var i=r(4119),s=r(5321),a=r(4095),c=function(e){function t(t,r,o){var n=this;return i.ZegoExpressWebRTMEngine.version="2.21.0",(n=e.call(this,t,r,0,arguments[2])||this).zegoWebRTC=new s.ZegoWebRTC(n.logger,n.dataReport,n.reporter,n.zegoWebRTM,0,null==o?void 0:o.scenario),n}return n(t,e),t.prototype.setEngineConfig=function(e){this.zegoWebRTC.setEngineConfig(e)},t.prototype.setSEIConfig=function(e){this.zegoWebRTC.setSEIConfig(e)},t.use=function(e){i.ZegoExpressWebRTMEngine.use(e),s.ZegoWebRTC.use(e)},t.prototype.checkSystemRequirements=function(e,t){return void 0===t&&(t=0),this.zegoWebRTC.checkSystemRequirements(t,e)},t.prototype.off=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.off(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.off(e,t)},t.prototype.on=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.on(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.on(e,t)},t.prototype.createStream=function(e){return this.zegoWebRTC.createStream(e)},t.prototype.setRoomScenario=function(e){return this.zegoWebRTC.setRoomScenario(e)},t.prototype.enableAutoSwitchDevice=function(e){return this.zegoWebRTC.enableAutoSwitchDevice(e)},t.prototype.getPublishingStreamQuality=function(e){return this.zegoWebRTC.getPublishingStreamQuality(e)},t.prototype.getElectronScreenSources=function(){return this.zegoWebRTC.getElectronScreenSources()},t.prototype.enableAiDenoise=function(e,t){return this.zegoWebRTC.enableAiDenoise(e,t)},t.prototype.destroyStream=function(e){return this.zegoWebRTC.destroyStream(e)},t.prototype.startPublishingStream=function(e,t,r){return this.zegoWebRTC.startPublishingStream(e,t,r)},t.prototype.stopPublishingStream=function(e){return this.zegoWebRTC.stopPublishingStream(e)},t.prototype.sendSEI=function(e,t){return this.zegoWebRTC.sendSEI(e,t)},t.prototype.setVideoConfig=function(e,t){return this.zegoWebRTC.setVideoConfig(e,t)},t.prototype.setAudioConfig=function(e,t){return this.zegoWebRTC.setAudioConfig(e,t)},t.prototype.replaceTrack=function(e,t){return this.zegoWebRTC.replaceTrack(e,t)},t.prototype.setCaptureVolume=function(e,t){return this.zegoWebRTC.setCaptureVolume(e,t)},t.prototype.setDummyCaptureImagePath=function(e,t){return this.zegoWebRTC.setDummyCaptureImagePath(e,t)},t.prototype.setStreamExtraInfo=function(e,t){return this.zegoWebRTC.setStreamExtraInfo(e,t)},t.prototype.enableVideoCaptureDevice=function(e,t){return this.zegoWebRTC.enableCameraCapturing(e,t)},t.prototype.addPublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.addPublishCdnUrl(e,t)},t.prototype.removePublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.removePublishCdnUrl(e,t)},t.prototype.mutePublishStreamVideo=function(e,t,r){return this.zegoWebRTC.mutePublishStreamVideo(e,t,r)},t.prototype.mutePublishStreamAudio=function(e,t){return this.zegoWebRTC.mutePublishStreamAudio(e,t)},t.prototype.setEffectsBeauty=function(e,t,r){return this.zegoWebRTC.setBeautyEffect(e,t,r)},t.prototype.setLowlightEnhancement=function(e,t){return this.zegoWebRTC.setLowlightEnhance(e,t)},t.prototype.enableDualStream=function(e){return this.zegoWebRTC.enableDualStream(e)},t.prototype.setLowStreamParameter=function(e,t){return this.zegoWebRTC.setLowStreamParameter(e,t)},t.prototype.enableHardwareEncoder=function(e){this.zegoWebRTC.enableVideoHardwareEncoder(e)},t.prototype.startPlayingStream=function(e,t){return this.zegoWebRTC.startPlayingStream(e,t)},t.prototype.stopPlayingStream=function(e){return this.zegoWebRTC.stopPlayingStream(e)},t.prototype.mutePlayStreamVideo=function(e,t){return this.zegoWebRTC.mutePlayStreamVideo(e,t)},t.prototype.mutePlayStreamAudio=function(e,t){return this.zegoWebRTC.mutePlayStreamAudio(e,t)},t.prototype.getPlayingStreamQuality=function(e){return this.zegoWebRTC.getPlayingStreamQuality(e)},t.prototype.createLocalStreamView=function(e){return this.zegoWebRTC.createLocalViewer(e)},t.prototype.createRemoteStreamView=function(e){return this.zegoWebRTC.createRemoteViewer(e)},t.prototype.startMixerTask=function(e){return this.zegoWebRTC.startMixerTask(e)},t.prototype.stopMixerTask=function(e){return this.zegoWebRTC.stopMixerTask(e)},t.prototype.setMixerTaskConfig=function(e){return this.zegoWebRTC.setMixerTaskConfig(e)},t.prototype.startMixingAudio=function(e,t){return this.zegoWebRTC.startMixingAudio(e,t)},t.prototype.stopMixingAudio=function(e,t){return this.zegoWebRTC.stopMixingAudio(e,t)},t.prototype.setMixingAudioVolume=function(e,t,r){return this.zegoWebRTC.setMixingAudioVolume(e,t,r)},t.prototype.createAudioEffectPlayer=function(e){if(e instanceof MediaStream)return new a.ZegoAudioEffectPlayer(this.zegoWebRTC,e);throw Error("Param localStream is not instance of MediaStream.")},t.prototype.loadAudioEffect=function(e,t){var r=this;return new Promise((function(o,n){r.zegoWebRTC.preloadEffect(e,t,(function(t){t&&n(t),o(e)}))}))},t.prototype.unloadAudioEffect=function(e){return this.zegoWebRTC.unloadEffect(e)},t.prototype.enumDevices=function(){return this.zegoWebRTC.enumDevices()},t.prototype.getCameras=function(){return this.zegoWebRTC.getCameras()},t.prototype.getMicrophones=function(){return this.zegoWebRTC.getMicrophones()},t.prototype.getSpeakers=function(){return this.zegoWebRTC.getSpeakers()},t.prototype.useVideoDevice=function(e,t){return this.zegoWebRTC.useVideoDevice(e,t)},t.prototype.useAudioDevice=function(e,t){return this.zegoWebRTC.useAudioDevice(e,t)},t.prototype.useAudioOutputDevice=function(e,t){return this.zegoWebRTC.setAudioOutputDevice(e,t)},t.prototype.setSoundLevelDelegate=function(e,t,r){return this.zegoWebRTC.setSoundLevelDelegate(e,t,null==r?void 0:r.enableInBackground)},t.prototype.isMicrophoneMuted=function(){return this.zegoWebRTC.isMicrophoneMuted()},t.prototype.muteMicrophone=function(e){return this.zegoWebRTC.muteMicrophone(e)},t.prototype.createRangeAudioInstance=function(){return this.zegoWebRTC.createRangeAudioInstance()},t.prototype.createRealTimeSequentialDataManager=function(e){return this.zegoWebRTC.createRealTimeSequentialDataManager(e)},t.prototype.destroyRealTimeSequentialDataManager=function(e){this.zegoWebRTC.destroyRealTimeSequentialDataManager(e)},t}(i.ZegoExpressWebRTMEngine);t.ZegoExpressEngine=c;var u=r(1358);Object.defineProperty(t,"WebRTCUtil",{enumerable:!0,get:function(){return u.WebRTCUtil}})},1089:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,function(e){e.CONSTRUCTOR="zc.0",e.CHECK_SUPPORT="zc.csr",e.CREATE_STREAM="zc.cs",e.DESTROY_STREAM="zc.ds",e.START_PUBLISHING_STREAM="zc.sps.0",e.START_PLAYING_STREAM="zc.sps.1",e.STOP_PUBLISHING_STREAM="zc.sps.0.0",e.STOP_PLAYING_STREAM="zc.sps.1.0",e.SET_MEDIA_SIDE_FLAGS="zc.smsg.0",e.SEND_MEDIA_SIDE_INFO="zc.smsi.0",e.ON_STREAM="zc.os",e.ON_PUSH_STREAM_UPDATE="zc.opsu",e.BIND_WINDOW_LISTENER="zc.wl",e.SET_AUDIO_OUTPUT="zc.sao",e.SET_CUSTOM_SIGNAL_URL="zc.scsu",e.SET_TURN_OVER_TCP_ONLY="zc.stoto",e.RDH_ACTIVE="zc.rdh.a",e.RDH_MAX_TIME="zc.rdh.m",e.RDH_WEBRTC_URL_RSP="zc.rdh.hfwur",e.PUBLISH_STATE_HANDLE="zc.psh.0",e.PLAY_STATE_HANDLE="zc.psh.1",e.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE="zc.tsh.rngn.0",e.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE="zc.tsh.rngn.1",e.STATECENTER_ACTION_LISTENER="zc.sc.al",e.STATECENTER_SET_SETTING="zc.sc.ss",e.SIGNAL_SET_SESSION_INFO="zc.s.ssi",e.SIGNAL_RESET_CONNECT_TIMER="zc.s.rct",e.SIGNAL_RESET_LOGIN_TIMER="zc.s.rlt",e.SIGNAL_BIND_WEBSOCKET_HANDLE="zc.s.bwh",e.SIGNAL_RESET_CHECK_MESSAGE="zc.s.rcm",e.SIGNAL_UPDATE_TOKEN="zc.s.ut",e.SIGNAL_DISCONNECTCALLBACK="zc.s.dcb",e.SIGNAL_SEND_MESSAGE_WITH_CALLBACK="zc.s.smwc",e.SIGNAL_CONNECT_SERVER="zc.s.cs.0",e.SIGNAL_START_CONNECT_TIMER="zc.s.sct",e.SIGNAL_DISCONNECT_SERVER="zc.s.dc",e.SIGNAL_CREATE_SESSION="zc.s.cs.1",e.SIGNAL_REMOVE_SESSION="zc.s.rs",e.SIGNAL_SEND_REMOVE_SESSION="zc.s.srs",e.SIGNAL_SEND_MESSAGE="zc.s.sm",e.SIGNAL_HANDLE_RESPOND_DATA="zc.s.hrd",e.SIGNAL_ADD_SESSION="zc.s.as",e.SIGNAL_HANDLE_PUSH_DATA="zc.s.hpd",e.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA="zc.s.hprsd",e.SIGNAL_SEND_MEDIA_DESC="zc.s.smd",e.SIGNAL_SEND_CANDIDATE_INFO="zc.s.sci",e.SIGNAL_SEND_MEDIA_DESC_ACK="zc.s.smda",e.SIGNAL_SEND_CANDIDATE_INFO_ACK="zc.s.scia",e.SIGNAL_SEND_CLOSE_SESSION_ACK="zc.s.scsa",e.SIGNAL_SEND_RESET_SESSION_ACK="zc.s.srsa",e.SIGNAL_REGISTER_PUSH_CALLBACK="zc.s.rpc",e.SIGNAL_CHECK_MESSAGE_TIMEOUT="zc.s.cmt",e.SIGNAL_SEND_HEARTBEAT="zc.s.sh",e.SIGNAL_QUALITY_REPORT="zc.s.qr",e.SIGNAL_SEND_STREAM_STATUS="zc.s.sss",e.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM="zc.s.apvs",e.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM="zc.s.apas",e.SIGNAL_SEND_BROADCAST_STATUS="zc.s.sbs",e.SIGNAL_SEND_NET_PROBE="zc.s.snp",e.SIGNAL_SEND_NET_QUALITY_INFO_PUSH_ACK="zc.s.npa",e.STREAMCENTER_SET_STREAM_GW_NODE="zsc.ssgn",e.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST="zsc.ccgl",e.STREAMCENTER_CHECK_CACHED_NODES_USE="zsc.ccns",e.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST="zsc.ucgl",e.PUBLISHER_START_PUBLISH="zc.p.0.sp.0",e.PUBLISHER_PUBLISH_SUCCESS="zc.p.ps",e.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS="zc.p.0.ocpss",e.PUBLISHER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.0.hcsws",e.PUBLISHER_ON_CREATE_OFFER_SUCCESS="zc.p.0.ocos",e.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.0.oslds",e.PUBLISHER_ON_GET_REMOTE_DESCRIPTION="zc.p.0.ogrd",e.PUBLISHER_ON_RECV_MEDIA_DESC="zc.p.0.ormd",e.PUBLISHER_ON_RECV_CANDIDATE_INFO="zc.p.0.orci.0",e.PUBLISHER_ON_RECV_PUBLISH_EVENT="zc.p.0.orpe",e.PUBLISHER_ON_RECV_CLIENT_INFO="zc.p.0.orci.1",e.PUBLISHER_ON_ICE_CANDIDATE="zc.p.0.oic",e.PUBLISHER_ON_CONNECTION_STATE_CHANGE="zc.p.0.ocsc",e.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.0.oicsc",e.PUBLISHER_RESET_PUBLISH="zc.p.0.rp",e.PUBLISHER_SET_PLAYER_QUALITY_TIMER="zc.p.0.spqt",e.PUBLISHER_UPLOAD_PUBLISH_QUALITY="zc.p.0.upq",e.PUBLISHER_ON_RECV_RESET_SESSION="zc.p.0.orrs",e.PUBLISHER_ON_RECV_CLOSE_SESSION="zc.p.0.orcs",e.PUBLISHER_SEND_CANDIDATE_INFO="zc.p.0.sci",e.PUBLISHER_STATE_ERROR="zc.p.0.psr",e.PUBLISHER_STOP_PUBLISH="zc.p.0.sp.1",e.PUBLISHER_ON_DISCONNECT="zc.p.0.od",e.PUBLISHER_START_SOUND_LEVEL="zc.p.0.ssl.0",e.PUBLISHER_STOP_SOUND_LEVEL="zc.p.0.ssl.1",e.PUBLISHER_HANDLE_ENC_BITRATE="zc.p.0.heb",e.PUBLISHER_ON_RECV_NET_QUALITY_INFO="zc.p.0.nqi",e.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC="zc.p.0.orumd",e.PUBLISHER_SEND_SEI="zc.p.0.ss",e.PUBLISHER_RESET_GW_NODES="zc.p.0.rgn",e.PUBLISHER_SET_GW_NODES="zc.p.0.sgn",e.PUBLISHER_HANDLE_DISPATCHED_GW_NODES="zc.p.0.hdgn",e.PUBLISHER_PURE_SORT_GW_NODES="zc.p.0.psgn",e.PLAYER_START_PLAY="zc.p.1.sp.0",e.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS="zc.p.ocpss.1",e.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.hcsws.1",e.PLAYER_ON_CREATE_OFFER_SUCCESS="zc.p.ocos.1",e.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.oslds.1",e.PLAYER_ON_RECV_MEDIA_DESC="zc.p.ormd.1",e.PLAYER_ON_RECV_CANDIDATE_INFO="zc.p.orci.1",e.PLAYER_ON_RECV_PLAY_EVENT="zc.p.orpe.1",e.PLAYER_ON_RECV_CLIENT_INFO="zc.p.orci.1.1",e.PLAYER_ON_ICE_CANDIDATE="zc.p.oic.1",e.PLAYER_ON_CONNECTION_STATE_CHANGE="zc.p.ocsc.1",e.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.oicsc.1",e.PLAYER_RESET_PLAY="zc.p.rp.1",e.PLAYER_SET_PLAYER_QUALITY_TIMER="zc.p.spqt.1",e.PLAYER_UPLOAD_PLAYER_QUALITY="zc.p.upq.1",e.PLAYER_ON_RECV_RESET_SESSION="zc.p.orrs.1",e.PLAYER_ON_RECV_CLOSE_SESSION="zc.p.orcs.1",e.PLAYER_ON_RECV_STREAM_STATUS="zc.p.orss.1",e.PLAYER_ON_GOT_REMOTE_STREAM="zc.p.ogrs.1",e.PAYER_GET_VIDEO_CODEC="zc.p.gvc",e.PLAYER_SEND_CANDIDATE_INFO="zc.p.sci.1",e.PLAYER_STATE_ERROR="zc.p.psr.1",e.PLAYER_STOP_PLAY="zc.p.1.sp.1",e.PLAYER_ON_DISCONNECT="zc.p.od.1",e.PLAYER_START_SOUND_LEVEL="zc.p.ssl.1",e.PLAYER_STOP_SOUND_LEVEL="zc.p.ssl.1.1",e.PLAYER_ON_RECV_NET_QUALITY_INFO="zc.p.1.nqi",e.PLAYER_RESET_GW_NODES="zc.p.1.rgn",e.PLAYER_SET_GW_NODES="zc.p.1.sgn",e.PLAYER_HANDLE_DISPATCHED_GW_NODES="zc.p.1.hdgn",e.PLAYER_PURE_SORT_GW_NODES="zc.p.1.psgn",e.UPLOAD_SPEED_LOG_QUALITY="zc.uslq",e.PUBLISH_SET_CAPTURE_VOLUME="zc.p.scv",e.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe",e.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ="zc.sh.msbss",e.STREAMHANDLER_MERGE_STREAM="zc.sh.ms",e.STREAMHANDLER_PATCH_STREAM_LIST="zc.sh.psl",e.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2="zc.sh.sbr",e.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE="zc.as.umrs",e.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE="zc.as.uars",e.ANALOGSOCKET_SET_MEDIA_SERVER_STATE="zc.as.smss",e.ANALOGSOCKET_SET_ACCESS_SERVER_STATE="zc.as.sass",e.ANALOGSOCKET_SEND="zc.as.s.0",e.ANALOGSOCKET_OPEN="zc.as.op",e.SET_ROOM_SCENARIO="zc.srs",e.INIT_ROOM_SCENARIO="zc.irs"}(t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={}))},6361:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonStates=void 0;var n=r(6706),i=function(){function e(e,t,r){this.rtmStateCenter=e,this.rtcStateCenter=t,this.streamCenter=r,this._initTime=Date.now()}return Object.defineProperty(e.prototype,"appid",{get:function(){return this.rtcStateCenter.appid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_id",{get:function(){return this.rtmStateCenter.deviceID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"product",{get:function(){return this.rtmStateCenter.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sdk_version",{get:function(){return n.PROTO_VERSION},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sys_info",{get:function(){return navigator.userAgent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"report_version",{get:function(){return this.rtcStateCenter.reportVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"browser",{get:function(){return this.rtcStateCenter.browser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id_name",{get:function(){return this.rtmStateCenter.idName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nick_name",{get:function(){return this.rtmStateCenter.nickName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"use_na",{get:function(){return this.rtcStateCenter.useNetAgent?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userid",{get:function(){return this.rtmStateCenter.userid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"network_state",{get:function(){return this.rtcStateCenter.networkState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"init_time",{get:function(){return this._initTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"net_type",{get:function(){var e;return(null===(e=navigator.connection)||void 0===e?void 0:e.effectiveType)||"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_server",{get:function(){return this.rtmStateCenter.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_infos",{get:function(){return this.rtcStateCenter.deviceInfos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_list",{get:function(){var e=this,t={};return this.rtcStateCenter.roomList.forEach((function(r){var o,n,i,s=e.rtmStateCenter.roomModulesList.find((function(e){return e.roomID===r.roomID})),a={roomSessionID:r.roomSessionID,sessionID:r.sessionID,streamList:r.streamList,token:r.token,role:e.rtmStateCenter.role,roomCreateFlag:e.rtmStateCenter.roomCreateFlag,loginTime:null==s?void 0:s.loginTime,heartbeatInterval:null===(o=null==s?void 0:s.heartBeatHandler)||void 0===o?void 0:o.heartbeatInterval,roomExtraInfos:null===(n=null==s?void 0:s.messageHandler)||void 0===n?void 0:n.transSeqMap,roomRetryTime:null===(i=null==s?void 0:s.roomTryHandler)||void 0===i?void 0:i.RETRY_MAX_TIME};t[r.roomID]=a})),t},enumerable:!1,configurable:!0}),e.prototype.getRoomList=function(e,t){var r=this;return this.room_id_list.slice(e,t).map((function(e){return o({roomID:e},r.room_list[e])}))},Object.defineProperty(e.prototype,"room_id_list",{get:function(){return this.rtcStateCenter.roomList.map((function(e){return e.roomID}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomListSize",{get:function(){return this.room_id_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLoginState",{get:function(){var e,t=this.rtmStateCenter.roomModulesList[0],r=t.runState,o=t.lastRunState;return r===n.ENUM_RUN_STATE.logout?e=n.USER_RUN_STATE.logout:r===n.ENUM_RUN_STATE.login?e=n.USER_RUN_STATE.login:o===n.ENUM_RUN_STATE.logout?e=n.USER_RUN_STATE.trylogin:o===n.ENUM_RUN_STATE.login&&(e=n.USER_RUN_STATE.reconnect),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publishStreamList",{get:function(){return Object.keys(this.streamCenter.publisherList)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publishList",{get:function(){var e=this,t={};return this.publishStreamList.forEach((function(r){var o,n,i,s=e.streamCenter.publisherList[r],a=null==s?void 0:s.publisher,c=null==a?void 0:a.publishStat;t[r]={streamSid:null==s?void 0:s.streamSid,roomID:null===(o=null==s?void 0:s.room)||void 0===o?void 0:o.roomID,roomSessionID:null===(n=null==s?void 0:s.room)||void 0===n?void 0:n.roomSessionID,cameraLabel:null==s?void 0:s.cameraLabel,microLabel:null==s?void 0:s.microLabel,cameraStatus:null==a?void 0:a.camera_status,micStatus:null==a?void 0:a.mic_status,sessionId:null==a?void 0:a.sessionId,publishBeginTime:null==a?void 0:a.reportPublishStateTime,serverUrl:null===(i=null==a?void 0:a.signal)||void 0===i?void 0:i.server,gwNode:null==a?void 0:a.gwNode,proto:"webrtc",frameWidth:null==c?void 0:c.frameWidth,frameHeight:null==c?void 0:c.frameHeight,rtt:null==c?void 0:c.currentRoundTripTime,videoPacketsLostRate:null==c?void 0:c.videoPacketsLostRate,audioPacketsLostRate:null==c?void 0:c.audioPacketsLostRate,videoTargetBitrate:null==c?void 0:c.videoTargetBitrate,videoBitrate:null==c?void 0:c.videoBitrate,audioTargetBitrate:null==c?void 0:c.audioTargetBitrate,audioBitrate:null==c?void 0:c.audioBitrate,videoTargetFPS:null==c?void 0:c.videoTargetFPS,videoFPS:null==c?void 0:c.videoFPS,audioFPS:null==c?void 0:c.audioFPS,videoCodecName:null==c?void 0:c.videoCodecName,audioCodecName:null==c?void 0:c.audioCodecName}})),t},enumerable:!1,configurable:!0}),e.prototype.getPublishList=function(e,t){var r=this;return this.publishStreamList.slice(e,t).map((function(e){return o({streamID:e},r.publishList[e])}))},Object.defineProperty(e.prototype,"publishListSize",{get:function(){return this.publishStreamList.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playStreamList",{get:function(){return Object.keys(this.streamCenter.playerList)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playList",{get:function(){var e=this,t={};return this.playStreamList.forEach((function(r){var o,n,i,s=e.streamCenter.playerList[r],a=null==s?void 0:s.player,c=null==a?void 0:a.playStat;t[r]={streamSid:null==s?void 0:s.streamSid,roomID:null===(o=null==s?void 0:s.room)||void 0===o?void 0:o.roomID,roomSessionID:null===(n=null==s?void 0:s.room)||void 0===n?void 0:n.roomSessionID,cameraStatus:null==a?void 0:a.cameraStatus,micStatus:null==a?void 0:a.micStatus,sessionId:null==a?void 0:a.sessionId,playBeginTime:null==a?void 0:a.reportPlayStateTime,serverUrl:null===(i=null==a?void 0:a.signal)||void 0===i?void 0:i.server,gwNode:null==a?void 0:a.gwNode,proto:"webrtc",frameWidth:null==c?void 0:c.frameWidth,frameHeight:null==c?void 0:c.frameHeight,rtt:null==c?void 0:c.currentRoundTripTime,videoPacketsLostRate:null==c?void 0:c.videoPacketsLostRate,audioPacketsLostRate:null==c?void 0:c.audioPacketsLostRate,videoBitrate:null==c?void 0:c.videoBitrate,audioBitrate:null==c?void 0:c.audioBitrate,videoFPS:null==c?void 0:c.videoFPS,audioFPS:null==c?void 0:c.audioFPS,videoCodecName:null==c?void 0:c.videoCodecName,audioCodecName:null==c?void 0:c.audioCodecName,peerToPeerDelay:null==c?void 0:c.peerToPeerDelay,firstFrameTime:null==c?void 0:c.firstFrameTime,videoJitter:null==c?void 0:c.videoJitter,audioJitter:null==c?void 0:c.audioJitter}})),t},enumerable:!1,configurable:!0}),e.prototype.getPlayList=function(e,t){var r=this;return this.playStreamList.slice(e,t).map((function(e){return o({streamID:e},r.playList[e])}))},Object.defineProperty(e.prototype,"playListSize",{get:function(){return this.playStreamList.length},enumerable:!1,configurable:!0}),e}();t.CommonStates=i},9595:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTC=t.ZegoSettingConfig=void 0;var r=function(){function e(){this.defaultSetting={publish_video_codec:"H264",camera_video_bitrate:800,screen_video_bitrate:1500,custom_video_bitrate:0,l3_play_buffer_ms:500,AEC:!0,AGC:!0,ANS:!0,resource_mode:0,bitrate_mode:"default",auto_to_tcp:!1,udp_max_fail_num:2,probe_started_num:3,udp_or_tcp:"udp",hardware_encode:!1,camera_hard_encode:!1,custom_hard_encode:!1},this.userChangedKey={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return e.prototype.setSetting=function(e,t){var r=Array.isArray(t)&&t.length>0;for(var o in e)for(var n in e[o])if(!n.endsWith("_ctrlmode")){if(r&&-1==t.indexOf(n))continue;var i=e[o][n+"_ctrlmode"];1===i?this.userChangedKey[n]||(this.setting[n]=e[o][n]):2===i?this.setting[n]=e[o][n]:this.defaultSetting[n]&&(this.setting[n]=this.defaultSetting[n]),"number"==typeof i&&(this.setting[n+"_ctrlmode"]=e[o][n+"_ctrlmode"])}},e.prototype.getSetting=function(e,t){return void 0===t&&(t=!1),t?2==this.setting[e+"_ctrlmode"]?this.setting[e]:void 0:this.setting[e]},e.prototype.setUserValue=function(e,t){2!==this.setting[e+"_ctrlmode"]&&(this.userChangedKey[e]=!0,this.setting[e]=t)},e}();t.ZegoSettingConfig=r,t.RTC="rtc"},7325:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var o=r(6706),n=r(608),i=r(1089),s=r(6706),a=r(3529),c=r(3544),u=r(1378),l=function(){function e(e,t){this.logger=e,this.dataReport=t,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.useNetAgent=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.callbackList={},this.publishStreamList={},this.waitPublishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnToTcp=!1,this.turnOverTcpOnly=void 0,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],beautyEffectOverload:[],playerRecvSEI:[],beautyEffectError:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.streamRetryTime=300,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.streamConnectTime=0,this.clientIP="",this.accessClientIp="",this.isMultiOuter=!1,this.type="PUBLIC",this.roomList=[],this.tempRoomList=[],this.isMultiRoom=!1,this.browser="",this.unregisterSeiFilter="",this.isTestMode=!1,this.playAccelerate=!0,this.connectChanged=!1,this.autoSwitchDeviceSetting={camera:!1,microphone:!1},this.unSendMessageList=[],this.scenario=o.ZegoScenario.Default,this.testStreamRetryMode=0,this.testStreamRetryCount=10,this.supportDispatchByPass=!1,this.engineConfig={},this.logReportCallback=n.ClientUtil.logReportCallback,this.unregisterCallback=n.ClientUtil.unregisterCallback,this.checkIllegalCharacters=n.ClientUtil.checkIllegalCharacters,this.decodeServerError=n.ClientUtil.decodeServerError,this.getLiveRoomError=n.ClientUtil.getLiveRoomError,this.getServerError=n.ClientUtil.getServerError,this.mergeStreamList=n.ClientUtil.mergeStreamList,this.checkInteger=n.ClientUtil.checkInteger,this.isUrl=n.ClientUtil.isUrl,this.actionSuccessCallback=n.ClientUtil.actionSuccessCallback,this.checkValidNumber=n.ClientUtil.checkValidNumber,this.getDevices=n.ClientUtil.getDevices,this.uint8arrayToBase64=n.ClientUtil.uint8arrayToBase64,this.getSeq=s.getSeq,this.getReportSeq=o.getReportSeq}return Object.defineProperty(e.prototype,"networkState",{get:function(){var e;return null===(e=this.rtm)||void 0===e?void 0:e.stateCenter.networkState},set:function(e){var t;(null===(t=this.rtm)||void 0===t?void 0:t.stateCenter)&&void 0!==e&&(this.rtm.stateCenter.networkState=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamCenter",{get:function(){return this._streamCenter},set:function(e){this._streamCenter=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"billingTimer",{get:function(){return this._billingTimer||(this._billingTimer=new c.BillingTimer(this.logger,this)),this._billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chargeInfosSaver",{get:function(){return this._chargeInfosSaver||(this._chargeInfosSaver=new u.ChargeInfosSaverWeb(this.logger,this)),this._chargeInfosSaver},enumerable:!1,configurable:!0}),e.prototype.getRequestId=function(){return this.idName+"-"+(0,s.getSeq)()},e.prototype.getSignalCmdContent=function(e,t,r,o){var n={request_id:t,room_id:e,from_userid:this.idName,from_username:this.nickName,to_userid:r};return null!=o&&(n.result=o),JSON.stringify(n)},e.prototype.actionListener=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!["playQualityUpdate","publishQualityUpdate","soundLevelUpdate","capturedSoundLevelUpdate","playerRecvSEI","remoteCameraStatusUpdate","_remoteCameraStatusUpdate","remoteMicStatusUpdate","_remoteMicStatusUpdate","_streamUpdated","_deviceError"].includes(e)&&this.listenerList[e]){var s=this.reporter.createSpan(o.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},a.ZegoRTCLogEvent.kZegoListener.event);s.setAttributes({listener:e,listener_params:JSON.stringify(r)}),["deviceError","streamExtraInfoUpdate","publisherStateUpdate","playerStateUpdate","roomStreamUpdate"].includes(e)&&this.logger.info("zc.al ".concat(e," ").concat(JSON.stringify(r))),s.end()}this.listenerList[e]&&this.listenerList[e].forEach((function(o){try{setTimeout((function(){o.apply(void 0,r)}),0)}catch(r){t.logger.error(i.ZEGO_WEBRTC_ACTION.STATECENTER_ACTION_LISTENER+" "+e+" "+r)}}))},e.prototype.getRoomByRoomID=function(e){return this.roomList.find((function(t){return t.roomID==e}))},e.prototype.getPlayRoom=function(e){return this.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},e}();t.StateCenter=l},5740:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenter=void 0,t.ZegoStreamCenter=function(){this.publisherList={},this.playerList={},this.stopedPlayerList={}}},7560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamHandler=void 0;var o=r(6706),n=r(2752),i=r(1089),s=r(3529),a=s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetCurrentStreamList,c=function(){function e(e,t,r,o,n){this.logger=e,this.stateCenter=t,this.rtm=r,this.streamCenter=o,this.roomID=n,this.minStreamSeq=0,this.streamSeq=0,this.streamQuerying=!1,this.streamSeqMergeMap=null,this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3}return e.prototype.setCDNInfo=function(e,t){e.urlFlv=t.urls_flv instanceof Array?t.urls_flv[0]||"":"string"==typeof t.urls_flv?t.urls_flv:"",e.urlHls=t.urls_m3u8 instanceof Array?t.urls_m3u8[0]||"":"string"==typeof t.urls_m3u8?t.urls_m3u8:"",e.urlFlvPlus=t.urls_flv_plus instanceof Array?t.urls_flv_plus[0]||"":"string"==typeof t.urls_flv_plus?t.urls_flv_plus:"",e.urlHlsPlus=t.urls_m3u8_plus instanceof Array?t.urls_m3u8_plus[0]||"":"string"==typeof t.urls_m3u8_plus?t.urls_m3u8_plus:"",e.urlHttpsFlv=t.urls_https_flv instanceof Array?t.urls_https_flv[0]||"":"string"==typeof t.urls_https_flv?t.urls_https_flv:"",e.urlHttpsHls=t.urls_https_m3u8 instanceof Array?t.urls_https_m3u8[0]||"":"string"==typeof t.urls_https_m3u8?t.urls_https_m3u8:"",e.urlRtmp=t.urls_rtmp instanceof Array?t.urls_rtmp[0]||"":"string"==typeof t.urls_rtmp?t.urls_rtmp:""},e.prototype.onStreamUpdated=function(e,t,r){},e.prototype.onStreamExtraInfoUpdated=function(e,t){},e.prototype.handleStreamStart=function(e,t){this.logger.info("zb.sh.hss call stream update"),this.room=t,e.body?(this.streamListHBMergeInterval=e.body.stream_list_hb_wait_merge_time||2e3,this.streamListMergeInterval=e.body.stream_list_push_merge_timeout||5e3,this.streamQuerying=!1,this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info||[]),this.handleReconnectStream(e.body.stream_info),this.logger.info("zb.sh.hss call end")):this.logger.error("zb.sh.hss server response wrong")},e.prototype.onPublishStateUpdate=function(e,t,r){},e.prototype._updateStreamInfo=function(e,t,r,i,s){var a,c,u=this;void 0===r&&(r=""),this.logger.info("zb.sh.usi call");var l=r,d=null===(a=this.room)||void 0===a?void 0:a.streamList.find((function(t){return t.stream_id===e}));d||this.logger.info("zb.sh.usi stream not in room cmd "+t);var h={stream_id:e,extra_info:l};2002!==t&&2003!==t||(h.stream_sid=(null==d?void 0:d.stream_sid)||"");var p=JSON.stringify(h),f={sub_cmd:t,stream_msg:p,third_token:null===(c=this.room)||void 0===c?void 0:c.token},_=this.room;this.room.streamInfoList[e]={};var g=function(r,o){i&&i(r,u.room.streamInfoList[e].seq),u.handleStreamUpdateRsp(r,e,t)},m=function(a,c){var l=u.room;if(l&&!l.isResetRoom&&!u.rtm.isDisConnect()&&a.code&&a.code==n.errorCodeList.TIMEOUT.code&&l.streamInfoList[e].seq==c)2001==t&&u.stateCenter.publishStreamList[e]&&u.stateCenter.publishStreamList[e].state==o.ENUM_PUBLISH_STREAM_STATE.update_info||2002==t?(u.logger.warn("zb.sh.usi resend stream update "+t),setTimeout((function(){u._updateStreamInfo(e,t,r,i,s)}),0)):s&&s(n.errorCodeList.TIMEOUT);else if(a.body&&a.body.err_code){var d=u.stateCenter.getServerError(a.body.err_code,u.stateCenter.useNetAgent,a.body.err_message);[1011,1000002002].includes(d.code)&&(d=n.errorCodeList.TOKEN_EXPIRED),s&&s(d,c),t===o.ENUM_STREAM_SUB_CMD.liveBegin&&u.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,e,d)}};if(this.stateCenter.useNetAgent)this.room.streamInfoList[e].seq=this.rtm.liveRoomHandler.sendStreamUpdate(f,g,m,{sessionID:null==_?void 0:_.sessionID,roomID:null==_?void 0:_.roomID,roomSessionID:null==_?void 0:_.roomSessionID});else{var v=this.rtm.service.sendMessage("stream",f,g,m,void 0,{sessionID:null==_?void 0:_.sessionID,roomID:null==_?void 0:_.roomID,roomSessionID:null==_?void 0:_.roomSessionID});this.room.streamInfoList[e].seq=v,0===v&&2002===t&&"wxMini"===this.stateCenter.clientType&&(this.stateCenter.unSendMessageList.push({roomID:(null==_?void 0:_.roomID)||"",streamid:e,cmd:t,stream_extra_info:r}),this.logger.info("zb.sh.usi call unsendmsg "+JSON.stringify(this.stateCenter.unSendMessageList)))}this.logger.info("zb.sh.usi call success cmd "+t)},e.prototype.updateStreamInfo=function(e,t,r,n,i){var a,c=this;void 0===r&&(r=""),(2001===t||2002===t)&&(a=this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:s.ZegoRTCLogEvent.kZMLoginRoom.event,par:this.roomID},{key:""},s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.event)).setAttributes({stream_update_type:s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_update_type(2001===t?"stream added":2002===t?"stream deleted":""),stream_extra_info:s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_extra_info(r),stream_id:s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_id(e)}),this._updateStreamInfo(e,t,r,(function(e,r){2001!==t&&2002!==t||(a.setAttributes({send_seq:r}),a&&a.end()),n&&n(e,r)}),(function(e,r){2001!==t&&2002!==t||(a.setAttributes({send_seq:r}),c.stateCenter.reporter.setError(a,e)),i&&i(e,r)}))},e.prototype.handleStreamUpdateRsp=function(e,t,r){var o,n,i;if(this.rtm.isDisConnect())this.logger.warn("zb.sh.hsur not login");else if(0==e.body.err_code){this.logger.info("zb.sh.hsur stream seq "+this.streamSeq+" server seq "+e.body.stream_seq),this.streamSeq=this.streamSeq+1;var s=this.room;if(s)if((null===(o=null==e?void 0:e.body)||void 0===o?void 0:o.token_remain_time)&&(this.stateCenter.getRoomByRoomID(null===(n=null==e?void 0:e.header)||void 0===n?void 0:n.room_id)?this.rtm.resetRoomTokenTimer(e.header.room_id,e.body.token_remain_time):this.logger.error("zb.sh.hsur room no found ignore "+JSON.stringify(null===(i=e.header)||void 0===i?void 0:i.room_id))),this.stateCenter.useNetAgent)this.handleStreamSync(e,t,r),delete s.streamInfoList[t];else{e.body.stream_seq>this.streamSeq&&(this.logger.info("zb.sh.hsur seq diff, server: "+e.body.stream_seq+" client: "+this.streamSeq),this.fetchStreamList());for(var a=0;a<e.body.stream_info.length;a++){var c=e.body.stream_info[a].stream_id;this.handleStreamRsp(s,c,e.body.stream_info[a],r),delete s.streamInfoList[c]}}else this.logger.info("hsur.0 room no found")}else this.logger.error("zb.sh.hsur stream update error "+e.body.err_code)},e.prototype.handleStreamSync=function(e,t,r){if(this.handleStreamRsp(this.room,t,{stream_id:t,stream_sid:e.body.stream_sid,stream_ver:e.body.stream_ver,stream_nid:e.body.stream_nid},r),e.body.stream_seq>this.streamSeq)return this.logger.info("zb.sh.hss.1 seq diff server: "+e.body.stream_seq+" client "+this.streamSeq),void this.fetchStreamList();var o=this.room.streamList.find((function(e){return e.stream_id==t}));o&&e.body.stream_ver>o.stream_ver&&this.fetchStreamList(t)},e.prototype.handleStreamRsp=function(e,t,r,n){var i=this.stateCenter.publishStreamList[t],s=e.streamList.find((function(e){return e.stream_id==t}));if(this.logger.info("hsur.0 cmd "+n+" "+!!s),s&&2002===n){var a=e.streamList.findIndex((function(e){return e.stream_id==t}));this.logger.info("hsur.0 stream index "+a),a>-1&&e.streamList.splice(a,1)}i?(i.state==o.ENUM_PUBLISH_STREAM_STATE.update_info&&(i.state=o.ENUM_PUBLISH_STREAM_STATE.publishing,2001!==n||s||e.streamList.push(r),this.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.start,t,{code:0,message:""})),s&&s.stream_sid!==r.stream_sid&&(this.logger.info("hsur.0 update sid. "+t+" origin:"+s.stream_sid+", new:"+r.stream_sid),s.stream_sid=r.stream_sid)):this.logger.info("hsur.0 stream is not exist")},e.prototype.handleFetchStreamListRsp=function(e,t){var r,o,n,i,s,c;if(this.logger.info("zb.sh.hfslr call "+t),this.streamQuerying=!1,this.stateCenter.reporter.spanEnd({key:a.event,par:this.roomID},{stream_seq:a.stream_seq(null===(r=e.body)||void 0===r?void 0:r.stream_seq),stream_size:a.stream_size(null===(n=null===(o=e.body)||void 0===o?void 0:o.stream_info)||void 0===n?void 0:n.length),stream_list:a.stream_list(null===(i=e.body)||void 0===i?void 0:i.stream_info),error:(null===(s=null==e?void 0:e.body)||void 0===s?void 0:s.err_code)||(null==e?void 0:e.code),message:(null===(c=null==e?void 0:e.body)||void 0===c?void 0:c.err_message)||(null==e?void 0:e.msg)}),0===e.body.err_code)if(this.streamSeq!==e.body.stream_seq){var u=e.body.stream_info;this.stateCenter.useNetAgent&&t&&(u=e.body.stream_info.filter((function(e){return e.stream_id===t}))),this.handleFullUpdateStream(e.body.stream_seq,u),this.logger.info("zb.sh.hfslr call success")}else this.logger.info("zb.sh.hfslr same seq");else this.logger.info("zb.sh.hfslr server error=",e.body.err_code)},e.prototype.handleFullUpdateStream=function(e,t){var r=this;this.logger.info("zb.sh.hfus call"),this.streamSeq=e,this.logger.debug("zb.sh.hfus server seq "+this.streamSeq),this.stateCenter.mergeStreamList(this.stateCenter.idName,this.room.streamList,t,(function(e,t,n){0!==e.length&&(r.logger.debug("zb.sh.hfus callback addstream"),r.onStreamUpdated(r.roomID,o.ENUM_STREAM_UPDATE_TYPE.added,r.makeCallbackStreamList(e))),0!==t.length&&(r.logger.debug("zb.sh.hfus callback delstream"),r.onStreamUpdated(r.roomID,o.ENUM_STREAM_UPDATE_TYPE.deleted,r.makeCallbackStreamList(t))),0!==n.length&&(r.logger.debug("zb.sh.hfus callback updatestream"),r.onStreamExtraInfoUpdated(r.roomID,r.makeCallbackStreamList(n)))})),this.logger.info("zb.sh.hfus call success")},e.prototype.handlePushStreamUpdateMsg=function(e){if(this.logger.warn("zb.sh.hpsum call "+JSON.stringify(e)),e.body.stream_info&&0!==e.body.stream_info.length){if(e.body.stream_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.fetchStreamList();switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case o.ENUM_STREAM_UPDATE_CMD.added:this.handleAddedStreamList(e.body.stream_info);break;case o.ENUM_STREAM_UPDATE_CMD.deleted:this.handleDeletedStreamList(e.body.stream_info);break;case o.ENUM_STREAM_UPDATE_CMD.updated:this.handleUpdatedStreamList(e.body.stream_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handlePriPushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call"),e.body.streams_info&&0!==e.body.streams_info.length){if(e.body.streams_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.mergeStreamByStreamSeq(e.body.stream_cmd,e.body.stream_seq,e.body.streams_info);switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case o.ENUM_STREAM_UPDATE_CMD_PRI.added:this.handleAddedStreamList(e.body.streams_info);break;case o.ENUM_STREAM_UPDATE_CMD_PRI.deleted:this.handleDeletedStreamList(e.body.streams_info);break;case o.ENUM_STREAM_UPDATE_CMD_PRI.updated:this.handleUpdatedStreamList(e.body.streams_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handleAddedStreamList=function(e){this.logger.debug("zb.sh.hasl call");for(var t,r=[],n=0;n<e.length;n++)if(e[n].anchor_id_name!=this.stateCenter.idName&&e[n].id_name!=this.stateCenter.idName&&e[n].user_id!==this.stateCenter.idName){t=!1;for(var i=0;i<this.room.streamList.length;i++)if(e[n].stream_id===this.room.streamList[i].stream_id){t=!0;break}t||r.push(e[n])}else this.logger.debug("hdsl.0 have self stream added");if(0!==r.length){this.logger.debug("zb.sh.hasl callback addstream");for(var s=0;s<r.length;s++)this.room.streamList.push(r[s]);this.onStreamUpdated(this.roomID,o.ENUM_STREAM_UPDATE_TYPE.added,this.makeCallbackStreamList(r))}this.logger.info("zb.sh.hasl call success")},e.prototype.handleDeletedStreamList=function(e){this.logger.debug("zb.sh.hdsl call");for(var t=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.stateCenter.idName&&e[r].id_name!=this.stateCenter.idName&&e[r].user_id!==this.stateCenter.idName){for(var n=this.room.streamList.length-1;n>=0;n--)if(e[r].stream_id===this.room.streamList[n].stream_id){!this.stateCenter.connectChanged&&this.room.streamList.splice(n--,1),t.push(e[r]);break}}else this.logger.debug("zb.sh.hdsl have self stream deleted");0!==t.length&&(this.logger.debug("zb.sh.hdsl callback delstream"),this.onStreamUpdated(this.roomID,o.ENUM_STREAM_UPDATE_TYPE.deleted,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.hdsl call")},e.prototype.handleUpdatedStreamList=function(e){this.logger.debug("zb.sh.husl call");for(var t=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.stateCenter.idName&&e[r].id_name!=this.stateCenter.idName&&e[r].user_id!==this.stateCenter.idName){for(var o=0;o<this.room.streamList.length;o++)if(e[r].stream_id===this.room.streamList[o].stream_id){e[r].extra_info!==this.room.streamList[o].extra_info&&(this.room.streamList[o]=e[r],t.push(e[r]));break}}else this.logger.debug("hsul.0 have self stream updated");0!==t.length&&(this.logger.debug("zb.sh.husl callback updatestream"),this.onStreamExtraInfoUpdated(this.roomID,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.husl call success")},e.prototype.fetchStreamList=function(e){var t,r,n,i=this;this.logger.info("zb.sh.fsl call");var c=this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:s.ZegoRTCLogEvent.kZMLoginRoom.event,par:this.roomID},{key:a.event,par:this.roomID},a.event,!0);if(this.rtm.isDisConnect())return this.logger.info("zb.sh.fsl state error"),void this.stateCenter.reporter.setError(c,a.error.NOT_LOGIN);if(this.streamQuerying)return this.logger.info("zb.sh.fsl already doing"),void this.stateCenter.reporter.setError(c,a.error.kParamError," already doing");if(this.streamQuerying=!0,this.logger.debug("zb.sh.fsl send fetch request"),this.stateCenter.useNetAgent)this.rtm.liveRoomHandler.getStreamList({},(function(t){i.handleFetchStreamListRsp(t,e)}),(function(e){}),{roomID:null===(t=this.room)||void 0===t?void 0:t.roomID,sessionID:null===(r=this.room)||void 0===r?void 0:r.sessionID,roomSessionID:null===(n=this.room)||void 0===n?void 0:n.roomSessionID});else{var u=this.room;this.rtm.service.sendMessage("stream_info",{reserve:0},(function(e){i.handleFetchStreamListRsp(e)}),(function(e,t){}),void 0,{roomID:null==u?void 0:u.roomID,sessionID:null==u?void 0:u.sessionID,roomSessionID:null==u?void 0:u.roomSessionID})}this.logger.info("zb.sh.fsl call success")},e.prototype.handleReconnectStream=function(e){var t,r,n,i,s,a;this.logger.info("zb.sh.hrs call");var c=this.streamCenter.publisherList,u=this.streamCenter.playerList,l=function(u){if((null===(r=null===(t=c[u])||void 0===t?void 0:t.room)||void 0===r?void 0:r.roomID)!==d.roomID)return"continue";var l=e.find((function(e){return e.stream_id==u}));if((null===(n=c[u].publisher)||void 0===n?void 0:n.state)!=o.ENUM_PUBLISH_STATE.publishing&&c[u].state!==o.ENUM_PLAYER_STATE.playing||l&&(!l||l.anchor_id_name===d.stateCenter.idName||l.id_name===d.stateCenter.idName||l.user_id===d.stateCenter.idName)){if(((null===(i=c[u].publisher)||void 0===i?void 0:i.state)==o.ENUM_PUBLISH_STATE.stop||c[u].state===o.ENUM_PLAYER_STATE.stop)&&!(null===(a=null===(s=c[u])||void 0===s?void 0:s.retryStreamHandler)||void 0===a?void 0:a.maxTimer)&&e.find((function(e){return e.stream_id==u}))){d.updateStreamInfo(u,o.ENUM_STREAM_SUB_CMD.liveEnd);for(var h=0;h<d.room.streamList.length;h++)if(d.room.streamList[h].stream_id==u){d.room.streamList.splice(h--,1);break}}}else d.updateStreamInfo(u,o.ENUM_STREAM_SUB_CMD.liveBegin,d.stateCenter.publishStreamList[u].extra_info)},d=this;for(var h in c)l(h);for(var h in c)c[h].room.roomID===this.roomID&&c[h].isReDispatch&&(this.logger.info("zb.sh.hrs "+h+"retry dispatch"),(p=c[h].retryDispatchHandler).stopMaxTime(),p.invalid(),p.initStream(h,c[h].publishOption,!0),p.active(0),c[h].isReDispatch=!1);for(var h in u){var p;u[h].room.roomID===this.roomID&&u[h].isReDispatch&&(this.logger.info("zb.sh.hrs "+h+"retry dispatch"),(p=u[h].retryDispatchHandler).stopMaxTime(),p.invalid(),p.initStream(h,u[h].playOption,!1),p.active(0),u[h].isReDispatch=!1)}var f=this.streamCenter.stopedPlayerList,_=function(e){if(f[e].roomID!==g.roomID)return"continue";var t=g.streamCenter,r=f[e],n=r.playOption,i=r.playStream;t.setPlayStateStart(e,n,r.isDataChannel);var s=t.playerList[e].retryDispatchHandler;t.playSuccessCallBackList[e]=f[e].sucCallBack?f[e].sucCallBack:function(e){for(var t=document.querySelectorAll("video, audio"),r=0;r<t.length;r++)i&&t[r].srcObject===i&&(i.getTracks().forEach((function(e){return i.removeTrack(e)})),e.clone().getTracks().forEach((function(e){return i.addTrack(e)})))},f[e].errCallBack&&(t.playErrorCallBackList[e]=f[e].errCallBack),t.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),s.stopMaxTime(),s.invalid(),s.initStream(e,n,!1),s.startMaxTime(),s.active(0),delete f[e]},g=this;for(var h in f)_(h);this.logger.info("zb.sh.hrs end")},e.prototype.makeCallbackStreamList=function(e){var t,r=[];if(this.stateCenter.useNetAgent&&this.stateCenter.appConfig&&(t=this.stateCenter.appConfig.media_config.play_config.resource_info.filter((function(e){return[o.SignalResourceType.CDN,o.SignalResourceType.DG].includes(e.resource_type)}))),e&&e.length>0)for(var n=0;n<e.length;n++){var i=e[n].stream_id;if(t&&t.length)for(var s=0;s<t.length;s++){for(var a=t[s].resource_type==o.SignalResourceType.DG?"_plus":"",c=[],u=[],l=[],d=0;d<t[s].service_info.length;d++){var h=t[s].service_info[d],p=h.protocol,f=h.url_template.replace("{STREAM_NAME}",i);switch(p){case o.ProtocolType.FLV:c.push(f);break;case o.ProtocolType.HLS:u.push(f);break;case o.ProtocolType.RTMP:l.push(f)}}e[n]["urls_flv"+a]=c,e[n]["urls_m3u8"+a]=u,e[n]["urls_rtmp"+a]=l}var _={user:{userID:e[n].anchor_id_name||e[n].id_name,userName:e[n].anchor_nick_name||e[n].nick_name},extraInfo:e[n].extra_info,streamID:e[n].stream_id,roomID:"",urlFlv:"",urlFlvPlus:"",urlRtmp:"",urlHls:"",urlHlsPlus:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:e[n].stream_gid,closeType:e[n].close_type};this.setCDNInfo(_,e[n]),r.push(_)}return r},e.prototype.sendBizChannelRequest=function(e,t,r,o){var n=this;void 0===o&&(o=!1),e=Object.assign(e,{is_retry_req:o?1:0});var i=this.room;this.rtm.service.sendMessage("biz_channel",e,(function(e,r){t(e.header.seq,e.body.cmd,e.body.rsp_body)}),(function(o,i){var s=o.body.err_code;"number"!=typeof s||2002!==s?r(s,i,o.body.rsp_body):n.sendBizChannelRequest(e,t,r,!0)}),void 0,{roomID:null==i?void 0:i.roomID,sessionID:null==i?void 0:i.sessionID,roomSessionID:null==i?void 0:i.roomSessionID})},e.prototype.sendBizChannelRequestV2=function(e,t,r,o){var n=this,s=e.server,a=e.location,c=e.cmd,u=e.channel,l=this.rtm.netAgent,d=this.room,h=void 0,p=t.timestamp;t&&(h=JSON.stringify(t));var f={cmd:c,req_body:h,appid:this.stateCenter.appid,timestamp:p||Math.ceil((new Date).getTime()/1e3),token:null==d?void 0:d.token,user_id:this.stateCenter.idName,channel:u||"media"};this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" "+JSON.stringify(f)+" request "+JSON.stringify(e)),l.startHttpRequest({service:s,headers:[],body:f,idName:this.stateCenter.idName,method_no:2,ack:!1,location:a},(function(e){n.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" rsp "+JSON.stringify(e.body));var s=e.status_code,a=e.body;if(200===s){var c=a;if("string"==typeof a)try{c=JSON.parse(a)}catch(e){throw o(s),e}var u=c.err_code,l=c.rsp_body,d=void 0;try{d=JSON.parse(l)}catch(e){d=l}if(0!==u)return"number"==typeof u&&2002===u?void n.sendBizChannelRequest(t,r,o,!0):void o(s,u,d);r(d)}else o(s)}),(function(e){o(-1,null==e?void 0:e.code,void 0,e)}))},e.prototype.updateStreamExtraInfo=function(e,t,r,o){},e.prototype.setStreamExtraInfo=function(e,t,r,o){},e.prototype._publishTarget=function(e,t,r){},e.prototype.patchStreamList=function(e){var t=this;if("number"==typeof e.body.StreamRefresh&&0!==e.body.StreamRefresh)return this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" stream refresh "),void this.fetchStreamList();e.body.stream_seq===this.streamSeq||this.streamSeqMergeMap||(this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" call update stream "+this.streamSeq+" server "+e.body.stream_seq),this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.streamListHBMergeInterval)),this.minStreamSeq=e.body.stream_seq},e.prototype.getStreamSeq=function(){return this.streamSeq},e.prototype.mergeStreamByStreamSeq=function(e,t,r){var o=this;this.streamSeqMergeMap||(this.logger.warn(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" new merge stream list "+this.streamSeq+" server "+t),this.streamSeqMergeMap={},this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){o.handleMergeTimeout()}),this.streamListMergeInterval)),this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" ".concat(this.streamSeqMergeMap," ").concat(e," ").concat(t," ").concat(r)),this.streamSeqMergeMap[t]={cmd:e,streamList:r}},e.prototype.handleMergeTimeout=function(){if(this.streamSeqMergeMap){var e=Object.keys(this.streamSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));e[e.length-1]-e[0]+1===e.length||e[e.length-1]>=this.minStreamSeq?this.mergeStream(e):(this.streamSeqMergeMap=null,this.fetchStreamList())}},e.prototype.mergeStream=function(e){var t=this;this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" merge streamList "+this.streamSeq+" streamSeqList "+e.join(","));var r=e[e.length-1],n=[];e.forEach((function(e){if(t.streamSeqMergeMap&&t.streamSeqMergeMap[e])switch(t.streamSeqMergeMap[e].cmd){case o.ENUM_STREAM_UPDATE_CMD.added:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=n.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&n.splice(t),n.push(e)}));break;case o.ENUM_STREAM_UPDATE_CMD.deleted:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=n.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&n.splice(t)}));break;case o.ENUM_STREAM_UPDATE_CMD.updated:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=n.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&n.splice(t),n.push(e)}))}})),this.streamSeqMergeMap=null,this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" "+n),this.handleFullUpdateStream(r,n)},e.prototype.reset=function(){this.minStreamSeq=0,this.streamSeqMergeMap=null,this.streamSeqMergeTimer&&(clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=void 0),this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3},e}();t.StreamHandler=c},6706:function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_DISPATCH_TYPE=t.ENUM_BROADCASTER_STATUS=t.ENUM_PLAY_SOURCE_TYPE=t.ENUM_PUBLISH_STATE_NEGO=t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=t.QUALITYLEVEL=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD_PRI=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.STREAM_DELETE_REASON=t.ENUM_NETWORK_STATE=t.USER_RUN_STATE=t.ENUM_RUN_STATE=t.ENUM_STREAM_UPDATE_TYPE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.ENUM_PUBLISH_STREAM_STATE=t.MAX_RETRY_CONNECT_INTERVAL=t.MAX_TRANS_DATA_LENGTH=t.MAX_TRANS_TYPE_LENGTH=t.MAX_MIX_TASK_ID_LENGTH=t.MAX_MESSAGE_LENGTH=t.MAX_ROOM_ID_LENGTH=t.MAX_USER_NAME_LENGTH=t.MAX_USER_ID_LENGTH=t.MAX_STREAM_ID_LENGTH=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.streamMap=t.ENUM_CONNECT_STATE=t.ProtocolType=t.SignalResourceType=t.ENUM_PROBE_STATE=t.ENUM_PLAY_STATE_NEGO=t.ENUM_PLAYER_STATE=t.ENUM_PLAY_STATE=t.ENUM_PUBLISH_STATE=t.ENUM_SCREEM_RESOLUTION_TYPE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.ERROR_CODES=t.ENUM_REMOTE_TYPE=t.LOG_LEVEL=t.ENUM_LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.ZReporter=t.BusinessService=t.NetConnection=t.ZegoExpressWebRTM=t.ZegoDataReport=t.ZegoLogger=t.ZegoExpressWebRTMEngine=t.getReportSeq=t.getSeq=t.EncodecSelectionModeType=t.H264ProfileType=t.TRACER_LEVEL=t.ZegoScenario=t.ResourceMode=t.PlayMode=t.ZegoSEIType=t.QUALITY_CONSTANT=t.QualityGrade=t.REPORT_ACTION=t.ENUM_RETRY_STATE=t.ENUM_PLAY_STATE_UPDATE=t.ENUM_PUBLISH_STATE_UPDATE=t.LinkedList=t.ListNode=t.E_CLIENT_TYPE=t.ENUM_SOURCE_TYPE=void 0,t.PROTO_VERSION="2.21.0",t.ROOMVERSION="V1",function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={})),t.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152,FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={})),t.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},t.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1500},HIGH:{frameRate:5,bitRate:2e3}},t.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},t.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},t.ENUM_PLAYER_STATE={start:0,playing:1,stop:2},t.ENUM_PLAY_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(e){e[e.tryProbe=0]="tryProbe",e[e.probed=2]="probed"}(t.ENUM_PROBE_STATE||(t.ENUM_PROBE_STATE={})),function(e){e[e.CDN=0]="CDN",e[e.RTC=1]="RTC",e[e.L3=2]="L3",e[e.DG=3]="DG"}(t.SignalResourceType||(t.SignalResourceType={})),function(e){e[e.UDP=0]="UDP",e[e.RTMP=1]="RTMP",e[e.FLV=2]="FLV",e[e.HLS=3]="HLS",e[e.WEBRTC=4]="WEBRTC"}(t.ProtocolType||(t.ProtocolType={})),t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.streamMap={"/lr/push/stream_add":12001,"/lr/push/stream_delete":12002,"/lr/push/stream_update":12003},t.MAX_TRY_CONNECT_COUNT=3,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.MAX_STREAM_ID_LENGTH=256,t.MAX_USER_ID_LENGTH=64,t.MAX_USER_NAME_LENGTH=256,t.MAX_ROOM_ID_LENGTH=128,t.MAX_MESSAGE_LENGTH=1024,t.MAX_MIX_TASK_ID_LENGTH=256,t.MAX_TRANS_TYPE_LENGTH=128,t.MAX_TRANS_DATA_LENGTH=4096,t.MAX_RETRY_CONNECT_INTERVAL=12,t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_STREAM_UPDATE_TYPE={added:1,deleted:0},function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={})),function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login",e[e.reconnect=3]="reconnect"}(t.USER_RUN_STATE||(t.USER_RUN_STATE={})),function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={})),t.STREAM_DELETE_REASON={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}},function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CDN=1]="CDN",e[e.RTC=2]="RTC",e[e.L3=3]="L3"}(o||(o={})),t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.ENUM_STREAM_UPDATE_CMD_PRI={added:1,updated:2,deleted:3},t.SERVER_ERROR_CODE=1e4,function(e){e[e.low=1]="low",e[e.stantard=2]="stantard",e[e.hight=3]="hight",e[e.custome=4]="custome"}(t.QUALITYLEVEL||(t.QUALITYLEVEL={})),t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},t.ENUM_PUBLISH_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra"}(t.ENUM_PLAY_SOURCE_TYPE||(t.ENUM_PLAY_SOURCE_TYPE={})),function(e){e[e.stop=0]="stop",e[e.start=1]="start"}(t.ENUM_BROADCASTER_STATUS||(t.ENUM_BROADCASTER_STATUS={})),function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra",e[e.customUrl=2]="customUrl"}(t.ENUM_DISPATCH_TYPE||(t.ENUM_DISPATCH_TYPE={})),function(e){e[e.CDN=0]="CDN",e[e.BGP=1]="BGP"}(t.ENUM_SOURCE_TYPE||(t.ENUM_SOURCE_TYPE={})),function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}));var n=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=n;var i=function(){function e(){this.start=new n,this.end=new n,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var r=new n(this._idCounter,t);return r.next=e,r.prev=e.prev,e.prev&&(e.prev.next=r),e.prev=r,++this._idCounter,++this._numNodes,r},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(e>=0)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,r=!1,o=null;t.hasNext()&&!r;)e(t=t.next)&&(o=t,r=!0);return o},e.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this.insertBefore(this._numNodes>0?this.start.next:this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=i,t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2,stop:3},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},function(e){e[e.Unknown=-1]="Unknown",e[e.Excellent=0]="Excellent",e[e.Good=1]="Good",e[e.Middle=2]="Middle",e[e.Poor=3]="Poor",e[e.Die=4]="Die"}(t.QualityGrade||(t.QualityGrade={})),function(e){e[e.MinQuality=0]="MinQuality",e[e.DieQuality=0]="DieQuality",e[e.PoorMinQuality=1]="PoorMinQuality",e[e.MiddleMinQuality=30]="MiddleMinQuality",e[e.GoodMinQuality=60]="GoodMinQuality",e[e.ExcellentMinQuality=85]="ExcellentMinQuality",e[e.MaxQuality=100]="MaxQuality"}(t.QUALITY_CONSTANT||(t.QUALITY_CONSTANT={})),function(e){e[e.ZegoDefined=0]="ZegoDefined",e[e.UserUnregister=1]="UserUnregister"}(t.ZegoSEIType||(t.ZegoSEIType={})),function(e){e[e.CDN=0]="CDN",e[e.L3=1]="L3"}(t.PlayMode||(t.PlayMode={})),function(e){e[e.RTC=0]="RTC",e[e.CDN=1]="CDN",e[e.L3=2]="L3",e[e.DG=3]="DG"}(t.ResourceMode||(t.ResourceMode={})),function(e){e[e.Default=3]="Default",e[e.StandardVideoCall=4]="StandardVideoCall",e[e.HighVideoCall=5]="HighVideoCall",e[e.StandardChatroom=6]="StandardChatroom",e[e.HighQualityChatroom=7]="HighQualityChatroom",e[e.Broadcast=8]="Broadcast"}(t.ZegoScenario||(t.ZegoScenario={})),function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(t.TRACER_LEVEL||(t.TRACER_LEVEL={})),function(e){e[e.BASE_LINE=1]="BASE_LINE",e[e.MAIN=2]="MAIN",e[e.HIGH=3]="HIGH"}(t.H264ProfileType||(t.H264ProfileType={})),function(e){e.ONLY_BASELINE="only_baseline",e.HARD_SOFT_ENCODEC_FIRST="hard_or_soft_encodec_first"}(t.EncodecSelectionModeType||(t.EncodecSelectionModeType={}));var s=r(4119);Object.defineProperty(t,"getSeq",{enumerable:!0,get:function(){return s.getSeq}}),Object.defineProperty(t,"getReportSeq",{enumerable:!0,get:function(){return s.getReportSeq}}),Object.defineProperty(t,"ZegoExpressWebRTMEngine",{enumerable:!0,get:function(){return s.ZegoExpressWebRTMEngine}}),Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return s.ZegoDataReport}}),Object.defineProperty(t,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return s.ZegoExpressWebRTM}}),Object.defineProperty(t,"NetConnection",{enumerable:!0,get:function(){return s.NetConnection}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return s.BusinessService}}),Object.defineProperty(t,"ZReporter",{enumerable:!0,get:function(){return s.ZReporter}})},2752:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},STREAMID_TOO_LONG:{code:1000014,message:"stream ID is too long"},STREAM_ID_NULL:{code:1000015,message:"streamID is empty"},STREAM_ID_INVALID_CHARACTER:{code:1000016,message:"stream ID contains illegal characters"},NETWORK_BROKEN:{code:1000017,message:"network is broken"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,message:"init sdk wrong"},WX_GET_SETTING_FAIL:{code:1101001,message:"wx get setting fail"},GET_CONFIG_FAIL:{code:1101002,message:"get app config fail"},MODULE_NOT_IMPORTED:{code:1101003,message:"Module not imported"},RTC_LOGIN_ERROR:{code:1101004,message:"signal login fail"},RTC_HB_ERROR:{code:1101005,message:"signal hb fail"},USER_ID_NULL:{code:1002005,message:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,message:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,message:"user ID is too long"},USER_NAME_NULL:{code:1002008,message:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,message:"username is too long"},ROOM_ID_NULL:{code:1002011,message:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,message:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,message:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,message:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,message:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,message:"kickout may be the same user ID login other"},ROOM_RETRY_TIMEOUT:{code:1002053,message:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,message:"server has sent a signal to kick out"},ROOM_INNER_ERROR:{code:1002099,message:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,message:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,message:"parse json error."},LOGIN_PROCESSING:{code:1102012,message:"login is processing."},LIVEROOM_REQUEST_ERROR:{code:1102013,message:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,message:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,message:"user login state is wrong."},TOKEN_ERROR:{code:1102016,message:"token error"},DISPATCH_ERROR:{code:1102017,message:"dispatch error"},TOKEN_EXPIRED:{code:1102018,message:"token expired"},SUBCMD_ERROR:{code:1102019,message:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,message:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},DISPATCH_TIMEOUT:{code:1102022,message:"dispatch request timeout"},CONNECT_FAILED:{code:1102023,message:"connect signal fail"},PUBLISHER_MEDIA_SERVER_FORBID:{code:1003025,message:"stream is forbided by media server"},PUBLISHER_EXTRA_INFO_TOO_LONG:{code:1003051,message:"stream extra info is too long"},PUBLISHER_PARAM:{code:1103001,message:"input param error"},PUBLISHER_BROWSER_NOT_SUPPORT:{code:1103002,message:"browser do not support"},PUBLISHER_DISPATCH_FAIL:{code:1103003,message:"dispatch request error"},PUBLISHER_SCREEN_FAILED:{code:1103010,message:"screen fail"},ENUMERATE_DEVICES_FAIL:{code:1103011,message:"enumerate devices fail"},PUBLISHER_DISPATCH_REQUEST_FAIL:{code:1103020,message:"dispatch request fail"},PUBLISHER_SESSION_REQUEST_FAIL:{code:1103021,message:"session request fail"},PUBLISHER_CREATE_OFFER_ERROR:{code:1103022,message:"create offer error"},PUBLISHER_SET_LOCAL_DESC_ERROR:{code:1103023,message:"setLocalDescription error"},PUBLISHER_MEDIA_DESC_ERROR:{code:1103024,message:"mediaDesc error"},PUBLISHER_SET_REMOTE_DESC_ERROR:{code:1103025,message:"other side offer error"},PUBLISHER_CANDIDATE_ERROR:{code:1103026,message:"candidate error"},PUBLISHER_SESSION_CLOSED:{code:1103027,message:"server session closed"},PUBLISHER_MEDIA_CONNECTION_ERROR:{code:1103028,message:"ice connection error"},PUBLISHER_SERVER_NEGO_TIMEOUT:{code:1103030,message:"negotiation timeout"},PUBLISH_DEVICE_OUT_ERR:{code:1103041,message:"device change "},PUBLISH_SCREEN_CANCELED:{code:1103042,message:"screen canceled"},PUBLISH_SCREEN_NOT_SUPPORT:{code:1103043,message:"screen not support"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},REPEATED_PULL:{code:1103049,message:"repeated pull same stream"},PUBLISHER_WEBSOCKET_DISCONNECTED:{code:1103050,message:"websocket disconnected"},PUBLISHER_RETRY_TIMEOUT:{code:1103051,message:"publisher retry timeout"},PUBLISHER_HTTPS_REQUIRED:{code:1103053,message:"https is required"},PUBLISHER_NO_PREVIEW:{code:1103054,message:"no preview"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISHER_IS_PUBLISHING:{code:1103056,message:"publish is publishing"},PUBLISHER_CLIENT_IP_CHANGED:{code:1103058,message:"client ip changed"},PUBLISHER_TTL_OVERTIME:{code:1103059,message:"ttl over time"},PUBLISHER_SESSION_TIMEOUT:{code:1103060,message:"session request timeout"},PUBLISHER_GET_USER_MEDIA_FAIL:{code:1103061,message:"get media fail"},PUBLISHER_DEVICE_NO_ALLOWED:{code:1103064,message:"get device not allowed"},PUBLISHER_DEVICE_NO_READABLE:{code:1103065,message:"device is not readable"},PUBLISHER_OVER_CONSTRAINED:{code:1103066,message:"device does not meet constraints"},PUBLISHER_UPDATE_SDP_TIMEOUT:{code:1103067,message:"update sdp time out"},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},VIDEO_EFFECT_IS_STARTING:{code:1103073,message:"video effect is starting, please operate after video effect is started"},PUBLISHER_NET_PROBE_POOR:{code:1103069,message:"publish stream poor and net probe poor"},PLAYER_PARAM:{code:1104001,message:"input parm error"},PLAYER_DISPATCH_REQUEST_FAIL:{code:1104020,message:"dispatch request fail"},PLAYER_SESSION_REQUEST_FAIL:{code:1104021,message:"session request fail"},PLAYER_CREATE_OFFER_ERROR:{code:1104022,message:"create offer error"},PLAYER_SET_LOCAL_DESC_ERROR:{code:1104023,message:"setLocalDescription error"},PLAYER_MEDIA_DESC_ERROR:{code:1104024,message:"mediaDesc error"},PLAYER_SET_REMOTE_DESC_ERROR:{code:1104025,message:"other side offer error"},PLAYER_CANDIDATE_ERROR:{code:1104026,message:"candidate error"},PLAYER_SESSION_CLOSED:{code:1104027,message:"server session closed"},PLAYER_MEDIA_CONNECTION_ERROR:{code:1104028,message:"ice connection error"},PLAYER_WEBSOCKET_DISCONNECTED:{code:1104029,message:"websocket disconnected"},PLAYER_SERVER_NEGO_TIMEOUT:{code:1104030,message:"negotiation timeout"},PLAYER_RETRY_TIMEOUT:{code:1104031,message:"player retry timeout"},PLAYER_IS_PLAYING:{code:1104032,message:"player is playing"},PLAYER_CLIENT_IP_CHANGED:{code:1104033,message:"client ip changed"},PLAYER_TTL_OVERTIME:{code:1104034,message:"ttl is over time"},PLAYER_SESSION_RESET:{code:1104035,message:"reset session push"},PLAYER_SESSION_TIMEOUT:{code:1104036,message:"session request timeout"},PLAYER_PROBE_TIMEOUT:{code:1104037,message:"probe time out"},PLAYER_UNSUPPORTED_PROTOCOL:{code:1104038,message:"resource mode is not supported"},PLAYER_STREAM_NOT_EXIST:{code:1104039,message:"play stream not found"},PLAYER_NET_PROBE_POOR:{code:1103040,message:"publish stream poor and net probe poor"},DEVICE_ERROR_TYPE_UNPLUGGED:{code:1006006,message:"the device is unplugged"},IM_CONTENT_NULL:{code:1009001,message:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,message:"message content is too long"},IM_SEND_FAILED:{code:1009010,message:"failed to send message"},FREQ_LIMITED:{code:1109001,message:"frequency limited."},SET_ROOM_SCENARIO:{code:1000067,message:"Logged in room, setting scenario is not supported"}}},3529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWechatLogEvent=t.ZegoRTCLogEvent=void 0;var o=r(2752),n=function(e){return e},i=function(e){return e},s=function(e){return e},a=function(e){return e},c=function(e){return e};t.ZegoRTCLogEvent={kZMInitSetting:{event:"/sdk/init",error:{kInvalidParamError:o.errorCodeList.INPUT_PARAM},system_info:i,servers:s},kZegoTaskRoom:{event:"room"},kZMLoginRoom:{event:"/sdk/login"},kZegoTaskListener:{event:"listener"},kZegoTaskOnListener:{event:"/sdk/on_listener",listener:i,error:{INPUT_PARAM:o.errorCodeList.INPUT_PARAM}},kZegoTaskOffListener:{event:"/sdk/off_listener",listener:i,error:{INPUT_PARAM:o.errorCodeList.INPUT_PARAM}},kZegoTaskRoomContext:{event:"room_context"},kZegoTaskInitSetting:{event:"/sdk/init"},kZegoTaskCreateStream:{event:"/sdk/create_stream",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kParamError:o.errorCodeList.PUBLISHER_PARAM,kScreenCancelError:o.errorCodeList.PUBLISH_SCREEN_CANCELED,kScreenFailedError:o.errorCodeList.PUBLISHER_SCREEN_FAILED,kScreenNotSupportError:o.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT,kHttpsRequiredError:o.errorCodeList.PUBLISHER_HTTPS_REQUIRED,kGetUserMediaError:o.errorCodeList.PUBLISHER_GET_USER_MEDIA_FAIL,kDeviceNoAllowedError:o.errorCodeList.PUBLISHER_DEVICE_NO_ALLOWED,kDeviceNoReadableError:o.errorCodeList.PUBLISHER_DEVICE_NO_READABLE,kDeviceOverConstrainedError:o.errorCodeList.PUBLISHER_OVER_CONSTRAINED},stream_type:i,screen:n,camera:n,custom:n,preview_conf:n,media_stream_id:i},kZegoTaskPublishStart:{event:"/sdk/start_publish",error:{kPublishParamError:o.errorCodeList.PUBLISHER_PARAM,kPublishNetworkTimeoutError:o.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:o.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:o.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:o.errorCodeList.NETWORK_BROKEN,kPublishNoPreviewError:o.errorCodeList.PUBLISH_NO_PREVIEW,kPublishEffectIsStarting:o.errorCodeList.VIDEO_EFFECT_IS_STARTING,kPublishNoLoginError:o.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:o.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kMediaServerForbidError:o.errorCodeList.PUBLISHER_MEDIA_SERVER_FORBID,kPublishTokenExpiredError:o.errorCodeList.TOKEN_EXPIRED,kPublishSessionClosedError:o.errorCodeList.PUBLISHER_SESSION_CLOSED,kPublishNegoTimeoutError:o.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT,kCreateOfferError:o.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR,kSetLocalDescError:o.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR,kSessionTimeoutError:o.errorCodeList.PUBLISHER_SESSION_TIMEOUT,kSessionRequestError:o.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL,kSetRemoteDescError:o.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:o.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:o.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED,kMediaDescError:o.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR,kCandidateError:o.errorCodeList.PUBLISHER_CANDIDATE_ERROR,kIsPublishing:o.errorCodeList.PUBLISHER_IS_PUBLISHING,kClientIPChangedError:o.errorCodeList.PUBLISHER_CLIENT_IP_CHANGED,kTTLOverTimeError:o.errorCodeList.PUBLISHER_TTL_OVERTIME,kUpdateMediaDescriptionTimeOut:o.errorCodeList.PUBLISHER_UPDATE_SDP_TIMEOUT,kUpdateMediaDescriptionError:o.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL,kPublishNetProbePoor:o.errorCodeList.PUBLISHER_NET_PROBE_POOR},urls:s,is_center:c,server_url:i,publish_option:n,message:i,stream_id:i,stream_sid:a,room_id:i,video_en_codec_id:a,cap_w:a,cap_h:a,w:a,h:a,video_en_fps:a,video_en_bps:a,audio_c_channel_count:a,audio_en_bps:a,aec_level:a,ans_level:a,agc:c,enable_camera:c,enable_mic:c,video_activate:c,audio_activate:c,gw_version:a,use_na:a},kZegoStartPublish:{event:"/publish/start",is_peer:c,reason:i,url:i,ip:i,peer_id:a,source_type:i,net_protocol:i,wait_consume:a,dispatch_consume:a,signal_consume:a,is_center:c},kZegoRePublish:{event:"/publish/restart",stream_id:i,server_url:i,reason_code:a},kZegoTaskRePublish:{event:"/sdk/republish"},kZegoTaskSDKPublishStream:{event:"/sdk/publish",room_id:i,room_sid_string:i,retry_btime:a,max_retry_interval:a,fail_cnt:a,continuous_fail_cnt:a,probe_ip_cnt:a,valid_probe_ip_cnt:a,poor_quality_retry_cnt:a,use_resource_type:s,probe_not_trigger_retry_info:n,stop_reason:i,try_cnt:a,server_url:i,publish_begin_time:a,publish_state_time:a,bitrate:a,h:a,w:a,cap_w:a,cap_h:a,fps:a,use_na:a,env:a,webrtc_sid:a,stream_id:i,itemtype:i},kZegoTaskVideoCaptureSize:{event:"/sdk/api/publish_video_c_size",webrtc_sid:a,w:a,h:a},kZegoTaskVideoPlaySize:{event:"/sdk/play_video_size_changed",webrtc_sid:a,w:a,h:a},kZegoTaskRTCPublish:{event:"/rtc/publish",tryidx:a,url:i,ip:i,net_protocol:i,lsttime:a,denied_info:i,dispatch_external_ip:i,total_stat:n,room_id:i,room_sid_string:i,resource_type:i,protocol:i,stop_reason:i},kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:o.errorCodeList.PUBLISHER_PARAM},stream_id:i,stream_sid:a},kZegoTaskPublishStreamStateError:{event:"/rtc/publish_stream_state_error"},kZegoTaskPlayStart:{event:"/sdk/start_play",error:{kStreamIDNullError:o.errorCodeList.STREAM_ID_NULL,kPlayParamError:o.errorCodeList.PLAYER_PARAM,kPlayStreamIDToLongError:o.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:o.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:o.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:o.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:o.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:o.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:o.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:o.errorCodeList.NETWORK_BROKEN,kPlayUnsupportedResourceMode:o.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL,kPlayStreamNotFound:o.errorCodeList.PLAYER_STREAM_NOT_EXIST,kPlayRetryTimeoutError:o.errorCodeList.PLAYER_RETRY_TIMEOUT,kPlaySessionClosedError:o.errorCodeList.PLAYER_SESSION_CLOSED,kPlaySessionResetError:o.errorCodeList.PLAYER_SESSION_RESET,kPlayNegoTimeoutError:o.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT,kCreateOfferError:o.errorCodeList.PLAYER_CREATE_OFFER_ERROR,kSetLocalDescError:o.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR,kSessionRequestError:o.errorCodeList.PLAYER_SESSION_REQUEST_FAIL,kSessionTimeoutError:o.errorCodeList.PLAYER_SESSION_TIMEOUT,kSetRemoteDescError:o.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:o.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:o.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED,kCandidateError:o.errorCodeList.PLAYER_CANDIDATE_ERROR,kMediaDescError:o.errorCodeList.PLAYER_MEDIA_DESC_ERROR,kIsPlaying:o.errorCodeList.PLAYER_IS_PLAYING,kClientIPChangedError:o.errorCodeList.PLAYER_CLIENT_IP_CHANGED,kTTLOverTimeError:o.errorCodeList.PLAYER_TTL_OVERTIME,kProbeTimeOutError:o.errorCodeList.PLAYER_PROBE_TIMEOUT,kPlayNetProbePoor:o.errorCodeList.PLAYER_NET_PROBE_POOR},room_id:i,urls:s,is_center:c,server_url:i,video_layer:a,play_option:n,message:i,stream_id:i,stream_sid:a,resource_mode:a,src:i,video_codec_id:i,room_sid_string:i,is_multi:c,audio_activate:c,video_activate:c,gw_version:a,use_na:a,biz_product:a},kZegoStartPlay:{event:"/play/start",is_peer:c,reason:i,url:i,ip:i,peer_id:a,source_type:i,net_protocol:i,wait_consume:a,dispatch_consume:a,signal_consume:a,is_center:c},kZegoRePlay:{event:"/play/restart",stream_id:i,server_url:i,reason_code:a},kZegoTaskSDKPlayStream:{event:"/sdk/play",audio_cumulative_break_time:a,audio_cumulative_decode_time:a,video_cumulative_break_time:a,video_cumulative_decode_time:a,l3_a_break_time:a,l3_a_decode_time:a,l3_v_break_time:a,l3_v_decode_time:a,rtc_a_break_time:a,rtc_a_decode_time:a,rtc_v_break_time:a,rtc_v_decode_time:a,fft_audio:a,fft_video:a,room_id:i,room_sid_string:i,retry_btime:a,max_retry_interval:a,use_na:a,fail_cnt:a,continuous_fail_cnt:a,probe_ip_cnt:a,valid_probe_ip_cnt:a,poor_quality_retry_cnt:a,probe_not_trigger_retry_info:n,use_resource_type:s,stop_reason:i,try_cnt:a,webrtc_sid:a,itemtype:i,server_url:i,play_begin_time:a,play_state_time:a,play_state_cnt:a,first_frame_time:a,protocol:i,dispatch_external_ip:i,total_stat:n,w:a,h:a,abrc:a,vbrc:a,vinfo:n},kZegoTaskStreamPlay:{event:"/rtc/play",tryidx:a,url:i,ip:i,stream_id:i,room_id:i,room_sid_string:i,net_protocol:i,lsttime:a,denied_info:i,stop_reason:i,dispatch_external_ip:i,env:a,resource_type:i,protocol:i,total_stat:n,vinfo:n},kZegoTaskRePlay:{event:"/sdk/replay",stream_id:i,server_url:i,reason_code:a},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:o.errorCodeList.PUBLISHER_PARAM},stream_id:i,webrtc_sid:a,stream_sid:a,biz_product:a},kZegoTaskPlayStreamStateError:{event:"/rtc/play_stream_state_error"},kZegoTaskEnumDevices:{event:"/device/list",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:o.errorCodeList.ENUMERATE_DEVICES_FAIL},dev_list:n,dev_kind:i},kZegoTaskDeviceInterrupt:{event:"/device/interrupt",error:{kBrowserNotSupportError:o.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:o.errorCodeList.ENUMERATE_DEVICES_FAIL},interrupt:a,device:i,device_name:i},kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",capability:n},kZegoTaskRemoteCameraUpdate:{event:"/sdk/remote_camera_update",stream_id:i,camera_status:i,status_code:a},kZegoTaskRemoteMicUpdate:{event:"/sdk/remote_mic_update",stream_id:i,mic_status:i,status_code:a},kZegoTaskDestroyStream:{event:"/sdk/destroy_stream",error:{kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG},stop_reason:i},kZegoTaskAudioOutputChanged:{event:"/device/api/audio_output",device:i,device_name:i,reason_type:i},kZegoTaskLiveRoomRecvStreamUpdateInfo:{event:"/liveroom/recv_stream_update_info",stream_update_type:i,stream_seq:a,stream_list:n,error:{ROOM_NOT_EXIST:o.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendStreamUpdateInfo:{event:"/liveroom/send_stream_update_info",stream_update_type:i,stream_extra_info:i,stream_id:i,svr_env:i,send_seq:a,use_na:a},kZegoTaskLiveRoomGetCurrentStreamList:{event:"/liveroom/get_current_stream_list",room_id:i,room_sid_string:i,stream_seq:a,stream_size:a,stream_list:n,use_ua:a,error:{kParamError:o.errorCodeList.PUBLISHER_PARAM,NOT_LOGIN:o.errorCodeList.NOT_LOGIN}},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:n},kZegoTaskPlayDecodeFirstVideoFrame:{event:"/sdk/net_first_video_frame",webrtc_sid:a,fft_consumed:n,resource_type:i,protocol:i,biz_product:a},kZegoAppLifeCycle:{event:"/app/lifecycle",state:i},kZegoSetCaptureVolume:{event:"/sdk/set_capture_volume",error:{kParamError:o.errorCodeList.INPUT_PARAM}},kZegoListener:{event:"/sdk/listener"},kZegoNetProbe:{event:"/sdk/net_probe",net_quality:a,node_list:s},kZegoNetProbeResult:{event:"/sdk/net_probe_result",is_switch:c,is_publish:c,stream_id:i,result:a,node:i,net_quality:a,probe_net_quality:a},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache",files:n},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"},kZegoTaskCDNPlay:{event:"/cdn/play",protocol:i,tryidx:a,url:i,stop_reason:i,biz_product:a},kZegoTaskL3Play:{event:"/l3/play",protocol:i,tryidx:a,url:i,stop_reason:i,biz_product:a},kZegoTaskSrcChange:{event:"/sdk/play_src_changed",last_src:i,src:i,biz_product:a},kZegoPublishStreamResource:{event:"/publish/stream_resource",urls:s,try_cnt:a,is_center:c},kZegoPublishServerConnect:{event:"/publish/server_connect",server_url:i,stream_type:i},kZegoPublishCreateOffer:{event:"/publish/create_offer",sdp:i,stream_type:i},kZegoPublishSetLocalSdp:{event:"/publish/set_local_sdp",sdp:i,stream_type:i},kZegoPublishCreateSession:{event:"/publish/create_session",sdp:i,gw_nodes:s,gw_nodes_ttl:a,gw_version:a,webrtc_sid:a},kZegoPublishSetRemoteSdp:{event:"/publish/set_remote_sdp",sdp:i,webrtc_sid:a},kZegoPublishIceConnected:{event:"/publish/ice_connected",webrtc_sid:a},kZegoRTCPublishEvent:{event:"/publish/rtc_publish_event",event_state:a,webrtc_sid:a},kZegoRTCPlayEvent:{event:"/rtc/play_event_message",event_state:a,webrtc_sid:a},kZegoRTCRecvCloseSession:{event:"/rtc/recv_close_session",err_info:n},kZegoRTCRecvResetSession:{event:"/rtc/recv_reset_session"},kZegoRTCIceStateChanged:{event:"/rtc/ice_connection_state_changed",ice_state:i},kZegoPublishSendMediaDesc:{event:"/publish/send_media_desc",webrtc_sid:a},kZegoPublishRecvMediaDesc:{event:"/publish/recv_media_desc",sdp:i},kZegoPublishSendIceCandidate:{event:"/publish/send_ice_candidate",candidate_info:n},kZegoPublishRecvIceCandidate:{event:"/publish/recv_ice_candidate",candidate_info:n},kZegoRTCHB:{event:"/rtc/hb",error:{RTC_HB_ERROR:o.errorCodeList.RTC_HB_ERROR}},kZCRecvRemoteStream:{event:"/rtc/recv_remote_stream"},kZegoPlayStreamResource:{event:"/play/stream_resource",urls:s,try_cnt:a,is_center:c},kZegoPlayServerConnect:{event:"/play/server_connect",server_url:i,stream_type:i},kZegoPlayCreateOffer:{event:"/play/create_offer",sdp:i,stream_type:i},kZegoPlaySetLocalSdp:{event:"/play/set_local_sdp",sdp:i,stream_type:i},kZegoPlayCreateSession:{event:"/play/create_session",sdp:i,gw_nodes:s,gw_nodes_ttl:a,gw_version:a,webrtc_sid:a},kZegoPlaySetRemoteSdp:{event:"/play/set_remote_sdp",sdp:i,webrtc_sid:a},kZegoPlayIceConnected:{event:"/play/ice_connected",webrtc_sid:a},kZegoPlaySendMediaDesc:{event:"/play/send_media_desc",webrtc_sid:a},kZegoPlayRecvMediaDesc:{event:"/play/recv_media_desc",sdp:i},kZegoPlaySendIceCandidate:{event:"/play/send_ice_candidate",candidate_info:n},kZegoPlayRecvIceCandidate:{event:"/play/recv_ice_candidate",candidate_info:n},kZegoConnConnect:{event:"/zegoconn/connect"},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",service_no:a,proxy_link_sources:a,recv_time:a,connect_stream:a},kZegoSDKProxyBroken:{event:"/zegoconn/proxy_broken",service_no:a},kZegoSDKProxyDisconnect:{event:"/zegoconn/proxy_disconnect",service_no:a}},t.ZegoWechatLogEvent={kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",error:{kCheckSystemGetSettingFailError:o.errorCodeList.WX_GET_SETTING_FAIL},capability:n},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishStreamIDNullError:o.errorCodeList.STREAM_ID_NULL,kPublishParamError:o.errorCodeList.PUBLISHER_PARAM,kPublishStreamIDTooLongError:o.errorCodeList.STREAMID_TOO_LONG,kPublishStreamIDInvalidCharacterError:o.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPublishNetworkTimeoutError:o.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:o.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:o.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:o.errorCodeList.NETWORK_BROKEN,kPublishNoLoginError:o.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:o.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kIsPublishing:o.errorCodeList.PUBLISHER_IS_PUBLISHING},publishOption:n,stream:n,message:n},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kPlayStreamIDNullError:o.errorCodeList.STREAM_ID_NULL,kPlayParamError:o.errorCodeList.PLAYER_PARAM,kPlayStreamIDTooLongError:o.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:o.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:o.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:o.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:o.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:o.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:o.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:o.errorCodeList.NETWORK_BROKEN,kPlayRetryTimeoutError:o.errorCodeList.PLAYER_RETRY_TIMEOUT,kIsPlaying:o.errorCodeList.PLAYER_IS_PLAYING},playOption:n,message:n,session_id:n,stream:n,audio_activate:n,video_activate:n},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskRePublish:"/sdk/republish",kZegoTaskRePlay:"/sdk/replay",kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:o.errorCodeList.PUBLISHER_PARAM},stream:n},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:o.errorCodeList.PUBLISHER_PARAM},stream:n},kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:n,update_stream:n},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:n}}},2367:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,function(e){e.SET_VIDEO_CONFIG="zc.svc",e.SET_AUDIO_CONFIG="zc.sac",e.REPLACE_TRACK="zc.rp",e.SET_BEAUTY_EFFECT="zc.sbe",e.ENABLE_STREAM="zc.es",e.ENABLE_MIC_ONLY="zc.emo",e.ACTIVATE_SEI_INSERT="zc.asi",e.MUTE_PUBLISH_STREAM_VIDEO="zc.mpsv.0",e.MUTE_PUBLISH_STREAM_AUDIO="zc.mpsa.0",e.MUTE_MIC="zc.mm",e.MUTE_PLAY_STREAM_VIDEO="zc.mpsv.1",e.MUTE_PLAY_STREAM_AUDIO="zc.mpsa.1",e.ADD_TRACK="zc.at",e.REMOVE_TRACK="zc.rt",e.HANDLE_TRACK="zc.ht"}(t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={}))},4495:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdvancedModule=t.TRACER_LEVEL=void 0;var s,a=r(2367),c=r(5098),u=r(8706),l=r(608);!function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(s=t.TRACER_LEVEL||(t.TRACER_LEVEL={}));var d=function(){function e(e,t,r,o){this.logger=e,this.dataReport=t,this.streamCenter=r,this.stateCenter=o,this.screenShotReady=!1}return e.prototype.setVideoConfig=function(e,t){var r=this;return this.logger.info(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" call"),new Promise((function(n,i){var s=u.ZegoRTCLogEvent.kZegoSetVideoConfig.error,c=s.kLocalStreamError,d=s.kParamError,h=r.getSpan(e,u.ZegoRTCLogEvent.kZegoSetVideoConfig.event),p=o({},t);t.width&&(p.width=JSON.stringify(t.width)),t.height&&(p.height=JSON.stringify(t.height)),t.frameRate&&(p.frameRate=JSON.stringify(t.frameRate)),h.setAttributes({video_params:u.ZegoRTCLogEvent.kZegoSetVideoConfig.video_params(p)});var f,_,g=function(e){r.stateCenter.reporter.setError(h,c,e)};if(!(e instanceof MediaStream))return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" localStream not found"),g("localStream not found"),void i({errorCode:d.code,extendedData:d.message+" localStream no found"});if(!t||"object"!=typeof t||0==Object.keys(t).length)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints wrong"),g("constraints wrong"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.width&&"number"==typeof t.width&&!r.stateCenter.checkValidNumber(t.width,0,7680))return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width integer number, range[0, 7680]"),g("constraints width integer number, range[1, 7680]"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.width&&"object"==typeof t.width){if(!(_=l.ClientUtil.checkConstraintExtendWithMessage(t.width,"width",0,7680)).result)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width: "+_.message),g("constraints width: "+_.message),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"})}else if(t.width&&"number"!=typeof t.width&&"object"!=typeof t.width)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width must be a number or an object. "),g("constraints width must be a number or an object."),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.height&&"number"==typeof t.height&&!r.stateCenter.checkValidNumber(t.height,0,4320))return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height integer number, range[0, 4320]"),g(" constraints height integer number, range[0, 4320]"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.height&&"object"==typeof t.height){if(!(_=l.ClientUtil.checkConstraintExtendWithMessage(t.height,"height",0,4320)).result)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height: "+_.message),g("constraints height: "+_.message),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"})}else if(t.height&&"number"!=typeof t.height&&"object"!=typeof t.height)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height must be a number or an object. "),g(" constraints height must be a number or an object."),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});return t.maxBitrate&&"number"!=typeof t.maxBitrate?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+(f=" constraints maxBitrate is not a number")),g(f),void i({errorCode:d.code,extendedData:d.message+f})):void 0!==t.frameRate&&"number"!=typeof t.frameRate&&"object"!=typeof t.frameRate?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+(f=" constraints frameRate is not a number or an object")),g(f),void i({errorCode:d.code,extendedData:d.message+f})):"number"!=typeof t.frameRate||t.frameRate>0&&t.frameRate%1==0?t.frameRate&&"object"==typeof t.frameRate&&!(_=l.ClientUtil.checkConstraintExtendWithMessage(t.frameRate,"frameRate")).result?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints frameRate: "+_.message),g("constraints frameRate: "+_.message),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"})):void r.setPublishStreamConstraints(e,t,h,(function(e){h.setAttributes({error:e.errorCode,message:e.extendedData}),h.end(),n(e)})):(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints frameRate must be positive integer number"),g("constraints frameRate must be positive integer number"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"}))}))},e.prototype.setAudioConfig=function(e,t){var r=this;return this.logger.info(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" call"),new Promise((function(o){var n=r.getSpan(e,u.ZegoRTCLogEvent.kZegoSetAudioConfig.event);return n.setAttributes({audio_params:u.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_params(t)}),e instanceof MediaStream?!t||"object"!=typeof t||0==Object.keys(t).length||void 0!==t.AEC&&"boolean"!=typeof t.AEC||void 0!==t.AGC&&"boolean"!=typeof t.AGC||void 0!==t.ANS&&"boolean"!=typeof t.ANS?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" constraints wrong"),r.stateCenter.reporter.setError(n,u.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError," constraints wrong"),void o({errorCode:u.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:u.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" constraints wrong"})):void r.setPublishStreamConstraints(e,t,n,(function(e){n.end(),o(e)})):(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" localStream not found"),r.stateCenter.reporter.setError(n,u.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kLocalStreamError),void o({errorCode:u.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:u.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" localStream no found"}))}))},e.prototype.enableStream=function(e,t){if(this.logger.info(a.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" call"),"boolean"!=typeof t.video&&"boolean"!=typeof t.audio)return this.logger.error(a.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" option error"),!1;var r=!0,o=!0;return"boolean"==typeof t.video&&(r=this.enableCamera(e,t.video,t.retain)),"boolean"==typeof t.audio&&(o=this.enableMicrophone(e,t.audio)),r&&o},e.prototype.enableMicrophoneOnly=function(e){if(this.logger.info(a.ZEGO_WEBRTC_ACTION.ENABLE_MIC_ONLY+" call"),"boolean"!=typeof e)return!1;for(var t=0;t<this.streamCenter.previewStreamList.length;t++)if(!this.streamCenter.previewStreamList[t].enableMicrophoneOnly(e,this.streamCenter))return this.logger.error("zsc.emo.0 previewer ".concat(t," change mic mute state failed")),!1;return this.streamCenter.isMicEnabled=e,!0},e.prototype.replaceTrack=function(e,t,r){return n(this,void 0,void 0,(function(){var o,n,s;return i(this,(function(i){return o=this.getSpan(e,u.ZegoRTCLogEvent.kZegoReplaceTrack.event),n=u.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError,e instanceof MediaStream?t&&t instanceof MediaStreamTrack?(s=this._replaceTrack(e,t,r),o.setAttributes({track_kind:u.ZegoRTCLogEvent.kZegoReplaceTrack.track_kind(t.kind)}),o.end(),[2,s]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" mediastream track no found"),this.stateCenter.reporter.setError(o,n,"mediastream track no found"),[2,{errorCode:n.code,extendedData:n.message+" mediastream track no found"}]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" localStream not found"),this.stateCenter.reporter.setError(o,n,"localStream not found"),[2,{errorCode:n.code,extendedData:n.message+" localStream no found"}])}))}))},e.prototype.setPublishStreamConstraints=function(e,t,r,o){var s=this;this.logger.info("zsc.spsc.0 constraints",JSON.stringify(t));var a=this.streamCenter.checkPreview(e);if(!a)return this.logger.error("zsc.spsc.0 preview no found"),void(o&&o({errorCode:c.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:c.errorCodeList.PUBLISH_NO_PREVIEW.message}));var l=a.videoTrack,d=a.audioTrack,h=!1,p=!1;l&&(t.width||t.height||t.frameRate||t.videoQuality)&&(t.videoQuality||(a.mediaStreamConfig.videoQuality=4),h=!0),void 0===t.ANS&&void 0===t.AGC&&void 0===t.AEC||(p=!0),h&&!l?(this.logger.error("zsc.spsc.0 video track not found"),o&&o({errorCode:c.errorCodeList.TRACK_NOT_FOUND.code,extendedData:c.errorCodeList.TRACK_NOT_FOUND.message})):t.video=!0,p&&!d?(this.logger.error("zsc.spsc.0 audio track not found"),o&&o({errorCode:c.errorCodeList.TRACK_NOT_FOUND.code,extendedData:c.errorCodeList.TRACK_NOT_FOUND.message})):t.audio=!0;var f,_=JSON.parse(JSON.stringify(a.mediaStreamConfig)),g=Object.assign(a.mediaStreamConfig,t);"screen"==a.previewType?(f=this.streamCenter.getScreenConstrains(g)).bitRate!==_.bitRate&&(t.maxBitrate=f.bitRate):f=a.getMediaStreamConstraints(g,!0),this.logger.info("zsc.spsc.0 applyConstraints ",JSON.stringify(f));var m=[];if(h&&l){var v={};Object.keys(f.video).forEach((function(e){v[e]=JSON.stringify(f.video[e])})),r.setAttributes({video_conf:u.ZegoRTCLogEvent.kZegoSetVideoConfig.video_conf(v)}),m.push(l.applyConstraints(f.video))}var y=!0;p&&(y=(null==d?void 0:d.enabled)||!1,r.setAttributes({audio_conf:u.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_conf(f.audio)}),null==d||d.stop(),m.push(navigator.mediaDevices.getUserMedia({video:!1,audio:f.audio})));var b=this.streamCenter.getPublishList(e);b.forEach((function(e){var r,o=null==e?void 0:e.publisher,n=(null===(r=null==o?void 0:o.peerConnection)||void 0===r?void 0:r.getSenders())||[];if(n.length>0&&t.maxBitrate){var i=n.filter((function(e){return e.track&&"video"===e.track.kind}));i||s.logger.error("zsc.spsc.0 video sender no found");var c=i.length>1?i[1]:i[0]?i[0]:null;if(c){var u=c.getParameters();u.encodings||(u.encodings=[{}]),u.encodings[0].maxBitrate=1e3*t.maxBitrate,m.push(c.setParameters(u))}else s.logger.error("zsc.spsc.0 video sender no found")}else t.maxBitrate&&(a.videoInfo.bitRate=t.maxBitrate)})),m.length>0?Promise.all(m).then((function(e){var r,n,i=e[1];if(p){var c=(n=h?e[1]:e[0]).getVideoTracks()[0];null==c||c.stop();var u=n.getAudioTracks()[0];u.enabled=y,i=JSON.stringify(u.getSettings()),a.replacePreviewTrack(u),a.gainNode||a.onAudioTrackChange(u)}if(t.maxBitrate&&(a.videoInfo.bitRate=t.maxBitrate,b.forEach((function(e){var r=null==e?void 0:e.publisher;r&&(r.videoInfo.bitRate=t.maxBitrate)}))),null===(r=null==f?void 0:f.video)||void 0===r?void 0:r.frameRate){var l=f.video.frameRate;a.videoInfo.frameRate=l,b.forEach((function(e){var t=null==e?void 0:e.publisher;t&&(t.videoInfo.frameRate=l)}))}s.logger.info("zsc.spsc.0 set constraints success",i),o&&o({errorCode:0,extendedData:""})})).catch((function(t){return n(s,void 0,void 0,(function(){var r,n,s,u,l=this;return i(this,(function(i){switch(i.label){case 0:return this.logger.error("zsc.spsc.0 fail reason ",t.name,t.toString()),p?(r=a.getMediaStreamConstraints(_),this.logger.info("zsc.spsc.0 oldMediaStreamConstraints ",JSON.stringify(r)),[4,navigator.mediaDevices.getUserMedia({video:!1,audio:r.audio}).catch((function(e){l.logger.error("zsc.spsc.0.1 setbackup fail "+e.name)}))]):[3,2];case 1:(n=i.sent())&&(null==(s=e.getVideoTracks()[0])||s.stop(),u=n.getAudioTracks()[0],a.replacePreviewTrack(u),a.gainNode||a.onAudioTrackChange(u)),this.logger.info("zsc.spsc.0.1 setbackup suc "),i.label=2;case 2:return o&&o({errorCode:c.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"".concat(t.name," ").concat(t.constraint?"constraint:"+t.constraint:"")}),[2]}}))}))})):(this.logger.warn("zsc.spsc.0 constaints is no changes"),o&&o({errorCode:c.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"constraints is no changes"}))},e.prototype.useVideoDevice=function(e,t){var r=this;return this.logger.info("zc.uvd.0 call"),new Promise((function(o){var n=r.getSpan(e,u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.event);if(n.setAttributes({device:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device(t)}),!(e instanceof MediaStream))return r.logger.error("zc.uvd.0 localStream not found"),r.stateCenter.reporter.setError(n,u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kLocalStreamError),void o({errorCode:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});if("string"!=typeof t)return r.logger.error("zc.uvd.0 deviceID must be string"),r.stateCenter.reporter.setError(n,u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError," deviceID must be string"),void o({errorCode:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});var i=function(t){n.setAttributes({error:t.errorCode,message:t.extendedData}),n.end(),r.streamCenter.getPublishList(e).forEach((function(e){var t,r;e.cameraLabel=(null===(r=null===(t=e.publisher.previewer)||void 0===t?void 0:t.videoTrack)||void 0===r?void 0:r.label)||e.cameraLabel})),o(t)};r.stateCenter.getDevices((function(o){var s=o.cameras.find((function(e){return e.deviceID==t}));if(!s)return r.logger.error("zc.uvd.0 device is not found"),void i({errorCode:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.code,extendedData:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.message});n.setAttributes({device_name:u.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device_name(null==s?void 0:s.deviceName)}),r.switchDevice("video",e,t,i)}),(function(o){r.logger.warn("zc.uvd.0 getDevices err:",o),r.switchDevice("video",e,t,i)}))}))},e.prototype.useAudioDevice=function(e,t){var r=this;return this.logger.info("zc.uad.1 call"),new Promise((function(o){var n=r.getSpan(e,u.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.event);n.setAttributes({device:u.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device(t)});var i=function(e,t){r.logger.error("zc.uad.1 "+t);var i=e;i.message=i.message+(t?" "+t:""),r.stateCenter.reporter.setError(n,e,t),o({errorCode:i.code,extendedData:i.message})},s=function(t){n.setAttributes({error:t.errorCode,message:t.extendedData}),n.end(),r.streamCenter.getPublishList(e).forEach((function(t){var r;t.microLabel=(null===(r=e.getAudioTracks()[0])||void 0===r?void 0:r.label)||t.microLabel})),o(t)};e instanceof MediaStream?"string"==typeof t?r.stateCenter.getDevices((function(o){var i=o.microphones.find((function(e){return e.deviceID==t}));if(!i)return r.logger.error("zc.uad.1 device is not found"),void s({errorCode:u.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.code,extendedData:u.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.message});n.setAttributes({device_name:u.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device_name(null==i?void 0:i.deviceName)}),r.switchDevice("audio",e,t,s)}),(function(o){r.logger.warn("zc.uad.1 getDevices err:",o),r.switchDevice("audio",e,t,s)})):i(u.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kParamError,"deviceID must be string"):i(u.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kLocalStreamError,"localStream not found")}))},e.prototype.enableDualStream=function(e){this.logger.info("zsc.eds call");var t=this.streamCenter.checkPreview(e);t&&!t.lowStream?navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"custom"==t.previewType?this.logger.error("zsc.eds can not support firefox"):this.streamCenter.checkPublish(e)?this.logger.error("zsc.eds is publishing"):(t.enableDualStream=!0,t.createLowStream()):this.logger.error("zsc.eds preview no found")},e.prototype.setLowStreamParameter=function(e,t){var r=this.streamCenter.checkPreview(e);if(r){var o=r.videoInfo;t.width&&o.width&&t.width>o.width?this.logger.error("zsc.slsp.0 low stream width can not larger than high stream"):t.height&&o.height&&t.height>o.height?this.logger.error("zsc.slsp.0 low stream height can not larger than high stream"):t.frameRate&&o.frameRate&&t.frameRate>o.frameRate||t.height&&o.bitRate&&t.bitRate>o.bitRate||(r.lowStreamConfig=Object.assign(r.lowStreamConfig,t))}else this.logger.error("zsc.slsp.0 preview no found")},e.prototype.handleTrack=function(e,t,r,o,s){var u;return n(this,void 0,void 0,(function(){var l,d,h,p,f,_,g,m,v,y,b,S=this;return i(this,(function(E){switch(E.label){case 0:return t instanceof MediaStream?r instanceof MediaStreamTrack&&"audio"!=r.kind?(l=this.streamCenter.checkPreview(t))?"video"===r.kind&&(null===(u=l.videoEffect)||void 0===u?void 0:u.enabled)?(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" need to disable video beauty effect first"),s&&s({errorCode:c.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code,extendedData:"need to disable video beauty effect before add or remove track"}),[2]):"ADD"==e&&(t.getTracks().length>=2||t.getTracks().find((function(e){return e.kind==r.kind})))?(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only stream which have one track and kind no exist can add track"),s&&s({errorCode:c.errorCodeList.TRACK_CAN_NOT_ADD.code,extendedData:c.errorCodeList.TRACK_CAN_NOT_ADD.message}),[2]):"REMOVE"!=e||1!=t.getTracks().length&&t.getTracks().includes(r)?!(d=this.streamCenter.checkPublish(t))||5===d.publisher.stateNego&&1!=d.publisher.isUpdateSDP?(h=l.rtcViewer,d?(p=d.publisher,f=l,(_=d.publisher.peerConnection)?(p.isUpdateSDP=!0,"ADD"!=e?[3,1]:(_.addTrack(r,t),[3,4])):[2]):[3,6]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" publish state wrong"),s&&s({errorCode:c.errorCodeList.PUBLISHER_STATE_WRONG.code,extendedData:c.errorCodeList.PUBLISHER_STATE_WRONG.message}),[2]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" not supported"),s({errorCode:c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream no found"),s&&s({errorCode:c.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:c.errorCodeList.PUBLISH_NO_PREVIEW.message}),[2]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only can handle video track"),s({errorCode:c.errorCodeList.INPUT_PARAM.code,extendedData:c.errorCodeList.INPUT_PARAM.message}),[2]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream wrong"),s({errorCode:c.errorCodeList.INPUT_PARAM.code,extendedData:c.errorCodeList.INPUT_PARAM.message}),[2]);case 1:return window.RTCPeerConnection&&window.RTCPeerConnection.prototype.getTransceivers&&window.RTCRtpTransceiver.prototype.stop?[4,_.getSenders().find((function(e){return e.track&&e.track==r}))]:(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" not supported getTransceivers"),s({errorCode:c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]);case 2:return g=E.sent(),[4,_.getTransceivers().find((function(e){return e.sender==g}))];case 3:if(m=E.sent(),!(g&&m&&m.stop))return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender no found"),s&&s({errorCode:c.errorCodeList.TRACK_NOT_FOUND.code,extendedData:c.errorCodeList.TRACK_NOT_FOUND.message}),[2];try{_.removeTrack(g),m.stop()}catch(e){this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" "+e),s&&s({errorCode:c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message+" "+e})}E.label=4;case 4:return v={},y=this.streamCenter.previewStreamList.find((function(e){return e.localStream.getTracks().find((function(e){return e==r}))})),v=y&&"ADD"==e?y.videoInfo:{},[4,_.createOffer()];case 5:return b=E.sent(),p.onCreateOfferSuccess(b,!0,v,(function(a){return n(S,void 0,void 0,(function(){var n;return i(this,(function(i){return 0!==a?s&&s({errorCode:c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message}):(n="video"==r.kind?"videoTrack":"audioTrack","ADD"==e?(t.addTrack(r),f[n]=r,h&&h.setTrack("video"==r.kind,r),"video"==r.kind&&1==r.enabled?p.sendStreamStatus(0,p.mic_status,!0):1==r.enabled&&p.sendStreamStatus(p.camera_status,0,!0)):("video"==r.kind?p.sendStreamStatus(2,p.mic_status,!0):p.sendStreamStatus(p.camera_status,2,!0),t.removeTrack(r),f[n]=null,h&&h.setTrack("video"==r.kind,null)),l.mediaStreamConfig.video="ADD"==e,o({errorCode:0,extendedData:""})),[2]}))}))})),[3,7];case 6:"ADD"==e?(t.addTrack(r),h&&h.setTrack("video"==r.kind,r)):(t.removeTrack(r),h&&h.setTrack("video"==r.kind,null)),o({errorCode:0,extendedData:""}),l.mediaStreamConfig.video="ADD"==e,E.label=7;case 7:return[2]}}))}))},e.prototype.switchDevice=function(e,t,r,n){var i=this,s=this.streamCenter.checkPreview(t);if(!s)return this.logger.error("zsc.sd.0 preview no found"),void(n&&n({errorCode:c.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:c.errorCodeList.PUBLISH_NO_PREVIEW.message}));if("video"===e&&0==s.mediaStreamConfig.video)return this.logger.error("zsc.sd.0 camera can not be changed when video is false"),void(n&&n({errorCode:c.errorCodeList.VIDEO_DEVICE_FALSE.code,extendedData:c.errorCodeList.VIDEO_DEVICE_FALSE.message}));if("audio"===e&&0==s.mediaStreamConfig.audio)return this.logger.error("zsc.sd.0 microphone can not be changed when audio is false"),void(n&&n({errorCode:c.errorCodeList.AUDIO_DEVICE_FALSE.code,extendedData:c.errorCodeList.AUDIO_DEVICE_FALSE.message}));s.mediaStreamConfig.videoInput!==r&&delete s.mediaStreamConfig.facingMode;var a,u={};"video"===e?(u.videoInput=r,a=s.videoTrack):(u.audioInput=r,a=s.audioTrack);var l=this.stateCenter.browser;this.logger.info("zsc.sd.0 browser "+l),"firefox"===l&&(null==a||a.stop());var d=o(o({},s.mediaStreamConfig),u),h=s.getMediaStreamConstraints(d),p=function(r,o){o.getTracks().forEach((function(r){if(r.kind===e){var o="video"===e,n=o?"videoTrack":"audioTrack",a=s[n];r.enabled=a.enabled,o&&s.lowStream&&s.lowStream.getTracks().forEach((function(e){return e.stop()}));var c=i.streamCenter.getPublishList(t);c.length>0&&(!s.muteImage||r.enabled||!o)?c.map((function(e){return e.publisher})).forEach((function(e){e.replacePublishedTrack(r)})):s&&s.muteImage&&!r.enabled&&o?s[n]=r:s&&s.replacePreviewTrack(r),a&&a.stop()}})),s.restartSoundLevel()};"audio"==e?h.video=!1:h.audio=!1,navigator.mediaDevices.getUserMedia(h).then((function(t){Object.assign(s.mediaStreamConfig,u),p(0,t),i.logger.info("zsc.sd.0 switch "+e+" device success"),n&&n({errorCode:0,extendedData:""})}),(function(t){var r,o;"video"==e?null===(r=s.videoTrack)||void 0===r||r.stop():null===(o=s.audioTrack)||void 0===o||o.stop(),i.logger.warn("zsc.sd.0 switch "+e+" device failed, stop last device and retry. ",t+""),navigator.mediaDevices.getUserMedia(h).then((function(t){Object.assign(s.mediaStreamConfig,u),p(0,t),i.logger.info("zsc.sd.0 swtich "+e+" device success"),n&&n({errorCode:0,extendedData:""})}),(function(t){i.logger.warn("zsc.sd.0 swtich "+e+" device failed and recover last device. ",t+"");var r=s.getMediaStreamConstraints(s.mediaStreamConfig),o=c.errorCodeList.VIDEO_DEVICE_FALSE;"audio"===e&&(o=c.errorCodeList.AUDIO_DEVICE_FALSE),navigator.mediaDevices.getUserMedia(r).then((function(r){p(0,r),i.logger.info("zsc.sd.0 recover last "+e+" device success"),n&&n({errorCode:o.code,extendedData:o.message+" "+JSON.stringify(t)})}),(function(t){i.logger.error("zsc.sd.0 swtich "+e+" device and recover failed, please recreate stream. ",t+""),n&&n({errorCode:o.code,extendedData:o.message+" "+JSON.stringify(t)})}))}))}))},e.prototype._replaceTrack=function(e,t,r){var o=this.streamCenter.checkPreview(e),n=this.streamCenter.getPublishList(e);if(n.length){var i=null;return n.forEach((function(e){var o;i=null===(o=e.publisher)||void 0===o?void 0:o.replacePublishedTrack(t,!1,{isTrackProcessedFromOriginalStream:r})})),i}return o?o.localStream.getTracks().find((function(e){return e.kind===t.kind}))?(o.replacePreviewTrack(t,!1,{isTrackProcessedFromOriginalStream:r}),{errorCode:0,extendedData:""}):(this.logger.error("zc.rt.0 track no found"),{errorCode:c.errorCodeList.TRACK_NOT_FOUND.code,extendedData:c.errorCodeList.TRACK_NOT_FOUND.message}):(this.logger.error("zc.rt.0 preview no found"),{errorCode:c.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:c.errorCodeList.PUBLISH_NO_PREVIEW.message})},e.prototype.enableMicrophone=function(e,t){var r=this.streamCenter.checkPreview(e);return r?r.enableMicrophone(t,this.streamCenter):(this.logger.error("zsc.em.0 no preview"),!1)},e.prototype.enableCamera=function(e,t,r){var o=this.streamCenter.checkPreview(e);return o?o.enableCamera(t,this.streamCenter,r):(this.logger.error("zsc.ec.0 no preview"),!1)},e.prototype.setDummyCaptureImagePath=function(e,t){var r=this;return new Promise((function(o,n){var i=r.streamCenter.checkPreview(t);if(!i)return r.logger.error("zc.sdcp.0 preview no found"),void o(!1);if("string"!=typeof e)return r.logger.error("zc.sdcp.0 filePath type error"),void o(!1);var s=new Image;s.src=e,s.crossOrigin="anonymous",s.onload=function(){i.loadImgTimer&&clearTimeout(i.loadImgTimer),i.loadImgTimer=void 0,r.logger.info("zc.sdcp.0 load file path success"),i.muteImage=s,o(!0)},i.loadImgTimer=setTimeout((function(){r.logger.error("zc.sdcp.0 load img timeout"),o(!1)}),5e3)}))},e.prototype.enableAutoSwitchDevice=function(e){this.stateCenter.autoSwitchDeviceSetting=o({},e)},e.prototype.getSpan=function(e,t){var r=this.streamCenter.checkPublish(e);return this.stateCenter.reporter.createSpan(s.H,r?{key:u.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:r.streamID}:{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},t)},e.prototype.setEngineConfig=function(e){this.stateCenter.engineConfig=o(o({},this.stateCenter.engineConfig),e)},e}();t.AdvancedModule=d},4378:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.signal=t.publisher=t.publishModule=t.playModule=t.preview=t.streamHandler=t.zegoWebRTC=t.ENUM_PUBLISH_STREAM_STATE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.TRACER_LEVEL=t.PROTO_VERSION=void 0;var s,a=r(2367),c=r(5098),u=r(8706),l=r(7248);function d(e,t){return e&&"live"===e.readyState?!0===e.enabled?0:"video"===e.kind&&"firefox"===t?2:20:2}t.PROTO_VERSION="2.21.0",function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(s=t.TRACER_LEVEL||(t.TRACER_LEVEL={})),t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.zegoWebRTC={mutePublishStreamVideo:function(e,t,r){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" call");var o=this.rtcModules.advancedModule.getSpan(e,u.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.event);if("boolean"!=typeof t||void 0!==r&&"boolean"!=typeof r)return this.logger.error(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" option error"),!1;var n=this.rtcModules.advancedModule.enableStream(e,{video:!t,retain:r});return o.setAttributes({mute_type:u.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.mute_type(t?1:0),retain:u.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.retain(r)}),o.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" end"),n},mutePublishStreamAudio:function(e,t){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" call");var r=this.rtcModules.advancedModule.getSpan(e,u.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.event);if("boolean"!=typeof t)return this.logger.error(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" option error"),!1;var o=this.rtcModules.advancedModule.enableStream(e,{audio:!t});return r.setAttributes({mute_type:u.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.mute_type(t?1:0)}),r.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" end"),o},mutePlayStreamVideo:function(e,t){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" call "+e+" "+t);var r=this.stateCenter.reporter.createSpan(s.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},u.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.event);r.setAttributes({mute_type:u.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.mute_type(t?1:0)});var o=this.rtcModules.playModule.mutePlayStream(e,"video",t);return r.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" end"),o},mutePlayStreamAudio:function(e,t){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+" call "+e+" "+t);var r=this.stateCenter.reporter.createSpan(s.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},u.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.event);r.setAttributes({mute_type:u.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.mute_type(t?1:0)});var o=this.rtcModules.playModule.mutePlayStream(e,"audio",t);return r.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+"end"),o},muteMicrophone:function(e){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_MIC+" call");var t=this.stateCenter.reporter.createSpan(s.H,{key:u.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoEnableMic.event);if("boolean"!=typeof e)return this.logger.error(a.ZEGO_WEBRTC_ACTION.MUTE_MIC+" option error"),this.stateCenter.reporter.setError(t,c.errorCodeList.INPUT_PARAM),!1;var r=this.rtcModules.advancedModule.enableMicrophoneOnly(!e),o=Object.keys(this.streamCenter.publisherList).map((function(e){return{stream_id:e}}));return t.setAttributes({enable:u.ZegoRTCLogEvent.kZegoEnableMic.enable(!e),stream_list:u.ZegoRTCLogEvent.kZegoEnableMic.stream_list(o)}),t.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_MIC+" end"),r},activateSEIInsert:function(e){var t=e.stream,r=e.action,o=e.infoType,n=this.rtcModules.advancedModule.getSpan(e.stream,u.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.event);n.setAttributes({action:u.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.action(e.action),info_type:u.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.info_type(e.infoType)});var i=this.rtcModules.publishModule.activateSEIInsert(t,r,o);return n.end(),i},getAudioInfo:function(e,t,r){if(!e)return this.logger.error("localStream is empty!"),!1;var n=o({},r);return new l.MediaUtil(this.ac,n).connectToSource(e,(function(e){t(e)}))},startRecord:function(e){var t=this,r=this.streamCenter.checkPreview(e);if(r){var o=e.clone(),n=o.getAudioTracks();n.length>0&&r.hasEmptyAudioTrack&&n.forEach((function(e){o.removeTrack(e)})),this.recordedBlobs=[];var i={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:"video/webm"},MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:""}))));try{this.mediaRecorder=new MediaRecorder(o,i)}catch(e){return void this.logger.error("Exception while creating ZegoMediaRecorder:",e)}this.mediaRecorder.onstop=function(e){t.logger.warn("Recorder stopped: "+e)},this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(10)}else this.logger.error("stream is not from zego!")},stopRecord:function(){this.mediaRecorder?this.mediaRecorder.stop():this.logger.warn("please invoke startRecord first")},resumeRecord:function(){this.mediaRecorder?this.mediaRecorder.resume():this.logger.warn("please invoke startRecord first")},pauseRecord:function(){this.mediaRecorder?this.mediaRecorder.pause():this.logger.warn("please invoke startRecord first")},saveRecord:function(e){if(this.mediaRecorder&&this.recordedBlobs){var t=new Blob(this.recordedBlobs,{type:"video/webm"}),r=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=r,o.download=e+".webm",document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(r)}),100)}else this.logger.warn("please invoke startRecord first")},handleDataAvailable:function(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)},addTrack:function(e,t){var r=this;return new Promise((function(o,n){r.logger.info(a.ZEGO_WEBRTC_ACTION.ADD_TRACK+" call"),r.rtcModules.advancedModule.handleTrack("ADD",e,t,o,n)}))},removeTrack:function(e,t){var r=this;return new Promise((function(o,n){r.logger.info(a.ZEGO_WEBRTC_ACTION.REMOVE_TRACK+" call"),r.rtcModules.advancedModule.handleTrack("REMOVE",e,t,o,n)}))},enableCameraCapturing:function(e,t){return void 0===t&&(t=!0),n(this,void 0,void 0,(function(){var r,o,n,a;return i(this,(function(i){return r=this.stateCenter.reporter.createSpan(s.H,{key:u.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoEnableCamera.event),(o=this.streamCenter.checkPreview(e))?(n=this.streamCenter.getPublishList(e),a=n.map((function(e){return{stream_id:e.streamID}})),r.setAttributes({enable:u.ZegoRTCLogEvent.kZegoEnableCamera.enable(t),stream_list:u.ZegoRTCLogEvent.kZegoEnableCamera.stream_list(a)}),r.end(),[2,o.enableCameraCapturing(t)]):(this.logger.error("zsc.ecc no preview"),this.stateCenter.reporter.setError(r,c.errorCodeList.PUBLISH_NO_PREVIEW),[2,!1])}))}))}},t.streamHandler={},t.preview={enableCamera:function(e,t,r){var o,n,i,s=this;if(!this.localStream||0==this.localStream.getVideoTracks().length)return this.logger.error("zp.ec.2 video track no found"),!1;var a,c=this.videoTrack;if(!e&&this.muteImage){var u=document.createElement("canvas");u.width=this.muteImage.width,u.height=this.muteImage.height;var l=u.getContext("2d");this.muteImageAnID=setInterval((function(){l.drawImage(s.muteImage,0,0)}),100),a=u.captureStream().getVideoTracks()[0],this.localStream.removeTrack(this.localStream.getVideoTracks()[0]),this.localStream.addTrack(a),this.rtcViewer&&this.rtcViewer.setVideo(a)}else e&&this.muteImage&&((null===(o=null==this?void 0:this.videoEffect)||void 0===o?void 0:o.enabled)?this.replacePreviewTrack(this.videoEffect.output,!0):this.replacePreviewTrack(this.videoTrack));var h=this.stateCenter.browser;if(r&&!e||!c){if(r&&!e)if(null===(n=this.videoEffect)||void 0===n?void 0:n.enabled)this.logger.warn("zp.ec.2 Unable to keep the preview screen when beauty is turned on");else{var p=this.cloneVideoTrack;this.cloneVideoTrack=this.videoTrack.clone(),this.cloneVideoTrack.enabled=!0,this.replacePreviewTrack(this.cloneVideoTrack,!1,{retainTrack:!0}),p&&p.stop()}}else if(c.enabled=e,"chrome"===h&&e&&void 0!==typeof c.getSettings().width&&c.getSettings().width>0&&navigator.userAgent){var f=0,_=(navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1];if(_&&(f=parseInt(_.split(",")[0])),f&&f>=87&&f<92){var g=c.getSettings().width-1,m=c.getSettings().height-1,v=c.getSettings().frameRate;c.applyConstraints({width:g,height:m,frameRate:v}).then((function(){c.applyConstraints({width:s.videoInfo.width,height:s.videoInfo.height,frameRate:v})}))}}c&&(c.enabled=e),null===(i=this.lowStream)||void 0===i||i.getVideoTracks().forEach((function(t){t.enabled=e}));var y=t.getPublishList(this.localStream).map((function(e){return e.publisher}));return y.length&&y.forEach((function(t){var r,o=null===(r=t.peerConnection)||void 0===r?void 0:r.getSenders().filter((function(e){var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));o&&o.forEach((function(t){var r;!e&&s.muteImage&&a?null==t||t.replaceTrack(a):e&&((null===(r=null==s?void 0:s.videoEffect)||void 0===r?void 0:r.enabled)&&s.videoEffect.output?t.track!==s.videoEffect.output&&(null==t||t.replaceTrack(s.videoEffect.output)):t.track!==s.videoTrack&&(null==t||t.replaceTrack(s.videoTrack)),s.muteImageAnID&&clearInterval(s.muteImageAnID))}));var n=s.muteImage&&!e?0:d(s.videoTrack,h);t.sendStreamStatus(n,t.mic_status)})),this.isVideoEnabled=e,this.logger.info("zp.ec.2 call success"),!0},enableMicrophone:function(e,t){if(!this.localStream)return this.logger.error("zp.em.2 no localStream"),!1;this.localStream.getAudioTracks().forEach((function(t){t.enabled=e})),this.audioTrack&&(this.audioTrack.enabled=e&&t.isMicEnabled);var r=t.getPublishList(this.localStream).map((function(e){return e.publisher}));return r.length&&r.forEach((function(r){r.signal&&r.sendStreamStatus(r.camera_status,e&&t.isMicEnabled?0:2)})),this.isAudioEnabled=e,this.logger.debug("zp.em.2 call success"),!0},replacePreviewTrack:function(e,t,r){var o;return void 0===t&&(t=!1),void 0===r&&(r={}),n(this,void 0,void 0,(function(){var n,s,a,c,u;return i(this,(function(i){switch(i.label){case 0:return this.logger.info("zsc.rpt.0 call"),e&&e.kind&&this.localStream?(n=!0===(null==r?void 0:r.retainTrack),s="audio"===e.kind?"audioTrack":"videoTrack",t||!(null===(o=this.videoEffect)||void 0===o?void 0:o.enabled)||"video"!==e.kind?[3,3]:n?[3,2]:[4,this.videoEffect.setInput(e)]):[2];case 1:i.sent(),i.label=2;case 2:return[3,4];case 3:"audio"===e.kind&&this.audioNodeQueue&&!r.isTrackProcessedFromOriginalStream?((a=new MediaStream).addTrack(e),c=this.ac.createMediaStreamSource(a),this.audioNodeQueue.replaceSource(c)):(this.logger.info("zsc.rpt.0 replace local track"),(u=this.localStream.getTracks().find((function(t){return t.kind===e.kind})))!==e&&(u&&this.localStream.removeTrack(u),this.localStream.addTrack(e)),this.localStream.addTrack(e),this.rtcViewer&&(this.rtcViewer.setTrack("video"===e.kind,e),"safari"===this.stateCenter.browser&&this.rtcViewer.resume(!0)),!n&&"video"===e.kind&&this.enableDualStream&&this.createLowStream()),i.label=4;case 4:return t||n||(this[s]=e),this.logger.info("zsc.rpt.0 end"),[2]}}))}))},enableCameraCapturing:function(e){return n(this,void 0,void 0,(function(){var t,r,n,s,a,c,u,l,h,p;return i(this,(function(i){switch(i.label){case 0:return this.localStream&&this.videoTrack&&"camera"===this.previewType?(t=this.streamCenter.getPublishList(this.localStream).map((function(e){return e.publisher})),e?"live"!==this.videoTrack.readyState?[3,1]:(this.logger.warn("zp.ecc camera is already capturing"),[3,12]):[3,13]):(this.logger.error("zp.ecc not camera stream"),[2,!1]);case 1:r=this.getMediaStreamConstraints(o(o({},this.mediaStreamConfig),{audio:!1})),i.label=2;case 2:return i.trys.push([2,11,,12]),[4,navigator.mediaDevices.getUserMedia(r)];case 3:return n=i.sent(),(s=n.getVideoTracks()[0]).enabled=this.isVideoEnabled,!1===s.enabled&&this.logger.warn("zp.ecc video is not enabled"),!this.muteImage||this.isVideoEnabled?[3,4]:(this.videoTrack=s,s.enabled=!this.isVideoEnabled,[3,10]);case 4:if(!t.length)return[3,9];a=0,i.label=5;case 5:return a<t.length?[4,t[a].replacePublishedTrack(s)]:[3,8];case 6:if(0!==(null==(c=i.sent())?void 0:c.errorCode))throw c;i.label=7;case 7:return a++,[3,5];case 8:return[3,10];case 9:this.replacePreviewTrack(s),i.label=10;case 10:return[3,12];case 11:return u=i.sent(),this.logger.error("zsc.ecc resume camera capturing failed. "+JSON.stringify(u)),[2,!1];case 12:return[3,16];case 13:return l=this.videoTrack.enabled,"safari"===(h=this.stateCenter.browser)?[3,15]:(this.videoTrack.enabled=!1,[4,new Promise((function(e){setTimeout((function(){e(void 0)}),200)}))]);case 14:i.sent(),i.label=15;case 15:this.videoTrack.stop(),this.videoTrack.enabled=l,t.length&&(p=this.muteImage&&!this.isVideoEnabled?0:d(this.videoTrack,h),t.forEach((function(e){e.sendStreamStatus(p,e.mic_status)}))),i.label=16;case 16:return[2,!0]}}))}))}},t.playModule={mutePlayStream:function(e,t,r){var o=this;return this.logger.info("zsc.mps.0 call "+t+" "+r),new Promise((function(n,i){if("string"!=typeof e||""==e)return o.logger.error("zsc.mps.0 streamID must be string and not empty"),void i(!1);if("boolean"!=typeof r)return o.logger.error("zsc.mps.0 mute must be boolean"),void i(!1);var a=o.streamCenter.playerList[e];if(!a)return o.logger.error("zsc.mps.0 player not found"),void i(!1);if("video"===t){if(a.playOption&&!1===a.playOption.video||a.player&&0!==a.player.cameraStatus)return o.logger.error("zsc.mps.0 stream no contain video"),void i(!1);a.player.signal.ActivatePlayVideoStream(o.stateCenter.getSeq(),a.player.sessionId,r,(function(){var t,i,c,l;o.logger.info("zsc.mps.0 suc"),a.player.playMediaStatus.video=!r;var d=u.ZegoRTCLogEvent.kZegoPlayContentChanged,h=o.stateCenter.reporter.createSpan(s.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},d.event);h.setAttributes({webrtc_sid:d.webrtc_sid(a.player.sessionId),video_activate:d.video_activate(!!a.player.playMediaStatus.video),audio_activate:d.audio_activate(!!a.player.playMediaStatus.audio),video_layer:d.video_layer(2===(null===(i=null===(t=a.player)||void 0===t?void 0:t.playOption)||void 0===i?void 0:i.streamType)?-1:null===(l=null===(c=a.player)||void 0===c?void 0:c.playOption)||void 0===l?void 0:l.streamType)}),h.end(),n(!0)}),(function(){o.logger.error("zsc.mps.0 fail"),i(!1)}))}else if("audio"===t){if(a.playOption&&!1===a.playOption.audio||a.player&&0!==a.player.micStatus)return o.logger.error("zsc.mps.0 stream no contain audio"),void i(!1);a.player.signal.ActivatePlayAudioStream(o.stateCenter.getSeq(),a.player.sessionId,r,(function(){o.logger.info("zsc.mps.0 suc"),a.player.playMediaStatus.audio=!r;var t=u.ZegoRTCLogEvent.kZegoPlayContentChanged,i=o.stateCenter.reporter.createSpan(s.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},t.event);i.setAttributes({webrtc_sid:t.webrtc_sid(a.player.sessionId),video_activate:t.video_activate(!!a.player.playMediaStatus.video),audio_activate:t.audio_activate(!!a.player.playMediaStatus.audio)}),i.end(),n(!0)}),(function(){o.logger.error("zsc.mps.0 fail"),i(!1)}))}else i(!1)}))},setStreamAudioOutput:function(e,t){var r=this;return!(null==t||0==t.length||!e)&&(this.logger.debug("zsc.ssao.0 device "+t),e?"undefined"!==e.sinkId?(e.setSinkId(t).then((function(){r.logger.info("zsc.ssao.0 success device: "+t)})).catch((function(e){r.logger.info("zsc.ssao.0 "+e.name)})),!0):(this.logger.error("zsc.ssao.0 browser does not suppport"),!1):(this.logger.error("zsc.ssao.0 no localVideo"),!1))}},t.publishModule={activateSEIInsert:function(e,t,r){void 0===r&&(r=0);var o=this.streamCenter.checkPreview(e);return o?0!==t&&1!==t?(this.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" value of \u201caction\u201d should be 0 or 1"),!1):(o.activatesSEIConfig={action:t,infoType:r},this.streamCenter.getPublishList(e).map((function(e){return e.publisher})).forEach((function(e){e.activateSEIInsert(t,r)})),!0):(this.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" stream is not created"),!1)}},t.publisher={activateSEIInsert:function(e,t){var r=this;return new Promise((function(o,n){return r.signal?(r.signal&&r.signal.activateSEIInsert(r.stateCenter.getSeq(),r.sessionId,r.peerID,e,t,(function(e,t,n){var i=!1;0===n.result?(r.logger.info(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" called success"),i=!0):1===n.result?(r.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" "+n.peer_id+" invalid param."),i=!1):2===n.result&&(r.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" peer not exist"),i=!1),o(i)}),(function(e){1===e&&r.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" request timeout")})),!1):o(!1)}))},replacePublishedTrack:function(e,t,r){var o;return void 0===t&&(t=!1),n(this,void 0,void 0,(function(){var n,s,a,u,l,h,p,f;return i(this,(function(i){switch(i.label){case 0:return s=null==(n=this.previewer)?void 0:n.videoEffect,u=n["".concat(a=e.kind,"Track")],l=null===(o=this.peerConnection)||void 0===o?void 0:o.getSenders().filter((function(e){return e.track.kind===a})),h=this.stateCenter.browser,u?(p=0,f=0,"video"===a?(p=d(t?u:e,h),f=this.mic_status):"audio"===a&&(f=d(e,h),p=this.camera_status),[4,n.replacePreviewTrack(e,t,r)]):[3,2];case 1:return i.sent(),l?(l.forEach((function(r,o){"audio"!==a&&!t&&(null==s?void 0:s.enabled)||("video"==a&&n.lowStream&&l.length>1&&0==o?r.replaceTrack(n.lowStream.getVideoTracks()[0]):"audio"===a&&n.audioNodeQueue||r.replaceTrack(e))})),this.sendStreamStatus(p,f)):this.logger.info("zc.rt.1 replace remote track will work after stream published"),this.logger.info("zc.rt.1 replace remote track success"),[2,{errorCode:0,extendedData:""}];case 2:return this.logger.error("zc.rt.1 publisher track no found"),[2,{errorCode:c.errorCodeList.TRACK_NOT_FOUND.code,extendedData:c.errorCodeList.TRACK_NOT_FOUND.message}]}}))}))}},t.signal={activateSEIInsert:function(e,t,r,o,n,i,s){this.logger.info(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" call "+t),this.sendMessageWithCallback("ActivateSEIInsertReq",e,t,{peer_id:r,action:o,info_type:n},i,s)}}},5098:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support remove track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},3824:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(4495),n=r(4378);t.default={type:"Advance",install:function(e,t,r,i,s,a,c,u){for(var l in Object.defineProperty(t.prototype,"initAdvance",{value:function(){this.advancedModule=new o.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),n.zegoWebRTC)Object.defineProperty(e.prototype,l,{value:n.zegoWebRTC[l],writable:!1});for(var l in n.streamHandler)Object.defineProperty(r.prototype,l,{value:n.streamHandler[l],writable:!1});for(var l in n.preview)Object.defineProperty(i.prototype,l,{value:n.preview[l],writable:!1});for(var l in n.playModule)Object.defineProperty(s.prototype,l,{value:n.playModule[l],writable:!1});for(var l in n.publishModule)Object.defineProperty(a.prototype,l,{value:n.publishModule[l],writable:!1});for(var l in n.publisher)Object.defineProperty(c.prototype,l,{value:n.publisher[l],writable:!1});for(var l in n.signal)Object.defineProperty(u.prototype,l,{value:n.signal[l],writable:!1})}}},8706:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var o=r(5098),n=function(e){return e},i=function(e){return e},s=function(e){return e},a=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskInitSetting:{event:"/sdk/init"},kZegoDevice:{event:"device"},kZegoTaskRoomContext:{event:"room_context"},kZMInitSetting:{event:"stream"},kZegoTaskPublishStart:{event:"/sdk/start_publish"},kZegoTaskPlayStart:{event:"/sdk/start_play"},kZegoSetVideoConfig:{event:"/sdk/set_video_config",error:{kParamError:o.errorCodeList.INPUT_PARAM,kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG},video_params:n,video_conf:n},kZegoSetAudioConfig:{event:"/sdk/set_audio_config",error:{kParamError:o.errorCodeList.INPUT_PARAM,kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG},audio_params:n,audio_conf:n},kZegoReplaceTrack:{event:"/sdk/replace_track",error:{kParamError:o.errorCodeList.INPUT_PARAM},track_kind:i},kZegoTaskUseVideoDevice:{event:"/device/api/video_c",error:{kParamError:o.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:o.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG},device:i,device_name:i},kZegoTaskUseAudioDevice:{event:"/device/api/audio_c",error:{kParamError:o.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:o.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:o.errorCodeList.LOCALSTREAM_WRONG},device:i,device_name:i},kZegoPlayContentChanged:{event:"/sdk/play_content_changed",webrtc_sid:s,video_activate:a,audio_activate:a,video_layer:s},kZegoTaskMutePublishVideo:{event:"/sdk/mute_publish_video",mute_type:s,retain:a},kZegoTaskMutePublishAudio:{event:"/sdk/mute_publish_audio",mute_type:s},kZegoEnableMic:{event:"/device/enable_mic",enable:a,stream_list:n},kZegoEnableCamera:{event:"/device/enable_camera",enable:a,stream_list:n},kZegoTaskMutePlayVideo:{event:"/sdk/mute_play_video",mute_type:s},kZegoTaskMutePlayAudio:{event:"/sdk/mute_play_audio",mute_type:s},kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:o.errorCodeList.INPUT_PARAM,kExtraInfoNullError:o.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:o.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:o.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:o.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream_id:i,msg_length:i,room_id:i,room_sid_string:i,use_na:s},kZegoTaskActivateSEIInsert:{event:"/active/sei",action:s,info_type:s}}},7248:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaUtil=void 0;var r=function(){function e(e,t){var r=t.type,o=t.channels,n=void 0===o?1:o,i=t.bufferSize,s=void 0===i?0:i,a=t.sampleBit,c=void 0===a?16:a,u=t.sampleRate,l=void 0===u?44100:u,d=this;this.instant=0,this.slow=0,this.clip=0,this.context=e,this.type=r,this.channels=n,this.bufferSize=s,this.sampleBit=c,this.sampleRate=l,this.script=e.createScriptProcessor(s,n,n),(new Date).getTime(),this.script.addEventListener("audioprocess",(function(e){var t,o=e.inputBuffer.getChannelData(0),n=0,i=0;for(t=0;t<o.length;++t)n+=o[t]*o[t],Math.abs(o[t])>.99&&(i+=1);if(d.instant=Math.sqrt(n/o.length),d.slow=.95*d.slow+.05*d.instant,d.clip=i/o.length,"pcm"===r||"wav"===r){for(var s=[],a=0;a<d.channels;a++)s.push(e.inputBuffer.getChannelData(a));d.recorderBuffer(s)}})),"pcm"!==r&&"wav"!==r||this.initRecorderBuffer(r)}return e.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==t&&t(null)}catch(e){console.error(e),void 0!==t&&t(e)}return this},e.prototype.recorderBuffer=function(e){this.worker.postMessage({command:"record",val:e})},e.prototype.initRecorderBuffer=function(e){var t=this;this.worker=this.inlineWorker((function(){var e,t,r,o,n,i,s=[];function a(e,t,r){for(var o=0;o<r.length;o++,t+=2){var n=Math.max(-1,Math.min(1,r[o]));e.setInt16(t,n<0?32768*n:32767*n,!0)}}function c(e,t,r){for(var o=0;o<r.length;o++,t++){var n=Math.max(-1,Math.min(1,r[o])),i=n<0?128*n:127*n;e.setInt8(t,i+=128)}}function u(e,t,r){for(var o=0;o<r.length;o++)e.setUint8(t+o,r.charCodeAt(o))}function l(e,t){for(var r=new Float32Array(t.length/e),o=0,n=0;o<r.length;)r[o]=t[n],n+=e,o++;return r}function d(e,t,r){for(var o=new Float32Array(t*e.length),n=0,i=0;i<r[0].length;i++)o.set(r[0][i],n),n+=r[0][i].length;return o}function h(e,t){for(var r=new Float32Array(e.length+t.length),o=0;o<e.length+t.length;o+=2)r[o]=e[o/2>>0],r[o+1]=t[o/2>>0];return r}function p(t){var r,o;if(1==e)r=d(s[0],n,s),1!=t&&(o=l(t,r));else if(2==e){var i=d(s[0],n,s),a=d(s[1],n,s);1!=t?o=h(l(t,i),l(t,a)):r=h(i,a)}return 1!=t?o:r}function f(e){var r=function(e,r){var o;8==r?o=e.length:16==r&&(o=e.length,o*=2);var n=new ArrayBuffer(o),i=new DataView(n);return 8==r?c(i,0,e):16==t&&a(i,0,e),i}(p(e),t);self.postMessage({command:"exportPcmLive",val:r})}function _(o){var n=function(o,n){var i;8==n?i=o.length:16==t&&(i=o.length,i*=2);var s=new ArrayBuffer(i+44),l=new DataView(s),d=r,h=t,p=e;return u(l,0,"RIFF"),l.setUint32(4,36+i,!0),u(l,8,"WAVE"),u(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,p,!0),l.setUint32(24,d,!0),l.setUint32(28,d*p*(h/8),!0),l.setUint16(32,p*(h/8),!0),l.setUint16(34,h,!0),u(l,36,"data"),l.setUint32(40,i,!0),8==t?c(l,44,o):16==t&&a(l,44,o),l}(p(o),t);self.postMessage({command:"exportWav",val:n})}this.onmessage=function(a){switch(a.data.command){case"init":e=(c=a.data.val).sampleChannel,t=c.sampleBit,r=c.sampleRate,o=c.oldSampleRate,n=c.bufferSize,i=c.type;break;case"record":!function(t){for(var n=0;n<e;n++)s[n]||(s[n]=[]),s[n].push(t[n]);var a=Math.round(o/r);"pcm"===i?f(a):"wav"===i&&_(a),s=[]}(a.data.val)}var c}})),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:e}}),this.worker.onmessage=function(e){switch(e.data.command){case"exportPcmLive":t.onReceiveBuffer(e.data.val);break;case"exportWav":t.onReceiveWav(e.data.val)}}},e.prototype.onReceiveBuffer=function(e){},e.prototype.onReceiveWav=function(e){},e.prototype.writeString=function(e,t,r){for(var o=0;o<r.length;o++)e.setUint8(t+o,r.charCodeAt(o))},e.prototype.writeBuffer=function(e,t,r){for(var o=0;o<r.byteLength;o++)e.setUint8(t+o,r[o])},e.prototype.concatenation=function(e){for(var t=0,r=0;r<e.length;++r)t+=e[r].buffer.byteLength;var o=new Uint8Array(t),n=0;for(r=0;r<e.length;++r)o.set(new Uint8Array(e[r].buffer),n),n+=e[r].buffer.byteLength;return o},e.prototype.encodeWave=function(e){var t=this.concatenation(e),r=t.byteLength,o=new ArrayBuffer(r+44),n=new DataView(o),i=this.sampleRate,s=this.sampleBit,a=this.channels;return this.writeString(n,0,"RIFF"),n.setUint32(4,36+r,!0),this.writeString(n,8,"WAVE"),this.writeString(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,a,!0),n.setUint32(24,i,!0),n.setUint32(28,i*a*(s/8),!0),n.setUint16(32,a*(s/8),!0),n.setUint16(34,s,!0),this.writeString(n,36,"data"),n.setUint32(40,r,!0),this.writeBuffer(n,44,t),n},e.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e.prototype.inlineWorker=function(e){if(Worker&&e){var t=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],r=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));return new Worker(r)}return null},e}();t.MediaUtil=r},2523:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,function(e){e.PRELOAD_EFFECT="zc.pe.0",e.PLAY_EFFECT="zc.pe.1",e.PAUSE_EFFECT="zc.pe.2",e.RESUME_EFFECT="zc.re",e.STOP_EFFECT="zc.se",e.UNLOAD_EFFECT="zc.ue",e.AUDIO_EFFECT_PROCESS="zc.aep",e.SET_EFFECT_VOLUME="zc.sev",e.START_MIXING_AUDIO="zc.sma.0",e.STOP_MIXING_AUDIO="zc.sma.1",e.MIXING_BUFFER="zc.mb",e.STOP_MIXING_BUFFER="zc.smb",e.PUBLISHER_PLAY_EFFECT="zc.p.0.pe.0",e.PUBLISHER_PAUSE_EFFECT="zc.p.0.pe.1",e.PUBLISHER_RESUME_EFFECT="zc.p.0.re",e.PUBLISHER_STOP_EFFECT="zc.p.0.se",e.PUBLISHER_START_MIXING_AUDIO="zc.p.0.sma.0",e.PUBLISHER_STOP_MIXING_AUDIO="zc.p.0.sma.1",e.SET_MIXING_AUDIO_VOLUME="zc.smav",e.PUBLISHER_MIXING_BUFFER="zc.p.0.mb",e.PUBLISHER_SET_MIXING_AUDIO_VOLUME="zc.p.0.smav"}(t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={}))},3013:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBufferProcessor=void 0;var o=r(4853),n=function(){function e(e,t,r,o){this.logger=e,this.ac=t,this.localStream=r,this.rtcViewer=o,this.audioBufferList=[],this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.loop=!1}return e.prototype.playEffect=function(e,t,r,o,n){var i=this;!0!==this.isMixAudio?this.audioBuffer?(this.startOffset=e||0,this.loop=t||!1,this.replace=r||!1,this.effectEndedCallBack=n,this.mixEffect(this.audioBuffer,(function(){i.buffSource.loop=!!t,e?i.buffSource.start(0,e/1e3):i.buffSource.start(0),i.startTimes=Date.now(),i.effectEndedListener=i.effectEndedHandler.bind(i),i.buffSource.addEventListener("ended",i.effectEndedListener),o&&o()}))):this.logger.error("amu.pe.1 no audio buffer found"):this.logger.warn("amu.pe.1 audio is mixing")},e.prototype.stopMixingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},e.prototype.playRealTimeEffect=function(e){var t=this;this.mixEffect(e,(function(){t.buffSource&&t.buffSource.start(0),t.buffSource&&t.buffSource.addEventListener("ended",(function(){t.audioBufferList.shift(),t.audioBufferList.length>0&&t.isMixAudio&&t.playRealTimeEffect(t.audioBufferList[0])}))}))},e.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.logger.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(!0),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},e.prototype.resumeEffect=function(){return this.audioBufferList.length>0?(this.logger.error("amu.pe.0 real time buffer can not be resume"),!1):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1,!0)},e.prototype.mixEffect=function(e,t){this.localStream?(this.ac.resume(),this.gainNode=this.ac.createGain(),this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=e,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&t()):this.logger.error("amu.me.0 localStream can not be found")},e.prototype.replaceTrack=function(){if(!this.destination||!this.streamSource)return!1;!this.replace&&this.streamSource.connect(this.destination),this.gainNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0];return this.micTrack=this.localStream.getAudioTracks()[0],this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(e),this.rtcViewer&&this.rtcViewer.setAudio(e),this.isMixAudio=!0,!0},e.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null},e.prototype.stopMixingAudio=function(e){return void 0===e&&(e=!1),this.paused?(this.logger.info("amu.sma.1 audioEffect is paused"),!e&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):this.isMixAudio?this.localStream?(this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(this.destination),this.gainNode.disconnect(this.ac.destination),this.isMixAudio=!1,this.audioBufferList=[],!e&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},e.prototype.getProcess=function(){var e=Date.now();return this.paused&&(e=this.pauseTimes),(e-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration)},e.prototype.seekTo=function(e){void 0===e&&(e=0),this.startOffset=e,this.paused?this.resumeOffset=e:(this.stopMixingAudio(!0),this.playEffect(e,this.loop,this.replace,void 0,this.effectEndedCallBack))},e.prototype.mixingBuffer=function(e,t){var r=this;!0!==this.isMixAudio||0!=this.audioBufferList.length||0!=this.isMixingBuffer?(this.ac.resume(),this.ac.decodeAudioData(e,(function(e){r.audioBufferList.push(e),1==r.audioBufferList.length&&r.playRealTimeEffect(r.audioBufferList[0]),r.isMixingBuffer=!0,t&&t()}),(function(e){r.logger.error("amu.mb.0 "+e),t&&t({code:o.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.code,message:o.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.message+" "+e})}))):this.logger.error("amu.mb.0 audio is mixing")},e.prototype.setMixingAudioVolume=function(e){return this.gainNode?(this.gainNode.gain.value=e,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},e}();t.AudioBufferProcessor=n},4194:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMix=void 0;var r=function(){function e(e,t,r,o,n,i){this.logger=e,this.ac=t,this.localStream=r,this.mediaEleSources=o,this.browser=n,this.rtcViewer=i,this.replace=!1,this.isMixAudio=!1,this.audioCurrentTimer=null,this.audioResumedTimer=null}return e.prototype.startMixingAudio=function(e,t){if(this.replace=t||!1,this.isMixAudio)return this.logger.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.logger.error("amu.sma.0 localStream can not be found"),!1;if(e.captureStream=e.captureStream||e.mozCaptureStream||e.webkitCaptureStream,this.ac.resume(),this.gainNode=this.ac.createGain(),"safari"===this.browser){var r=this.mediaEleSources.find((function(t){return t.audio===e}));if(r)this.audioNode=r.node;else{var o=this.ac.createMediaElementSource(e);this.audioNode=o,this.mediaEleSources.push({audio:e,node:o})}this.getBrowserInfo(),this.audioResumedTimer=setInterval((function(){e.currentTime=e.currentTime+.45}),6e3)}else this.audioNode=this.ac.createMediaStreamSource(e.captureStream());return this.audioNode.connect(this.gainNode),this.replaceTrack()},e.prototype.getBrowserInfo=function(){var e,t={},r=navigator.userAgent.toLowerCase();e=(r.match(/x [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),t.sysVer=e;var o=r.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);return o&&(t.browser=o[1].replace(/version/,"'safari"),t.ver=o[2]),t},e.prototype.replaceTrack=function(){if(!this.destination||!this.streamSource)return!1;!this.replace&&this.streamSource.connect(this.destination),this.gainNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0];return this.micTrack=this.localStream.getAudioTracks()[0],this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(e),this.rtcViewer&&this.rtcViewer.setAudio(e),this.isMixAudio=!0,!0},e.prototype.stopMixingAudio=function(){return this.isMixAudio?this.localStream?(this.audioNode&&(this.audioNode.disconnect(this.gainNode),this.audioNode=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null),this.audioResumedTimer&&(clearInterval(this.audioResumedTimer),this.audioResumedTimer=null)),this.gainNode.disconnect(this.destination),this.isMixAudio=!1,!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},e.prototype.setMixingAudioVolume=function(e){return this.gainNode?(this.gainNode.gain.value=e,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},e}();t.AudioMix=r},6459:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMixModule=void 0;var i=r(2523),s=r(6447),a=r(8011),c=function(){function e(e,t,r,o,n){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=o,this.ac=n,this.buffer=null,this.blank=null,"safari"==this.stateCenter.browser&&null==this.blank&&null==this.buffer&&(this.ac.resume(),this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start())}return e.prototype.preloadEffect=function(e,t,r){if(this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT,{effectID:e},{effectID:!0}))if(t&&"string"==typeof t){if(this.stateCenter.audioEffectBuffer[e])return this.logger.warn(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" audio buffer already exists"),void(r&&r());this.logger.info(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" start preload effect"),this._preloadEffect(this.ac,e,t,r)}else this.logger.error(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" params error")},e.prototype.checkPreviewer=function(e,t,r){void 0===t&&(t={});var o=!!(null==r?void 0:r.effectID),n=!!(null==r?void 0:r.previewer),i=t.effectID,s=t.streamID;return!(null==r?void 0:r.streamID)&&!s||"string"==typeof s||s instanceof MediaStream?o&&!i?(this.logger.error(e+" effectID required"),!1):i&&"string"!=typeof i?(this.logger.error(e+" effectID type error"),!1):!n||this.streamCenter.getPreviewer(s)||(this.logger.error("string"==typeof s?e+" "+s+" stream is not publishing":e+" stream doesn't exist"),!1):(this.logger.error(e+" stream type error"),!1)},e.prototype.getEffectDuration=function(e){if(!this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{effectID:e},{effectID:!0}))return 0;var t=this.stateCenter.audioEffectBuffer[e];return t?t.duration?Math.floor(1e3*t.duration):0:(this.logger.error(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" effect not found"),0)},e.prototype.getEffectProgress=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return"boolean"==typeof r?0:this.getAudioManager(r).getEffectProgress(t)},e.prototype.seekAudioEffect=function(e,t,r){if(r<0)return this.logger.error(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" param time error "),!1;var o=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return"boolean"!=typeof o&&this.getAudioManager(o).seekAudioEffect(t,r)},e.prototype.playEffect=function(e,t,r){return o(this,void 0,void 0,(function(){var o,s,a,c=this;return n(this,(function(n){switch(n.label){case 0:return o=e.path,this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT,{streamID:e.stream||e.streamID,effectID:s=e.effectID},{streamID:!0,effectID:!0})?(a=this.stateCenter.audioEffectBuffer[s],o?a?(this.logger.warn(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio effect already exists"),[3,3]):[3,1]:[3,4]):[2];case 1:return[4,new Promise((function(e,t){c.preloadEffect(s,o,(function(r){r?(c.logger.error(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" preload audio effect failed"),t(r)):e(void 0)}))}))];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:if(!a)return this.logger.error(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio effect doesn't exists"),[2];n.label=5;case 5:return this._playEffect(e,t,r),[2]}}))}))},e.prototype.pauseEffect=function(e,t){return this._pauseEffect(e,t)},e.prototype.resumeEffect=function(e,t){return this._resumeEffect(e,t)},e.prototype.stopEffect=function(e,t){return this._stopEffect(e,t)},e.prototype.unloadEffect=function(e){return!!this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.UNLOAD_EFFECT,{effectID:e},{effectID:!0})&&(delete this.stateCenter.audioEffectBuffer[e],!0)},e.prototype.setEffectVolume=function(e,t,r){if("number"!=typeof t||t<0||t>200)return this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" volume must be a number between 0 and 200"),!1;var o=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME,{streamID:e,effectID:r},{streamID:!0,previewer:!0});return"boolean"!=typeof o&&this.getAudioManager(o).setEffectVolume(t/100,r)},e.prototype.startMixingAudio=function(e,t){return this.logger.info(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" call "+e),e?t?(this.logger.info(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" end "+e),Array.isArray(t)&&0!==t.length&&t.every((function(e){return e instanceof HTMLMediaElement}))?this._startMixingAudio(e,t):(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" audio list param type error"),!1)):(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" no audio"),!1):(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" stream not found"),!1)},e.prototype.stopMixingAudio=function(e,t){return e?Array.isArray(t)&&0!==t.length||void 0===t?this._stopMixingAudio(e,t):(this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" audio param type error"),!1):(this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" stream not found"),!1)},e.prototype.mixingBuffer=function(e,t,r,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" call streamID: "+JSON.stringify(e)+" sourceID:"+t),e?t&&"string"==typeof t?(this._mixingBuffer(e,t,r,o),this.logger.info(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" end")):this.logger.error(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param source id format error"):this.logger.error(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param streamid format error")},e.prototype.stopMixingBuffer=function(e,t){return this._stopMixingBuffer(e,t)},e.prototype.setMixingAudioVolume=function(e,t,r){return this.logger.info(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" call"),e?"number"!=typeof t||t<0||t>200?(this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" volume must be a number between 0 and 200"),!1):r&&r instanceof HTMLMediaElement?this._setMixingAudioVolume(e,t,r):(this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" no audio"),!1):(this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" stream not found"),!1)},e.prototype.getSoundLevel=function(e,t,r){this.logger.info("zc.gsl call");try{var o=this.ac.createMediaStreamSource(e),n=new a.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);n.initAudioWorklet(this.ac,o),n.onSoundLevelUpdate=function(e){t(e)},this.stateCenter.audioStreamList[e.id]={mic:o,script:n}}catch(e){r(e)}this.logger.info("zc.gsl call success")},e.prototype.stopSoundLevel=function(e){this.logger.info("zc.ssl call");var t=this.stateCenter.audioStreamList[e.id];t.mic.disconnect(),t.script.destroy(),delete this.stateCenter.audioStreamList[e.id]},e.prototype._preloadEffect=function(e,t,r,o){var n=this,i=new XMLHttpRequest;i.open("GET",r,!0),i.setRequestHeader("Range","none"),i.responseType="arraybuffer",i.onload=function(){if(200==i.status||304==i.status)e.decodeAudioData(i.response,(function(e){n.logger.info("zc.pe.0 effect '".concat(t,"' preload success")),n.stateCenter.audioEffectBuffer[t]=e,o&&o()}),(function(e){n.logger.error("zc.pe.0 effect '".concat(t,"' preload fail. ")+e),o&&o(e)}));else{var r=i.statusText;n.logger.error("zc.pe.0 effect '".concat(t,"' preload fail.")+r),o&&o(r)}},i.send()},e.prototype._playEffect=function(e,t,r){var o=this.stateCenter.audioEffectBuffer[e.effectID];if(o){var n=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT,{streamID:e.stream||e.streamID,effectID:e.effectID},{streamID:!0,effectID:!0,previewer:!0});"boolean"!=typeof n&&this.getAudioManager(n).playEffect(e,o,t,r)}else this.logger.error(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" no audio buffer found")},e.prototype._pauseEffect=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT,{streamID:e,effectID:t},{streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).pauseEffect(t)},e.prototype._resumeEffect=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.RESUME_EFFECT,{streamID:e,effectID:t},{streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).resumeEffect(t)},e.prototype._stopEffect=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.STOP_EFFECT,{streamID:e,effectID:t},{streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).stopEffect(t)},e.prototype._setMixingAudioVolume=function(e,t,r){var o=this.streamCenter.getPreviewer(e);return o?this.getAudioManager(o).setMixingAudioVolume(t/100,r):(this.logger.error("zc.sma.2 publisher doesn't exist"),!1)},e.prototype._startMixingAudio=function(e,t){var r=this.streamCenter.getPreviewer(e);return r?this.getAudioManager(r).startMixingAudio(t):(this.logger.error("string"==typeof e?"zc.sma.0 "+e+" stream is not publishing":"zc.sma.0 stream doesn't exist"),!1)},e.prototype._stopMixingAudio=function(e,t){var r=this.streamCenter.getPreviewer(e);return r?this.getAudioManager(r).stopMixingAudio(t):(this.logger.error("zc.sma.0 stream doesn't exist"),!1)},e.prototype._mixingBuffer=function(e,t,r,o){var n=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});"boolean"!=typeof n&&(r instanceof ArrayBuffer?this.getAudioManager(n).mixingBuffer(t,r,o):this.logger.error("zc.mb.0 array buffer not found"))},e.prototype._stopMixingBuffer=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).stopMixingBuffer(t)},e.prototype.getAudioManager=function(e){var t=e.audioMixManager;return t||(t=new s.PreviewAudioManager(e),e.audioMixManager=t),t},e}();t.AudioMixModule=c},4853:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={GET_SOUND_LEVEL_FAIL:{code:1000019,message:"get sound level error"},PUBLISHER_DECODE_AUDIO_FAIL:{code:1103057,message:"decode audio data fail"}}},7526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(6459);t.default={type:"AudioMix",install:function(e){Object.defineProperty(e.prototype,"initAudioMix",{value:function(){this.audioMixModule=new o.AudioMixModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac)}})}}},6447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewAudioManager=void 0;var o=r(2523),n=r(3013),i=r(4194),s=function(){function e(e){this.previewer=e,this.audioSrcNode=void 0,this.audioDestNode=void 0,this.audioMixList=[],this.arrayBufferMap={},this.effectList=[],this.mediaEleSources=e.streamCenter.mediaEleSources}return Object.defineProperty(e.prototype,"logger",{get:function(){return this.previewer.logger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this.previewer.localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamCenter",{get:function(){return this.previewer.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ac",{get:function(){return this.previewer.ac},enumerable:!1,configurable:!0}),e.prototype.startMixingAudio=function(e){var t=this;return this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" call"),this.localStream?(e.forEach((function(e){var r;if(t.audioMixList.find((function(t){return t.media==e})))t.logger.warn(o.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" mix audio already exist");else if(t.localStream){t.streamCenter.soundLevelDelegate&&t.previewer.stopSoundLevel();var n=new i.AudioMix(t.logger,t.ac,t.localStream,t.mediaEleSources,t.previewer.stateCenter.browser,t.previewer.rtcViewer);t.audioSrcNode||(t.audioSrcNode=t.ac.createMediaStreamSource(t.localStream));var s=!1;t.audioDestNode||(t.audioDestNode=t.ac.createMediaStreamDestination(),s=!0),n.destination=t.audioDestNode,n.streamSource=t.audioSrcNode,t.audioMixList.push({audioMix:n,media:e}),n.startMixingAudio(e),s&&(null===(r=t.audioDestNode)||void 0===r?void 0:r.stream)&&t.previewer.onAudioTrackChange(t.audioDestNode.stream.getAudioTracks()[0]),t.streamCenter.soundLevelDelegate&&t.previewer.startSoundLevel()}})),!0):(this.logger.error(o.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" localStream not found"),!1)},e.prototype.stopMixingAudio=function(e){var t=this;return this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_MIXING_AUDIO+" call"),e?e.forEach((function(e){for(var r=0;r<t.audioMixList.length;r++)if(t.audioMixList[r].media==e){t.audioMixList[r].audioMix.stopMixingAudio()&&t.audioMixList.splice(r--,1);break}})):(this.audioMixList.forEach((function(e){return e.audioMix.stopMixingAudio()})),this.audioMixList=[]),!0},e.prototype.setMixingAudioVolume=function(e,t){this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" call");var r=this.audioMixList.find((function(e){return e.media===t}));return r?(r.audioMix.setMixingAudioVolume(e),this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" call success"),!0):(this.logger.error(o.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" audio is not mixing"),!1)},e.prototype.playEffect=function(e,t,r,i){var s=this;if(this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" call"),this.localStream)if(this.effectList.find((function(r){return r.effectID==e.effectID&&r.audioBuffer==t})))this.logger.warn(o.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" effect already exist ");else{this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var a=new n.AudioBufferProcessor(this.logger,this.ac,this.localStream,this.previewer.rtcViewer);this.audioSrcNode||(this.audioSrcNode=this.ac.createMediaStreamSource(this.localStream));var c=!1;this.audioDestNode||(this.audioDestNode=this.ac.createMediaStreamDestination(),c=!0),a.destination=this.audioDestNode,a.streamSource=this.audioSrcNode,a.audioBuffer=t;var u={processor:a,effectID:e.effectID,audioBuffer:t};this.effectList.push(u),a.playEffect(e.playTime,e.loop,!1,(function(){var e;c&&(null===(e=s.audioDestNode)||void 0===e?void 0:e.stream)&&s.previewer.onAudioTrackChange(s.audioDestNode.stream.getAudioTracks()[0]),r&&r()}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.effectList=s.effectList.filter((function(e){return e!==u})),i&&i.apply(void 0,e)})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" play effect "+e.effectID+" success")}else this.logger.warn(o.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" stream not found")},e.prototype.pauseEffect=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),t.processor.pauseEffect(),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(o.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" effect not found"),!1;this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach((function(e){return e.processor.pauseEffect()})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel()}return!0},e.prototype.resumeEffect=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t){this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var r=t.processor.resumeEffect();return this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" resume "+e+" success"),r}return void 0===e?(this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach((function(e){return e.processor.resumeEffect()})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0):(this.logger.error(o.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" no effect found"),!1)},e.prototype.stopEffect=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),t.processor.stopMixingAudio(),this.effectList=this.effectList.filter((function(e){return e!==t})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(o.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" effect not found"),!1;this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach((function(e){return e.processor.stopMixingAudio()})),this.effectList=[],this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel()}return!0},e.prototype.setEffectVolume=function(e,t){var r=this.effectList.find((function(e){return e.effectID==t}));if(r)r.processor.setMixingAudioVolume(e),this.logger.info("zp.sev.0 set volume "+t+" success");else{if(void 0!==t)return this.logger.error("zp.sev.0 effect not found"),!1;this.effectList.forEach((function(t){return t.processor.setMixingAudioVolume(e)}))}return!0},e.prototype.mixingBuffer=function(e,t,r){var i=this;if(this.logger.info(o.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" call"),this.localStream)if(this.arrayBufferMap[e])this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap[e].mixingBuffer(t,(function(){i.streamCenter.soundLevelDelegate&&i.previewer.startSoundLevel(),r&&r()}));else{this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var s=new n.AudioBufferProcessor(this.logger,this.ac,this.localStream,this.previewer.rtcViewer);this.audioSrcNode||(this.audioSrcNode=this.ac.createMediaStreamSource(this.localStream));var a=!1;this.audioDestNode||(this.audioDestNode=this.ac.createMediaStreamDestination(),a=!0),s.destination=this.audioDestNode,s.streamSource=this.audioSrcNode,this.arrayBufferMap[e]=s,s.mixingBuffer(t,(function(){var e;i.streamCenter.soundLevelDelegate&&i.previewer.startSoundLevel(),a&&(null===(e=i.audioDestNode)||void 0===e?void 0:e.stream)&&i.previewer.onAudioTrackChange(i.audioDestNode.stream.getAudioTracks()[0]),r&&r()}))}},e.prototype.stopMixingBuffer=function(e){if(e&&this.arrayBufferMap[e])return this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap[e].stopMixingBuffer(),delete this.arrayBufferMap[e],this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0;if(void 0===e){for(var t in this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap)this.arrayBufferMap[t].stopMixingBuffer();return this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0}return this.logger.warn(o.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" arrayBuffer no found"),!1},e.prototype.getEffectProgress=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));return t?t.processor.getProcess():(this.logger.error(o.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+"  effect not found"),0)},e.prototype.seekAudioEffect=function(e,t){var r=this.effectList.find((function(t){return t.effectID==e}));return r?(this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),r.processor.seekTo(t),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0):(this.logger.error(o.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" effect not found"),!1)},e.prototype.stopAudioManager=function(){this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect()},e}();t.PreviewAudioManager=s},4897:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannel=void 0;var o=r(8835);t.DataChannel={type:"DataChannel",install:function(e){Object.defineProperty(e.prototype,"createRealTimeSequentialDataManager",{value:function(e){this.enableDataChannel(!0);var t=this.stateCenter.getRoomByRoomID(e);return t?t.dataChannelManager?null:(t.dataChannelManager=new o.ZegoRealTimeSequentialDataManager(this,e),t.dataChannelManager):(this.logger.error("zc.crsdm room no exist"),null)},writable:!1}),Object.defineProperty(e.prototype,"destroyRealTimeSequentialDataManager",{value:function(e){var t=this.stateCenter.roomList.find((function(t){return t.dataChannelManager==e}));t&&(e.dataChannelManager.reset(),t.dataChannelManager=null)},writable:!1})}}},3504:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannelListener=void 0;var n=function(){function e(e,t){this.zegoWebRTC=e,this.roomID=t,this.pubDataChannelList=[],this.subDataChannelList=[],this.listenerList={receiveRealTimeSequentialData:[]},this.logger=e.logger}return e.prototype.startBroadcasting=function(e,t){return r(this,void 0,void 0,(function(){var t,r,n,i;return o(this,(function(o){switch(o.label){case 0:return this.logger.info("dc.sb.0 call"),this.pubDataChannelList.includes(e)?(this.logger.error("dc.sb.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.publisherList[e])&&t.publisher.dataChannel?(this.pubDataChannelList.push(e),[2,!0]):t&&!t.publisher.dataChannel?(this.logger.error("dc.sb.0 publish datachannel no exist, try other stream ID"),[2,!1]):this.broadcastStream?[3,2]:(r=document.createElement("canvas"),n=this,[4,this.zegoWebRTC.createStream({custom:{source:r}})]);case 1:n.broadcastStream=o.sent(),o.label=2;case 2:return(i=this.zegoWebRTC.startPublishingStream(e,this.broadcastStream,{roomID:this.roomID},!0))&&this.pubDataChannelList.push(e),this.logger.info("dc.sb.0 end"),[2,i]}}))}))},e.prototype.stopBroadcasting=function(e){this.logger.info("dc.sb.1 call"),this.pubDataChannelList=this.pubDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.publisherList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPublishingStream(e),this.logger.info("dc.sb.1 end"),!0):(this.logger.error("dc.sb.1 datachannel no found"),!1)},e.prototype.sendRealTimeSequentialData=function(e,t){if(!t instanceof ArrayBuffer)return this.logger.error("dc.srsd data type wrong"),!1;var r=this.zegoWebRTC.streamCenter.publisherList[e];return r&&this.pubDataChannelList.includes(e)?this.sendBCMessage(r.publisher,t):(this.logger.error("dc.srsd datachannel no found"),!1)},e.prototype.sendBCMessage=function(e,t){var r;if(!e.dataChannelState)return!1;for(var o=new Uint8Array(t),n=0,i=t.byteLength,s=e.send_seq,a=0,c=(new Date).getTime(),u=0;i>0;){i>1151?u=1141:(u=i,a=1);var l=new Uint8Array(u+10);l[0]=1,l[1]=a,l[2]=e.send_seq>>8&255,l[3]=255&e.send_seq,l[4]=s>>8&255,l[5]=255&s,l[6]=c>>24&255,l[7]=c>>16&255,l[8]=c>>8&255,l[9]=255&c;for(var d=0;d<u;d++)l[d+10]=o[d+n];i-=u,n+=u,e.send_seq++,e.send_seq>=65536&&(e.send_seq=0),null===(r=e.dataChannel)||void 0===r||r.send(l)}return!0},e.prototype.startSubscribing=function(e,t){var n,i;return r(this,void 0,void 0,(function(){var t,r;return o(this,(function(o){switch(o.label){case 0:return this.logger.info("dc.ss.0 call"),this.subDataChannelList.includes(e)?(this.logger.error("dc.ss.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.playerList[e])?[3,2]:[4,this.zegoWebRTC.startPlayingStream(e,void 0,!0)];case 1:o.sent(),t=this.zegoWebRTC.streamCenter.playerList[e],o.label=2;case 2:return(r=t.player).dataChannel?(!(null===(n=r.onDataChannelList)||void 0===n?void 0:n.includes(this.onReceivedDataChannel.bind(this)))&&(null===(i=r.onDataChannelList)||void 0===i||i.push(this.onReceivedDataChannel.bind(this))),this.subDataChannelList.push(e),this.logger.info("dc.ss.0 end"),[2,!0]):(this.logger.error("dc.ss.0 datachannel no exist, try other stream ID"),[2,!1])}}))}))},e.prototype.stopSubscribing=function(e){this.logger.info("dc.ss.1 call"),this.subDataChannelList=this.subDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.playerList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPlayingStream(e),this.logger.info("dc.ss.1 end"),!0):(this.logger.error("dc.ss.1 datachannel no subscribe"),!1)},e.prototype.on=function(e,t){this.bindListener(e,t)},e.prototype.off=function(e,t){this.deleteListener(e,t)},e.prototype.bindListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error("dc.o.0 event "+e+" no found"),!1)},e.prototype.deleteListener=function(e,t){if(!this.listenerList[e])return this.logger.error("dc.o.1 listener no found"),!1;var r=this.listenerList[e];return t?r.splice(r.indexOf(t),1):this.listenerList[e]=[],!0},e.prototype.actionListener=function(e){for(var t=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];this.listenerList[e]&&this.listenerList[e].forEach((function(o){try{setTimeout((function(){o.apply(void 0,r)}),0)}catch(r){t.logger.error("dc.al "+e+" "+r)}}))},e.prototype.onReceivedDataChannel=function(e,t,r){this.actionListener("receiveRealTimeSequentialData",e,t,r)},e.prototype.reset=function(){var e=this;for(var t in this.logger.info("dc.rs call"),this.pubDataChannelList.forEach((function(t){var r=e.zegoWebRTC.streamCenter.publisherList[t];r&&r.room.roomID==e.roomID&&r.isDataChannel&&e.zegoWebRTC.stopPublishingStream(t)})),this.subDataChannelList.forEach((function(t){var r=e.zegoWebRTC.streamCenter.playerList[t];r&&r.room.roomID==e.roomID&&r.isDataChannel&&e.zegoWebRTC.stopPlayingStream(t)})),this.listenerList)this.listenerList[t]=[];this.broadcastStream&&this.zegoWebRTC.destroyStream(this.broadcastStream),this.broadcastStream=void 0,this.logger.info("dc.rs end")},e}();t.DataChannelListener=n},5906:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.streamHandler=t.zegoWebRTC=t.TRACER_LEVEL=void 0;var n,i=r(817),s=r(6145),a="2.21.0",c=1e4,u={};!function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(n=t.TRACER_LEVEL||(t.TRACER_LEVEL={}));var l={code:1005027,message:"mix stream input parameters are wrong"};function d(e,t){var r,o,n,s,a="",u=i.errorCodeList;return t.errorCode<2e9&&t.errorCode>1e9?(n={1:"MIXER_START_REQUEST_ERROR",2:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",175:"MIXER_REPEAT_INPUT",190:"MIXER_START_REQUEST_ERROR"},s="MIXER_INNER_ERROR",(o=t.errorCode-c)>1e9&&n[o-1e9]&&(s=n[o-1e9]),r=u[a=s]):t.errorCode<1e6&&(r=e.decodeServerError(t.errorCode,t.extendedData),a=e.getLiveRoomError(t.errorCode,this.stateCenter.useNetAgent)),{reportErr:r,actualError:u[a]}}t.zegoWebRTC={startMixerTask:function(e){var t=this;return new Promise((function(r,o){var i=t.stateCenter.reporter.createSpan(n.H,{key:s.ZegoRTCLogEvent.kZMInitSetting.event},{key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID},s.ZegoRTCLogEvent.kZegoTaskMixStart.event,!0),a={errorCode:l.code,extendedData:l.message};if(null==e?void 0:e.inputList.find((function(e){return null==e.streamID&&(a.extendedData=a.extendedData+". streamID should be of string type",!0)})))return t.stateCenter.reporter.setError(i,l),void o(a);e.outputConfig&&e.outputConfig.outputFps&&(e.outputConfig.outputFPS=e.outputConfig.outputFps);var c=function(r){var n=d(t.stateCenter,r),a=n.reportErr,c=n.actualError;1005026===r.errorCode&&i.setAttributes({stop_reason:"UnmatchStreamId"}),t.stateCenter.reporter.setError(i,a||r),t.stateCenter.reporter.spanEnd({key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID}),c&&(r.errorCode=null==c?void 0:c.code,r.extendedData=(null==c?void 0:c.message)||""),o(r)},u=t.stateCenter.roomList[0];u?u.streamHandler.updateMixStream(e,(function(o){t.stateCenter.reporter.spanEnd({key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID}),r(o)}),c):c({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.message})}))},setMixerTaskConfig:function(e){var t=this;return new Promise((function(r,o){var i=t.stateCenter.reporter.createSpan(n.H,{key:s.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},s.ZegoRTCLogEvent.kZegoTaskMixConfig.event);i.setAttributes({mix_params:s.ZegoRTCLogEvent.kZegoTaskMixConfig.mix_params(e)});var a=t.stateCenter.roomList[0];a?a.streamHandler.setMixerTaskConfig(e).then((function(e){i.end(),r(e)})).catch((function(e){t.stateCenter.reporter.setError(i,e),o(e)})):o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.message})}))},stopMixerTask:function(e){var t=this;return new Promise((function(r,o){var i=t.stateCenter.reporter.createSpan(n.H,{key:s.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},s.ZegoRTCLogEvent.kZegoTaskMixStop.event);if(!e||"string"!=typeof e||e.length>256||!t.stateCenter.checkIllegalCharacters(e))return t.logger.error("zb.rh.lg taskID must be string less 256"),t.stateCenter.reporter.setError(i,s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError," param taskID error"),void o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message+" param taskID error"});i.setAttributes({mix_task_id:e});var a=function(e){var r=d(t.stateCenter,e),n=r.actualError;t.stateCenter.reporter.setError(i,r.reportErr||e),n&&(e.errorCode=null==n?void 0:n.code,e.extendedData=(null==n?void 0:n.message)||""),o(e)},c=t.stateCenter.roomList[0];c?c.streamHandler.stopMixStream(e,(function(e){i.end(),r(e)}),a):a({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.message})}))}},t.streamHandler={setMixerTaskConfig:function(e){var t=this;return new Promise((function(r,o){var n,i={},a={};if(e&&e.videoCodec){var c=e.videoCodec.toLowerCase();if(-1==["vp8","h264"].indexOf(c))return t.logger.error("zb.sh.ums param videoCode error"),o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.message}),!1;i.videoCodec=c,a.video_codec=c}if(e.backgroundColor){if(!t.stateCenter.checkInteger(e.backgroundColor))return t.logger.error("zb.sh.ums param backgroundColor must be integer number"),o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;i.backgroundColor=e.backgroundColor,a.background_color=e.backgroundColor}if(e.backgroundImage){if("string"!=typeof e.backgroundImage)return t.logger.error("zb.sh.ums param outputBgImage error"),o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(!e.backgroundImage.startsWith("preset-id://")||!e.backgroundImage.endsWith(".jpg")&&!e.backgroundImage.endsWith(".png"))return t.logger.error("zb.sh.ums illegal input background image URL"),o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.message}),!1;i.backgroundImage=e.backgroundImage,a.background_image=e.backgroundImage}if(e.waterMark&&(i.waterMark=e.waterMark,a.water_mark=e.waterMark),e&&e.userData){if(!(e.userData instanceof Uint8Array))return t.logger.error("zb.sh.ums param userData required Uint8Array"),o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(e.userData.byteLength>1e3)return t.logger.error("zb.sh.ums param userData should shorter than 1000"),o({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;i.userData=e.userData}e.extraParams&&(i.extraParams||(i.extraParams=[]),(n=i.extraParams).push.apply(n,e.extraParams)),u=i,r({errorCode:0,extendedData:""})}))},stopMixStream:function(e,t,r,o,n){var u=this;this.logger.info("zb.sh.sms call");var l={id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:a};if("string"==typeof e&&(l.task_id=e),null!=o?l.stream_id=this.stateCenter.testEnvironment?"zegotest-"+this.stateCenter.appid+"-"+o:o:null!=n&&(l.mixurl=n),this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:12,location:"/interface/command",cmd:"stop_mix"},l,(function(e){t&&t({errorCode:0,extendedData:""})}),(function(e,t,o,n){var a="";if(n)return n==i.errorCodeList.TIMEOUT&&(n=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError),n.code&&20010===n.code&&(n=JSON.parse(JSON.stringify(i.errorCodeList.MIXER_NO_SERVICES))),void(r&&r(n,a));if(n=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,200===e){if("number"==typeof t)return u.logger.debug("zb.sh.sms error: "+t),t+=1e9,void(r&&r({errorCode:u.stateCenter.getServerError(c+t).code,extendedData:a}));u.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(error));var l=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError;r&&r({errorCode:l.code,extendedData:l.message})}else u.logger.error("zb.sh.sms "+(a="request mix server fail, error: "+e)),r&&r(n,a)}));else{var d={channel:"zeus",cmd:"stop_mix",req_body:JSON.stringify(l)};this.sendBizChannelRequest(d,(function(){t&&t({errorCode:0,extendedData:""})}),(function(e){var t;"number"==typeof e?r&&r({errorCode:u.stateCenter.getServerError(c+e).code,extendedData:""}):(u.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(e)),t=e==i.errorCodeList.TIMEOUT?s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kRequestError:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kInternalError,r&&r({errorCode:t.code,extendedData:t.message}))}))}return!0},updateMixStream:function(e,t,r){var n,l=this;this.logger.info("zb.sh.ums call");var d,h=[];if(!e.noTaskID&&!e.taskID)return this.logger.error("zb.sh.ums no taskId found"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.message}),!1;if(!e.noTaskID&&"string"!=typeof e.taskID)return this.logger.error("zb.rh.lg taskId must be string"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.noTaskID&&e.taskID.length>256)return this.logger.error("zb.sh.ums taskId is too long"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.message}),!1;if(!e.noTaskID&&!this.stateCenter.checkIllegalCharacters(e.taskID))return this.logger.error("zb.sh.ums task ID contains illegal characters"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.message}),!1;if(!e.inputList||0==e.inputList.length)return this.logger.error("zb.sh.ums input list wrong"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.message}),!1;e.inputList.forEach((function(e){"AUDIO"===e.contentType&&(!e.layout&&(e.layout={top:0,left:0,bottom:0,right:0}),e.layout.top=0,e.layout.left=0,e.layout.bottom=1,e.layout.right=1)}));for(var p=0;p<e.inputList.length;p++){var f=e.inputList[p],_={errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message};if("object"!=typeof f.layout)return this.logger.error("zb.sh.ums input layout must be object"),r(_),!1;if(!(this.stateCenter.checkInteger(f.layout.top,!1)&&this.stateCenter.checkInteger(f.layout.bottom,!1)&&this.stateCenter.checkInteger(f.layout.left,!1)&&this.stateCenter.checkInteger(f.layout.right,!1)))return this.logger.error("zb.sh.ums top\u3001left\u3001bottom\u3001right must be integer number"),r(_),!1;if(void 0!==f.renderMode&&![0,1].includes(f.renderMode))return this.logger.error("zb.sh.ums render_mode is wrong"),r(_),!1}if(!e.outputList||0==e.outputList.length)return this.logger.error("zb.sh.ums no output list found"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.message}),!1;if(e.outputList.some((function(e){return"string"==typeof e&&!l.stateCenter.isUrl(e)&&!l.stateCenter.checkIllegalCharacters(e)||"object"==typeof e&&e.target&&!l.stateCenter.isUrl(e.target)&&!l.stateCenter.checkIllegalCharacters(e.target)})))return this.logger.error("zb.sh.ums stream output target is incorrect"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;if(!((d=e.inputList.every((function(e){return"AUDIO"===e.contentType})))||e.outputConfig&&"object"==typeof e.outputConfig))return this.logger.error("zb.sh.ums no output config found"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.message}),!1;if(d&&(e.outputConfig=o(o({},e.outputConfig||{}),{outputBitrate:.001,outputFPS:1,outputWidth:1,outputHeight:1})),!(d||e.outputConfig.outputBitrate&&this.stateCenter.checkInteger(e.outputConfig.outputBitrate)))return this.logger.error("zb.sh.ums bitrate param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputFPS||!this.stateCenter.checkInteger(e.outputConfig.outputFPS))return this.logger.error("zb.sh.ums fps param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputWidth||!this.stateCenter.checkInteger(e.outputConfig.outputWidth))return this.logger.error("zb.sh.ums width param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputHeight||!this.stateCenter.checkInteger(e.outputConfig.outputHeight))return this.logger.error("zb.sh.ums height param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioCodecID&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioCodecID,!1))return this.logger.error("zb.sh.ums AudioCodecID param must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioBitrate&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioBitrate))return this.logger.error("zb.sh.ums AudioBitrate param must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioChannels&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioChannels,!1))return this.logger.error("zb.sh.ums AudioChannels param must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;var g=[];for(p=0;p<e.inputList.length;p++){var m=e.inputList[p],v=m.streamID;this.stateCenter.testEnvironment&&(v="zegotest-"+this.stateCenter.appid+"-"+m.streamID),g.push({stream_id:v,content_control:"AUDIO"===m.contentType?1:0,rect:{layer:p,top:m.layout.top,left:m.layout.left,bottom:m.layout.bottom,right:m.layout.right},render_mode:m.renderMode}),h.push({stream_id:v,content_control:"AUDIO"===m.contentType?1:0,top:m.layout.top,left:m.layout.left,bottom:m.layout.bottom,right:m.layout.right,render_mode:m.renderMode})}var y={},b=[],S=0;e.outputConfig.singleStreamPassThrough&&"boolean"==typeof e.outputConfig.singleStreamPassThrough&&(S=e.outputConfig.singleStreamPassThrough?1:0),y={task_id:e.taskID,id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:a,bypass:S,timestamp:Math.ceil((new Date).getTime()/1e3)};var E=u;E&&(E.videoCodec&&(y.extra_params=[{key:"video_encode",value:E.videoCodec}]),E.backgroundColor&&(y.output_bg_color=E.backgroundColor),E.backgroundImage&&(y.output_bg_image=E.backgroundImage),E.waterMark&&(y.watermark=E.waterMark),E.userData&&(y.userdata=this.stateCenter.uint8arrayToBase64(E.userData)),E.extraParams&&(!y.extra_params&&(y.extra_params=[]),(n=y.extra_params).push.apply(n,E.extraParams))),y.MixInput=e.inputList.map((function(e,t){var r=e.streamID;return l.stateCenter.testEnvironment&&(r="zegotest-"+l.stateCenter.appid+"-"+e.streamID),{stream_id:r,content_control:"AUDIO"===e.contentType?1:0,rect:{layer:t,top:e.layout.top,left:e.layout.left,bottom:e.layout.bottom,right:e.layout.right},render_mode:e.renderMode}}));var T=[];y.MixOutput=e.outputList.map((function(t){var o={},n="";if("string"==typeof t)n=t;else{if("object"!=typeof t||!t.target)return l.logger.error("zb.sh.ums output target required"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;n=t.target}return n.startsWith("rtmp://")||n.startsWith("https://")&&n.endsWith(".flv")||n.startsWith("https://")&&n.endsWith(".m3u8")?o.mixurl=n:o.stream_id=l.stateCenter.testEnvironment?"zegotest-"+l.stateCenter.appid+"-"+n:n,o.bitrate=1e3*e.outputConfig.outputBitrate,o.fps=e.outputConfig.outputFPS,o.width=e.outputConfig.outputWidth,o.height=e.outputConfig.outputHeight,e.outputConfig.outputAudioCodecID&&(o.audio_enc_id=e.outputConfig.outputAudioCodecID),"vp8"===E.videoCodec?o.audio_enc_id=3:"h264"===E.videoCodec&&(o.audio_enc_id=0),e.outputConfig.outputAudioBitrate&&(o.audio_bitrate=1e3*e.outputConfig.outputAudioBitrate),e.outputConfig.outputAudioChannels&&(o.audio_channel_cnt=e.outputConfig.outputAudioChannels),o.testenv=l.stateCenter.testEnvironment?1:0,T.push(o),b.push({target:o.mixurl||o.stream_id,is_url:!!o.mixurl+""}),o}));var w=e.outputConfig;this.stateCenter.reporter.spanSetAttributes({key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID},{mix_stream_conf:s.ZegoRTCLogEvent.kZegoTaskMixStart.mix_stream_conf({fps:w.outputFPS,bitrate:w.outputBitrate,w:w.outputWidth,h:w.outputHeight,stream_cnt:h.length,mix_task_id:e.taskID,input_stream_list:h,output_target_list:b})}),this.logger.debug("zb.sh.ums send command");var C="zegotest-"+this.stateCenter.appid+"-";if(this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:12,location:"/interface/command",cmd:"start_mix"},y,(function(e){var r=e.play.map((function(e){var t={rtmpURL:"",hlsURL:"",flvURL:""},r=e.stream_alias||"";return l.stateCenter.testEnvironment&&r&&r.startsWith(C)&&(r=r.slice(C.length)),t.streamID=r,e.rtmp_url&&e.rtmp_url.length>0&&(t.rtmpURL=e.rtmp_url),e.hls_url&&e.hls_url.length>0&&(t.hlsURL=e.hls_url),e.hdl_url&&e.hdl_url.length>0&&(t.flvURL=e.hdl_url),t}));t&&t({errorCode:0,extendedData:JSON.stringify({mixerOutputList:r})})}),(function(e,t,o,n){var a="";if(n)return n==i.errorCodeList.TIMEOUT&&(n=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError),n.code&&20010===n.code&&(n=JSON.parse(JSON.stringify(i.errorCodeList.MIXER_NO_SERVICES))),void(r&&r(n,a));if(n=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,200===e){if("number"==typeof t){if(l.logger.debug("zb.sh.ums error: "+t),1000000150==(t+=1e9)&&o){var u=(null==o?void 0:o.non_exist_streams.map((function(e){return l.stateCenter.testEnvironment&&e.startsWith(C)?e.slice(C.length):e})))||[];u.length>0&&(l.logger.debug("zb.sh.ums not exist streams: "+u),a=u.join(","))}return void(r&&r({errorCode:l.stateCenter.getServerError(c+t).code,extendedData:a}))}l.logger.debug("zb.sh.ums error code "+t);var d=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError;r&&r({errorCode:d.code,extendedData:d.message})}else l.logger.error("zb.sh.ums "+(a="request mix server fail, error: "+e)),r&&r(n,a)}));else{var I={channel:"zeus",cmd:"start_mix",req_body:JSON.stringify(y)};this.sendBizChannelRequest(I,(function(e,o,n){if(l.logger.debug("zb.sh.ums receive message"),0!=n.length){for(var i=JSON.parse(n),s=[],a=0;a<i.play.length;a++){var c={rtmpURL:"",hlsURL:"",flvURL:""},u=i.play[a].stream_alias||"";l.stateCenter.testEnvironment&&u&&u.startsWith(C)&&(u=u.slice(C.length)),c.streamID=u,i.play[a].rtmp_url&&i.play[a].rtmp_url.length>0&&(c.rtmpURL=i.play[a].rtmp_url),i.play[a].hls_url&&i.play[a].hls_url.length>0&&(c.hlsURL=i.play[a].hls_url),i.play[a].hdl_url&&i.play[a].hdl_url.length>0&&(c.flvURL=i.play[a].hdl_url),s.push(c)}t&&t({errorCode:0,extendedData:JSON.stringify({mixerOutputList:s})})}else r&&r({errorCode:l.stateCenter.getServerError(10001).code,extendedData:""})}),(function(e,t,o){if("number"==typeof e){l.logger.debug("zb.sh.ums error: "+e);var n=[];if(1000000150==e&&0!=o.length)for(var a=JSON.parse(o),u=0;u<a.non_exist_streams.length;u++){var d=a.non_exist_streams[u];l.stateCenter.testEnvironment&&d.startsWith(C)?n.push(d.slice(C.length)):n.push(d)}r&&r({errorCode:l.stateCenter.getServerError(c+e).code,extendedData:""})}else{var h;l.logger.debug("zb.sh.ums error code "+e.code),h=e==i.errorCodeList.TIMEOUT?s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,r&&r({errorCode:h.code,extendedData:h.message})}}))}return!0}}},817:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOP_MIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_REPEAT_INPUT:{code:1005099,message:"mix stream input repeat"},MIXER_INNER_ERROR:{code:1005099,message:"mixer internal error"}}},577:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5906);t.default={type:"MixStream",install:function(e,t){for(var r in o.zegoWebRTC)Object.defineProperty(e.prototype,r,{value:o.zegoWebRTC[r],writable:!1});for(var r in o.streamHandler)Object.defineProperty(t.prototype,r,{value:o.streamHandler[r],writable:!1})}}},6145:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var o=r(817),n=function(e){return e};t.ZegoRTCLogEvent={kZMInitSetting:{event:"/sdk/init"},kZegoTaskMixStart:{event:"/mix/start_mix",error:{kParamError:o.errorCodeList.INPUT_PARAM,kTaskIDNullError:o.errorCodeList.MIXER_TASK_ID_NULL,kTaskIDToLongError:o.errorCodeList.MIXER_TASK_ID_TOO_LONG,kTaskIDInvalidCharacterError:o.errorCodeList.MIXER_TASK_ID_INVALID_CHARACTER,kInputListNullError:o.errorCodeList.MIXER_INPUTLIST_NULL,kOutputListNullError:o.errorCodeList.MIXER_OUTPUTLIST_NULL,kOutputTargetInvalidError:o.errorCodeList.MIXER_OUTPUT_TARGET_INVALID,kOutputNoTargetError:o.errorCodeList.MIXER_NO_OUTPUT_TARGET,kRequestError:o.errorCodeList.MIXER_START_REQUEST_ERROR,kInternalError:o.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:o.errorCodeList.NOT_LOGIN},mix_stream_conf:n,stop_reason:function(e){return e}},kZegoTaskMixStop:{event:"/mix/stop_mix",error:{kParamError:o.errorCodeList.INPUT_PARAM,kTaskIDNullError:o.errorCodeList.MIXER_TASK_ID_NULL,kRequestError:o.errorCodeList.MIXER_STOP_REQUEST_ERROR,kInternalError:o.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:o.errorCodeList.NOT_LOGIN}},kZegoTaskMixConfig:{event:"/mix/config_mix",error:{kParamError:o.errorCodeList.INPUT_PARAM,kVideoConfigInvalidError:o.errorCodeList.MIXER_VIDEO_CONFIG_INVALID,kBackgroundImageUrlInvalidError:o.errorCodeList.MIXER_BACKGROUND_IMAGE_URL_INVALID,kNoLoginError:o.errorCodeList.NOT_LOGIN},mix_params:n}}},2760:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemInfo=void 0;var c=a(r(2730)),u=a(r(2846)),l=a(r(3402)),d=a(r(5947)),h=a(r(1646)),p=a(r(1576)),f=r(7803),_=r(5130),g=r(608);function m(){var e;return n(this,void 0,void 0,(function(){var t,r,o;return i(this,(function(n){switch(n.label){case 0:return(t=null===navigator||void 0===navigator?void 0:navigator.userAgentData)?[4,t.getHighEntropyValues(["platformVersion"]).catch((function(){}))]:[2,{platform:"",majorPlatformVersion:0}];case 1:return r=n.sent()||{},o=parseInt(null===(e=r.platformVersion)||void 0===e?void 0:e.split(".")[0]),[2,{platform:r.platform,majorPlatformVersion:o}]}}))}))}t.getSystemInfo=m;var v="zc.ra.0",y=function(){function e(e,t){var r=this;this.logger=t,this.isSpatial=!1,this.audioSourceList=[],this.audioSourceUpdate=!1,this.localUserList=[],this.speakingUserIdList=[],this.vocalSourceMap=new Map,this.volume=1,this.speaker="",this._audioCtx=null,this.supportSpeakerSet=!1,this.isHide=!1,this.eventHandler={visibilitychange:function(){return n(r,void 0,void 0,(function(){var e,t,r,o,n,a,c,u=this;return i(this,(function(i){switch(i.label){case 0:return s(s([],this.vocalSourceList,!0),this.audioSourceList,!0).forEach((function(e){e.inBackground(document.hidden),u.isHide=document.hidden})),e=function(){s(s([],u.vocalSourceList,!0),u.audioSourceList,!0).forEach((function(e){e.enableSpatializer(u.isSpatial,!0,!1,!1)}))},document.hidden?(t=navigator.userAgent.toLowerCase(),r=t.match(/chrome\/(\d*)/),o=r&&t.includes("mobile"),[4,m()]):[3,2];case 1:return n=i.sent(),a="Windows"===n.platform&&n.majorPlatformVersion>=13,o||a?(this.logger.warn("".concat(v," mobile chrome hide page and stop web audio.")),e(),[2]):("running"!==(c=this.audioCtx.state)?(this.logger.info("".concat(v," hidden ctx: ").concat(c,", resume ctx")),this.audioCtx.resume(),setTimeout((function(){var t=u.audioCtx.state;u.isHide&&("running"===t?u.logger.info("".concat(v," hidden ctx: ").concat(t,".")):(u.logger.warn("".concat(v," hidden ctx: ").concat(t,", ctx resume failed. stop web audio.")),e()))}),2e3)):this.logger.info("".concat(v," hidden ctx: ").concat(c,".")),[3,3]);case 2:this.audioCtx.resume(),this.audioSourceList.forEach((function(e){var t,r;e.isPlaying&&(null===(t=e.audioEl)||void 0===t||t.dom.pause(),null===(r=e.audioEl)||void 0===r||r.dom.play().catch((function(){u.logger.warn("".concat(v," show page and  ").concat(e.userID," replay failed."))})))})),i.label=3;case 3:return[2]}}))}))}},this.zegoRTC=e,document.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.zegoRTC.on("roomStreamUpdate",(function(e,t,n){var i=n.map((function(e){var t=r.getStreamInfo(e.extraInfo,e.streamID),n=t.isRangeAudioStream,i=t.teamID,s=t.sendMode;return o(o({},e),{isRangeAudioStream:n,teamID:i,sendMode:s})})).filter((function(e){return e.isRangeAudioStream})),s=i.map((function(e){return e.user.userID}));"DELETE"===t?r.speakingUserIdList=r.speakingUserIdList.filter((function(e){var t=!s.includes(e);if(!t){var o=r.audioSourceMap[e];o&&o.stopPlayingAudio("stop for stream delete")}return t})):"ADD"===t&&(r.speakingUserIdList=r.speakingUserIdList.concat(s),i.forEach((function(e){var t=e.user.userID,o=r.audioSourceMap[t],n=e.teamID,i=e.sendMode,s=!(!["",void 0].includes(n)&&r.rangeListener.teamID===n)&&r.isSpatial;if(o)o.streamID!==e.streamID&&(o.stopPlayingAudio("stop for old stream"),o.streamID=e.streamID),void 0!==i&&(o.sendMode=i),n!==o.teamID&&(o.teamID=n),o.enableSpatializer(s);else{var a=new c.default(r.logger,{userID:t,teamID:n,sendMode:i},{audioCtx:r.audioCtx,zegoRTC:r.zegoRTC,isSpatial:s,maxDistance:r.rangeListener.recvRange,volume:r.volume,speaker:r.speaker,isHide:r.isHide});a.streamID=e.streamID,r.audioSourceList.push(a),r.playStreamHandler.hasChanged=!0}}))),r.playStreamHandler.setAudioSourceList(r.speakingAudioSourceList)})),this.zegoRTC.on("playerStateUpdate",(function(e){var t=r.audioSourceList.find((function(t){return t.streamID===e.streamID}));t&&("NO_PLAY"===e.state?t.isPlaying=!1:("PLAYING"===e.state&&t.checkTrackChanged(),t.isPlaying=!0))})),this.zegoRTC.on("streamExtraInfoUpdate",(function(e,t){r.logger.info("zc.ra.0 recv extra info: "+JSON.stringify(t)),t.forEach((function(e){var t=r.audioSourceMap[e.user.userID];if(t&&t.streamID){var o=r.getStreamInfo(e.extraInfo,e.streamID),n=o.teamID,i=o.sendMode;n!==t.teamID&&(t.teamID=n,r.enableSpatializer(r.isSpatial)),void 0!==i&&(t.sendMode=i),r.playStreamHandler.hasChanged=!0}}))})),this.zegoRTC.RTM._on("_roomStateUpdate",(function(e,t){"CONNECTED"===t?(r.roomID=e,r.rangeListener.userID=r.zegoRTC.RTM.getUserID(),r.playStreamHandler.hasChanged=!0):"DISCONNECTED"===t&&(r.roomID=void 0,r.rangeListener.reset(),r.enableSpeaker(!1),r.audioSourceList=[],r.playStreamHandler.setAudioSourceList([]),r.localUserList=[],r.playStreamHandler.setLocalUserList([]))})),this.zegoRTC.RTM.on("roomUserUpdate",(function(e,t,o){var n;r.logger.info("zc.ra.0 roomUserUpdate: ",e,t,JSON.stringify(o)),"ADD"===t?(n=r.localUserList).push.apply(n,o):"DELETE"===t&&o.forEach((function(e){r.localUserList=r.localUserList.filter((function(t){return t.userID!==e.userID}))})),r.playStreamHandler.setLocalUserList(r.localUserList)})),this.zegoRTC.on("publishQualityUpdate",(function(e,t){var n=e.match(/(.*)_(.*)/);if(3===(null==n?void 0:n.length)){var i=n[1];if(r.rangeListener.userID!==i)return;var s=o({},t.audio);r.eventManager.emit("publishQualityUpdate",i,s)}})),this.zegoRTC.on("playQualityUpdate",(function(e,t){var n,i=e.match(/(.*)_(.*)/);if(3===(null==i?void 0:i.length)){var s=i[1],a=t.audio,c=t.peerToPeerDelay,u=t.peerToPeerPacketLostRate;if(!(null===(n=r.audioSourceList)||void 0===n?void 0:n.some((function(e){return e.userID===s}))))return;var l=o(o({},a),{peerToPeerDelay:c,peerToPeerPacketLostRate:u});r.eventManager.emit("playQualityUpdate",s,l)}}));var a=window.AudioContext||window.webkitAudioContext;this._audioCtx=this.zegoRTC&&this.zegoRTC.ac||new a,this.rangeListener=d.default.getInstance(this.audioCtx,this.zegoRTC),this.playStreamHandler=h.default.getInstance(this.logger,this.rangeListener),this.eventManager=p.default.getInstance()}return Object.defineProperty(e.prototype,"audioSourceMap",{get:function(){return this.audioSourceList.reduce((function(e,t){return t.userID&&(e[t.userID]=t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speakingAudioSourceList",{get:function(){var e=this;return this.audioSourceList.filter((function(t){return e.speakingUserIdList.includes(t.userID)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vocalSourceList",{get:function(){for(var e=[],t=this.vocalSourceMap.values(),r=0;r<this.vocalSourceMap.size;r++)e.push(t.next().value);return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAudioSourceList",{get:function(){return this.audioSourceList.filter((function(e){return e.isPlaying}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioCtx",{get:function(){if(!this._audioCtx){var e=window.AudioContext||window.webkitAudioContext;this._audioCtx=new e}return this._audioCtx},enumerable:!1,configurable:!0}),e.getInstance=function(t,r){return e.instance||(e.instance=new e(t,r)),e.instance},e.prototype.resumeAudioContext=function(){return n(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return[2,new Promise((function(t){_.AudioElPool.generateEls(),"running"===e.audioCtx.state&&t(!0),e.audioCtx.onstatechange=function(){"running"===e.audioCtx.state&&t(!0)},e.audioCtx.resume(),e.logger.info("zc.ra.0 resume audio ctx"),setTimeout((function(){t(!1)}),3e3)}))]}))}))},e.prototype.getAudioContextState=function(){return this.audioCtx.state},e.prototype.getStreamInfo=function(e,t){var r,o=null;try{o=JSON.parse(e)}catch(e){return this.logger.warn(v+" parse room extra info failed. ".concat(t," is not ra stream.")),{isRangeAudioStream:!1}}if(!o.hasOwnProperty("range_audio_team_id")||!o.hasOwnProperty("range_audio_mode"))return this.logger.warn(v+" extra info has no mode. ".concat(t," is not ra stream.")),{isRangeAudioStream:!1};r={1:0,2:1,3:2}[o.range_audio_mode];var n=o.r_a_s_flag,i={teamID:o.range_audio_team_id||void 0,sendMode:r,isRangeAudioStream:void 0===n||1===n};return this.logger.info("".concat(v," ").concat(t," parse extra info: ").concat(JSON.stringify(i),".")),i},e.prototype.setAudioReceiveRange=function(e){if(!(0,f.checkNumber)(e))throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");if(e=Number(e),(e=Number(e))<0)throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");this.logger.info("zc.ra.0 set receive range: "+e),this.rangeListener.recvRange=e,this.audioSourceList.forEach((function(t){t.setMaxDistance(e)})),this.playStreamHandler.hasChanged=!0},e.prototype.updateSelfPosition=function(e,t,r,o){var n=this,i=function(e){return"Failed to execute 'updateSelfPosition': Argument '".concat(e,"' requires an array of type number.\"")};if(!(0,f.checkCoordinate)(e))throw new Error(i("position"));if(!(0,f.checkCoordinate)(t))throw new Error(i("axisForward"));if(!(0,f.checkCoordinate)(r))throw new Error(i("axisRight"));if(!(0,f.checkCoordinate)(o))throw new Error(i("axisUp"));this.logger.info(v+" set self position [".concat(e,"]")),this.rangeListener&&(this.rangeListener.updateSelfPosition(e,t,o),this.vocalSourceMap.forEach((function(e){e.checkIfCanPlay(n.rangeListener)}))),this.playStreamHandler.setListener(this.rangeListener)},e.prototype.updateAudioSource=function(e,t){if(e=String(e),!(0,f.checkCoordinate)(t))throw new Error("Failed to execute 'updateAudioSource': parameter 'position' must be an array of type number.");var r=this.audioSourceMap[e];r?r.setPosition(t):(r=new c.default(this.logger,{userID:e,position:t},{audioCtx:this.audioCtx,zegoRTC:this.zegoRTC,isSpatial:this.isSpatial,maxDistance:this.rangeListener.recvRange,volume:this.volume,speaker:this.speaker,isHide:this.isHide}),this.enableSpatializer(this.isSpatial),this.audioSourceList.push(r)),this.playStreamHandler.setAllAudioSourceList(this.audioSourceList)},e.prototype.enableMicrophone=function(e){if(void 0===e&&(e=!0),!this.rangeListener.userID)throw new Error("Enable mic failed. Please log in room first.");return e?this.rangeListener.startPublishingStream():this.rangeListener.stopPublishingStream()},e.prototype.selectMic=function(e){return n(this,void 0,void 0,(function(){var t,r,o,n;return i(this,(function(i){switch(i.label){case 0:if("string"!=typeof e&&void 0!==e)throw new Error("Select mic failed. DeviceID error.");if(r=(t=this.rangeListener).audioStream,o=t.isPublishing,this.logger.info("zc.ra.0 select mic: "+e),!r||!o)return[3,5];n={errorCode:0},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.zegoRTC.useAudioDevice(r,e||"")];case 2:return n=i.sent(),[3,4];case 3:return i.sent(),[2,!1];case 4:return 0===n.errorCode?(this.rangeListener.micID=e,[2,!0]):[2,!1];case 5:return this.rangeListener.micID=e,[2,!0];case 6:return[2]}}))}))},e.prototype.enableSpeaker=function(e){if(void 0===e&&(e=!0),e&&!this.roomID)throw new Error("Enable speaker failed. Please log in room first.");this.playStreamHandler.isEnable=e,this.logger.info("zc.ra.0 enable speaker: "+e),e?(_.AudioElPool.generateEls(),this.playStreamHandler.startPlayingAudioStream()):this.playStreamHandler.stopPlayingAudioStream()},e.prototype.enableSpatializer=function(e){var t=this;void 0===e&&(e=!0),this.logger.info("zc.ra.0 set spatializer: "+e),this.isSpatial=!!e,this.audioSourceList.forEach((function(r){var o=!(!["",void 0].includes(r.teamID)&&t.rangeListener.teamID===r.teamID)&&e;r.enableSpatializer(o)})),this.vocalSourceList.forEach((function(t){t.enableSpatializer(e)})),e&&this.rangeListener.updateListenerEffect()},e.prototype.enableAiDenoise=function(e){if(this.logger.info("zc.ra.0 set ai denoise: "+e),"boolean"!=typeof e)return!1;var t=g.ClientUtil.isMobile();return!t&&window.AudioWorklet&&window.WebAssembly?this.rangeListener.enableDenoise(!!e):(this.logger.error(v+"".concat(t&&" mobile"," browser dose not support ai denoise.")),!1)},e.prototype.setRangeAudioTeamID=function(e){this.logger.info("zc.ra.0 set team id: "+e),this.rangeListener.setTeamID(e),this.enableSpatializer(this.isSpatial),this.playStreamHandler.hasChanged=!0},e.prototype.setRangeAudioMode=function(e){this.logger.info("zc.ra.0 set mode "+e),this.rangeListener.setSendMode(e),this.rangeListener.setRecvMode(e),this.playStreamHandler.hasChanged=!0},e.prototype.setAudioVolume=function(e){var t=this;if(this.logger.info(v+" set volume ".concat(e)),e<0)throw new Error("Failed to execute 'setVolume': The volume provided is outside the range [0, 200].");this.volume=e/100,this.audioSourceList.forEach((function(e){e.setVolume(t.volume)}))},e.prototype.selectSpeaker=function(e){var t=this;if(void 0===e&&(e=""),"string"!=typeof e)throw new Error("Select speaker failed. Device ID error.");if(!this.supportSpeakerSet){if(!document.createElement("audio").setSinkId)throw new Error("Failed to execute 'selectSpeaker': browser not support.");this.supportSpeakerSet=!0}this.speaker=e,this.logger.info("zc.ra.0 set speaker: "+e),""===e&&this.logger.warn("zc.ra.0 set speaker to be default. "),this.audioSourceList.find((function(r){return n(t,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r.setSpeaker(e)];case 1:return o.sent(),[3,3];case 2:return t=o.sent(),this.logger.warn(v+" set speaker failed. id: ".concat(e,", error: ").concat(t)),[2,!0];case 3:return[2,!1]}}))}))}))},e.prototype.setPositionUpdateFrequency=function(e){if(!(e>=15))throw new Error("Failed to execute 'setPositionUpdateFrequency': The frequency provided is outside the range [15, +].");this.playStreamHandler.interval=Number(e)||100,this.logger.info("zc.ra.0 set interval: "+e)},e.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},e.prototype.enableAudioSourceUpdateChecker=function(e){this.logger.info("zc.ra.0 set source update: "+e),this.audioSourceUpdate=e,this.playStreamHandler.setAudioSourceUpdate(e)},e.prototype.getVocalSource=function(e,t){var r=this.vocalSourceMap.get(e);if(!r){var o={audioCtx:this.audioCtx,isSpatial:this.isSpatial,maxDistance:t||0,volume:this.volume,speaker:this.speaker,isHide:this.isHide};r=e instanceof HTMLMediaElement?new u.default(this.logger,{media:e},o):new l.default(this.logger,{streamView:e},o)}return this.vocalSourceMap.set(e,r),r},e.prototype.setStreamVocalRange=function(e,t){var r=e instanceof HTMLMediaElement;if(!r&&!(null==e?void 0:e.v))throw new Error("Failed to execute 'setVocalRange': type of parameter 1 error.");if(!(0,f.checkNumber)(t))throw Error("Failed to execute 'setVocalRange': parameter 2 requires to be type number.");t=Number(t),this.logger.info(v+" ".concat(r?"custom":"stream"," set range: ")+t);var o=this.getVocalSource(e,t);o.setMaxDistance(t),o.checkIfCanPlay(this.rangeListener)},e.prototype.updateStreamPosition=function(e,t){if(!(e instanceof HTMLMediaElement)&&!(null==e?void 0:e.v))throw new Error("Failed to execute 'updatePosition': type of parameter 1 error.");if(!(0,f.checkCoordinate)(t))throw new Error("Failed to execute 'updatePosition': parameter 'position' must be an array of type number.");var r=this.getVocalSource(e);r.setPosition(t),r.checkIfCanPlay(this.rangeListener)},e}();t.default=y},2777:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RangeAudio=void 0;var o=r(3116);t.RangeAudio={type:"RangeAudio",install:function(e){Object.defineProperty(e.prototype,"createRangeAudioInstance",{value:function(){return this.rangeAudio||(this.rangeAudio=o.ZegoExpressRangeAudio.getInstance(this,this.logger)),this.rangeAudio},writable:!1})}}},5130:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioElPool=void 0;var r=function(){function e(){}return e.generateEls=function(e){if(void 0===e&&(e=30),this.elements.length>=e)this.elements.forEach((function(e){e.dom.play().catch((function(e){}))}));else{var t=Array(e-this.elements.length).fill(0).map((function(e,t){var r=document.createElement("audio");return r.muted=!0,r.setAttribute("autoplay","autoplay"),r.setAttribute("playsInline","playsInline"),r.id="audio"+t,{dom:r,id:t,used:!1}}));this.elements=this.elements.concat(t)}},e.useAudioEl=function(){0===this.elements.length&&this.generateEls();var e=this.elements.find((function(e){return!e.used}));return e&&(e.used=!0),e},e.stopUsingAudioEl=function(e){var t=this.elements[e];t&&(t.dom.onpause=null,t.dom.onerror=null,t.dom.muted=!0,t.used=!1)},e.elements=[],e}();t.AudioElPool=r},2730:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var a=r(1297),c=r(5130),u=r(4981);t.RANGE_AUDIO="zc.ra.1";var l=function(e){function r(t,r,o){var n=e.call(this,t,o)||this;return n.logger=t,n.audioTrack=null,n.zegoRTC=o.zegoRTC,n.userID=r.userID,n.teamID=r.teamID,n.sendMode=void 0!==r.sendMode?r.sendMode:a.ZegoRangeAudioMode.World,r.position&&(n.position=r.position),n}return n(r,e),r.prototype.checkTrackChanged=function(){var e;if(this.stream){var r=this.stream.getAudioTracks()[0];r&&r!==this.audioTrack&&(this.logger.info(t.RANGE_AUDIO+" retry play success, render stream."),null===(e=this.sourceNode)||void 0===e||e.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream),this.enableSpatializer(this.isSpatial,!0),this.audioTrack=r)}},r.prototype.startPlayingAudio=function(e){var r,o;return i(this,void 0,void 0,(function(){var n,i,a;return s(this,(function(s){switch(s.label){case 0:if(!this.streamID)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),e&&this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," ")+e),this.isPlaying=!0,n=this,[4,this.zegoRTC.startPlayingStream(this.streamID)];case 2:return n.stream=s.sent(),this.audioTrack=this.stream.getAudioTracks()[0],[3,4];case 3:if(1103049===(i=s.sent()).code)return[2];throw i;case 4:return this.audioEl=this.audioEl||c.AudioElPool.useAudioEl()||null,this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," start using audio el ").concat(null===(r=this.audioEl)||void 0===r?void 0:r.id)),(a=null===(o=this.audioEl)||void 0===o?void 0:o.dom)||(this.logger.error(t.RANGE_AUDIO+" not enough audio elements"),a=document.createElement("audio"),this.audioEl={id:-1,dom:a,used:!0},a.setAttribute("autoplay","autoplay")),a.muted=!0,this.stream&&(this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream)),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,6];case 5:s.sent(),s.label=6;case 6:return"suspended"===this.audioCtx.state&&this.audioCtx.resume(),[2]}}))}))},r.prototype.stopPlayingAudio=function(e){this.isPlaying&&this.streamID?(this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," ")+e),this.zegoRTC.stopPlayingStream(this.streamID),this.isPlaying=!1):this.streamID&&this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," not playing, ")+e),this.stream=void 0,this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=null);var r=this.audioEl,o=null==r?void 0:r.dom;o&&(o.srcObject=null,o.parentNode&&o.parentNode.removeChild(o));var n=(null==r?void 0:r.id)||-1;r&&n>=0&&(c.AudioElPool.stopUsingAudioEl(n),this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," stop using audio el ").concat(n))),this.audioEl=null,this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null)},r}(u.BaseAudioSource);t.default=l},4981:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioSource=t.calculateDistance=t.isMobile=t.RANGE_AUDIO=void 0;var s=i(r(8047)),a=r(2760),c=r(5694);function u(e,t){if(!t||!e)return null;var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]];return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2))}t.RANGE_AUDIO="zc.ra.5",t.isMobile=function(){return!!navigator.userAgent.toLowerCase().includes("mobile")},t.calculateDistance=u;var l=function(){function e(e,t){this.logger=e,this.userID="base"+(new Date).getTime(),this.isHide=!1,this.distance=null,this.maxDistance=1e3,this.position=null,this.speaker="",this.audioEl=null,this.sourceNode=null,this.isPlaying=!1,this.config={needLoopback:!0,useGain:!0,playOnAudioContext:!1,useWebAudio:!0},this.volume=1,this.gainNode=null,this.isSpatial=!1,this.panner=null,this.audioCtx=t.audioCtx,this.isSpatial=t.isSpatial,this.setMaxDistance("number"==typeof t.maxDistance?t.maxDistance:1e5),this.destNode=this.audioCtx.createMediaStreamDestination(),this.setVolume(t.volume),this.setSpeaker(t.speaker).catch((function(e){})),this.inBackground(t.isHide)}return e.prototype.setPosition=function(e){this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," set position: ")+e),this.position=e,this.panner&&(void 0!==this.panner.positionX?(this.panner.positionX.value=e[1],this.panner.positionY.value=e[2],this.panner.positionZ.value=-e[0]):this.panner.setPosition(e[1],e[2],-e[0]))},e.prototype.getDistanceFromListener=function(e){return this.distance=u(this.position,e.position),this.distance},e.prototype.setMaxDistance=function(e){this.maxDistance=e,this.panner&&(e<10&&(e=10),this.panner.maxDistance=2.6*e)},e.prototype.setVolume=function(e){isNaN(e)||(this.volume=e,this.gainNode&&(this.gainNode.gain.value=this.volume))},e.prototype.setSpeaker=function(e){var r;return o(this,void 0,void 0,(function(){var o,i;return n(this,(function(n){switch(n.label){case 0:if("string"!=typeof e)return[2];if(this.speaker=e,!this.audioEl)return[3,10];if(!(o=null===(r=this.audioEl)||void 0===r?void 0:r.setSinkId))return[3,8];n.label=1;case 1:return n.trys.push([1,6,,7]),this.config.playOnAudioContext?[3,3]:[4,o.call(this.audioEl,e||"")];case 2:return n.sent(),[3,5];case 3:return[4,o.call(this.audioEl,"")];case 4:n.sent(),n.label=5;case 5:return this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," set speaker success. id: ").concat(e,".")),[3,7];case 6:throw i=n.sent(),this.logger.error(t.RANGE_AUDIO+" ".concat(this.userID," set speaker failed. id: ").concat(e,"  error: ").concat(i,".")),i;case 7:return[3,9];case 8:throw"setting speaker not support.";case 9:return[3,11];case 10:this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," no element for set speaker.")),n.label=11;case 11:return[2]}}))}))},e.prototype.initPanner=function(){if(!this.panner){var e=(0,c.createPanner)(this.audioCtx,this.maxDistance,this.position),t=e.gainNode;this.panner=e.panner,this.gainNode=t,t.gain.value=this.volume}},e.prototype.enableSpatializer=function(e,r,i,c){var u,l,d,h,p;return void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===c&&(c=!0),o(this,void 0,void 0,(function(){var o,f,_,g,m,v,y,b,S,E,T,w,C,I=this;return n(this,(function(n){switch(n.label){case 0:return r||this.isSpatial!==e?(this.isSpatial=e,o=navigator.userAgent.toLowerCase(),f=o.match(/chrome\/(\d*)/),_=f&&o.includes("mobile"),[4,(0,a.getSystemInfo)()]):[2];case 1:return g=n.sent(),m="Windows"===g.platform&&g.majorPlatformVersion>=13,v=this.isHide&&(m||_),y="running"!==this.audioCtx.state,c&&(v||y)&&(this.logger.warn("".concat(t.RANGE_AUDIO," ").concat(this.userID," stop web audio. system: ").concat(g.platform," ").concat(g.majorPlatformVersion)),c=!1),this.config.useWebAudio=c,b=o.includes("safari")&&!o.includes("chrome"),S=o.includes("micromessenger")&&new RegExp(/(iphone|ipad|ipod|ios)/i).test(o),c||this.stream||(i=!0),this.config.playOnAudioContext=i,this.initPanner(),this.isPlaying&&this.sourceNode?(this.lastNode&&this.lastNode.disconnect(),E=this.sourceNode,this.sourceNode.disconnect(),null===(u=this.panner)||void 0===u||u.disconnect(),null===(l=this.gainNode)||void 0===l||l.disconnect(),this.gainNode?(c&&(this.config.useGain&&(E=this.sourceNode.connect(this.gainNode)),this.panner&&e&&(E=E.connect(this.panner))),E.connect(i?this.audioCtx.destination:this.destNode),this.lastNode=E,this.position&&this.setPosition(this.position),this.logger.info(t.RANGE_AUDIO+" play ".concat(e?"3d":"normal"," stream '").concat(this.userID,"' on ").concat(i?"audio ctx":"element")),(T=null===(d=this.audioEl)||void 0===d?void 0:d.dom)?(T.onpause=function(){I.logger.warn(t.RANGE_AUDIO+" ".concat(I.streamID," audio paused"))},T.onerror=function(e){I.logger.warn(t.RANGE_AUDIO+" ".concat(I.streamID," audio error, ").concat(e))},i?(this.stream&&T.srcObject!==this.stream&&(T.srcObject=this.stream,T.muted=!0,T.oncanplay=function(){T.play().then((function(){I.logger.info(t.RANGE_AUDIO+" ".concat(I.userID," ctx autoplay success.")),I.checkPlayStatus()})).catch((function(e){I.logger.warn(t.RANGE_AUDIO+" ".concat(I.userID," ctx autoplay failed."))}))}),[3,6]):[3,2]):[3,6]):[3,6]):[3,6];case 2:return w=this.destNode.stream,(C=this.config.needLoopback&&!S&&!b)&&this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null),c||!this.stream?[3,3]:(this.logger.info("".concat(t.RANGE_AUDIO," ").concat(this.userID," stop audio api")),this.sourceNode.disconnect(),null===(h=this.panner)||void 0===h||h.disconnect(),null===(p=this.gainNode)||void 0===p||p.disconnect(),w=this.stream,[3,5]);case 3:return C&&w?(this.loopbackConn=this.loopbackConn||new s.default(this.streamID||"",this.logger),this.loopbackConn.onError=function(e){I.logger.warn(t.RANGE_AUDIO+" ".concat(I.userID," loopback failed! ").concat(e)),I.enableSpatializer(I.isSpatial,!0,!0)},[4,this.loopbackConn.bindStream(w,this.streamID||void 0)]):[3,5];case 4:return w=n.sent(),[3,5];case 5:T.muted=!0,T.srcObject=w,this.setSpeaker(this.speaker).catch((function(e){})),T.oncanplay=function(){if(T){T.muted=!1;var e=function(e){I.logger.error(t.RANGE_AUDIO+" ".concat(I.userID," autoplay failed. error: ").concat(e)),I.enableSpatializer(I.isSpatial,!0,!0)};T.play().then((function(){(null==T?void 0:T.paused)?e("audio paused"):(I.logger.info(t.RANGE_AUDIO+" ".concat(I.userID," element autoplay success.")),I.checkPlayStatus())})).catch((function(t){e(t)}))}},n.label=6;case 6:return[2]}}))}))},e.prototype.checkPlayStatus=function(){var e=this;setTimeout((function(){var r;if(e.isPlaying){var o=null===(r=e.audioEl)||void 0===r?void 0:r.dom,n=e.audioCtx.state;!o||o.paused||o.muted&&!e.config.playOnAudioContext||"running"!==n?(e.logger.warn("".concat(t.RANGE_AUDIO," ").concat(e.userID," play detection is abnormal. audio ctx:").concat(n,", paused:").concat(null==o?void 0:o.paused,", muted:").concat(null==o?void 0:o.muted)),"running"!==n&&(e.audioCtx.resume(),setTimeout((function(){e.logger.warn("".concat(t.RANGE_AUDIO," ").concat(e.userID," play resume. audio ctx:").concat(n,", paused:").concat(null==o?void 0:o.paused,", muted:").concat(null==o?void 0:o.muted))}),1e3))):e.logger.info("".concat(t.RANGE_AUDIO," ").concat(e.userID," play detection is fine"))}}),2e3)},e.prototype.inBackground=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isHide!==e&&(this.isHide=e,e||this.config.useWebAudio||this.enableSpatializer(this.isSpatial,!0))},e}();t.BaseAudioSource=l},2846:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var a=r(5130),c=r(4981);t.RANGE_AUDIO="zc.ra.4";var u=function(e){function r(t,r,o){var n=e.call(this,t,o)||this;return n.logger=t,n.media=r.media,n.position=r.position||null,n.createSource(),n.userID="custom"+(new Date).getTime(),n.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},n}return n(r,e),r.prototype.createSource=function(){var e=this;if((0,c.isMobile)())return this.logger.info("".concat((0,c.isMobile)()," ").concat(this.userID," not create src.")),void(this.enableSpatializer=function(){return i(e,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))});this.media&&(this.logger.info(t.RANGE_AUDIO+" create el source."),this.sourceNode||(this.sourceNode=this.audioCtx.createMediaElementSource(this.media)),null!==this.distance&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"))},r.prototype.startPlayingAudio=function(e){var r,o;return i(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return this.isPlaying?(this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," is already playing")),[2]):(e&&this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," play for ").concat(e)),this.isPlaying=!0,(0,c.isMobile)()?(this.media.muted=!1,[2]):(this.audioEl=this.audioEl||a.AudioElPool.useAudioEl()||null,this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," start using audio el ").concat(null===(r=this.audioEl)||void 0===r?void 0:r.id)),(n=null===(o=this.audioEl)||void 0===o?void 0:o.dom)||(this.logger.error(t.RANGE_AUDIO+" ".concat(this.userID," not enough audio elements")),n=document.createElement("audio"),this.audioEl={id:-1,dom:n,used:!0},n.setAttribute("autoplay","autoplay")),n.muted=!0,n.setAttribute("autoplay","autoplay"),n.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,2]));case 1:i.sent(),i.label=2;case 2:return"suspended"===this.audioCtx.state&&this.audioCtx.resume(),[2]}}))}))},r.prototype.stopPlayingAudio=function(e){if(void 0===e&&(e=""),this.isPlaying&&(this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," stop for ")+e),this.isPlaying=!1),(0,c.isMobile)())this.media.muted=!0;else{this.sourceNode&&this.sourceNode.disconnect();var r=this.audioEl,o=null==r?void 0:r.dom;o&&(o.srcObject=null,o.parentNode&&o.parentNode.removeChild(o));var n=(null==r?void 0:r.id)||-1;r&&n>=0&&(a.AudioElPool.stopUsingAudioEl(n),this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," stop using audio el ").concat(n))),this.audioEl=null}},r.prototype.checkIfCanPlay=function(e){var t=this.distance=this.getDistanceFromListener(e);null===t||t>this.maxDistance||0===this.maxDistance?this.stopPlayingAudio("out of range. ".concat(t," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},r}(c.BaseAudioSource);t.default=u},1576:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.handlerListMap={microphoneStateUpdate:[],audioSourceWithinRangeUpdate:[],publishQualityUpdate:[],playQualityUpdate:[],aiDenoiseError:[]}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addEventHandler=function(e,t){if(!this.handlerListMap[e])return!1;if("function"!=typeof t)throw new Error("Params callBack is not a Function");return-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},e.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,t)}),0)}catch(t){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(t))}}))},e}();t.default=r},8047:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0,t.RANGE_AUDIO="zc.ra.3";var n=function(){function e(e,t){this.streamID=e,this.logger=t,this.rtcConn=null,this.loopbackConn=null,this.destStream=new MediaStream,this.onError=null}return e.prototype.bindStream=function(e,n){var i,s;return r(this,void 0,void 0,(function(){var r,a,c,u,l,d,h=this;return o(this,(function(o){switch(o.label){case 0:return n&&(this.streamID=n),r=["completed","connected"],this.rtcConn&&this.loopbackConn&&r.includes(this.rtcConn.connectionState)?(a=null===(i=this.rtcConn)||void 0===i?void 0:i.getSenders().find((function(e){var t;return"audio"===(null===(t=e.track)||void 0===t?void 0:t.kind)})),e.getTracks().forEach((function(e){"audio"===e.kind&&(null==a||a.replaceTrack(e))})),[3,10]):[3,1];case 1:this.rtcConn=new RTCPeerConnection,this.loopbackConn=new RTCPeerConnection,c={offerVideo:!0,offerAudio:!0,offerToReceiveAudio:!1,offerToReceiveVideo:!1},this.rtcConn.onicecandidateerror=function(e){h.logger.warn(t.RANGE_AUDIO+" ".concat(h.streamID," loopback in ice error: ").concat(JSON.stringify(e)))},this.loopbackConn.onicecandidateerror=function(e){h.logger.warn(t.RANGE_AUDIO+" ".concat(h.streamID," loopback out ice error: ").concat(JSON.stringify(e)))},this.rtcConn.onicecandidate=function(e){var r,o=e.candidate;o&&(h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback add out candidate: ").concat(o)),null===(r=h.loopbackConn)||void 0===r||r.addIceCandidate(new RTCIceCandidate(o)))},this.loopbackConn.onicecandidate=function(e){var r,o=e.candidate;o&&(h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback add in candidate: ").concat(o)),null===(r=h.rtcConn)||void 0===r||r.addIceCandidate(new RTCIceCandidate(o)))},window.setTimeout((function(){h.rtcConn&&h.loopbackConn&&(r.includes(h.rtcConn.iceConnectionState)&&r.includes(h.loopbackConn.iceConnectionState)?h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback connect ok.")):(h.logger.warn(t.RANGE_AUDIO+" ".concat(h.streamID," loopback connect failed. in state: ").concat(h.rtcConn.iceConnectionState,", out state: ").concat(h.loopbackConn.iceConnectionState)),h.close(),h.onError&&h.onError("time out")))}),2e3),this.loopbackConn.ontrack=function(e){var r=e.track;h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback receive track")),h.replaceTrack(r)},e.getTracks().find((function(t){var r;if("audio"===t.kind)return null===(r=h.rtcConn)||void 0===r||r.addTrack(t,e),!0})),o.label=2;case 2:return o.trys.push([2,9,,10]),[4,this.rtcConn.createOffer(c)];case 3:return u=o.sent(),[4,this.rtcConn.setLocalDescription(u)];case 4:return o.sent(),[4,this.loopbackConn.setRemoteDescription(u)];case 5:return o.sent(),[4,this.loopbackConn.createAnswer()];case 6:return(l=o.sent()).sdp=null===(s=l.sdp)||void 0===s?void 0:s.replace(/useinbandfec=/,"stereo=1;useinbandfec="),[4,this.loopbackConn.setLocalDescription(l)];case 7:return o.sent(),[4,this.rtcConn.setRemoteDescription(l)];case 8:return o.sent(),this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," loopback set sdp completed.")),[3,10];case 9:return d=o.sent(),this.logger.error(t.RANGE_AUDIO+" ".concat(this.streamID," loopback connect failed.").concat(d)),this.close(),this.onError&&this.onError("connect failed"),this.onError=null,[3,10];case 10:return[2,this.destStream]}}))}))},e.prototype.replaceTrack=function(e){var t=this;"audio"===e.kind&&(this.destStream.getTracks().forEach((function(e){t.destStream.removeTrack(e)})),this.destStream.addTrack(e))},e.prototype.close=function(){var e=this,t=this.rtcConn,r=this.loopbackConn;this.destStream.getTracks().forEach((function(t){e.destStream.removeTrack(t)})),null==t||t.close(),null==r||r.close(),this.rtcConn=null,this.loopbackConn=null},e}();t.default=n},1646:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var o=r(1297);t.RANGE_AUDIO="zc.ra.2";var n=function(){function e(e,t){this.logger=e,this.isEnable=!1,this.interval=100,this.timer=null,this.audioSourceList=[],this.hasChanged=!1,this.audioSourceUpdate=!1,this.maxPlayingQuantity=20,this.allAudioSourceList=[],this.audioSourceWithinRangeList=[],this.localUserList=[],this.rangeListener=t}return e.getInstance=function(t,r){return e.instance||(e.instance=new e(t,r)),e.instance},e.prototype.setAudioSourceUpdate=function(e){this.audioSourceUpdate=e},e.prototype.setListener=function(e){this.rangeListener=e,this.hasChanged=!0},e.prototype.setAudioSourceList=function(e){this.audioSourceList=e,this.logger.info("".concat(t.RANGE_AUDIO," set src list: [").concat(e.map((function(e){return e.userID})).join(","),"]")),this.hasChanged=!0},e.prototype.setAllAudioSourceList=function(e){e&&(this.allAudioSourceList=e),this.hasChanged=!0},e.prototype.startPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.hasChanged=!0,this.playAudioTask()},e.prototype.playAudioTask=function(){var e=this;this.hasChanged&&(this.hasChanged=!1,this.handlePlayAudioTask()),this.timer=window.setTimeout((function(){e.playAudioTask()}),this.interval)},e.prototype.handlePlayAudioTask=function(){var e=this;if(this.isEnable){this.logger.info("".concat(t.RANGE_AUDIO," handler task start"));var r=[],n=this.getTeamAudioSourceGroup(),i=n.otherList,s=0;n.teamList.forEach((function(t){s<e.maxPlayingQuantity&&(t.isPlaying||t.startPlayingAudio("play for team"),s++)}));var a=this.rangeListener.recvMode===o.ZegoRangeAudioMode.World;a&&(i.forEach((function(t){t.distance=t.getDistanceFromListener(e.rangeListener)})),i.sort((function(e,t){return null===e.distance?1:null===t.distance||e.distance<t.distance?-1:e.distance>t.distance?1:0}))),i.forEach((function(t){if(a&&s<e.maxPlayingQuantity&&t.sendMode===o.ZegoRangeAudioMode.World&&null!==t.distance&&(null===e.rangeListener.recvRange||t.distance<=e.rangeListener.recvRange))t.isPlaying||t.startPlayingAudio("play for range"),s++;else{var r="stop for mode or range. mode: ".concat(t.sendMode,", range: ").concat(t.distance," > ").concat(e.rangeListener.recvRange);t.stopPlayingAudio(r)}})),this.logger.info(t.RANGE_AUDIO+" playing quantity: ".concat(s,".")),this.audioSourceUpdate&&(this.allAudioSourceList.forEach((function(t){t.distance=t.getDistanceFromListener(e.rangeListener);var o=null!==t.distance&&(null===e.rangeListener.recvRange||t.distance<=e.rangeListener.recvRange),n=!!e.localUserList.find((function(e){return e.userID===t.userID}));o&&n&&r.push({userID:t.userID,position:t.position})})),this.checkAudioSourceListDiff(r,this.audioSourceWithinRangeList)&&this.rangeListener.eventHandler.emit("audioSourceWithinRangeUpdate",r),this.audioSourceWithinRangeList=r)}else this.stopPlayingAudioStream()},e.prototype.getTeamAudioSourceGroup=function(){var e=this,t=[],r=[];return this.audioSourceList.forEach((function(o){[o.teamID,e.rangeListener.teamID].includes(void 0)||""===o.teamID||o.teamID!==e.rangeListener.teamID?r.push(o):t.push(o)})),{teamList:t,otherList:r}},e.prototype.stopPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.audioSourceList.forEach((function(e){e.stopPlayingAudio("stop for all stream")}))},e.prototype.setLocalUserList=function(e){this.localUserList=e,this.hasChanged=!0},e.prototype.checkAudioSourceListDiff=function(e,t){for(var r,o=0;o<e.length;o++){r=!1;for(var n=0;n<t.length;n++)if(e[o].userID===t[n].userID){r=!0;break}if(!r)return!0}for(var i=0;i<t.length;i++){r=!1;for(var s=0;s<e.length;s++)if(t[i].userID===e[s].userID){r=!0;break}if(!r)return!0}return!1},e}();t.default=n},5947:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1297),a=r(2730),c=i(r(1576));function u(e){return{0:1,1:2,2:3}[e]}var l=function(){function e(e,t){var r=this;this.recvMode=s.ZegoRangeAudioMode.World,this.sendMode=s.ZegoRangeAudioMode.World,this.recvRange=null,this.position=null,this.forwardAxis=[1,0,0],this.upAxis=[0,0,1],this.audioStream=null,this.enableMic=!1,this.isPublishing=!1,this.streamID=null,this.isDenoise=!1,this.zegoRTC=t,this.audioCtx=e,this.audioListener=this.audioCtx.listener,this.eventHandler=c.default.getInstance(),this.zegoRTC.on("publisherStateUpdate",(function(e){var t=e.state,o=e.errorCode,n=e.extendedData,i=e.streamID.match(/(.*)_(.*)/);if(3===(null==i?void 0:i.length)){if(r.userID!==i[1])return;"NO_PUBLISH"===t?(r.isPublishing=!1,r.stopPublishingStream()):r.isPublishing=!0,r.eventHandler.emit("microphoneStateUpdate",{NO_PUBLISH:s.ZegoRangeAudioMicrophoneState.Off,PUBLISH_REQUESTING:s.ZegoRangeAudioMicrophoneState.TurningOn,PUBLISHING:s.ZegoRangeAudioMicrophoneState.On}[t],o,n)}}))}return Object.defineProperty(e.prototype,"logger",{get:function(){return this.zegoRTC.logger},enumerable:!1,configurable:!0}),e.getInstance=function(t,r){return e.instance||(e.instance=new e(t,r)),e.instance},e.prototype.updateSelfPosition=function(e,t,r){this.position=e,this.forwardAxis=t,Array.isArray(r)&&(this.upAxis=r),this.updateListenerEffect()},e.prototype.updateListenerEffect=function(){this.position&&(this.audioListener.positionX?(this.audioListener.positionX.value=this.position[1],this.audioListener.positionY.value=this.position[2],this.audioListener.positionZ.value=-this.position[0]):this.audioListener.setPosition(this.position[1],this.position[2],-this.position[0]),this.audioListener.forwardX?(this.audioListener.forwardX.value=this.forwardAxis[1],this.audioListener.forwardY.value=this.forwardAxis[2],this.audioListener.forwardZ.value=-this.forwardAxis[0],this.audioListener.upX.value=this.upAxis[1],this.audioListener.upY.value=this.upAxis[2],this.audioListener.upZ.value=-this.upAxis[0]):this.audioListener.setOrientation(this.forwardAxis[1],this.forwardAxis[2],-this.forwardAxis[0],this.upAxis[1],this.upAxis[2],-this.upAxis[0]))},e.prototype.startPublishingStream=function(){var e=this;this.enableMic?this.logger.warn(a.RANGE_AUDIO+" mic is already enabled"):(this.enableMic=!0,this.zegoRTC.createStream({camera:{video:!1,audio:!0,audioInput:this.micID||void 0,audioBitrate:30}}).then((function(t){return o(e,void 0,void 0,(function(){var e,r,o;return n(this,(function(n){switch(n.label){case 0:if(this.userID)return[3,1];throw this.zegoRTC.destroyStream(t),this.enableMic=!1,Error("Enable mic failed. Please log in room first.");case 1:if(this.audioStream&&this.audioStream!==t&&this.zegoRTC.destroyStream(this.audioStream),this.audioStream=t,!this.isDenoise)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.zegoRTC.enableAiDenoise(t,this.isDenoise)];case 3:return n.sent(),[3,5];case 4:return e=n.sent(),this.eventHandler.emit("aiDenoiseError",(r=e||{}).errorCode,r.extendedData),[3,5];case 5:o={range_audio_team_id:this.teamID||"",range_audio_mode:u(this.sendMode),r_a_s_flag:1},this.streamID=this.userID+"_"+Date.now(),this.zegoRTC.startPublishingStream(this.streamID,t,{extraInfo:JSON.stringify(o)}),n.label=6;case 6:return[2]}}))}))})).catch((function(t){throw e.audioStream=null,e.enableMic=!1,t})))},e.prototype.stopPublishingStream=function(){this.isPublishing&&this.streamID&&this.zegoRTC.stopPublishingStream(this.streamID),this.isPublishing=!1,this.audioStream&&(this.zegoRTC.destroyStream(this.audioStream),this.audioStream=null),this.enableMic=!1},e.prototype.setRecvMode=function(e){this.recvMode=e},e.prototype.setSendMode=function(e){this.sendMode=e,this.updateSteamExtraInfo()},e.prototype.setTeamID=function(e){this.teamID=e,this.updateSteamExtraInfo()},e.prototype.updateSteamExtraInfo=function(){this.streamID&&this.isPublishing&&this.zegoRTC.setStreamExtraInfo(this.streamID,JSON.stringify({range_audio_team_id:this.teamID||"",range_audio_mode:u(this.sendMode),r_a_s_flag:1}))},e.prototype.reset=function(){this.audioStream&&this.stopPublishingStream(),this.userID=void 0,this.streamID=null},e.prototype.enableDenoise=function(e){var t=this;return this.audioStream&&this.zegoRTC.enableAiDenoise(this.audioStream,e).catch((function(e){t.isDenoise=!1;var r=e||{};t.eventHandler.emit("aiDenoiseError",r.errorCode,r.extendedData)})),this.isDenoise=e,!0},e}();t.default=l},3402:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var a=r(5130),c=r(4981);t.RANGE_AUDIO="zc.ra.4";var u=function(e){function r(r,o,n){var i=e.call(this,r,n)||this;return i.logger=r,i.streamView=o.streamView,i.position=o.position||null,i.createSource(),i.userID="stream"+(new Date).getTime(),i.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},i.streamView.on("_trackChanged",(function(e,r){"audio"===e&&(r?i.createSource(!0):i.logger.error("".concat(t.RANGE_AUDIO," ").concat(i.userID," audio track lost")))})),i}return n(r,e),r.prototype.createSource=function(e){var r=this;if(void 0===e&&(e=!1),(0,c.isMobile)())return this.logger.info("".concat(t.RANGE_AUDIO," ").concat(this.userID," not create src.")),this.enableSpatializer=function(){return i(r,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},!1;if(!this.streamView)return!1;if(this.logger.info(t.RANGE_AUDIO+" create el source. trackChanged: "+e),!this.sourceNode||e){var o=this.streamView.v.getAudioElement();if(!o||!o.srcObject)return this.logger.error(t.RANGE_AUDIO+" create el source. trackChanged: "+e),!1;o.muted=!0;var n=o.srcObject;this.sourceNode&&this.sourceNode.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(n),this.enableSpatializer(this.isSpatial,!0)}return null!==this.distance&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"),!0},r.prototype.startPlayingAudio=function(e){var r,o;return i(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return this.isPlaying?(this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," is already playing")),[2]):(e&&this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," play for ").concat(e)),this.isPlaying=!0,(0,c.isMobile)()?(this.streamView.setAudioMuted(!1),[2]):(this.audioEl=this.audioEl||a.AudioElPool.useAudioEl()||null,this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," start using audio el ").concat(null===(r=this.audioEl)||void 0===r?void 0:r.id)),(n=null===(o=this.audioEl)||void 0===o?void 0:o.dom)||(this.logger.error(t.RANGE_AUDIO+" ".concat(this.userID," not enough audio elements")),n=document.createElement("audio"),this.audioEl={id:-1,dom:n,used:!0},n.setAttribute("autoplay","autoplay")),n.muted=!0,n.setAttribute("autoplay","autoplay"),n.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,2]));case 1:i.sent(),i.label=2;case 2:return"suspended"===this.audioCtx.state&&this.audioCtx.resume(),[2]}}))}))},r.prototype.stopPlayingAudio=function(e){if(void 0===e&&(e=""),this.isPlaying&&(this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," stop for ")+e),this.isPlaying=!1),(0,c.isMobile)())this.streamView.setAudioMuted(!0);else{this.sourceNode&&this.sourceNode.disconnect();var r=this.audioEl,o=null==r?void 0:r.dom;o&&(o.srcObject=null,o.parentNode&&o.parentNode.removeChild(o));var n=(null==r?void 0:r.id)||-1;r&&n>=0&&(a.AudioElPool.stopUsingAudioEl(n),this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," stop using audio el ").concat(n))),this.audioEl=null}},r.prototype.checkIfCanPlay=function(e){var t=this.distance=this.getDistanceFromListener(e);null===t||t>this.maxDistance||0===this.maxDistance?this.stopPlayingAudio("out of range. ".concat(t," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},r}(c.BaseAudioSource);t.default=u},5694:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPanner=void 0,t.createPanner=function(e,t,r){var o=r||[0,0,0],n=e.createPanner(),i=e.createGain();return n.panningModel="HRTF",n.distanceModel="linear",n.refDistance=1,n.maxDistance=2.6*t||1,n.rolloffFactor=1,n.coneOuterGain=.4,void 0!==n.positionX?(n.positionX.value=o[1],n.positionY.value=o[2],n.positionZ.value=-o[0]):n.setPosition(o[1],o[2],-o[0]),{panner:n,gainNode:i}}},7803:function(e,t){"use strict";function r(e){return!isNaN(Number(e))&&""!==e&&Number.MAX_SAFE_INTEGER>=Number(e)&&Number(e)>=-Number.MAX_SAFE_INTEGER}Object.defineProperty(t,"__esModule",{value:!0}),t.checkCoordinate=t.checkBoolean=t.checkNumber=void 0,t.checkNumber=r,t.checkBoolean=function(e){return!1},t.checkCoordinate=function(e){if(Array.isArray(e)){for(var t=0;t<3;t++)if(!r(e[t]))return!1;return!0}return!1}},2938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdvancedModule=void 0;var o=r(4243),n=r(1091),i=r(4427),s=function(){function e(e,t,r,o){this.logger=e,this.dataReport=t,this.streamCenter=r,this.stateCenter=o,this.screenShotReady=!1}return e.prototype.publishTarget=function(e){var t=this,r="";switch(e.type){case"addpush":r=i.ZegoRTCLogEvent.kZegoTaskAddPublishCdnUrl.event;break;case"delpush":case"clearpush":r=i.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.event}var s=this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:i.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:e.streamID},{key:""},r);return s.setAttributes({url:i.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.url(e.pushUrl)}),new Promise((function(r,o){var a=function(e,r){t.logger.error("zb.pt"+(r||e.message)),t.stateCenter.reporter.setError(s,e,r),o({errorCode:e.code,extendedData:e.message+(r?" "+r:"")})};if(-1==["addpush","delpush","clearpush"].indexOf(e.type))return t.logger.error("zb.sh.pt cdn push type error"),void a(n.errorCodeList.PUBLISHER_CDN_PUSH_ERROR,"type error");if(e.streamID&&"string"==typeof e.streamID)if(e.pushUrl&&"string"==typeof e.pushUrl)if(t.stateCenter.publishStreamList[e.streamID]){var c=t.streamCenter.getRoomByStreamID(e.streamID);c?c.streamHandler._publishTarget(e,(function(e){s.end(),r(e)}),a):a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoLoginError)}else a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kPublishStreamNoFoundError);else a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"push url error");else a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"stream id type error")}))},e}();t.AdvancedModule=s},4243:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamHandler=t.zegoWebRTC=t.ENUM_PUBLISH_STREAM_STATE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.TRACER_LEVEL=t.PROTO_VERSION=void 0;var o,n=r(1091),i=r(4427);t.PROTO_VERSION="2.21.0",function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(o=t.TRACER_LEVEL||(t.TRACER_LEVEL={})),t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.zegoWebRTC={setStreamExtraInfo:function(e,t){var r=this;return new Promise((function(n,s){var a=r.streamCenter.getRoomByStreamID(e),c=i.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo,u=r.stateCenter.reporter.createSpan(o.H,a?{key:i.ZegoRTCLogEvent.kZMLoginRoom.event,par:null==a?void 0:a.roomID}:{key:i.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},c.event);u.setAttributes({stream_id:c.stream_id(e),stream_extra_info:c.stream_extra_info(t)});var l=function(e,t){r.logger.error("zb.ssei "+t),r.stateCenter.reporter.setError(u,e,t),s({errorCode:e.code,extendedData:e.message+" "+t})};"string"==typeof e&&""!=e?"string"==typeof t&&""!=t?r.RTM.isDisConnect()?l(c.error.kNoLoginError,"not login"):r.stateCenter.publishStreamList[e]?(a=r.streamCenter.getRoomByStreamID(e))?a.streamHandler.setStreamExtraInfo(e,t,(function(e,t){var o,i,a;if(0===(null===(o=null==e?void 0:e.body)||void 0===o?void 0:o.err_code))u.setAttributes({send_seq:c.send_seq(t)}),u.end(),n({errorCode:(null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.err_code)||(null==e?void 0:e.errorCode)});else{var l={errorCode:(null===(a=null==e?void 0:e.body)||void 0===a?void 0:a.err_code)||(null==e?void 0:e.code)};r.stateCenter.reporter.setError(u,l),s(l)}}),l):l(c.error.kNoLoginError,"not login"):l(c.error.kPublishStreamNoFoundError):l(c.error.kParamError,"extraInfo must be string and no empty"):l(c.error.kParamError,"streamID must be string and not empty")}))}},t.streamHandler={_publishTarget:function(e,r,o){var s=this;this.logger.info("zb.sh.ptcall");var a=Math.ceil((new Date).getTime()/1e3),c=e.streamID;this.stateCenter.testEnvironment&&(c="zegotest-"+this.stateCenter.appid+"-"+e.streamID);var u={appid:this.stateCenter.appid,biz_type:0,timestamp:a,seq:this.stateCenter.cdnSeq++,version:1*t.PROTO_VERSION,stream_id:c,pushurl:e.pushUrl};if(this.logger.debug("zb.sh.pt send command"),this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:1,location:"/liveroomcmd/push",cmd:e.type},u,(function(t){s.logger.info("zb.sh.pt receive message");var i=t||{},a=i.code,c=i.message;a&&0!=a?(s.logger.error("zb.sh.pt "+e.type+" error code: "+a+" "+c),o(n.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: ".concat(e.type," ").concat(a," ").concat(c))):(s.logger.info("zb.sh.pt "+e.type+" success"),r&&r({errorCode:0,extendedData:""}))}),(function(t,r,n,a){var c="";a||(a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError,200===t?(s.logger.info("zb.sh.pt error: "+r),a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError,2001==r?a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:2002==r&&(a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),c="cmd: ".concat(e.type,", biz_code: ").concat(r)):c="request media server fail, error: "+t,s.logger.error("zb.sh.pt "+c)),o&&o(a,c)}));else{var l={channel:"media",cmd:e.type,req_body:JSON.stringify(u)};this.sendBizChannelRequest(l,(function(t,a,c){if(s.logger.info("zb.sh.pt receive message"),0!=c.length){var u=JSON.parse(c),l=u.code,d=u.message;l&&0!=l?(s.logger.error("zb.sh.pt "+e.type+" error code: "+l+" "+d),o(n.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: ".concat(e.type," ").concat(l," ").concat(d))):(s.logger.info("zb.sh.pt "+e.type+" success"),r&&r({errorCode:0,extendedData:""}))}else o(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoResponseError)}),(function(t,r,n){s.logger.info("zb.sh.pt error: "+t);var a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError;2001==t?a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:2002==t&&(a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),s.logger.error("zb.sh.pt "),o(a," cmd: ".concat(e.type," ").concat(t," ").concat("","  "))}))}},updateStreamExtraInfo:function(e,r,o,n){this.logger.info("zb.sh.usei call");var i=t.ENUM_STREAM_SUB_CMD.liveUpdate;this.stateCenter.publishStreamList[e]&&this.stateCenter.publishStreamList[e].state>=t.ENUM_PUBLISH_STREAM_STATE.update_info?(this.stateCenter.publishStreamList[e].extra_info=r,this.updateStreamInfo(e,i,r,o,n)):this.stateCenter.publishStreamList[e]&&this.stateCenter.publishStreamList[e].state===t.ENUM_PUBLISH_STREAM_STATE.tryPublish?(this.stateCenter.publishStreamList[e].extra_info=r,o({errorCode:0})):n(streamExtraInfoKey.error.kUpdateStreamInfoFailError)},setStreamExtraInfo:function(e,t,r,o){this.updateStreamExtraInfo(e,t,r,o)}}},1091:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support remove track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},6012:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2938),n=r(4243);t.default={type:"StreamCommon",install:function(e,t,r){for(var i in Object.defineProperty(t.prototype,"initStreamCommon",{value:function(){this.streamCommonModule=new o.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),n.zegoWebRTC)Object.defineProperty(e.prototype,i,{value:n.zegoWebRTC[i],writable:!1});for(var i in n.streamHandler)Object.defineProperty(r.prototype,i,{value:n.streamHandler[i],writable:!1})}}},4427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var o=r(1091),n=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskInitSetting:{event:"/sdk/init"},kZMLoginRoom:{event:"/sdk/login"},kZegoTaskPublishStart:{event:"/sdk/start_publish"},kZegoTaskPublishTarget:{event:"/sdk/publish_target",error:{kParamError:o.errorCodeList.INPUT_PARAM,kPublishStreamNoFoundError:o.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kNoLoginError:o.errorCodeList.NOT_LOGIN,kNoResponseError:o.errorCodeList.PUBLISH_TARGET_NO_RESPONSE,kBizChannelError:o.errorCodeList.BIZ_CHANNEL_ERROR,kInvalidChannelError:o.errorCodeList.INVALID_CHANNEL,kUnknownServerError:o.errorCodeList.UNKNOWN_SERVER_ERROR}},kZegoTaskAddPublishCdnUrl:{event:"/mss/pushadd",error:{kParamError:o.errorCodeList.INPUT_PARAM},stream_id:n,url:n},kZegoTaskRemovePublishCdnUrl:{event:"/mss/pushdel",error:{kParamError:o.errorCodeList.INPUT_PARAM},stream_id:n,url:n},kZegoTaskClearPublishCdnUrl:{event:"/sdk/clear_publish_cdn_url",error:{kParamError:o.errorCodeList.INPUT_PARAM}},kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:o.errorCodeList.INPUT_PARAM,kExtraInfoNullError:o.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:o.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:o.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:o.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream_id:n,stream_extra_info:n,room_sid_string:n,room_id:n,send_seq:function(e){return e}}}},3524:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preview=t.zegoWebRTC=void 0;var a=s(r(954)),c=r(3471);t.zegoWebRTC={setBeautyEffect:function(e,t,r,n){var i=this;return void 0===n&&(n=!0),new Promise((function(s,a){var u,l;if(!(e instanceof MediaStream))return i.logger.error("zc.p.0.sbe.0 localStream not found"),void a({errorCode:1100001,extendedData:" localStream no found"});var d=function(e){s(e)},h=i.streamCenter.checkPreview(e);if(!h)return i.logger.error("zc.sbe.0 preview no found"),void d({errorCode:c.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:c.errorCodeList.PUBLISH_NO_PREVIEW.message});var p=(null===(u=h.videoEffect)||void 0===u?void 0:u.stateFlag)||{base:!1,lowLight:!1};if(n)!(t=!!t)&&p.lowLight?r={sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:p.lowLight?1:0}:t&&(r=o({lowlightEnhancement:p.lowLight?1:0},r)),p.base=t;else{var f=r.lowlightEnhancement;r=(null===(l=h.videoEffect)||void 0===l?void 0:l.enabled)||1!==f?{lowlightEnhancement:f}:{sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:f},p.lowLight=1===f}h.setBeautyEffect(p.base||p.lowLight,r,p).then((function(){d({errorCode:0,extendedData:""})})).catch((function(e){a({errorCode:e.errorCode||-1,extendedData:e.extendedData||e.toString()})}))}))},setLowlightEnhance:function(e,t){return this.setBeautyEffect(e,!0,{lowlightEnhancement:t},!1)}},t.preview={setBeautyEffect:function(e,t,r){return n(this,void 0,void 0,(function(){var o,s=this;return i(this,(function(u){switch(u.label){case 0:if(!this.videoTrack)return this.logger.error("zc.p.0.sbe.0 video track no found"),[2];if("undefined"==typeof WebGLRenderingContext)throw{errorCode:(o=c.errorCodeList.VIDEO_EFFECT_NOT_SUPPORT).code,extendedData:o.message};return a.default?this.videoEffect?this.videoTrack===this.videoEffect.input?[3,2]:[4,this.videoEffect.setInput(this.videoTrack)]:[3,4]:[3,7];case 1:u.sent(),u.label=2;case 2:return[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 3:return u.sent(),this.videoEffect.stateFlag=r,[3,6];case 4:return this.videoEffect=new a.default(this.logger,this.videoTrack),this.videoEffect.onError=function(e,t){s.stateCenter.actionListener("beautyEffectError",s.localStream,e.errorCode,e.extendedData,t)},this.videoEffect.onOutputChange=function(e){return n(s,void 0,void 0,(function(){var t,r;return i(this,(function(o){return this.videoTrack&&this.localStream&&(t=this.videoTrack,e&&(t=e),this.localStream.getVideoTracks()[0]!==t&&((r=this.streamCenter.getPublishList(this.localStream)).map((function(e){return e.publisher})).forEach((function(e){e&&e.previewer&&e.replacePublishedTrack(t,!0)})),0===r.length&&this.replacePreviewTrack(t,!!e))),[2]}))}))},[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 5:u.sent(),this.videoEffect.stateFlag=r,u.label=6;case 6:return[3,8];case 7:this.logger.error("zc.p.0.sbe.0 beauty effect module no found"),u.label=8;case 8:return[2]}}))}))}}},3048:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=i(r(8606)),a=i(r(8658)),c=i(r(5934)),u=i(r(8302));t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.2";var l=r(3471).errorCodeList.VIDEO_EFFECT_NOT_SUPPORT,d={errorCode:l.code,extendedData:l.message},h=function(){function e(e){this.logger=e,this.gl=null,this.effectConfig={sharpenIntensity:.5,whitenIntensity:.5,rosyIntensity:.5,smoothIntensity:.5,lowlightEnhancement:0},this.originResolution={width:0,height:0},this.shaderList=[],this.frameBufferList=[],this.outputTextureList=[],this.inputTexture=null,this.failedTimes=0,this.onRenderError=function(e){},this.enableBeauty=!1}return e.prototype.setEnableBeauty=function(e){this.enableBeauty=!!e},e.prototype.handleInitError=function(){this.failedTimes++,this.failedTimes>30&&(this.failedTimes=0,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" get webgl context failed"),this.onRenderError(d))},e.prototype.init=function(e,r,i){return o(this,void 0,void 0,(function(){var o,l,h,p;return n(this,(function(n){switch(n.label){case 0:return void 0!==window.WebGLRenderingContext?(this.canvasEl=i,this.gl=i.getContext("webgl"),this.gl?(this.initGL(e,r),this.inputTexture?[4,(o=new c.default(this.gl,e,r)).setConstUniforms()]:(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input texture not found"),this.handleInitError(),[2])):(this.handleInitError(),[2])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" not support webgl!"),this.onRenderError(d),[2]);case 1:return n.sent(),(l=new s.default(this.gl,e,r)).setConstUniforms(),(h=new a.default(this.gl,e,r)).setConstUniforms(),(p=new u.default(this.gl,e,r)).setConstUniforms(),this.shaderList=[o,l,h,p],this.setEffectConfig(this.effectConfig),[2]}}))}))},e.prototype.render=function(e){return o(this,void 0,void 0,(function(){var r,o,i,s,a=this;return n(this,(function(n){switch(n.label){case 0:return(r=this.gl)&&this.canvasEl&&!r.isContextLost()?[3,4]:this.canvasEl?(this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" gl lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight,this.canvasEl)]):[3,2];case 1:return n.sent(),[3,3];case 2:this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" canvas lost"),this.onRenderError(d),n.label=3;case 3:return[2];case 4:return this.originResolution.height===e.videoHeight&&this.originResolution.width===e.videoWidth||!(Math.abs(this.originResolution.height-e.videoHeight)>2||Math.abs(this.originResolution.width-e.videoWidth)>2)?[3,7]:0===e.videoHeight||0===e.videoWidth?[2]:(this.canvasEl.width=e.videoWidth,this.canvasEl.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),!this.gl||this.gl.isContextLost()?[3,5]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed to ".concat(e.videoWidth,"x").concat(e.videoHeight,", reset resolution.")),this.resetResolution(e.videoWidth,e.videoHeight),this.shaderList.forEach((function(t){t.resetResolution(e.videoWidth,e.videoHeight)})),[3,7]));case 5:return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed and gl context lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight,this.canvasEl)];case 6:n.sent(),n.label=7;case 7:return o=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],i=[0,1,2,0,2,3],s=[0,0,1,0,1,1,0,1],r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.inputTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),this.shaderList.forEach((function(e,t){var n=e.program;if(n){e.renderPreTextures&&e.renderPreTextures(o,i,s),r.useProgram(n),e.render();var c=r.getUniformLocation(n,"uTexture"),u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,new Float32Array(o),r.STATIC_DRAW);var l=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,l),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),r.STATIC_DRAW);var d=r.getAttribLocation(n,"aPosition");r.enableVertexAttribArray(d),r.vertexAttribPointer(d,3,r.FLOAT,!1,0,0);var h=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,h),r.bufferData(r.ARRAY_BUFFER,new Float32Array(s),r.STATIC_DRAW);var p=r.getAttribLocation(n,"aTexCoordinate");r.enableVertexAttribArray(p),r.vertexAttribPointer(p,2,r.FLOAT,!1,0,0);var f=t===a.shaderList.length-1?null:a.outputTextureList[t];r.bindFramebuffer(r.FRAMEBUFFER,t===a.shaderList.length-1?null:a.frameBufferList[t]),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),r.activeTexture(r.TEXTURE0),f&&r.bindTexture(r.TEXTURE_2D,f),r.uniform1i(c,0)}})),[2]}}))}))},e.prototype.setEffectConfig=function(e){var t=this;isNaN(e.sharpenIntensity)||(this.effectConfig.sharpenIntensity=e.sharpenIntensity),isNaN(e.whitenIntensity)||(this.effectConfig.whitenIntensity=e.whitenIntensity),isNaN(e.rosyIntensity)||(this.effectConfig.rosyIntensity=e.rosyIntensity),isNaN(e.smoothIntensity)||(this.effectConfig.smoothIntensity=e.smoothIntensity),isNaN(e.lowlightEnhancement)||(this.effectConfig.lowlightEnhancement=e.lowlightEnhancement),this.shaderList.forEach((function(e){e.setEffectConfig(t.effectConfig)}))},e.prototype.release=function(){var e,t=this;this.shaderList.forEach((function(e){var r;e.program&&(null===(r=t.gl)||void 0===r||r.deleteProgram(e.program))})),this.outputTextureList.forEach((function(e){var r;e&&(null===(r=t.gl)||void 0===r||r.deleteTexture(e))})),this.frameBufferList.forEach((function(e){var r;e&&(null===(r=t.gl)||void 0===r||r.deleteFramebuffer(e))})),this.inputTexture&&(null===(e=this.gl)||void 0===e||e.deleteTexture(this.inputTexture)),this.inputTexture=this.gl=null,this.shaderList.forEach((function(e){e.release()})),this.shaderList=[],this.outputTextureList=[],this.frameBufferList=[]},e.prototype.initGL=function(e,r){var o=this.gl;if(!o)return this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" webgl context not found");this.inputTexture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.inputTexture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);for(var n=0;4>n;n++){var i=o.createTexture();if(!i)return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" create texture failed");o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,r,0,o.RGBA,o.UNSIGNED_BYTE,null);var s=o.createFramebuffer();if(!s)return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" create frame buffer failed");o.bindFramebuffer(o.FRAMEBUFFER,s),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0),this.outputTextureList.push(i),this.frameBufferList.push(s)}o.viewport(0,0,e,r),this.originResolution.width=e,this.originResolution.height=r},e.prototype.resetResolution=function(e,r){var o=this.gl;if(!o)return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" can not find webgl context");for(var n=0;n<this.outputTextureList.length;n++)o.bindTexture(o.TEXTURE_2D,this.outputTextureList[n]),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,r,0,o.RGBA,o.UNSIGNED_BYTE,null);o.viewport(0,0,e,r),this.originResolution.width=e,this.originResolution.height=r},e}();t.default=h},3471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={VIDEO_EFFECT_NOT_SUPPORT:{code:1103072,message:"not support beauty effect"},VIDEO_TRACK_NOT_READABLE:{code:1103074,message:"video track is not readable"},VIDEO_TRACK_OVERLOAD:{code:1103075,message:"beauty effect overload"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"}}},957:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeautyEffect=void 0;var o=r(3524);t.BeautyEffect={type:"BeautyEffect",install:function(e,t){for(var r in o.preview)Object.defineProperty(t.prototype,r,{value:o.preview[r],writable:!1});for(var r in o.zegoWebRTC)Object.defineProperty(e.prototype,r,{value:o.zegoWebRTC[r],writable:!1})}}},836:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.logger=e,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0}return e.prototype.startRecordBeautyEffectOutput=function(e){return r(this,void 0,void 0,(function(){var t,r,n,i=this;return o(this,(function(o){switch(o.label){case 0:return t=6,this.recordID?(this.logger.warn("zc.p.0.sbe.3 detector is already recording"),[2,{result:!0}]):(r=(new Date).getTime(),this.recordID=r,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingDuration=t,[4,new Promise((function(e){window.setTimeout(e,1e3*i.recordingDuration)}))]);case 1:return o.sent(),this.recordID!==r?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,n=this.recordedFrameCount/t,this.recordedFrameCount<this.targetFrameRate*this.recordingDuration/2?(this.logger.warn("zc.p.0.sbe.3 detect effect overload: current fps: "+n),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:n}]):(this.logger.info("zc.p.0.sbe.3 detect effect current fps: "+n),[2,{result:!0}]))}}))}))},e.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0},e.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},e}();t.default=n},6976:function(e,t){"use strict";function r(e){for(var t=e,r="",o=0;o<t.length;o++){var n=t.charCodeAt(o),i=n;n>=65&&n<=90&&(i=(n-65-13+26)%26+65),n>=97&&n<=122&&(i=(n-97-13+26)%26+97),r+=String.fromCharCode(i)}return r}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,r){this.gl=e,this.width=t,this.height=r,this.type="baseShader",this.program=null,this.program=null}return e.prototype.setEffectConfig=function(e){},e.prototype.setConstUniforms=function(){},e.prototype.resetResolution=function(e,t){this.width=e||this.width,this.height=t||this.height},e.prototype.render=function(){},e.prototype.renderPreTextures=function(e,t,r){},e.prototype.makeProgram=function(e,t){var o=this.gl,n=r(e),i=r(t),s=this.makeShader(n,o.VERTEX_SHADER),a=this.makeShader(i,o.FRAGMENT_SHADER),c=o.createProgram();return o.attachShader(c,s),o.attachShader(c,a),o.linkProgram(c),o.getProgramParameter(c,o.LINK_STATUS),c},e.prototype.release=function(){},e.prototype.makeShader=function(e,t){var r=this.gl,o=r.createShader(t);return r.shaderSource(o,e),r.compileShader(o),r.getShaderParameter(o,r.COMPILE_STATUS),o},e}();t.default=o},8606:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(6976)),a=r(1199),c=function(e){function t(t,r,o){var n=e.call(this,t,r,o)||this;return n.width=r,n.height=o,n.type="BlurShader",n.blurXProgram=null,n.blurYProgram=null,n.diffProgram=null,n.uIntensity=null,n.smoothIntensity=.5,n.blurTextureList=[],n.blurBufferList=[],n.blurXProgram=n.makeProgram(a.borderBlurVS,a.borderBlurFS),n.setBorderBlurProgram(n.blurXProgram,1/(r||1),0),n.blurYProgram=n.makeProgram(a.borderBlurVS,a.borderBlurFS),n.setBorderBlurProgram(n.blurYProgram,0,1/(o||1)),n.diffProgram=n.makeProgram(a.diffBlurVS,a.diffBlurFS),n.setDiffBlurProgram(n.diffProgram),n.program=n.makeProgram(a.mixBlurVS,a.mixBlurFS),n.initBlurBuffer(),n}return n(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.smoothIntensity)||(this.smoothIntensity=e.smoothIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,this.smoothIntensity)},t.prototype.initBlurBuffer=function(){var e=this,t=this.gl;this.blurTextureList.forEach((function(t){var r;t&&(null===(r=e.gl)||void 0===r||r.deleteTexture(t))})),this.blurBufferList.forEach((function(t){var r;t&&(null===(r=e.gl)||void 0===r||r.deleteFramebuffer(t))})),this.blurTextureList=[],this.blurBufferList=[];for(var r=0;r<3;r++){var o=t.createTexture();if(!o)return;t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null);var n=t.createFramebuffer();if(!n)return;t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),this.blurTextureList.push(o),this.blurBufferList.push(n)}},t.prototype.renderPreTextures=function(e,t,r){var o=this,n=this.gl,i=[0,1,0],s=[1,1,2];[this.blurXProgram,this.blurYProgram,this.diffProgram].forEach((function(a,c){if(a){n.useProgram(a);var u=n.getUniformLocation(a,"uTexture");n.uniform1i(u,i[c]);var l=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e),n.STATIC_DRAW);var d=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,d),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),n.STATIC_DRAW);var h=n.getAttribLocation(a,"aPosition");n.enableVertexAttribArray(h),n.vertexAttribPointer(h,3,n.FLOAT,!1,0,0);var p=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,p),n.bufferData(n.ARRAY_BUFFER,new Float32Array(r),n.STATIC_DRAW);var f=n.getAttribLocation(a,"aTexCoordinate");n.enableVertexAttribArray(f),n.vertexAttribPointer(f,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.FRAMEBUFFER,o.blurBufferList[c]),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),n.activeTexture(n.TEXTURE0+s[c]),n.bindTexture(n.TEXTURE_2D,o.blurTextureList[c])}}))},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,r=this.program;if(r){var o=this.gl;o.useProgram(r);var n=o.getUniformLocation(r,"widthOffset");o.uniform1f(n,1/e);var i=o.getUniformLocation(r,"heightOffset");o.uniform1f(i,1/t),this.uIntensity=o.getUniformLocation(r,"blurAlpha"),o.uniform1f(this.uIntensity,this.smoothIntensity);var s=o.getUniformLocation(r,"blurTexture");o.uniform1i(s,1);var a=o.getUniformLocation(r,"blurDiffTexture");o.uniform1i(a,2)}},t.prototype.resetResolution=function(e,t){this.width=e||this.width,this.height=t||this.height},t.prototype.setBorderBlurProgram=function(e,t,r){var o=this.gl;o.useProgram(e);var n=o.getUniformLocation(e,"texBlurWidthOffset");o.uniform1f(n,t);var i=o.getUniformLocation(e,"texBlurHeightOffset");o.uniform1f(i,r)},t.prototype.setDiffBlurProgram=function(e){var t=this.gl;t.useProgram(e);var r=t.getUniformLocation(e,"blurTexture");t.uniform1i(r,1)},t}(s.default);t.default=c},5263:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lightLut=void 0,t.lightLut="\ndata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAAAAAB5Gfe6AAAM3mlDQ1BJQ0MgUHJvZmlsZQAAWIWlVwdYU8kWnluS0BJ6lRI60gwoXUqkBpBeBFGJIZBACDEFAbEhiyu4dhHBsqKiKIsdgcWGBQtrB7sLuigo6+IqNixvEopYdt/7vnfzzb3/nXPOnDpnbgBQ5TAFAh4KAMjki4WBUfSEKQmJVNJdIAe0gTKwB8pMlkhAj4gIhSyAn8Vng2+uV+0AkT6v2UnX+pb+rxchhS1iwedxOHJTRKxMAJCJAJC6WQKhGAB5MzhvOlsskOIgiDUyYqJ8IU4CQE5pSFZ6GQWy+Wwhl0UNFDJzqYHMzEwm1dHekRohzErl8r5j9f97ZfIkI7rhUBJlRIfApz20vzCF6SfFrhDvZzH9o4fwk2xuXBjEPgCgJgLxpCiIgyGeKcmIpUNsC3FNqjAgFmIviG9yJEFSPAEATCuPExMPsSHEwfyZYeEQu0PMYYl8EyG2griSw2ZI8wRjhp3nihkxEEN92DNhVpSU3xoAfGIK289/cB5PzcgKkdpgAvFBUXa0/7DNeRzfsEFdeHs6MzgCYguIX7J5gVGD6xD0BOII6ZrwneDH54WFDvpFKGWLZP7Cd0K7mBMjzZkjAEQTsTAmatA2YkwqN4ABcQDEORxhUNSgv8SjAp6szmBMiO+FkqjYQR9JAWx+rHRNaV0sYAr9AwdjRWoCcQgTsEEWmAnvLMAHnYAKRIALsmUoDTBBJhxUaIEtHIGQiw+HEHKIQIaMQwi6RujDElIZAaRkgVTIyYNyw7NUkALlB+Wka2TBIX2Trtstm2MN6bOHw9dwO5DANw7ohXQORJNBh2wmB9qXCZ++cFYCaWkQj9YyKB8hs3XQBuqQ9T1DWrJktjBH5D7b5gvpfJAHZ0TDnuHaOA0fD4cHHop74jSZlBBy5AI72fxE2dyw1s+eS33rGdE6C9o62vvR8RqO4QkoJYbvPOghfyg+ImjNeyiTMST9lZ8r9CRWAkHpskjG9KoRK6gFwhlc1qXlff+StW+1232Rt/DRdSGrlJRv6gLqIlwlXCbcJ1wHVPj8g9BG6IboDuEu/N36blSyRmKQBkfWSAWwv8gNG3LyZFq+tfNzzgbX+WoFBBvhpMtWkVIz4eDKeEQj+ZNALIb3VJm03Ve5C/xab0t+kw6gti89fg5Qa1Qazn6Odhten3RNqSU/lb9CTyCYXpU/wBZ8pkrzwF4c9ioMFNjS9tJ6adtoNbQXtPufOWg3aH/S2mhbIOUptho7hB3BGrBGrBVQ4VsjdgJrkKEarAn+9v1Dhad9p8KlFcMaqmgpVTxUU6Nrf3Rk6aOiJeUfjnD6P9Tr6IqRZux/s2j0Ol92BPbnXUcxpThQSBRrihOFTkEoxvDnSPGByJRiQgmlaENqEMWS4kcZMxKP4VrnDWWY+8X+HrQ4AVKHK4Ev6y5MyCnlYA75+7WP1C+8lHrGHb2rEDLcVdxRPeF7vYj6xc6KhbJcMFsmL5Ltdr5MTvBF/YlkXQjOIFNlOfyObbgh7oAzYAcKB1ScjjvhPkN4sCsN9yVZpnBvSPXC/XBXaR/7oi+w/qv1o3cGm+hOtCT6Ey0/04l+xCBiAHw6SOeJ44jBELtJucTsHLH0kPfNEuQKuWkcMZUOv3LYVAafZW9LdaQ5wNNN+s00+CnwIlL2LYRotbIkwuzBOVx6IwAF+D2lAXThqWoKT2s7qNUFeMAz0x+ed+EgBuZ1OvSDA+0Wwsjmg4WgCJSAFWAtKAebwTZQDWrBfnAYNMEeewZcAJdBG7gDz5Mu8BT0gVdgAEEQEkJG1BFdxAgxR2wQR8QV8UL8kVAkCklAkpE0hI9IkHxkEVKCrELKkS1INbIPaUBOIOeQK8gtpBPpQf5G3qEYqoRqoAaoBToOdUXpaAgag05D09BZaB5aiC5Dy9BKtAatQ0+gF9A2tAN9ivZjAFPEtDBjzA5zxXyxcCwRS8WE2DysGCvFKrFa2ANasGtYB9aLvcWJuDpOxe1gFoPwWJyFz8Ln4UvxcnwnXoefwq/hnXgf/pFAJugTbAjuBAZhCiGNMJtQRCglVBEOEU7DDt1FeEUkErVgflxg3hKI6cQ5xKXEjcQ9xOPEK8SHxH4SiaRLsiF5ksJJTJKYVERaT6ohHSNdJXWR3sgpyhnJOcoFyCXK8eUK5Erldskdlbsq91huQF5F3lzeXT5cPkU+V365/Db5RvlL8l3yAwqqCpYKngoxCukKCxXKFGoVTivcVXihqKhoouimGKnIVVygWKa4V/GsYqfiWyU1JWslX6UkJYnSMqUdSseVbim9IJPJFmQfciJZTF5GriafJN8nv6GoU+wpDEoKZT6lglJHuUp5piyvbK5MV56unKdcqnxA+ZJyr4q8ioWKrwpTZZ5KhUqDyg2VflV1VQfVcNVM1aWqu1TPqXarkdQs1PzVUtQK1baqnVR7qI6pm6r7qrPUF6lvUz+t3qVB1LDUYGika5Ro/KJxUaNPU01zgmacZo5mheYRzQ4tTMtCi6HF01qutV+rXeudtoE2XZutvUS7Vvuq9mudMTo+OmydYp09Om0673Spuv66GbordQ/r3tPD9az1IvVm623SO63XO0ZjjMcY1pjiMfvH3NZH9a31o/Tn6G/Vb9XvNzA0CDQQGKw3OGnQa6hl6GOYbrjG8Khhj5G6kZcR12iN0TGjJ1RNKp3Ko5ZRT1H7jPWNg4wlxluMLxoPmFiaxJoUmOwxuWeqYOpqmmq6xrTZtM/MyGyyWb7ZbrPb5vLmruYc83XmLeavLSwt4i0WWxy26LbUsWRY5lnutrxrRbbytpplVWl1fSxxrOvYjLEbx162Rq2drDnWFdaXbFAbZxuuzUabK7YEWzdbvm2l7Q07JTu6XbbdbrtOey37UPsC+8P2z8aZjUsct3Jcy7iPNCcaD55udxzUHIIdChwaHf52tHZkOVY4Xh9PHh8wfv74+vHPJ9hMYE/YNOGmk7rTZKfFTs1OH5xdnIXOtc49LmYuyS4bXG64arhGuC51PetGcJvkNt+tye2tu7O72H2/+18edh4ZHrs8uidaTmRP3DbxoaeJJ9Nzi2eHF9Ur2etnrw5vY2+md6X3Ax9TnxSfKp/H9LH0dHoN/dkk2iThpEOTXvu6+871Pe6H+QX6Fftd9Ffzj/Uv978fYBKQFrA7oC/QKXBO4PEgQlBI0MqgGwwDBotRzegLdgmeG3wqRCkkOqQ85EGodagwtHEyOjl48urJd8PMw/hhh8NBOCN8dfi9CMuIWRG/RhIjIyIrIh9FOUTlR7VEq0fPiN4V/SpmUszymDuxVrGS2OY45bikuOq41/F+8aviO6aMmzJ3yoUEvQRuQn0iKTEusSqxf6r/1LVTu5KckoqS2qdZTsuZdm663nTe9CMzlGcwZxxIJiTHJ+9Kfs8MZ1Yy+2cyZm6Y2cfyZa1jPU3xSVmT0sP2ZK9iP071TF2V2p3mmbY6rYfjzSnl9HJ9ueXc5+lB6ZvTX2eEZ+zI+MSL5+3JlMtMzmzgq/Ez+KeyDLNysq4IbARFgo5Z7rPWzuoThgirRIhomqherAH/YLZKrCQ/SDqzvbIrst/Mjpt9IEc1h5/TmmuduyT3cV5A3vY5+BzWnOZ84/yF+Z1z6XO3zEPmzZzXPN90fuH8rgWBC3YuVFiYsfC3AlrBqoKXi+IXNRYaFC4ofPhD4A+7iyhFwqIbiz0Wb/4R/5H748Ul45esX/KxOKX4fAmtpLTk/VLW0vM/OfxU9tOnZanLLi53Xr5pBXEFf0X7Su+VO1eprspb9XD15NV1a6hrite8XDtj7bnSCaWb1ymsk6zrKAstq19vtn7F+vflnPK2ikkVezbob1iy4fXGlI1XN/lsqt1ssLlk87ufuT/f3BK4pa7SorJ0K3Fr9tZH2+K2tWx33V5dpVdVUvVhB39Hx86onaeqXaqrd+nvWr4b3S3Z3VOTVHP5F79f6mvtarfs0dpTshfslex9si95X/v+kP3NB1wP1B40P7jhkPqh4jqkLreu7zDncEd9Qv2VhuCG5kaPxkO/2v+6o8m4qeKI5pHlRxWOFh79dCzvWP9xwfHeE2knHjbPaL5zcsrJ66ciT108HXL67JmAMydb6C3HznqebTrnfq7hvOv5wxecL9S1OrUe+s3pt0MXnS/WXXK5VH/Z7XLjlYlXjl71vnrimt+1M9cZ1y+0hbVdaY9tv3kj6UbHzZSb3bd4t57fzr49cGcB/Igvvqdyr/S+/v3K38f+vqfDueNIp19n64PoB3cesh4+/UP0x/uuwkfkR6WPjR5Xdzt2N/UE9Fx+MvVJ11PB04Heoj9V/9zwzOrZwb98/mrtm9LX9Vz4/NPfS1/ovtjxcsLL5v6I/vuvMl8NvC5+o/tm51vXty3v4t89Hpj9nvS+7MPYD40fQz7e/ZT56dN/AC1d8Bx8dIG+AAAAHGlET1QAAAACAAAAAAAAAIAAAAAoAAAAgAAAAIAAAB7VdMrVpAAAHqFJREFUeAHsnHmsnmWZxj9nnBlFUUFcx1FxQ0GsuCG77IsKLavKDrJoQYggIOBgpBQKjYBsEWgxhQoGaiUUSmgpDdghyBIEQpGwhqWhQKCEAoE231zXdd/P897Pu3zntD2HZDJ+f7SHAn/4y7Xdz0fs9f75+SeBfxL4f0zgHb13vvNfm59/WcXPO/7vfHrvfve73vWu/7DPv+fPv9nnna2fJrBBf7KKLEf7X++9D5/V38vPe96z2mqrvds+gJKoiE0m4z84IP3WCqn8w0GAVvDvjTSQ3ofWWuuDa665xhprfOAD73+/aBgO8BCRhERKqWEhmzqaFkLEVAIZxl+tIJeV/sd7n/jPj3/sox/9yIc/BBKOQiwE432r4yN5UCBOpEICtVAq/JiHyl872NgfRw2ln4fBZdA/slIQep9Ze+1PffK/PmEcPvqRRMJUQV1AGAYDVqlwOBC6pjKO+ydTacUiSAPZdBMSqUEMVvzv9db94jpf+PxngeHTzoGCIAjTxFofBAo6RCYJMEQjqcMipNJIzpKEJGilQy5ZPMNg4/9IEk7778Nk0dtgzFfWXw8U1vn85xIG6gHGIIhAIqKgMAgjScPEkd0i0whHck1TJYZG9km/ZAZdPwyfzbAQCVxv4w2/+fWvfXXMV7683pdA4QsJg+RAYxQgmBOMiiALuaSE0YZDLWNMZBr9EvQRf0xA/PcuHOWfrzAc/xd6W26+6cYbbfjNbxDC+hUFqQGuYDxIEBmEzFGRoEPcIsZCMCppsGXt42Gaf0sSsbIxLJFD7ecalu58KcHwrwbB6e24/TZbbbHZJgZhgzGksC61YGJANiAcIIfAQdaQNxATToKiKFBEGAWNhCPGhzGpgHi0DsmkKqFAp/m/f+Cf9Hbd5Xs7br/tVt/ZfNNNNv42lbDBV8eMgRRAwSyBaBAGycE5yBkJBCRBEhFFGwtTRogNjo5uHMEzJFP5Bj/VtNH4y4Aj/9hFofejvXYftzMZbL3lFptturEgMBRkiHW/pGBAMlQYaAtxYFIyIgwEJFEjIVUIRbaIVYkHaMxQwahwNOUhkQSNlESGZgJImUXxQ++g/ff54Z67jd35ezttv+02EALdQCV8XVJgLBgFWAIBmdUAW1Qc6iDqJAKKyEJd0k0jq6Nsl5whaYokLIVIhqETE05v/GEHH7Dvj/baY1cy2GG7bbbacgu6oYAQKEgMhmHtTzMdmhxcES6Jwh7WIJYWVXSmkZG6tehX10ZQRyePOpG6Slqt0zv2qPGHH3IgZLDX7onB1ltCCHADIHyLSmAqQApZCxJDUoMwSA7mCxjDBRFAUBJ1ElEWhS48P21oEEYZonW3DODRINJAstpqvZNPOPaoI35yKGSw9w/23H3cLtLBtltv9R0JQRCSH5yCxeM6X6AnMoYODoyIBIKSqEikzPRd4SUSKlW6SC4ZgkZwy0AeTSLv6U38NRAcfeRPDv3xgfvtAyvsNm6X78MLDAQJYRNTgkGgFEwLTqGJIdnC9eCCaIBoJ2GqSBap6aIFRqs2CrcMweO97+2dPek0IPjF0Uf+9LBDDoIMfpgY7Lj9dttICJshErISFI2QAmJhvXU9Hp1CVAMwWDwEDnRGAUKSCCSiKGoo6iwqGKldO5xCw/gQa59jvYt+99szJpwCBD//2fjDDz2YMoAVdpUOwABm2DK7AZkAJbAfIIVIgcMpi8EjEguKKVlyoCCaIAaSSCisUBseyc0aI3QAjRLH6qv3pl1y4bmTMwI44aD9KQMwGEsv7LjDdttug1TcArEoIQhCikYaImshU1A0AAP3U8LQwaFUhIEwTWhb5XXFpMCHexMfULCP5UT8lRj8w/j0D3XQ8eldfcXUi88/56zTTz3lJKjgqCPghIMPgAxohcQAgWBCqEFIUlAsmCNEQWIoMVRywHzwIaUjwwRRAzEkiYRiEItgk+CTeqf0Zv35ymlTLjrv7DMnEsFxxxx15E/phP33pRWcwXd33CGbYbNNKyWYH9iSY2SIlAsc0bSEegLRkNVADG6LBofsjKo2dI7n7nBNFElRqWKgLnKzShxJF/q9N2/2X66eftklF/7ut5MmnvrfJ/3yuGOOPnI8nXDAfmaF3cbRC8YgCgG5SDskCEoFGsIp6JTowOByoC0KDjkhJIgWEIU76v7IDqlk0chOuSV5RL/3bp9/06wZV14+9ffnnzt50mm/MQQ/G/8TOOHA/c0KuzuDnRiKxsAjwSAgGREKNpgghUyBJWGWSJ4o1JDk0M5BgmiCcHM4iQ5RVCiGYrHGGr2//+22uTdABH+49KLzzjnrDENw7NE/OwJOMBn86Ad77YFakA4QihnC5pspEgIErUYzREkhJQM8gWhwDJaRSknaoslBgugC0U6i7o+AooNF75H771ow78brZlx1+VT44OyMgHl4+KEmg71/qDgYN3ZneCEwUDcwEgoIlEJBQfEYxDAkhtIXxsFAtEiig0QTRQ7OEBdrrtl75tEH7759/pzrZ179x2lTfn/Bub898/QJNMLxx/78KITBYYdABkxENCMisWRg1cCCDBAUCgGCayFRiGJoqqGwhTikJeWV4aUxAERyR7JHC4mA4oO9l559bOG9d9x282yI4IrLLr3ofCH4NRGgFY8cTycoDfaGFfbcvWRgiUAh1CFwLwUK61s6lhSsJ0iBpqiqwlyRbVHnEJxhy7JIy9wcfnf4EcYXmzYUa/XefHnREw/dd+eCW26SCKZefOF550yeNHGCIThGYYBAdBkwDgIDDwSORcai3CA7qB4KCApHdQQoKB49H5sYUjhkOSge2jm4M9oUwSdt++gWTfdoDUWv/+aS5558+P67b7917uxrZ1w1/Q/wAaIAnVghgBMQiCiFffeWFchgF+ZBCgRVA4SQIGzEitzwW6oHKCFLoU4BwZBrgqshqiFjGIJDEREOIh+g0AM/3SQ+1Ov333pl8VOPPHjPHbfNu3HWzKuvvPyyS+ADpGGFgGHAQJQMZAXqYCwZpFCkGVwIyQ0JAkvS/eDZiFgIWqgouBi6McgWQQ8hIPh0nQ4NP7rCJW4cWkh8GAD6y159/ulHF/4dNphzw7Uz/jR92hT4AFFwxmmuAuYhOoGBeCD2ERIRcWDVuPP3vRjUjkhFc0MHhCiFJoXSE+0YJIdhcCitUVdEReIjBNBftvSFZx5/6L67br/1ZokAYfj7CxAFhuDkE084DgiwDOgEymC/fWCFFAe77OzlqEAwISQ3qBwKJUQpwBCqCGxH5gKCoRQDPVFgKF1hGLr04IKogWiSEID+8qUvPvvEw/ffc8df591EEfxx2tRLLkIUTD7zdKrAECAP5QSXQbYCJpIz0EqCGYIQvCEzhOwH3wpcjpmCxSMpBDEMwBDkEDkUxhgKhAHoL3/tpUVPPvLgvXcumD939qyZ11x5xR+mXMwomDypQoBKYC0mGWQrsBacgVYS9nISggqyhMDzAaFQSCGFIw+JJgVGQ4GBjVmpIbSmzUk7MKqTExMiJUSaESksP/YxB9Dvv/7yc08hCO66/bZ5N11PEVwOHzAKzgKC35wiFfzimKMZBnACAvFA7iNZAXEgBiqGncgAgRCEwJXgDSklsB4AwaMRUlA2mhQQjoFCmxiyKYQhcOClqVvTZ3UrhySIZI2PZwD915csfvqxh+6/+46/3jJn9nUzr7lqOnzAKACCiRMyAoYBnIBAVBq0MWA5IhAKIaggGQkbbwQI1pEJAqKxNESg4MGQLJHF0InBbBHzwQZE6YtKERWA/htLnn/m8X88cO/fFiALJQLzwe/OQSEkBMf/4hggMCeYDDwR99wj6gAMGAhioETQUqIQ6hCSH1QQJoWGFkgh5KOeGuSJ4WGwfHAOdRABQP/NV15AFD4oG8y5wURw2aUXX3g+0zAgOPbnCAM4AdOgLoPKCxwIwQzej+YGh+DJWPnBpDAEhUIMNQx1VxRyaOcQAfTffPXFRU8+uvA+2GD+XIjgz1cjDOEDREFAgCMBCBAGdAJ7EWmAcZDjIOcBGAQzZCEMgpBmo0MoteDxGIPBxFBh0FHRwFBw4CsMPnyY46cA0H9r6UvPPYUguOdv/3MrCpEiQBhOQSUqDZMKfnn8ccciDxEG7IQgA19Iu7UxUCpSCHRDE4KSMfghZ6MXZcqFtBiGiSGEpGMo4uGTnywBiMDTDAK0wS1zb5xFEUyfBh9cdD6igIVgcSgEFgYeiEEGXIm77cpuRC9wKFZm8I2QGeRMqOrBotGkUFHAWrDpqI5op1AmpJ2YpoaIoeTwqRqA/rLXXl78zOMIgrvvWDD/ZongT380HzQQIA8ZBnICZRAY7FljkALB67EmhJgJUEIKhToEGqKNwkAxBFMUGBKHOgAQWPL8s088spA2uG3enNkUwVXTkw/OnkwVnMpSPOmXJxxHBAwDTYMKgcdBqQMxUDNwJ/F0KtzQhNAuhUSBlsBqkhZSS+QB2YgGw9Aih7UbAPrLX1/yAqLwoQfuvfP2v5oIMIuumDYVPkAUMA0jAuYhw4CBWMhAB1OdgUIx12NmECIBOyENBSihgFAZIlLIGLwrAwV5IiRkG4YmgP7yN155cdFTj/1DNri1EoH6AD4oEaASmId1J1gr6GiMeVAFAs1QE0KeCRlCSkZO58oQoSLoiEY8yhK5LQer4TMtAPr9N1598bmnH3944X20AbIQdTDjTwzDKahERQFmQTYCETAPmzKQFRiJmYG9IDAU62ao52KEMEAKrVposYSJoamGz7YCwCB4afEzTzzy0P1mAyUBGhFhKB+wECoEJ55wPFoxhUHlBBsHakZjME69IAYeCDRDIQQvSC+HvJstGd0PTSl0U2gVQ8TwuXYA/TeXvvz8s08++o8H2Aa3QgTXQwRoxMsdwblnoxOzCohAeZidkNNAVmAcsBYwD8aNtcORz2k5EDIDj0VFQjcEuyU5G5kK0RCFI3JX1ilENXy+A0D/rddAgEFAGzALWQfXMAzNB0zDiADDQPuw5gTbiLQC46BgoCdFM0NNCO4GRYLKoVBC5QeXQshGSaFJQZbowNAFAARQBk8hCGiDBchCEwEakSJQFKgTJ06wUjxRCMow8GLUTqYVhsfAu0FuKCFYPVR+cCn4CZGksEIU1ukE0F/2+iuIQgTBA3+/i1mIVSQRVD5AFEw+c9LphuBXJ53IYaAwKGWgfUQrtDPwYuAjAgKhxQ0DIJSpEA2RY0EdkavStBDF0A1ABBCFj7IPOQmyCNwHXAUNBKoEq0WfBiYDJiLvpVYdWCCwGYIZJAS5IUVCtkOhhAChHgstFKrhZBS+OAAABgHK4NknH3sYQXCXsrAQASuRCFAIUQVeCUkFPo8oA1rB40C1UGUin9ftZMgMfCMoFuGGARA8FMJWKKQwmMKXBgEgAUahgoA2mH/znNnXX/eXGVejEaddxkrEKmAhVAhOhhGYhzaO8jSQDJiIbgWrhdwLOpoKBl6PvpghhBQJKIe6EjwUBkmhk8K6AwH0WYcvLHr6cQYBbXDrPKyiWdfOvAazSH2AdaxtSASnKQ5/lRFwI6d1pJWsaylaIepAr6rOIJhBQijcgEioQ8ALW4CQpNAwRBuF9YYAAAJLXkAUIghkA2ShRIBGtDCEDy44j/MYnZgR4E6SCjICOxSiDEIcBB3weu4UQnBDN4SaHzKEXBE1Cl8eCgDr8MXnnkEQoA/v5iRwEVQ+8CgoEWgbpUpwJ2QZZCukSNRU5kaiDgoGnoqFECwSBkOgH7qlUFFYf0gAIPDKi4sRBG4D7EKsIiSBiYC7iFHghYBxOOHUX5/y3786Ga3oKshO0EqmDDwRrRl9HnQxiPWoRIAQLBKQi3UIXg9dfijDURS+MjQA1uFLz2MTPWI2QBaiEJkEEgF2EU4kRgHSELOgQFA6wXqRKxlp4ImodaBI9JOppoM8FZWKSQgGQd3gDKpgDBDoh1YpVIYYMwwAIIAyWMQgkA2QhbfMzSKwPrAoUCEYAjyZSAURgTmBvegyMCsoDjoZ5HasdhKEkGKxcEMJwZOxAaEWC8MB0F/2BsrAgoBtcMcCFmISAcPwsilcx0pDdCLGYWoEzsOch9YJCsRKBtYKvpD8XLCbyfMgh6LMkITQ5YYmhOiHIhVkiK8OCwAGwVJFIYOAbaAsTCLAKJAPPApQCB0IPAzohLoMqjhoMsihqHasC6ElEhyCvyhQCYTQLoUNhgegv/xNlAGjEH3INsB5hEJ0EdgomHqpogBpSAQYhw0VHGO1KCcwECEDvqRqI2ok6mjU5cxqzDrIxeCBAAZBCNENVS4OASFL4WvDBIBJ9BqjEEGAPnQbzEtJgGVY+QBpiAuhDUG6lLSO6ARLg8QAt4LHQZ1BLkcPhGQGXU6WCIUQymBsU0KOxq8PGwDrkASwCGQDTIJKBJhFCEP2AXyAKGAhcBkVKshhoIHIZ9RKBihGJaKswMcDXc5BByWDwgyohmFBYD00/PCN4QPov4UyYBQiCB68TzZAIboI0IgIQ94HtgqwDRsIqjxUGNAJTRm4FfSAwjjIDPJIUijKDEEIsR+LlcDVHOzQgPDNFQCgOnzhOQUBbHDPncjCLALMIoUh+sCiQAgwC0wFaRuZCiwM6AQPREsDyUCt4OuAVhiSQUrFuhCqhqxOBz4t6dU9K+FbKwKAdcgoVBCwDSwLTQSYRQpD+ECVyG3IO7EVgW1k1qI7IaSBWyHEQZOBikGBkMyAVEQi1CFgKnkudkHYcIUAGAEFgdkAj2W0geoA21hhCB9YFDAN1YktKrA8ZBi4E3Ip5FYIcRB0kIdiwaA0gydClYsDIHx7xQCwDhmFDAL0YWUDbYKZMxSG2EWqRKWhCqFFBXo8Uy26E0IplFawSGwyUDkWgWD1WBdCFQksh7oSNlpBAEYAUchFsNBtoCzkJpAI+FJgPuCNZIXQYgTbh0TgTrB5pDRQMWYrcCWyFoZgADM0hYCR4ELwSKhD2HhFAeA/LGUZYBNhEaAP78Uy9izEiYgDiWGoPoAPeCPxsYCzoKGCKg/dCdaLKQ2CFRiJQzFIgQAGLUIYAGHFAYjAi4u5CBAEsAGzMIiAYchx7JUIBEzDFgR2JTAPWYsWiE0Z6BUtIKjrQAMhBUJqx4JBNRLcDYyEpIRNVgIACKAMPAgWPuAEVIgSARtRPrBKvJCXcisCGwbMQ3eCBWJKAz0c5IEUGOxRdaMysc7AzFBAwP1YuiFDWBkAKoOXnlcQRBtwFd0wC08lEoH5AJVoUeAITp+odei7QAhSHkYnpFLQ4wnfk/moPgwGKRTrDKp+DG4QhJUCAAIoA26iJzCMgw1wH7kIuAyTDywKpAKLAp5JhkDnsvKQ46h0gtIgy6CbgR9N0EEqBgRCNEOxEVwIdANzcfOVA9BfhjpkFDII0Aa0gbIwicDDEH1AH/BAYCGETkwI+HR2wvFE4GFg0yAFot5OKINohSIStZXFQGO5ZNAhhAhhJQGwDl99WVFofag2YBYGESgMVYlYx0IQo6BAwErwMDAn2KHgB6O/odWskKuxySCEYsWgEkJYSt9ZWQAg8PqrikIsgsoGPA48CSQC94EqsZGGbQiiE1plULOCz4NWBggEM0MFwQazJwKFsOVKA+AgWLpEUfgEbIAgsElg03j29ZxFCEOMAvqAV2KZhtrHjkCvh2xF5qHVYnKCetHTIFlhGAxSMbQwKIWw1SoA6L/1xlJFoQcBRxEnQSEChCFGgfmAz4aKgjALWhDkMEjTQL3INKgnYqgFzYNCB10MqnqkELZeFQCsQ0bhoqefDDbALtR95CKwUcBdpEO5C4HekEMehk6QE0IaWCIGGfhKbGUQQxHNUJnBhbDNKgFQHTIKeRooCFIW3nLzHNsEM3EjIgzNBykKWAgNFUQEpRMUiEEGLVYYggFCsW4GF8K2qwaAdYgy4CZiEOA6uvduLmNkIY/kIILgg9SJrQjYil4JKQzkhAEyyAtJtVDoIA1F6KDOwI+G7VYRgJUBohCLABeyjyJMgtvmJxFcOzOFofsAaZijIJ8IlgVUgSOwZZCcoMcjPSLyMZlpUJOBx4FXI55QUh50MXAzbL+qAPrLVQbaRMEGysIsAjQiwxDjWFHAPsgIzkqHohDo+yQg8EqwM0EXsx6PiIBp4Ecz0oADKceBLyRVY8kgjSTXQdWOO6wyABFAGTAIkg14ICoLlQS8kiUCjgKfhgWCM/1Wzgg4D20fhjBwJ3gvNmTgx8JABraWCzPsuOoAMAhYBopCEdBtgFcCFmIlghSGfDrmOi4RTLLnggEIdCfUZNCwgseBIrFdB3UGO40EAJaBopBBoDbwScBCTCLALGIjZh8MA4HlYQgDrSM+JbfJIFtBcTBcBt8dEQAqA65CI6A2sPOIWTj3JtbBdX9RI+pIVBRkArkTSxVwHpYI9HymZ1QiSGlQyMDjoIrEoXTwvZEBAAK4DGIQ4KUIj2UsxFIECkNEQc0HaRbkgcxrOSJIYZCdkHsxp0EeSDEOUjU2MtG98P0RAsA65C72KOQosklghViJgOdBuw98FtQRlHmoWvT3sw4ZuBUUB4rEgQx2HikAVgbcRB4EHEX33JWyMCcBG1EXkldiNgK3ob0cDkCgWsxO8IVovQgnhHEQrYA46Gawy4gBAAGVgRPgLJQNuAtDErARLQxDJYZZoGUUEfg2UisqDzUQgxNa0sDHgaxQRCJmor5mwnfveEPBRho7duQAsA5fi0GQbJALEdcBr2QPw3ofpDvRxiG/UmQpIguAoMxDPaJyHeVpkAMxJKKsUMVBqoUag3EjCUB1mKJQffjAfXgsy1noSSAR2IVU94EXgsZhJwLlod7SiYDToJEGeSfLCikO2hjsOqIAqjLIfeg2QBZqFWUReBjKB8UwsjtxAAI9nnkY5JFcIMgykBUKBooDVGPWwW4jC4AEuAotCHAfBhuoECkCvJzztYhhGPug2obqxIiAT8jJCI0wGEoGlRUQB6kWMoPdRxiA1aEI6DRAH9IGfCpSIWIaVyKwC6kQQTqS1Ik8EdwIQGDDILWi52GXE8pxUDVjikTUgjMYaQAsgyoKEQRqA74SKAuxirIIrBEhggLBBedbGg5GoPfDHAYxEItS8GJsWsGqkQxGHEAkwNMAfchR5FmIQkwi4DZ2HxiBEAX2ZMRZ0KkCRxDCoBGILgNPxGSFEInUwcgDyAQUBLgPow10IQYR2JkcRZCiQIXQjUBXgudhqMXcCfVi1E5ODPbmt2yIA+pgFADg/5YnRyGDAPchR5FsoOMA95ElgR4KPAyjD2wYZQS8lWtZkIaBXtL5lM4wMCdkBnw6ye9HkkFhBWcwKgAyAZ4GNRtYIZoI8FSSfYAkiKvA0lCdyGXUgcAroRYGGUGXDFIzksHoADACtokQBOpDbwNkIQpRIrgRwzA2oosgPZfYqxk7sQVB1Yo5DEonhHnkMlAiFlZAHOw9SgByECzmcRRtoF3IVdQUQYgCv5FUCG0I0jBQK+rLVX672uqEUgaFFTCU9xktAIkANxGCQH2oNtAkQBYWIvA3QxAIUWCPZiyEtIyiERoIwjIIYZAnYpsMYIV9Rw2AEdAqTEHgowiTwC5EPpdhGNqBlJahCKTnEqWhOpGzwLKA/4XFhFPTnaR3dK8EfsFc1WKxEF0GVTEmK+w3egD6y70M+EpCG6AP1QaaBHwy5SoCAkuCPAryLrKXU6UhC2EIBDkPW53g80gy0KmQrLD/KAJIdYh3IgSB+tBHEWzALOQqSiIoGjH7wKJAaegPJgNUoK+UTAVFGNRLQTJIiXjAqAJQGfCJIAUBryO0ASYBspCFOEAE9nXqxTaMmIYVgjPwYjLxNPyHNjKCjgQNAyKoL4PghDYZHDi6APrL7DJAFCoIog1wHqkQgwjyKEh9YOtYaTgMBLkSWmQwPj0bxDSADA4aZQBVFHoQ8DpCG+BA9CxMIuDLeTWLQh8oCnIaohB8H7epoBtBPhRqMjh4tAGIAJ8IEIUMAl5H0QYqxE4R2HeJlygKmIapE+1KqiHQNjoJ3yU087Dei5UMfjzqAECAlwFXIRcBZ6HaAAdiykKtIjViEAEfS0IlKgqYhj4LhkKQxlGtEzwQKxkcMvoArAwsClMQRBuoEGMdhCRIlah1zChwBOzEOgK9mejbFFOB5WFtILoTfB7xWno7ALAM8EiCd6IqCGADHIiYBMpCm8bVLCpGgfkgR4GpYKUQZCfoUJAMDntbAIAAnolqQYBR5DawQmwVgfvAKpFRwDT0QhikgqIVXQX5Yo4yOPztAZCiMAaB2cAnga8iDkNu46IP3AeqREaBp6GNw6YRdCTwqwQ6wYeBNnJeRz4NTAZvEwASsCjkIrD7kG3gNtBxgPuIz2UFAXs5Tk8FjIISATtR72ZVI/iXKQlBZlBdi+4EBeJP3y4AVgaIwhQE6kO3ASdBWkV1BHg7jz5gFHgaeieuKILSCePfNgB2G3kUahGoDzmKaAM7DhoiSM+m00MlehRUnZgOxVIFvpAblVA64Yj/BQAA//8grTFYAAAMPUlEQVTlm+eOVdcShP3CDAjDAIYBRLZBZGyBSQIHrOsoRzleXSfZBJFEEthYDCCSfEGEEUHH3dVh9Vp7nwH5x5wd5g2m1PVVda99XhrM3N/Tx48e3r/3/zu3b964dvXKX3/+cenC+XNnTp86cfzY0cO///brLz//+L///vD9d99+8/VXX37x+WeffvLxRx9+8P5/3nvv0LvvvP3WwYMH9u/bu3fP7jff3LXzjTde37F9+7atW7ds3rxp48YN69e/9uqr69atXbNm9epVK1euWLF8+bJlS5dOLFmyePErryxatHDhggXj4/Pnz5837+WX586dM2f27NljY7NmzXpp5v7/weDp4ylW4O/bt25cvzr51+U/Ll08f+7s6VMnTxw7euTw76TATyxBVEAlOPQuJDjAEuwhCXaRBK9PI8GqJMGES6AaiATQYGxsbEYFGDx9MvXwwb27qsCVy39eunjh3Nkzp0/SEJACNARQoDIENAU8BDQFB/azBLtJgp0iwbZtW7ds2bypMgWZBK6BjAFLYGMwswIMnj2ZesQK3Ll18/q1SbbBxWSDI7BBPgTJB4eSD4IEO3Zsdwk25EaYXgJ1wpwZFoAUePzowf27DoLSBr/9KjYohgAoiD4IKPh3EigM5s60AINnjkIFQbSBspCHwBQIMCx8oCggGk4nwUrDYcZDABFOmHEBWIGEQrLBZbfBSUqDwEKTQOJA8kB8wCjYpz4oaLhpY8UIdRI4D+fNvAASBg4Cz0OkwXFWgAPxpx89EFMiciQSCWIkJhpaJkKC10IoSioiFHUKYiyOQgAOA0GhNgIGgacBSSAKFJ0gKwWcB6EVVDJxw/qqBFwMJiYyJ4yPj49EAAkDRSE1gmgDqQR5K0q1SGCIPLBITMUIKLBmNEwC0iCWowWjEQBh4J1I8pBrodjAemHZCbQZ5j5IKAg0RDl8IQkWjkgADwNpBAQCtwGaMUgQAjF141COgw+8G4ZAYBzWGyFMwaJRCSBhoCik1YCKMechdgPqhYmFGQm0FgGG0QfaCgwFWTms4FCWBOPhyATwMEAnUhDABmdoN0Ag5iz0IZD1IMsD8oGgwCSgJSn14+kkWDxCASQMgELqRAoCSYNkA92PvBPojpiWRPVBgQJk4otIsGSUAiAMFIW0GjAIog10PUok8C1ZEpFhaD7QSBQUGA0RCLolDZuCiZEKkMKAliMFAbajs26DtB/ZEGg3BgyjD9KtAMeClIlaDuslWDpaAQIKqRMxCPhMwkcCupNoM85IYEMgiejHEvKBtuOAgheSYNmIBXAFCIUKAuShpQGWg0wCZqEMAWCIUqCnAlkQggR0MkIg8LkAK0J1CpaPWgAKA+7FhEK6kjAIOA/VBriTVAJRh0AS0WFI+4FWQzmX4GiGk5FKQGczPheUEqwYvQCqAF3KFARcjN0GfipiFqZOIAsSYGilQFckQUGgoQaClsNSgpUNEMBQSHciA8FzbBCHwGFY6wMEwnQSrGqCAKIAtUIFQcpDZqGUIk+DYkv2IdA9WbbEvBgpDbUW5EZY3QgBFIUFCKINShLo5Ry1yGGYTgXBB+iGwyVY0wwBoICjkBuB5KHvBlka2BDIloxEZBhyKRAfyO24SkNvRjYFa9eubYgApADCgFHIIOBirLUQlUCvBDEQyyGwUiB5ECIxBkJFgnVNEUDikHoxo5AbAUCAtyNRQO6FroA+IKUhYBhqOfY8CChQGnot8FBsjgAZCtEIJA+rNvDtQIYAtYhhONQHeEUZIkGDBGAF6OFIUSgg0Dx87hBwLWIYqg8IBdyL4ANDgdLQM5G3JGJBkwSwMNBOpCCot4Gdy6pDkHxgEtCtAMUoDwR5TtvQKAEsDBIIUIxxKbJz4ZHDdjenXigkkFNJGIJqHmBBUBp6JkKCZgkgYcAo5E4kIMB+yAdTXhCzVqSP6RgCdGNORIVhXSQqCnRD4JsRSdAwATgM6CsCboW8HMmGzLtBqUARBxgCrkUBhtKLzAdAQU5DSNA4ATQMGIW8HHke8sH0+UMQfMCfVVgvslagKPBAIAmaJ4CFAToRGgEeTgQEuQ30YBhIEIaAYBgk4M8K9HKqXxbswLVgawMFyFGoIEhHAgWBvyHqkuwkCEMgR0OLxCgBfWHDj8p0MGmiAAUKEwjqbKCtCBdDuxYpDFMpKFqB05AkaKQAqgBQqCAIeRhsYEuyXEp4CNCNEwwrPkA7xmdWfDqlKWimABYGQCGWI94Ps+3oeFoOhgyBNsPgA9sSvRiRBE0VIEdhAkGVhRqI+RAoDGMpqEMBTUFjBYACdCLQTmQbMn9JEPPQWCjVmEmAexktSApDWRJDHqQFgT+229lcASQM0AqtEaQzCRpB6oX6hSEuJUaCNARyLLFeBB84CnY1WIAMhQEE5RDYcpAPAXfjKgwLHxANmywAK8C9mD8u5dVAN2Q+mgcb2LVMWhEPAb405TigIUhrcupFaMfaCnY3WgCEAZ8IZD1EMc7yMK1HGojYj4wEaQjkUmB5gIc0RcGehgsQUCjLEe6leDkJQ3BUj8b5EIRaJOciKwXwgaJgb9MFyFA4BAS2I0sglkNQwNDyQH2wr/ECGAqlE8UNWUCQeqEcStCKjAQ6BDERCx/sb74ACYU4GAsIuBbWshCBWDMEAsNQCtQHB1ogABQQFOqVpAoCqwRg4ZAhkHMRSkHywcE2CCBhIK3QXg2wGugMoBUxCISFlSHIEhFDkHzwVjsEkDCQSxkaAX9IULGBrEcSiNyKAgmKREx58HZLBNAwSJ2oqkB2KEEg8n6knYCGgN9PQAIrBfDBO20RwMMgLUdxBvxcKL0QgVgdApOA35DwmEpXw9YIkKFQnw/FBTENpBIgEOMQ6ILk6wGGAD441B4BRIGEwpo81GYMFj5/CCQPWiSAhsFQFJoNAgs5EJUE1SEQH7RKgITCSidKC6JUAhxKOBADCfhUEnZE8UG7BIgo1A25yENtxmCht6I0BN6NrRl+0DIBShSWIFAbJBZaK9JOIHfjAMMP2yaAolAvZXg+9BlwG0glcBbmJCh80DoBTIGyE4XtSGwAFnogpmKYD8HH7RNgYL2YD8YCgqwW6s04sZADcegQfNJGAaooDArouVAqgbOQW1HtEHzaSgGGotCPBLIggoUxELM4QCJ+1k4BHATRBWE3EBskFnIg1g/B5y0VwBWoBUG0gbNQW1ExBF+0VQDvxVUF7FaWXo8sEGuG4Mv2CkBD8HgKzyZZGPiZJNiAWciBWDMEX7VYgBoUVtIAlcBZqIEY4+DrNgswDQjUBtKMUQnYBjVD8E2rBRiqgNVC2ACVgFnIgVgOwbftFqBeAc/D8HTCNtAh4ED0O8F3LRegphfzp4XxVgYboBIEFnox/L71AmQozFYDqYXyhso2MBZqK5Ih+KH9AtTbYNKeDWADrwTVIeiAALUKDLFBYKGSoAsCVBXwQ1GwgVeCFIhMgk4IUCiQHs+0FlZsoIHIQ9ANASgM6HOiSjGupIGxMAxBVwSoU0DzsLAB90JlIS/JnRGgqoCBQGqh24ArgbKQq3F3BCgUcBCEUuTNWHshV+MOCRAUCIcizUNsRyhFnAZqA96PuiRAHQq1GCcbeDOW5eBwtwQIQyBXEvnV0eQV5CHe0dkGcQg6JkChgIFA8tBtwM1YWXi0awJEBfxUFvOQ04BtoJXgWOcEcAX4C2N9ORIQ1NrgePcEgAJZK1QQIA9LG5zooABlGCgIJA9RC4MNTnZSALcBu8AeUAUEnIcxDU51U4CggIFAinHFBqc7KoApgB9b8AzopxTIw2iDM10VoEShgKBqg7OdFSBHYSUPLQ3OdVgAswEVggwEmQ3Od1kAV8A6kYAAeWhpcKHTAqgC/oQcQMC1kG1wsdsC5CiMIOA85DS41HEBBs/CtTRuyAwC2KDrAoQw0OUogQA26L4AhkLrRAAB9kPYoAcC5CgUEKAYwwZ9ECBDYQAB5+GVXghACvjDkXQigICL8WQ/BEgo1E7kILjaFwFyFCYQXOuNAKKAvp8mEFzvjwARhQkEN3okQEChdCIGwc0+CZB6MVAIENzqlQAWBrIeAgS3eyZARCFAcKdvAgQUAgR/906AhEIBQf8EcBRiPbzbQwEyFN7rpQABhff7KUBC4YOeCuAofNhXAQyFj3orgKJwqscCCAj6LAAr8KTXAjAK+y0AobDnAgwG/wCbrnNMhT0MDgAAAABJRU5ErkJggg=="},8658:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(6976)),a=r(1199),c=function(e){function t(t,r,o){var n=e.call(this,t,r,o)||this;return n.width=r,n.height=o,n.type="LightShader",n.uLightIntensity=null,n.uRedIntensity=null,n.whitenIntensity=.5,n.rosyIntensity=.5,n.program=n.makeProgram(a.lightVS,a.lightFS),n}return n(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.whitenIntensity)||(this.whitenIntensity=e.whitenIntensity/100),isNaN(e.rosyIntensity)||(this.rosyIntensity=e.rosyIntensity/100)},t.prototype.render=function(){var e=this.gl;e.uniform1f(this.uLightIntensity,this.whitenIntensity),e.uniform1f(this.uRedIntensity,this.rosyIntensity)},t.prototype.setConstUniforms=function(){var e=this.program;if(e){var t=this.gl;t.useProgram(e),this.uLightIntensity=t.getUniformLocation(e,"intensity"),t.uniform1f(this.uLightIntensity,this.whitenIntensity),this.uRedIntensity=t.getUniformLocation(e,"rosyIntensity"),t.uniform1f(this.uRedIntensity,this.rosyIntensity);var r=t.getUniformLocation(e,"uPMVMatrix");t.uniformMatrix4fv(r,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},t}(s.default);t.default=c},5934:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(r(6976)),u=r(1199),l=r(5263),d=function(e){function t(t,r,o){var n=e.call(this,t,r,o)||this;return n.width=r,n.height=o,n.type="LowLightShader",n.uIntensity=null,n.lowlightEnhancement=!1,n.lutTex=null,n.lutImg=null,n.lutTexIdx=10,n.uLutTex=null,n.program=n.makeProgram(u.lightEnhanceVS,u.lightEnhanceFS),n}return n(t,e),t.prototype.setEffectConfig=function(e){this.lowlightEnhancement=1===e.lowlightEnhancement},t.prototype.release=function(){this.gl.deleteTexture(this.lutTex)},t.prototype.render=function(){var e=this.gl;e.uniform1f(this.uIntensity,this.lowlightEnhancement?.6:0);var t=this,r=t.program,o=t.width,n=t.height,i=t.lutTex;if(r){var s=e.getUniformLocation(r,"texelWidth");e.uniform1f(s,1/o);var a=e.getUniformLocation(r,"texelHeight");e.uniform1f(a,1/n),e.activeTexture(e.TEXTURE0+this.lutTexIdx),e.bindTexture(e.TEXTURE_2D,i)}},t.prototype.setConstUniforms=function(){return i(this,void 0,void 0,(function(){var e,t,r,o,n,i,a,c,u,d,h=this;return s(this,(function(s){switch(s.label){case 0:return e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t=[1,1,1,0,-.344,1.772,1.402,-.714,0],r=[.298973,-.168721,.500019,.58706,-.331298,-.41873,.113967,.500019,-.081289],(o=this.program)?((n=this.gl).useProgram(o),this.uIntensity=n.getUniformLocation(o,"uIntensity"),i=n.getUniformLocation(o,"matYUVtoRGB"),n.uniformMatrix3fv(i,!1,t),a=n.getUniformLocation(o,"matRGBtoYUV"),n.uniformMatrix3fv(a,!1,r),c=n.getUniformLocation(o,"uPMVMatrix"),n.uniformMatrix4fv(c,!1,e),u=n.getUniformLocation(o,"inputImageTexture2"),d=this,[4,new Promise((function(e){var t=n.createTexture(),r=h.lutTexIdx,o=h.lutImg;o||(o=new Image),o.onload=function(){h.lutImg=o,n.activeTexture(n.TEXTURE0+r),n.bindTexture(n.TEXTURE_2D,t),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,n.LUMINANCE,n.UNSIGNED_BYTE,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.uniform1i(u,r),t&&e(t)},o.src=l.lightLut}))]):[2];case 1:return d.lutTex=s.sent(),[2]}}))}))},t}(c.default);t.default=d},1199:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lightEnhanceFS=t.lightEnhanceVS=t.mixBlurFS=t.mixBlurVS=t.diffBlurFS=t.diffBlurVS=t.borderBlurFS=t.borderBlurVS=t.sharpnessFS=t.sharpnessVS=t.lightFS=t.lightVS=void 0,t.lightVS="cerpvfvba uvtuc sybng;\nnggevohgr irp2 nGrkPbbeqvangr;\nnggevohgr irp4 nCbfvgvba;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 iGrkPbbeq;\nibvq znva() {\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    iGrkPbbeq = nGrkPbbeqvangr;\n}",t.lightFS="cerpvfvba uvtuc sybng;\ninelvat irp2 iGrkPbbeq;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez sybng vagrafvgl;\nhavsbez sybng ebflVagrafvgl;\nirp3 oevtugarffNaqPbagenfg(irp3 pbybe){\n  sybng v = vagrafvgl * 1.0;\n  sybng CV = 3.1415926;\n  sybng O = 0.12 * v;\n  sybng p = 0.1 * v;\n  sybng x = gna((45. + 44. * p) / 180.0 * CV);\n  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;\n  erghea pbybe;\n}\nibvq znva() {\n  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);\n  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);\n  ty_SentPbybe = grkgherPbybe;\n}",t.sharpnessVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng vzntrJvqguSnpgbe;\nhavsbez sybng vzntrUrvtugSnpgbe;\nhavsbez sybng funecarff; \ninelvat irp2 iGrkPbbeq;\ninelvat irp2 yrsgGrkgherPbbeqvangr;\ninelvat irp2 evtugGrkgherPbbeqvangr;\ninelvat irp2 gbcGrkgherPbbeqvangr;\ninelvat irp2 obggbzGrkgherPbbeqvangr;\ninelvat sybng pragreZhygvcyvre;\ninelvat sybng rqtrZhygvcyvre;\nibvq znva() {\n  ty_Cbfvgvba = nCbfvgvba;\n  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);\n  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);\n  iGrkPbbeq = nGrkPbbeqvangr.kl;\n  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;\n  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;\n  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;\n  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;\n  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;\n  rqtrZhygvcyvre = funecarff;\n}\n",t.sharpnessFS="\ncerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 iGrkPbbeq;\ninelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;\ninelvat uvtuc irp2 evtugGrkgherPbbeqvangr;\ninelvat uvtuc irp2 gbcGrkgherPbbeqvangr;\ninelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;\ninelvat uvtuc sybng pragreZhygvcyvre;\ninelvat uvtuc sybng rqtrZhygvcyvre;\nhavsbez fnzcyre2Q hGrkgher;\nibvq znva() {\n  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;\n  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;\n  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);\n}",t.borderBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez uvtuc sybng grkOyheJvqguBssfrg;\nhavsbez uvtuc sybng grkOyheUrvtugBssfrg;\ninelvat irp2 i_grkpbbeq0;\ninelvat irp4 grkgherFuvsg_1;\ninelvat irp4 grkgherFuvsg_2;\ninelvat irp4 grkgherFuvsg_3;\ninelvat irp4 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n\n  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;\n\n  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);\n  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);\n}",t.borderBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\ninelvat uvtuc irp4 grkgherFuvsg_1;\ninelvat uvtuc irp4 grkgherFuvsg_2;\ninelvat uvtuc irp4 grkgherFuvsg_3;\ninelvat uvtuc irp4 grkgherFuvsg_4;\nibvq znva(ibvq) { \n  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;\n  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); \n}",t.diffBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 i_grkpbbeq0;\nibvq znva()\n{\n  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n}",t.diffBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nibvq znva(ibvq) {\n  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  irp4 qvssPbybe = vPbybe - zrnaPbybe;\n  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);\n  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);\n  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);\n  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);\n}",t.mixBlurVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\ninelvat irp2 i_grkpbbeq0;\nhavsbez sybng jvqguBssfrg;\nhavsbez sybng urvtugBssfrg;\ninelvat irp2 grkgherFuvsg_1;\ninelvat irp2 grkgherFuvsg_2;\ninelvat irp2 grkgherFuvsg_3;\ninelvat irp2 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));\n  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));\n}\n",t.mixBlurFS="\ncerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nhavsbez fnzcyre2Q oyheQvssGrkgher;\nhavsbez ybjc sybng oyheNycun;\nibvq znva(ibvq) {\n  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);\n  ybjc sybng nycun = oyheNycun * 1.0;\n  ybjc sybng gurgn = 0.1;\n  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);\n  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);\n  zrqvhzc sybng xZva = 0.1;\n  ybjc irp3 erfhygPbybe;\n  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;\n  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);\n  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));\n  ty_SentPbybe = irp4(erfhygPbybe,1.0);\n}",t.lightEnhanceVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng grkryJvqgu;\nhavsbez sybng grkryUrvtug;\ninelvat irp2 grkgherPbbeqvangr[9];\ninelvat irp2 grkgherPbbeqvangr2;\nhavsbez zng4 hCZIZngevk;\nibvq znva(){\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    grkgherPbbeqvangr2 = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    irp2 jvqguFgrc = irp2(grkryJvqgu, 0.0);\n    irp2 urvtugFgrc = irp2(0.0, grkryUrvtug);\n    irp2 jvqguUrvtugFgrc = irp2(grkryJvqgu, grkryUrvtug);\n    irp2 jvqguArtngvirUrvtugFgrc = irp2(grkryJvqgu, -grkryUrvtug);\n    \n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[1] = nGrkPbbeqvangr.kl - jvqguFgrc;\n    grkgherPbbeqvangr[2] = nGrkPbbeqvangr.kl + jvqguFgrc;\n    \n    grkgherPbbeqvangr[3] = nGrkPbbeqvangr.kl - urvtugFgrc;\n    grkgherPbbeqvangr[4] = nGrkPbbeqvangr.kl - jvqguUrvtugFgrc;\n    grkgherPbbeqvangr[5] = nGrkPbbeqvangr.kl + jvqguArtngvirUrvtugFgrc;\n    \n    grkgherPbbeqvangr[6] = nGrkPbbeqvangr.kl + urvtugFgrc;\n    grkgherPbbeqvangr[7] = nGrkPbbeqvangr.kl - jvqguArtngvirUrvtugFgrc;\n    grkgherPbbeqvangr[8] = nGrkPbbeqvangr.kl + jvqguUrvtugFgrc;\n}\n",t.lightEnhanceFS="cerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 grkgherPbbeqvangr[9];\ninelvat uvtuc irp2 grkgherPbbeqvangr2;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez fnzcyre2Q vachgVzntrGrkgher2;\nhavsbez uvtuc zng3 zngLHIgbETO;\nhavsbez uvtuc zng3 zngETOgbLHI;\nhavsbez sybng hVagrafvgl;\npbafg irp3 pbzcIrp = irp3(-0.0/255.0, -128.0/255.0, -128.0/255.0);\nirp4 eto2lhi(irp4 vachgETO) {\n    irp3 bhgchgLHI;\n    bhgchgLHI = zngETOgbLHI * vachgETO.eto;\n    bhgchgLHI -= pbzcIrp;\n    erghea irp4(pynzc(bhgchgLHI,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgETO.n);\n}\nirp2 fnghengvba(irp2 bet, sybng snpgbe) {\n    irp2 zbq = irp2((bet.k - 128.0/255.0) * snpgbe + 128.0/255.0,\n                    (bet.l - 128.0/255.0) * snpgbe + 128.0/255.0);\n    erghea pynzc(zbq, irp2(0.0, 0.0), irp2(1.0, 1.0));\n}\nirp4 lhi2eto(irp4 vachgLHI) {\n    irp3 bhgchgETO;\n    vachgLHI.eto += pbzcIrp;\n    bhgchgETO = zngLHIgbETO * vachgLHI.eto;\n    erghea irp4(pynzc(bhgchgETO,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgLHI.n);\n}\nibvq znva(){\n    irp4 lhi[9];\n    sbe(vag v = 0; v < 9; v++){\n        lhi[v] = eto2lhi(grkgher2Q(hGrkgher, grkgherPbbeqvangr[v]));\n    }\n    sybng fzbbguL = 0.0;\n    fzbbguL += 1.0*lhi[4].e + 2.0*lhi[3].e + 1.0*lhi[5].e;\n    fzbbguL += 2.0*lhi[1].e + 4.0*lhi[0].e + 2.0*lhi[2].e;\n    fzbbguL += 1.0*lhi[7].e + 2.0*lhi[6].e + 1.0*lhi[8].e;\n    fzbbguL = fzbbguL / 16.0;\n    sybng bhgchgL = grkgher2Q(vachgVzntrGrkgher2, irp2(fzbbguL, lhi[0].e)).e;\n    irp3 arjLHI = irp3(zvk(fzbbguL, bhgchgL, hVagrafvgl), lhi[0].to);\n    ty_SentPbybe = lhi2eto(irp4(arjLHI.eto, lhi[0].n));\n}\n"},8302:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(6976)),a=r(1199),c=function(e){function t(t,r,o){var n=e.call(this,t,r,o)||this;return n.width=r,n.height=o,n.type="SharpnessShader",n.uIntensity=null,n.sharpenIntensity=.5,n.program=n.makeProgram(a.sharpnessVS,a.sharpnessFS),n}return n(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.sharpenIntensity)||(this.sharpenIntensity=e.sharpenIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,.5*this.sharpenIntensity)},t.prototype.resetResolution=function(e,t){this.width=e||this.width,this.height=t||this.height,this.setConstUniforms()},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,r=this.program;if(r){var o=this.gl;o.useProgram(r);var n=o.getUniformLocation(r,"imageWidthFactor");o.uniform1f(n,1/e);var i=o.getUniformLocation(r,"imageHeightFactor");o.uniform1f(i,1/t),this.uIntensity=o.getUniformLocation(r,"sharpness"),o.uniform1f(this.uIntensity,.5*this.sharpenIntensity)}},t}(s.default);t.default=c},954:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=i(r(836)),a=i(r(3048)),c=r(3471),u=c.errorCodeList.VIDEO_TRACK_NOT_READABLE,l=c.errorCodeList.VIDEO_TRACK_OVERLOAD,d={errorCode:u.code,extendedData:u.message},h={errorCode:l.code,extendedData:l.message};t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.1";var p=function(){function e(e,t){var r=this;this.logger=e,this.kind="video",this._enabled=!1,this.lastRenderTime=0,this.stateFlag={base:!1,lowLight:!1},this.isStarting=!1,this.animationFrameId=0,this.backgroundLoop=null,this.eventHandler={visibilitychange:function(){document.hidden?function e(){return o(r,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.backgroundLoop=window.setTimeout(e,Math.floor(1e3/this.fps)),!document.hidden&&this.backgroundLoop?(clearTimeout(this.backgroundLoop),this.backgroundLoop=null,[2]):[4,this.renderAFrame()];case 1:return t.sent(),[2]}}))}))}():r.backgroundLoop&&(clearTimeout(r.backgroundLoop),r.backgroundLoop=null)}},this.setInput(t,!0),this.fps=15,this.detector=new s.default(e),this.backgroundLoop&&clearTimeout(this.backgroundLoop),this.backgroundLoop=null,this.lastRenderTime=0,this.manager=new a.default(e),this.manager.onRenderError=function(e){1103072===e.errorCode&&r.stopEffect(),r.onError(e)}}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.manager.effectConfig||{}},enumerable:!1,configurable:!0}),e.prototype.setBeautyEffectOptions=function(e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return n(this,(function(o){switch(o.label){case 0:return e&&this.manager.setEffectConfig(r),this.enabled===e?[3,6]:(this.manager.setEnableBeauty(e),this.enabled!==e&&this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" effect enabled "+e+"; options: "+JSON.stringify(r)),this.enabled=e,e?this.input?[4,this.startEffect()]:[3,2]:[3,3]);case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return[4,this.stopEffect()];case 4:o.sent(),o.label=5;case 5:o.label=6;case 6:return[2]}}))}))},e.prototype.startEffect=function(){return o(this,void 0,void 0,(function(){var e,r,i=this;return n(this,(function(s){switch(s.label){case 0:return this.isStarting=!0,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call start effect"),this.input?this.input&&this.output&&this.input!==this.output?(this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" video effect is already enabled"),[2]):[4,this.startWebGLProcessor().catch((function(e){throw i.stopEffect(),e}))]:(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect failed, input track is null"),[2]);case 1:return e=s.sent(),[4,this.updateOutput(e)];case 2:return s.sent(),this.enabled=!0,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect success"),this.detector.startRecordBeautyEffectOutput(this.fps).then((function(e){!e.result&&i.onError&&i.onError(h,{targetFPS:e.targetFPS,currentFPS:e.currentFPS})})),r=function(){return o(i,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this.enabled&&(this.animationFrameId=requestAnimationFrame(r)),[4,this.renderAFrame()];case 1:return e.sent(),[2]}}))}))},this.animationFrameId=requestAnimationFrame(r),document.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.isStarting=!1,[2]}}))}))},e.prototype.renderAFrame=function(){return o(this,void 0,void 0,(function(){var e,t,r;return n(this,(function(o){switch(o.label){case 0:return e=Date.now(),t=1e3/this.fps,(r=this.lastRenderTime?e-this.lastRenderTime:t)>=t?(this.lastRenderTime=e-(r-t),this.videoEl&&this.videoEl.paused&&this.videoEl.play(),this.enabled&&this.videoEl?this.videoEl.videoWidth>6&&this.videoEl.videoHeight>6?[4,this.manager.render(this.videoEl)]:[3,2]:[3,3]):[3,3];case 1:o.sent(),o.label=2;case 2:this.output&&this.output.requestFrame&&this.output.requestFrame(),this.detector.addFrame(),o.label=3;case 3:return[2]}}))}))},e.prototype.stopEffect=function(){return o(this,void 0,void 0,(function(){var e=this;return n(this,(function(r){switch(r.label){case 0:return this.enabled=!1,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call stop effect"),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),this.detector.stopRecordBeautyEffectOutput(),this.manager.release(),[4,this.updateOutput()];case 1:return r.sent(),void 0===this.removeDomTimer&&(this.removeDomTimer=window.setTimeout((function(){!1===e.enabled&&e.destroy()}),18e4)),document.removeEventListener("visibilitychange",this.eventHandler.visibilitychange),[2]}}))}))},e.prototype.destroy=function(){this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" destroy hidden elements"),this.canvasEl&&this.canvasEl.remove(),this.videoEl&&this.videoEl.remove(),this.videoEl=this.canvasEl=void 0,this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0)},e.prototype.startWebGLProcessor=function(){return o(this,void 0,void 0,(function(){var e,r,o,i,s=this;return n(this,(function(n){switch(n.label){case 0:return this.input?(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start webgl processor"),this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0),this.canvasEl&&this.videoEl?[3,2]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create elements"),this.canvasEl&&(this.canvasEl.remove(),this.canvasEl=void 0),this.videoEl&&(this.videoEl.remove(),this.videoEl=void 0),this.canvasEl=document.createElement("canvas"),this.videoEl=document.createElement("video"),this.videoEl.setAttribute("autoplay",""),this.videoEl.setAttribute("muted",""),this.videoEl.muted=!0,this.videoEl.setAttribute("playsinline",""),this.videoEl.setAttribute("style","display:none"),e=new Promise((function(e,r){var o=null;s.videoEl&&s.videoEl.addEventListener("playing",(function t(){o&&clearTimeout(o),s.videoEl&&s.videoEl.removeEventListener("playing",t),e(void 0)})),o=window.setTimeout((function(){s.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" video track error"),r(d)}),1e3)})),this.videoEl.srcObject=new MediaStream([this.input]),this.videoEl.play(),[4,e])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is null"),[2]);case 1:n.sent(),n.label=2;case 2:if(r=this.input.getSettings(),o=r.width||this.videoEl.videoWidth,i=r.height||this.videoEl.videoHeight,r.frameRate&&this.fps!==r.frameRate&&(this.fps=r.frameRate,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" set target fps: "+this.fps)),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" beauty video processor: width "+r.width+" height "+r.height),!o||!i)throw this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution of track is wrong"),d;return this.canvasEl.width=o,this.canvasEl.height=i,this.videoEl.setAttribute("width",o.toString()),this.videoEl.setAttribute("height",i.toString()),this.manager.init(o,i,this.canvasEl),[2,this.canvasEl.captureStream().getVideoTracks()[0]]}}))}))},e.prototype.setInput=function(e,r){return void 0===r&&(r=!1),o(this,void 0,void 0,(function(){var o,i;return n(this,(function(n){switch(n.label){case 0:return e===this.input?[3,6]:e.kind!==this.kind?(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" kind of track is not video"),[2]):(this.output&&this.input===this.output&&this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is same as effect track"),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" change input track"),r?this.input?[4,this.removeInput()]:[3,2]:[3,5]);case 1:n.sent(),n.label=2;case 2:return this.input=e,this.enabled&&!this.videoEl?[4,this.startEffect()]:[3,4];case 3:n.sent(),n.label=4;case 4:return[3,6];case 5:this.input=e,(o=this.videoEl)&&(o.srcObject?((i=o.srcObject).getTracks().forEach((function(e){return i.removeTrack(e)})),i.addTrack(this.input)):o.srcObject=new MediaStream([this.input]),o.play()),n.label=6;case 6:return[2]}}))}))},e.prototype.removeInput=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this.input=void 0,[4,this.stopEffect()];case 1:return e.sent(),[2]}}))}))},e.prototype.updateOutput=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.output===e?[3,3]:(this._output=e,this.onOutputChange?[4,this.onOutputChange(this._output)]:[3,2]);case 1:t.sent(),t.label=2;case 2:t.label=3;case 3:return[2]}}))}))},e.prototype.onOutputChange=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(e){return[2]}))}))},e.prototype.onError=function(e,t){},e}();t.default=p},6171:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioNodeQueue=void 0;var r=function(){function e(e,t){this.source=e,this.destination=t,this.audioNodeList=[],this.source.connect(this.destination)}return Object.defineProperty(e.prototype,"lastNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[this.audioNodeList.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondToLastNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[this.audioNodeList.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[1]},enumerable:!1,configurable:!0}),e.prototype.pushBack=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e),e.connect(this.destination)):(this.source.disconnect(),this.source.connect(e),e.connect(this.destination)),this.audioNodeList.push(e)},e.prototype.popBack=function(){this.lastNode&&(this.lastNode.disconnect(),this.secondToLastNode?(this.secondToLastNode.disconnect(),this.secondToLastNode.connect(this.destination)):(this.source.disconnect(),this.source.connect(this.destination))),this.audioNodeList.pop()},e.prototype.pushFront=function(e){this.source.disconnect(),this.source.connect(e),e.connect(this.firstNode?this.firstNode:this.destination),this.audioNodeList.unshift(e)},e.prototype.popFront=function(){this.source.disconnect(),this.firstNode&&(this.firstNode.disconnect(),this.source.connect(this.secondNode?this.secondNode:this.destination)),this.audioNodeList.shift()},e.prototype.remove=function(e){var t=this.audioNodeList.indexOf(e);if(-1!==t){if(e.disconnect(),t-1>=0){var r=this.audioNodeList[t-1];r.disconnect(),r.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination)}else this.source.disconnect(),this.source.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination);this.audioNodeList.splice(t,1)}},e.prototype.isConnected=function(e){return-1!==this.audioNodeList.indexOf(e)},e.prototype.isEmpty=function(){return 0===this.audioNodeList.length},e.prototype.replaceSource=function(e){this.source.disconnect(),e.connect(this.firstNode?this.firstNode:this.destination),this.source=e},e.prototype.replaceDestination=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e)):(this.source.disconnect(),this.source.connect(e)),this.destination=e},e}();t.AudioNodeQueue=r},608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlaySourceType=t.generaStreamSid=t.ClientUtil=void 0;var o=r(6706),n=r(3529),i=r(7139),s=function(){function e(){}return e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("avertp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,r){t.success&&(r[e+"SuccessCallback"]=t.success),t.error&&(r[e+"ErrorCallback"]=t.error)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,r,o,n){e.registerCallback(t,{success:function(t,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];e.dataReportEvent(r,o,t,n,i)}},n)},e.actionLogReportCallback=function(t,r,o,n,i){e.actionSuccessCallback(t,r)&&e.actionSuccessCallback(t,r)(o,n)},e.getServerError=function(e,t,r){if(t)return{code:e,message:r||"liveroom error"};var o={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",1013:"token03 format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return{code:0,message:""};var n={code:0,message:"liveroom cmd error"};if(n.code=e,e>1e9){var i=o[e];n.message=i?"liveroom cmd error, code: "+e+", message: "+i:o[1e9]+e}else n.message=o[e]?o[e]+" code:"+e:"unknown error code:"+e;return n},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var r={code:-1,message:"server error"};return e>1e9&&(r.code=e-1e9+52e6),t&&(r.message=t),r},e.getLiveRoomError=function(e,t){var r={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED"};return t?e>2e5&&e<3e5?r[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||r[e]||"ROOM_INNER_ERROR":r[e]||"ROOM_INNER_ERROR":e>1e9?r[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.getKickoutError=function(e){var t={};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000004,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:t.code=63000005,t.message="zpush token expired",t.name="TOKEN_EXPIRED";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,r,o,n){switch(r){case"eventStart":e.eventStart(t,o);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,o,n[0]);break;case"addEventMsg":e.addEventMsg(t,o,n[0],n[1]);break;case"addEvent":e.addEvent(t,o);break;case"eventEnd":e.eventEnd(t,o);break;case"addMsgInfo":e.addMsgInfo(t,n[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeStreamList=function(e,t,r,o){var n,i=[],s=[],a=[];r||(r=[]);for(var c=0;c<r.length;c++)if(r[c].anchor_id_name!=e&&r[c].id_name!=e&&r[c].user_id!=e){n=!1;for(var u=0;u<t.length;u++)if(r[c].stream_id===t[u].stream_id){r[c].extra_info!==t[u].extra_info&&a.push(r[c]),n=!0;break}n||i.push(r[c])}for(var l=0;l<t.length;l++)if(t[l].anchor_id_name!=e&&t[l].id_name!=e&&t[l].user_id!=e){n=!1;for(var d=0;d<r.length;d++)if(t[l].stream_id===r[d].stream_id){n=!0;break}n||s.push(t[l])}for(t.splice(0),c=0;c<r.length;c++)t.push(r[c]);o(i,s,a)},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=r},e.uuid=function(e,t){var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(t=t||o.length,e)for(r=0;r<e;r++)n[r]=o[0|Math.random()*t];else{var i=void 0;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",r=0;r<36;r++)n[r]||(i=0|16*Math.random(),n[r]=o[19==r?3&i|8:i])}return n.join("")},e.getDevices=function(e,t){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(t){for(var r=[],o=[],n=[],i=0;i<t.length;i++){var s=t[i];"audioinput"===s.kind&&r.push({deviceName:s.label,deviceID:s.deviceId}),"audiooutput"===s.kind&&o.push({deviceName:s.label,deviceID:s.deviceId}),"videoinput"===s.kind&&n.push({deviceName:s.label,deviceID:s.deviceId})}e&&e({microphones:r,speakers:o,cameras:n})})).catch((function(e){console.error("enumerate devices wrong "+e),t&&t(n.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kEnumDevicesError)})):t&&t(n.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kBrowserNotSupportError)},e.getPublisherStateType=function(e){return 0==e||1==e?0==e?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"},e.getPlayerStateType=function(e){return 0==e||1==e?0==e?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"},e.getSteamUpdateType=function(e){return 0==e?"DELETE":"ADD"},e.getNetQuality=function(e,t,r){return void 0!==r?.15*this.calcQualityOfJitter(r)+.85*Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!1)):Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!0))},e.isIos=function(){return null!==navigator.platform.match("iPhone")},e.isMacOs=function(){return null!==navigator.platform.match("Mac")},e.isAndroid=function(){return null!==navigator.platform.match("Android")},e.isWindows=function(){return null!==navigator.platform.match("Windows")},e.isWin32=function(){return null!==navigator.platform.match("Win32")&&null===navigator.userAgent.match("WOW64")},e.isLinux=function(){return null!==navigator.platform.match("Linux")},e.getOsType=function(){return this.isIos()?i.OSType.IOS:this.isAndroid()?i.OSType.ANDROID:this.isMacOs()?i.OSType.MAC:this.isWin32()?i.OSType.WIN32:i.OSType.UNKNOWN},e.checkScreenParams=function(t,r){if("object"==typeof t&&void 0!==t.videoQuality&&!e.checkInteger(t.videoQuality))return r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1;if("object"==typeof t&&void 0!==t.sourceID&&"string"!=typeof t.sourceID)return r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1;if("object"==typeof t&&4===t.videoQuality){if(!e.checkCameraOrScreenBitRate(t.bitRate,r))return!1;if(!e.checkParamsWithConstraintExtend(t,r))return!1}return!0},e.checkParamsWithConstraintExtend=function(t,r){for(var o=0,i=["frameRate","width","height"];o<i.length;o++){var s=i[o],a=t[s];if(void 0===a)return r&&r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," is required when videoQuality is 4")),!1;if("number"==typeof a&&!e.checkInteger(a,!1))return r&&r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," must be integer number")),!1;if("number"==typeof a&&("width"===s||"height"===s)&&a<0)return r&&r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," must greater than 0.")),!1;if("number"==typeof a&&"width"===s&&a>7680)r&&r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," cannot greater than 7680."));else if("number"==typeof a&&"height"===s&&a>4320)r&&r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," cannot greater than 4320."));else if("object"==typeof a){if("width"===s&&!e.checkConstraintExtend(a,s,r,0,7680))return!1;if("height"===s&&!e.checkConstraintExtend(a,s,r,0,4320))return!1;if("frameRate"===s&&!e.checkConstraintExtend(a,s,r))return!1}else if("number"!=typeof a&&"object"!=typeof a)return r&&r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," must be number or object")),!1}return!0},e.checkConstraintExtendWithMessage=function(t,r,o,n){if("object"!=typeof t)return{result:!1,message:"Invalid constraint. Constraint Extend must be a object"};if(0===Object.keys(t).length)return{result:!1,message:"".concat(r," can not be a empty object")};for(var i=0,s=["exact","ideal","max","min"];i<s.length;i++){var a=s[i],c=t[a];if("number"==typeof c&&!e.checkInteger(c,!1))return{result:!1,message:" ".concat(a," of ").concat(r," must be integer number")};if("number"==typeof o&&"number"==typeof c&&c<o)return{result:!1,message:" ".concat(a," of ").concat(r," must greater than ").concat(o)};if("number"==typeof n&&"number"==typeof c&&c>n)return{result:!1,message:" ".concat(a," of ").concat(r," cannot greater than ").concat(n)}}return{result:!0,message:"Constraint Extend OK."}},e.checkConstraintExtend=function(t,r,o,i,s){var a=e.checkConstraintExtendWithMessage(t,r,i,s);return a.result||o&&o(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError,a.message),a.result},e.checkBitRateLimit=function(e,t){return!(e>10240)||(t(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps"),!1)},e.checkCameraOrScreenBitRate=function(t,r){if(void 0===t)return r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate is required when videoQuality is 4"),!1;if("number"==typeof t){if(!e.checkValidNumber(t,0,10240))return r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1;if(!e.checkBitRateLimit(t,r))return!1}else r(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be number");return!0},e.checkCameraParams=function(t,r){return!!e.checkParamsWithConstraintExtend(t,r)&&!!e.checkCameraOrScreenBitRate(t.bitRate,r)},e.isParamEmpty=function(e){return null!=e&&""!==e},e.isTypeString=function(e){return"string"==typeof e},e.isTooLong=function(e,t){return!(e.length>=t)},e.isReDispatch=function(e){var t=e.message.match(/action:(\d+)/),r=t?Number(t[1]):NaN;return[n.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kTTLOverTimeError,n.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kClientIPChangedError,n.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kTTLOverTimeError,n.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kClientIPChangedError].includes(e)||[6].includes(r)},e.arrAvg=function(e,t,r){return e.push(t),e.length>r&&e.shift(),e.reduce((function(e,t){return e+t}))/e.length},e.calcQualityOfRtt=function(e){return e<600?97-Math.pow(.09*e,1.1):18*Math.exp(.002*(600-e))},e.calcQualityOfJitter=function(e){return e<=50?98-Math.pow(e,1.15):o.QUALITY_CONSTANT.PoorMinQuality},e.calcQualityOfLostRate=function(e,t){if(t)return e<=55?99-Math.pow(.8*e,1.18):o.QUALITY_CONSTANT.PoorMinQuality;var r=100*e;return r<=40?96-Math.pow(r,1.22):o.QUALITY_CONSTANT.PoorMinQuality},e.quality2QualityGrade=function(e){return e>=o.QUALITY_CONSTANT.ExcellentMinQuality?o.QualityGrade.Excellent:e>=o.QUALITY_CONSTANT.GoodMinQuality?o.QualityGrade.Good:e>=o.QUALITY_CONSTANT.MiddleMinQuality?o.QualityGrade.Middle:e>=o.QUALITY_CONSTANT.PoorMinQuality?o.QualityGrade.Poor:o.QualityGrade.Die},e.checkAudioTrackIsActive=function(e){return!!e.enabled},e.checkVideoTrackIsActive=function(e){return!!e.enabled},e.isSupportEncodedTransforms=function(){var e=!!window.RTCRtpScriptTransform;if(!e){var t=!!RTCRtpSender.prototype.createEncodedStreams,r=!1;try{new ReadableStream,r=!0}catch(e){console.error("Transferable streams are not supported.")}e=t&&r}return e},e.uint8arrayToBase64=function(e){for(var t,r=0,o=e.length,n="";r<o;)t=e.subarray(r,Math.min(r+32768,o)),n+=String.fromCharCode.apply(null,Array.from(t)),r+=32768;return btoa(n)},e.isMobile=function(){return!!(navigator.userAgent.match(/Mobi/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i))},e}();t.ClientUtil=s,t.generaStreamSid=function(e,t,r){var n=(new Date).getTime(),i=(0,o.getReportSeq)();return function(e){var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t>>>0}("".concat(e,"_").concat(t,"_").concat(r,"_").concat(n,"_").concat(i))},t.getPlaySourceType=function(e){var t="rtc";switch(e){case 0:default:t="rtc";break;case 1:t="cdn";break;case 2:t="l3"}return t}},4671:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.handlerListMap={}}return e.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},e.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,t)}),0)}catch(t){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(t))}}))},e}();t.default=r},7646:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.H264Parser=void 0;var r=function(){function e(e){this.view=e,this.offset=0,this.current_start_code_size=0,this.current_nalu_start=0,this.current_nalu_size=0,this.start_code_size=0,this.nalu_start=0,this.left_size=0,this.nalu_size=0,this.left_size=e.byteLength}return e.prototype.FindStartCode=function(){var e=this.view.byteLength-this.offset;for(this.current_start_code_size=0,this.current_nalu_start=-1;e>=3;){if(0==this.view.getUint8(this.offset)&&0==this.view.getUint8(this.offset+1)&&1==this.view.getUint8(this.offset+2))return this.current_start_code_size=3,this.current_nalu_start=this.offset,this.offset-1>=0&&0==this.view.getUint8(this.offset-1)&&(++this.current_start_code_size,--this.current_nalu_start),this.offset+=3,!0;--e,++this.offset}return!1},e.prototype.FindNalu=function(){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength)&&!!this.FindStartCode()&&(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,!0)},e.prototype.NextNalu=function(e){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength)&&!!this.FindStartCode()&&(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,!(!e||6==(31&this.view.getUint8(this.nalu_start+this.start_code_size)))||(this.FindStartCode()?(this.offset=this.current_nalu_start,this.nalu_size=this.current_nalu_start-this.nalu_start,!0):(this.nalu_size=this.view.byteLength-this.nalu_start,!0)))},e}();t.H264Parser=r},7139:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSType=void 0,function(e){e.WIN32="WIN32",e.MAC="Mac",e.ANDROID="Android",e.LINUX="Linux",e.IOS="iOS",e.UNKNOWN="WTF"}(t.OSType||(t.OSType={}))},6502:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryHandler=void 0;var r=function(){function e(){this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1}return e.prototype.init=function(e,t,r,o){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof o&&(this.RETRY_MAX_TIME_INTERVAL=o)},e.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0},e.prototype.isRetrying=function(){return null!==this.retryTimer||null!==this.startRetryTimer||null!==this.maxTimer},e}();t.RetryHandler=r},4767:function(e,t,r){"use strict";var o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdpUtil=void 0;var n=r(6706),i=r(6706),s=function(){function e(){}return e.zegoSdp=function(e){var t=e.split("\r\n"),r=[],n=[];t.forEach((function(e){var t=e.match(/a=rtpmap:(\d+)\s+((H264\/90000)|(opus\/48000\/2))/);t&&t[1]&&t[2]&&("H264/90000"===t[2]&&r.push(t[1]),"opus/48000/2"===t[2]&&n.push(t[1]))}));var i=[];return t.map((function(e){var t=!0,s=e.match(/((a=rtcp-fb:)|(a=rtpmap:)|(a=fmtp:))(\d+)/);if(s&&s[5]&&(o(o([],r,!0),n,!0).some((function(e){return e==s[5]}))||(t=!1)),e.indexOf("m=video")>-1){var a=e.split(" ");e=o([a[0],a[1],a[2]],r,!0).join(" ")}else e.indexOf("m=audio")>-1&&(a=e.split(" "),e=o([a[0],a[1],a[2]],n,!0).join(" "));t&&i.push(e)})),i.join("\r\n")},e.getSDPByVideDecodeType=function(e,t,r,s){var a={str:"",arr:[],obj:{H264:[],H265:[],VP8:[],VP9:[],OTHER:[]}};if(!e.includes("m=video"))return e;var c=/m=video.+/.exec(e)[0];c=c.match(/[\s|\d]+/g)[1].replace(" ",""),a.str=c,a.arr=a.str.split(" "),a.arr.forEach((function(t){var r=new RegExp("a=rtpmap:"+t+".+").exec(e)[0];r.includes("H264")?a.obj.H264.push(t):r.includes("H265")?a.obj.H265.push(t):r.includes("VP8")?a.obj.VP8.push(t):r.includes("VP9")?a.obj.VP9.push(t):a.obj.OTHER.push(t)})),a.obj.OTHER.forEach((function(t){var r=new RegExp("a=fmtp:"+t+".+apt=(\\d+)").exec(e),o=r&&r[1];o&&(a.obj.H264.includes(o)?a.obj.H264.push(t):a.obj.H265.includes(o)?a.obj.H265.push(t):a.obj.VP8.includes(o)?a.obj.VP8.push(t):a.obj.VP9.includes(o)&&a.obj.VP9.push(t))}));var u=[];if("VP9"===t?u=o(o(o([],a.obj.H265,!0),a.obj.H264,!0),a.obj.VP8,!0):"VP8"===t?u=o(o(o([],a.obj.H265,!0),a.obj.H264,!0),a.obj.VP9,!0):"H264"===t?u=o(o(o([],a.obj.H265,!0),a.obj.VP8,!0),a.obj.VP9,!0):"H265"===t&&(u=o(o(o([],a.obj.VP8,!0),a.obj.H264,!0),a.obj.VP9,!0)),"H264"==t&&"boolean"==typeof r){var l=function(e){return function(t){return e?!t.includes("profile-level-id=42e01f"):!!t.includes("profile-level-id=42e01f")}},d=function(e){return function(t){switch(e){case i.H264ProfileType.BASE_LINE:return!t.includes("profile-level-id=42");case i.H264ProfileType.MAIN:return!t.includes("profile-level-id=4d");case i.H264ProfileType.HIGH:return!t.includes("profile-level-id=64");default:return!1}}},h=function(t){return function(){var r=[];return a.obj.H264.forEach((function(o){for(var n=new RegExp("a=fmtp:"+o+".+\\s\\n","g").exec(e)||[],i=0,s=t;i<s.length;i++)0!==n.filter(s[i]).length&&r.push(o);var a=new RegExp("a=fmtp:"+o+".+apt=(\\d+)").exec(e),c=a&&a[1];c&&r.includes(c)&&r.push(o)})),r}};u=u.concat(function(){for(var e=[],t=0,o=void 0!==s&&s===n.EncodecSelectionModeType.HARD_SOFT_ENCODEC_FIRST?[h([l(r),d(i.H264ProfileType.BASE_LINE)]),h([l(r)]),h([l(!r),d(i.H264ProfileType.BASE_LINE)]),h([l(!r)])]:[h([d(i.H264ProfileType.BASE_LINE),l(r)]),h([d(i.H264ProfileType.BASE_LINE),l(!r)]),h([l(r)]),h([l(!r)])];t<o.length&&(e=(0,o[t])(),new Set(e).size===a.obj.H264.length);t++)e=[];return e}())}return u.forEach((function(t){var r=a.arr.indexOf(t);a.arr.splice(r,1);var o=new RegExp("a=rtpmap:"+t+".+\\s\\n","g"),n=new RegExp("a=rtcp-fb:"+t+".+\\s\\n","g"),i=new RegExp("a=fmtp:"+t+".+\\s\\n","g");e=(e=(e=e.replace(o,"")).replace(n,"")).replace(i,"")})),e=e.replace(c,a.arr.join(" "))},e}();t.SdpUtil=s},1358:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCUtil=void 0;var i=r(3529),s=r(4395),a=r(608),c=function(){function e(){}return e.supportDetection=function(e,t,r,i){return o(this,void 0,void 0,(function(){var o,s,a,c,u,l,d,h;return n(this,(function(n){switch(n.label){case 0:return o={webRTC:!1,customCapture:!1,camera:!1,microphone:!1,videoCodec:{H264:!1,H265:!1,VP8:!1,VP9:!1},screenSharing:e,errInfo:{}},i&&"screenSharing"===i?(t({result:e,errInfo:o.errInfo}),[2]):i&&"customCapture"!==i||(((s=document.createElement("video")).captureStream||s.mozCaptureStream)&&(o.customCapture=!0),"customCapture"!==i)?(a=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,c="https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"),i&&"camera"!==i&&"microphone"!==i?[3,9]:a?c?(o.camera=!1,console.error("webrtc requires https or localhost"),[3,9]):[3,1]:[3,9]):(t({result:o.customCapture,errInfo:o.errInfo}),[2]);case 1:if(i&&"camera"!==i)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia({video:!0})];case 3:return(u=n.sent())&&(o.camera=!0)&&u.getTracks().forEach((function(e){return e.stop()})),[3,5];case 4:return l=n.sent(),o.errInfo.camera={name:l.name,message:l.message},console.error("camera devices detect error: ",l.name,l.message),[3,5];case 5:if(i&&"microphone"!==i)return[3,9];n.label=6;case 6:return n.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 7:return(d=n.sent())&&(o.microphone=!0)&&d.getTracks().forEach((function(e){return e.stop()})),[3,9];case 8:return h=n.sent(),o.errInfo.microphone={name:h.name,message:h.message},console.error("microphone devices detect error: ",h.name,h.message),[3,9];case 9:return"camera"===i||"microphone"===i?(t({result:o[i],errInfo:o.errInfo}),[2]):(this.supportVideoCodeType((function(e,r){i||(o.videoCodec.H264=e.H264,o.videoCodec.H265=e.H265,o.videoCodec.VP8=e.VP8,o.videoCodec.VP9=e.VP9,o.webRTC=e.webRTC),r&&("string"==typeof r?o.errInfo.extendedDate=r:o.errInfo.webRTC={name:r.name,message:r.message},console.error("videoCodec detect error: "+r)),t&&t(i?{result:e[i],errInfo:o.errInfo}:o)}),r,i),[2])}}))}))},e.supportVideoCodeType=function(e,t,r){return o(this,void 0,void 0,(function(){var o,i,a,c,u,l,d,h,p,f;return n(this,(function(n){switch(n.label){case 0:return o={webRTC:!1,H264:!1,VP8:!1,VP9:!1,H265:!1},r?1!==t||"VP8"!==r&&"H264"!==r?[3,2]:[4,(f=new s.CheckModule).checkSupportByType(r)]:[3,2];case 1:return"boolean"==typeof(i=n.sent())?(o[r]=i,[2,e(o)]):(o[r]=!1,[2,e(o,i)]);case 2:if("webRTC"!==r&&1!==t)return[3,7];n.label=3;case 3:return n.trys.push([3,5,,6]),[4,(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 4:return n.sent(),o.webRTC=!0,[3,6];case 5:return a=n.sent(),e&&e(o,a),[3,6];case 6:if("webRTC"===r)return[2,e(o)];n.label=7;case 7:if(1===t){for(c="",l=[],d=0,h=u=["VP8","H264"];d<h.length;d++)p=h[d],f=new s.CheckModule,l.push(f.checkSupportByType(p));return Promise.all(l).then((function(t){t.forEach((function(e,t){"boolean"==typeof e?o[u[t]]=!0:(o[u[t]]=!1,c=e)})),c?e(o,c):e(o)})),[2]}try{(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then((function(t){if(o.webRTC=!0,t&&t.sdp){var n=t.sdp.split("\r\n");if(o.H264=n.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H264/")>-1})),"H264"===r)return e(o);if(o.VP8=n.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP8/")>-1})),"VP8"===r)return e(o);o.VP9=n.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP9/")>-1})),o.H265=n.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H265/")>-1})),e&&e(o)}}))}catch(t){e&&e(o,t)}return[2]}}))}))},e.checkScreenParams=function(e,t){if("object"==typeof e&&void 0!==e.videoQuality&&!a.ClientUtil.checkInteger(e.videoQuality))return t(i.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1;if("object"==typeof e&&void 0!==e.sourceID&&"string"!=typeof e.sourceID)return t(i.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1;if("object"==typeof e&&4===e.videoQuality){if(!a.ClientUtil.checkCameraOrScreenBitRate(e.bitRate,t))return!1;if(!a.ClientUtil.checkParamsWithConstraintExtend(e,t))return!1}return!0},e.checkCameraParams=function(e,t){return!!a.ClientUtil.checkParamsWithConstraintExtend(e,t)&&!!a.ClientUtil.checkCameraOrScreenBitRate(e.bitRate,t)},e.base64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(t),o=new Uint8Array(r.length),n=0;n<r.length;++n)o[n]=r.charCodeAt(n);return o},e.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},e.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},e}();t.WebRTCUtil=c},5321:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWebRTC=void 0;var c=r(6706),u=r(608),l=r(1358),d=r(7325),h=r(1089),p=r(3529),f=r(908),_=r(3409),g=r(7560),m=r(1547),v=i(r(5515)),y=r(3770),b=r(4865),S=r(361),E=r(5019),T=r(5028),w=r(9595),C=r(9595),I=r(2752),O=r(6361),k=function(){function e(e,t,r,o,n,i){void 0===n&&(n=0),void 0===i&&(i=c.ZegoScenario.Default);var s=this;this.mediaEleSources=[],this.logger=e,this.dataReport=t,this.ac=new("undefined"!=typeof webkitAudioContext?webkitAudioContext:AudioContext),this.ac.addEventListener("statechange",(function(){"suspended"===s.ac.state&&s.ac.resume()})),this.checkAudioContext(),this.stateCenter=new d.StateCenter(this.logger,this.dataReport),this.stateCenter.clientType="webrtc",this.stateCenter.settingConfig=new C.ZegoSettingConfig,this.RTM=o,this.streamCenter=new _.ZegoStreamCenterWeb(this.logger,this.stateCenter,this.dataReport,this.RTM,this.ac,this.mediaEleSources),this.rtcModules=new f.RTCModules(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.RTM,this.ac,this),this.stateCenter.browser=v.browserDetails.browser,this.RTM.cloudSetting.setEnvVariable("sdk_version",c.PROTO_VERSION),this.initTracer(r),this.RTM.cloudSetting.getSettingCache(w.RTC).then((function(e){s.logger.info(h.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e));var t=s.stateCenter.reporter.createSpan(c.TRACER_LEVEL.H,{key:p.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},p.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.event);t.setAttributes({files:p.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.files([{name:w.RTC,content:JSON.stringify(null==e?void 0:e.setting),versions:JSON.stringify(null==e?void 0:e.versions),code:0,message:""}])}),t.end(),s.stateCenter.settingConfig.setSetting(null==e?void 0:e.setting)})).catch((function(e){s.logger.warn(h.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e))})),this.stateCenter.rtm=this.RTM,this.stateCenter.streamCenter=this.streamCenter,this.stateCenter.chargeInfosSaver.checkAndReport(),[3,4,5,6,7,8].includes(i)?(this.stateCenter.scenario=i,[4,5,8].includes(i)?this.enableVideoHardwareEncoder(!0):this.enableVideoHardwareEncoder(!1),this.logger.info(h.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO+" "+i+"  success")):(this.stateCenter.scenario=c.ZegoScenario.Default,this.logger.error(h.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO+" "+i+"  please use valid scenario"))}return e.prototype.checkAudioContext=function(){var e=this;if(this.ac&&"suspended"===this.ac.state){var t=function t(){"running"!==e.ac.state?e.ac.resume():(window.removeEventListener("click",t),window.removeEventListener("touchstart",t))};window.addEventListener("click",t),window.addEventListener("touchstart",t)}},e.prototype.mutePublishStreamVideo=function(e,t,r){return!1},e.prototype.mutePublishStreamAudio=function(e,t){return!1},e.prototype.mutePlayStreamVideo=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.mutePlayStreamAudio=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.muteMicrophone=function(e){return!1},e.prototype.isMicrophoneMuted=function(){return!this.streamCenter.isMicEnabled},e.prototype.setAudioOutput=function(e,t){return this.logger.info(h.ZEGO_WEBRTC_ACTION.SET_AUDIO_OUTPUT+" call"),"string"!=typeof t?(this.logger.error("audiooutput is not string"),!1):this.rtcModules.playModule.setStreamAudioOutput(e,t)},e.prototype.setCustomSignalUrl=function(e){if(this.logger.info(h.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" call: "+e),e&&0!=e.length){var t=!0;e.forEach((function(e){return 0!=e.indexOf("wss://")&&(t=!1)})),t?this.stateCenter.customUrl=e:this.logger.error(h.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" url is not correct")}else this.logger.error(h.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" param error")},e.prototype.setGWNode=function(e){"string"==typeof e&&e.length>0&&(this.streamCenter.gwNode=e)},e.prototype.setQualityMonitorCycle=function(e){return"number"==typeof e&&e>=1e3?(this.streamCenter.setQualityMonitorCycle(e),!0):(this.logger.error("zc.sqmc.0 time must be number and bigger than 1000"),!1)},e.prototype.startPlayingStream=function(e,t,r){return this.logger.info(h.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.startPlayingStream(e,t,r)},e.prototype.stopPlayingStream=function(e){this.logger.info(h.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.stopPlayingStream(e)},e.prototype.setPlayAccelerate=function(e){this.stateCenter.playAccelerate=e},e.prototype.setTurnOverTcpOnly=function(e){this.logger.info(h.ZEGO_WEBRTC_ACTION.SET_TURN_OVER_TCP_ONLY+" call "+e),"boolean"==typeof e?this.stateCenter.turnOverTcpOnly=e:this.logger.error("zc.p.stoto.0 param must be param")},e.prototype.createStream=function(e){return this.rtcModules.publishModule.createStream(e)},e.prototype.setRoomScenario=function(e){return[3,4,5,6,7,8].includes(e)?(this.logger.info(h.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+e+" called"),this.stateCenter.roomList.length?(this.logger.error(h.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+JSON.stringify(I.errorCodeList.SET_ROOM_SCENARIO)),!1):([c.ZegoScenario.StandardVideoCall,c.ZegoScenario.HighVideoCall,c.ZegoScenario.Broadcast].includes(e)?this.enableVideoHardwareEncoder(!0):this.enableVideoHardwareEncoder(!1),this.stateCenter.scenario=e,this.logger.info(h.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+e+" called success"),!0)):(this.logger.error(h.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+e+" please use valid scenario"),!1)},e.prototype.destroyStream=function(e){this.rtcModules.publishModule.destroyStream(e)},e.prototype.startPublishingStream=function(e,t,r,o){return this.logger.info(h.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.startPublishingStream(e,t,r,o)},e.prototype.activateSEIInsert=function(e){return console.error("should install advanced module"),!1},e.prototype.setSEIConfig=function(e){this.stateCenter.seiConfig=e},e.prototype.sendSEI=function(e,t){return this.rtcModules.publishModule.sendSEI(e,t)},e.prototype.stopPublishingStream=function(e){return this.logger.info(h.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.stopPublishingStream(e,void 0,!0)},e.prototype.setVideoConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setVideoConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.setAudioConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setAudioConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.replaceTrack=function(e,t,r){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.replaceTrack(e,t,r):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.preloadEffect=function(e,t,r){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.preloadEffect(e,t,r):console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757")},e.prototype.getEffectDuration=function(e){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getEffectDuration(e):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),0)},e.prototype.getEffectCurrentProgress=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getEffectProgress(e,t):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),0)},e.prototype.seekAudioEffect=function(e,t,r){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.seekAudioEffect(e,t,r):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.playEffect=function(e,t,r){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.playEffect(e,t,r):console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757")},e.prototype.pauseEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.pauseEffect(e,t):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.resumeEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.resumeEffect(e,t):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.stopEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopEffect(e,t):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.unloadEffect=function(e){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.unloadEffect(e):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.setEffectVolume=function(e,t,r){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setEffectVolume(e,t,r):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.startMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.startMixingAudio(e,t):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.stopMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingAudio(e,t):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.mixingBuffer=function(e,t,r,o){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.mixingBuffer(e,t,r,o):console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757")},e.prototype.stopMixingBuffer=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingBuffer(e,t):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.setMixingAudioVolume=function(e,t,r){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setMixingAudioVolume(e,t,r):(console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757"),!1)},e.prototype.checkSystemRequirements=function(t,r){var o=this,n=navigator&&navigator.mediaDevices&&(e.screenShotReady||"getDisplayMedia"in navigator.mediaDevices);return this.logger.info(h.ZEGO_WEBRTC_ACTION.CHECK_SUPPORT+" call"+navigator.userAgent),new Promise((function(e){var i=o.stateCenter.reporter.createSpan(c.TRACER_LEVEL.H,{key:p.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},p.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.event),s=r||"all",a=function(t){i.setAttributes({capability:p.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.capability(t)}),i.end();var r=o.stateCenter.checkList.indexOf(s);o.stateCenter.checkList.splice(r,1),e(t)};return["webRTC","customCapture","camera","microphone","screenSharing","H264","VP8","all"].includes(s)&&[0,1].includes(t)?o.stateCenter.checkList.includes(s)||o.stateCenter.checkList.includes("all")?a({result:!1,errInfo:{extendedDate:"The last test of the same type has not returned a result "}}):(o.stateCenter.checkList.push(s),void l.WebRTCUtil.supportDetection(n,a,t,r)):a({result:!1,errInfo:{extendedDate:"param error"}})}))},e.prototype.enumDevices=function(e,t){return s(this,void 0,void 0,(function(){var r,o,n,i,s,u,l,d,h,f,_,g,m,v=this;return a(this,(function(a){switch(a.label){case 0:return this.logger.info("zc.ed.0 call"),r=function(){return new Promise((function(e,r){var o=v.stateCenter.reporter.createSpan(c.TRACER_LEVEL.H,{key:p.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},p.ZegoRTCLogEvent.kZegoTaskEnumDevices.event);v.rtcModules.publishModule.recordDevices((function(r){var n=[],i=!0,s=!0;r.cameras.forEach((function(e){""===e.deviceID&&(i=!1),n.push({device:e.deviceID,device_name:e.deviceName,type:0})})),r.microphones.forEach((function(e){""===e.deviceID&&(s=!1),n.push({device:e.deviceID,device_name:e.deviceName,type:1})})),r.speakers.forEach((function(e){return n.push({device:e.deviceID,device_name:e.deviceName,type:2})})),o.setAttributes({dev_list:p.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_list(n),dev_kind:p.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_kind(t||"all")}),o.end(),e({devices:r,enableCamera:i,enableMic:s})}),(function(e){v.stateCenter.reporter.setError(o,e),r(e)}))}))},[4,r()];case 1:return o=a.sent(),n=o.enableCamera,i=o.enableMic,s=o.devices,e?(this.logger.info("zc.ed.0 check permission"),u={video:!0,audio:!0},"videoinput"===t?u.audio=!1:"audioinput"!==t&&"audiooutput"!==t||(u.video=!1),d=u.audio&&!i,(l=u.video&&!n)||d?(this.logger.info("zc.ed.0 need to get device permission. needCamera: ".concat(l,", needMic: ").concat(d)),[4,navigator.mediaDevices.getUserMedia(u).catch((function(){}))]):[3,4]):[3,4];case 2:return(h=a.sent())&&h.getTracks().forEach((function(e){e.stop()})),[4,r()];case 3:f=a.sent(),_=f.devices,g=f.enableCamera,m=f.enableMic,u.video&&!g&&this.logger.warn("zc.ed.0 get video device permission failed."),u.audio&&!m&&this.logger.warn("zc.ed.0 get audio device permission failed."),s=_,a.label=4;case 4:return[2,s]}}))}))},e.prototype.getCameras=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"videoinput")];case 1:return[2,e.sent().cameras]}}))}))},e.prototype.getMicrophones=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audioinput")];case 1:return[2,e.sent().microphones]}}))}))},e.prototype.getSpeakers=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audiooutput")];case 1:return[2,e.sent().speakers]}}))}))},e.prototype.getAudioInfo=function(e,t,r){},e.prototype.getSoundLevel=function(e,t,r){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getSoundLevel(e,t,r):console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757")},e.prototype.stopSoundLevel=function(e){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopSoundLevel(e):console.error("\u672a\u5f15\u5165\u6df7\u97f3\u6a21\u5757")},e.handleDataAvailable=function(t){t.data&&t.data.size>0&&e.recordedBlobs.push(t.data)},e.prototype.startRecord=function(e){},e.prototype.stopRecord=function(){},e.prototype.resumeRecord=function(){},e.prototype.pauseRecord=function(){},e.prototype.saveRecord=function(e){},e.prototype.useVideoDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useVideoDevice(e,t):new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.useAudioDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useAudioDevice(e,t):(console.error("should use advanced module first"),new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})})))},e.prototype.getElectronScreenSources=function(){return this.rtcModules.publishModule.getElectronScreenSources()},e.prototype.setSoundLevelDelegate=function(e,t,r){this.logger.info("zc.ssd.0 call"),"boolean"==typeof e?t&&(!this.stateCenter.checkInteger(t)||t<100||t>3e3)?this.logger.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000"):this.streamCenter.setSoundLevelDelegate(e,t,r):this.logger.error("zc.ssd.0 param 1 must be boolean")},e.prototype.on=function(e,t){return this.rtcModules.bindListener(e,t)},e.prototype.off=function(e,t){return this.rtcModules.deleteListener(e,t)},e.prototype.getVersion=function(){return c.PROTO_VERSION},e.prototype.setStreamExtraInfo=function(e,t){return new Promise((function(e,t){console.error("should use advanced module first"),t()}))},e.prototype.addPublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.streamCommonModule?this.rtcModules.streamCommonModule.publishTarget({type:"addpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.removePublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.streamCommonModule?this.rtcModules.streamCommonModule.publishTarget({type:"delpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.startMixerTask=function(e){return new Promise((function(e,t){console.error("\u672a\u5f15\u5165\u6df7\u6d41\u6a21\u5757"),t()}))},e.prototype.setMixerTaskConfig=function(e){return new Promise((function(e,t){console.error("\u672a\u5f15\u5165\u6df7\u6d41\u6a21\u5757"),t()}))},e.prototype.stopMixerTask=function(e){return new Promise((function(e,t){console.error("\u672a\u5f15\u5165\u6df7\u6d41\u6a21\u5757"),t()}))},e.prototype.setCaptureVolume=function(e,t){return this.rtcModules.publishModule.setCaptureVolume(e,t)},e.use=function(t){switch(t.type){case"AudioMix":t.install(f.RTCModules,m.ZegoPublish);break;case"MixStream":t.install(e,g.StreamHandler,f.RTCModules);break;case"StreamCommon":t.install(e,f.RTCModules,g.StreamHandler);break;case"Advance":t.install(e,f.RTCModules,g.StreamHandler,y.ZegoPreview,b.PlayModule,S.PublishModule,m.ZegoPublish,E.ZegoSignal);break;case"BeautyEffect":t.install(e,y.ZegoPreview);break;case"RangeAudio":case"DataChannel":case"AiDenoise":t.install(e)}},e.prototype.createRangeAudioInstance=function(){throw new Error("should use range audio module")},e.prototype.createRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.destroyRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.enableDataChannel=function(e){"boolean"==typeof e&&(this.streamCenter.isDataChannelEnabled=e)},e.prototype.addTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.removeTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.setBeautyEffect=function(e,t,r){return new Promise((function(e,t){console.error("should install video effect module and advanced module"),e({errorCode:-1,extendedData:"should install video effect module and advanced module"})}))},e.prototype.setLowlightEnhance=function(e,t){return new Promise((function(e,t){console.error("should install video effect module and advanced module"),e({errorCode:-1,extendedData:"should install video effect module and advanced module"})}))},e.prototype.getPublishingStreamQuality=function(e){return this.rtcModules.publishModule.getStreamStats(e)},e.prototype.getPlayingStreamQuality=function(e){return this.rtcModules.playModule.getStreamStats(e)},e.prototype.checkAudioTrackIsActive=function(e){return MediaStreamTrack instanceof e&&"video"===e.kind?u.ClientUtil.checkAudioTrackIsActive(e):(this.logger.error("zc.caia.0 track type error"),!1)},e.prototype.checkVideoTrackIsActive=function(e){return MediaStreamTrack instanceof e&&"audio"===e.kind?u.ClientUtil.checkVideoTrackIsActive(e):(this.logger.error("zc.cvia.0 track type error"),!1)},e.prototype.setDummyCaptureImagePath=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setDummyCaptureImagePath(e,t):new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.setAccess=function(e){this.RTM.setAccess(e),this.stateCenter.useNetAgent=this.RTM.getSettingUnify(!0),this.RTM.setAccess(this.stateCenter.useNetAgent),this.stateCenter.useNetAgent=this.RTM.getUseNetAgent()},e.prototype.setAudioOutputDevice=function(e,t){return s(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return(r=null==e?void 0:e.setSinkId)?(e.setsinkid&&(e.setsinkid.enabled=!0),[4,r.call(e,t)]):[3,2];case 1:return o.sent(),[2,!0];case 2:throw Error("Browser not support set audio output.")}}))}))},e.prototype.enableCameraCapturing=function(e,t){return void 0===t&&(t=!0),s(this,void 0,void 0,(function(){return a(this,(function(e){return console.error("should use advanced module first"),[2,!1]}))}))},e.prototype.enableDualStream=function(e){this.rtcModules.advancedModule?this.rtcModules.advancedModule.enableDualStream(e):console.error("use advance module first")},e.prototype.setLowStreamParameter=function(e,t){this.rtcModules.advancedModule?this.rtcModules.advancedModule.setLowStreamParameter(e,t):console.error("use advance module first")},e.prototype.setRemoteDefaultVideoStreamType=function(e){this.logger.info("zc.srdvs call"),[0,1,2].includes(e)?this.stateCenter.streamType=e:this.logger.error("zc.srdvs streamType must be number 0 or 1 or 2")},e.prototype.enableVideoHardwareEncoder=function(e){if("boolean"==typeof e){var t=this.stateCenter.settingConfig;t.setUserValue("hardware_encode",e),t.setUserValue("camera_hard_encode",e),t.setUserValue("custom_hard_encode",e)}},e.prototype.createLocalViewer=function(e){var t=this.streamCenter.checkPreview(e),r=null==t?void 0:t.getViewer();if(!r)throw Error("create viewer failed.");return new T.ZegoStreamView(r)},e.prototype.createRemoteViewer=function(e){var t=this.streamCenter.checkPlayer(e),r=null==t?void 0:t.getViewer();if(!r)throw Error("create viewer failed.");return new T.ZegoStreamView(r)},e.prototype.enableAiDenoise=function(e,t){return new Promise((function(e,t){console.error("should install ai denoise module and advanced module"),t({errorCode:I.errorCodeList.MODULE_NOT_IMPORTED.code,extendedData:"should install ai denoise module and advanced module"})}))},e.prototype.enableAutoSwitchDevice=function(e){if(this.rtcModules.advancedModule)return this.rtcModules.advancedModule.enableAutoSwitchDevice(e);throw new Error("should use advanced module first")},e.prototype.initTracer=function(e){this.stateCenter.reporter=e;var t=new O.CommonStates(this.RTM.stateCenter,this.stateCenter,this.streamCenter),r=this.getReporterVersion(c.PROTO_VERSION);this.stateCenter.reportVersion=r,this.stateCenter.reporter.setCommonStates(t),this.stateCenter.reporter.setResource({sdk_version:c.PROTO_VERSION,report_version:r})},e.prototype.getReporterVersion=function(e){var t=e.split(".").map((function(e){return parseInt(e)}));return t[0]<<20|t[1]<<8|t[2]},e.prototype.setEngineConfig=function(e){if(this.rtcModules.advancedModule)return this.rtcModules.advancedModule.setEngineConfig(e);throw new Error("should use advanced module first")},e.screenShotReady=!1,e}();t.ZegoWebRTC=k,window.addEventListener("message",(function(e){var t=e.data.type,r=e.origin;r!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",r),"SS_PING"===t&&(k.screenShotReady=!0)}))},746:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalogSocket=void 0;var o,n,i=r(6706),s=r(1089),a=r(3529);!function(e){e[e.Connected=0]="Connected",e[e.Disconnected=1]="Disconnected",e[e.Broken=2]="Broken"}(o||(o={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(n||(n={}));var c=function(){function e(e,t,r,n,s){var a=this;this.server=e,this.netAgent=t,this.signalConfig=r,this.logger=n,this.stateCenter=s,this.readyState=WebSocket.CLOSED,this.isActive=!1,this.accessServerState=o.Disconnected,this.originAccessServerState=o.Disconnected,this.mediaServerState=o.Disconnected,this.originMediaServerState=o.Disconnected,this.eventHandler={accessDisconnect:function(){a.setAccessServerState(o.Disconnected)},accessConnect:function(){a.setAccessServerState(o.Connected)},accessBroken:function(){a.setAccessServerState(o.Broken)},mediaDisconnect:function(){a.setMediaServerState(o.Disconnected)},mediaConnect:function(e){a.setMediaServerState(o.Connected,e)},mediaBroken:function(){a.setMediaServerState(o.Broken)}},this.wsHandler=t.getPCRequest("unified_rtc"===e?i.BusinessService.SERVICE_WEBRTC_SIGNAL:i.BusinessService.SERVICE_L3_WEBRTC_SIGNAL,{path:r.path,query:r.query}),this.setAccessServerState(t.isConnect()?o.Connected:o.Disconnected),this.setMediaServerState(0===this.wsHandler.connectState?o.Connected:o.Disconnected)}return e.prototype.updateAccessReadyState=function(){this.isActive&&this.accessServerState===o.Connected&&this.mediaServerState!==o.Connected?this.onreconnnecting&&this.onreconnnecting():this.accessServerState===o.Disconnected&&this.logger.warn(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE+" access timeout")},e.prototype.updateMediaReadyState=function(e){return this.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE+" "+e),this.mediaServerState===o.Connected?(this.originMediaServerState===o.Broken&&e===n.AUTO&&this.onreconnnecting&&this.onreconnnecting(),void(this.readyState!==WebSocket.OPEN&&(this.readyState=WebSocket.OPEN,this.onopen&&this.onopen()))):this.mediaServerState===o.Disconnected?(this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),void(this.readyState!==WebSocket.CLOSED&&(this.readyState=WebSocket.CLOSED,this.onclose&&this.onclose()))):void(this.mediaServerState===o.Broken&&(this.readyState=WebSocket.CONNECTING,this.onerror&&this.onerror(new Event("signal connecting"))))},e.prototype.setMediaServerState=function(e,t){this.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE+" "+e+" "+t),this.mediaServerState!==e?(this.originMediaServerState=this.mediaServerState,this.mediaServerState=e,this.updateMediaReadyState(t)):this.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE+" same state")},e.prototype.setAccessServerState=function(e){this.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE+" "+e),this.accessServerState!==e?(this.originAccessServerState=this.accessServerState,this.accessServerState=e,this.updateAccessReadyState()):this.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE+" same state")},e.prototype.open=function(){var e=this;this.isActive=!0,this.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_OPEN+" state "+this.mediaServerState),this.mediaServerState===o.Disconnected&&(this.wsHandler.on("connected",this.eventHandler.mediaConnect),this.wsHandler.on("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.on("broken",this.eventHandler.mediaBroken),this.netAgent.on("connected",this.eventHandler.accessConnect),this.netAgent.on("disconnected",this.eventHandler.accessDisconnect),this.netAgent.on("broken",this.eventHandler.accessBroken),this.wsHandler.on("downLoadMessage",(function(t){e.onmessage({data:t})})),this.wsHandler.off("pcBrokenEvent"),this.wsHandler.on("pcBrokenEvent",(function(t){var r=a.ZegoRTCLogEvent.kZegoSDKProxyBroken,o=e.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},r.event);o.setAttributes({service_no:r.service_no(null==t?void 0:t.service_no)}),o.end()})),this.wsHandler.off("pcDisconnectedEvent"),this.wsHandler.on("pcDisconnectedEvent",(function(t){var r=a.ZegoRTCLogEvent.kZegoSDKProxyDisconnect,o=e.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},r.event);o.setAttributes({service_no:r.service_no(null==t?void 0:t.service_no)}),o.end()})),this.wsHandler.off("pcConnectedEvent"),this.wsHandler.on("pcConnectedEvent",(function(t){var r=a.ZegoRTCLogEvent.kZegoSDKProxyConnect,o=e.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},r.event);o.setAttributes({service_no:r.service_no(t.service_no),recv_time:r.recv_time((new Date).getTime()),proxy_link_sources:r.proxy_link_sources(t.proxy_link_sources),connect_stream:r.connect_stream(t.connect_stream)}),o.end()})))},e.prototype.close=function(){this.isActive=!1,this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),this.wsHandler.closeRequest()},e.prototype.send=function(e,t,r){var o=this;this.wsHandler.sendRequest({payload:e,ack:t,isInSendMap:r},(function(e){o.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND+" fail "+e),o.onerror&&o.onerror(e)}),(function(e){o.logger.info(s.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND+" suc "+e)}))},e.prototype.onopen=function(){},e.prototype.onclose=function(e){},e.prototype.onerror=function(e){},e.prototype.onmessage=function(e){},e.prototype.onreconnnecting=function(){},e}();t.AnalogSocket=c},3544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingTimer=void 0;var o=r(4418),n=function(){function e(e,t){this.logger=e,this.stateCenter=t,this.chargeInfosInterval=6e4,this.reporting=!1}return Object.defineProperty(e.prototype,"chargeInfosSaver",{get:function(){return this.stateCenter.chargeInfosSaver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamCenter",{get:function(){return this.stateCenter.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomChargeInfos",{get:function(){return this._roomChargeInfos||(this._roomChargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]}),this._roomChargeInfos.timestamp_begin=(new Date).getTime(),0!==this._roomChargeInfos.timestamp_end?(this._roomChargeInfos.timestamp_diff=this._roomChargeInfos.timestamp_begin-this._roomChargeInfos.timestamp_end,this._roomChargeInfos.timestamp_diff_flag=1):(this._roomChargeInfos.timestamp_diff=0,this._roomChargeInfos.timestamp_diff_flag=0),this._roomChargeInfos.timestamp_end=(new Date).getTime(),this._roomChargeInfos.infos=[{is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[],no_playing:1}],this._roomChargeInfos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chargeInfos",{get:function(){return this.streamCenter?this.streamCenter.getChargeInfos():this.roomChargeInfos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldEnd",{get:function(){var e,t;return!!this.reporting&&(this.shouldReportRoomTime?(null===(e=this.stateCenter.rtm)||void 0===e||e.stateCenter.roomModulesList.filter((function(e){!e.isLogout()&&e.isDisConnect()})),0===(null===(t=this.stateCenter.rtm)||void 0===t?void 0:t.stateCenter.roomModulesList.filter((function(e){return!e.isLogout()||!e.isDisConnect()})).length)):!this.streamCenter||!this.streamCenter.signalList||0===Object.keys(this.streamCenter.signalList).length)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldReportRoomTime",{get:function(){var e,t,r;return!(!(null===(e=this.stateCenter.rtm)||void 0===e?void 0:e.stateCenter.appConfig)||!(null===(t=this.stateCenter.rtm)||void 0===t?void 0:t.stateCenter.appConfig.speedlog_config)||1!==(null===(r=this.stateCenter.rtm)||void 0===r?void 0:r.stateCenter.appConfig.speedlog_config.charge_info_report_no_playing))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReporting",{get:function(){return this.reporting},enumerable:!1,configurable:!0}),e.prototype.startChargeInfoTimer=function(){var e=this;if(this.chargeInfosTimer&&(clearTimeout(Number(this.chargeInfosTimer)),this.chargeInfosTimer=null,this.shouldEnd))return this.logger.info(o.ZEGO_BILLING_ACTION.START_CHARGE_INFO_TIMER+" chargeinfos timer report ended"),void(this.reporting=!1);this.chargeInfosTimer=setTimeout((function(){e.logger.report(e.chargeInfos),e.startChargeInfoTimer()}),this.chargeInfosInterval)},e.prototype.startChargeInfosUpload=function(){this.reporting||(this.reporting=!0,this.shouldReportRoomTime&&this.logger.report(this.chargeInfos),this.startChargeInfoTimer(),this.logger.info("zsc.sciu.0 call"))},e.prototype.stopChargeInfosUpload=function(){this.logger.info("zsc.sciu.1 call"),this.chargeInfosTimer&&this.shouldEnd&&(this.logger.info("zsc.sciu.1 stop"),clearTimeout(Number(this.chargeInfosTimer)),this.chargeInfosTimer=null,this.shouldReportRoomTime&&this.logger.report(this.chargeInfos),this.reporting=!1,this.logger.info("zsc.sciu.1 chargeinfos timer report ended"))},e.prototype.samplingChargeInfos=function(){return this.chargeInfos},e}();t.BillingTimer=n},1378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChargeInfosSaverWeb=void 0;var o=r(4418),n=function(){function e(e,t){this.logger=e,this.stateCenter=t,this.bindListener()}return Object.defineProperty(e.prototype,"billingTimer",{get:function(){return this.stateCenter.billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"KEY",{get:function(){var e;return"z_cginfos_cache_".concat(null===(e=this.stateCenter.rtm)||void 0===e?void 0:e.stateCenter.appid)},enumerable:!1,configurable:!0}),e.prototype.bindListener=function(){var e=this;window.addEventListener("beforeunload",(function(){if(e.billingTimer.isReporting){var t=e.billingTimer.samplingChargeInfos();e.saveChargeInfosByLocalStorage(t)}}))},e.prototype.saveChargeInfosByLocalStorage=function(e){return this.logger.info(o.ZEGO_BILLING_ACTION.CHARGEINFO_SAVING_LOCALSTORAGE+" call"),localStorage.setItem(this.KEY,JSON.stringify(e))},e.prototype.getAndRemoveChargeInfosFromLocalStorage=function(){this.logger.info(o.ZEGO_BILLING_ACTION.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE+" call");var e=localStorage.getItem(this.KEY);return localStorage.removeItem(this.KEY),e},e.prototype.report=function(e){this.logger.report(e)},e.prototype.checkAndReport=function(){this.logger.info(o.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT+" call");var e=this.getAndRemoveChargeInfosFromLocalStorage();if(null!=e){var t=JSON.parse(e);this.report(t),this.logger.info(o.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT+" reported")}},e}();t.ChargeInfosSaverWeb=n},4418:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_BILLING_ACTION=void 0,function(e){e.SAVED_CHARGEINFO_REPORT="zc.bill.scir",e.CHARGEINFO_SAVING_LOCALSTORAGE="zc.bill.cisl",e.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE="zc.bill.cigrl",e.START_CHARGE_INFO_TIMER="zc.bill.tm.scit"}(t.ZEGO_BILLING_ACTION||(t.ZEGO_BILLING_ACTION={}))},4395:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckModule=void 0;var i=r(4767),s=function(){function e(){var e=this;this.iceconnectionstatechangeTimes=0,this.isCheckAll=!1;var t=document.createElement("canvas");t.getContext("2d").fillStyle="rgba(255, 255, 255, 0)";try{this.localStream=t.captureStream()}catch(e){console.error("canvas captureStream error",e)}this.timer=setTimeout((function(){e.resolve("Detection timeout"),e.hangup()}),5e3)}return e.prototype.checkSupportByType=function(e){return o(this,void 0,void 0,(function(){var t,r,o=this;return n(this,(function(n){switch(n.label){case 0:return this.checkType=e,t={},this.localPc=new RTCPeerConnection(t),this.remotePc=new RTCPeerConnection(t),r=new Promise((function(e){return o.resolve=e})),this.localPc.addEventListener("icecandidate",(function(e){return o.onIceCandidate(o.localPc,e)})),this.remotePc.addEventListener("icecandidate",(function(e){return o.onIceCandidate(o.remotePc,e)})),this.remotePc.addEventListener("iceconnectionstatechange",(function(t){"connected"===o.remotePc.iceConnectionState&&(o.iceconnectionstatechangeResult=!0),2==++o.iceconnectionstatechangeTimes&&o.iceCandidate&&(clearTimeout(o.timer),o.resolve("connected"===o.remotePc.iceConnectionState||"The browser does not support ".concat(e," format")),o.hangup())})),this.localStream.getTracks().forEach((function(e){return o.localPc.addTrack(e,o.localStream)})),[4,this.check(e)];case 1:return n.sent(),[4,r];case 2:return[2,n.sent()]}}))}))},e.prototype.check=function(e){return o(this,void 0,void 0,(function(){var t,r;return n(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.localPc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return(t=o.sent()).sdp=i.SdpUtil.getSDPByVideDecodeType(t.sdp,e),this.onCreateOfferSuccess(t),[3,3];case 2:return r=o.sent(),this.onCreateSessionDescriptionError(r),[3,3];case 3:return[2]}}))}))},e.prototype.onCreateOfferSuccess=function(e){return o(this,void 0,void 0,(function(){var t,r,o,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.localPc.setLocalDescription(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return n.trys.push([3,5,,6]),[4,this.remotePc.setRemoteDescription(e)];case 4:return n.sent(),[3,6];case 5:return r=n.sent(),this.onSetSessionDescriptionError(r),[2];case 6:return n.trys.push([6,9,,10]),[4,this.remotePc.createAnswer()];case 7:return o=n.sent(),[4,this.onCreateAnswerSuccess(o)];case 8:return n.sent(),[3,10];case 9:return i=n.sent(),this.onCreateSessionDescriptionError(i),[2];case 10:return[2]}}))}))},e.prototype.onCreateAnswerSuccess=function(e){return o(this,void 0,void 0,(function(){var t,r;return n(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.remotePc.setLocalDescription(e)];case 1:return o.sent(),[3,3];case 2:return t=o.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return o.trys.push([3,5,,6]),[4,this.localPc.setRemoteDescription(e)];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),this.onSetSessionDescriptionError(r),[2];case 6:return[2]}}))}))},e.prototype.onIceCandidate=function(e,t){return o(this,void 0,void 0,(function(){var r;return n(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getOtherPc(e).addIceCandidate(t.candidate)];case 1:return o.sent(),[3,3];case 2:return r=o.sent(),console.error(this.checkType,"".concat(this.getPcName(e)," addIceCandidate error"),r),clearTimeout(this.timer),this.hangup(),this.resolve(r),[3,3];case 3:return"remotePc"===this.getPcName(e)&&t.candidate&&(this.iceCandidate=!0),this.iceconnectionstatechangeResult&&"localPc"===this.getPcName(e)&&(clearTimeout(this.timer),this.hangup(),this.resolve(!0)),[2]}}))}))},e.prototype.getOtherPc=function(e){return e===this.localPc?this.remotePc:this.localPc},e.prototype.getPcName=function(e){return e===this.localPc?"localPc":"remotePc"},e.prototype.onCreateSessionDescriptionError=function(e){console.error("Failed to create session description: ".concat(e.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.onSetSessionDescriptionError=function(e){console.error("Failed to set session description: ".concat(e.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.hangup=function(){this.localPc.close(),this.remotePc.close(),this.iceconnectionstatechangeTimes=0,this.localStream.getTracks().forEach((function(e){return e.stop()}))},e}();t.CheckModule=s},8493:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryDispatchHandler=void 0;var i=r(6502),s=r(6706),a=r(6706),c=r(1089),u=r(3529),l=r(2752),d=u.ZegoRTCLogEvent.kZegoPublishStreamResource,h=u.ZegoRTCLogEvent.kZegoPlayStreamResource,p=function(e){function t(t,r,o,n){var i=e.call(this)||this;return i.retryActiveCount=1,i.RETRY_MAX_TIME=90,i.logger=t,i.stateCenter=r,i.rtm=o,i.streamCenter=n,i}return n(t,e),t.prototype.initStream=function(e,t,r){this.streamID=e,this.playOption=t,this.isPublish=r},t.prototype.active=function(e){var t,r,o,n,i,d,h=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry call "+this.streamID),this.isPublish){var p=null===(r=null===(t=this.streamCenter)||void 0===t?void 0:t.publisherList[this.streamID])||void 0===r?void 0:r.publisher;i=(null==p?void 0:p.isRePublish)?u.ZegoRTCLogEvent.kZegoRePublish:u.ZegoRTCLogEvent.kZegoStartPublish,d=u.ZegoRTCLogEvent.kZegoPublishStreamResource}else{var f=null===(n=null===(o=this.streamCenter)||void 0===o?void 0:o.playerList[this.streamID])||void 0===n?void 0:n.player;i=(null==f?void 0:f.isRePlay)?u.ZegoRTCLogEvent.kZegoRePlay:u.ZegoRTCLogEvent.kZegoStartPlay,d=u.ZegoRTCLogEvent.kZegoPlayStreamResource}var _=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:i.event,par:this.streamID},{key:""},d.event);if(this.retryTimer)return this.logger.info(c.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" has active, ignore"),this.stateCenter.reporter.setError(_,l.errorCodeList.DISPATCH_ERROR,"has active, ignore"),!1;var g=this.rtm.isDisConnect()&&this.stateCenter.networkState==a.ENUM_NETWORK_STATE.offline;if(g){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" check if really offline"),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn(c.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn(c.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry over time, stop retry"),this.stateCenter.reporter.setError(_,l.errorCodeList.DISPATCH_ERROR,"retry over time, stop retry"),!1;if(!this.rtm.isLogin()){this.stopMaxTime(),this.invalid();var m=this.isPublish?this.streamCenter.publisherList[this.streamID]:this.streamCenter.playerList[this.streamID];m&&(m.isReDispatch=!0)}var v=this.retryActiveCount-1;this.retryDispatchSpan||(this.retryDispatchSpan=_,this.stateCenter.reporter.setSpanInMap(_,{key:d.event,par:this.streamID}));var y=this.playOption&&2==this.playOption.resourceMode?1:0,b={stream_id:this.streamID,ptype:this.isPublish?"push":"pull",signals:this.streamCenter.getAllInUseUrl(),header_kvs:[{key:"grpc-metadata-push",value:this.playOption&&this.playOption.cdnUrl||""}],retry:v,center_ability:!0,dispatch_type:y};return this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=setTimeout((function(){h.retryTimer=null,g?h.retryNetCount++:h.retryActiveCount++;var e=h.streamCenter.getRoomByStreamID(h.streamID),t=h.rtm.service.sendMessage("webrtc_url",b,(function(e,t){h.handleFetchWebRtcUrlRsp(e)}),(function(e,t){h.handleFetchWebRtcUrlRsp(e)}),void 0,{sessionID:null==e?void 0:e.sessionID,roomID:null==e?void 0:e.roomID,roomSessionID:null==e?void 0:e.roomSessionID});h.isPublish&&t?h.streamCenter.publisherList[h.streamID]&&(h.streamCenter.publisherList[h.streamID].seq=t):t&&h.streamCenter.playerList[h.streamID]&&(h.streamCenter.playerList[h.streamID].seq=t)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info(c.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" call success"),!0},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.warn("".concat(c.ZEGO_WEBRTC_ACTION.RDH_MAX_TIME," ").concat(e.streamID," dispatch over max time ").concat(e.RETRY_MAX_TIME,"s stop retry")),e.isOverTime=!0,e.invalid();var t=u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError;t.message=t.message+" try max limit",e.isPublish?e.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,t):e.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.error,e.streamID,t)}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.handleFetchWebRtcUrlRsp=function(e){var t,r,o,n,i,s;if(e.code&&[l.errorCodeList.TIMEOUT.code].includes(e.code))this.active();else{if(e.code&&[l.errorCodeList.SOCKET_CLOSE.code].includes(e.code))return this.stopMaxTime(),this.invalid(),void(this.isPublish?this.streamCenter.publisherList[this.streamID].isReDispatch=!0:this.streamCenter.playerList[this.streamID].isReDispatch=!0);var p=e,f=p.body.stream_id,_=!1;if(this.isPublish&&(!this.streamCenter.publisherList[f]||p.header.seq!==this.streamCenter.publisherList[this.streamID].seq))return this.logger.warn(c.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(!(this.isPublish||this.streamCenter.playerList[this.streamID]&&p.header.seq===this.streamCenter.playerList[this.streamID].seq))return this.logger.warn(c.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(this.stateCenter.clientIP=p.body.clientip||"",0===p.body.err_code||2!=p.body.need_action)if(0===p.body.err_code||1===p.body.need_action||[3102].includes(p.body.err_code)){if(this.stopMaxTime(),this.invalid(),p.body.urls&&Array.isArray(p.body.urls)&&p.body.urls.length>0?_=!0:this.logger.error(c.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" signal url is empty"),"push"===p.body.ptype&&this.streamCenter.publisherList[f]){if(!_)return null===(t=this.retryDispatchSpan)||void 0===t||t.setAttributes({try_cnt:d.try_cnt(this.retryActiveCount)}),this.stateCenter.reporter.setError(this.retryDispatchSpan,u.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),this.retryDispatchSpan=null,void this.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.error,f,u.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError);var g=this.streamCenter.publisherList[f];this.stateCenter.publishStreamList[f]?(g.ttl=p.body.hosts_ttl?(new Date).getTime()+1e3*p.body.hosts_ttl:0,g.isCenterNode="boolean"==typeof p.body.is_center_node&&p.body.is_center_node,g.serverUrls=p.body.urls,null===(r=this.retryDispatchSpan)||void 0===r||r.setAttributes({urls:d.urls(g.serverUrls),is_center:d.is_center(g.isCenterNode),try_cnt:d.try_cnt(this.retryActiveCount)}),null===(o=this.retryDispatchSpan)||void 0===o||o.end(),this.retryDispatchSpan=null,this.streamCenter.startPublishingStream(f)):this.logger.error(c.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" no streamid to publish")}else if("pull"==p.body.ptype&&this.streamCenter.playerList[f]){var m;if(!_)return(m=u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=m.message+(p.body.err_code?" server error:"+p.body.err_code:""),3102===p.body.err_code&&(m=u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayUnsupportedResourceMode),null===(n=this.retryDispatchSpan)||void 0===n||n.setAttributes({try_cnt:h.try_cnt(this.retryActiveCount)}),this.stateCenter.reporter.setError(this.retryDispatchSpan,m),void this.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.error,f,m);var v=this.streamCenter.playerList[f];v.ttl=p.body.hosts_ttl?(new Date).getTime()+1e3*p.body.hosts_ttl:0,v.isCenterNode="boolean"==typeof p.body.is_center_node&&p.body.is_center_node,v.serverUrls=p.body.urls,null===(i=this.retryDispatchSpan)||void 0===i||i.setAttributes({urls:h.urls(v.serverUrls),is_center:h.is_center(v.isCenterNode),try_cnt:h.try_cnt(this.retryActiveCount)}),null===(s=this.retryDispatchSpan)||void 0===s||s.end(),this.retryDispatchSpan=null,this.streamCenter.startPlayingStream(f,this.stateCenter.useNetAgent,this.streamCenter.playSuccessCallBackList[f])}}else this.retryActiveInterval=Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((m=u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=m.message+(p.body.err_code?" server error:"+p.body.err_code:""),"push"===p.body.ptype?this.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.retry,f,m):this.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.retry,f,m)),this.active();else this.retryActiveInterval=p.body.action_delay/1e3||Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((m=u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=m.message+(p.body.err_code?" server error:"+p.body.err_code:""),"push"===p.body.ptype?this.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.retry,f,m):this.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.retry,f,m)),this.active()}},t}(i.RetryHandler);t.RetryDispatchHandler=p},6014:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryStreamHandler=void 0;var i=r(6706),s=r(6502),a=r(3529),c=r(1089),u=r(608),l=a.ZegoRTCLogEvent.kZegoTaskSDKPublishStream,d=a.ZegoRTCLogEvent.kZegoTaskSDKPlayStream,h=function(e){function t(t,r,o,n){var i=e.call(this)||this;return i.logger=t,i.stateCenter=r,i.streamCenter=o,i.isPublish=n,i.serverUrls=[],i}return n(t,e),t.prototype.initStream=function(e,t){this.streamID=e,this.serverUrls=t},t.prototype.activePublish=function(e){var t=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;var r=this.stateCenter.networkState==i.ENUM_NETWORK_STATE.offline;if(r){if(this.logger.info("zc.tsh.a check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zc.tsh.a network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var o=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=o>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:o}var n=this.streamCenter.publisherList[this.streamID].publisher,s=this.serverUrls[0],c=["unified_rtc","unified_l3"].includes(s);if(!c){var u=this.serverUrls,l=n.signal?n.signal.server:"";u.forEach((function(e,r){return r<=u.indexOf(l)&&t.serverUrls.push(e)})),u.splice(0,u.indexOf(l)+1),s=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]}var d="number"==typeof e?e:1e3*this.retryActiveInterval;return this.stateCenter.reporter.spanSetAttributes({key:n.parentSpanKey,par:this.streamID},{wait_consume:a.ZegoRTCLogEvent.kZegoStartPublish.wait_consume(d)}),this.retryTimer=setTimeout((function(){t.logger.info("zc.tsh.a stream ".concat(t.streamID," : connect to ").concat(c?"unified signal server":"signal server "+s)),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,r?t.retryNetCount++:t.retryActiveCount++,t.streamCenter.connectPublishServer(t.streamID,s)}),d),this.logger.info("zc.tsh.a call success. delay: "+d),!0},t.prototype.activePull=function(e,t){var r=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),t&&(this.playStreamSuccess=t),this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;var o=this.stateCenter.networkState==i.ENUM_NETWORK_STATE.offline;if(o){if(this.logger.info("zc.tsh.a check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zc.tsh.a network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var n=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n}var s=this.streamCenter.playerList[this.streamID].player,c=this.serverUrls,u=s.signal?s.signal.server:"",l=this.serverUrls[0],d=["unified_rtc","unified_l3"].includes(l);d||(c.forEach((function(e,t){return t<=c.indexOf(u)&&r.serverUrls.push(e)})),c.splice(0,c.indexOf(u)+1),l=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]);var h="number"==typeof e?e:1e3*this.retryActiveInterval;return this.stateCenter.reporter.spanSetAttributes({key:s.parentSpanKey,par:this.streamID},{wait_consume:a.ZegoRTCLogEvent.kZegoStartPlay.wait_consume(h)}),this.retryTimer=setTimeout((function(){r.logger.warn("zc.tsh.a stream ".concat(r.streamID," : connect to ").concat(d?"unified signal server":"signal server "+l)),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,o?r.retryNetCount++:r.retryActiveCount++,r.streamCenter.connectPlayServer(r.streamID,r.playStreamSuccess,l)}),h),this.logger.info("zc.tsh.a call success. delay: "+h),!0},t.prototype.startMaxTime=function(){var e=this;this.logger.info("zc.tsh.smt ".concat(this.streamID," call")),this.maxTimer?this.logger.warn("zc.tsh.smt max timer"):(this.logger.info("zc.tsh.smt start max timer"),this.maxTimer=setTimeout((function(){if(e.logger.warn("zc.tsh.smt ".concat(e.streamID," over max time ").concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.invalid(),e.isPublish){if(!e.streamCenter.publisherList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" publish no found");e.publishStateHandle(i.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishRetryTimeoutError,!0)}else{if(!e.streamCenter.playerList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" play no found");e.playStateHandle(i.ENUM_PLAY_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRetryTimeoutError,!0)}}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.logger.info("zc.tsh.stmt streamID "+this.streamID+" "+!!this.maxTimer),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.retryNextSignal=function(e){var t,r;if(this.stateCenter.networkState==i.ENUM_NETWORK_STATE.offline)return!0;if(this.isPublish){var o=this.streamCenter.publisherList[this.streamID];if(o.publisher.state==i.ENUM_PUBLISH_STATE.stop&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError.code].includes(e.code))return!0;if(o.isCenterNode&&(null===(t=o.publisher.signal)||void 0===t?void 0:t.wsReadyState)==WebSocket.OPEN)return!1;if(!o.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError.code].includes(e.code)){var n=e.message.match(/reason:(\d+)/);return!["26"].includes(n?n[1]:"")}return!0}var s=this.streamCenter.playerList[this.streamID];return!(s.player.state!=i.ENUM_PLAY_STATE.stop||![a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError.code].includes(e.code))||(!s.isCenterNode||(null===(r=s.player.signal)||void 0===r?void 0:r.wsReadyState)!=WebSocket.OPEN)&&(!(!s.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError.code].includes(e.code))||(n=e.message.match(/reason:(\d+)/),!["24","26","28"].includes(n?n[1]:"")))},t.prototype.publishStateHandle=function(e,t,r,o,n,s){var a=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" call "+t+" "+(r?r.code+"":"")+" "+o+" "+JSON.stringify(n)+" "+s);var l=o||this.RETRY_MAX_TIME<3;if(!l&&r&&(u.ClientUtil.isReDispatch(r)||0==this.serverUrls.length))return this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" stop "+l+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPublishStateUpdate(e,t,r);var d=this.streamCenter.publisherList[t],h=d.publisher;if(!l&&r&&0!==r.code){this.maxTimer||l||this.startMaxTime(),this.stateCenter.publishStreamList[t].state=i.ENUM_PUBLISH_STREAM_STATE.retryPublish;var p=h.localStream,f=h.videoInfo,_=h.mediaStreamConfig,g=h.publishOption;if(0!=h.sessionId&&h.signal&&h.shouldSendCloseSession()&&(h.signal.sendCloseSession((0,i.getSeq)(),h.sessionId,1),h.signal.removeSession(h.sessionId),h.closeSessionSignal=!0),h.resetPublish(),!l&&!this.retryNextSignal(r)){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" retry current signal "),this.rePublishSpan(t,r,h),d.isCenterNode){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" current node "+h.gwNode+" failed "+JSON.stringify(h.retryFailGwNodes));var m=h.retryFailGwNodes.findIndex((function(e){return e===h.gwNode}));m>=0&&h.retryFailGwNodes.splice(m,1),h.retryFailGwNodes.push(h.gwNode),this.retryNewGwNode(h,r,n,s)}return this.startRetryTimer=setTimeout((function(){a.startRetryTimer&&clearTimeout(a.startRetryTimer),a.startRetryTimer=null,h.startPublish(t,p,f,_,g)}),1e3),void(r&&0!==r.code&&this.streamCenter.onPublishStateUpdate(2,t,r))}this.streamCenter.removeStreamFromSignal(!0,t)}if(l)return this.stopMaxTime(),this.invalid(),1===e&&h.resetPublish(),(null==r?void 0:r.code)&&this.stateCenter.reporter.spanSetAttributes({key:h.parentSpanKey,par:t},r),void this.streamCenter.onPublishStateUpdate(e,t,r);r&&0!==r.code&&this.activePublish(void 0)&&(h&&(h.isExternal=!1),this.rePublishSpan(t,r,h),this.streamCenter.onPublishStateUpdate(2,t,r)),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" end "+t)},t.prototype.needReDispatchError=function(e){return[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor.code,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetProbePoor.code].includes(e.code)},t.prototype.playStateHandle=function(e,t,r,o,n,s){var a=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" call "+t+" "+(r?r.code+"":"")+" "+o+" "+JSON.stringify(n)+" "+s);var l=o||this.RETRY_MAX_TIME<3;if(!l&&r&&(u.ClientUtil.isReDispatch(r)||0==this.serverUrls.length))return this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" stop "+l+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPlayStateUpdate(e,t,r);var d=this.streamCenter.playerList[t],h=d.player;if(!l&&r&&0!==r.code){!this.maxTimer&&!l&&this.startMaxTime();var p=h.playOption;if(0!=h.sessionId&&h.signal&&h.shouldSendCloseSession()&&(h.signal.sendCloseSession((0,i.getSeq)(),h.sessionId,1),h.signal.removeSession(h.sessionId),h.closeSessionSignal=!0),h.resetPlay(),!l&&!this.retryNextSignal(r)){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" retry current signal "),d.isCenterNode){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" current node "+h.gwNode+" "+JSON.stringify(h.retryFailGwNodes));var f=h.retryFailGwNodes.findIndex((function(e){return e===h.gwNode}));f>=0&&h.retryFailGwNodes.splice(f,1),h.retryFailGwNodes.push(h.gwNode),this.retryNewGwNode(h,r,n,s)}return this.rePlaySpan(t,r,h),this.startRetryTimer=setTimeout((function(){a.startRetryTimer&&clearTimeout(a.startRetryTimer),a.startRetryTimer=null,h.startPlay(t,h.getRemoteStreamSuc,p)}),1e3),void(r&&0!==r.code&&this.streamCenter.onPlayStateUpdate(2,t,r))}this.streamCenter.removeStreamFromSignal(!1,t)}if(l)return this.stopMaxTime(),this.invalid(),(null==r?void 0:r.code)&&this.stateCenter.reporter.spanSetAttributes({key:h.parentSpanKey,par:t},{error:null==r?void 0:r.code}),void this.streamCenter.onPlayStateUpdate(e,t,r);r&&0!==r.code&&this.activePull(void 0)&&(h&&(h.isExternal=!1),(0,i.getReportSeq)(),this.rePlaySpan(t,r,h),this.streamCenter.onPlayStateUpdate(2,t,r)),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" end "+t)},t.prototype.retryNewGwNode=function(e,t,r,o){var n,i,s,a;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE+" call "+e.streamId),t&&t.code&&this.needReDispatchError(t))this.retryNextGwNode(e,!0,o);else if(null==r?void 0:r.action)switch(null==r?void 0:r.action){case 1:case 5:break;case 2:default:this.retryNextGwNode(e,!1,o);break;case 3:var u=null==r?void 0:r.ins;u&&u.length>0&&(e.gwNode=((null===(n=u[0])||void 0===n?void 0:n.IP)||(null===(i=u[0])||void 0===i?void 0:i.ip))+":"+((null===(s=u[0])||void 0===s?void 0:s.Port)||(null===(a=u[0])||void 0===a?void 0:a.port)));break;case 4:e.resetGwNodes(),this.streamCenter.clearCachedGwNodesList(e,this.isPublish)}else this.retryNextGwNode(e,!1,o);this.logger.info(c.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE+" "+e.streamId+" new node "+e.gwNode)},t.prototype.retryNextGwNode=function(e,t,r){var o;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" call "+e.streamId+" "+e.gwNode),0!==(null===(o=e.gwNodeList)||void 0===o?void 0:o.length)||e.gwNode){var n=e.gwNodesTTL<(new Date).getTime(),i=e.iceStateDisConnect&&this.stateCenter.isMultiOuter,s=e.gwNodeList.findIndex((function(t){return t==e.gwNode})),a=s===e.gwNodeList.length-1;this.logger.info(c.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" "+e.streamId+" ttl: "+n+" ice: "+i+" last: "+a),t||n||e.isLastConnected&&i||a?e.resetGwNodes():e.gwNode=r?e.gwNodeList[0]:e.gwNodeList[++s%e.gwNodeList.length]}else this.logger.info(c.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" call "+e.streamId+" gwNodeList is empty")},t.prototype.rePublishSpan=function(e,t,r){null==r||r.uploadRTCPublishStats(),this.stateCenter.reporter.spanEnd({key:a.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:e},{error:null==t?void 0:t.code,message:null==t?void 0:t.message}),this.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:e},{key:a.ZegoRTCLogEvent.kZegoRePublish.event,par:e},a.ZegoRTCLogEvent.kZegoRePublish.event,!0),!1===(null==r?void 0:r.isRePublish)&&this.stateCenter.reporter.spanSetAttributes({key:l.event,par:e},{retry_btime:l.retry_btime((new Date).getTime())}),r&&(r.isRePublish=!0,r.parentSpanKey=a.ZegoRTCLogEvent.kZegoRePublish.event)},t.prototype.rePlaySpan=function(e,t,r){null==r||r.uploadRTCPlayStats(),this.stateCenter.reporter.spanEnd({key:a.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:e},{error:null==t?void 0:t.code,message:null==t?void 0:t.message}),this.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:a.ZegoRTCLogEvent.kZegoRePlay.event,par:e},a.ZegoRTCLogEvent.kZegoRePlay.event,!0),!1===(null==r?void 0:r.isRePlay)&&this.stateCenter.reporter.spanSetAttributes({key:d.event,par:e},{retry_btime:d.retry_btime((new Date).getTime())}),r&&(r.isRePlay=!0,r.parentSpanKey=a.ZegoRTCLogEvent.kZegoRePlay.event)},t}(s.RetryHandler);t.RetryStreamHandler=h},1691:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GatewaySignal=void 0;var i=r(6348),s=r(608),a=r(1358),c=function(){function e(e){this.streamSignal=e,this.callbackMap={}}return e.prototype.mediaStreamSEIUUIDReq=function(e,t,r,c){return o(this,void 0,void 0,(function(){var o=this;return n(this,(function(n){return[2,new Promise((function(n,u){var l=i.webrtc_cmd.WebrtcCmdReqMsg.encode({usr_sei_filter:{sei_filter:c}}).finish(),d=s.ClientUtil.uint8arrayToBase64(l);o.streamSignal.sendGWCmd(e,t,{peer_id:r,cmd_id:5,body:d},(function(e,t,r){var o=a.WebRTCUtil.base64ToUint8Array(r.body),s=i.webrtc_cmd.WebrtcCmdRspMsg.decode(o);n(s)}),(function(e){u(e)}))}))]}))}))},e.prototype.metadataAck=function(e,t,r){return o(this,void 0,void 0,(function(){var o,a;return n(this,(function(n){return o=i.webrtc_cmd.WebrtcCmdRspMsg.encode({meta_data_ack:{result:1}}).finish(),a=s.ClientUtil.uint8arrayToBase64(o),this.streamSignal.sendGWAck(e,t,{peer_id:r,cmd_id:1,body:a}),[2]}))}))},e.prototype.registerPushCallback=function(e,t,r){var o,n=this,s=this.callbackMap[t];s?s[e]=r:(this.callbackMap[t]=((o={})[e]=r,o),this.streamSignal.registerPushCallback("CmdPush",t,(function(e,t,r){var o=a.WebRTCUtil.base64ToUint8Array(r.body),s=i.webrtc_cmd.WebrtcCmdReqMsg.decode(o),c=Object.keys(s)[0];console.error("CmdPush",c,s),c=c||"meta_data_push";var u=n.callbackMap[t];if(u){var l=u[c];l&&l(e,t,r.body)}})))},e.prototype.unregisterPushCallback=function(e,t){var r=this.callbackMap[t];r&&(delete r[e],0===Object.keys(r).length&&(this.streamSignal.unregisterPushCallback("CmdPush",t),delete this.callbackMap[t]))},e}();t.GatewaySignal=c},6454:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translate=void 0;var o=r(2608);t.translate=function(e,t,r){if(0===e)return"";var n=1,i="  Here are some explanations about the error code: ".concat(n++,". reason=").concat(e,": ").concat(function(e){switch(e){case o.CloseReason.PEER_CLOSE_REASON_NORMAL:return"Client voluntarily exits.";case o.CloseReason.PEER_CLOSE_REASON_STATE_ERROR:return"Status error; Reason: Repeatedly received offer/answer, etc.";case o.CloseReason.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED:return"Refuse to push the stream; Reason: The client retweeted the stream and was kicked or the agent's pubstart timed out, etc.";case o.CloseReason.PEER_CLOSE_REASON_VRS_PLAY_DENIED:return"Refuse to pull stream; Reason: may pull empty stream, etc., refer to 'err' error code for details.";case o.CloseReason.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH:return"No matching audio codec; Reason: Client (Web) does not support OPUS, etc.";case o.CloseReason.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH:return"No matching video codec; Reason: Client (Web) does not support h264 and vp8 etc.";case o.CloseReason.PEER_CLOSE_REASON_SDP_INVALID:return"SDP parsing error; Reason: SDP format error.";default:return"unknown"}}(e));return t&&(i+=" ".concat(n++,". action=").concat(t,": ").concat(function(e){switch(e){case o.DeniedAction.DENIED_ACTION_STOP:return"cancel pushing stream.";case o.DeniedAction.DENIED_ACTION_RETRY_NEXT_IP:return"Try the next ip, if there is no next ip, re-request the route.";case o.DeniedAction.DENIED_ACTION_REDIRECT:return"Redirect to the ip address specified by data.";case o.DeniedAction.DENIED_ACTION_REDISPATCH:return"re-request route.";case o.DeniedAction.DENIED_ACTION_RETRY:return"retry current gateway node.";default:return"unknown"}}(t))),r&&(i+=" ".concat(n++,". err=").concat(r,": ").concat(function(e){switch(e){case o.DeniedError.DENIED_ERROR_DISPATCH_FAILED:return"media scheduling failed.";case o.DeniedError.DENIED_ERROR_EMPTY_PUBLISH_IPS:return"empty publish ips error.";case o.DeniedError.DENIED_ERROR_EMPTY_PLAY_IPS:return"empty play ips error.";case o.DeniedError.DENIED_ERROR_STREAM_NOT_EXSIT:return"stream does not exist.";case o.DeniedError.DENIED_ERROR_APP_NOT_ONLINE:return"APP has been removed.";case o.DeniedError.DENIED_ERROR_INVALID_PARAMETERS:return"invalid parameter.";case o.DeniedError.DENIED_ERROR_NO_CLIENTIP_SET:return"client ip is not set.";case o.DeniedError.DENIED_ERROR_PERMISSION_DENIED:return"No permission, access denied.";case o.DeniedError.DENIED_ERROR_SET_STREAM_INFO_FAILED:return"Failed to set stream information.";case o.DeniedError.DENIED_ERROR_INTERNAL_ERROR:return"internal error / server busy.";case o.DeniedError.DENIED_ERROR_PUBLISH_FORBIDDEN:return"Streaming is banned.";case o.DeniedError.DENIED_ERROR_NEW_PUBLISH:return"new publish error.";case o.DeniedError.DENIED_ERROR_INNER_ERROR:return"inner error.";case o.DeniedError.DENIED_ERROR_MANAGER_STOP:return"manager stop error.";case o.DeniedError.DENIED_ERROR_PUBLISH_AUTH_FAILED:return"Stream push authentication failed.";case o.DeniedError.DENIED_ERROR_PLAY_AUTH_FAILED:return"Stream pull authentication failed.";case o.DeniedError.DENIED_ERROR_SERVER_STOP:return"server stoped error.";case o.DeniedError.DENIED_ERROR_SESSION_ID:return"session id error.";case o.DeniedError.DENIED_ERROR_MANAGER_TIMEOUT:return"manager timeout.";case o.DeniedError.DENIED_ERROR_NEW_PUBLISH_SRC:return"new publish src.";case o.DeniedError.DENIED_ERROR_PLAY_SESSION_LIMIT:return"Pull session limit.";case o.DeniedError.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE:return"disable ip port flexible.";case o.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_TS:return"packet illegal ts.";case o.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_ADDR:return"packet illegal address.";case o.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_FORMAT:return"packet illegal format.";case o.DeniedError.DENIED_ERROR_CHECK_ADDR_TIMEOUT:return"Check address timed out.";case o.DeniedError.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE:return"Check Address Illegal Signature.";case o.DeniedError.DENIED_ERROR_CHECK_ADDR_INCONSTANT:return"Check for address changes.";case o.DeniedError.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT:return"SDP negotiation timed out, check whether the SDP is sent successfully.";case o.DeniedError.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT:return"Address negotiation timed out, check whether the Candidate is sent successfully.";case o.DeniedError.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED:return"The connectivity check failed, probably due to firewall restrictions (protocol or port) that caused the network between the browser and the gateway to fail.";case o.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED:return"The DTLS handshake fails, the verification of the certificate may fail, and the background checks whether the certificate has expired.";case o.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT:return"The DTLS handshake timed out, this mainly due to network link packet loss and other situations that caused the timeout. Please check your network status and try again.";case o.DeniedError.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED:return"Streaming encryption failed";case o.DeniedError.DENIED_ERROR_WEBRTC_HB_TIMEOUT:return"The heartbeat timed out, this mainly due to network link packet loss and other conditions that caused the timeout. Please check your network status and try again.";case o.DeniedError.DENIED_ERROR_WEBRTC_CONNECTION_LOST:return"The link is disconnected. In turn mode, if the turn link times out or has been released, the gateway will fail to send, and the gateway will think that the link has been lost.";case o.DeniedError.DENIED_ERROR_WEBRTC_NEW_SRC:return"After the stream pushing end pushes the stream again, the stream pulling end will receive this message.";default:return"unknown"}}(r))),i}},2608:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeniedError=t.DeniedAction=t.CloseReason=void 0,function(e){e[e.PEER_CLOSE_REASON_NORMAL=0]="PEER_CLOSE_REASON_NORMAL",e[e.PEER_CLOSE_REASON_STATE_ERROR=5]="PEER_CLOSE_REASON_STATE_ERROR",e[e.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED=15]="PEER_CLOSE_REASON_VRS_PUBLISH_DENIED",e[e.PEER_CLOSE_REASON_VRS_PLAY_DENIED=18]="PEER_CLOSE_REASON_VRS_PLAY_DENIED",e[e.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH=21]="PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH",e[e.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH=22]="PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH",e[e.PEER_CLOSE_REASON_SDP_INVALID=23]="PEER_CLOSE_REASON_SDP_INVALID"}(t.CloseReason||(t.CloseReason={})),function(e){e[e.DENIED_ACTION_STOP=1]="DENIED_ACTION_STOP",e[e.DENIED_ACTION_RETRY_NEXT_IP=2]="DENIED_ACTION_RETRY_NEXT_IP",e[e.DENIED_ACTION_REDIRECT=3]="DENIED_ACTION_REDIRECT",e[e.DENIED_ACTION_REDISPATCH=4]="DENIED_ACTION_REDISPATCH",e[e.DENIED_ACTION_RETRY=5]="DENIED_ACTION_RETRY"}(t.DeniedAction||(t.DeniedAction={})),function(e){e[e.DENIED_ERROR_DISPATCH_FAILED=1001]="DENIED_ERROR_DISPATCH_FAILED",e[e.DENIED_ERROR_EMPTY_PUBLISH_IPS=1002]="DENIED_ERROR_EMPTY_PUBLISH_IPS",e[e.DENIED_ERROR_EMPTY_PLAY_IPS=1003]="DENIED_ERROR_EMPTY_PLAY_IPS",e[e.DENIED_ERROR_STREAM_NOT_EXSIT=1004]="DENIED_ERROR_STREAM_NOT_EXSIT",e[e.DENIED_ERROR_APP_NOT_ONLINE=1005]="DENIED_ERROR_APP_NOT_ONLINE",e[e.DENIED_ERROR_INVALID_PARAMETERS=1006]="DENIED_ERROR_INVALID_PARAMETERS",e[e.DENIED_ERROR_NO_CLIENTIP_SET=1007]="DENIED_ERROR_NO_CLIENTIP_SET",e[e.DENIED_ERROR_PERMISSION_DENIED=1008]="DENIED_ERROR_PERMISSION_DENIED",e[e.DENIED_ERROR_SET_STREAM_INFO_FAILED=1009]="DENIED_ERROR_SET_STREAM_INFO_FAILED",e[e.DENIED_ERROR_INTERNAL_ERROR=1010]="DENIED_ERROR_INTERNAL_ERROR",e[e.DENIED_ERROR_PUBLISH_FORBIDDEN=1011]="DENIED_ERROR_PUBLISH_FORBIDDEN",e[e.DENIED_ERROR_NEW_PUBLISH=1012]="DENIED_ERROR_NEW_PUBLISH",e[e.DENIED_ERROR_INNER_ERROR=1013]="DENIED_ERROR_INNER_ERROR",e[e.DENIED_ERROR_MANAGER_STOP=1014]="DENIED_ERROR_MANAGER_STOP",e[e.DENIED_ERROR_PUBLISH_AUTH_FAILED=1015]="DENIED_ERROR_PUBLISH_AUTH_FAILED",e[e.DENIED_ERROR_PLAY_AUTH_FAILED=1016]="DENIED_ERROR_PLAY_AUTH_FAILED",e[e.DENIED_ERROR_SERVER_STOP=2001]="DENIED_ERROR_SERVER_STOP",e[e.DENIED_ERROR_SESSION_ID=2002]="DENIED_ERROR_SESSION_ID",e[e.DENIED_ERROR_MANAGER_TIMEOUT=2003]="DENIED_ERROR_MANAGER_TIMEOUT",e[e.DENIED_ERROR_NEW_PUBLISH_SRC=2004]="DENIED_ERROR_NEW_PUBLISH_SRC",e[e.DENIED_ERROR_PLAY_SESSION_LIMIT=2005]="DENIED_ERROR_PLAY_SESSION_LIMIT",e[e.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE=2006]="DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE",e[e.DENIED_ERROR_PACKET_ILLEGAL_TS=2007]="DENIED_ERROR_PACKET_ILLEGAL_TS",e[e.DENIED_ERROR_PACKET_ILLEGAL_ADDR=2008]="DENIED_ERROR_PACKET_ILLEGAL_ADDR",e[e.DENIED_ERROR_PACKET_ILLEGAL_FORMAT=2009]="DENIED_ERROR_PACKET_ILLEGAL_FORMAT",e[e.DENIED_ERROR_CHECK_ADDR_TIMEOUT=2010]="DENIED_ERROR_CHECK_ADDR_TIMEOUT",e[e.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE=2011]="DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE",e[e.DENIED_ERROR_CHECK_ADDR_INCONSTANT=2012]="DENIED_ERROR_CHECK_ADDR_INCONSTANT",e[e.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT=3e3]="DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT=3001]="DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED=3002]="DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED",e[e.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED=3003]="DENIED_ERROR_WEBRTC_DTLS_HS_FAILED",e[e.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT=3004]="DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED=3005]="DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED",e[e.DENIED_ERROR_WEBRTC_HB_TIMEOUT=3006]="DENIED_ERROR_WEBRTC_HB_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_CONNECTION_LOST=3007]="DENIED_ERROR_WEBRTC_CONNECTION_LOST",e[e.DENIED_ERROR_WEBRTC_NEW_SRC=3008]="DENIED_ERROR_WEBRTC_NEW_SRC"}(t.DeniedError||(t.DeniedError={}))},908:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCModules=void 0;var s=r(6706),a=r(6706),c=r(6706),u=r(3529),l=r(608),d=r(7560),h=r(361),p=r(4865),f=r(1089),_=r(2752),g=r(9595),m=u.ZegoRTCLogEvent.kZegoStartPlay,v=function(){function e(e,t,r,o,n,i,s){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=o,this.rtm=n,this.ac=i,this.zegoWebRtc=s,this.mediaEleSources=[],this.publishModule=new h.PublishModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm,this.zegoWebRtc),this.playModule=new p.PlayModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.initAdvance(),this.initStreamCommon(),this.initAudioMix(),this.init()}return e.prototype.init=function(){this.bindWindowListener(),this.bindRTMListener(),this.bindStreamCenterHandler()},e.prototype.initAudioMix=function(){},e.prototype.initAdvance=function(){},e.prototype.initStreamCommon=function(){},e.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);window.addEventListener(t?"pagehide":"firefox"===this.stateCenter.browser?"beforeunload":"unload",(function(){for(var t in window.event&&(window.event.cancelBubble=!0),e.streamCenter.publisherList)e.publishModule.stopPublishingStream(t);for(var t in e.streamCenter.playerList)e.playModule.stopPlayingStream(t)})),window.addEventListener("message",(function(t){var r=t.data,o=r.type;"SS_DIALOG_SUCCESS"===o&&e.screenStreamFrom(r.streamId,r.canRequestAudioTrack,l.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)),"SS_DIALOG_CANCEL"===o&&l.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)(!1,null,o)})),window.addEventListener("offline",(function(){if(e.logger.info("zc.off.0 network is broken"),e.stateCenter.networkState=c.ENUM_NETWORK_STATE.offline,e.stateCenter.useNetAgent)e.logger.info("zc.off.0 use netAgent");else{for(var t in e.streamCenter.publisherList)(o=e.streamCenter.publisherList[t].retryStreamHandler).startMaxTime(),o.invalid();for(var t in e.streamCenter.playerList){var r=e.streamCenter.playerList[t],o=r.retryStreamHandler;r.playMode==s.PlayMode.CDN&&r.cdnPlayer&&(r.cdnPlayer.canRetry=!1),o.startMaxTime(),o.invalid()}}})),window.addEventListener("online",(function(t){for(var r in e.logger.info("zc.on.0 network is online"),e.stateCenter.networkState=c.ENUM_NETWORK_STATE.online,e.streamCenter.publisherList){var o=e.streamCenter.publisherList[r].publisher,n=e.streamCenter.publisherList[r].retryStreamHandler;o.state==c.ENUM_PUBLISH_STATE.stop||o.stateNego!==c.ENUM_PUBLISH_STATE_NEGO.iceConnected?!n.isOverTime&&n.publishStateHandle(c.ENUM_PUBLISH_STATE_UPDATE.error,r,u.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetworkBrokenError):o.state==c.ENUM_PUBLISH_STATE.publishing&&n.stopMaxTime()}for(var r in e.streamCenter.playerList){var i=e.streamCenter.playerList[r].player,a=e.streamCenter.playerList[r].playMode,l=(n=e.streamCenter.playerList[r].retryStreamHandler,e.streamCenter.playerList[r].cdnPlayer);a==s.PlayMode.CDN&&l&&(l.canRetry=!1),i.state==c.ENUM_PLAY_STATE.stop||a!==s.PlayMode.CDN&&i.stateNego!==c.ENUM_PLAY_STATE_NEGO.iceConnected?!n.isOverTime&&n.playStateHandle(c.ENUM_PLAY_STATE_UPDATE.error,r,u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetworkBrokenError):i.state==c.ENUM_PLAY_STATE.playing&&n.stopMaxTime()}})),document.addEventListener("visibilitychange",(function(t){var r;r="visible"===document.visibilityState?"foreground":"background";var o=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoAppLifeCycle.event);o.setAttribute("state",u.ZegoRTCLogEvent.kZegoAppLifeCycle.state(r)),o.end()})),"safari"==this.stateCenter.browser&&(window.addEventListener("pagehide",(function(t){var r=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoAppLifeCycle.event);r.setAttribute("state",u.ZegoRTCLogEvent.kZegoAppLifeCycle.state("background")),r.end()})),window.addEventListener("pageshow",(function(t){var r=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoAppLifeCycle.event);r.setAttribute("state",u.ZegoRTCLogEvent.kZegoAppLifeCycle.state("foreground")),r.end()})))},e.prototype.bindRTMListener=function(){var e,t,r=this;this.rtm._on("_settingCanFetch",(function(e){return n(r,void 0,void 0,(function(){var e=this;return i(this,(function(t){return this.rtm.cloudSetting.fetchSetting(g.RTC).then((function(t){e.logger.info("zc.scf stream config "+JSON.stringify(t)),t&&e.stateCenter.settingConfig.setSetting(t.setting,["auto_to_tcp","udp_max_fail_num","probe_started_num","hardware_encode","camera_hard_encode","custom_hard_encode","camera_width","camera_height","camera_framerate","camera_audio_bitrate","camera_video_bitrate"]),e.rtm._on("_cloudSettingNotify",(function(e,t){}))})),[2]}))}))})),this.rtm._on("_appConfigRsp",(function(){r.stateCenter.appConfig=r.rtm.getAppConfig(),r.publishModule.startWaitPublish(),r.playModule.startWaitPlay()})),this.rtm._on("_roomLogin",(function(e,t){r.stateCenter.appid=r.rtm.getAppID(),r.stateCenter.idName=r.rtm.getUserID(),r.stateCenter.nickName=r.rtm.getUserName(),r.stateCenter.testEnvironment=r.rtm.isTestEnvironment(),r.stateCenter.isMultiRoom=r.rtm.getMultiRoom(),r.stateCenter.useNetAgent=r.rtm.getUseNetAgent(),r.streamCenter.setSessionInfo(r.stateCenter.appid,r.stateCenter.idName,r.stateCenter.testEnvironment);var o=r.stateCenter.getRoomByRoomID(e);if(!o){var n=new d.StreamHandler(r.logger,r.stateCenter,r.rtm,r.streamCenter,e);r.bindStreamHandler(n),r.stateCenter.roomList.push(o={roomID:e,streamHandler:n,sessionID:"",roomSessionID:"",token:t,isResetRoom:!1,streamList:[],streamInfoList:[]})}})),this.rtm._on("roomLoginResponse",(function(e){r.logger.info("zc.rlr call "+JSON.stringify(e));var t=e.header.room_id||e.body.room_id;r.stateCenter.appConfig=r.rtm.getAppConfig();var o=r.rtm.getToken(t),n=r.rtm.getSessionId(t),i=r.rtm.getRoomSessionID(t),s=r.stateCenter.getRoomByRoomID(t);if(!s){var a=new d.StreamHandler(r.logger,r.stateCenter,r.rtm,r.streamCenter,t);r.bindStreamHandler(a),r.stateCenter.roomList.push(s={roomID:t,streamHandler:a,sessionID:n,roomSessionID:i,token:o,isResetRoom:!1,streamList:[],streamInfoList:[]})}if(s.sessionID=n,s.roomSessionID=i,r.stateCenter.tempRoomList.length>0)for(var c=function(e){var t=r.stateCenter.tempRoomList[e],o=t.roomID,n=t.streamList,i=r.stateCenter.roomList.find((function(e){return e.roomID===o}));i&&(i.streamList=n.filter((function(e){var t=r.streamCenter.stopedPlayerList[null==e?void 0:e.stream_id];return!!(t&&t.state<=6)})),r.stateCenter.tempRoomList[e].streamList=[])},u=0;u<r.stateCenter.tempRoomList.length;u++)c(u);if(1===e.body.stream_fetch_flag)return r.logger.info("zc.rlr stream fetch "+t),s.streamHandler.room=s,void s.streamHandler.fetchStreamList();s.streamHandler.handleStreamStart(e,s),r.logger.info("zc.rlr end "+t)})),this.rtm._on("_connectChanged",(function(e,t){r.logger.info("zc.cc.0 "+e+" "+JSON.stringify(t)),"connecting"===e?r.stateCenter.connectChanged=!0:"connected"===e&&(r.stateCenter.connectChanged=!1,r.stateCenter.useNetAgent=r.rtm.getUseNetAgent(),r.handleWaitPublishAndPlays(t))})),this.rtm._on("HBResponse",(function(e){var t,o=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,n=r.stateCenter.getRoomByRoomID(o);null==n||n.streamHandler.patchStreamList(e)})),this.rtm._on("_roomStateUpdate",(function(e,t,o,n,i){if("CONNECTED"===t&&r.stateCenter.billingTimer.shouldReportRoomTime&&r.stateCenter.billingTimer.startChargeInfosUpload(),"DISCONNECTED"==t){r.logger.info("zc.rsu "+e+" disconnected "+(o?o+" ":"")+(n||"")+i),r.stateCenter.billingTimer.stopChargeInfosUpload();var s=r.stateCenter.getRoomByRoomID(e);if(s){var a=r.stateCenter.roomList.findIndex((function(t){return t.roomID==e}));s.isResetRoom=!0,s.streamHandler.reset(),r.streamCenter.reset(e,o,i),r.stateCenter.roomList.splice(a,1),i?r.stateCenter.tempRoomList.push(s):r.stateCenter.tempRoomList=r.stateCenter.tempRoomList.filter((function(t){return t.roomID!==e}))}}else r.logger.info("zc.rsu "+e+" state: "+t)})),this.rtm._on("_tokenRenewed",(function(e,t){r.logger.info("zc.tr roomID:"+t+" "+e);var o=r.stateCenter.getRoomByRoomID(t);o&&(o.token=e)})),this.rtm._on("_tokenExpired",(function(e){var t,o;((null===(o=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.stop_stream)||void 0===o?void 0:o.stream_id_list)||[]).forEach((function(e){r.publishModule.stopPublishingStream(e,_.errorCodeList.TOKEN_EXPIRED)}))})),this.rtm.liveRoomHandler.handlePushStreamMsg=function(e){e.body.stream_cmd=a.streamMap[e.header.sub_cmd],r.handlePushStreamMsg(e)},null===(e=this.rtm.service)||void 0===e||e.on("push_stream_update",(function(e){r.handlePushStreamMsg(e)})),null===(t=this.rtm.service)||void 0===t||t.on("zegochat_js.push_room_stream_update_req",(function(e){var t,o=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",n=r.stateCenter.getRoomByRoomID(o);n?n.streamHandler.handlePriPushStreamUpdateMsg(e):r.logger.error(f.ZEGO_WEBRTC_ACTION.ON_STREAM+" room no found")}))},e.prototype.handleWaitPublishAndPlays=function(e){for(var t=Object.keys(this.stateCenter.waitPublishStreamList),r=0;r<t.length;r++){var o=t[r],n=this.stateCenter.waitPublishStreamList[o],i=n.localStream,s=n.publishOption,a=n.isDataChannel;if(n.retryStart){if(s.roomID&&s.roomID!==(null==e?void 0:e.roomID)){this.logger.info("zc.hwpap.0 room not connect");continue}this.publishModule.startPublishingStream(o,i,s,a),delete this.stateCenter.waitPublishStreamList[o]}}},e.prototype.handlePushStreamMsg=function(e){var t,r=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",o=this.stateCenter.getRoomByRoomID(r),n=this.rtm.getMsgSpan(u.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.event,r);if(!o)return this.stateCenter.reporter.setError(n,u.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.error.ROOM_NOT_EXIST),void this.logger.error(f.ZEGO_WEBRTC_ACTION.ON_PUSH_STREAM_UPDATE+" room no found");var i="";switch(e.body.stream_cmd){case a.ENUM_STREAM_UPDATE_CMD.added:i="add";break;case a.ENUM_STREAM_UPDATE_CMD.deleted:i="delete";break;case a.ENUM_STREAM_UPDATE_CMD.updated:i="update"}var s=e.body.stream_info.map((function(e){return{stream_id:e.stream_id,stream_extra_info:e.extra_info,id_name:e.id_name||e.anchor_id_name}}));n.setAttributes({stream_update_type:u.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_update_type(i),stream_seq:e.body.stream_seq,stream_list:u.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_list(s)}),n.end(),o.streamHandler.handlePushStreamUpdateMsg(e)},e.prototype.bindStreamCenterHandler=function(){var e=this;this.streamCenter.onPlayStateUpdate=function(t,r,o){var n,i,s,c,d,h,p,f,_,g,v,y,b,S,E,T,w,C,I=e.streamCenter.playerList[r];if(1==t&&I&&l.ClientUtil.isReDispatch(o)){var O=I.player,k=I.retryDispatchHandler,R=I.playOption;return 0!=O.sessionId&&O.signal&&O.shouldSendCloseSession()&&(O.signal.sendCloseSession(e.stateCenter.getSeq(),O.sessionId,1),O.signal.removeSession(O.sessionId),O.closeSessionSignal=!0),O.resetPlay(),k.stopMaxTime(),k.invalid(),k.initStream(r,R,!1),void(e.rtm.isLogin()?(k.startMaxTime(),k.active(0)):e.streamCenter.playerList[r].isReDispatch=!0)}if(I&&I.player&&(0==t||1==t)){var A=I.player.isRePlay?u.ZegoRTCLogEvent.kZegoRePlay:u.ZegoRTCLogEvent.kZegoStartPlay;1==t&&o&&e.stateCenter.reporter.spanSetAttributes({key:A.event,par:r},{error:o.code,message:o.message}),e.stateCenter.reporter.spanEnd({key:A.event,par:r},{url:m.url(null===(i=null===(n=null==I?void 0:I.player)||void 0===n?void 0:n.signal)||void 0===i?void 0:i.server),ip:m.ip(null===(s=null==I?void 0:I.player)||void 0===s?void 0:s.ip),peer_id:m.peer_id(null===(c=null==I?void 0:I.player)||void 0===c?void 0:c.peerID),source_type:m.source_type((0,l.getPlaySourceType)(null===(d=null==I?void 0:I.player)||void 0===d?void 0:d.resourceMode)),net_protocol:m.net_protocol(null===(h=null==I?void 0:I.player)||void 0===h?void 0:h.netProtocol),signal_consume:m.signal_consume(null===(p=null==I?void 0:I.player)||void 0===p?void 0:p.signalTime),is_center:m.is_center(null==I?void 0:I.isCenterNode)}),e.stateCenter.reporter.spanEnd({key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:r},{error:o.code,message:o.message},!0)}if(0==t){var P=u.ZegoRTCLogEvent.kZegoTaskStreamPlay,L=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:r},{key:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:r},0===(null===(f=null==I?void 0:I.player)||void 0===f?void 0:f.resourceMode)?u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event:u.ZegoRTCLogEvent.kZegoTaskL3Play.event,!0);I.player.rtcPlayCount++,L.setAttributes({tryidx:P.tryidx(I.player.rtcPlayCount),url:P.url(null===(g=null===(_=null==I?void 0:I.player)||void 0===_?void 0:_.signal)||void 0===g?void 0:g.server),ip:P.ip(null===(v=null==I?void 0:I.player)||void 0===v?void 0:v.ip),net_protocol:P.net_protocol(null===(y=null==I?void 0:I.player)||void 0===y?void 0:y.netProtocol),room_id:P.room_id(null===(b=null==I?void 0:I.room)||void 0===b?void 0:b.roomID),room_sid_string:P.room_sid_string(null===(S=null==I?void 0:I.room)||void 0===S?void 0:S.roomSessionID),env:P.env(e.stateCenter.testEnvironment?3:1),resource_type:P.resource_type((0,l.getPlaySourceType)(null===(E=null==I?void 0:I.player)||void 0===E?void 0:E.resourceMode)),protocol:P.protocol("webrtc"),dispatch_external_ip:P.dispatch_external_ip(e.stateCenter.clientIP),stream_id:P.stream_id(r)})}else 1==t&&(null===(T=null==I?void 0:I.player)||void 0===T||T.uploadRTCPlayStats(),e.stateCenter.reporter.spanEnd({key:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:r},{stop_reason:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason(null===(w=null==I?void 0:I.player)||void 0===w?void 0:w.stopReason),error:o.code,message:o.message}),I&&I.player&&(I.player.stopReason=""));if(1===t&&e.streamCenter.playErrorCallBackList[r])e.stateCenter.connectChanged||(e.logger.info("zc.opsu.1 connect changed"),e.streamCenter.playErrorCallBackList[r]({errorCode:o&&o.code,extendedData:o&&o.message}),delete e.streamCenter.playErrorCallBackList[r]),e.logger.info("zc.opsu.1 stop play called by sdk"),e.playModule.stopPlayingStream(r,o);else{var N=l.ClientUtil.getPlayerStateType(t);(1===t||(null===(C=null==I?void 0:I.player)||void 0===C?void 0:C.updateCBState({state:N,code:o.code})))&&e.stateCenter.actionListener("playerStateUpdate",{state:N,streamID:r,errorCode:o&&o.code,extendedData:o&&o.message})}},this.streamCenter.onPublishStateUpdate=function(t,r,o){e.onPublishStateUpdateHandle(t,r,o)},this.streamCenter.onPublishQualityUpdate=function(t,r){e.stateCenter.actionListener("publishQualityUpdate",t,r)},this.streamCenter.onPlayQualityUpdate=function(t,r){e.stateCenter.actionListener("playQualityUpdate",t,r)},this.streamCenter.onRemoteCameraStatusUpdate=function(t,r,o){var n=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:t},{key:""},u.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.event);n.setAttributes({stream_id:u.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.stream_id(t),camera_status:u.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.camera_status(r),status_code:u.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.status_code(o)}),n.end(),e.stateCenter.actionListener("remoteCameraStatusUpdate",t,r),e.stateCenter.actionListener("_remoteCameraStatusUpdate",t,o)},this.streamCenter.onRemoteMicStatusUpdate=function(t,r,o){var n=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:t},{key:""},u.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.event);n.setAttributes({stream_id:u.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.stream_id(t),mic_status:u.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.mic_status(r),status_code:u.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.status_code(o)}),n.end(),e.stateCenter.actionListener("remoteMicStatusUpdate",t,r),e.stateCenter.actionListener("_remoteMicStatusUpdate",t,o)},this.streamCenter.onSoundLevelUpdate=function(t){e.stateCenter.actionListener("soundLevelUpdate",t)},this.streamCenter.onMicSoundLevelUpdate=function(t){e.stateCenter.actionListener("capturedSoundLevelUpdate",t)}},e.prototype.bindStreamHandler=function(e){var t=this;e.onStreamUpdated=function(e,r,o){var n=o.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo,urlsFLV:e.urlFlv,urlsRTMP:e.urlRtmp,urlsHLS:e.urlHls,urlsHttpsFLV:e.urlHttpsFlv,urlsHttpsHLS:e.urlHttpsHls}})),i={};if(0===r){var s=o.map((function(e){return{stream_id:e.streamID,code:c.STREAM_DELETE_REASON[e.closeType]&&c.STREAM_DELETE_REASON[e.closeType].code||0,description:c.STREAM_DELETE_REASON[e.closeType]&&c.STREAM_DELETE_REASON[e.closeType].description||"unknown"}}));i.stream_delete_reason=s}if(n.length>0&&t.stateCenter.actionListener("roomStreamUpdate",e,l.ClientUtil.getSteamUpdateType(r),n,Object.keys(i).length>0?JSON.stringify(i):""),o.length>0&&t.stateCenter.actionListener("_streamUpdated",r,o),1===r){var a=[];n.forEach((function(e){e.extraInfo&&a.push({streamID:e.streamID,user:e.user,extraInfo:e.extraInfo})})),a.length>0&&t.stateCenter.actionListener("streamExtraInfoUpdate",e,a)}},e.onPublishStateUpdate=function(e,r,n){var i,s,c,d,h,p,f,g,m,v,y,b,S,E,T,w;t.logger.info("zb.opsu ",r);var C=t.streamCenter.publisherList[r];if(C&&C.publisher&&(0==e||1==e)){var I=u.ZegoRTCLogEvent.kZegoStartPublish;t.stateCenter.reporter.spanEnd({key:(C.publisher.isRePublish?u.ZegoRTCLogEvent.kZegoRePublish:u.ZegoRTCLogEvent.kZegoStartPublish).event,par:r},{error:n.code,message:n.message,url:I.url(null===(s=null===(i=null==C?void 0:C.publisher)||void 0===i?void 0:i.signal)||void 0===s?void 0:s.server),ip:I.ip(null===(c=null==C?void 0:C.publisher)||void 0===c?void 0:c.ip),peer_id:I.peer_id(null===(d=null==C?void 0:C.publisher)||void 0===d?void 0:d.peerID),source_type:I.source_type("rtc"),net_protocol:I.net_protocol(null===(h=null==C?void 0:C.publisher)||void 0===h?void 0:h.netProtocol),is_center:I.is_center(null==C?void 0:C.isCenterNode)}),t.stateCenter.reporter.spanEnd({key:u.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:r},o({},n),!0)}var O=u.ZegoRTCLogEvent.kZegoTaskRTCPublish;if(0==e){var k=t.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:r},{key:O.event,par:r},O.event,!0);C.publisher.rtcPublishCount++,k.setAttributes({tryidx:O.tryidx(null==C?void 0:C.publisher.rtcPublishCount),url:O.url(null===(f=null===(p=null==C?void 0:C.publisher)||void 0===p?void 0:p.signal)||void 0===f?void 0:f.server),ip:O.ip(null===(v=null===(m=null===(g=null==C?void 0:C.publisher)||void 0===g?void 0:g.gwNode)||void 0===m?void 0:m.split(":"))||void 0===v?void 0:v[0]),net_protocol:O.net_protocol(null===(y=null==C?void 0:C.publisher)||void 0===y?void 0:y.netProtocol),dispatch_external_ip:O.dispatch_external_ip(t.stateCenter.clientIP),room_id:O.room_id(null===(b=null==C?void 0:C.room)||void 0===b?void 0:b.roomID),room_sid_string:O.room_sid_string(null===(S=null==C?void 0:C.room)||void 0===S?void 0:S.roomSessionID),resource_type:O.resource_type("rtc"),protocol:O.protocol("webrtc")}),1012===n.code?t.streamCenter.stopPublishingStream(r,n):2002===n.code&&(t.streamCenter.stopPublishingStream(r,n),n.code=_.errorCodeList.TOKEN_ERROR.code)}else 1==e&&(null===(E=null==C?void 0:C.publisher)||void 0===E||E.uploadRTCPublishStats(),t.stateCenter.reporter.spanEnd({key:O.event,par:r},{stop_reason:O.stop_reason(null===(T=null==C?void 0:C.publisher)||void 0===T?void 0:T.stopReason),error:n.code,message:n.message}),C&&C.publisher&&(C.publisher.stopReason=""));var R=l.ClientUtil.getPublisherStateType(e);(1===e||(null===(w=null==C?void 0:C.publisher)||void 0===w?void 0:w.updateCBState({state:R,code:n.code})))&&t.stateCenter.actionListener("publisherStateUpdate",{state:R,streamID:r,errorCode:n.code,extendedData:n.message})},e.onStreamExtraInfoUpdated=function(e,r){var o=r.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo}}));t.stateCenter.actionListener("streamExtraInfoUpdate",e,o)}},e.prototype.screenStreamFrom=function(e,t,r){var o={};o.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}},o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height}},!t&&(o.audio=!1),navigator.mediaDevices.getUserMedia(o).then((function(e){r(!0,e)})).catch((function(e){r(!1,null,e)}))},e.prototype.onPublishStateUpdateHandle=function(e,t,r){var o=this;this.logger.info("zc.opsuh.0 call");var n=this.streamCenter.publisherList[t],i=n.room;if(i)if(0==e){if(this.stateCenter.publishStreamList[t]){var s=!i.streamList.find((function(e){return e.stream_id==t&&(e.anchor_id_name==o.stateCenter.idName||e.id_name==o.stateCenter.idName||e.user_id===o.stateCenter.idName)}));[c.ENUM_PUBLISH_STREAM_STATE.tryPublish,c.ENUM_PUBLISH_STREAM_STATE.retryPublish].includes(this.stateCenter.publishStreamList[t].state)&&s?(this.stateCenter.publishStreamList[t].state=c.ENUM_PUBLISH_STREAM_STATE.update_info,i.streamHandler.updateStreamInfo(t,c.ENUM_STREAM_SUB_CMD.liveBegin,this.stateCenter.publishStreamList[t].extra_info,(function(e){}))):(this.stateCenter.publishStreamList[t].state=c.ENUM_PUBLISH_STREAM_STATE.publishing,this.WebrtcOnPublishStateUpdateHandle(e,t,r))}}else{if(1==e&&n&&l.ClientUtil.isReDispatch(r)){var a=n.publisher,u=n.retryDispatchHandler,d=n.publishOption;return 0!=a.sessionId&&a.signal&&a.shouldSendCloseSession()&&(a.signal.sendCloseSession(this.stateCenter.getSeq(),a.sessionId,1),a.signal.removeSession(a.sessionId),a.closeSessionSignal=!0),a.resetPublish(),u.stopMaxTime(),u.invalid(),u.initStream(t,d,!0),void(this.rtm.isLogin()?(u.startMaxTime(),u.active(0)):this.streamCenter.publisherList[t].isReDispatch=!0)}i.streamHandler.onPublishStateUpdate(e,t,r),1==e&&(this.logger.info("zc.opsuh.0 stop publish called by sdk"),this.publishModule.stopPublishingStream(t,r))}else this.logger.error("zc.opsuh.0 room not exist")},e.prototype.WebrtcOnPublishStateUpdateHandle=function(e,t,r){if(this.stateCenter.publishStreamList[t].state==c.ENUM_PUBLISH_STREAM_STATE.publishing){var o=this.streamCenter.getRoomByStreamID(t);o&&o.streamHandler.onPublishStateUpdate(e,t,r)}},e.prototype.bindListener=function(e,t){var r=this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskOnListener.event);return r.setAttributes({listener:e}),this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),this.stateCenter.reporter.setError(r,u.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM," listener callBack must be function"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),r.end(),!0):(this.logger.error("zc.o.0 event "+e+" no found"),this.stateCenter.reporter.setError(r,u.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM," event "+event+" no found"),!1)},e.prototype.deleteListener=function(e,t){var r=this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskOffListener.event);if(r.setAttributes({listener:e}),!this.stateCenter.listenerList[e])return this.logger.error("zc.o.1 listener no found"),this.stateCenter.reporter.setError(r,u.ZegoRTCLogEvent.kZegoTaskOffListener.error.INPUT_PARAM," event "+event+" no found"),!1;this.logger.info("dc.o.1 "+"".concat(e," cb:")+typeof t);var o=this.stateCenter.listenerList[e];return t?o.splice(o.indexOf(t),1):this.stateCenter.listenerList[e]=[],r.end(),!0},e}();t.RTCModules=v},1177:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateCumulativeDuration=t.recordBreakDuration=t.onBreakEnd=void 0,t.onBreakEnd=function(e,t,r,o,n){if(void 0===n&&(n="video"),t.breakStartTime){var i=e-t.breakStartTime;i>=o&&(t.cumulativeBreakDuration+=i,r.breakDuration+=i),t.breakStartTime=void 0}},t.recordBreakDuration=function(e,r,o,n,i,s,a,c,u,l){if(void 0===u&&(u=c),void 0===l&&(l="video"),i>1e3&&(i=1e3),n.breakStartTime)if(o)0===r?(e-n.breakStartTime>=22e3&&(0,t.onBreakEnd)(e,n,a,i,l),s.breakDuration+=1e3):c>=i?c<500?c+u<1e3?((0,t.onBreakEnd)(e-(1e3-u),n,a,i,l),n.breakStartTime=e-c,s.breakDuration+=u+c,s.decodeTime+=1e3-(u+c)):((0,t.onBreakEnd)(e-1e3+u,n,a,i,l),n.breakStartTime=e-1e3+u,s.breakDuration+=1e3):c>=500&&((0,t.onBreakEnd)(e-c,n,a,i,l),n.breakStartTime=e-c,s.breakDuration+=1e3):u<=i?((0,t.onBreakEnd)(e-1e3+u,n,a,i,l),n.breakStartTime=void 0,s.breakDuration+=u,s.decodeTime+=1e3-u,a.decodeDuration+=1e3-u):s.breakDuration+=1e3;else{n.resumeRecv=!1;var d=e-1e3-n.breakStartTime;d<=0&&(d=0),n.breakStartTime=void 0,n.noBreakNoDecodeDuration+=d,s.breakCancelDuration+=d,a.blankDuration+=d}else o?0===r?n.resumeRecv?(n.breakStartTime=e-1e3,s.breakDuration+=1e3):(n.noBreakNoDecodeDuration+=1e3,a.blankDuration+=1e3):u>i?n.resumeRecv?(n.breakStartTime=e-u,n.cumulativeBreakDuration+=u,s.breakDuration+=u,s.decodeTime+=1e3-u,a.breakDuration+=u,a.decodeDuration+=1e3-u):(n.noBreakNoDecodeDuration+=1e3,a.blankDuration+=1e3):(s.decodeTime+=1e3,a.decodeDuration+=1e3):n.decodeStartTime&&(0===r?(n.resumeRecv=!1,n.noBreakNoDecodeDuration+=1e3,a.blankDuration+=1e3):(s.decodeTime+=1e3,a.decodeDuration+=1e3));o&&r&&(n.resumeRecv=!0)},t.calculateCumulativeDuration=function(e,t,r,o,n,i,s){if(void 0===s&&(s="video"),o=o>1e3?1e3:o,t.breakDuration=0,t.breakCancelDuration=0,t.decodeTime=0,r.decodeDuration=0,r.breakDuration=0,r.blankDuration=0,e.decodeStartTime){var a=i,c=a-e.decodeStartTime;if(e.decodeStartTime=void 0,e.totalDuration+=c,e.breakStartTime){var u=a-e.breakStartTime;e.breakStartTime=void 0,n?u>o&&(e.cumulativeBreakDuration+=u):e.noBreakNoDecodeDuration+=u}var l=e.cumulativeBreakDuration,d=e.totalDuration-e.cumulativeBreakDuration-e.noBreakNoDecodeDuration;return e.cumulativeDecodeDuration=d,{cumulativeBreakDuration:l,cumulativeDecodeDuration:d}}return{cumulativeBreakDuration:0,cumulativeDecodeDuration:0}}},4865:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayModule=void 0;var n=r(6706),i=r(1089),s=r(6706),a=r(3529),c=r(608),u=a.ZegoRTCLogEvent.kZegoTaskPlayStart,l=function(){function e(e,t,r,o,n){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=o,this.rtm=n}return e.prototype.startPlayingStream=function(e,t,r){var o=this;return this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call ",e),new Promise((function(n,i){return o._handlePlayStream(e,t,n,i,r)}))},e.prototype._handlePlayStream=function(e,t,r,l,d){var h,p=this,f=u,_=this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.I,{key:a.ZegoRTCLogEvent.kZMInitSetting.event},{key:u.event,par:e},u.event,!0),g=function(e,t){p.logger.error(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" "+(t||e.message)),p.stateCenter.reporter.setError(_,e),l&&l(o(o({},e),{errorCode:e.code,extendedData:e.message+(t?" "+t:"")}))};if(void 0===e||"string"!=typeof e||""===e)return g(f.error.kPlayParamError,"stream id type error"),!1;if(e.length>s.MAX_STREAM_ID_LENGTH)return g(f.error.kPlayStreamIDToLongError,"stream id length limit "+s.MAX_STREAM_ID_LENGTH),!1;if(!c.ClientUtil.checkIllegalCharacters(e))return g(f.error.kPlayStreamIDInvalidCharacterError),!1;if(void 0!==t&&"object"!=typeof t)return g(f.error.kPlayParamError,"playOption must be object"),!1;var m,v=(0,c.generaStreamSid)(this.stateCenter.appid,this.stateCenter.idName,e),y=((h={})["_play_"+e]={stream_sid:v},h);if(this.stateCenter.reporter.setPublicPros(y),_.setAttributes({stream_id:u.stream_id(e),stream_sid:u.stream_sid(v),play_option:u.play_option(t),video_codec_id:u.video_codec_id(null==t?void 0:t.videoCodec),use_na:u.use_na(this.stateCenter.useNetAgent?1:0),biz_product:(null==t?void 0:t.resourceMode)==n.ResourceMode.DG?1:0}),this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),m=this.stateCenter.customUrl;else{var b=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);b&&b instanceof Array&&b.length>0&&(m=b,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(b)))}if(m){var S=this.streamCenter.setPlayStateStart(e,t,v,d);return!0!==S?(g(JSON.parse(JSON.stringify(S)),"cannot start play"),!1):(this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playerList[e].serverUrls=m,this.streamCenter.startPlayingStream(e,!1,(function(e){r&&r(e)})))}if(this.stateCenter.useNetAgent&&this.stateCenter.playAccelerate&&this.stateCenter.roomList.length>0)this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" play accelerate");else if(this.rtm.isDisConnect())return g(f.error.kPlayNoLoginError),!1;this.stateCenter.pullLimited||(e=NaN+e),t&&t.videoCodec&&(t.videoCodec=t.videoCodec.toUpperCase());var E=this.stateCenter.settingConfig.getSetting("resource_mode",!0);void 0!==E&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM," setting resource_mode "+E),!t&&(t={}),t.resourceMode=E);var T=this.streamCenter.setPlayStateStart(e,t,v,d);if(!0!==T)return g(JSON.parse(JSON.stringify(T)),"cannot start play"),!1;if(this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playSuccessCallBackList[e]=function(e){r&&r(e)},l&&(this.streamCenter.playErrorCallBackList[e]=l),t&&t.resourceMode&&[1,3].includes(t.resourceMode)&&this.streamCenter.playerList[e].playMode==n.PlayMode.CDN)return this.streamCenter.startPlayingStream(e,this.stateCenter.useNetAgent,this.streamCenter.playSuccessCallBackList[e],!0);var w=a.ZegoRTCLogEvent.kZegoStartPlay;this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:u.event,par:e},{key:w.event,par:e},w.event,!0).setAttributes({reason:w.reason("StartPlay")});var C=this.stateCenter.useNetAgent;if(C)return this.stateCenter.appConfig?(this.streamCenter.playerList[e].serverUrls=2===(null==t?void 0:t.resourceMode)?["unified_l3"]:["unified_rtc"],this.streamCenter.startPlayingStream(e,C,this.streamCenter.playSuccessCallBackList[e]),!0):(this.streamCenter.waitPlayList.push(e),!0);var I=this.streamCenter.playerList[e].retryDispatchHandler;return I.stopMaxTime(),I.invalid(),I.initStream(e,t,!1),I.startMaxTime(),I.active(0)},e.prototype.stopPlayingStream=function(e,t){var r,o,c;this.logger.info(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call",e);var u=this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},a.ZegoRTCLogEvent.kZegoTaskPlayStop.event);if("string"!=typeof e||""===e)return this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" streamid must be string and not empty"),this.stateCenter.reporter.setError(u,a.ZegoRTCLogEvent.kZegoTaskPlayStop.error.kParamError,"stream id type error"),void delete this.stateCenter.reportSeqList.stopPlay[e];var l=this.streamCenter.playerList[e];u.setAttributes({stream_id:a.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_id(e),webrtc_sid:a.ZegoRTCLogEvent.kZegoTaskPlayStop.webrtc_sid(null===(r=null==l?void 0:l.player)||void 0===r?void 0:r.sessionId),stream_sid:a.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_sid(null==l?void 0:l.streamSid),biz_product:l&&(null===(o=l.playOption)||void 0===o?void 0:o.resourceMode)==n.ResourceMode.DG?1:0});var d=l&&l.player&&l.player.state!==s.ENUM_PLAY_STATE.stop||(null===(c=null==l?void 0:l.retryStreamHandler)||void 0===c?void 0:c.isRetrying());for(var h in this.streamCenter.stopPlayingStream(e,t),this.stateCenter.streamUrlMap)if(this.stateCenter.streamUrlMap[h]===e){delete this.stateCenter.streamUrlMap[h];break}t?this.stateCenter.reporter.setError(u,t):u.end(),d&&this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,e,t||{code:0,message:""}),this.logger.debug(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call success")},e.prototype.mutePlayStream=function(e,t,r){return new Promise((function(e,t){e(!1)}))},e.prototype.setStreamAudioOutput=function(e,t){return!1},e.prototype.startWaitPlay=function(){var e=this;this.streamCenter.waitPlayList.forEach((function(t){e.streamCenter.startPlayingStream(t,e.stateCenter.useNetAgent,e.streamCenter.playSuccessCallBackList[t])})),this.streamCenter.waitPlayList=[]},e.prototype.getStreamStats=function(e){var t,r,o;return this.logger.info(i.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call"),"string"==typeof e&&(o=null===(t=this.streamCenter.playerList[e])||void 0===t?void 0:t.player),o&&(null===(r=null==o?void 0:o.qualityHandler)||void 0===r?void 0:r.currentQuality)?o.qualityHandler.currentQuality||null:(this.logger.error("zsc.sp.0 stream is not playing"),null)},e}();t.PlayModule=l},5634:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayStreamQuality=void 0;var n=r(6706),i=r(1089),s=r(3529),a=r(608),c=r(1177),u=function(){function e(e,t,r,o,i){this.player=t,this.logger=r,this.dataReport=o,this.stateCenter=i,this.playQualityList=[],this.maxQualityListCount=10,this.qualityTimer=null,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,audioPacketsReceived:0,videoPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,googCodecName:"",videoPacketsLost:0,videoPacketsLostRate:0,videoFramesDecoded:0,videoFramesDropped:0,videoCumulativeDecodeTime:0,videoCumulativeBreakTime:0,videoCumulativeBreakRate:0},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioJitter:0,audioLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,audioSamplingRate:0,audioSendLevel:0,googCodecName:"",audioCumulativeDecodeTime:0,audioCumulativeBreakTime:0,audioCumulativeBreakRate:0},peerToPeerDelay:0,peerToPeerPacketLostRate:0},this.decodeStartTime=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=n.ENUM_PROBE_STATE.probed,this.probeTimer=null,this.probeTimeoutInterval=3e4,this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.playStat={},this.cumulativeQuality={},this.audioBreakThreshold=200,this.videoBreakThreshold=500,this.videoBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.audioBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.lastSampleTime=0,this.videoBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.audioBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.videoReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.audioReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},this.currentSecondQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0},this.poorQualityNum=0,this.p2pNetStats={p2pLostRate:0,p2pRTT:0},this.sampleTimes=0,this.qualitySampleInterval=1e3,this.qualityTimeInterval=e,this.currentQuality.video.muteState=this.player.videoMuteState,this.currentQuality.audio.muteState=this.player.audioMuteState}return Object.defineProperty(e.prototype,"streamId",{get:function(){return this.player.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.player.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerID",{get:function(){return this.player.peerID},enumerable:!1,configurable:!0}),e.prototype.getPlayStats=function(e,t){var r,o,u,l=this;if(null!=e){var d=this.sampleTimes%parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString())==0;parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString()),d&&this.getP2PNetStats();for(var h,p=document.querySelectorAll("video, audio"),f=0;f<p.length;f++)p[f].srcObject===this.player.playStream&&(h=p[f]);var _={sampleTimeWindow:this.qualityTimeInterval,audioFractionLost:0,audioPacketsLost:0,audioPacketsLostRate:0,audioBitrate:0,audioLevel:0,audioSendLevel:0,audioSamplingRate:0,audioCodec:"opus",audioQuality:0,audioFPS:0,videoQuality:0,videoPacketsLost:0,videoPacketsLostRate:0,videoBitrate:0,videoFPS:0,nackCount:0,pliCount:0,audioJitter:0,videoJitter:0,videoFractionLost:0,videoFramesDecoded:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,audioMuteState:this.player.audioMuteState,videoMuteState:this.player.videoMuteState,soundLevel:this.player.soundLevel,muted:h?h.muted:void 0,paused:h?h.paused:void 0,volume:h?h.volume:void 0,sinkId:h?h.sinkId:void 0},g=this.lastPlayStats.time,m=0,v=0,y=0,b=0,S=0,E=0,T=0,w=null,C=null;e.forEach((function(e){["ssrc","inbound-rtp"].includes(e.type)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)&&(w=e),("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)&&(C=e)}));var I=(new Date).getTime(),O=function(e,t){return e>t?e-t:0};if(this.lastSampleTime||(this.lastSampleTime=I-1e3),w){var k=w.totalInterFrameDelay,R=w.framesDecoded,A=w.totalSquaredInterFrameDelay,P=O(R,this.totalQuality.framesDecode);this.totalQuality.framesDecode=R;var L=O(k,this.totalQuality.totalInterFrameDelay);this.totalQuality.totalInterFrameDelay=k;var N=O(A,this.totalQuality.totalSquaredInterFrameDelay);this.totalQuality.totalSquaredInterFrameDelay=A;var D=(N-Math.pow(L,2)/(P||1))/(P||1);D=D>0?D:-D;var M=parseInt((1e3/(P+1)).toString()),x=1e3*Math.sqrt(D),B=L/(P||1)*1e3||M,U=(B=parseInt((B>1e3?1e3:B).toString()))+x;U=parseInt((U>1e3?1e3:U).toString()),P>0&&0===this.player.cameraStatus&&!this.videoBreak.decodeStartTime&&(this.videoBreak.decodeStartTime=I-1e3),this.videoBreak.decodeStartTime&&(0,c.recordBreakDuration)(I,P,0===this.player.cameraStatus&&this.player.playMediaStatus.video,this.videoBreak,this.videoBreakThreshold,this.videoBreakReport,this.videoReliableBreak,B,U)}if(C){var j=C.totalSamplesReceived,H=C.concealedSamples,z=C.bytesReceived,V=O(j,this.totalQuality.totalSamplesReceived);this.totalQuality.totalSamplesReceived=j;var q=O(H,this.totalQuality.concealedSamples);this.totalQuality.concealedSamples=H;var G=O(z,this.totalQuality.audioBytesReceived);this.totalQuality.audioBytesReceived=z;var Z=parseInt((q/(V||1)*1e3).toString());G>0&&0===this.player.micStatus&&!this.audioBreak.decodeStartTime&&(this.audioBreak.decodeStartTime=I-1e3),this.audioBreak.decodeStartTime&&(0,c.recordBreakDuration)(I,G,0===this.player.micStatus&&this.player.playMediaStatus.audio,this.audioBreak,this.audioBreakThreshold,this.audioBreakReport,this.audioReliableBreak,Z,Z,"audio")}if(t&&t.result().forEach((function(e){d&&("ssrc"==e.type&&(e.names().indexOf("googBandwidthLimitedResolution")>=0&&(_.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),e.names().indexOf("codecImplementationName")>=0&&(_.codecImplementationName=e.stat("codecImplementationName")),"video"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(_.videoCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(T=e.stat("googCurrentDelayMs"))),"audio"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(_.audioCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(E=e.stat("googCurrentDelayMs"))),e.names().indexOf("googCpuLimitedResolution")>=0&&(_.googCpuLimitedResolution=e.stat("googCpuLimitedResolution"))),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(_.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")))})),d){e.forEach((function(e){if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)){0!=g&&(_.audioBitrate=8*(e.bytesReceived-l.lastPlayStats.audioBytesReceived)/(e.timestamp-g),(r=e.packetsLost-l.lastPlayStats.audioPacketsLost)>0&&(v=r/(r+e.packetsReceived-l.lastPlayStats.audioPacketsReceived))),_.audioBitrate<0&&(_.audioBitrate=0),_.audioJitter=e.jitter,e.packetsLost>0&&(_.audioPacketsLost=e.packetsLost),_.audioFractionLost=e.fractionLost;var t=e.packetsLost-l.lastPlayStats.audioPacketsLost;_.audioFPS=(e.packetsReceived-l.lastPlayStats.audioPacketsReceived)/(e.timestamp-g)*1e3,_.audioPacketsLostRate=t>0?t/(e.packetsReceived-l.lastPlayStats.audioPacketsReceived+t):0,l.lastPlayStats.audioBytesReceived=e.bytesReceived,e.packetsLost>0&&(l.lastPlayStats.audioPacketsLost=e.packetsLost),l.lastPlayStats.audioPacketsReceived=e.packetsReceived,l.lastPlayStats.audioTime=e.timestamp,l.lastPlayStats.time=e.timestamp,l.lastPlayStats.audioBitrate=_.audioBitrate,b=e.jitter}else if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)){var r;0!=g?(_.videoBitrate=8*(e.bytesReceived-l.lastPlayStats.videoBytesReceived)/(e.timestamp-g),_.videoFPS=1e3*(e.framesDecoded-l.lastPlayStats.framesDecoded)/(e.timestamp-g),(r=e.packetsLost-l.lastPlayStats.videoPacketsLost)>0&&(y=r/(r+e.packetsReceived-l.lastPlayStats.videoPacketsReceived))):"number"==typeof e.framesPerSecond&&(_.videoFPS=e.framesPerSecond),_.videoBitrate<0&&(_.videoBitrate=0),_.videoFPS<0&&(_.videoFPS=0),_.videoJitter=e.jitter,_.nackCount=e.nackCount,_.pliCount=e.pliCount,_.videoFractionLost=e.fractionLost,_.videoFramesDecoded=e.framesDecoded,e.packetsLost>0&&(_.videoPacketsLost=e.packetsLost),_.videoPacketsLostRate=(t=e.packetsLost-l.lastPlayStats.videoPacketsLost)>0?t/(e.packetsReceived-l.lastPlayStats.videoPacketsReceived+t):0,l.lastPlayStats.videoBytesReceived=e.bytesReceived,l.lastPlayStats.framesDecoded=e.framesDecoded,e.packetsLost>0&&(l.lastPlayStats.videoPacketsLost=e.packetsLost),l.lastPlayStats.videoPacketsReceived=e.packetsReceived,l.lastPlayStats.videoTime=e.timestamp,l.lastPlayStats.time=e.timestamp,S=e.jitter}else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0)||e.frameWidth){if(_.frameHeight=e.frameHeight,_.frameWidth=e.frameWidth,0===g||l.lastPlayStats.frameHeight===e.frameHeight&&l.lastPlayStats.frameWidth===e.frameWidth)0===g&&(l.lastPlayStats.frameHeight=e.frameHeight,l.lastPlayStats.frameWidth=e.frameWidth,l.player.isProbe||(l.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:l.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth}),l.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event,par:l.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth})));else{if(!l.player.isProbe){var o=l.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:s.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:l.streamId},{key:""},s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.event);o.setAttributes({webrtc_sid:s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.webrtc_sid(l.sessionId),w:s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.w(e.frameWidth),h:s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.h(e.frameHeight)}),o.end(),l.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:l.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth}),l.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event,par:l.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth})}l.lastPlayStats.frameHeight=e.frameHeight,l.lastPlayStats.frameWidth=e.frameWidth}0!=g&&(_.videoTransferFPS=1e3*(e.framesReceived-l.lastPlayStats.framesReceived)/(e.timestamp-g),_.videoFramesDropped=e.framesDropped-l.lastPlayStats.framesDropped),_.videoTransferFPS<0&&(_.videoTransferFPS=0),_.videoFramesDropped<0&&(_.videoFramesDropped=0),l.lastPlayStats.framesReceived=e.framesReceived,l.lastPlayStats.framesDropped=e.framesDropped}else"track"==e.type&&("audio"==e.kind||e.id.indexOf("audio")>=0)?(_.audioLevel=e.audioLevel||0,_.audioSendLevel=e.totalAudioEnergy,_.audioSamplingRate=e.totalSamplesDuration):"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(_.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(_.currentRoundTripTime=e.currentRoundTripTime,m=1e3*_.currentRoundTripTime))})),this.lastPlayStats.googCurrentDelayMs=Number(E)||Number(T)||0,y=isNaN(y)||y<0?0:y,S=isNaN(S)||S<0?0:S,v=isNaN(v)||v<0?0:v,b=isNaN(b)||b<0?0:b;var F=a.ClientUtil.getNetQuality(m,y,S),W=a.ClientUtil.getNetQuality(m,v,b);_.audioQuality=g>0?a.ClientUtil.quality2QualityGrade(W):0,_.videoQuality=g>0?a.ClientUtil.quality2QualityGrade(F):0,this.player.stateCenter.networkState!==n.ENUM_NETWORK_STATE.offline&&"disconnected"!==(null===(r=this.player.peerConnection)||void 0===r?void 0:r.connectionState)||(_.videoQuality=n.QualityGrade.Die,_.audioQuality=n.QualityGrade.Die);var Y=Math.min(F,W);this.netQuality=Y,_.peerToPeerDelay=isNaN(this.p2pNetStats.p2pRTT)?0:parseInt((this.p2pNetStats.p2pRTT/2+this.lastPlayStats.googCurrentDelayMs).toString()),_.peerToPeerPacketLostRate=this.p2pNetStats.p2pLostRate,Y<=n.QUALITY_CONSTANT.MiddleMinQuality?this.poorQualityNum++:this.poorQualityNum=0,Y<=this.player.streamCenter.l3BadQualityScore&&this.player.streamCenter.handleQualityBad(this.streamId,this.player.resourceMode,n.PlayMode.L3)?this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+"check cdn mode"):g>0&&this.poorQualityNum>=(null===(u=null===(o=this.player)||void 0===o?void 0:o.streamCenter)||void 0===u?void 0:u.probeStartedNum)&&I>this.probeTime+this.probeInterval&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" netQuality "+Y+" start net probe"),this.probeState=n.ENUM_PROBE_STATE.tryProbe,this.player.poorQualityRetryCnt++,this.player.streamCenter.startNetProbe(!1,this.player,this.player.gwNodeList),this.probeTime=I),Y>this.player.streamCenter.l3BadQualityScore&&(this.player.streamCenter.playerList[this.streamId].qualityBadCount=0,this.player.streamCenter.l3ProtocolBadTimestamp=0,this.player.streamCenter.lastHandleL3BadTimestamp=0),this.playStat=_,this.uploadPlayQuality(_,I),this.updateCurrentQualityStats(_),0!=g&&this.player.onPlayQualityUpdate(this.streamId,this.currentQuality)}}},e.prototype.updateCurrentQualityStats=function(e){var t=e.videoBitrate,r=e.videoFPS,n=e.videoTransferFPS,i=e.frameHeight,s=e.frameWidth,a=e.videoMuteState,c=e.videoQuality,u=e.videoFramesDecoded,l=e.videoFramesDropped,d=e.videoPacketsLost,h=e.videoPacketsLostRate,p=e.audioBitrate,f=e.audioCodec,_=e.audioMuteState,g=e.audioQuality,m=e.audioFPS,v=e.audioJitter,y=e.audioLevel,b=e.audioPacketsLost,S=e.audioPacketsLostRate,E=e.audioSamplingRate,T=e.audioSendLevel,w=e.nackCount,C=e.pliCount,I=e.totalRoundTripTime,O=e.currentRoundTripTime,k=e.peerToPeerDelay,R=e.peerToPeerPacketLostRate,A=e.sampleTimeWindow,P={video:o(o({},this.currentQuality.video),{videoBitrate:t,videoFPS:r,videoTransferFPS:n,frameHeight:i,frameWidth:s,videoQuality:c,videoFramesDecoded:u,videoFramesDropped:l,videoPacketsLost:d,videoPacketsLostRate:h,muteState:a,videoCumulativeDecodeTime:this.videoReliableBreak.decodeDuration,videoCumulativeBreakTime:this.videoReliableBreak.breakDuration,videoCumulativeBreakRate:this.videoReliableBreak.breakDuration/(this.videoReliableBreak.decodeDuration+this.videoReliableBreak.breakDuration||1)}),audio:o(o({},this.currentQuality.audio),{audioBitrate:p,audioCodec:f,audioQuality:g,audioFPS:m,audioJitter:v,audioLevel:y,audioPacketsLost:b,audioPacketsLostRate:S,audioSamplingRate:E,audioSendLevel:T,muteState:_,audioCumulativeDecodeTime:this.audioReliableBreak.decodeDuration,audioCumulativeBreakTime:this.audioReliableBreak.breakDuration,audioCumulativeBreakRate:this.audioReliableBreak.breakDuration/(this.audioReliableBreak.decodeDuration+this.audioReliableBreak.breakDuration||1)}),nackCount:w,pliCount:C,totalRoundTripTime:I,currentRoundTripTime:O,peerToPeerDelay:k,peerToPeerPacketLostRate:(R||0)/255,sampleTimeWindow:A};if(void 0!==e.muted){var L=e.paused,N=e.volume,D=e.sinkId;P.muted=e.muted,P.paused=L,P.volume=N,P.sinkId=D}if(void 0!==e.videoCodecName){var M=e.audioCodecName,x=e.codecImplementationName,B=e.googAvailableSendBandwidth;P.video.googCodecName=e.videoCodecName,P.audio.googCodecName=M,P.codecImplementationName=x,P.googAvailableSendBandwidth=B}this.currentQuality=P},e.prototype.uploadPlayQuality=function(e,t){var r,o;if(this.qualityUpload&&this.player.signal.isServerConnected){var n=t;if(0==this.qualityUploadLastTime||n-this.qualityUploadLastTime>=2e3){if(e.stream_type="play",e.stream_id=this.streamId,e.timeStamp=parseInt((n/1e3).toString()),e.video_break_duration=this.videoBreakReport.breakDuration,e.video_break_cancel_duration=this.videoBreakReport.breakCancelDuration,e.video_decode_time=this.videoBreakReport.decodeTime,this.videoBreakReport.breakCancelDuration=0,this.videoBreakReport.breakDuration=0,this.videoBreakReport.decodeTime=0,e.audio_break_duration=this.audioBreakReport.breakDuration,e.audio_break_cancel_duration=this.audioBreakReport.breakCancelDuration,e.audio_decode_time=this.audioBreakReport.decodeTime,this.audioBreakReport.breakCancelDuration=0,this.audioBreakReport.breakDuration=0,this.audioBreakReport.decodeTime=0,e.real_sampling_interval=n-this.lastSampleTime,!e.frameHeight||!e.frameWidth)for(var s=document.querySelectorAll("video"),a=0;a<s.length;a++){var c=s[a],u=null===(r=c.srcObject)||void 0===r?void 0:r.getVideoTracks()[0];if(u&&u==(null===(o=this.player.playStream)||void 0===o?void 0:o.getVideoTracks()[0])){e.frameHeight=c.videoHeight||0,e.frameWidth=c.videoWidth||0;break}}this.lastSampleTime=n,this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.player.streamCenter.updateQuality(1,e),this.qualityUploadLastTime=n}}},e.prototype.getP2PNetStats=function(){var e=this;this.player.signal.getP2PNetStats((0,n.getSeq)(),this.sessionId,this.peerID,(function(t,r,o){var n=o.p2p_rtt;e.p2pNetStats.p2pLostRate=o.p2p_lost_rate||0,e.p2pNetStats.p2pRTT=n||0}),(function(e){}))},e.prototype.setPlayQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" startTimer"),this.clearPlayQualityTimer(),this.getP2PNetStats(),this.qualityTimer=setInterval((function(){e.sampleTimes++;var t=e.player.peerConnection;if(t){var r=[t.getStats(null)];"chrome"==e.player.stateCenter.browser&&r.push(new Promise((function(e,r){t.getStats((function(t){return e(t)}),(function(e){return r(e)}))}))),Promise.all(r).then((function(t){e.getPlayStats(t[0],t[1])})).catch((function(t){e.logger.error(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+e.streamId+" getStats error "+t.toString())}))}}),1e3),this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0})},e.prototype.clearPlayQualityTimer=function(){if(null!=this.qualityTimer){clearInterval(this.qualityTimer),this.qualityTimer=null;var e=(new Date).getTime();this.lastSampleTime=0,this.sampleTimes=0,this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},(0,c.calculateCumulativeDuration)(this.videoBreak,this.videoBreakReport,this.videoReliableBreak,this.videoBreakThreshold,0===this.player.cameraStatus&&this.player.playMediaStatus.video,e),(0,c.calculateCumulativeDuration)(this.audioBreak,this.audioBreakReport,this.audioReliableBreak,this.audioBreakThreshold,0===this.player.micStatus&&this.player.playMediaStatus.audio,e,"audio")}this.poorQualityNum=0,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesDropped:0,framesReceived:0,audioBitrate:0}},e.prototype.startProbeTimeout=function(){var e=this;this.probeTimer=setTimeout((function(){e.logger.error(i.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" probe timeout"),e.player.playStateUpdateError(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kProbeTimeOutError)}),this.probeTimeoutInterval)},e.prototype.stopProbeTimeout=function(){this.probeTimer&&(clearTimeout(this.probeTimer),this.probeTimer=null)},e}();t.PlayStreamQuality=u},3849:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPlayWeb=void 0;var s=r(6706),a=r(4767),c=r(3409),u=r(608),l=r(3529),d=r(1089),h=r(5634),p=r(7646),f=r(1358),_=r(9307),g=r(569),m=r(8011),v=r(6454),y=l.ZegoRTCLogEvent.kZegoTaskPlayStart,b=l.ZegoRTCLogEvent.kZegoTaskSDKPlayStream,S=l.ZegoRTCLogEvent.kZegoStartPlay,E=function(){function e(e,t,r,o,n,i,a,u){var l=this;this.curCBState={state:"NO_PLAY",code:0},this._state=s.ENUM_PLAY_STATE.stop,this.lastState=s.ENUM_PLAY_STATE.stop,this.candidateInfo=[],this.broadcasterStatus=s.ENUM_BROADCASTER_STATUS.stop,this.isExternal=!1,this.playQualityList=[],this.maxQualityListCount=10,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,s.getSeq)(),this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.playStateCount=0,this.isRePlay=!1,this.videoSizeCallback=!1,this.remoteStream=null,this.playStream=null,this.rtcViewer=null,this.playOption={},this.playMediaStatus={video:!0,audio:!0},this.closeSessionSignal=!1,this.stateNego=s.ENUM_PLAY_STATE_NEGO.stop,this.negoTimer=null,this.negoInterval=25e3,this.cameraStatus=0,this.micStatus=0,this.hasSentStreamStatus=!1,this.playEvent=!1,this.gotStreamStatus=!1,this.soundLevel=0,this.mic=null,this.beginTime=0,this.firstFrameTime=0,this.resourceMode=0,this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.isPeer=!1,this.peerFailCount=0,this.isProbe=!1,this.peerID=0,this.isRecvClientInfo=!1,this.videoCodec="",this.videoCodecTimes=0,this.answerSdpTime=0,this.streamConnectIP="",this.initPoster="",this.initVideoStyle="",this.firstPlay=!0,this.isProbeByDG=!1,this.useResourceTypes=[],this.tryidx=0,this._CDNPlayerClone=null,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.rtcPlayCount=0,this.signalTime=0,this.stopReason="",this.audioMuteState="0",this.videoMuteState="0",this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.onDataChannelList=[],this.sideMediaConfig={isSEIStart:!1,unregisterSeiFilter:"",filterSize:0},this.cachedGwNodesMode=c.CachedNodesUseMode.DiffReUse,this.iceDisconnectedMaxTime=15e3,this._turnToTcp=!1,this.decodeVideoFrame=function(e,t){if("VP8"===l.videoCodec)t.terminate();else{for(var r=new DataView(e.data),o=0,n=new p.H264Parser(r),i=0,s=!1;n.NextNalu(s);)if(7!=(i=31&r.getUint8(n.nalu_start+n.start_code_size))&&8!=i&&9!=i){if(o=n.nalu_start+n.start_code_size+1,6!=i)break;s=!0;for(var a=0;255===r.getUint8(o);)a+=255,o++;if(243===(a+=r.getUint8(o++))||5===a||100===a){for(var c=0;255===r.getUint8(o);)c+=255,o++;if(c+=r.getUint8(o++),e.data.byteLength-o<c)break;var u=new Uint8Array(4+c);switch(u[0]=0,u[1]=0,a){case 100:u[2]=3,u[3]=235;break;case 5:u[2]=3,u[3]=236;break;case 243:u[2]=3,u[3]=237}for(var d=[],h=o;h<o+c;)0!==r.getInt8(h)||0!==r.getInt8(h+1)||3!==r.getInt8(h+2)||0!==r.getInt8(h+3)&&1!==r.getInt8(h+3)&&2!==r.getInt8(h+3)&&3!==r.getInt8(h+3)?h++:(d.push(h+2),h+=4);for(var _=0,g=0;g<c+d.length;g++)d.includes(o)?(o++,_++):u[4+g-_]=r.getUint8(o++);var m=!1;if(243===a)m=!0;else if(5===a&&l.sideMediaConfig.unregisterSeiFilter){var v=u.slice(4,4+l.sideMediaConfig.filterSize);f.WebRTCUtil.decodeString(v)===l.sideMediaConfig.unregisterSeiFilter&&(m=!0)}m&&l.stateCenter.actionListener("playerRecvSEI",l.streamId,u)}}t.enqueue(e)}},this.decodeAudioFrame=function(e,t){t.enqueue(e)},this.soundMeterWorklet=null,this.streamId=e,this.logger=t,this.signal=r,this.dataReport=o,this.streamCenter=i,this.ac=a,this.stateCenter=u,this.qualityHandler=new h.PlayStreamQuality(n,this,this.logger,this.dataReport,this.stateCenter),this.resourceMode=this.stateCenter.settingConfig.getSetting("resource_mode"),this.initStreamReport()}return e.prototype.updateCBState=function(e){var t=this,r=Object.keys(e).some((function(r){return e[r]!==t.curCBState[r]}));return r&&(this.curCBState=e),r},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this.lastState=this._state,this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(e){this.qualityHandler.probeState=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netQuality",{get:function(){return this.qualityHandler.netQuality},set:function(e){this.qualityHandler.netQuality=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPlayStats",{get:function(){return this.qualityHandler.lastPlayStats},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceStateDisConnect",{get:function(){return[s.ENUM_PLAY_STATE_NEGO.iceClosed,s.ENUM_PLAY_STATE_NEGO.iceDisconnected,s.ENUM_PLAY_STATE_NEGO.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLastConnected",{get:function(){return this.lastState===s.ENUM_PLAY_STATE.playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playStat",{get:function(){return this.qualityHandler.playStat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ip",{get:function(){var e,t;return null===(t=null===(e=this.gwNode)||void 0===e?void 0:e.split(":"))||void 0===t?void 0:t[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":"udp"},enumerable:!1,configurable:!0}),e.prototype.netProbeToReDispatch=function(){this.playStateUpdateError(y.error.kPlayNetProbePoor)},e.prototype.initStreamReport=function(){this.reportSpan=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.I,{key:l.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:b.event,par:this.streamId},b.event,!0),this.reportBeginTime=(new Date).getTime()},e.prototype.startPlay=function(e,t,r){var o,n,i,a,c,h,p,_,g,m=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" called ",e),this.playEvent=!1,this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){if(this.getRemoteStreamSuc=t,this.playOption=r||{},this.playMediaStatus={video:void 0===this.playOption.video||!!this.playOption.video,audio:void 0===this.playOption.audio||!!this.playOption.audio},r&&r.videoCodec&&(this.playOption.videoCodec=r.videoCodec),"boolean"==typeof(null==r?void 0:r.isSEIStart)&&(this.sideMediaConfig.isSEIStart=null==r?void 0:r.isSEIStart),this.sideMediaConfig.isSEIStart){var v=u.ClientUtil.isSupportEncodedTransforms();((null===(o=this.playOption)||void 0===o?void 0:o.videoCodec)&&"H264"!==(null===(n=this.playOption)||void 0===n?void 0:n.videoCodec)||!v)&&(this.sideMediaConfig.isSEIStart=!1)}(null===(i=this.stateCenter.seiConfig)||void 0===i?void 0:i.unregisterSEIFilter)&&(this.sideMediaConfig.unregisterSeiFilter=null===(a=this.stateCenter.seiConfig)||void 0===a?void 0:a.unregisterSEIFilter,this.sideMediaConfig.filterSize=f.WebRTCUtil.encodeString(this.sideMediaConfig.unregisterSeiFilter).byteLength),null==(null==r?void 0:r.streamType)&&void 0!==this.stateCenter.streamType&&(this.playOption.streamType=this.stateCenter.streamType),this.stateCenter.reporter.spanSetAttributes({key:y.event,par:e},{video_layer:y.video_layer(2===this.playOption.streamType?-1:this.playOption.streamType||1)});var E=this.stateCenter.settingConfig.getSetting("play_video_codec",!0);E&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting play_video_codec "+E),this.playOption.videoCodec=E);var T=(null===(c=this.playOption)||void 0===c?void 0:c.resourceMode)==s.ResourceMode.DG?1:0;this.stateCenter.reporter.spanSetAttributes({key:(this.isRePlay?l.ZegoRTCLogEvent.kZegoRePlay:S).event,par:this.streamId},{is_peer:S.is_peer(this.isPeer)}),this.stateCenter.reporter.spanSetAttributes({key:y.event,par:this.streamId},{audio_activate:y.audio_activate(1==this.playOption.audio||0!=this.playOption.audio),video_activate:y.video_activate(1==this.playOption.video||0!=this.playOption.video),biz_product:y.biz_product(T)}),this.reportSpan.setAttributes({room_id:b.room_id(null===(p=null===(h=this.streamCenter.playerList[this.streamId])||void 0===h?void 0:h.room)||void 0===p?void 0:p.roomID),room_sid_string:b.room_sid_string(null===(g=null===(_=this.streamCenter.playerList[this.streamId])||void 0===_?void 0:_.room)||void 0===g?void 0:g.roomSessionID)}),this.isPeer?this.createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.createSession(),this.negoTimer=setTimeout((function(){m.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" waiting timeout"),m.playStateUpdateError(y.error.kPlayNegoTimeoutError)}),this.negoInterval),this.isProbe&&this.qualityHandler.startProbeTimeout()}else this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" streamId is null")},e.prototype.onCreatePlaySessionSuccess=function(e){var t=this,r=d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS;this.logger.info(r+" "+this.streamId+" success");var o=[];if(e.turn_server){var n=e.turn_server.split(";");this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var i=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(i)&&(this.streamCenter.maxUdpFailNum=i);var s=this.streamCenter,a=s.autoSwitchProtocol,c=s.maxUdpFailNum,u=s.udpFailNum;this.logger.info(r+"  autoToTcp: ".concat(a,", udpFailNum: ").concat(u,", maxUdpFailNum: ").concat(c,".")),a&&!this._turnToTcp&&u>=c&&(this.logger.info(r+" switch to tcp."),this._turnToTcp=!0);var l=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);l&&(this.logger.info(r+" setting udp_or_tcp "+l),this._turnToTcp="tcp"===l);var h,p=n.filter((function(e){return e.indexOf("udp")>-1})),f=n.filter((function(e){return e.indexOf("tcp")>-1}));h=this._turnToTcp?f.length>0?f:p.map((function(e){return e.replace("udp","tcp")})):p,this.logger.info(r+" over tcp "+JSON.stringify(h)),o.push.apply(o,h)}e.stun_server&&o.push(e.stun_server);var _={iceTransportPolicy:"all",iceServers:[{urls:o,username:e.turn_username,credential:e.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart};this.logger.info(r+" "+this.streamId+" username: "+e.turn_username),this.logger.info(r+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(_);var g=performance.now();this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,r,o){t.onRecvMediaDesc(e,r,o)})),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,r,o){t.onRecvCandidateInfo(e,r,o)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,o,n){if(g){var i=(performance.now()-g).toFixed(0);g=void 0,t.logger.info(r+" ".concat(t.streamId,", cmd: CloseSessionPush, cost_time: ").concat(i))}t.onRecvCloseSession(e,o,n)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,r,o){t.onRecvResetSession(e,r,o)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,r,o){t.gotStreamStatus=!0,t.streamStatus=o,t.playStream&&t.onRecvStreamStatus(o)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,o,n){if(g){var i=(performance.now()-g).toFixed(0);t.logger.info(r+" ".concat(t.streamId,", cmd: PlayEventPush, cost_time: ").concat(i))}t.onRecvPlayEvent(e,o,n)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,r,o){t.onRecvClientInfo(e,r,o)})),this.logger.info(r+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t=this,r=d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){t.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){t.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){t.onIceConnectionStateChange(e)},this.peerConnection.ontrack=function(e){t.onGotRemoteStream(e.streams[0],e.receiver)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){t.logger.info(r+" "+t.streamId+" data channel open")},this.dataChannel.onmessage=function(e){if(t.logger.info(r+" "+t.streamId+" data channel onmessage"),e.data instanceof Blob){var o=new FileReader,n={};o.readAsArrayBuffer(e.data),o.onload=function(){n.data=o.result,t.onReceivedDataChannel(n)}}else t.onReceivedDataChannel(e)});var o={offerToReceiveAudio:1,offerToReceiveVideo:1};this.playOption&&!1===this.playOption.video&&(o.offerToReceiveVideo=0),this.playOption&&!1===this.playOption.audio&&(o.offerToReceiveAudio=0),this.logger.info(r+" "+this.streamId+" createOffer: "+JSON.stringify(o));var n=this.getSpan(l.ZegoRTCLogEvent.kZegoPlayCreateOffer.event,this.parentSpanKey);this.peerConnection.createOffer(o).then((function(e){n&&(n.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPlayCreateOffer.sdp(e.sdp)}),n.end()),t.onCreateOfferSuccess(e)}),(function(e){t.logger.error(r+" "+t.streamId+" create offer error "+e.toString()),n&&t.stateCenter.reporter.setError(n,{code:l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCreateOfferError.code,message:e.toString()}),t.playStateUpdateError(y.error.kCreateOfferError,!0)}))},e.prototype.createSession=function(e){var t,r,o,n=this;this.sessionSeq=(0,s.getSeq)();var i=this.streamId;1==this.streamCenter.testEnvironment&&(i="zegotest-"+this.streamCenter.appid+"-"+this.streamId),this.streamCenter.gwNode&&(this.gwNode=this.streamCenter.gwNode);var a=this.stateCenter.settingConfig.getSetting("gw_nodes");a&&a instanceof Array&&a.length>0&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting "+JSON.stringify(a)),this.gwNodeList=a,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var c=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);c&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+c),this._turnToTcp="tcp"===c),this._turnToTcp&&(this.isPeer=!1);var u="",h=[];this.stateCenter.idName&&h.push("zguid="+this.stateCenter.idName);var p=(null===(r=null===(t=this.streamCenter.publisherList[this.streamId])||void 0===t?void 0:t.room)||void 0===r?void 0:r.roomID)||(null===(o=this.stateCenter.roomList[0])||void 0===o?void 0:o.roomID);p&&h.push("zgrid="+p);var f=l.ZegoRTCLogEvent.kZegoPlayCreateSession;if(this.isPeer){var _=this.getSpan(l.ZegoRTCLogEvent.kZegoPlayCreateSession.event,this.parentSpanKey),g=this.stateCenter.settingConfig.getSetting("l3_play_buffer_ms"),m=(new Date).getTime();"number"==typeof this.playOption.streamType&&h.push("video_stream_type="+this.playOption.streamType),h.length>0&&(u=h.join("&")),this.signal.createSessionWithSdp({seq:this.sessionSeq,type:this.isProbe?2:1,mode:0,streamId:i,strAuthParam:this.playOption&&this.playOption.streamParams||"",sdp:e.sdp,serverHost:this.gwNode,playBufLevel:[s.ResourceMode.L3,s.ResourceMode.DG].includes(this.resourceMode)?g:void 0,params:u},(function(e,t,r){var o=(new Date).getTime();n.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" create session time "+(o-m)),_&&(_.setAttributes({webrtc_sid:t,sdp:f.sdp(r.sdp),gw_nodes:f.gw_nodes(r.gw_nodes),gw_nodes_ttl:f.gw_nodes(r.gw_nodes_ttl),gw_version:f.gw_version(r.gw_version)}),_.end()),n.stateNego!==s.ENUM_PLAY_STATE_NEGO.iceConnected&&n.getSpan(l.ZegoRTCLogEvent.kZegoPlayIceConnected.event,n.parentSpanKey,"",!0),n.stateCenter.reporter.spanSetAttributes({key:y.event,par:n.streamId},{gw_version:y.gw_version(r.gw_version)}),n.handleCreateSessionWithSdpResp(e,t,r)}),(function(e,t){if(n.sessionSeq==t){var r=e==s.SEND_MSG_TIMEOUT?y.error.kSessionTimeoutError:y.error.kSessionRequestError;_&&(_.setAttributes({try_cnt:n.peerFailCount}),n.stateCenter.reporter.setError(_,r)),n.playStateUpdateError(r)}else n.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")}))}else{var v=this.getSpan(l.ZegoRTCLogEvent.kZegoPlayCreateSession.event,this.parentSpanKey);h.length>0&&(u=h.join("&")),this.signal.createSession(this.sessionSeq,1,0,i,this.playOption&&this.playOption.streamParams,this.gwNode,u,(function(e,t,r){v&&(v.setAttributes({webrtc_sid:l.ZegoRTCLogEvent.kZegoPlayCreateSession.webrtc_sid(t),sdp:f.sdp(r.sdp),gw_nodes:f.gw_nodes(r.gw_nodes),gw_nodes_ttl:f.gw_nodes(r.gw_nodes_ttl),gw_version:f.gw_version(r.gw_version)}),v.end(),n.stateCenter.reporter.spanSetAttributes({key:y.event,par:n.streamId},{gw_version:y.gw_version(r.gw_version)})),n.handleCreateSessionResp(e,t,r)}),(function(e,t){if(n.sessionSeq==t){var r=e==s.SEND_MSG_TIMEOUT?y.error.kSessionTimeoutError:y.error.kSessionRequestError;v&&n.stateCenter.reporter.setError(v,r),n.playStateUpdateError(r)}else n.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")}))}this.state=s.ENUM_PLAY_STATE.waitingSessionRsp,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" called success"),this.stateNego=s.ENUM_PLAY_STATE_NEGO.start},e.prototype.setGwNodes=function(e,t){var r;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SET_GW_NODES+" "+this.streamId+" "+JSON.stringify(null==e?void 0:e.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),(null===(r=e.gw_nodes)||void 0===r?void 0:r.length)>0){var o=this.sortGwNodes(e.gw_nodes,this.retryFailGwNodes,t);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(o,e.gw_nodes_ttl)}},e.prototype.resetGwNodes=function(){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_RESET_GW_NODES+" "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},e.prototype.sortGwNodes=function(e,t,r){var o=JSON.parse(JSON.stringify(e));if(t.forEach((function(e){var t=o.indexOf(e);t>=0&&(o.splice(t,1),o.push(e))})),!r){var n=o.findIndex((function(t){return t===e[0]}));n>0&&(o.splice(n,1),o.unshift(e[0]))}return o},e.prototype.handleDispatchedGwNodes=function(e,t){if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_DISPATCHED_GW_NODES+" "+this.streamId+" "+JSON.stringify(e)),Array.isArray(e)){this.gwNodeList=e.length>0?e:this.gwNodeList,this.gwNode=e.length>0?this.gwNodeList[0]:this.gwNode;var r=0===t?60:t;this.gwNodesTTL=r?(new Date).getTime()+1e3*r:this.gwNodesTTL,e.length>0&&this.streamCenter.updateCachedGwNodesList(this,!1,e,r)}},e.prototype.handleCreateSessionResp=function(e,t,r){var o=r.turn_server,n=o.split("?")[0]&&o.split("?")[0].slice(5),i=this.streamCenter.server.split("?"),s=i[1]&&i[1].slice(2);if(this.stateCenter.reporter.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:r.session_id,url:"webrtc://".concat(n,"/").concat(s,"/").concat(this.streamId)}),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" sessionId:"+r.session_id),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var a=0,c=(new Date).getTime();this.reportBeginTime&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" "+this.streamId+" create signal time "+(a=c-this.reportBeginTime)),this.signalTime=a),this.answerSdpTime=c,0!==r.result?(this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" create error"),this.playStateUpdateError(y.error.kSessionRequestError)):(this.sessionId=r.session_id,this.sessionToken=r.session_token,this.setGwNodes(r,!1),this.onCreatePlaySessionSuccess(r))}else this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,r){var o=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" sessionId:"+t),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var n=0,i=(new Date).getTime();if(this.reportBeginTime&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" "+this.streamId+" create signal time "+(n=i-this.reportBeginTime)),this.signalTime=n),this.answerSdpTime=i,0!==r.result){if(this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session failed "+r.result),this.stateCenter.useNetAgent&&1004===(null==r?void 0:r.result))return void this.playStateUpdateError(y.error.kPlayStreamNotFound,!0);this.playStateUpdateError(y.error.kSessionRequestError)}else{this.sessionId=t,this.sessionToken=r.session_token,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session success ",this.streamId),this.setGwNodes(r,!1);var s=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,r){if(s){var n=(performance.now()-s).toFixed(0);s=void 0,o.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" ".concat(o.streamId,", cmd: CloseSessionPush, cost_time: ").concat(n))}o.onRecvCloseSession(e,t,r)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,r){o.onRecvResetSession(e,t,r)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,t,r){o.gotStreamStatus=!0,o.streamStatus=r,o.playStream&&o.onRecvStreamStatus(r)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,t,r){if(s){var n=(performance.now()-s).toFixed(0);s=void 0,o.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" ".concat(o.streamId,", cmd: PlayEventPush, cost_time: ").concat(n))}o.onRecvPlayEvent(e,t,r)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,r){o.onRecvClientInfo(e,t,r)})),this.signal.registerPushCallback("NetQualityProbeRsp",this.sessionId,(function(e,t,r){o.onRecvPlayEvent(e,t,r)})),this.signal.registerPushCallback("NetQualityInfoPush",this.sessionId,(function(e,t,r){o.onRecvNetQualityInfo(e,t,r)})),this.onGetRemoteOfferSuccess(r.sdp)}}else this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" seq is not match.")},e.prototype.onCreateOfferSuccess=function(e){var t=this;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),e.sdp=e.sdp.replace(/sendrecv/g,"recvonly"),e.sdp=e.sdp.replace(/useinbandfec=/,"stereo=1;useinbandfec=");var r=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(r){var o=r.replace(/recvonly/,"sendrecv");e.sdp=e.sdp.replace(r,o)}e.sdp=(0,g.addSPSDescription)(e.sdp),e.sdp=(0,g.addRRTRLine)(e.sdp),this.playOption.videoCodec&&(e.sdp=a.SdpUtil.getSDPByVideDecodeType(e.sdp,this.playOption.videoCodec));var n=this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.event,this.parentSpanKey);n&&n.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.sdp(e.sdp)}),this.peerConnection.setLocalDescription(e).then((function(){n&&n.end(),t.onSetLocalDescriptionSuccess(e)}),(function(e){t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+t.streamId+" set error "+e.toString()),n&&t.stateCenter.reporter.setError(n,{code:l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetLocalDescError.code,message:e.toString()}),t.playStateUpdateError(y.error.kSetLocalDescError,!0)}))},e.prototype.onSetLocalDescriptionSuccess=function(e){var t=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),this.isPeer)this.createSession(e);else{var r={sdp:e.sdp};2==this.resourceMode&&(r.min_play_buf_level_ms=500),this.answerSeq=(0,s.getSeq)();var o=this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.event,this.parentSpanKey);this.signal.sendMediaDesc(this.answerSeq,this.sessionId,0,r,(function(e,n,i){t.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" sendMediaDesc resp"),o&&(o.setAttributes({webrtc_sid:l.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.webrtc_sid(n),sdp:r.sdp}),o.end()),t.answerSeq==e&&t.sessionId==n?(t.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" send success stateNego:waiterAnswer"),t.stateNego=s.ENUM_PLAY_STATE_NEGO.waiterAnswer,t.state=s.ENUM_PLAY_STATE.waitingServerAnswer):t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" seq or sessionId is not equal "+t.answerSeq+" "+e,0+t.sessionId+" "+n)}),(function(e,r){t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" failed to send "+e),o&&t.stateCenter.reporter.setError(o,{code:l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaDescError.code,message:e.toString()}),t.playStateUpdateError(y.error.kMediaDescError)})),this.state=s.ENUM_PLAY_STATE.waitingOfferRsp}},e.prototype.onRecvMediaDesc=function(e,t,r){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received ",r);var o=this.getSpan(l.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.event,this.parentSpanKey);o&&(o.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.sdp(r.sdp)}),o.end()),this.stateNego=s.ENUM_PLAY_STATE_NEGO.waitingCandidate,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.state===s.ENUM_PLAY_STATE.waitingServerAnswer?(this.signal.sendMediaDescAck(e,this.sessionId,0),this.onGetRemoteOfferSuccess(r.sdp)):this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,r=this,o={type:"answer",sdp:e,toJSON:function(){}},n=this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.event,this.parentSpanKey);this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var i=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(i)&&(this.streamCenter.maxUdpFailNum=i);var a=this.streamCenter,c=a.autoSwitchProtocol,u=a.maxUdpFailNum,h=a.udpFailNum;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+"  autoToTcp: ".concat(c,", udpFailNum: ").concat(h,", maxUdpFailNum: ").concat(u,".")),c&&!this._turnToTcp&&h>=u&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" switch to tcp."),this._turnToTcp=!0);var p=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);p&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+p),this._turnToTcp="tcp"===p),this._turnToTcp&&(null===(t=o.sdp.match(/candidate.*/g))||void 0===t||t.forEach((function(e){var t=e.replace(/udp/,"tcp");t.includes(" tcptype ")||(t=t.replace(" typ host "," typ host tcptype passive ")),o.sdp=o.sdp.replace(e,t)}))),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" remoteSdp ",o.sdp),n&&n.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.sdp(o.sdp),webrtc_sid:l.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.webrtc_sid(this.sessionId)}),this.peerConnection.setRemoteDescription(new RTCSessionDescription(o)).then((function(){n&&n.end(),r.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+r.streamId+" set success")}),(function(e){r.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+r.streamId+" set remote error "+e.toString()),n&&(n.setAttributes({error:l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetRemoteDescError.code,message:e.toString()}),n.end()),r.playStateUpdateError(y.error.kSetRemoteDescError,!0)})),this.state=s.ENUM_PLAY_STATE.waitingServerICE,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" call success")},e.prototype.onRecvCandidateInfo=function(e,t,r){var o=this;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received ");var n=this.getSpan(l.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.event,this.parentSpanKey);if(n&&(n.setAttributes({candidate_info:l.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.candidate_info(r.infos)}),n.end()),this.state==s.ENUM_PLAY_STATE.waitingServerICE){this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var i=0;i<r.infos.length;i++){var a={sdpMid:r.infos[i].sdpMid,sdpMLineIndex:r.infos[i].sdpMLineIndex,candidate:r.infos[i].candidate};this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" candidate "+a.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(a)).then((function(){o.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+o.streamId+" add success")}),(function(e){o.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+o.streamId+" add error "+e.toString()),o.playStateUpdateError(y.error.kCandidateError,!0)}))}this.state=s.ENUM_PLAY_STATE.connecting;var c=this.getSpan(l.ZegoRTCLogEvent.kZegoPlayIceConnected.event,this.parentSpanKey,"",!0);null==c||c.setAttributes({webrtc_sid:this.sessionId}),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" call success")}else this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvPlayEvent=function(e,t,r){if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" received"),!this.isProbe){var o=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},l.ZegoRTCLogEvent.kZegoRTCPlayEvent.event);o.setAttributes({event_state:l.ZegoRTCLogEvent.kZegoRTCPlayEvent.event_state(r.event),webrtc_sid:t}),o.end()}if(!0===this.playEvent&&0==r.event){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" retry: "+this.streamId);var n=this.streamId,i=this.playOption;this.signal.sendCloseSession((0,s.getSeq)(),this.sessionId,1),this.resetPlay(),this.startPlay(n,this.getRemoteStreamSuc,i)}else this.playEvent=!0},e.prototype.onRecvClientInfo=function(e,t,r){this.stateCenter.clientIP!==r.clientip&&this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+r.clientip),this.stateCenter.clientIP=r.clientip,this.peerID=r.peer_id,this.streamConnectIP=r.clientip,this.stateCenter.isMultiOuter=this.isMultiOuter(),this.isProbe&&this.stateNego==s.ENUM_PLAY_STATE_NEGO.iceConnected&&this.signal.sendNetProbe((0,s.getSeq)(),this.sessionId,this.peerID,(function(){}),(function(){})),this.isRecvClientInfo=!0},e.prototype.onRecvNetQualityInfo=function(e,t,r){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" call"),this.qualityHandler.stopProbeTimeout();var o=0,n=r.lossrate,i=r.rtt;(this.peerID!==r.peer_id&&!this.isProbeByDG||null==typeof n||null==typeof i)&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" local peerID:"+this.peerID+" remote peerID:"+r.peer_id+" lossrate:"+n+" rtt:"+i),o=1),this.signal.sendNetQualityInfoPushAck((0,s.getSeq)(),this.sessionId,this.peerID,o),0==o&&"number"==typeof n&&"number"==typeof i?(this.isProbeByDG=!1,this.onCalNetQualityResult(0,u.ClientUtil.getNetQuality(i,n))):this.onCalNetQualityResult(1)},e.prototype.onIceCandidate=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" called"),null!=e.candidate&&(this.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate "+e.candidate.candidate),this.state<s.ENUM_PLAY_STATE.connecting||this.state==s.ENUM_PLAY_STATE.stop?(this.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" cached"),this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex})):(this.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" send"),this.sendCandidateInfo([{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}])))},e.prototype.onConnectionStateChange=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState),this.state!=s.ENUM_PLAY_STATE.stop&&null!=this.peerConnection&&"closed"===e.target.signalingState&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState))},e.prototype.onIceConnectionStateChange=function(e){var t,r,o=this;if(this.state!=s.ENUM_PLAY_STATE.stop&&null!=this.peerConnection){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState);var n=this.getSpan(l.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event,this.parentSpanKey,l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event);if(n&&n.setAttributes({ice_state:l.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState)}),"connected"===this.peerConnection.iceConnectionState){if(this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceConnected,this.isProbe&&this.isPeer&&(this.isRecvClientInfo||this.isProbeByDG))return this.signal.sendNetProbe((0,s.getSeq)(),this.sessionId,this.peerID,(function(){}),(function(){})),void(null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null));if(null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),!this.isProbe&&this.reportBeginTime){var i=(new Date).getTime()-this.reportBeginTime;this.reportSpan.setAttributes({play_begin_time:b.play_begin_time(i)}),this.reportBeginTime=0}if(this.stateCenter.reporter.spanEnd({key:l.ZegoRTCLogEvent.kZegoPlayIceConnected.event,par:this.streamId},{webrtc_sid:this.sessionId}),this.answerSdpTime){var a=(new Date).getTime()-this.answerSdpTime;this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" ice time "+a)}this.isProbe||this.state==s.ENUM_PLAY_STATE.playing||(this.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.getRemoteStreamSuc&&this.getRemoteStreamSuc(this.playOption.resourceMode==s.ResourceMode.DG&&this.firstPlay?null:this.playStream)),this.state=s.ENUM_PLAY_STATE.playing;var c=this.isRePlay?l.ZegoRTCLogEvent.kZegoRePlay:S;for(var h in this.stateCenter.reporter.spanEnd({key:c.event,par:this.streamId},{signal_consume:S.signal_consume(this.signalTime),is_peer:S.is_peer(this.isPeer)}),this.playStateCount++,this.continuousFailCnt=0,this.reportPlayStateTime=Date.now(),this.streamCenter.publisherList)if(this.streamCenter.publisherList[h].publisher.state==s.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==s.ENUM_BROADCASTER_STATUS.stop){this.signal&&this.signal.sendBroadcasterStatus((0,s.getSeq)(),this.sessionId,1),this.broadcasterStatus=s.ENUM_BROADCASTER_STATUS.start;break}if(!this.isProbe){this.qualityHandler.setPlayQualityTimer();var p=this.stateCenter.settingConfig.getSetting("probe_started_num");!isNaN(p)&&(this.streamCenter.probeStartedNum=p)}if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.isPeer&&(this.peerFailCount=0),0==this.firstFrameTime&&(this.firstFrameTime=(new Date).getTime()-this.beginTime,this.reportSpan.setAttributes({first_frame_time:b.first_frame_time(this.firstFrameTime),fft_video:b.fft_video(this.firstFrameTime),fft_audio:b.fft_audio(this.firstFrameTime),biz_product:l.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.biz_product((null===(t=this.playOption)||void 0===t?void 0:t.resourceMode)==s.ResourceMode.DG?1:0)}),this.stateCenter.reporter.spanSetAttributes({key:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{}),!this.isProbe)){var f=l.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame,_=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},f.event);_.setAttributes({webrtc_sid:f.webrtc_sid(this.sessionId),resource_type:f.resource_type((0,u.getPlaySourceType)(this.resourceMode)),fft_consumed:f.fft_consumed(this.firstFrameTime),protocol:f.protocol("webrtc"),biz_product:f.biz_product((null===(r=this.playOption)||void 0===r?void 0:r.resourceMode)==s.ResourceMode.DG?1:0)}),null==_||_.end()}this._turnToTcp||(this.streamCenter.udpFailNum=0)}else"closed"===this.peerConnection.iceConnectionState?(null==n||n.end(),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(null==n||n.end(),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceFailed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(null==n||n.end(),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceDisconnected,this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected"),this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){o.checkPlayConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime)))}},e.prototype.checkPlayConnectionFailedState=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+"  state "+this.state+" connectionState "+e),this.playStateUpdateError(y.error.kMediaConnectionError)},e.prototype.resetPlay=function(){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_RESET_PLAY+" "+this.streamId+" call"),this.state=s.ENUM_PLAY_STATE.stop,this.playEvent=!1,this.isRecvClientInfo=!1,null!=this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.stopVideocTimer(),this.qualityHandler.stopProbeTimeout(),this.qualityHandler.clearPlayQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PlayEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId),this.signal.unregisterPushCallback("NetQualityProbeRsp",this.sessionId),this.signal.unregisterPushCallback("NetQualityInfoPush",this.sessionId)),this.sessionSeq=0,this.answerSeq=0,this.videoSizeCallback=!1,this.stopSoundLevel()},e.prototype.onRecvResetSession=function(e,t,r){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" received ");var o=this.getSpan(l.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event,l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event);if(o&&o.end(),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var n=JSON.parse(JSON.stringify(y.error.kPlaySessionClosedError));this.negoTimer&&clearTimeout(this.negoTimer),this.playStateUpdateError(n)}else this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvCloseSession=function(e,t,r){var o=this;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(r)),this.stateCenter.reporter.spanSetAttributes({key:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{denied_info:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.denied_info(r.err_info),stop_reason:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(e,this.sessionId,0);var n=r.err_info?JSON.parse(r.err_info.toLowerCase()):{},i=n.action?n.action:null,s=1*r.reason,a=JSON.parse(JSON.stringify(1004===(null==n?void 0:n.err)?y.error.kPlayStreamNotFound:y.error.kPlaySessionClosedError));a.message+=" reason:".concat(s," ").concat(i?" action:"+i:""," ").concat((null==n?void 0:n.err)?" err:"+(null==n?void 0:n.err):""),a.message+=";".concat((0,v.translate)(s,i,null==n?void 0:n.err)),this.negoTimer&&clearTimeout(this.negoTimer);var c=!([4,8,10,11,12,14,24,26,27,28].includes(s)||[2,3,4,5,6].includes(i));1004===(null==n?void 0:n.err)&&(c=!0);var u=!1;if(!this._turnToTcp){if([8,10].includes(s)||[18,15].includes(s)&&2===i&&[3001,3002].includes(n.err)){this.streamCenter.udpFailNum++;var h=this.streamCenter;h.autoSwitchProtocol&&h.udpFailNum>=h.maxUdpFailNum&&(this.isPeer=!1,this.streamCenter.setIsPeer(!1),u=!0)}else this._turnToTcp||(this.streamCenter.udpFailNum=0);var p=this.gwNodeList.findIndex((function(e){return e==o.gwNode}))===this.gwNodeList.length-1,f=[3001,3002,3003,3004,3005,3006,3007,3008].includes(n.err);p&&f&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" switch tcp by all fail"),this.stateCenter.turnToTcp=!0)}this.playStateUpdateError(a,c,n,u)},e.prototype.onRecvStreamStatus=function(e,t){if(void 0===t&&(t=!1),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call"),this.logger.info("".concat(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS," ").concat(this.streamId," status camera_status: ").concat(e.camera_status," mic_status: ").concat(e.mic_status)),(!this.hasSentStreamStatus||this.cameraStatus!==e.camera_status)&&this.onRemoteCameraStatusUpdate(this.streamId,this.getCameraMicStatus(e.camera_status),e.camera_status),(!this.hasSentStreamStatus||this.micStatus!==e.mic_status)&&this.onRemoteMicStatusUpdate(this.streamId,this.getCameraMicStatus(e.mic_status),e.mic_status),this.hasSentStreamStatus=!0,this.cameraStatus=e.camera_status,this.micStatus=e.mic_status,this.videoMuteState=0===e.camera_status?"0":"1",this.audioMuteState=0===e.mic_status?"0":"1","boolean"==typeof this.playOption.video)this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" has set video option, ignore stream status");else{var r=this.playStream,o=this.rtcViewer;if(0!==e.camera_status&&20!==e.camera_status)r.getVideoTracks().forEach((function(e){e.enabled=!1,e.stop(),r.removeTrack(e),o&&o.setVideo(null)}));else if(0===r.getVideoTracks().length){var n=this.remoteStream.clone().getVideoTracks()[0];r.addTrack(n),o&&o.setVideo(n,"safari"===this.stateCenter.browser)}if("safari"===this.stateCenter.browser&&t)for(var i=document.querySelectorAll("video, audio"),s=0;s<i.length;s++){var a=i[s];a.srcObject===this.playStream&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" track changed. rerender stream"),a.srcObject=this.playStream)}}this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call success")},e.prototype.onGotRemoteStream=function(e,t){var r=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" called "+e),e){if(this.sideMediaConfig.isSEIStart&&"function"==typeof t.createEncodedStreams&&("video"===t.track.kind?this.createVideoReceiverTransform(t):"audio"===t.track.kind&&this.createAudioReceiverTransform(t)),this.playStream){this.playStream.getTracks().forEach((function(e){return r.playStream.removeTrack(e)}));var o=this.rtcViewer;e.clone().getTracks().forEach((function(e){return n(r,void 0,void 0,(function(){return i(this,(function(t){return this.playStream.addTrack(e),o&&o.setTrack("video"===e.kind,e,"safari"===this.stateCenter.browser),[2]}))}))}))}else this.playStream=e.clone();this.audioMuteState=this.playStream.getAudioTracks().length>0?"0":"1",this.videoMuteState=this.playStream.getVideoTracks().length>0?"0":"1",this.remoteStream=e,this.getVideoCodec(),this.gotStreamStatus&&this.onRecvStreamStatus(this.streamStatus,!0),this.streamCenter.soundLevelDelegate&&!this.isProbe&&this.startSoundLevel()}else this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" remote stream is empty")},e.prototype.createVideoReceiverTransform=function(e){var t=e.createEncodedStreams(),r=new TransformStream({transform:this.decodeVideoFrame});this.receiverStreams=t,t.readable.pipeThrough(r).pipeTo(t.writable)},e.prototype.createAudioReceiverTransform=function(e){var t=e.createEncodedStreams(),r=new TransformStream({transform:this.decodeAudioFrame});t.readable.pipeThrough(r).pipeTo(t.writable)},e.prototype.sendCandidateInfo=function(e){var t=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return!(e.candidate.indexOf("tcp")>0)&&(!!e.candidate||void 0)})))||e.length<1)this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled");else{var r=this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.event,this.parentSpanKey);r&&r.setAttributes({candidate_info:l.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.candidate_info(e)}),this.stateNego!==s.ENUM_PLAY_STATE_NEGO.iceConnected&&(this.stateNego=s.ENUM_PLAY_STATE_NEGO.sendCandidate),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,s.getSeq)(),this.sessionId,e,(function(e,o,n){t.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),r&&r.end()}),(function(e,o){t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),r&&t.stateCenter.reporter.setError(r,{code:l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError.code,message:e.toString()}),t.playStateUpdateError(y.error.kCandidateError)}))}},e.prototype.shouldSendCloseSession=function(){return this.state!=s.ENUM_PLAY_STATE_UPDATE.stop&&this.state!=s.ENUM_PLAY_STATE.waitingSessionRsp},e.prototype.playStateUpdateError=function(e,t,r,o){if(this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" call ",this.streamId,JSON.stringify(e)),!this.isProbe){var n=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},l.ZegoRTCLogEvent.kZegoTaskPlayStreamStateError.event);n.setAttributes({error:null==e?void 0:e.code,message:null==e?void 0:e.message}),n.end()}this.isProbe?this.onCalNetQualityResult(1):this.streamId&&this.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,this.streamId,e,t,r,o),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" "+this.streamId+" ended")},e.prototype.getCameraMicStatus=function(e){return 0==e?"OPEN":"MUTE"},e.prototype.onPlayStateUpdate=function(e,t,r,o,n,i){},e.prototype.onPlayQualityUpdate=function(e,t){},e.prototype.onRemoteCameraStatusUpdate=function(e,t,r){},e.prototype.onRemoteMicStatusUpdate=function(e,t,r){},e.prototype.getStopReason=function(e){var t="StopPlay";return e&&e.code&&(t=1104031===e.code?"ReachMaxAVRetryTime":"StopPlay"),t},e.prototype.stopPlay=function(e){var t,r,n,i;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_STOP_PLAY+" "+this.streamId+" called");var a=this.getStopReason(e);for(var c in this.streamCenter.publisherList)if(this.streamCenter.publisherList[c].publisher.state==s.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==s.ENUM_BROADCASTER_STATUS.start){this.signal&&this.signal.sendBroadcasterStatus((0,s.getSeq)(),this.sessionId,0),this.broadcasterStatus=s.ENUM_BROADCASTER_STATUS.stop;break}if(this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession((0,s.getSeq)(),this.sessionId,0),!this.isProbe){var h=Date.now()-this.reportPlayStateTime;this.reportSpan.setAttributes({play_state_time:b.play_state_time(h)}),this.uploadRTCPlayStats(),this.stateCenter.reporter.spanSetAttributes({key:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{stop_reason:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason(a)})}if(this.resetPlay(),!this.isProbe){var p=this.qualityHandler,f=p.videoBreak,_=p.audioBreak,g=2===this.resourceMode?"l3":"rtc",m=((t={})["".concat(g,"_a_break_time")]=_.cumulativeBreakDuration,t["".concat(g,"_a_decode_time")]=_.cumulativeDecodeDuration,t["".concat(g,"_v_break_time")]=f.cumulativeBreakDuration,t["".concat(g,"_v_decode_time")]=f.cumulativeDecodeDuration,t.audio_cumulative_break_time=_.cumulativeBreakDuration,t.audio_cumulative_decode_time=_.cumulativeDecodeDuration,t.video_cumulative_break_time=f.cumulativeBreakDuration,t.video_cumulative_decode_time=f.cumulativeDecodeDuration,t);this.reportSpan.setAttributes(o({biz_product:(null===(r=this.playOption)||void 0===r?void 0:r.resourceMode)==s.ResourceMode.DG?1:0,webrtc_sid:b.webrtc_sid(this.sessionId),max_retry_interval:b.max_retry_interval(this.stateCenter.streamRetryTime),probe_ip_cnt:b.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:b.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:b.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:b.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),fail_cnt:b.fail_cnt(Math.max(this.rtcPlayCount-1,0)),continuous_fail_cnt:b.continuous_fail_cnt(this.continuousFailCnt),use_resource_type:b.use_resource_type([(0,u.getPlaySourceType)(this.resourceMode)]),use_na:l.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.use_na(this.stateCenter.useNetAgent?1:0),play_state_cnt:b.first_frame_time(this.playStateCount),protocol:b.protocol("webrtc"),dispatch_external_ip:b.dispatch_external_ip(this.stateCenter.clientIP),w:b.w(null===(n=this.playStat)||void 0===n?void 0:n.frameWidth),h:b.h(null===(i=this.playStat)||void 0===i?void 0:i.frameHeight),stop_reason:b.stop_reason(a),error:(null==e?void 0:e.code)||0,message:(null==e?void 0:e.message)||"",cdn_a_break_time:0,cdn_a_decode_time:0,cdn_v_break_time:0,cdn_v_decode_time:0,l3_a_break_time:0,l3_a_decode_time:0,l3_v_break_time:0,l3_v_decode_time:0,rtc_a_break_time:0,rtc_a_decode_time:0,rtc_v_break_time:0,rtc_v_decode_time:0},m)),this.reportSpan.end()}this.retryFailGwNodes=[],this.isRePlay=!1,this.rtcPlayCount=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.continuousFailCnt=0;var v=this.rtcViewer;v&&v.stop()},e.prototype.onDisconnect=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_DISCONNECT+" "+this.streamId+" call"),this.playStateUpdateError(e||y.error.kWebsocketDisconnectedError,!!e)},e.prototype.startSoundLevel=function(){var e,t=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" call streamID: "+this.streamId),!this.isProbe)if(this.remoteStream&&0!=this.remoteStream.getAudioTracks().length){null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect()&&(this.mic=null);try{this.mic=this.ac.createMediaStreamSource(this.remoteStream);var r=this.soundMeterWorklet=new m.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);r.initAudioWorklet(this.ac,this.mic),r.onSoundLevelUpdate=function(e){t.soundLevel=100*e}}catch(e){this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" get sound level failed "+e)}}else this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" "+this.streamId+" remote stream no found")},e.prototype.stopSoundLevel=function(){var e;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect(),this.mic=null},e.prototype.onCalNetQualityResult=function(e,t){},e.prototype.onReceivedDataChannel=function(e){var t,r,o=this,n=new Uint8Array(e.data,0,10),i=e.data.byteLength-10,s=new Uint8Array(e.data,10,i);if(1==n[0]){var a=n[1],c=n[2]<<8|n[3],u=n[4]<<8|n[5],l=(new Date).getTime();if(this.first_pkt&&(this.next_sn[0]=c==u?c:u,this.first_pkt=!1),this.pkt_list.push({sn:c,sn0:u,recv_ts:l,flags:a,payload_len:i,payloadArray:s}),this.pkt_list.sort(this.compareShort),c==this.next_sn[0]){var d=this.pkt_list.filter((function(e){return e.sn0==u}));if(d.sort(this.compareShort),null!=d.find((function(e){return 1&e.flags}))&&d.length==this.compareShort(c,u)+1){for(var h=0,p=new ArrayBuffer(65536),f=0;f<d.length;f++)new Uint8Array(p).set(d[f].payloadArray,h),h+=d[f].payload_len;null===(t=this.onDataChannelList)||void 0===t||t.forEach((function(e){e(p,h,o.streamId)})),this.pkt_list=[],this.first_pkt=!0}this.next_sn[0]++}else for(var _=function(){var e=g.pkt_list.filter((function(e){return e.sn0==o.pkt_list[0].sn0}));if(e.sort(g.compareShort),null!=e.find((function(e){return 1&e.flags}))&&e.length==g.compareShort(e[e.length-1].sn,e[0].sn0)+1){for(var t=0,n=new ArrayBuffer(65536),i=0;i<e.length;i++)new Uint8Array(n).set(e[i].payloadArray,t),t+=e[i].payload_len;g.next_sn[0]=e[0].sn0+e.length,null===(r=g.onDataChannelList)||void 0===r||r.forEach((function(e){e(n,t,o.streamId)})),g.pkt_list=[],g.first_pkt=!0}else if(l-e[0].ts<4e3){var s=e[0].sn0;for(i=0;i<e.length&&s==e[i].sn;i++)s++;return g.next_sn[0]=s,"break"}for(i=0;i<e.length;i++)g.pkt_list.shift()},g=this;this.pkt_list.length>0&&"break"!==_(););}},e.prototype.compareShort=function(e,t){var r=new Uint16Array(1);r[0]=e-t;var o=new Int16Array(1);return o[0]=r[0],o[0]},e.prototype.uploadRTCPlayStats=function(){var e,t,r,o,n,i,s,a,c,u,d,h,p,f,_;this.stateCenter.reporter.spanSetAttributes({key:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{lsttime:l.ZegoRTCLogEvent.kZegoTaskStreamPlay.lsttime(parseInt(this.qualityHandler.lastPlayStats.time)),total_stat:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({afc:null===(e=this.lastPlayStats)||void 0===e?void 0:e.audioPacketsReceived,vfc:null===(t=this.lastPlayStats)||void 0===t?void 0:t.framesReceived,tfc:(null===(r=this.lastPlayStats)||void 0===r?void 0:r.audioPacketsReceived)+(null===(o=this.lastPlayStats)||void 0===o?void 0:o.framesReceived),vb:null===(n=this.lastPlayStats)||void 0===n?void 0:n.videoBytesReceived,ab:null===(i=this.lastPlayStats)||void 0===i?void 0:i.audioBytesReceived,tb:(null===(s=this.lastPlayStats)||void 0===s?void 0:s.videoBytesReceived)+(null===(a=this.lastPlayStats)||void 0===a?void 0:a.audioBytesReceived),rtp_rtt:Math.round(1e3*(null===(c=this.playStat)||void 0===c?void 0:c.currentRoundTripTime))||0,w:null===(u=this.playStat)||void 0===u?void 0:u.frameWidth,rtp_plr:null===(d=this.playStat)||void 0===d?void 0:d.videoPacketsLostRate,h:null===(h=this.playStat)||void 0===h?void 0:h.frameHeight,rtp_bw:(null===(p=this.playStat)||void 0===p?void 0:p.googAvailableSendBandwidth)?null===(f=this.playStat)||void 0===f?void 0:f.googAvailableSendBandwidth:void 0,p2p_delay:null===(_=this.playStat)||void 0===_?void 0:_.peerToPeerDelay})})},e.prototype.getVideoCodec=function(){var e=this;this.peerConnection&&(this.peerConnection.getStats().then((function(t){t.forEach((function(r){if("inbound-rtp"===r.type&&"video"===r.kind&&r.codecId){var o=t.get(r.codecId).mimeType.toLowerCase();o.indexOf("h264")>-1?e.videoCodec="H264":o.indexOf("vp8")>-1&&(e.videoCodec="VP8",e.sideMediaConfig.isSEIStart&&e.logger.error(d.ZEGO_WEBRTC_ACTION.PAYER_GET_VIDEO_CODEC+" video code VP8 is not support SEI"))}}))})),this.videoCodecTimes++,this.videoCodec||this.videoCodecTimes>=5)?this.stopVideocTimer():this.videoCodecTimer=setTimeout((function(){e.getVideoCodec()}),100)},e.prototype.stopVideocTimer=function(){this.videoCodecTimer&&(clearTimeout(this.videoCodecTimer),this.videoCodecTimer=null)},e.prototype.getViewer=function(){return this.playStream&&!this.rtcViewer&&(this.rtcViewer=new _.StreamView(this.playStream,this)),this.rtcViewer},e.prototype.isMultiOuter=function(){return!(!this.stateCenter.accessClientIp||!this.streamConnectIP||this.stateCenter.accessClientIp===this.streamConnectIP)},e.prototype.isCustomCdn=function(){return!1},e.prototype.getSpan=function(e,t,r,o){return void 0===o&&(o=!1),this.isProbe?null:this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:t,bak_key:r,par:this.streamId},{key:e,par:this.streamId},e,o)},e.prototype.setTurnTcp=function(){this._turnToTcp=this.stateCenter.turnToTcp,void 0!==this.stateCenter.turnOverTcpOnly&&(this._turnToTcp=this.stateCenter.turnOverTcpOnly)},e}();t.ZegoPlayWeb=E},361:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishModule=void 0;var s=r(6706),a=r(1089),c=r(6706),u=r(3529),l=r(608),d=r(2752),h=r(3770),p=r(5321),f=r(1358),_=u.ZegoRTCLogEvent.kZegoTaskPublishStart,g=u.ZegoRTCLogEvent.kZegoStartPublish,m=function(){function e(e,t,r,o,n,i){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=o,this.rtm=n,this.zegoWebRtc=i,this.recordDevices()}return e.prototype.createStream=function(e){var t=this;this.logger.info(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" call"),e&&e.camera&&e.camera.audioBitRate&&(e.camera.audioBitrate=e.camera.audioBitRate),e&&e.camera&&e.camera.bitrate&&(e.camera.bitRate=e.camera.bitrate),e&&e.screen&&"object"==typeof e.screen&&e.screen.bitrate&&(e.screen.bitRate=e.screen.bitrate),e&&e.custom&&e.custom.bitrate&&(e.custom.bitRate=e.custom.bitrate);var r={"360p":{width:640,height:360},"480p":{width:720,height:480},"540p":{width:960,height:540}};if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&(r["360p"]={height:640,width:360},r["480p"]={height:720,width:480},r["540p"]={height:960,width:540}),!(null==e?void 0:e.custom)&&!(null==e?void 0:e.screen)||e.camera||!e){var n=o({video:!0,videoQuality:4,frameRate:15,bitRate:500},r["360p"]);switch(this.stateCenter.scenario){case c.ZegoScenario.StandardVideoCall:break;case c.ZegoScenario.HighVideoCall:n.frameRate=25,n.bitRate=1500,n=o(o({},n),r["540p"]);break;case c.ZegoScenario.StandardChatroom:case c.ZegoScenario.HighQualityChatroom:n.video=!1;break;case c.ZegoScenario.Broadcast:n.frameRate=20,n.bitRate=1200,n=o(o({},n),r["540p"]);break;default:n.bitRate=800,n=o(o({},n),r["480p"])}(e=e||{}).camera=Object.assign(n,e.camera||{})}return new Promise((function(r,n){var i="camera",c=t.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskCreateStream.event),d=function(e){var o=t.streamCenter.checkPreview(e),n=e;if(o&&navigator.userAgent){var i=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);i&&i[1]&&i[1].includes("15_1")&&(n=t.getStreamThroughCanvas(e),o.localStream=n)}if(0==n.getAudioTracks().length){var s=t.streamCenter.ac.createMediaStreamDestination(),a=s?s.stream:null,l=a?a.getAudioTracks()[0]:null;l&&(l.enabled=!1,n.addTrack(l),o&&(o.hasEmptyAudioTrack=!0))}c.setAttributes({media_stream_id:u.ZegoRTCLogEvent.kZegoTaskCreateStream.media_stream_id(null==e?void 0:e.id)}),c.end(),!t.stateCenter.deviceInfos&&t.recordDevices(),r(n),t.streamCenter.activeSoundLevel()},h=function(e,r){void 0===r&&(r=""),t.stateCenter.reporter.setError(c,e,r),n({code:e.code,msg:e.message+r})};if("https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" https or localhost required "),void h({code:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.code,message:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.message+" https or localhost required"});if(e&&e.screen){if(i="screen",!f.WebRTCUtil.checkScreenParams(e.screen,h))return;var _=t.stateCenter.browser,g=t.streamCenter.getScreenConstrains(e.screen);c.setAttributes({stream_type:u.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("screen"),screen:u.ZegoRTCLogEvent.kZegoTaskCreateStream.screen(g)});var m=function(e){t.streamCenter.createScreenPreviewer(e,g)&&d(e),e.getVideoTracks()[0].onended=function(){var r=t.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);r.setAttributes({stop_reason:u.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("screenSharingEnded")}),e&&t.stopPreview(e),r.end(),t.stateCenter.actionListener("screenSharingEnded",e)}};"firefox"==_||"object"==typeof e.screen&&"firefox"==e.screen.type?t.startScreenShotFirFox("screen",g,(function(e,t,r){e?t&&m(t):r&&h(r)})):"chrome"==_&&p.ZegoWebRTC.screenShotReady||"object"==typeof e.screen&&"shot"==e.screen.type?t.startScreenShotChrome((function(r,o,n){r?(t.logger.info(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" using extension"),o&&m(o)):(n&&t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" extension "+n),"SS_DIALOG_CANCEL"===n||"object"==typeof(null==e?void 0:e.screen)&&"shot"==e.screen.type?n&&h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t.startScreenSharing(g,(function(e,r,o){e?r&&m(r):(t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" "+o),o&&h(o))})))})):"Electron"==_||"object"==typeof e.screen&&"Electron"==e.screen.type?t.startScreenShotElectron(g,(function(e,t,r){e?t&&m(t):r&&h(r)})):t.startScreenSharing(g,(function(e,t,r){e?t&&m(t):r&&h(r)}))}else{if(e&&"object"==typeof e.camera&&void 0!==e.camera.videoQuality&&!l.ClientUtil.checkInteger(e.camera.videoQuality))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" videoQuality must be integer number"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number");if(e&&e.camera&&e.camera.audioBitrate){if(!l.ClientUtil.checkInteger(e.camera.audioBitrate))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate must be integer number"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.camera.audioBitrate<6)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot less 6 kbps"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.camera.audioBitrate>510)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot greater than 510 kbps"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps");t.stateCenter.audioBitRate=1e3*e.camera.audioBitrate}if(e&&e.camera&&e.camera.bitRate){if("number"!=typeof e.camera.bitRate)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.camera.bitRate>10240)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.camera&&void 0!==e.camera.channelCount&&!l.ClientUtil.checkInteger(e.camera.channelCount))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" channelCount must be integer number"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must be integer number");if(e&&e.camera&&4===e.camera.videoQuality&&!f.WebRTCUtil.checkCameraParams(e.camera,h))return;if(e&&e.custom&&e.custom.bitRate){if(!l.ClientUtil.checkInteger(e.custom.bitRate))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.custom.bitRate>10240)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.custom&&e.custom.audioBitrate){if(!l.ClientUtil.checkInteger(e.custom.audioBitrate))return t.logger.error("ze.cs.0 audioBitrate must be integer number"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.custom.audioBitrate<6)return t.logger.error("ze.cs.0 audioBitrate cannot less 6 kbps"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.custom.audioBitrate>510)return t.logger.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps")}if(e&&e.custom&&void 0!==e.custom.channelCount&&1!==e.custom.channelCount&&2!==e.custom.channelCount)return t.logger.error("ze.cs.0 channelCount must number 1 or 2"),void h(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must number 1 or 2");var v={};if(e&&e.camera)i="camera",v=e.camera,c.setAttributes({stream_type:u.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("camera"),camera:u.ZegoRTCLogEvent.kZegoTaskCreateStream.camera(e.camera)}),"boolean"!=typeof v.video&&(v.video=!0),"boolean"!=typeof v.audio&&(v.audio=!0);else if(e&&e.custom){i="custom",v=e.custom;var y=e.custom.source instanceof MediaStream?"MediaStream":"HTMLElement";c.setAttributes({stream_type:u.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("custom"),custom:u.ZegoRTCLogEvent.kZegoTaskCreateStream.custom(o(o({},e.custom),{source_type:y}))})}t.startPreview(v,i,d,h,c)}}))},e.prototype.destroyStream=function(e){this.logger.info(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call");var t=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);if(t.setAttributes({stop_reason:u.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("destroyStream")}),!(e instanceof MediaStream))return this.logger.error(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" localStream is not mediaStream or tracks is null"),void this.stateCenter.reporter.setError(t,u.ZegoRTCLogEvent.kZegoTaskDestroyStream.error.kLocalStreamError);e instanceof MediaStream&&0==e.getTracks().length&&this.logger.info(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" tracks is null"),this.stopPreview(e),t.end()},e.prototype.startPublishingStream=function(e,t,r,o){var n;this.logger.info(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call ",e);var i,d=!0,h="",p=_.error,f=p.kPublishParamError,m=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.I,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:_.event,par:e},_.event,!0);d&&void 0===e&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+(h="stream id required")),d=!1,i=f),!d||e&&"string"==typeof e||(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream id type wrong")),d=!1,i=f),d&&e.length>c.MAX_STREAM_ID_LENGTH&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream id length limit")),d=!1,i=f),d&&!l.ClientUtil.checkIllegalCharacters(e)&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream ID contains illegal characters")),d=!1,i=f),d&&(!t||t instanceof MediaStream&&0==t.getTracks().length)&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="localStream wrong")),d=!1,i=f);var v=this.streamCenter.checkPreview(t);if(d&&!v&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream is not from zego")),d=!1,i=p.kPublishNoPreviewError),(null==v?void 0:v.isVideoEffectStarting)&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h=(i=p.kPublishEffectIsStarting).message)),d=!1),d&&void 0!==r&&"object"!=typeof r&&(d=!1,i=f,h="publishOption must be object"),d&&void 0!==r&&void 0!==r.streamParams&&"string"!=typeof r.streamParams&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption streamParams must be string"),d=!1,i=f,h=" publishOption streamParams must be string"),d&&void 0!==r&&void 0!==r.extraInfo&&"string"!=typeof r.extraInfo&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption extraInfo must be string"),d=!1,i=f,h=" publishOption extraInfo must be string"),d&&void 0!==r&&void 0!==r.videoCodec&&"string"!=typeof r.videoCodec&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption videoCodec must be string"),d=!1,i=f,h=" publishOption videoCodec must be string"),!d||!this.stateCenter.isMultiRoom||r&&"string"==typeof r.roomID&&""!=r.roomID||(d=!1,i=f,h=" roomID is need if set multi room"),r&&r.videoCodec&&(r.videoCodec=r.videoCodec.toUpperCase()),d&&(this.stateCenter.waitPublishStreamList[e]={retryStart:!1,localStream:t,publishOption:r,isDataChannel:o}),d&&this.rtm.isDisConnect()){if(this.stateCenter.connectChanged)return this.stateCenter.waitPublishStreamList[e].retryStart=!0,this.logger.info(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" connect changed"),!1;this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" not login"),d=!1,i=p.kPublishNoLoginError}if(!d)throw this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+h),this.stateCenter.reporter.setError(m,i),{errorCode:null==i?void 0:i.code,extendedData:h};r||(r={});var y=(0,l.generaStreamSid)(this.stateCenter.appid,this.stateCenter.idName,e),b=((n={})["_publish_"+e]={stream_sid:y},n);this.stateCenter.reporter.setPublicPros(b),m.setAttributes({stream_id:_.stream_id(e),stream_sid:_.stream_sid(y),publish_option:_.publish_option(r),enable_camera:_.enable_camera(!!(null==v?void 0:v.videoTrack)),enable_mic:_.enable_mic(!!(null==v?void 0:v.audioTrack)),use_na:_.use_na(this.stateCenter.useNetAgent?1:0)}),r.audioBitRate=this.stateCenter.audioBitRate;var S,E=r.roomID?r.roomID:this.stateCenter.roomList[0]?this.stateCenter.roomList[0].roomID:"",T=this.stateCenter.getRoomByRoomID(E);if(!T)return this.logger.error("zc.p.sps.1 room no found"),!1;if(m.setAttributes({room_id:_.room_id(E)}),this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),S=this.stateCenter.customUrl;else{var w=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);w&&w instanceof Array&&w.length>0&&(S=w,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(w)))}if(S)return this.stateCenter.publishStreamList[e]={state:c.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:r.extraInfo},this.streamCenter.setPublishStateStart(T,e,t,r,y,o)?(T.streamHandler.onPublishStateUpdate(c.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.publisherList[e].serverUrls=S,this.streamCenter.startPublishingStream(e)):(this.logger.info("zc.p.sps.1 cannot start publish"),!1);if(!this.streamCenter.setPublishStateStart(T,e,t,r,y,o))return this.logger.error("zc.p.sps.1 cannot start publish"),!1;this.stateCenter.publishStreamList[e]={state:c.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:r.extraInfo},this.logger.info("zc.p.sps.1 start publish"),T.streamHandler.onPublishStateUpdate(c.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""});var C=this.stateCenter.useNetAgent,I=this.streamCenter.publisherList[e];if(this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:e},{key:g.event,par:e},g.event,!0).setAttributes({reason:g.reason("StartPublish")}),C)return this.stateCenter.appConfig?(this.streamCenter.publisherList[e].serverUrls=["unified_rtc"],this.streamCenter.startPublishingStream(e,C),!0):(this.streamCenter.waitPublishList.push(e),!0);var O=I.retryDispatchHandler;return O.stopMaxTime(),O.invalid(),O.initStream(e,r,!0),O.startMaxTime(),O.active(0)},e.prototype.activateSEIInsert=function(e,t,r){return void 0===r&&(r=0),!1},e.prototype.sendSEI=function(e,t){if(!l.ClientUtil.isSupportEncodedTransforms())return this.logger.warn(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" browser not support "),!1;if(!(t instanceof Uint8Array))return this.logger.error(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" inData required Uint8Array"),!1;if(t.byteLength>4096)return this.logger.error(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" inData length limit"),!1;var r=this.streamCenter.publisherList[e];return r&&r.publisher?r.publisher.sendSEI(t):(this.logger.warn(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" publish not exist"),!1)},e.prototype.stopPublishingStream=function(e,t,r){var o;this.logger.info(a.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call ",e+(t?t.toString():"")+" "+r);var n=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskPublishStop.event);if("string"!=typeof e||""==e)return this.logger.error(a.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" streamID must be string and not empty"),this.stateCenter.reporter.setError(n,u.ZegoRTCLogEvent.kZegoTaskPublishStop.error.kParamError,"stream id type error"),!1;var i=this.streamCenter.publisherList[e];n.setAttributes({stream_id:u.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_id(e),stream_sid:u.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_sid(null==i?void 0:i.streamSid),error:(null==t?void 0:t.code)||0,message:(null==t?void 0:t.message)||""});var l=this.streamCenter.getRoomByStreamID(e),d=i&&i.publisher&&i.publisher.state!==c.ENUM_PUBLISH_STATE.stop||(null===(o=null==i?void 0:i.retryStreamHandler)||void 0===o?void 0:o.isRetrying());if(this.streamCenter.stopPublishingStream(e,t),r&&delete this.stateCenter.waitPublishStreamList[e],this.stateCenter.publishStreamList[e]){if(this.stateCenter.publishStreamList[e].state>=c.ENUM_PUBLISH_STREAM_STATE.update_info&&l){t&&1102018===t.code||l.streamHandler.updateStreamInfo(e,c.ENUM_STREAM_SUB_CMD.liveEnd);for(var h=0;h<l.streamList.length;h++)if(l.streamList[h].stream_id==e){!this.stateCenter.connectChanged&&l.streamList.splice(h--,1);break}}delete this.stateCenter.publishStreamList[e]}return n.end(),l&&d&&l.streamHandler.onPublishStateUpdate(c.ENUM_PUBLISH_STATE_UPDATE.error,e,t||{code:0,message:""}),!0},e.prototype.setCaptureVolume=function(e,t){var r=this;return new Promise((function(o){var n;r.logger.info(a.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call");var i=function(e){r.logger.error(a.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" "+e),o({errorCode:u.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.code,extendedData:JSON.stringify({fail_reason:u.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.message+" "+e})})},s=r.streamCenter.ac,c=r.streamCenter.checkPreview(e);if(e instanceof MediaStream&&c)if(0!=e.getAudioTracks().length)if("number"!=typeof t||t<0||t>200)i(" volume must be number between 0 to 200");else{if(c.gainNode)c.gainNode.gain.value=t/100;else{c.audioNodeQueue||c.initAudioNodeQueue();var l=s.createGain();null===(n=c.audioNodeQueue)||void 0===n||n.pushFront(l),c.gainNode=l,c.gainNode.gain.value=t/100}s.resume(),o({errorCode:0,extendedData:""}),r.logger.info(a.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call success")}else i(" stream audioTrack no found");else i(" stream must be created by zego")}))},e.prototype.getElectronScreenSources=function(){var e=this;return new Promise((function(t,r){var o=window.require("electron");o||(e.logger.error("zc.gess.0 Electron is not exist"),r({message:"Electron is not exist"})),o.desktopCapturer.getSources({types:["window","screen"]}).then((function(e){var r=e.map((function(e){return{id:e.id,name:e.name,thumbnail:e.thumbnail}}));t(r)})).catch((function(t){e.logger.error("zc.gess.0 "+t),r(t)}))}))},e.prototype.startScreenShotChrome=function(e){if(p.ZegoWebRTC.screenShotReady)window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),l.ClientUtil.registerCallback("screenShare",{success:e},this.stateCenter.callbackList);else{var t='zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';this.logger.error(t),e(!1,null,{code:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+t})}},e.prototype.startScreenSharing=function(e,t){var r=this;"getDisplayMedia"in navigator.mediaDevices?navigator.mediaDevices.getDisplayMedia({audio:e.audio,video:e.video}).then((function(e){t(!0,e)})).catch((function(e){r.logger.error("zc.b.sss "+e),e.message&&"permission denied"==e.message.toLowerCase()?t(!1,null,u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t(!1,null,{code:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})})):(this.logger.error("zc.b.sss brower does not support getDisplayMedia"),t(!1,null,u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError))},e.prototype.startScreenShotFirFox=function(e,t,r){var n=this,i={video:o(o({},t.video),{mediaSource:e}),audio:t.audio};navigator.mediaDevices.getUserMedia(i).then((function(e){r(!0,e)})).catch((function(e){n.logger.error("ze.ssf.1 "+e),r(!1,null,{code:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startScreenShotElectron=function(e,t){var r=this;if(!window.require("electron"))return this.logger.error("ze.sse.1 Electron is not exist"),void t(!1,null,{code:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" Electron is not exist"});var o={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.sourceID,maxWidth:window.screen.width,maxHeight:window.screen.height}},audio:!1};navigator.mediaDevices.getUserMedia(o).then((function(e){t(!0,e)})).catch((function(e){r.logger.error("ze.sse.1 "+e),t(!1,null,{code:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startPreview=function(e,t,r,o,n){var i=this,s=null;return s=new h.ZegoPreview(this.logger,this.streamCenter.ac,this.stateCenter,this.streamCenter,t),this.streamCenter.previewStreamList.push(s),s.startPreview(e,(function(o){i.streamCenter.soundLevelDelegate&&(null==s||s.startSoundLevel()),"camera"===t&&(!1===(null==e?void 0:e.audio)&&s&&(s.hasMicTrack=!1),(null==s?void 0:s.micTrack)&&(s.micTrack.enabled=i.streamCenter.isMicEnabled)),(null==e?void 0:e.videoOptimizationMode)&&i.streamCenter.setVideoTrackContentHint(o,null==e?void 0:e.videoOptimizationMode),i.logger.debug("zsc.sp.0 call success"),!i.stateCenter.deviceInfos&&i.recordDevices(),r&&r(o)}),(function(e){i.streamCenter.previewStreamList=i.streamCenter.previewStreamList.filter((function(e){return e!==s})),o&&o(e)}),n),!0},e.prototype.stopPreview=function(e){if(!e)return this.logger.warn("zsc.sp.0 localStream null"),!1;for(var t in this.streamCenter.publisherList)this.streamCenter.publisherList[t].localStream===e&&(this.streamCenter.publisherList[t].localStream=null);var r=this.streamCenter.checkPreview(e);return r?(r.previewSuc&&(r.stopPreview(),this.streamCenter.removePreview(r)),!0):(this.logger.warn("zsc.sp.0 no preview"),!1)},e.prototype.recordDevices=function(e,t){var r,a=this;this.logger.info("zsc.rd.0 call"),l.ClientUtil.getDevices((function(t){a.stateCenter.deviceInfos={microphones:t.microphones,speakers:t.speakers,cameras:t.cameras},e&&e(t)}),(function(e){a.logger.warn("zsc.rd.0 getDevices err:",e),t&&t(e)})),void 0!==(null===(r=navigator.mediaDevices)||void 0===r?void 0:r.ondevicechange)&&(navigator.mediaDevices.ondevicechange=null,navigator.mediaDevices.ondevicechange=function(e){a.logger.info("zsc.rd.0 devicechange"),a.stateCenter.deviceChangeTimer&&(clearTimeout(a.stateCenter.deviceChangeTimer),a.stateCenter.deviceChangeTimer=null),a.stateCenter.deviceChangeTimer=setTimeout((function(){l.ClientUtil.getDevices((function(e){for(var t=[],r=function(r){var o=a.stateCenter.deviceInfos.cameras[r];e.cameras.find((function(e){return e.deviceID===o.deviceID}))||t.push(o)},c=0;c<a.stateCenter.deviceInfos.cameras.length;c++)r(c);a.stateCenter.deviceStateOut=!1;var l=!1;t.length>0&&(l=!0),t.forEach((function(e){for(var t in a.streamCenter.publisherList){var r=a.streamCenter.publisherList[t],o=r.publisher;r.localStream&&""!==r.cameraLabel&&r.cameraLabel===e.deviceName&&(l=!1,o.sendStreamStatus(-6,o.mic_status),a.stateCenter.actionListener("_deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName,"camera"),a.stateCenter.actionListener("deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName)),r.localStream&&0===r.localStream.getAudioTracks().length&&(l=!1)}a.deviceInterruptReport(0,e),a.stateCenter.actionListener("videoDeviceStateChanged","DELETE",e)})),l&&(a.stateCenter.deviceStateOut=!0);var h=a.stateCenter.deviceInfos.microphones.filter((function(t){return!e.microphones.find((function(e){return e.deviceID===t.deviceID}))}));h.forEach((function(e){for(var t in a.streamCenter.publisherList){var r=a.streamCenter.publisherList[t],o=r.publisher;r.localStream&&""!==r.microLabel&&(r.microLabel===e.deviceName||""!==r.microLabel&&r.microLabel.includes(e.deviceName))&&(o.sendStreamStatus(o.camera_status,-6),a.stateCenter.actionListener("_deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,a.streamCenter.publisherList[t].microLabel,"micro"),a.stateCenter.actionListener("deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,a.streamCenter.publisherList[t].microLabel))}a.deviceInterruptReport(0,e),a.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Input",e)}));var p=a.stateCenter.deviceInfos.speakers.filter((function(t){return!e.speakers.find((function(e){return e.deviceID===t.deviceID}))})),f=e.cameras.filter((function(e){return!a.stateCenter.deviceInfos.cameras.find((function(t){return t.deviceID===e.deviceID}))})),_=e.microphones.filter((function(e){return!a.stateCenter.deviceInfos.microphones.find((function(t){return t.deviceID===e.deviceID}))})),g=e.speakers.filter((function(e){return!a.stateCenter.deviceInfos.speakers.find((function(t){return t.deviceID===e.deviceID}))}));p.forEach((function(e){var t=a.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event);t.setAttributes({reason_type:u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("delete"),device:u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceID),device_name:u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceName)}),t.end(),a.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Output",e)})),f.forEach((function(e){a.deviceInterruptReport(1,e),a.stateCenter.actionListener("videoDeviceStateChanged","ADD",e)})),_.forEach((function(e){a.deviceInterruptReport(1,e),a.stateCenter.actionListener("audioDeviceStateChanged","ADD","Input",e)})),g.forEach((function(e){var t=a.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event);t.setAttributes({reason_type:u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("add"),device:u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceID),device_name:u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceName)}),t.end(),a.stateCenter.actionListener("audioDeviceStateChanged","ADD","Output",e)}));var m=o({},a.stateCenter.deviceInfos);if(a.stateCenter.deviceInfos={microphones:e.microphones,speakers:e.speakers,cameras:e.cameras},a.stateCenter.autoSwitchDeviceSetting.microphone){var v=a.stateCenter.deviceInfos.microphones;h&&0!==h.length&&0!=v.length&&a.streamCenter.previewStreamList.forEach((function(e){return n(a,void 0,void 0,(function(){var t,r,o,n,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=e.localStream,r=v[0].deviceID,n=null==(o=e.audioTrack)?void 0:o.getSettings().deviceId,s=!1,n&&"default"===n?(a=m.microphones.find((function(e){return"default"===e.deviceID})).deviceName,c=v.find((function(e){return"default"===e.deviceID})).deviceName,s=c!==a):""!==n&&(s=h.some((function(e){return e.deviceID===n}))),t&&s&&""!==r?[4,this.zegoWebRtc.useAudioDevice(t,r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}))}if(a.stateCenter.autoSwitchDeviceSetting.camera){var y=a.stateCenter.deviceInfos.cameras;t&&0!==t.length&&0!=y.length&&a.streamCenter.previewStreamList.forEach((function(e){return n(a,void 0,void 0,(function(){var r,o,n,s,a,c,u;return i(this,(function(i){switch(i.label){case 0:return r=e.localStream,o=y[0].deviceID,s=null==(n=e.videoTrack)?void 0:n.getSettings().deviceId,a=!1,s&&"default"===s?(c=m.cameras.find((function(e){return"default"===e.deviceID})).deviceName,u=y.find((function(e){return"default"===e.deviceID})).deviceName,a=u!==c):""!==s&&(a=t.some((function(e){return e.deviceID===s}))),r&&a&&""!==o?[4,this.zegoWebRtc.useVideoDevice(r,o)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}))}}),(function(e){a.logger.warn("zsc.rd.0 getDevices err:",e)}))}),500)})},e.prototype.getStreamThroughCanvas=function(e){if(0==e.getVideoTracks().length)return e;var t=document.createElement("video"),r=document.createElement("canvas"),o=r.getContext("2d");t.setAttribute("style","display:none"),r.setAttribute("style","display:none"),t.setAttribute("muted",""),t.muted=!0,t.setAttribute("autoplay",""),t.autoplay=!0,t.setAttribute("playsinline",""),document.body.append(t),document.body.append(r),t.srcObject=e;var n=function n(){null==o||o.drawImage(t,0,0,r.width,r.height),window.requestAnimationFrame(n),t.srcObject=e};t.oncanplay=function(){r.width=t.videoWidth,r.height=t.videoHeight,t.play(),n()};var i=r.captureStream(15),s=i.getVideoTracks()[0],a=s.stop;if(s.stop=function(){a.call(s),n(),t.remove(),r.width=0,r.remove()},e instanceof MediaStream&&e.getAudioTracks().length){var c=e.getAudioTracks()[0];i.addTrack(c)}return i},e.prototype.getStreamStats=function(e){var t,r,o;return this.logger.info(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call"),e instanceof MediaStream&&e.getTracks().length>0?o=null===(t=this.streamCenter.checkPublish(e))||void 0===t?void 0:t.publisher:"string"==typeof e&&(o=null===(r=this.streamCenter.publisherList[e])||void 0===r?void 0:r.publisher),o?(null==o?void 0:o.currentQuality)||null:(this.logger.error("zsc.sp.0 stream is not publishing"),null)},e.prototype.startWaitPublish=function(){var e=this;this.streamCenter.waitPublishList.forEach((function(t){e.streamCenter.startPublishingStream(t,e.stateCenter.useNetAgent)})),this.streamCenter.waitPublishList=[]},e.prototype.deviceInterruptReport=function(e,t){var r=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},u.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event);r.setAttributes({interrupt:u.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.interrupt(e),device:u.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.device(t.deviceID),device_name:u.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.device_name(t.deviceName)}),r.end()},e}();t.PublishModule=m},3770:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPreview=void 0;var s=r(6706),a=r(3529),c=r(1089),u=r(9307),l=r(6171),d=r(8011),h=function(){function e(e,t,r,o,n){var i=this;this.logger=e,this.ac=t,this.stateCenter=r,this.streamCenter=o,this.previewType=n,this.localStream=null,this.videoInfo={},this.rtcViewer=null,this.previewSuc=!1,this.soundLevel=0,this.hasEmptyAudioTrack=!1,this.script=null,this.mic=null,this._audioTrack=null,this._videoTrack=null,this.cloneVideoTrack=null,this.originVideoTrack=null,this.activateSEIConfig=null,this.isAudioEnabled=!0,this.isVideoEnabled=!0,this.gainNode=null,this.cameraMaxResolution={},this.enableDualStream=!1,this.lowStreamConfig={width:160,height:120,frameRate:15,bitRate:50},this.muteImage=null,this.hasMicTrack=!0,this.enableMicrophoneOnly=function(e,t){if(!i.localStream)return i.logger.error("zp.em.2 no localStream"),!1;var r=t.getPublishList(i.localStream).map((function(e){return e.publisher}));return r.length&&r.forEach((function(t){t.sendStreamStatus(t.camera_status,i.isAudioEnabled&&e?0:2)})),i.micTrack?(i.micTrack.enabled=i.isAudioEnabled&&e,i.logger.debug("zp.emo.2 call success"),!0):(i.logger.info("zp.emo.2 no micTrack"),!0)},this.soundMeterWorklet=null,this.audioMixManager=null}return Object.defineProperty(e.prototype,"audioTrack",{get:function(){var e;return this._audioTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getAudioTracks()[0])||null},set:function(e){this._audioTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoTrack",{get:function(){var e;return this._videoTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getVideoTracks()[0])||null},set:function(e){this._videoTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"micTrack",{get:function(){return this.hasMicTrack&&"camera"===this.previewType&&this.audioTrack||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVideoEffectStarting",{get:function(){return!!this.videoEffect&&this.videoEffect.isStarting},enumerable:!1,configurable:!0}),e.prototype.getMediaStreamConstraints=function(e,t){var r={audio:null,video:null};if(r.audio=!0,r.video={width:this.stateCenter.settingConfig.getSetting("camera_width")||640,height:this.stateCenter.settingConfig.getSetting("camera_height")||480,frameRate:this.stateCenter.settingConfig.getSetting("camera_framerate")||15,bitRate:this.stateCenter.settingConfig.getSetting("camera_video_bitrate")},e.audio?void 0===e.audioInput&&void 0===e.ANS&&void 0===e.AGC&&void 0===e.AEC&&void 0===e.channelCount?(r.audio={},r.audio.noiseSuppression=this.stateCenter.settingConfig.getSetting("ANS"),r.audio.autoGainControl=this.stateCenter.settingConfig.getSetting("AGC"),r.audio.echoCancellation=this.stateCenter.settingConfig.getSetting("AEC"),r.audio.channelCount=1):(r.audio={},null!=e.audioInput&&(r.audio.deviceId={exact:e.audioInput}),void 0!==e.ANS&&(r.audio.noiseSuppression=e.ANS),void 0!==e.AGC&&(r.audio.autoGainControl=e.AGC),void 0!==e.AEC&&(r.audio.echoCancellation=e.AEC),void 0!==e.channelCount&&(r.audio.channelCount=e.channelCount)):!1===e.audio&&(r.audio=!1),e.video){var o=640,n=480,i=15,a=this.stateCenter.settingConfig.getSetting("camera_video_bitrate");if(1===e.videoQuality?(o=s.ENUM_RESOLUTION_TYPE.LOW.width,n=s.ENUM_RESOLUTION_TYPE.LOW.height,i=s.ENUM_RESOLUTION_TYPE.LOW.frameRate,a=s.ENUM_RESOLUTION_TYPE.LOW.bitRate):2===e.videoQuality?(o=s.ENUM_RESOLUTION_TYPE.MEDIUM.width,n=s.ENUM_RESOLUTION_TYPE.MEDIUM.height,i=s.ENUM_RESOLUTION_TYPE.MEDIUM.frameRate,a=s.ENUM_RESOLUTION_TYPE.MEDIUM.bitRate):3===e.videoQuality?(o=s.ENUM_RESOLUTION_TYPE.HIGH.width,n=s.ENUM_RESOLUTION_TYPE.HIGH.height,i=s.ENUM_RESOLUTION_TYPE.HIGH.frameRate,a=s.ENUM_RESOLUTION_TYPE.HIGH.bitRate):4===e.videoQuality?(o=e.width||640,n=e.height||480,i=e.frameRate||15,a=e.bitRate||this.stateCenter.settingConfig.getSetting("camera_video_bitrate")):this.logger.info("zp.gmsc.2 use default"),t&&!e.videoQuality&&(e.width&&(o=e.width),e.height&&(n=e.height),e.frameRate&&(i=e.frameRate),e.bitRate&&(a=e.bitRate)),!1===e.horizontal){var c=n;n=o,o=c}!0===e.isSwitch&&(c=n,n=o,o=c),r.video={width:o,height:n,frameRate:i,bitRate:a},null!=e.facingMode?r.video.facingMode=e.facingMode:null!=e.videoInput&&null!=e.videoInput&&""!=e.videoInput&&(r.video.deviceId={exact:e.videoInput}),this.logger.info("zp.gmsc.2 width: "+o+" height: "+n+" rate: "+i)}else!1===e.video&&(e.audioBitrate&&(r.video={}),r.video=!1);return r},e.prototype.startPreview=function(e,t,r,s){return n(this,void 0,void 0,(function(){var n,c,u,l,d,h,p,f,_,g=this;return i(this,(function(i){return this.logger.debug("zp.sv.2 called"),this.mediaStreamConfig=e,void 0===navigator.mediaDevices||null==navigator.mediaDevices.getUserMedia?(r&&r(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):(n=function(e){t(e)},e.source instanceof MediaStream?(c=e.source.getVideoTracks(),u=c.length>0?c[0].getSettings():{width:0,height:0,frameRate:0},this.logger.debug("zp.sv.2 use external media stream"),this.previewSuc=!0,this.localStream=e.source,this.initMediaTrack(e.source),this.videoInfo={width:u.width,height:u.height,frameRate:u.frameRate,bitRate:e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),startBitrate:e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:e.minBitrate,keyFrameInterval:e.keyFrameInterval,channelCount:e.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*e.audioBitrate||48e3},n&&n(this.localStream),[2]):e.source instanceof HTMLMediaElement?((l=this.captureStream(e.source,e))?(this.videoInfo.bitRate=e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),this.previewSuc=!0,this.initMediaTrack(l),n&&n(l)):r&&r(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):((d=this.getMediaStreamConstraints(e)).audio&&(h=this.stateCenter.settingConfig.getSetting("AEC",!0),p=this.stateCenter.settingConfig.getSetting("AGC",!0),f=this.stateCenter.settingConfig.getSetting("ANS",!0),"boolean"==typeof h&&(this.logger.info("zp.sv.2 setting AEC "+h),d.audio.echoCancellation=h),"boolean"==typeof p&&(this.logger.info("zp.sv.2 setting AGC "+p),d.audio.autoGainControl=p),"boolean"==typeof f&&(this.logger.info("zp.sv.2 setting ANS "+f),d.audio.noiseSuppression=f)),this.videoInfo=o(o({},d.video),{keyFrameInterval:e.keyFrameInterval}),this.videoInfo?(this.videoInfo.audioBitrate=1e3*e.audioBitrate||48e3,this.videoInfo.startBitrate=e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),this.videoInfo.minBitrate=e.minBitrate,this.videoInfo.keyFrameInterval=e.keyFrameInterval):e.audioBitrate&&(this.videoInfo={audioBitrate:1e3*e.audioBitrate||48e3}),(_=this.stateCenter.settingConfig.getSetting("camera_audio_bitrate",!0))&&(this.videoInfo.audioBitrate=1e3*_),d.video instanceof Object&&(d.video.width=this.stateCenter.settingConfig.getSetting("camera_width",!0)||d.video.width,d.video.height=this.stateCenter.settingConfig.getSetting("camera_height",!0)||d.video.height,d.video.frameRate=this.stateCenter.settingConfig.getSetting("camera_framerate",!0)||d.video.frameRate),this.mediaStreamConfig.video=!!d.video,this.mediaStreamConfig.audio=!!d.audio,this.logger.info("zp.sv.2 ",JSON.stringify(d)),s.setAttribute("preview_conf",a.ZegoRTCLogEvent.kZegoTaskCreateStream.preview_conf(d)),e.unlimitedCaptureResolution&&d.video.width&&(d.video.width={ideal:4096},d.video.height={ideal:2160},this.logger.info("zp.sv.2 ","capture max resolution of camera")),navigator.mediaDevices.getUserMedia(d).then((function(t){g.logger.info("zp.sv.2 success"),g.localStream=t,g.previewSuc=!0,g.initMediaTrack(t),g.videoInfo&&(g.videoInfo.channelCount=e.channelCount||(g.audioTrack&&g.audioTrack.getSettings?g.audioTrack.getSettings().channelCount:1)),n&&n(t)}),(function(e){if(g.logger.info("zp.sv.2 failed ",e.name," ",e.message),r){var t=a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kGetUserMediaError;t.message=t.message+" "+e.name+" "+e.message,"NotAllowedError"===e.name||"SecurityError"===e.name?(t=o({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoAllowedError)).message=e.name+": "+t.message:"NotReadableError"===e.name?(t=o({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoReadableError)).message=e.name+": "+t.message:"OverconstrainedError"===e.name&&((t=o({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceOverConstrainedError)).message=e.name+": "+t.message+(e.constraint?". such as "+e.constraint:"")),r(t)}})),[2]))}))}))},e.prototype.captureStream=function(e,t){if(!e)return this.logger.info("zp.cs.2 no local video"),null;var r;if(e.captureStream)r=e.captureStream(),this.logger.debug("zp.cs.2 captureStream");else{if(!e.mozCaptureStream)return this.logger.info("zp.cs.2 don't support"),null;r=e.mozCaptureStream(),this.logger.debug("zp.cs.2 mozCaptureStream")}return 0==r.getTracks().length?(this.logger.error("zp.cs.2 external capture tracks no found"),null):(this.localStream=r,this.videoInfo={width:e.videoWidth,height:e.videoHeight,frameRate:0,bitRate:t.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),channelCount:t.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*t.audioBitrate||48e3,startBitrate:t.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:t.minBitrate,keyFrameInterval:t.keyFrameInterval},this.logger.debug("zp.cs.2 called success"),this.localStream)},e.prototype.stopPreview=function(){var e,t,r,o,n,i;if(this.logger.info("zp.sv.2.1 called"),this.localStream){var s=this.rtcViewer;s&&s.stop(),this.videoEffect&&(this.videoEffect.setBeautyEffectOptions(!1),this.videoEffect.destroy()),null===(e=this.cloneVideoTrack)||void 0===e||e.stop(),this.muteImageAnID&&cancelAnimationFrame(this.muteImageAnID),null===(t=this.originVideoTrack)||void 0===t||t.stop(),null===(r=this.videoTrack)||void 0===r||r.stop(),null===(o=this.audioTrack)||void 0===o||o.stop(),null===(n=this.audioMixManager)||void 0===n||n.stopAudioManager(),this.localStream.getTracks().reverse().forEach((function(e){return e.stop()})),this.localStream=null,null===(i=this.lowStream)||void 0===i||i.getTracks().reverse().forEach((function(e){return e.stop()})),this.lowStream=void 0,this.videoInfo={}}},e.prototype.enableMicrophone=function(e,t){return!1},e.prototype.enableCamera=function(e,t,r){return!1},e.prototype.enableCameraCapturing=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,!1]}))}))},e.prototype.startSoundLevel=function(){var e,t=this;if(this.localStream&&0!=this.localStream.getAudioTracks().length){null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect();try{this.mic=this.ac.createMediaStreamSource(this.localStream);var r=this.soundMeterWorklet=new d.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);r.initAudioWorklet(this.ac,this.mic),r.onSoundLevelUpdate=function(e){t.soundLevel=100*e}}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" get sound level failed "+e)}}},e.prototype.stopSoundLevel=function(){var e;this.soundLevel=0,null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect(),this.mic=null},e.prototype.restartSoundLevel=function(){this.streamCenter.soundLevelDelegate?(this.stopSoundLevel(),this.startSoundLevel()):this.stopSoundLevel()},e.prototype.setBeautyEffect=function(e,t){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e.prototype.replacePreviewTrack=function(e,t,r){void 0===t&&(t=!1)},e.prototype.createLowStream=function(){var e,t,r,o=null===(e=this.localStream)||void 0===e?void 0:e.getVideoTracks()[0];if(o){var n=o.getSettings().height,i=o.getSettings().width,s=n&&i?n/i:1;try{this.lowStream=null===(t=this.localStream)||void 0===t?void 0:t.clone();var a,c=null===(r=this.lowStream)||void 0===r?void 0:r.getVideoTracks()[0],u=this.lowStreamConfig,l=u.width,d=u.frameRate;a=Math.round(s*this.lowStreamConfig.width),null==c||c.applyConstraints({width:l,height:a,frameRate:d})}catch(e){this.logger.error("zp.cls "+e)}}},e.prototype.initAudioNodeQueue=function(e){var t,r;if(!this.audioTrack||!this.localStream)return!1;var o=new MediaStream;o.addTrack(this.audioTrack);var n=this.ac.createMediaStreamSource(o),i=this.ac.createMediaStreamDestination();this.audioNodeQueue=new l.AudioNodeQueue(n,i);var s=i.stream.getAudioTracks()[0];if(this.audioMixManager&&(null===(t=this.audioMixManager)||void 0===t?void 0:t.audioDestNode)&&e)return!0;var a=this.rtcViewer;for(var c in this.streamCenter.publisherList){var u=this.streamCenter.publisherList[c];if(u.localStream==this.localStream){var d=null===(r=u.publisher.peerConnection)||void 0===r?void 0:r.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));d&&d.replaceTrack(s);break}}var h=this.localStream.getAudioTracks()[0];return h&&(s.enabled=h.enabled,this.localStream.removeTrack(h)),this.localStream.addTrack(s),a&&a.setAudio(s),!0},e.prototype.initMediaTrack=function(e){e.getVideoTracks().length>0&&(this.videoTrack=e.getVideoTracks()[0],this.originVideoTrack=this.videoTrack),e.getAudioTracks().length>0&&(this.audioTrack=e.getAudioTracks()[0])},e.prototype.onAudioTrackChange=function(e){},e.prototype.getViewer=function(){return this.localStream&&!this.rtcViewer&&(this.rtcViewer=new u.StreamView(this.localStream,this)),this.rtcViewer},e}();t.ZegoPreview=h},1547:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPublish=void 0;var n=r(6706),i=r(4767),s=r(3409),a=r(608),c=r(3529),u=r(1089),l=r(7646),d=r(6454),h=c.ZegoRTCLogEvent.kZegoTaskPublishStart,p=c.ZegoRTCLogEvent.kZegoTaskSDKPublishStream,f=c.ZegoRTCLogEvent.kZegoStartPublish,_=function(){function e(e,t,r,o,i,a,c){var u=this;this.curCBState={state:"NO_PUBLISH",code:0},this._state=n.ENUM_PUBLISH_STATE.stop,this.lastState=n.ENUM_PUBLISH_STATE.stop,this.sessionId=0,this.sessionToken="",this.candidateInfo=[],this.qualityTimer=null,this.publishQualityList=[],this.maxQualityListCount=10,this.lastPublishStats={},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,videoPacketsLost:0,videoPacketsLostRate:0,googCodecName:""},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioPacketsLost:0,audioPacketsLostRate:0,googCodecName:""}},this.canvasTimer=null,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,n.getSeq)(),this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.qualitySeq=0,this.videoInfo={width:0,height:0,frameRate:0,bitRate:0,channelCount:1,audioBitrate:48e3,minBitrate:0,keyFrameInterval:2},this.mediaStreamConfig=null,this.offerSeq=0,this.peerConnection=null,this.qualityCount=0,this.closeSessionSignal=!1,this.channelCount=1,this.localSdpOrder=[],this.remoteSdpOrder=[],this.videoCodec="H264",this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.stop,this.isExternal=!1,this.negoInterval=25e3,this.publishEvent=!1,this.cameraState="on",this.microState="on",this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[],this.isPeer=!1,this.peerFailCount=0,this.peerID=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=n.ENUM_PROBE_STATE.probed,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.iceDisconnectedMaxTime=15e3,this.isUpdateSDP=!1,this.isUdpSuccess=!1,this.toBeReplacedTracks={},this.send_seq=0,this.dataChannelState=0,this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.answerSdpTime=0,this.streamConnectIP="",this.mediaSideInfos=[],this.lowMediaSideInfos=[],this.sideMediaConfig={isSEIStart:!1,SEIType:n.ZegoSEIType.ZegoDefined,unregisterSeiFilter:"",uuidSend:!1},this.isRePublish=!1,this.publishStat={},this.poorQualityNum=0,this.cachedGwNodesMode=s.CachedNodesUseMode.TheSameReUse,this.rtcPublishCount=0,this.stopReason="",this.signalTime=0,this._turnToTcp=!1,this.encodeLowVideoFrame=function(e,t){u.encodeFrame(e,t,!0)},this.encodeVideoFrame=function(e,t){u.encodeFrame(e,t,!1)},this.camera_status=2,this.mic_status=2,this.streamId=e,this.logger=t,this.dataReport=r,this.qualityTimeInterval=o,this.streamCenter=i,this.stateCenter=a,this.videoCodec=this.stateCenter.settingConfig.getSetting("publish_video_codec"),this.previewer=c,this.localStream=c.localStream,c.onAudioTrackChange=function(e){var t=u.peerConnection&&u.peerConnection.getSenders().find((function(t){var r;return(null===(r=t.track)||void 0===r?void 0:r.kind)===e.kind}));t?(t.replaceTrack(e),u.logger.info("zc.oatc remote audio track change success")):u.logger.warn("zc.oatc stream has not sender")},this.initStreamReport()}return e.prototype.updateCBState=function(e){var t=this,r=Object.keys(e).some((function(r){return e[r]!==t.curCBState[r]}));return r&&(this.curCBState=e),r},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this.lastState=this._state,this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lowStream",{get:function(){var e;return null===(e=this.previewer)||void 0===e?void 0:e.lowStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceStateDisConnect",{get:function(){return[n.ENUM_PUBLISH_STATE_NEGO.iceClosed,n.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,n.ENUM_PUBLISH_STATE_NEGO.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLastConnected",{get:function(){return this.lastState===n.ENUM_PUBLISH_STATE.publishing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":"udp"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ip",{get:function(){var e,t;return null===(t=null===(e=this.gwNode)||void 0===e?void 0:e.split(":"))||void 0===t?void 0:t[0]},enumerable:!1,configurable:!0}),e.prototype.initStreamReport=function(){this.reportSpan=this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.I,{key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:this.streamId},{key:p.event,par:this.streamId},p.event,!0),this.reportBeginTime=(new Date).getTime()},e.prototype.publishStateUpdateError=function(e,t,r,o){this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  call ",this.streamId+" "+JSON.stringify(e));var i=this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:this.streamId},{key:""},c.ZegoRTCLogEvent.kZegoTaskPublishStreamStateError.event);i.setAttributes({error:null==e?void 0:e.code,message:null==e?void 0:e.message}),i.end(),this.streamId&&this.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.error,this.streamId,e,t,r,o),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  ended")},e.prototype.netProbeToReDispatch=function(){this.publishStateUpdateError(c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor)},e.prototype.resetPublish=function(){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_PUBLISH+"   "+this.streamId+" call"),this.state=n.ENUM_PUBLISH_STATE.stop,this.publishEvent=!1,null==this.peerConnection&&null==this.peerConnection||(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.clearPublishQualityTimer(),this.clearCanvasTimer(),this.signal&&(this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId)),this.sessionSeq=0,this.offerSeq=0,this.candidateInfo=[],this.publishQualityList=[],this.qualityUploadLastTime=0,this.resetEncBitrate(),this.isUpdateSDP=!1},e.prototype.clearPublishQualityTimer=function(){null!=this.qualityTimer&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPublishStats={},this.qualityCount=0,this.poorQualityNum=0},e.prototype.clearCanvasTimer=function(){null!=this.canvasTimer&&(clearInterval(this.canvasTimer),this.canvasTimer=null)},e.prototype.shouldSendCloseSession=function(){return this.state!=n.ENUM_PUBLISH_STATE.stop&&this.state!=n.ENUM_PUBLISH_STATE.waitingSessionRsp},e.prototype.startPublish=function(e,t,r,o,n){var i,s,c,l,d,f,_,g,m,v,y,b,S,E=this;if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" called"),this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){var T;this.localStream=t,this.mediaStreamConfig=o,this.channelCount=o.channelCount,this.publishOption=n||{},(null==n?void 0:n.SEIType)&&(this.sideMediaConfig.SEIType=n.SEIType),this.currentQuality.video.muteState=(null===(s=null===(i=this.previewer)||void 0===i?void 0:i.videoTrack)||void 0===s?void 0:s.enabled)?"0":"1",this.currentQuality.audio.muteState=this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&o&&(o.externalCapture||o.externalMediaStream)&&(this.localStream.onaddtrack=function(){var e,t,r,o;E.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+E.streamId+" Track added");var n=[];(null===(e=E.previewer)||void 0===e?void 0:e.videoTrack)&&n.push(null===(t=E.previewer)||void 0===t?void 0:t.videoTrack);var i=E.localStream.getAudioTracks();if(n.length>1){var s=null===(r=E.peerConnection)||void 0===r?void 0:r.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.id)===E.localStream.getVideoTracks()[0].id}));null==s||s.replaceTrack(n[1]),E.localStream.removeTrack(n[0])}else i.length>1&&(s=null===(o=E.peerConnection)||void 0===o?void 0:o.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.kind)===i[1].kind})),null==s||s.replaceTrack(i[1]),E.localStream.removeTrack(i[0]))}),r&&(this.videoInfo=r),n&&n.videoCodec&&(this.videoCodec=n.videoCodec);var w=null===(c=this.previewer)||void 0===c?void 0:c.previewType;switch(w){case"camera":T=this.stateCenter.settingConfig.getSetting("camera_video_bitrate",!0);break;case"screen":T=this.stateCenter.settingConfig.getSetting("screen_video_bitrate",!0);break;case"custom":T=this.stateCenter.settingConfig.getSetting("custom_video_bitrate",!0)}void 0!==T&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+w+" "+T),this.videoInfo.bitRate=T);var C=this.stateCenter.settingConfig.getSetting("bitrate_mode",!0);C&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting bitrate_mode "+C),this.videoInfo.startBitrate=C);var I=this.stateCenter.settingConfig.getSetting("publish_video_codec",!0);if(I&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting publish_video_codec "+I),this.videoCodec=I),"boolean"==typeof(null==n?void 0:n.isSEIStart)&&(this.sideMediaConfig.isSEIStart=null==n?void 0:n.isSEIStart),this.sideMediaConfig.isSEIStart){var O=a.ClientUtil.isSupportEncodedTransforms();"H264"===this.videoCodec&&O||(this.sideMediaConfig.isSEIStart=!1)}(null===(l=this.stateCenter.seiConfig)||void 0===l?void 0:l.unregisterSEIFilter)&&(this.sideMediaConfig.unregisterSeiFilter=null===(d=this.stateCenter.seiConfig)||void 0===d?void 0:d.unregisterSEIFilter),this.stateCenter.reporter.spanSetAttributes({key:h.event,par:this.streamId},{video_en_codec_id:h.video_en_codec_id("VP8"==this.videoCodec?2:0),audio_c_channel_count:h.audio_c_channel_count(2==this.channelCount?2:1),audio_en_bps:h.audio_en_bps(this.videoInfo.audioBitrate),aec_level:h.aec_level(1==o.AEC?2:0==o.AEC?0:2),ans_level:h.ans_level(1==o.ANS?2:0==o.ANS?0:2),agc:h.agc(1==o.AGC||0!=o.AGC),video_activate:h.video_activate(!!(null===(_=null===(f=this.previewer)||void 0===f?void 0:f.videoTrack)||void 0===_?void 0:_.enabled)),audio_activate:h.audio_activate(!!(null===(m=null===(g=this.previewer)||void 0===g?void 0:g.audioTrack)||void 0===m?void 0:m.enabled)),scenario:this.stateCenter.scenario}),this.reportSpan.setAttributes({room_id:p.room_id(null===(y=null===(v=this.streamCenter.publisherList[this.streamId])||void 0===v?void 0:v.room)||void 0===y?void 0:y.roomID),room_sid_string:p.room_sid_string(null===(S=null===(b=this.streamCenter.publisherList[this.streamId])||void 0===b?void 0:b.room)||void 0===S?void 0:S.roomSessionID),max_retry_interval:p.max_retry_interval(this.stateCenter.streamRetryTime),scenario:this.stateCenter.scenario,use_resource_type:p.use_resource_type(["rtc"])}),this.isPeer?this.createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.createSession(),this.negoTimer=setTimeout((function(){E.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" waiting timeout"),E.publishStateUpdateError(h.error.kPublishNegoTimeoutError)}),this.negoInterval)}else this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" streamId is null")},e.prototype.activateSEIInsert=function(e,t){return new Promise((function(e,t){e(!1)}))},e.prototype.createSession=function(e,t){var r,o,i,s=this;this.sessionSeq=(0,n.getSeq)();var a=this.streamId;1==this.streamCenter.testEnvironment&&(a="zegotest-"+this.streamCenter.appid+"-"+this.streamId),this.streamCenter.gwNode&&(this.gwNode=this.streamCenter.gwNode);var l=this.stateCenter.settingConfig.getSetting("gw_nodes");l&&l instanceof Array&&l.length>0&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(l)),this.gwNodeList=l,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var d=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);d&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting udp_or_tcp "+d),this._turnToTcp="tcp"===d),this._turnToTcp&&(this.isPeer=!1);var p="",f=[];this.stateCenter.idName&&f.push("zguid="+this.stateCenter.idName);var _=(null===(o=null===(r=this.streamCenter.publisherList[this.streamId])||void 0===r?void 0:r.room)||void 0===o?void 0:o.roomID)||(null===(i=this.stateCenter.roomList[0])||void 0===i?void 0:i.roomID);_&&f.push("zgrid="+_);var g=c.ZegoRTCLogEvent.kZegoPublishCreateSession;if(this.isPeer){var m=(new Date).getTime();f.length>0&&(p=f.join("&"));var v=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishCreateSession.event,this.parentSpanKey);this.signal.createSessionWithSdp({seq:this.sessionSeq,type:0,mode:0,streamId:a,videoInfo:this.videoInfo,strAuthParam:this.publishOption&&this.publishOption.streamParams||"",sdp:t||e.sdp,serverHost:this.gwNode,params:p},(function(e,t,r){var o=(new Date).getTime();s.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session time "+(o-m)),v.setAttributes({webrtc_sid:t,sdp:g.sdp(r.sdp),gw_nodes:g.gw_nodes(r.gw_nodes),gw_nodes_ttl:g.gw_nodes(r.gw_nodes_ttl),gw_version:g.gw_version(r.gw_version)}),v.end(),s.stateCenter.reporter.spanSetAttributes({key:h.event,par:s.streamId},{gw_version:h.gw_version(r.gw_version)}),s.stateNego!==n.ENUM_PUBLISH_STATE_NEGO.iceConnected&&s.getSpan(c.ZegoRTCLogEvent.kZegoPublishIceConnected.event,s.parentSpanKey,"",!0),s.handleCreateSessionWithSdpResp(e,t,r)}),(function(e,t){if(s.sessionSeq==t){var r=e==n.SEND_MSG_TIMEOUT?h.error.kSessionTimeoutError:h.error.kSessionRequestError;v.setAttributes({try_cnt:s.peerFailCount}),s.stateCenter.reporter.setError(v,r),s.publishStateUpdateError(r)}else s.logger.warn(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")}))}else{f.length>0&&(p=f.join("&"));var y=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishCreateSession.event,this.parentSpanKey);this.signal.createSession(this.sessionSeq,0,0,a,this.publishOption&&this.publishOption.streamParams,this.gwNode,p,(function(e,t,r){y.setAttributes({webrtc_sid:g.webrtc_sid(t),gw_nodes:g.gw_nodes(r.gw_nodes),gw_nodes_ttl:g.gw_nodes(r.gw_nodes_ttl),gw_version:g.gw_version(r.gw_version)}),y.end(),s.stateCenter.reporter.spanSetAttributes({key:h.event,par:s.streamId},{gw_version:h.gw_version(r.gw_version)}),s.handleCreateSessionResp(e,t,r)}),(function(e,t){if(s.sessionSeq==t){var r=e==n.SEND_MSG_TIMEOUT?h.error.kSessionTimeoutError:h.error.kSessionRequestError;s.stateCenter.reporter.setError(y,r),s.publishStateUpdateError(r)}else s.logger.warn(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")}))}this.state=n.ENUM_PUBLISH_STATE.waitingSessionRsp,this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" called success"),this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.start},e.prototype.handleCreateSessionResp=function(e,t,r){var o=r.turn_server,n=o.split("?")[0]&&o.split("?")[0].slice(5),i=this.streamCenter.server.split("?"),s=i[1]&&i[1].slice(2),a="webrtc://".concat(n,"/").concat(s,"/").concat(this.streamId);if(this.stateCenter.reporter.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:r.session_id,url:a}),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" sessionId:"+r.session_id),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var c=0,l=(new Date).getTime();this.reportBeginTime&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create signal time "+(c=l-this.reportBeginTime)),this.signalTime=c),this.answerSdpTime=l,0!==r.result?(this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session failed "+r.result),this.publishStateUpdateError(h.error.kSessionRequestError)):(this.sessionId=r.session_id,this.sessionToken=r.session_token,this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session success "+this.sessionId),this.setGwNodes(r,!1),this.onCreatePublishSessionSuccess(r))}else this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,r){var o=this;if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" sessionId:"+t),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var n=0,i=(new Date).getTime();if(this.reportBeginTime&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create signal time "+(n=i-this.reportBeginTime)),this.signalTime=n),this.answerSdpTime=i,0!==r.result)this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session failed "+r.result),this.publishStateUpdateError({code:h.error.kSessionRequestError.code,message:h.error.kSessionRequestError.message+" result:"+r.result});else{this.sessionId=t,this.sessionToken=r.session_token,this.setGwNodes(r,!1),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" get remote session success "+this.streamId);var s=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,r){if(s){var n=(performance.now()-s).toFixed(0);s=void 0,o.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" ".concat(o.streamId,", cmd: CloseSessionPush, cost_time: ").concat(n))}o.onRecvCloseSession(e,t,r)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,r){o.onRecvResetSession(e,t,r)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,t,r){if(s){var n=(performance.now()-s).toFixed(0);s=void 0,o.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" ".concat(o.streamId,", cmd: PublishEventPush, cost_time: ").concat(n))}o.onRecvPublishEvent(e,t,r)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,r){o.onRecvClientInfo(e,t,r)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,t,r){o.onRecvUpdateMediaDescription(e,t,r)})),this.onGetRemoteOfferSuccess(r.sdp)}}else this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")},e.prototype.setGwNodes=function(e,t){var r;if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_GW_NODES+" "+this.streamId+" "+JSON.stringify(null==e?void 0:e.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),(null===(r=e.gw_nodes)||void 0===r?void 0:r.length)>0){var o=this.sortGwNodes(e.gw_nodes,this.retryFailGwNodes,t);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(o,e.gw_nodes_ttl)}},e.prototype.resetGwNodes=function(){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_GW_NODES+" "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},e.prototype.sortGwNodes=function(e,t,r){var o=JSON.parse(JSON.stringify(e));if(t.forEach((function(e){var t=o.indexOf(e);t>=0&&(o.splice(t,1),o.push(e))})),!r){var n=o.findIndex((function(t){return t===e[0]}));n>0&&(o.splice(n,1),o.unshift(e[0]))}return o},e.prototype.handleDispatchedGwNodes=function(e,t){if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_DISPATCHED_GW_NODES+" "+this.streamId+" "+JSON.stringify(e)),Array.isArray(e)){this.gwNodeList=e.length>0?e:this.gwNodeList,this.gwNode=e.length>0?this.gwNodeList[0]:this.gwNode;var r=0===t?60:t;this.gwNodesTTL=r?(new Date).getTime()+1e3*r:this.gwNodesTTL,e.length>0&&this.streamCenter.updateCachedGwNodesList(this,!0,e,r)}},e.prototype.onCreatePublishSessionSuccess=function(e){var t=this,r=u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS;this.logger.info(r+" "+this.streamId+" called");var o=[];if(e.turn_server){var n=e.turn_server.split(";");this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var i=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(i)&&(this.streamCenter.maxUdpFailNum=i);var s=this.streamCenter,a=s.autoSwitchProtocol,c=s.maxUdpFailNum,l=s.udpFailNum;this.logger.info(r+"  autoToTcp: ".concat(a,", udpFailNum: ").concat(l,", maxUdpFailNum: ").concat(c,".")),a&&!this._turnToTcp&&l>=c&&(this.logger.info(r+" switch to tcp. "),this._turnToTcp=!0);var d=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);d&&(this.logger.info(r+" setting udp_or_tcp "+d),this._turnToTcp="tcp"===d);var h,p=n.filter((function(e){return e.indexOf("udp")>-1})),f=n.filter((function(e){return e.indexOf("tcp")>-1}));h=this._turnToTcp?f.length>0?f:p.map((function(e){return e.replace("udp","tcp")})):p,this.logger.info(r+" over tcp "+JSON.stringify(h)),o.push.apply(o,h)}e.stun_server&&o.push(e.stun_server);var _={iceTransportPolicy:"all",iceServers:[{urls:o,username:e.turn_username,credential:e.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart};this.logger.info(r+" "+this.streamId+" username: "+e.turn_username),this.logger.info(r+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(_);var g=performance.now();this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,r,o){t.onRecvCandidateInfo(e,r,o)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,o,n){if(g){var i=(performance.now()-g).toFixed(0);g=void 0,t.logger.info(r+" ".concat(t.streamId,", cmd: CloseSessionPush, cost_time: ").concat(i))}t.onRecvCloseSession(e,o,n)})),this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,r,o){t.onRecvMediaDescription(e,r,o)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,r,o){t.onRecvResetSession(e,r,o)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,o,n){if(g){var i=(performance.now()-g).toFixed(0);g=void 0,t.logger.info(r+" ".concat(t.streamId,", cmd: PublishEventPush, cost_time: ").concat(i))}t.onRecvPublishEvent(e,o,n)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,r,o){t.onRecvClientInfo(e,r,o)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,r,o){t.onRecvUpdateMediaDescription(e,r,o)})),this.logger.info(r+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t,r,o,n=this,i=u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){n.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){n.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){n.onIceConnectionStateChange(e)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){n.logger.info(i+" "+n.streamId+" data channel open"),n.dataChannelState=1},this.dataChannel.onclose=function(e){n.logger.error(i+" "+n.streamId+" data channel close ")});var s=[],a=[];if(this.lowStream&&this.lowStream.getVideoTracks().forEach((function(e){var t,r=null===(t=n.peerConnection)||void 0===t?void 0:t.addTrack(e,n.lowStream);n.sideMediaConfig.isSEIStart&&r&&"function"==typeof r.createEncodedStreams&&n.createVideoSenderTransform(r,!0)})),this.localStream){if(this.localStream.getTracks().forEach((function(e){var t,r=null===(t=n.peerConnection)||void 0===t?void 0:t.addTrack(e,n.localStream);n.sideMediaConfig.isSEIStart&&r&&"function"==typeof r.createEncodedStreams&&("video"===e.kind?n.createVideoSenderTransform(r):"audio"===e.kind&&n.createAudioSenderTransform(r))})),!(null===(t=this.previewer)||void 0===t?void 0:t.videoTrack)&&this.sideMediaConfig.isSEIStart){this.videoInfo.bitRate||(this.videoInfo.bitRate=50);var l=this.addCanvasStreamVideoTrack(),d=this.peerConnection.addTrack(l,this.localStream);d&&"video"==l.kind&&this.createVideoSenderTransform(d)}(null===(r=this.previewer)||void 0===r?void 0:r.videoTrack)&&(s=[null===(o=this.previewer)||void 0===o?void 0:o.videoTrack]),a=this.localStream.getAudioTracks(),s.length>0&&this.logger.info(i+" "+this.streamId+" video device: "+s[0].label),a.length>0&&this.logger.info(i+" "+this.streamId+" audio device: "+a[0].label)}var p={offerToReceiveAudio:a.length>0?1:0,offerToReceiveVideo:s.length>0?1:0};this.logger.info(i+" "+this.streamId+" createOffer: "+JSON.stringify(p));var f=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishCreateOffer.event,this.parentSpanKey);this.peerConnection.createOffer(p).then((function(e){f.setAttributes({sdp:c.ZegoRTCLogEvent.kZegoPublishCreateOffer.sdp(e.sdp)}),f.end(),n.onCreateOfferSuccess(e)}),(function(e){n.logger.error(i+" "+n.streamId+" create offer error "+e.toString()),n.stateCenter.reporter.setError(f,{code:h.error.kCreateOfferError.code,message:e.toString()}),n.publishStateUpdateError(h.error.kCreateOfferError,!0)}))},e.prototype.sendSEI=function(e){var t,r;if("H264"!==this.videoCodec)return this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" code not support"),!1;if(!this.sideMediaConfig.isSEIStart)return this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" not enable to send sei"),!1;var o=null===(t=this.peerConnection)||void 0===t?void 0:t.getSenders().filter((function(e){return e.track&&"video"===e.track.kind}));return o&&"function"!=typeof(null===(r=o[0])||void 0===r?void 0:r.createEncodedStreams)?(this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" browser not support"),!1):this.sideMediaConfig.SEIType==n.ZegoSEIType.UserUnregister&&e.byteLength<=16?(this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" inData size should greater than 16"),!1):this.mediaSideInfos.length>=10?(this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" side info count limit"),!1):(this.mediaSideInfos.push(e.buffer),this.lowStream&&this.lowMediaSideInfos.push(e.buffer),!0)},e.prototype.createAudioSenderTransform=function(e){var t=e.createEncodedStreams(),r=new TransformStream({transform:this.encodeAudioFrame});t.readable.pipeThrough(r).pipeTo(t.writable)},e.prototype.encodeAudioFrame=function(e,t){t.enqueue(e)},e.prototype.createVideoSenderTransform=function(e,t){void 0===t&&(t=!1);var r=e.createEncodedStreams(),o=new TransformStream({transform:t?this.encodeLowVideoFrame:this.encodeVideoFrame});r.readable.pipeThrough(o).pipeTo(r.writable)},e.prototype.encodeSEINalu=function(e){var t=e.byteLength,r=parseInt(t/255),o=t%255,i=1+(r+1)+t+1,s=new ArrayBuffer(i),a=new DataView(s),c=0;a.setUint8(c++,this.sideMediaConfig.SEIType===n.ZegoSEIType.UserUnregister?5:243);for(var u=0;u<r;u++)a.setUint8(c++,255);a.setUint8(c++,o);var l=new DataView(e);for(u=0;u<(null==e?void 0:e.byteLength);u++)a.setInt8(c++,l.getInt8(u));a.setInt8(c++,128);var d=[];return{rbspView:a,ebspLength:i+d.length,ebspPreventProcessPos:d.map((function(e,t){return e+t}))}},e.prototype.encodeFrame=function(e,t,r){var o=r?this.lowMediaSideInfos:this.mediaSideInfos;if(o.length>0){for(var n=new DataView(e.data),i=[],s=0,a=0;a<o.length;a++){var c=this.encodeSEINalu(o[a]);s+=5+(S=c.ebspLength),i.push(c)}r?this.lowMediaSideInfos=[]:this.mediaSideInfos=[];for(var u=new ArrayBuffer(s+e.data.byteLength),d=new DataView(u),h=0,p=new l.H264Parser(n),f=0,_=!1,g=!1;p.NextNalu();){var m=31&n.getUint8(p.nalu_start+p.start_code_size);if(7==m)_=!0,f+=p.nalu_size;else if(8==m)g=!0,f+=p.nalu_size;else if(9==m)continue;if(_&&g)break}for(var v=0;v<f;v++)d.setInt8(h++,n.getInt8(v));for(a=0;a<i.length;a++){var y=i[a],b=y.rbspView,S=y.ebspLength,E=y.ebspPreventProcessPos;d.setUint8(h++,0),d.setUint8(h++,0),d.setUint8(h++,0),d.setUint8(h++,1),d.setUint8(h++,6);for(var T=0,w=0;w<S;w++)E.indexOf(w)>-1?(d.setInt8(h++,3),T++):d.setInt8(h++,b.getInt8(w-T))}for(v=f;v<e.data.byteLength;v++)d.setInt8(h++,n.getInt8(v));e.data=u}t.enqueue(e)},e.prototype.onCreateOfferSuccess=function(e,t,r,o){var n,s=this;t&&(this.isUpdateSDP=!0,o&&(this.updateSDPCallBack=o)),this.videoInfo.bitRate>0&&(e.sdp=this.updateBandwidthRestriction(e.sdp,this.videoInfo.bitRate)),e.sdp=e.sdp.replace(/sendrecv/g,"sendonly");var a=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(a){var l=a.replace(/sendonly/,"sendrecv");e.sdp=e.sdp.replace(a,l)}e.sdp=e.sdp.replace(/useinbandfec=\d+/,(this.videoInfo.audioBitrate?"maxaveragebitrate="+this.videoInfo.audioBitrate:"")+(2===this.videoInfo.channelCount?";stereo=1":"")),this.localSdpOrder=e.sdp.match(/m=(.\w*)\s/g)||[],this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" local sdp revert "+this.localSdpOrder.join("")),e.sdp=i.SdpUtil.getSDPByVideDecodeType(e.sdp,this.videoCodec),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2));var d=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.event,this.parentSpanKey);d.setAttributes({sdp:c.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.sdp(e.sdp)}),null===(n=this.peerConnection)||void 0===n||n.setLocalDescription(e).then((function(){d.end(),s.onSetLocalDescriptionSuccess(e,r)}),(function(e){s.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+s.streamId+" error "+e.toString()),s.stateCenter.reporter.setError(d,{code:h.error.kSetLocalDescError.code,message:e.toString()}),s.publishStateUpdateError(h.error.kSetLocalDescError,!0)}))},e.prototype.updateBandwidthRestriction=function(e,t){var r="AS";return"firefox"===this.stateCenter.browser&&(t=1e3*(t>>>0),r="TIAS"),-1===e.indexOf("b="+r+":")?e.replace(/(m=video.*\r\nc=IN.*\r\n)/g,"$1b="+r+":"+t+"\r\n"):(e=e.replace(new RegExp("b="+r+":.*\r\n","g"),"b="+r+":"+t+"\r\n")).replace("b="+r+":"+t+"\r\n","")},e.prototype.onSetLocalDescriptionSuccess=function(e,t){var r,s,a,l=this;this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),!this.isUpdateSDP&&(this.state=n.ENUM_PUBLISH_STATE.waitingOfferRsp),t&&(this.videoInfo=o(o({},this.videoInfo),t));var d=!1,p=null===(r=this.previewer)||void 0===r?void 0:r.previewType,f=this.stateCenter.settingConfig;"camera"===p?d=f.getSetting("camera_hard_encode"):"screen"===p?d=f.getSetting("hardware_encode"):"custom"===p&&(d=f.getSetting("custom_hard_encode"));var _=!d;this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" ".concat(null===(s=this.previewer)||void 0===s?void 0:s.previewType," software encode: ").concat(_,", "));var g=i.SdpUtil.getSDPByVideDecodeType(e.sdp,this.videoCodec,_,this.stateCenter.engineConfig.encodecSelectionMode),m={sdp:g,width:this.videoInfo.width,height:this.videoInfo.height,frameRate:this.videoInfo.frameRate,video_min_kpbs:this.videoInfo.bitRate,video_max_kpbs:this.videoInfo.bitRate,audio_kpbs:48,keyframe_intv:Math.floor((null===(a=this.videoInfo)||void 0===a?void 0:a.keyFrameInterval)||2)};if(this.offerSeq=(0,n.getSeq)(),this.isUpdateSDP){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" update sdp");var v=o(o({},m),{seq:this.sessionSeq,peerID:this.peerID,type:0});this.signal.sendMediaDescUpdateReq(this.offerSeq,this.sessionId,v,(function(e,t,r){}),(function(e,t){l.updateSDPCallBack&&l.updateSDPCallBack(-1),l.publishStateUpdateError(e==n.SEND_MSG_TIMEOUT?h.error.kUpdateMediaDescriptionTimeOut:h.error.kUpdateMediaDescriptionError)}))}else if(this.isPeer)this.createSession(e,g);else{var y=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.event,this.parentSpanKey);this.signal.sendMediaDesc(this.offerSeq,this.sessionId,0,m,(function(e,t,r){y.setAttributes({webrtc_sid:c.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.webrtc_sid(t),mediaDescription:{width:m.width,height:m.height,frameRate:m.frameRate,video_min_kpbs:m.video_min_kpbs,video_max_kpbs:m.video_max_kpbs,audio_kpbs:m.audio_kpbs,keyframe_intv:m.keyframe_intv},sdp:m.sdp}),y.end(),l.offerSeq==e&&l.sessionId==t?(l.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+l.streamId+" send success"),l.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+l.streamId+" send success stateNego:waiterAnswer"),l.stateNego=n.ENUM_PUBLISH_STATE_NEGO.waiterAnswer,l.state=n.ENUM_PUBLISH_STATE.waitingServerAnswer):l.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+l.streamId+" seq or sessionId is not equal")}),(function(e,t){l.stateCenter.reporter.setError(y,{code:h.error.kMediaDescError.code,message:e.toString()}),l.publishStateUpdateError(h.error.kMediaDescError)})),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" call success")}},e.prototype.onRecvUpdateMediaDescription=function(e,t,r){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received"),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendUpdateMediaDescAck(e,this.sessionId,0,this.peerID),1==r.type?this.onGetRemoteOfferSuccess(r.sdp):this.publishStateUpdateError(h.error.kMediaDescError)},e.prototype.onRecvMediaDescription=function(e,t,r){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received");var o=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.event,this.parentSpanKey);o.setAttributes({sdp:c.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.sdp(r.sdp)}),o.end(),this.state==n.ENUM_PUBLISH_STATE.waitingServerAnswer?(this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.waitingCandidate,this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendMediaDescAck(e,this.sessionId,0),1==r.type?this.onGetRemoteOfferSuccess(r.sdp):this.publishStateUpdateError(h.error.kMediaDescError)):this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,r,o,i=this;this.videoInfo.audioBitrate&&48e3!==this.videoInfo.audioBitrate&&(e=e.replace(/maxaveragebitrate=(\d+)/,"maxaveragebitrate="+this.videoInfo.audioBitrate)),this.remoteSdpOrder=e.match(/m=(.\w*)\s/g)||[],this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+NaN+this.remoteSdpOrder.join("")),this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var s=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(s)&&(this.streamCenter.maxUdpFailNum=s);var a=this.streamCenter,l=a.autoSwitchProtocol,d=a.maxUdpFailNum,p=a.udpFailNum;this.logger.info("zp.oro.0  autoToTcp: ".concat(l,", udpFailNum: ").concat(p,", maxUdpFailNum: ").concat(d,".")),l&&!this._turnToTcp&&p>=d&&(this.logger.info("zp.oro.0 switch to tcp."),this._turnToTcp=!0);var f=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);if(f&&(this.logger.info("zp.oro.0 setting udp_or_tcp "+f),this._turnToTcp="tcp"===f),this._turnToTcp&&(null===(t=e.match(/candidate.*/g))||void 0===t||t.forEach((function(t){var r=t.replace(/udp/,"tcp");r.includes(" tcptype ")||(r=r.replace(" typ host "," typ host tcptype passive ")),e=e.replace(t,r)}))),this.logger.info("zp.oro.0 "+this.streamId+" sdp revert "+this.localSdpOrder.join("")+" "+this.remoteSdpOrder.join("")),this.localSdpOrder.join()!==this.remoteSdpOrder.join()&&this.localSdpOrder.length==this.remoteSdpOrder.length){var _=new RegExp("[\\s\\S]*"+this.remoteSdpOrder[0]).exec(e)[0].replace(this.remoteSdpOrder[0],""),g=[],m="";this.localSdpOrder.forEach((function(t){var r=i.remoteSdpOrder.findIndex((function(e){return e==t})),o=new RegExp(t+"[\\s\\S]*"+(i.remoteSdpOrder[r+1]||"")).exec(e)[0].replace(i.remoteSdpOrder[r+1],""),n=/a=mid:(\w)/.exec(o)[1];g.push(n),m+=o||""})),e=_.replace(/a=group:BUNDLE.*/,"a=group:BUNDLE "+g.join(" "))+m,this.localSdpOrder=[],this.remoteSdpOrder=[]}var v=e.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/);if("chrome"==this.stateCenter.browser){var y=0,b=0;if(this.videoInfo.bitRate&&"target"===this.videoInfo.startBitrate&&(y=this.videoInfo.bitRate),this.videoInfo.minBitrate)b=this.videoInfo.minBitrate;else if("screen"===this.previewer.previewType){var S=function(e){var t=0,r=e.frameRate,o=e.width*e.height*(r<=30?r:30);return"number"==typeof o?(t=o<=3888e3?200:o<=6912e3?400:o<=15552e3?700:o<=27648e3?1e3:2e3)>e.bitRate&&(t=e.bitRate):t=parseInt(.6*e.bitRate+""),{minBitrate:t,resolution:o}}(this.videoInfo);b=S.minBitrate,this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" resolution: ".concat(S.resolution,", min bitrate: ").concat(b))}var E=[];if(b&&E.push("x-google-min-bitrate=".concat(b)),y&&E.push("x-google-start-bitrate=".concat(y)),null!==v&&E.length){var T,w=v[3];T=-1!==w.indexOf("apt=")?"a=fmtp:96 "+E.join(";")+"\n"+w:"".concat(w,";").concat(E.join(";")),e=e.replace(w,T)}}if(this.videoInfo.bitRate>0){var C=/b=AS.*(\r\n|\n)/.test(e);e=C?e.replace(/AS:(\d+)/,"AS:"+this.videoInfo.bitRate):e.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/,"$&b=AS:".concat(this.videoInfo.bitRate,"\n"));var I=null===(r=this.peerConnection)||void 0===r?void 0:r.getSenders().filter((function(e){return e.track&&"video"===e.track.kind}));null==I||I.forEach((function(e){var t,r,o,n,s,a;if(e&&e.getParameters&&e.setParameters){var c=e.getParameters();if(c.encodings&&0!=c.encodings.length||(c.encodings=[{}]),(null===(t=e.track)||void 0===t?void 0:t.id)==(null===(r=i.lowStream)||void 0===r?void 0:r.getVideoTracks()[0].id)){var u=null===(o=i.previewer)||void 0===o?void 0:o.lowStreamConfig.bitRate;u&&(c.encodings[0].maxBitrate=1e3*u)}else{c.encodings[0].maxBitrate=1e3*i.videoInfo.bitRate;var l=i.lastPublishStats.frameWidth,d=(null===(s=null===(n=i.previewer)||void 0===n?void 0:n.cameraMaxResolution)||void 0===s?void 0:s.maxWidth)||0,h=null===(a=i.previewer.videoTrack)||void 0===a?void 0:a.getSettings().width,p=l?Math.min(d,l):d;if(d&&h){var f=Math.max(p/h,1);c.encodings[0].scaleResolutionDownBy=f}}e.setParameters(c)}}))}this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" remoteSdp:",e);var O={type:"answer",sdp:e,toJSON:function(){}},k=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.event,this.parentSpanKey);k.setAttributes({sdp:c.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.sdp(O.sdp),webrtc_sid:c.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.webrtc_sid(this.sessionId)}),null===(o=this.peerConnection)||void 0===o||o.setRemoteDescription(new RTCSessionDescription(O)).then((function(){i.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+i.streamId+" set success"),k.end(),i.stateNego==n.ENUM_PUBLISH_STATE_NEGO.iceConnected&&i.updateSDPCallBack&&(i.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+i.streamId+" update sdp success"),i.updateSDPCallBack(0),i.updateSDPCallBack=void 0,i.isUpdateSDP=!1)}),(function(e){i.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+i.streamId+" failed: "+e.toString()),k.setAttributes({error:h.error.kSetRemoteDescError.code,message:e.toString()}),k.end(),i.publishStateUpdateError(h.error.kSetRemoteDescError,!0)})),this.state=n.ENUM_PUBLISH_STATE.waitingServerICE,this.logger.debug(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" call success")},e.prototype.onIceConnectionStateChange=function(e){var t=this;if(this.state!=n.ENUM_PUBLISH_STATE.stop&&null!=this.peerConnection){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState);var r=this.getSpan(c.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event,this.parentSpanKey,c.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);if(r.setAttributes({ice_state:c.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState)}),"connected"===this.peerConnection.iceConnectionState){if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" connected state "+this.state),this.reportBeginTime){var o=(new Date).getTime()-this.reportBeginTime;this.reportSpan.setAttributes({publish_begin_time:p.publish_begin_time(o)}),this.reportBeginTime=0}if(this.stateCenter.reporter.spanEnd({key:c.ZegoRTCLogEvent.kZegoPublishIceConnected.event,par:this.streamId},{webrtc_sid:this.sessionId}),this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.iceConnected,this.answerSdpTime){var i=(new Date).getTime()-this.answerSdpTime;this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" ice time "+i)}this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.publishEvent?this.publishSuccess():(this.firstGetStatsTimer&&clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null,this.firstGetStatsTimer=setTimeout((function(){var e;t.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats state "+t.state),t.state!==n.ENUM_PUBLISH_STATE.publishing&&(null===(e=t.peerConnection)||void 0===e||e.getStats().then((function(e){t.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats suc"),e.size>0&&t.publishSuccess()})))}),1e3))}else"closed"===this.peerConnection.iceConnectionState?(r.end(),this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(r.end(),this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.iceFailed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(r.end(),this.logger.warn(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected "),this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){t.checkPublishConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime)))}},e.prototype.onIceCandidate=function(e){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate),e.candidate&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate.candidate),this.state<n.ENUM_PUBLISH_STATE.connecting||this.state==n.ENUM_PUBLISH_STATE.stop?this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}):this.sendCandidateInfo([{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}]))},e.prototype.sendCandidateInfo=function(e){var t=this;if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return e.candidate.indexOf("relay")>0})))||e.length<1)this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled");else{var r=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.event,this.parentSpanKey);r.setAttributes({candidate_info:c.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.candidate_info(e)}),this.stateNego!==n.ENUM_PUBLISH_STATE_NEGO.iceConnected&&(this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.sendCandidate),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,n.getSeq)(),this.sessionId,e,(function(e,o,n){t.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),r.end()}),(function(e,o){t.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),t.stateCenter.reporter.setError(r,{code:h.error.kCandidateError.code,message:e.toString()}),t.publishStateUpdateError(h.error.kCandidateError)}))}},e.prototype.onConnectionStateChange=function(e){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState),this.state!=n.ENUM_PUBLISH_STATE.stop&&null!=this.peerConnection&&"closed"===e.target.signalingState&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=n.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState))},e.prototype.onRecvCandidateInfo=function(e,t,r){var o,i=this;this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received "+JSON.stringify(r.infos));var s=this.getSpan(c.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.event,this.parentSpanKey);if(s.setAttributes({candidate_info:c.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.candidate_info(r.infos)}),s.end(),this.state==n.ENUM_PUBLISH_STATE.waitingServerICE){this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var a=0;a<r.infos.length;a++){var l={sdpMid:r.infos[a].sdpMid,sdpMLineIndex:r.infos[a].sdpMLineIndex,candidate:r.infos[a].candidate};this.logger.debug(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+""+this.streamId+" candidate "+l.candidate),null===(o=this.peerConnection)||void 0===o||o.addIceCandidate(new RTCIceCandidate(l)).then((function(){i.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+i.streamId+" add success")}),(function(e){i.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+i.streamId+" add error "+e.toString()),i.publishStateUpdateError(h.error.kCandidateError,!0)}))}this.state=n.ENUM_PUBLISH_STATE.connecting,this.getSpan(c.ZegoRTCLogEvent.kZegoPublishIceConnected.event,this.parentSpanKey,"",!0).setAttributes({webrtc_sid:this.sessionId})}else this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvCloseSession=function(e,t,r){var o=this;this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(r));var n=this.getSpan(c.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.event,c.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);n.setAttributes({err_info:c.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.err_info(r.err_info||""),reason_info:null==r?void 0:r.reason}),n.end(),this.stateCenter.reporter.spanSetAttributes({key:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{denied_info:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.denied_info(r.err_info),stop_reason:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(e,this.sessionId,0);var i=r.err_info?JSON.parse(r.err_info.toLowerCase()):{},s=i.action?i.action:null,a=1*r.reason,l=JSON.parse(JSON.stringify(h.error.kPublishSessionClosedError));l.message+=" reason:".concat(a," ").concat(s?" action:"+s:""," ").concat((null==i?void 0:i.err)?" err:"+(null==i?void 0:i.err):""),l.message+=";".concat((0,d.translate)(a,s,null==i?void 0:i.err)),1011===i.err&&(l=h.error.kMediaServerForbidError),1014===i.err&&(l=h.error.kPublishTokenExpiredError),this.negoTimer&&clearTimeout(this.negoTimer);var p=!([4,8,10,11,12,14,18,24,26,27,28].includes(a)||[2,3,4,5,6].includes(s)),f=!1;if(!this._turnToTcp){if([8,10].includes(a)||[18,15].includes(a)&&2===s&&[3001,3002].includes(i.err)){this.streamCenter.udpFailNum++;var _=this.streamCenter;_.autoSwitchProtocol&&_.udpFailNum>=_.maxUdpFailNum&&(this.isPeer=!1,this.streamCenter.setIsPeer(!1),f=!0)}else this._turnToTcp||(this.streamCenter.udpFailNum=0);var g=this.gwNodeList.findIndex((function(e){return e==o.gwNode}))===this.gwNodeList.length-1,m=[3001,3002,3003,3004,3005,3006,3007,3008].includes(i.err);g&&m&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" switch tcp by all fail"),this.stateCenter.turnToTcp=!0)}this.publishStateUpdateError(l,p,i,f)},e.prototype.onRecvResetSession=function(e,t,r){if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" received "),this.getSpan(c.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event,c.ZegoRTCLogEvent.kZegoTaskRTCPublish.event).end(),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var o=h.error.kPublishSessionClosedError;this.negoTimer&&clearTimeout(this.negoTimer),this.publishStateUpdateError(o)}else this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvPublishEvent=function(e,t,r){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_PUBLISH_EVENT+" "+this.streamId+" received");var o=this.getSpan(c.ZegoRTCLogEvent.kZegoRTCPublishEvent.event,this.parentSpanKey,c.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);o.setAttributes({event_state:c.ZegoRTCLogEvent.kZegoRTCPublishEvent.event_state(r.event),webrtc_sid:t}),o.end(),this.publishEvent=!0,this.firstGetStatsTimer&&(clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null),this.stateNego===n.ENUM_PUBLISH_STATE_NEGO.iceConnected&&0==r.event&&this.publishSuccess()},e.prototype.onRecvClientInfo=function(e,t,r){this.stateCenter.clientIP!==r.clientip&&this.logger.warn(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+r.clientip),this.stateCenter.clientIP=r.clientip,this.peerID=r.peer_id,this.streamConnectIP=r.clientip,this.stateCenter.isMultiOuter=this.isMultiOuter(),this.sideMediaConfig.isSEIStart&&this.sideMediaConfig.SEIType==n.ZegoSEIType.UserUnregister&&this.sendSEIUUID();var o=this.previewer;if(o&&null!==o.activateSEIConfig){var i=null==o?void 0:o.activateSEIConfig;this.activateSEIInsert(i.action,i.infoType)}},e.prototype.sendSEIUUID=function(){var e=this;this.signal.gw.mediaStreamSEIUUIDReq((0,n.getSeq)(),this.sessionId,this.peerID,this.sideMediaConfig.unregisterSeiFilter).then((function(t){var r;0==(null===(r=null==t?void 0:t.usr_sei_filter)||void 0===r?void 0:r.result)&&(e.sideMediaConfig.uuidSend=!0)})).catch((function(e){console.error()}))},e.prototype.checkPublishConnectionFailedState=function(e){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" streamID "+this.streamId," state "+this.state+" connectionState "+e),this.publishStateUpdateError(h.error.kMediaConnectionError)},e.prototype.setPublishQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" called"),this.clearPublishQualityTimer(),this.qualityTimer=setInterval((function(){e.peerConnectionGetStats()}),this.qualityTimeInterval),this.lastPublishStats={audioPacketsLost:0,videoPacketsLost:0,videoPacketsSent:0,audioPacketsSent:0,audioRetransmittedPacketsSent:0,videoTime:(new Date).getTime(),audioTime:(new Date).getTime(),time:0,audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0,videoRetransmittedPacketsSent:0},this.qualitySeq=(0,n.getSeq)(),this.qualityCount=0)},e.prototype.getConnectionStatsPromiseList=function(){var e=this,t=[];return this.localStream.getTracks().forEach((function(r){e.peerConnection&&t.push(e.peerConnection.getStats(r))})),t},e.prototype.peerConnectionGetStats=function(){var e=this;if(this.peerConnection){var t=this.getConnectionStatsPromiseList();"chrome"==this.stateCenter.browser&&t.push(new Promise((function(t,r){var o;null===(o=e.peerConnection)||void 0===o||o.getStats((function(e){return t(e)}),(function(e){return r(e)}))}))),Promise.all(t).then((function(t){0!==t.length&&e.getPublishStats(t.filter((function(e){return e instanceof RTCStatsReport})),t[t.length-1]instanceof RTCStatsReport?null:t[t.length-1])})).catch((function(t){e.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+e.streamId+" getStats error "+t.toString())}))}},e.prototype.getPublishStats=function(e,t){var r,o,i,s=this;if(e){for(var l,d=document.querySelectorAll("video, audio"),h=0;h<d.length;h++)d[h].srcObject===this.localStream&&(l=d[h]);var p=this.streamCenter.checkPreview(this.localStream),f={scenario:this.stateCenter.scenario,sampleTimeWindow:this.qualityTimeInterval,audioCodec:"opus",audioTargetBitrate:this.videoInfo.audioBitrate/1e3||0,audioBitrate:0,videoTargetBitrate:this.videoInfo.bitRate||0,videoTargetFPS:this.videoInfo.frameRate||0,videoBitrate:0,audioFPS:0,audioLevel:0,audioInputLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,sendLevel:0,samplingRate:0,videoFPS:0,nackCount:0,pliCount:0,audioQuality:0,videoQuality:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoPacketsLost:0,videoPacketsLostRate:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,googActualEncBitrate:0,googTargetEncBitrate:0,googFrameWidthInput:0,googFrameHeightInput:0,googFrameRateInput:0,qualityLimitationReason:"",codecImplementationName:"",videoMuteState:(null===(r=null==p?void 0:p.videoTrack)||void 0===r?void 0:r.enabled)?"0":"1",audioMuteState:this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",soundLevel:null===(o=this.previewer)||void 0===o?void 0:o.soundLevel,muted:l?l.muted:void 0,paused:l?l.paused:void 0,volume:l?l.volume:void 0,sinkId:l?l.sinkId:void 0},_=this.lastPublishStats.time,g=0,m=0,v=0,y=0,b=0,S=0;e.forEach((function(e){return e.forEach((function(e){if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"audio"==e.mediaType)0!=_&&(f.audioBitrate=8*(e.bytesSent-s.lastPublishStats.audioBytesSent)/(e.timestamp-_),e.retransmittedPacketsSent=e.retransmittedPacketsSent||0,e.packetsSent=e.packetsSent||0,f.audioFPS=(e.packetsSent-(e.retransmittedPacketsSent-s.lastPublishStats.audioRetransmittedPacketsSent)-s.lastPublishStats.audioPacketsSent)/(e.timestamp-_)*1e3||0,v=(e.retransmittedPacketsSent-s.lastPublishStats.audioRetransmittedPacketsSent)/(e.packetsSent-s.lastPublishStats.audioPacketsSent)),f.audioBitrate<0&&(f.audioBitrate=0),s.lastPublishStats.audioBytesSent=e.bytesSent,s.lastPublishStats.time=e.timestamp,s.lastPublishStats.audioPacketsSentTimeStamp=e.packetsSent-s.lastPublishStats.audioPacketsSent,s.lastPublishStats.audioPacketsSent=e.packetsSent,s.lastPublishStats.audioRetransmittedPacketsSent=e.retransmittedPacketsSent;else if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"video"==e.mediaType)f.isHardwareEncode=function(e){if(e){var t=null==e?void 0:e.toLocaleLowerCase();if("unknown"!==t)return"openh264"!==t&&"libvpx"!==t}}(e.encoderImplementation),0!=_&&(f.videoBitrate=8*(e.bytesSent-s.lastPublishStats.videoBytesSent)/(e.timestamp-_),f.videoFPS=1e3*(e.framesEncoded-s.lastPublishStats.framesEncoded)/(e.timestamp-_),y=(e.retransmittedPacketsSent-s.lastPublishStats.videoRetransmittedPacketsSent)/(e.packetsSent-s.lastPublishStats.videoPacketsSent)),f.videoBitrate<0&&(f.videoBitrate=0),f.videoFPS<0&&(f.videoFPS=0),f.nackCount=e.nackCount,f.pliCount=e.pliCount,f.qualityLimitationReason=e.qualityLimitationReason,s.lastPublishStats.videoBytesSent=e.bytesSent,s.lastPublishStats.framesEncoded=e.framesEncoded,s.lastPublishStats.time=e.timestamp,s.lastPublishStats.videoPacketsSentTimeStamp=e.packetsSent-s.lastPublishStats.videoPacketsSent,s.lastPublishStats.videoPacketsSent=e.packetsSent,s.lastPublishStats.videoRetransmittedPacketsSent=e.retransmittedPacketsSent;else if("remote-inbound-rtp"==e.type&&"video"==e.kind){e.packetsLost>0&&(f.videoPacketsLost=e.packetsLost);var t=e.packetsLost-s.lastPublishStats.videoPacketsLost;f.videoPacketsLostRate=t>0?t/s.lastPublishStats.videoPacketsSentTimeStamp:0,e.packetsLost>0&&(s.lastPublishStats.videoPacketsLost=e.packetsLost),s.lastPublishStats.videoTime=e.timestamp,m=1e3*e.roundTripTime,S=e.jitter}else if("remote-inbound-rtp"==e.type&&"audio"==e.kind){e.packetsLost>0&&(f.audioPacketsLost=e.packetsLost);var r=e.packetsLost-s.lastPublishStats.audioPacketsLost;f.audioPacketsLostRate=r>0?r/s.lastPublishStats.audioPacketsSentTimeStamp:0,e.packetsLost>0&&(s.lastPublishStats.audioPacketsLost=e.packetsLost),s.lastPublishStats.audioTime=e.timestamp,g=1e3*e.roundTripTime,b=e.jitter}else if("media-source"==e.type&&("audio"==e.kind||e.id.toLowerCase().indexOf("audio")>=0))f.audioLevel=e.audioLevel||0,f.sendLevel=e.totalAudioEnergy,f.audioInputLevel=32767*e.totalAudioEnergy,f.samplingRate=e.totalSamplesDuration;else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0||e.frameWidth)){if(f.frameHeight=e.frameHeight,f.frameWidth=e.frameWidth,0===_||s.lastPublishStats.frameHeight===e.frameHeight&&s.lastPublishStats.frameWidth===e.frameWidth)0===_&&(s.lastPublishStats.frameHeight=e.frameHeight,s.lastPublishStats.frameWidth=e.frameWidth);else{var o=s.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:s.streamId},{key:""},c.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.event);o.setAttributes({webrtc_sid:c.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.webrtc_sid(s.sessionId),w:c.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.w(e.frameWidth),h:c.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.h(e.frameHeight)}),o.end(),s.lastPublishStats.frameHeight=e.frameHeight,s.lastPublishStats.frameWidth=e.frameWidth}0!=_&&(f.videoTransferFPS=1e3*(e.framesSent-s.lastPublishStats.framesSent)/(e.timestamp-_)),f.videoTransferFPS<0&&(f.videoTransferFPS=0),s.lastPublishStats.framesSent=e.framesSent}else"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(f.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(f.currentRoundTripTime=e.currentRoundTripTime))}))})),t&&t.result().forEach((function(e){"ssrc"==e.type&&e.names().indexOf("googBandwidthLimitedResolution")>=0&&(f.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),"ssrc"==e.type&&"video"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(f.videoCodecName=e.stat("googCodecName")),"ssrc"==e.type&&"audio"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(f.audioCodecName=e.stat("googCodecName")),"ssrc"==e.type&&e.names().indexOf("googCpuLimitedResolution")>=0&&(f.googCpuLimitedResolution=e.stat("googCpuLimitedResolution")),"ssrc"==e.type&&e.names().indexOf("googFrameWidthInput")>=0&&(f.googFrameWidthInput=e.stat("googFrameWidthInput")),"ssrc"==e.type&&e.names().indexOf("googFrameHeightInput")>=0&&(f.googFrameHeightInput=e.stat("googFrameHeightInput")),"ssrc"==e.type&&e.names().indexOf("googFrameRateInput")>=0&&(f.googFrameRateInput=e.stat("googFrameRateInput")),"ssrc"==e.type&&e.names().indexOf("codecImplementationName")>=0&&(f.codecImplementationName=e.stat("codecImplementationName")),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(f.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")),"VideoBwe"==e.type&&e.names().indexOf("googActualEncBitrate")>=0&&(f.googActualEncBitrate=e.stat("googActualEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googTargetEncBitrate")>=0&&(f.googTargetEncBitrate=e.stat("googTargetEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googRetransmitBitrate")>=0&&(f.googRetransmitBitrate=e.stat("googRetransmitBitrate"))})),"chrome"===this.stateCenter.browser&&this.handleEncBitrate(Number.parseInt(f.googTargetEncBitrate),Number.parseInt(f.googActualEncBitrate),Number.parseInt(f.googRetransmitBitrate)),m=isNaN(m)||m<0?0:m,y=isNaN(y)||y<0?0:y,S=isNaN(S)||S<0?0:S,g=isNaN(g)||g<0?0:g,v=isNaN(v)||v<0?0:v,b=isNaN(b)||b<0?0:b;var E=a.ClientUtil.getNetQuality(m,y,S),T=a.ClientUtil.getNetQuality(g,v,b);if(f.videoQuality=_>0?a.ClientUtil.quality2QualityGrade(E):0,f.audioQuality=_>0?a.ClientUtil.quality2QualityGrade(T):0,this.stateCenter.networkState!==n.ENUM_NETWORK_STATE.offline&&"disconnected"!==(null===(i=this.peerConnection)||void 0===i?void 0:i.connectionState)||(f.videoQuality=n.QualityGrade.Die,f.audioQuality=n.QualityGrade.Die),!f.frameHeight||!f.frameWidth){var w=this.localStream.getVideoTracks()[0];w&&(f.frameHeight=w.getSettings().height||0,f.frameWidth=w.getSettings().width||0)}var C=Math.min(E,T);this.netQuality=C,C<=n.QUALITY_CONSTANT.MiddleMinQuality?this.poorQualityNum++:this.poorQualityNum=0,_>0&&this.poorQualityNum>=this.streamCenter.probeStartedNum&&(new Date).getTime()>this.probeTime+this.probeInterval&&(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" netQuality "+C+" start net probe"),this.probeState=n.ENUM_PROBE_STATE.tryProbe,this.poorQualityRetryCnt++,this.streamCenter.startNetProbe(!0,this,this.gwNodeList),this.probeTime=(new Date).getTime()),this.updateCurrentQualityStats(f),this.publishStat=f,0!==_&&(this.uploadPublishQuality(f),this.onPublishQualityUpdate(this.streamId,this.currentQuality))}},e.prototype.updateCurrentQualityStats=function(e){var t=e.videoBitrate,r=e.videoFPS,n=e.videoTransferFPS,i=e.frameHeight,s=e.frameWidth,a=e.videoMuteState,c=e.videoQuality,u=e.isHardwareEncode,l=e.audioBitrate,d=e.audioCodec,h=e.audioMuteState,p=e.audioQuality,f=e.audioFPS,_={video:o(o({},this.currentQuality.video),{videoBitrate:t,videoFPS:r,videoTransferFPS:n,frameHeight:i,frameWidth:s,muteState:a,videoQuality:c,isHardwareEncode:u}),audio:o(o({},this.currentQuality.audio),{audioBitrate:l,audioCodec:d,muteState:h,audioQuality:p,audioFPS:f}),nackCount:e.nackCount,pliCount:e.pliCount,totalRoundTripTime:e.totalRoundTripTime,currentRoundTripTime:e.currentRoundTripTime,qualityLimitationReason:e.qualityLimitationReason};if(void 0!==e.videoPacketsLost){var g=e.videoPacketsLostRate;_.video.videoPacketsLost=e.videoPacketsLost,_.video.videoPacketsLostRate=g}if(void 0!==e.audioPacketsLost){var m=e.audioPacketsLostRate;_.audio.audioPacketsLost=e.audioPacketsLost,_.audio.audioPacketsLostRate=m}if(void 0!==e.muted&&(_.muted=e.muted,_.paused=e.paused,_.volume=e.volume,_.sinkId=e.sinkId),void 0!==e.googBandwidthLimitedResolution){var v=e.videoCodecName,y=e.audioCodecName,b=e.googFrameWidthInput,S=e.googFrameHeightInput,E=e.googCpuLimitedResolution,T=e.googFrameRateInput,w=e.codecImplementationName,C=e.googAvailableSendBandwidth,I=e.googActualEncBitrate,O=e.googTargetEncBitrate;_.googBandwidthLimitedResolution=e.googBandwidthLimitedResolution,_.video.googCodecName=v,_.audio.googCodecName=y,_.googCpuLimitedResolution=E,_.googFrameWidthInput=b,_.googFrameHeightInput=S,_.googFrameRateInput=T,_.codecImplementationName=w,_.googAvailableSendBandwidth=C,_.googActualEncBitrate=I,_.googTargetEncBitrate=O}this.currentQuality=_},e.prototype.uploadPublishQuality=function(e){if(this.qualityUpload&&this.signal.isServerConnected){var t=(new Date).getTime();(0==this.qualityUploadLastTime||t-this.qualityUploadLastTime>=2e3)&&(e.stream_type="publish",e.stream_id=this.streamId,e.timeStamp=Math.round(t/1e3),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.streamCenter.updateQuality(0,e),this.qualityUploadLastTime=t)}},e.prototype.getStopReason=function(e){var t="StopPublish";return e&&e.code&&(t=1103051===e.code?"ReachMaxAVRetryTime":"StopPublish"),t},e.prototype.stopPublish=function(e){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_PUBLISH+"  .1 "+this.streamId+" called "+this.state+" "+JSON.stringify(e));var t=this.getStopReason(e);if(Object.keys(this.streamCenter.publisherList).length=1)for(var r in this.streamCenter.playerList){var o=this.streamCenter.playerList[r].player;o.state==n.ENUM_PLAY_STATE.playing&&o.broadcasterStatus==n.ENUM_BROADCASTER_STATUS.start&&(this.signal&&this.signal.sendBroadcasterStatus((0,n.getSeq)(),o.sessionId,0),o.broadcasterStatus=n.ENUM_BROADCASTER_STATUS.stop)}this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession((0,n.getSeq)(),this.sessionId,0);var i=Date.now()-this.reportPublishStateTime;this.reportSpan.setAttributes({publish_state_time:p.publish_state_time(i)}),this.stateCenter.reporter.spanSetAttributes({key:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{stop_reason:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason(t)}),this.uploadRTCPublishStats(),this.reportSpan.setAttributes({stream_id:p.stream_id(this.streamId),webrtc_sid:p.webrtc_sid(this.sessionId),probe_ip_cnt:p.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:p.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:p.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:p.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),bitrate:p.bitrate(1e3*this.videoInfo.bitRate),h:p.h(this.videoInfo.height),w:p.w(this.videoInfo.width),cap_w:p.w(this.videoInfo.width),cap_h:p.h(this.videoInfo.height),fps:p.h(this.videoInfo.frameRate),env:p.env(this.stateCenter.testEnvironment?3:1),fail_cnt:p.fail_cnt(Math.max(this.rtcPublishCount-1,0)),continuous_fail_cnt:p.continuous_fail_cnt(this.continuousFailCnt),stop_reason:p.stop_reason(t),error:(null==e?void 0:e.code)||0,message:(null==e?void 0:e.message)||""}),this.reportSpan.end(),this.retryFailGwNodes=[],this.resetPublish(),this.isRePublish=!1,this.rtcPublishCount=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0},e.prototype.uploadRTCPublishStats=function(){var e,t,r,o,n,i,s,a,u,l,d,h,p,f;this.stateCenter.reporter.spanSetAttributes({key:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{lsttime:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.lsttime(parseInt(this.lastPublishStats.time)),total_stat:c.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({afc:null===(e=this.lastPublishStats)||void 0===e?void 0:e.audioPacketsSent,vfc:null===(t=this.lastPublishStats)||void 0===t?void 0:t.framesSent,tfc:(null===(r=this.lastPublishStats)||void 0===r?void 0:r.audioPacketsSent)+(null===(o=this.lastPublishStats)||void 0===o?void 0:o.framesSent),vb:null===(n=this.lastPublishStats)||void 0===n?void 0:n.videoBytesSent,ab:null===(i=this.lastPublishStats)||void 0===i?void 0:i.audioBytesSent,tb:(null===(s=this.lastPublishStats)||void 0===s?void 0:s.videoBytesSent)+(null===(a=this.lastPublishStats)||void 0===a?void 0:a.audioBytesSent),rtp_rtt:Math.round(1e3*(null===(u=this.publishStat)||void 0===u?void 0:u.currentRoundTripTime))||0,w:null===(l=this.publishStat)||void 0===l?void 0:l.frameWidth,rtp_plr:null===(d=this.publishStat)||void 0===d?void 0:d.videoPacketsLostRate,h:null===(h=this.publishStat)||void 0===h?void 0:h.frameHeight,rtp_bw:(null===(p=this.publishStat)||void 0===p?void 0:p.googAvailableSendBandwidth)?null===(f=this.publishStat)||void 0===f?void 0:f.googAvailableSendBandwidth:void 0})})},e.prototype.onPublishStateUpdate=function(e,t,r,o,n,i){},e.prototype.onPublishQualityUpdate=function(e,t){},e.prototype.onDisconnect=function(e){this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" call"),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" websocket disconnect"),this.publishStateUpdateError(e||c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError,!!e)},e.prototype.publishSuccess=function(){var e,t,r,o;if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call"),this._turnToTcp||(this.streamCenter.udpFailNum=0),this.isUpdateSDP&&this.updateSDPCallBack)return this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" "+this.streamId+" update sdp success"),this.updateSDPCallBack(0),this.updateSDPCallBack=void 0,void(this.isUpdateSDP=!1);var i=this.isRePublish?c.ZegoRTCLogEvent.kZegoRePublish:c.ZegoRTCLogEvent.kZegoStartPublish;for(var s in this.stateCenter.reporter.spanEnd({key:i.event,par:this.streamId},{url:f.url(null===(e=this.signal)||void 0===e?void 0:e.server),ip:f.ip(this.ip),source_type:f.source_type("rtc"),net_protocol:f.net_protocol(this.netProtocol),is_center:f.is_center(null===(t=this.streamCenter.publisherList[this.streamId])||void 0===t?void 0:t.isCenterNode),signal_consume:f.signal_consume(this.signalTime),is_peer:f.is_peer(this.isPeer)}),this.state!=n.ENUM_PUBLISH_STATE.publishing&&this.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.isPeer&&(this.peerFailCount=0),this.state=n.ENUM_PUBLISH_STATE.publishing,this.continuousFailCnt=0,this.reportPublishStateTime=Date.now(),this.streamCenter.playerList){var a=this.streamCenter.playerList[s].player;a.state==n.ENUM_PLAY_STATE.playing&&a.broadcasterStatus==n.ENUM_BROADCASTER_STATUS.stop&&(this.signal&&this.signal.sendBroadcasterStatus((0,n.getSeq)(),a.sessionId,1),a.broadcasterStatus=n.ENUM_BROADCASTER_STATUS.start)}var l=this.stateCenter.settingConfig.getSetting("probe_started_num");!isNaN(l)&&(this.streamCenter.probeStartedNum=l),this.setPublishQualityTimer();var d=2,h=2,p=null===(r=this.previewer)||void 0===r?void 0:r.videoTrack,_=0!==this.localStream.getAudioTracks().length&&this.localStream.getAudioTracks()[0];(p&&"live"===p.readyState&&!0===p.enabled||(null===(o=this.previewer)||void 0===o?void 0:o.muteImage))&&(d=0),_&&"live"===_.readyState&&!0===_.enabled&&(h=0),this.sendStreamStatus(d,h,!0),this.streamCenter.soundLevelDelegate&&this.previewer&&this.previewer.startSoundLevel(),this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call success")},e.prototype.startSoundLevel=function(){var e;if(this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" call streamID: "+this.streamId),this.localStream&&0!=this.localStream.getAudioTracks().length)try{null===(e=this.previewer)||void 0===e||e.startSoundLevel()}catch(e){this.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" get sound level failed "+e)}else this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" local stream no found")},e.prototype.stopSoundLevel=function(){var e;this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),null===(e=this.previewer)||void 0===e||e.stopSoundLevel()},e.prototype.handleEncBitrate=function(e,t,r){var o,n=this,i=1e3*this.videoInfo.bitRate,s=0;if(t>0){this.needIncMax||this.gotMax||(this.probeCount++,t>=.75*e?(this.probeCount>=10&&this.initFitCnt>=.6*this.probeCount&&(this.gotMax=!0,this.targetRate=i),this.initFitCnt++):this.probeCount>=10&&this.initFitCnt/this.probeCount<.3&&(this.needIncMax=!0));var c=a.ClientUtil.arrAvg(this.totalBitrateArray,t,10);this.needIncMax&&(c>=1.05*i?this.targetRate>i&&(this.targetRate-=c>e?c-e:c-i,this.targetRate=Math.max(this.targetRate,i),this.targetRate=Math.min(this.targetRate,2*i),s=this.targetRate):c<.8*i&&(0===this.targetRate&&(this.targetRate=e),this.targetRate=this.targetRate>=i?this.targetRate+.08*i:1.05*this.targetRate,this.targetRate=Math.min(this.targetRate,2*i),s=this.targetRate))}if(r>0&&r<i){var l=a.ClientUtil.arrAvg(this.totalRetransRateArray,r,5);this.needIncMax?l+t>1.05*i&&(this.targetRate-=l+t-i,this.targetRate=Math.max(this.targetRate,i-l),s=this.targetRate):s=this.targetRate-l}else this.targetRate<i&&(this.targetRate=i,s=this.targetRate);if(s>0){s=a.ClientUtil.arrAvg(this.totalTargetRateArray,s,5);var d=null===(o=this.peerConnection)||void 0===o?void 0:o.getSenders().filter((function(e){return e.track&&"video"===e.track.kind}));if(!d)return;var h=d.length>1?d[1]:d[0]?d[0]:null;if(!h)return;var p=h.getParameters();p.encodings||(p.encodings=[{}]),p.encodings[0].maxBitrate=s,h.setParameters(p).catch((function(e){n.logger.error(u.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_ENC_BITRATE+" "+e)}))}},e.prototype.resetEncBitrate=function(){this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[]},e.prototype.replacePublishedTrack=function(e,t,r){return void 0===t&&(t=!1),{errorCode:-1,extendedData:"should install advanced module first"}},e.prototype.sendStreamStatus=function(e,t,r,o){var i=this;void 0===r&&(r=!1),void 0===o&&(o=0),(r||this.camera_status!==e||this.mic_status!==t)&&this.signal&&(this.camera_status=e,this.mic_status=t,o++,this.signal.sendStreamStatus((0,n.getSeq)(),this.sessionId,e,t,this.streamId,(function(){i.camera_status===e&&i.mic_status===t&&o<=1&&i.sendStreamStatus(e,t,!0,o)})))},e.prototype.addCanvasStreamVideoTrack=function(e){var t=document.createElement("canvas"),r=new Image;return r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZGBgaGBgYLBnYGBwYCANHGBgYDjIyMDAcIWBgUGbNL1w1VdBBvwnUzNY26gBo2EwjNLBfjJyIiz7HADlBVB2DiEjR15lYGBYAwAypRSY53SYoAAAAABJRU5ErkJggg==",t.width=80,t.height=80,this.canvasTimer=setInterval((function(){var e;(e=t.getContext("2d"))&&e.drawImage(r,0,0,16,16)}),200),t.captureStream().getVideoTracks()[0]},e.prototype.getSpan=function(e,t,r,o){return void 0===o&&(o=!1),this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:t,bak_key:r,par:this.streamId},{key:e,par:this.streamId},e,o)},e.prototype.isMultiOuter=function(){return!(!this.stateCenter.accessClientIp||!this.streamConnectIP||this.stateCenter.accessClientIp===this.streamConnectIP)},e.prototype.isCustomCdn=function(){var e,t;return void 0!==(null===(e=this.publishOption)||void 0===e?void 0:e.cdnUrl)&&""!==(null===(t=this.publishOption)||void 0===t?void 0:t.cdnUrl)},e.prototype.setTurnTcp=function(){this._turnToTcp=this.stateCenter.turnToTcp,void 0!==this.stateCenter.turnOverTcpOnly&&(this._turnToTcp=this.stateCenter.turnOverTcpOnly)},e}();t.ZegoPublish=_},569:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.addRRTRLine=t.addSPSDescription=void 0,t.addSPSDescription=function(e){var t,r=e,o=function(e){var t={m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"}]};function r(e,t,r){var o=function(e){return String(Number(e))===e?Number(e):e},n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:n?t[e.name]:t;(function(e,t,r,n){if(n&&!r)t[n]=o(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=o(e[i+1]))})(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)}var o=RegExp.prototype.test.bind(/^([a-z])=(.*)/),n=[],i={},s=i;return e.split(/(\r\n|\r|\n)/).filter(o).forEach((function(e){var o=e[0],i=e.slice(2);"m"===o&&(n.push({rtp:[],fmtp:[]}),s=n[n.length-1]);for(var a=0;a<(t[o]||[]).length;a+=1){var c=t[o][a];if(c.reg&&c.reg.test(i))return r(c,s,i)}})),i.media=n,i}(e),n=[];return o.media.forEach((function(e){"video"===e.type&&e.fmtp.forEach((function(e){t="a=fmtp:"+e.payload+" "+e.config,-1===e.config.indexOf("sps-pps-idr-in-keyframe")&&-1===n.indexOf(t)&&n.push(t)}))})),n.forEach((function(e){r=r.replace(new RegExp(e,"g"),e+";sps-pps-idr-in-keyframe=1")})),r},t.addRRTRLine=function(e){var t=e.split("\r\n"),o=new Map;t.forEach((function(e,r){if(/^a=rtcp-fb:/.test(e)&&t[r+1]&&!/^a=rtcp-fb:/.test(t[r+1])){var n=e.match(/^a=rtcp-fb:\d+/);n&&o.set(r+1,n[0]+" rrtr")}}));for(var n=Array.from(o),i=0;i<n.length;i++){var s=r([],n[i],!0);t.splice(s[0]+i,0,s[1])}return t.join("\r\n")}},1111:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSoundProcessor=void 0,t.createSoundProcessor=function(e,t,r){var o=e.createScriptProcessor(4096,1,1);return t.connect(o),o.connect(e.destination),o.onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),o=0,n=0;n<t.length;n++)o<t[n]&&(o=t[n]);r&&r(o)},e.resume(),o}},8011:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundMeterWorklet=t.WorkletModule=void 0;var i=r(1111),s=new Blob(['\nclass VolumeMeter extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.volume = 0;\n    this.intervalTime = 1000;\n    this.tick = this.intervalTime;\n    this.isStop = false;\n    this.port.onmessage = event => {\n      const { data } = event;\n      switch (data.name) {\n        case "setIntervalTime":\n          this.intervalTime = data.intervalTime;\n          break;\n        case "stop":\n          this.isStop = true;\n          break;\n      }\n    };\n  }\n  process(inputs) {\n    const input = inputs[0];\n    if (this.isStop) {\n      return false;\n    }\n    if (input.length > 0) {\n      const buffer = input[0];\n      let maxVal = this.volume;\n      for (let i = 0; i < buffer.length; i++) {\n        if (maxVal < buffer[i]) {\n          maxVal = buffer[i];\n        }\n      }\n      this.volume = maxVal;\n      this.tick -= buffer.length;\n      if (this.tick < 0) {\n        this.tick += (this.intervalTime / 1000) * sampleRate;\n        this.port.postMessage({ volume: this.volume });\n        this.volume = 0;\n      }\n    }\n    return true;\n  }\n}\ntry {\n  registerProcessor("meter", VolumeMeter);\n} catch (error) {\n  \n}  \n'],{type:"application/javascript"}),a=function(){function e(){}return e.addModuleToContext=function(e,t){return o(this,void 0,void 0,(function(){var r;return n(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t.info("zc.smw worklet addModule call"),[4,e.audioWorklet.addModule(URL.createObjectURL(s))];case 1:return o.sent(),t.info("zc.smw worklet addModule success"),this.isSuccess=!0,[2];case 2:return r=o.sent(),t.warn("zc.smw"+" worklet addModule catch error. ".concat(null==r?void 0:r.message)),[3,3];case 3:return[2]}}))}))},e.isSuccess=!1,e}();t.WorkletModule=a;var c=function(){function e(e,t){void 0===t&&(t=1e3),this.logger=e,this.interval=t,this.worklet=null,this.processor=null,this.volume=0,this.onSoundLevelUpdate=function(e){}}return e.prototype.preload=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return a.isSuccess?[3,2]:[4,a.addModuleToContext(e,this.logger)];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.initAudioWorklet=function(e,t){return o(this,void 0,void 0,(function(){var r,o=this;return n(this,(function(n){switch(n.label){case 0:return[4,this.preload(e)];case 1:if(n.sent(),this.worklet)t.connect(this.worklet).connect(e.destination);else try{(r=this.worklet=new AudioWorkletNode(e,"meter")).port.onmessage=function(e){o.onSoundLevelUpdate&&o.onSoundLevelUpdate(e.data.volume||0)},t.connect(r).connect(e.destination),this.setInterval(this.interval)}catch(r){this.logger.warn("zc.smw not suppot AudioWorkletNode"+r),this.processor=(0,i.createSoundProcessor)(e,t,(function(e){o.onSoundLevelUpdate&&o.onSoundLevelUpdate(e||0)}))}return[2]}}))}))},e.prototype.setInterval=function(e){var t=this.worklet;this.interval=e,t&&t.port.postMessage({name:"setIntervalTime",intervalTime:e})},e.prototype.destroy=function(){this.processor&&(this.processor.onaudioprocess=null,this.processor.disconnect()),this.worklet&&(this.worklet.port.postMessage({name:"stop"}),this.worklet.port.onmessage=null,this.worklet.disconnect()),this.worklet=null,this.processor=null},e}();t.SoundMeterWorklet=c},5019:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSignal=void 0;var n=r(6706),i=r(1089),s=r(2752),a=r(1691),c=r(746),u=["LoginReq","CreateSessionWithSdpReq","CreateSessionReq"],l=["Peer2PeerNetStatsGetReq","Peer2PeerNetStatsGetRsp"],d=function(){function e(e,t,r,o){void 0===o&&(o=!1),this.netAgent=r,this.useNetAgent=o,this.sendDataMap={},this.sendDataList=new n.LinkedList,this.sendDataCheckOnceCount=100,this.signalSeq=0,this.pushCallback={},this.sessionInfos={},this.tryHeartbeatCount=0,this.heartbeatInterval=1e4,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.sendDataCheckTimer=null,this.sendDataCheckInterval=2e3,this.loginTimer=null,this.successConnectedCallback=null,this.checkMessageList=["ActivateVideoPlayStreamReq","ActivateAudioPlayStreamReq","CreateSessionReq","CreateSessionWithSdpReq","ActivateSEIInsertReq","StreamStatusNotify","MediaDescUpdateReq"],this.tryConnectCount=1,this.tryConnectTimer=null,this.tryConnectInterval=3e3,this.state=n.ENUM_CONNECT_STATE.disconnect,this.tokenType=0,this.browser=this.getBrowserAndVersion(),this.platform=navigator.platform,this._websocket=null,this.negoInterval=25e3,this.negoTryCount=1,this.negoTryMaxCount=2,this.logger=e,this.stateCenter=t,this.stateCenter.streamConnectTime&&(this.tryConnectInterval=this.stateCenter.streamConnectTime),this.gw=new a.GatewaySignal(this)}return Object.defineProperty(e.prototype,"wsReadyState",{get:function(){var e;return null===(e=this.websocket)||void 0===e?void 0:e.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocket",{get:function(){return this._websocket},set:function(e){null===e&&this.useNetAgent||(this._websocket=e)},enumerable:!1,configurable:!0}),e.prototype.getBrowserAndVersion=function(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(r[1])?{name:"IE",version:(e=/\brv[ :]+([\d\.]+)/g.exec(t)||[])[1]||""}:"Chrome"===r[1]&&null!=(e=t.match(/\bOPR|Edge\/([\d\.]+)/))?{name:"Opera",version:e[1]}:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([\d+\.]+)/i))&&r.splice(1,1,e[1]),{name:r[0],version:r[1]})},e.prototype.setSessionInfo=function(e,t){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SET_SESSION_INFO+" call"),this.appid=e+"",this.userid=t},e.prototype.onDisconnect=function(e,t){},e.prototype.onUpdateHeartBeatInterval=function(e){},e.prototype.resetConnectTimer=function(){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CONNECT_TIMER+" call"),clearTimeout(this.tryConnectTimer),this.tryConnectTimer=null,this.tryConnectCount=0},e.prototype.handleWsMessage=function(e){var t=JSON.parse(e.data);l.includes(t.header.cmd)||(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= ",t.header.cmd),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= "+JSON.stringify(t))),t.header.appid==this.appid&&t.header.user_id===this.userid?this.handleServerPush(t):this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" check header failed")},e.prototype.bindWebSocketEvents=function(){var e=this;this.tryHeartbeatCount=0,this.tryConnectInterval=this.stateCenter.streamConnectTime?this.stateCenter.streamConnectTime:3e3,this.websocket&&(this.websocket.onclose=function(t){if(e.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" close msg = "+JSON.stringify((null==t?void 0:t.code)?null==t?void 0:t.code:t)),e.state!=n.ENUM_CONNECT_STATE.disconnect){if(e.useNetAgent)return void e.disconnectCallback();e.successConnectedCallback=e.connectCallback,e.resetConnectTimer(),e.startConnectTimer((function(t){1008===t&&e.disconnectCallback(s.errorCodeList.TOKEN_EXPIRED)})),e.resetCheckMessage()}},this.websocket.onerror=function(t){e.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" msg = "+JSON.stringify(t))})},e.prototype.resetCheckMessage=function(){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CHECK_MESSAGE+" call"),clearTimeout(this.sendDataCheckTimer),this.sendDataCheckTimer=null;for(var e=this.sendDataList.getFirst();null!=e;)this.sendDataList.remove(e),e._data.error&&e._data.error(n.SEND_MSG_RESET,e._data.seq),e=this.sendDataList.getFirst();this.sendDataMap={}},e.prototype.handleServerPush=function(e){switch(e.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",e);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"CreateSessionWithSdpRsp":this.handleRespondData("CreateSessionWithSdpReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"MediaDescRsp":this.handleRespondData("MediaDescReq",e);break;case"CandidateInfoRsp":this.handleRespondData("CandidateInfoReq",e);break;case"CloseSessionRsp":this.handleRespondData("CloseSessionReq",e),this.removeSession(e.header.session_id);break;case"ClientHBRsp":this.handleRespondData("ClientHBReq",e);break;case"MediaDescPush":case"CandidateInfoPush":case"StreamStatusNotifyPush":case"PublishEventPush":case"PlayEventPush":case"ClientInfoPush":case"NetQualityInfoPush":case"MediaDescUpdatePush":case"CmdPush":this.handlePushData(e);break;case"CloseSessionPush":this.handlePushData(e),this.removeSession(e.header.session_id);break;case"QualityReportRsp":this.handleRespondData("QualityReportReq",e);break;case"SessionResetPush":this.handlePushResetSessionData(e);break;case"ActivateVideoPlayStreamRsp":this.handleRespondData("ActivateVideoPlayStreamReq",e);break;case"ActivateAudioPlayStreamRsp":this.handleRespondData("ActivateAudioPlayStreamReq",e);break;case"NetQualityProbeRsp":this.handleRespondData("NetQualityProbeReq",e);break;case"ActivateSEIInsertRsp":this.handleRespondData("ActivateSEIInsertReq",e);break;case"StreamStatusNotifyAck":this.handleRespondData("StreamStatusNotify",e);break;case"Peer2PeerNetStatsGetRsp":this.handleRespondData("Peer2PeerNetStatsGetReq",e);break;case"MediaDescUpdateRsp":this.handleRespondData("MediaDescUpdateReq",e);break;case"CmdRsp":this.handleRespondData("CmdReq",e)}},e.prototype.disconnectCallback=function(e,t){this.logger.info("zc.s.dcb "+JSON.stringify(e)+" "+t),this.connectCallback&&(this.connectCallback(t||-1,this.server,void 0),this.connectCallback=null);var r=this.server;this.disconnectServer(),this.onDisconnect(r,e)},e.prototype.updateToken=function(){var e=this;this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_UPDATE_TOKEN+" call");var t={token:this.token,tokenType:this.tokenType,roomid:this.roomID,anchorname:this.stateCenter.anchor_info.anchor_id,sdkversion:n.PROTO_VERSION,osinfo:navigator.appVersion};if(0!=Object.keys(this.sessionInfos).length){var r=[];for(var o in this.sessionInfos){var s=parseInt(o);r.push({session_id:s,session_token:this.sessionInfos[s].token})}t.sessions=r}this.sendMessageWithCallback("LoginReq",this.stateCenter.getSeq(),0,t,(function(t,r,o){if(0==o.result){e.token=o.token,e.tokenType=o.tokenType;var n={report:o.report,report_interval:o.report_interval_ms};o.negoInterval&&(e.negoInterval=o.negoInterval),o.negoTryCount&&(e.negoTryCount=o.negoTryCount),o.negoTryMaxCount&&(e.negoTryMaxCount=o.negoTryMaxCount),null!=e.connectCallback&&(e.connectCallback(0,e.server,n),e.connectCallback=null),e.checkMessageTimeout()}else null!=e.connectCallback&&(e.connectCallback(o.result,e.server,{error:o.strError}),e.connectCallback=null)}),(function(){null!=e.connectCallback&&(e.connectCallback(-1,e.server,void 0),e.connectCallback=null)}))},e.prototype.sendMessageWithCallback=function(e,t,r,o,s,a){var c,d=this;void 0===s&&(s=null),void 0===a&&(a=null),l.includes(e)||this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" call "+e+" "+t+" "+(null===(c=this.websocket)||void 0===c?void 0:c.readyState));var h=performance.now();if(!this.websocket||"LoginReq"!==e&&this.websocket.readyState!==WebSocket.OPEN)return this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" connect not establish"),void(a&&a(n.SEND_MSG_TIMEOUT,t));var p={header:this.getHeader(e,t,r),body:o},f={seq:t,deleted:!1,cmd:e,time:(new Date).getTime(),success:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(u.includes(e)){var n=(performance.now()-h).toFixed(0);d.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" seq: ".concat(t,", cmd: ").concat(e,", cost_time: ").concat(n))}s&&s.apply(void 0,r)},error:a},_=this.sendDataList.push(f);this.sendDataMap[f.seq]=_;var g=JSON.stringify(p);l.includes(e)||this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" "+g),this.useNetAgent&&"LoginReq"===e?this.websocket.send(g,void 0,!0):this.websocket.send(g),this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" success")},e.prototype.getHeader=function(e,t,r){return{version:"1.0.1",cmd:e,appid:this.appid+"",seq:t,user_id:this.userid,session_id:r}},e.prototype.connectServer=function(e,t,r,o){var a,u=this;if(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+r),this.roomID=e,this.token=t,this.server=r,this.state=n.ENUM_CONNECT_STATE.connecting,this.connectCallback=o,this.isServerConnected)this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket is connected"),this.resetConnectTimer(),this.state=n.ENUM_CONNECT_STATE.connected;else try{if(this.useNetAgent){if(!this.stateCenter.appConfig)return void this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" no app config ");var l=this.stateCenter.appConfig.media_config.publish_config.resource_info.find((function(e){return e.resource_type===n.SignalResourceType.RTC}));if(!l)return void(o&&o(s.errorCodeList.GET_CONFIG_FAIL));var d=null===(a=null==l?void 0:l.service_info)||void 0===a?void 0:a.find((function(e){return e.protocol===n.ProtocolType.WEBRTC}));if(!d)return void(o&&o(s.errorCodeList.GET_CONFIG_FAIL));var h=d.url_template.split("{IP}")[1].split("?"),p=h[0],f=h[1],_={path:p,query:f};this.stateCenter.isTestMode&&(_={path:p+2,query:f}),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" signal "+JSON.stringify(_)),this.websocket instanceof WebSocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),!this.websocket&&(this.websocket=new c.AnalogSocket(this.server,this.netAgent,_,this.logger,this.stateCenter)),this.websocket.open()}else this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" need new websocket"),this.websocket&&(this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" close error websocket"),this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close()),this.websocket=new WebSocket(this.server);this.websocket.onclose=function(e){u.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket close call  "+JSON.stringify(e)),u.useNetAgent&&u.state!=n.ENUM_CONNECT_STATE.disconnect&&(u.successConnectedCallback=u.connectCallback,u.resetConnectTimer(),u.startConnectTimer((function(e){1008===e&&u.disconnectCallback(s.errorCodeList.TOKEN_EXPIRED)})))},this.websocket.onerror=function(e){u.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket onerror call  "+JSON.stringify(e)),u.stateCenter.useNetAgent&&(null==e?void 0:e.code)&&u.disconnectCallback(void 0,null==e?void 0:e.code)},this.useNetAgent&&this.websocket instanceof c.AnalogSocket?(this.websocket.onopen=function(){u.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),u.bindWebSocketEvents(),u.state=n.ENUM_CONNECT_STATE.connected,u.websocket&&(u.websocket.onmessage=u.handleWsMessage.bind(u))},this.websocket.onreconnnecting=function(){u.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket reconnecting "+!!u.successConnectedCallback),u.successConnectedCallback&&(u.connectCallback=u.successConnectedCallback),u.updateToken()},this.websocket.onmessage=this.handleWsMessage.bind(this),this.updateToken()):this.websocket.onopen=function(){u.resetConnectTimer(),u.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),u.websocket&&(u.websocket.onmessage=u.handleWsMessage.bind(u)),u.bindWebSocketEvents(),u.updateToken(),u.state=n.ENUM_CONNECT_STATE.connected}}catch(e){this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket error "+e)}this.useNetAgent||(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+this.tryConnectInterval),this.tryConnectTimer=setTimeout((function(){u.startConnectTimer(o)}),this.tryConnectInterval))},e.prototype.startConnectTimer=function(e){if(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" call"),this.tryConnectCount>=n.MAX_TRY_CONNECT_COUNT)return this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" beyond "+this.server+"max limit"),void this.disconnectCallback();this.websocket&&this.websocket.readyState===WebSocket.OPEN?(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" websocket is connected"),this.resetConnectTimer()):(this.tryConnectCount+=1,this.connectServer(this.roomID,this.token,this.server,e))},e.prototype.disconnectServer=function(){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_DISCONNECT_SERVER+" call"),this.connectCallback=null,this.resetCheckMessage(),this.resetConnectTimer(),this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.token="",this.sessionInfos={},this.tokenType=0,this.tryHeartbeatCount=0,this.tryConnectCount=0,this.state=n.ENUM_CONNECT_STATE.disconnect},Object.defineProperty(e.prototype,"isServerConnected",{get:function(){var e;return(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN},enumerable:!1,configurable:!0}),e.prototype.createSession=function(e,t,r,o,s,a,c,u,l){void 0===s&&(s=""),void 0===a&&(a=""),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+o);var d="";n.PROTO_VERSION.split(".").forEach((function(e,t){return d+=1==e.length&&1==t?"0"+e:e})),this.sendMessageWithCallback("CreateSessionReq",e,0,{type:t,stream_id:o,platform:this.platform,browser:this.browser.name,version:this.browser.version,app_id:this.appid,negotiate_mode:r,strAuthParam:s,sdk_version:1*d,turn_server_host:"string"==typeof a?a:"",params:c},u,l)},e.prototype.createSessionWithSdp=function(e,t,r){var s,a=e.seq,c=e.type,u=e.streamId,l=e.strAuthParam,d=e.sdp,h=e.serverHost,p=e.playBufLevel,f=e.params,_=(null===(s=e.videoInfo)||void 0===s?void 0:s.keyFrameInterval)||2;this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+u);var g="";n.PROTO_VERSION.split(".").forEach((function(e,t){return g+=1==e.length&&1==t?"0"+e:e}));var m={type:c,app_id:this.appid,stream_id:u,sdp:d,user_id:this.userid,platform:this.platform,browser:this.browser.name,sdk_vers:parseInt(g),clientIp:"",media_server_host:"string"==typeof h?h:"",strAuthParam:l,params:f,keyframe_intv:parseInt(_)};p&&(m.min_play_buf_level_ms=p),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" "+u+" params: "+JSON.stringify(o(o({},m),{sdp:void 0}))),this.sendMessageWithCallback("CreateSessionWithSdpReq",a,0,m,t,r)},e.prototype.sendMediaDescUpdateReq=function(e,t,r,o,n){this.sendMessageWithCallback("MediaDescUpdateReq",e,t,{peer_id:r.peerID,type:r.type,sdp:r.sdp,width:r.width,height:r.height,framerate:r.frameRate,video_min_kpbs:r.video_min_kpbs,video_max_kpbs:r.video_max_kpbs,audio_kpbs:r.audio_kpbs,keyframe_intv:r.keyframe_intv},o,n)},e.prototype.removeSession=function(e){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_REMOVE_SESSION+" call "+e),this.sessionInfos[e]&&delete this.sessionInfos[e]},e.prototype.sendCloseSession=function(e,t,r,o,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_REMOVE_SESSION+" call: "+t);var s={reason:r};this.removeSession(t),this.sendMessageWithCallback("CloseSessionReq",e,t,s,o,n)},e.prototype.sendMessage=function(e,t,r,o){if(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" call "+e),this.websocket&&this.websocket.readyState===WebSocket.OPEN){var n=this.getHeader(e,t,r),s=JSON.stringify({header:n,body:o});this.websocket.send(s),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" success")}else this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" connect not establish")},e.prototype.handleRespondData=function(e,t){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" call");var r=this.sendDataMap[t.header.seq];if(null!=r){delete this.sendDataMap[t.header.seq],this.sendDataList.remove(r);var o=r._data;o.cmd!==e?this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" command is not match"):o.success&&o.success(t.header.seq,t.header.session_id,t.body)}else{if("CloseSessionRsp"==t.header.cmd)return;this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" cannot find data "+e)}},e.prototype.addSession=function(e,t){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ADD_SESSION+" call"+e),this.sessionInfos[e]={token:t}},e.prototype.handlePushData=function(e){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" call "+e.header.cmd+" session "+e.header.session_id);var t=this.pushCallback[e.header.cmd+e.header.session_id];t?t.callback&&t.callback(e.header.seq,e.header.session_id,e.body):this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" no callbackData "+e.header.cmd+" session: "+e.header.session_id)},e.prototype.handlePushResetSessionData=function(e){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" call ");var t=[];if(0==e.body.cResetType)t=Object.keys(this.sessionInfos);else if(1==e.body.cResetType)for(var r=0;r<e.body.session_ids.length;r++)t.push(e.body.session_ids[r]);if(this.sendResetSessionAck(e.header.seq,0,0),0!=t.length)for(var o=0;o<t.length;o++){var n=this.pushCallback[e.header.cmd+t[o]];null==n?this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no callbackData "+t[o]):n.callback&&n.callback(e.header.seq,t[o],e.body)}else this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no session to callback")},e.prototype.sendMediaDesc=function(e,t,r,o,n,s){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC+" call: "+t);var a={type:r,sdp:o.sdp};null!=o.width&&(a.width=o.width),null!=o.height&&(a.height=o.height),null!=o.frameRate&&(a.framerate=o.frameRate),null!=o.video_min_kpbs&&(a.video_min_kpbs=o.video_min_kpbs),null!=o.video_max_kpbs&&(a.video_max_kpbs=o.video_max_kpbs),null!=o.audio_kpbs&&(a.audio_kpbs=o.audio_kpbs),null!=o.keyframe_intv&&(a.keyframe_intv=o.keyframe_intv),null!=o.min_play_buf_level_ms&&(a.min_play_buf_level_ms=o.min_play_buf_level_ms),this.sendMessageWithCallback("MediaDescReq",e,t,a,n,s)},e.prototype.sendCandidateInfo=function(e,t,r,o,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO+" call: "+t);for(var s=[],a=0;a<r.length;a++)s.push({candidate:r[a].candidate,sdpMid:r[a].sdpMid,sdpMLineIndex:r[a].sdpMLineIndex});this.sendMessageWithCallback("CandidateInfoReq",e,t,{infos:s},o,n)},e.prototype.sendMediaDescAck=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t),this.sendMessage("MediaDescAck",e,t,{result:r})},e.prototype.sendUpdateMediaDescAck=function(e,t,r,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t),this.sendMessage("MediaDescUpdateAck",e,t,{peer_id:o,result:r})},e.prototype.sendCandidateInfoAck=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO_ACK+" call: "+t),this.sendMessage("CandidateInfoAck",e,t,{result:r})},e.prototype.sendCloseSessionAck=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CLOSE_SESSION_ACK+" call: "+t),this.sendMessage("CloseSessionAck",e,t,{result:r})},e.prototype.sendResetSessionAck=function(e,t,r){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_RESET_SESSION_ACK+" call: "+t),this.sendMessage("SessionResetAck",e,t,{result:r})},e.prototype.registerPushCallback=function(e,t,r){r&&"function"==typeof r&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_REGISTER_PUSH_CALLBACK+" set callback "+t),this.pushCallback[e+t]={callback:r})},e.prototype.unregisterPushCallback=function(e,t){delete this.pushCallback[e+t]},e.prototype.checkMessageTimeout=function(){for(var e,t=this,r=this.sendDataList.getFirst(),o=(new Date).getTime(),s=0,a=0,c=0;null!=r&&!(r._data.time+this.sendDataTimeout>o);)if(delete this.sendDataMap[r._data.seq],this.sendDataList.remove(r),++a,-1!=this.checkMessageList.indexOf(r._data.cmd)){if(null==r._data.error||this.sendDataDropTimeout>0&&r._data.time+this.sendDataDropTimeout<o?++c:(this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" error cmd = "+r._data.cmd+" seq ="+(null===(e=r._data)||void 0===e?void 0:e.seq)),r._data.error&&r._data.error(n.SEND_MSG_TIMEOUT,r._data.seq)),++s>=this.sendDataCheckOnceCount)break;r=this.sendDataList.getFirst()}else r=this.sendDataList.getFirst();this.sendDataCheckTimer=setTimeout((function(){t.checkMessageTimeout()}),this.sendDataCheckInterval),0==a&&0==c||this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" call success, state: timeout="+a+" drop="+c)},e.prototype.sendHeartbeat=function(){var e=this;if(this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+"call tryHeartbeatCount:"+this.tryHeartbeatCount),0!=Object.keys(this.sessionInfos).length)if(this.state===n.ENUM_CONNECT_STATE.connected){if(++this.tryHeartbeatCount>n.MAX_TRY_HEARTBEAT_COUNT)return this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" heartbeat try limit"),void this.disconnectCallback();var t=[];for(var r in this.sessionInfos)t.push(parseInt(r));var o={session_ids:t},s=(new Date).getTime();this.sendMessageWithCallback("ClientHBReq",this.stateCenter.getSeq(),0,o,(function(t,r,o){e.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" hb time "+((new Date).getTime()-s)),e.heartbeatInterval!=o.hb_interval&&(e.heartbeatInterval=o.hb_interval,e.onUpdateHeartBeatInterval(o.hb_interval)),e.tryHeartbeatCount=0}),(function(e,t){}))}else this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" state error");else this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" no need to heartbeat")},e.prototype.QualityReport=function(e,t,r,n,s){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_QUALITY_REPORT+" call");var a={streams:[o(o({},r),{aid:t})]};this.sendMessageWithCallback("QualityReportReq",e,t,a,n,s)},e.prototype.sendStreamStatus=function(e,t,r,o,s,a){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS+" call "+t);var c={mic_status:o,camera_status:r};this.logger.info("".concat(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS," stream ").concat(s||""," status ").concat(JSON.stringify(c))),this.sendMessageWithCallback("StreamStatusNotify",e,t,c,(function(){}),(function(e){e===n.SEND_MSG_TIMEOUT&&a&&a()}))},e.prototype.ActivatePlayVideoStream=function(e,t,r,o,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" call");var s={active:r?0:1,layer:0};this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" activate video "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateVideoPlayStreamReq",e,t,s,o,n)},e.prototype.ActivatePlayAudioStream=function(e,t,r,o,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" call");var s={active:r?0:1,layer:0};this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" activate audio "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateAudioPlayStreamReq",e,t,s,o,n)},e.prototype.sendBroadcasterStatus=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_BROADCAST_STATUS+" call "+t),this.sendMessage("BroadcasterStatusNotify",e,t,{status:r})},e.prototype.sendNetProbe=function(e,t,r,o,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t),this.sendMessageWithCallback("NetQualityProbeReq",e,t,{peer_id:r,action:1},o,n)},e.prototype.sendNetQualityInfoPushAck=function(e,t,r,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t),this.sendMessage("NetQualityInfoAck",e,t,{peer_id:r,result:o})},e.prototype.activateSEIInsert=function(e,t,r,o,n,i,s){},e.prototype.getP2PNetStats=function(e,t,r,o,n){this.sendMessageWithCallback("Peer2PeerNetStatsGetReq",e,t,{peer_id:r},o,n)},e.prototype.sendGWCmd=function(e,t,r,o,n){this.sendMessageWithCallback("CmdReq",e,t,r,o,n)},e.prototype.sendGWAck=function(e,t,r){this.sendMessage("CmdAck",e,t,r)},e}();t.ZegoSignal=d},8935:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoplayDialog=void 0;var n=o(r(4671)),i="zg_autoplay_wrapper";function s(){return navigator.language.includes("zh")}var a=function(){function e(){this.content='Media play failed. Click the "Resume"to resume.',this.dialogNode=null,this.bodyPosition="static";var e=document.createElement("style");e.innerHTML=".zg_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.zg_autoplay_mask div:not(.zg_autoplay_action_wrapper){display:block !important;}.".concat(i,"{padding:14px;background:#fff;border-radius:3px;box-shadow:1px 1px 10px #988e8d;border:1px solid #d1cfcf;max-width:500px;}.").concat(i," a{color:#2473E8;}.zg_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.zg_autoplay_content{margin:8px 0;}.zg_autoplay_action_wrapper{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.zg_autoplay_collapse{margin-right:auto;cursor:pointer}.zg_autoplay_question{height:100%;line-height:16px;cursor:pointer;}.zg_autoplay_action_confirm{margin-left:8px;color:#fff;background:#0072ff;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.zg_autoplay_action_confirm:hover{opacity:0.9;}.zg_autoplay_collapse,.zg_autoplay_action_confirm,.zg_autoplay_content,.zg_autoplay_question{font-size:14px;}@media screen and (max-width:750px){.").concat(i,"{width:80vw;}}"),document.head.appendChild(e),s()&&(this.content="\u6d4f\u89c8\u5668\u963b\u6b62\u97f3\u89c6\u9891\u64ad\u653e\uff0c\u8bf7\u70b9\u51fb\u201c\u6062\u590d\u64ad\u653e\u201d\u3002"),this.eManager=new n.default}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.createDialog=function(){var e=document.createElement("template");e.innerHTML="<div class='zg_autoplay_mask'><div class='".concat(i,"'><div class='zg_autoplay_header'>").concat(location.host,"</div><div class='zg_autoplay_content'>").concat(this.content,"</div><div class='zg_autoplay_action_wrapper'></div></div></div>").trim();var t=document.createElement("button");t.className="zg_autoplay_action_confirm",t.innerText=s()?"\u6062\u590d\u64ad\u653e":"Resume",t.onclick=this.onConfirm.bind(this);var r=e.content.firstChild,o=r.querySelector(".zg_autoplay_action_wrapper");return o&&o.appendChild(t),r},e.prototype.onConfirm=function(e){e&&e.stopPropagation(),this.eManager.emit("allowPlay"),this.deleteDiaLog()},e.prototype.deleteDiaLog=function(){this.dialogNode&&(document.body.removeChild(this.dialogNode),this.dialogNode=null)},e.prototype.addDiaLog=function(){this.dialogNode=this.dialogNode||this.createDialog(),document.body.appendChild(this.dialogNode),this.dialogNode.onclick=this.onConfirm.bind(this)},e.prototype.on=function(e,t){return this.eManager.addEventHandler(e,t)},e.instance=null,e}();t.AutoplayDialog=a},9307:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamView=void 0;var a=s(r(4671)),c=r(3770),u=r(8935).AutoplayDialog.getInstance(),l=function(){function e(e,t){var r,o,n,i=this;this.previewer=t,this.video=null,this.audio=null,this.options={enableAutoplayDialog:!0},this.emitPlayFailed=(r=function(){i.eventManager.emit("autoplayFailed"),i.options.enableAutoplayDialog&&u.addDiaLog()},void 0===(o=600)&&(o=100),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this;clearTimeout(n),n=window.setTimeout((function(){r.apply(i,e)}),o)}),this.eventHandler={visibilitychange:function(){var e;!document.hidden&&(null===(e=i.audio)||void 0===e?void 0:e.parentNode)&&(i.audio.srcObject=i.audio.srcObject,i.mountPlayer(i.audio,!0))}};var s=this.id="".concat(e.id),c=document.createElement("div");c.id="zg-rtc-player_".concat(s),c.setAttribute("style","width:100%;height:100%;position:relative;background-color:black;overflow:hidden;");var l=e.getVideoTracks()[0],d=e.getAudioTracks()[0],h=document.createElement("video");h.id="zg-rtc-video_".concat(s),h.setAttribute("style","width:100%;height:100%;object-fit:contain;"),h.setAttribute("autoplay","autoplay"),h.setAttribute("playsinline","playsinline"),h.muted=!0,h.srcObject=new MediaStream,l&&h.srcObject.addTrack(l);var p=document.createElement("audio");p.id="zg-rtc-audio_".concat(s),p.setAttribute("autoplay","autoplay"),p.setAttribute("playsinline","playsinline"),p.srcObject=new MediaStream,d&&p.srcObject.addTrack(d),this.wrapper=c,this.video=h,this.audio=p,this.eventManager=new a.default,u.on("allowPlay",(function(){i.resume()})),document.addEventListener("visibilitychange",this.eventHandler.visibilitychange)}return Object.defineProperty(e.prototype,"isLocal",{get:function(){return this.previewer instanceof c.ZegoPreview},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMounted",{get:function(){return!!this.wrapper.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAudio",{get:function(){var e,t,r;return!!(null===(e=this.audio)||void 0===e?void 0:e.parentNode)&&"live"===(null===(r=null===(t=this.audio.srcObject)||void 0===t?void 0:t.getTracks()[0])||void 0===r?void 0:r.readyState)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasVideo",{get:function(){var e,t,r;return!!(null===(e=this.video)||void 0===e?void 0:e.parentNode)&&"live"===(null===(r=null===(t=this.video.srcObject)||void 0===t?void 0:t.getTracks()[0])||void 0===r?void 0:r.readyState)},enumerable:!1,configurable:!0}),e.prototype.resume=function(e){return n(this,void 0,void 0,(function(){var t=this;return i(this,(function(r){return["audio","video"].forEach((function(r){return n(t,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return t="audio"===r?this.audio:this.video,("audio"===r?this.hasAudio:this.hasVideo)?(e&&t&&(t.srcObject=t.srcObject),[4,null==t?void 0:t.play()]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))})),[2]}))}))},e.prototype.play=function(e,t){void 0===t&&(t={});var r=null;if("string"==typeof e?r=document.getElementById(e):e instanceof HTMLElement&&(r=e),!r)throw"Execute `play` failed, container not exist";this.options=o(o({},this.options),t);var n=this.options,i=n.objectFit,s=n.muted,a=n.mirror,c=!this.isLocal;this.audio&&"boolean"==typeof s&&(c=!s),this.video&&(void 0!==i&&(this.video.style.objectFit=i),"boolean"==typeof a&&(this.video.style.transform=a?"rotateY(180deg)":"")),!r.contains(this.wrapper)&&r.appendChild(this.wrapper),this.mountPlayer(this.video,!0),this.mountPlayer(this.audio,c)},e.prototype.stop=function(){var e,t=null===(e=this.wrapper)||void 0===e?void 0:e.parentNode;t&&t.removeChild(this.wrapper)},e.prototype.setVideo=function(e,t){return void 0===t&&(t=!1),n(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this.setTrack(!0,e,t)];case 1:return r.sent(),[2]}}))}))},e.prototype.setAudio=function(e,t){return void 0===t&&(t=!1),n(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this.setTrack(!1,e,t)];case 1:return r.sent(),[2]}}))}))},e.prototype.setTrack=function(e,t,r){return void 0===r&&(r=!1),n(this,void 0,void 0,(function(){var o,n,s,a=this;return i(this,(function(i){switch(i.label){case 0:return(o=e?this.video:this.audio)&&(n=o.srcObject)?t?[3,1]:((s=n.getTracks()).forEach((function(e){null==n||n.removeTrack(e)})),this.eventManager.emit("_trackChanegd",e?"video":"audio"),[3,8]):[2];case 1:if(!(t instanceof MediaStreamTrack))return[3,8];if((s=n.getTracks()).includes(t))return[3,8];if(s.forEach((function(e){null==n||n.removeTrack(e)})),n.addTrack(t),this.eventManager.emit("_trackChanegd",t.kind,t),!r)return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.resume(!0)];case 3:case 4:return i.sent(),[3,5];case 5:return[3,8];case 6:return[4,o.play().catch((function(t){(e?a.hasVideo:a.hasAudio)&&o.paused&&a.emitPlayFailed(t)}))];case 7:i.sent(),i.label=8;case 8:return[2]}}))}))},e.prototype.setMirror=function(e){var t=this.options.mirror=!!e;this.video&&(this.video.style.transform=t?"rotateY(180deg)":"")},e.prototype.setVideoMuted=function(e){return this.mountPlayer(this.video,!e)},e.prototype.setAudioMuted=function(e){return this.mountPlayer(this.audio,!e)},e.prototype.setVolume=function(e){if(this.audio){var t=e>100?1:e/100;return this.audio.volume=t,this.audio.volume==t}return!1},e.prototype.takeStreamSnapshot=function(e){var t=this.video;if(!t)return"";if(!t.srcObject)return"";var r=document.createElement("canvas");r.width=this.video.videoWidth,r.height=this.video.videoHeight;var o=r.getContext("2d");o&&o.drawImage(this.video,0,0,r.width,r.height);var n=r.toDataURL("image/"+(null==e?void 0:e.imageType)||0,null==e?void 0:e.quality),i="png";return(null==e?void 0:e.imageType)&&(i=["png","jpeg"].includes(null==e?void 0:e.imageType)?null==e?void 0:e.imageType:"png"),(null==e?void 0:e.save)&&r.toBlob((function(t){var r=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=r;var n=(null==e?void 0:e.fileName)||"snapshot"+Date.now();o.download=n+"."+i,document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(r)}),100)})),n},e.prototype.mountPlayer=function(e,t){var r,o,n=this;if(!e||!this.wrapper)return!1;var i="VIDEO"===e.tagName;if(t){if(t&&"live"===(null===(o=null===(r=null==e?void 0:e.srcObject)||void 0===r?void 0:r.getTracks()[0])||void 0===o?void 0:o.readyState)){var s=null,a=function(){e.oncanplay=null,s&&(clearTimeout(s),s=null),e.play().catch((function(){n.isMounted&&(i&&n.hasVideo||!i&&n.hasAudio)&&n.emitPlayFailed()}))};e.muted=!1,e.play().catch((function(){})),s=window.setTimeout((function(){a()}),1e3),e.oncanplay=function(){a()},!e.parentNode&&this.wrapper.appendChild(e)}}else{e.muted=!0;var c=e.parentNode;c&&c.removeChild(e)}return!0},e.prototype.on=function(e,t){return!!t&&this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},e.prototype.useAudioOut=function(e){var t;return n(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return(r=null===(t=this.audio)||void 0===t?void 0:t.setSinkId)?[4,r.call(this.audio,e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},e.prototype.destroy=function(){this.stop(),this.audio=null,this.video=null,document.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},e.prototype.getAudioElement=function(){return this.audio},e}();t.StreamView=l},3409:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenterWeb=t.CachedNodesUseMode=void 0;var u,l=r(6706),d=r(3770),h=r(1547),p=r(5740),f=r(6706),_=r(5019),g=r(3849),m=r(6014),v=r(8493),y=r(2752),b=r(3529),S=r(2990),E=r(1089),T=c(r(3720)),w=r(608);!function(e){e[e.NotReUse=0]="NotReUse",e[e.TheSameReUse=1]="TheSameReUse",e[e.DiffReUse=2]="DiffReUse",e[e.AllReUse=3]="AllReUse"}(u=t.CachedNodesUseMode||(t.CachedNodesUseMode={}));var C=b.ZegoRTCLogEvent.kZegoTaskPublishStart,I=b.ZegoRTCLogEvent.kZegoTaskPlayStart,O=function(e){function t(t,r,o,n,i,s){var a,c=this;return(c=e.call(this)||this).logger=t,c.stateCenter=r,c.dataReport=o,c.rtm=n,c.ac=i,c.mediaEleSources=s,c.testEnvironment=!1,c.heartbeatTimer=null,c.heartbeatInterval=1e4,c.qualityTimerInterval=3e3,c.previewStreamList=[],c.signalList={},c.chargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]},c.soundLevelDelegate=!1,c.soundLevelInterval=1e3,c.enableInBackground=!1,c.isPeer=!0,c.probeList={},c.isMicEnabled=!0,c.isDataChannelEnabled=!1,c.publishQualityInfos=[],c.playQualityInfos=[],c.qualityUploadTimestamp=0,c.qualityHeadTimestamp=0,c.gwNode="",c.playerList={},c.stopedPlayerList={},c.publisherList={},c.playSuccessCallBackList={},c.playErrorCallBackList={},c.waitPublishList=[],c.waitPlayList=[],c.autoSwitchProtocol=!0,c.udpFailNum=0,c.maxUdpFailNum=2,c.qualityInterval=3e3,c.switchScore=60,c.defaultBadQualityTime=3e4,c.l3BadQualityTime=1e4,c.switchDetectResultScore=60,c.cdnBadQualityScore=60,c.l3BadQualityScore=60,c.multiPlaySwitchRate=.8,c.protocolBadQualityCount=3,c.protocolBadQualityTime=12e3,c.protocolQualityCacheExpiredTime=18e4,c.fallbackInhibitionTime=18e4,c.probeExpiredTime=3e4,c.minProbeInterval=15e3,c.l3DetectedTimestamp=0,c.l3DetectResult=0,c.isL3Fallback=!1,c.cdnProtocolBadTimestamp=0,c.l3ProtocolBadTimestamp=0,c.lastHandleCDNBadTimestamp=0,c.lastHandleL3BadTimestamp=0,c.cdnProtocolBadTime=0,c.l3ProtocolBadTime=0,c.probeStartedNum=3,c.cachedGwNodesList={},c.cachedGwNodesMode=u.TheSameReUse,c.tryCountConnectInterval=3e3,c.checkMessageTimeout=function(){for(var e in c.signalList)c.signalList[e].signal&&c.signalList[e].signal.checkMessageTimeout()},c.getAllInUseUrl=function(){var e=[];for(var t in c.signalList)e.push(t);return e},c.onDisconnectHandle=function(e,t){if(c.logger.info("zsc.od.0 call"),c.signalList[e]){for(var r=c.signalList[e],o=0;o<r.publishConnectedList.length;o++){var n=c.publisherList[r.publishConnectedList[o]];n&&n.publisher&&n.publisher.onDisconnect(t)}for(o=0;o<r.playConnectedList.length;o++){var i=c.playerList[r.playConnectedList[o]];i&&i.player&&i.player.onDisconnect(t)}delete c.signalList[e],c.stopSignalHeartbeat(),c.stateCenter.billingTimer.stopChargeInfosUpload(),c.stopSoundLevel()}},c.eventHandler={visibilitychange:function(){var e=!document.hidden;!c.enableInBackground&&c.soundLevelDelegate&&(e?(c.enableSoundLevelProcessor(!0),c.activeSoundLevel()):(c.soundLevelTimer&&clearTimeout(c.soundLevelTimer),c.soundLevelTimer=null,c.enableSoundLevelProcessor(!1))),c.ac.resume()}},c.rtm._on("_roomStateUpdate",(function(e,t){for(var r in c.playerList){var o=c.playerList[r],n=o.cdnPlayer;o.room.roomID==e&&n&&o.player.state===f.ENUM_PLAY_STATE.playing&&o.playMode==l.PlayMode.CDN&&("CONNECTED"==t?(n.canRetry=!0,n.retry()):"DISCONNECTED"===t&&c.stopPlayingStream(r))}})),document.addEventListener("visibilitychange",c.eventHandler.visibilitychange),null===(a=c.rtm.netAgent)||void 0===a||a.on("clientInfo",(function(e){if(c.stateCenter.accessClientIp&&(null==e?void 0:e.clientIP)&&c.stateCenter.accessClientIp!==e.clientIP){for(var t in c.logger.warn(E.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+c.stateCenter.accessClientIp+" "+e.clientIP),c.publisherList){var r=c.publisherList[t].publisher;r.resetGwNodes(),c.clearCachedGwNodesList(r,!0)}for(var t in c.playerList){var o=c.playerList[t].player;o.resetGwNodes(),c.clearCachedGwNodesList(o,!1)}}c.stateCenter.accessClientIp=e.clientIP})),c}return n(t,e),Object.defineProperty(t.prototype,"cameraPreviewStream",{get:function(){return this.previewStreamList.find((function(e){return"camera"===e.previewType}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"microphonePreviewStream",{get:function(){return this.previewStreamList.find((function(e){return"camera"===e.previewType&&e.micTrack}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldReportNoPlaying",{get:function(){return this.stateCenter.billingTimer.shouldReportRoomTime},enumerable:!1,configurable:!0}),t.prototype.onSignalDisconnected=function(e){},t.prototype.setQualityMonitorCycle=function(e){var t=this;return this.logger.debug("zsc.qmc.0 timeInterval "+e),0==Object.keys(this.publisherList).length?this.qualityTimerInterval=e:Object.keys(this.publisherList).forEach((function(r){t.publisherList[r].publisher.qualityTimeInterval=e,t.publisherList[r].publisher.setPublishQualityTimer()})),!0},t.prototype.setSessionInfo=function(e,t,r){this.logger.debug("zsc.ssi.0 called"),this.appid=e,this.userid=t,this.testEnvironment=r},t.prototype.onPlayStateUpdate=function(e,t,r){},t.prototype.onPlayQualityUpdate=function(e,t){},t.prototype.onPublishStateUpdate=function(e,t,r){},t.prototype.onPublishQualityUpdate=function(e,t){},t.prototype.onUpdateHeartBeatIntervalHandle=function(e){e!=this.heartbeatInterval&&(this.logger.debug("zsc.uhb.0 update "+e),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatInterval=e,this.startSignalHeartbeat())},t.prototype.setPublishStateStart=function(e,t,r,o,n,i){var s,a,c=this;this.logger.info("zsc.pss.0 call "+t);var u=this.checkPreview(r);if(!u)return this.logger.error("zsc.pss.0 stream not found"),!1;if(this.publisherList[t])return this.logger.error("zsc.pss.0 publisher already exist"),this.stateCenter.reporter.spanSetAttributes({key:C.event,par:t},{error:C.error.kIsPublishing.code,message:C.error.kIsPublishing.message}),!1;var l=new h.ZegoPublish(t,this.logger,this.dataReport,this.qualityTimerInterval,this,this.stateCenter,u);l.state=f.ENUM_PUBLISH_STATE.start,l.isPeer=this.isPeer,l.reportSeq=this.stateCenter.reportSeqList.startPublish[t],l.isExternal=!0,l.cachedGwNodesMode=this.cachedGwNodesMode,l.parentSpanKey=b.ZegoRTCLogEvent.kZegoStartPublish.event;var d=null===(s=null==u?void 0:u.videoTrack)||void 0===s?void 0:s.label,p="",_="",g=r.getAudioTracks()[0]&&r.getAudioTracks()[0].label;try{p=null===(a=null==u?void 0:u.videoTrack)||void 0===a?void 0:a.getSettings().deviceId,_=r.getAudioTracks()[0]&&r.getAudioTracks()[0].getSettings().deviceId}catch(e){this.logger.warn("zsc.pss.0 get device id failed. error: "+e)}var y=new m.RetryStreamHandler(this.logger,this.stateCenter,this,!0);return this.publisherList[t]={seq:0,room:e,localStream:r,publisher:l,serverUrls:[],ttl:0,isCenterNode:!0,streamID:t,publishOption:o,cameraLabel:d||"",microLabel:g||"",cameraDeviceId:p||"",microDeviceId:_||"",deviceStateCount:0,retryStreamHandler:y,retryDispatchHandler:new v.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:i,streamSid:n},l.onPublishStateUpdate=function(e,r,o,n,i,s){var a=c.publisherList[r];a?a.retryStreamHandler.publishStateHandle(e,a.streamID,o,n,i,s):c.logger.error("zsc.psuh.0 cannot find publish "+t)},l.onPublishQualityUpdate=function(e,r){var o=c.publisherList[e];o?(c.stateCenter.deviceStateOut&&0===r.audio.audioBitrate?(o.deviceStateCount++,o.deviceStateCount>=2&&(o.deviceStateCount=0,c.stateCenter.deviceStateOut=!1,c.logger.warn("zsc.pss.0 publish audio error by device"))):o.deviceStateCount=0,c.onPublishQualityUpdate(o.streamID,r)):c.logger.error("zsc.psuh.0 cannot find publish "+t)},!0},t.prototype.startPublishingStream=function(e,t){void 0===t&&(t=!1),this.logger.info("zsc.sps.0 call");var r=this.publisherList[e];if(!r)return this.logger.error("zsc.sps.0 publisher don't exist"),!1;if(!t){if(this.stateCenter.reporter.spanSetAttributes({key:C.event,par:e},{urls:C.urls(r.serverUrls),is_center:C.is_center(r.isCenterNode)}),!r.serverUrls||0===r.serverUrls.length)return r.retryStreamHandler.publishStateHandle(f.ENUM_PUBLISH_STATE_UPDATE.error,e,y.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.0 server don't have signal url"),!0;var o=r.serverUrls.indexOf(this.server);-1!==o&&(r.serverUrls.splice(o,1),r.serverUrls.unshift(this.server))}var n=r.retryStreamHandler;return n.invalid(),n.init(this.stateCenter.streamRetryTime),n.initStream(e,r.serverUrls),n.startMaxTime(),n.activePublish(0)},t.prototype.updateWaitingList=function(e,t,r,o,n){var i={streamID:r,success:o,error:n};t?e.publishWaitingList.push(i):e.playWaitingList.push(i)},t.prototype.publishStream=function(e){var t=this.publisherList[e].publisher;if(t){var r=null,o=null,n=this.publisherList[e].publishOption,i=this.checkPreview(this.publisherList[e].localStream);i?(r=i.localStream,o=i.videoInfo,this.stateCenter.reporter.spanSetAttributes({key:C.event,par:e},{cap_w:C.cap_w(i.videoInfo.width),cap_h:C.cap_h(i.videoInfo.height),w:C.w(i.videoInfo.width),h:C.h(i.videoInfo.height),video_en_fps:C.video_en_fps(i.videoInfo.frameRate),video_en_bps:C.video_en_bps(1e3*i.videoInfo.bitRate)}),r?(this.logger.info("zsc.ps.0 call success"),this.setStreamGwNode(t,!0),t.startPublish(e,r,o,i.mediaStreamConfig,n)):this.logger.error("zsc.ps.0 no localStream found")):this.logger.error("zsc.ps.0 no preview found")}else this.logger.info("zsc.ps.0 publisher don't exist")},t.prototype.connectPublishServer=function(e,t){var r=this,o=this.publisherList[e];if(!o)return this.logger.error("zsc.cps.0 publisher don't exist"),!1;var n=Date.now();return this.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:o.publisher.parentSpanKey,par:e},{key:b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:e},b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,!0),this.connectWithReuseSignalServer(e,!0,t,(function(e,t,o){var i=r.publisherList[e];if(i){var s=i.publisher;if(s){var a=Date.now()-n;r.stateCenter.reporter.spanSetAttributes({key:s.parentSpanKey,par:e},{dispatch_consume:b.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(a)}),s.reportSpan.setAttributes({server_url:b.ZegoRTCLogEvent.kZegoTaskSDKPublishStream.server_url(o)}),r.stateCenter.reporter.spanSetAttributes({key:C.event,par:e},{server_url:C.server_url(o)}),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:e},{result:0,server_url:b.ZegoRTCLogEvent.kZegoPublishServerConnect.server_url(o)});var c=t.tokenInfo;r.logger.info("zsc.cps.0 update token success"),c&&c.report&&(s.qualityUpload=c.report,s.qualityUploadInterval=c.report_interval),s.signal=t.signal,r.server=o,r.publishStream(e),r.getTokenSuccess()}else r.logger.info("zsc.cps.1 check publisher don't exist")}else r.logger.info("zsc.cps.0 after connect publisher don't exist")}),(function(e,t){r.logger.error("zsc.cps.0 "+e+" connect fail "+JSON.stringify(t));var o=r.publisherList[e];if(o)if(o.publisher){var n,s=!1;t&&t.code===y.errorCodeList.GET_CONFIG_FAIL.code?(n=i({},y.errorCodeList.GET_CONFIG_FAIL),s=!0):((n=i({},y.errorCodeList.CONNECT_FAILED)).message=n.message+" "+t,1008===t&&(n=y.errorCodeList.TOKEN_EXPIRED,s=!0),20010===t&&(s=!0,n=JSON.parse(JSON.stringify(y.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL)))),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:e},{result:t,error:n.code,message:n.message}),o.retryStreamHandler.publishStateHandle(f.ENUM_PUBLISH_STATE_UPDATE.error,e,n,s)}else r.logger.info("zsc.cps.1 check publisher don't exist");else r.logger.info("zsc.cps.0 after connect publisher don't exist")})),!0},t.prototype.getTokenSuccess=function(){this.logger.debug("zsc.gts.0 call")},t.prototype.stopPublishingStream=function(e,t){this.logger.info("zsc.sps.0.1 call "+e+" "+JSON.stringify(t));var r=this.publisherList[e];if(r){var o=r.retryStreamHandler;for(var n in o&&(o.stopMaxTime(),o.invalid()),this.signalList)this.signalList[n].publishWaitingList=this.signalList[n].publishWaitingList.filter((function(t){return t.streamID!==e}));delete this.publisherList[e],r.publisher&&(r.publisher.stopPublish(t),delete r.publisher),this.removeStreamFromSignal(!0,e),this.stopSignalHeartbeat(),this.stateCenter.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),this.logger.info("zsc.sps.0.1 call success")}else this.logger.warn("zsc.sps.0.1 publisher don't exist")},t.prototype.connectWithReuseSignalServer=function(e,t,r,o,n){var i=this;this.logger.info("zsc.crss.0 begin "+r);var s=null;if(this.signalList[r])(s=this.signalList[r]).state==f.ENUM_SIGNAL_STATE.connected?(this.logger.info("zsc.crss.0 already connected "+r+" streamId: "+e),t?s.publishConnectedList.push(e):s.playConnectedList.push(e),o(e,s,r)):s.state==f.ENUM_SIGNAL_STATE.connecting&&(this.logger.info("zsc.crss.0 signal is connecting "+r+" streamId: "+e),this.updateWaitingList(s,t,e,o,n));else{this.logger.info("zsc.crss.0 new signal "+r+", streamId: "+e);var a=["unified_rtc","unified_l3"].includes(r),c=new _.ZegoSignal(this.logger,this.stateCenter,this.rtm.netAgent,a);this.stateCenter.clientIP=this.rtm.netAgent.clientIP,c.setSessionInfo(this.appid,this.userid),a||(c.onUpdateHeartBeatInterval=this.onUpdateHeartBeatIntervalHandle.bind(this)),c.onDisconnect=this.onDisconnectHandle;var u=this.publisherList[e]||this.playerList[e]||null,l=null==u?void 0:u.retryStreamHandler;if(this.stateCenter.streamConnectTime)c.tryConnectInterval=this.stateCenter.streamConnectTime;else if(l&&l.retryActiveCount){var d=l.retryActiveCount*(l.retryActiveCount-1)/2+2;c.tryConnectInterval=1e3*(d=d>f.MAX_RETRY_CONNECT_INTERVAL?f.MAX_RETRY_CONNECT_INTERVAL:d)}this.signalList[r]={signal:c,state:f.ENUM_SIGNAL_STATE.connecting,publishWaitingList:[],playWaitingList:[],publishConnectedList:[],playConnectedList:[],tokenInfo:null},this.updateWaitingList(this.signalList[r],t,e,o,n);var h=null==u?void 0:u.room.token,p=null==u?void 0:u.room.roomID;this.logger.info("zsc.crss.0 "+h),c.connectServer(p||this.stateCenter.roomList[0].roomID,h||this.stateCenter.roomList[0].token,r,(function(e,t,o){if(s=i.signalList[r],0!=e){i.logger.info("zsc.crss.0 connect failed "+t);for(var n=s.publishWaitingList,c=n.length-1;c>=0;c--)(l=n[c]).error&&l.error(l.streamID,e);var u=s.playWaitingList;for(c=u.length-1;c>=0;c--){var l;(l=u[c]).error&&l.error(l.streamID,e)}delete i.signalList[r]}else i.logger.info("zsc.crss.0 connected success "+t),s.state=f.ENUM_SIGNAL_STATE.connected,s.tokenInfo=o,s.publishWaitingList.forEach((function(e){e.success&&e.success(e.streamID,s,t),s&&s.publishConnectedList.push(e.streamID)})),s.playWaitingList.forEach((function(e){e.success&&e.success(e.streamID,s,t),s&&s.playConnectedList.push(e.streamID)})),s.publishWaitingList=[],s.playWaitingList=[],a||null!=i.heartbeatTimer||i.startSignalHeartbeat(),i.stateCenter.billingTimer.startChargeInfosUpload(),i.activeSoundLevel()}))}},t.prototype.setPlayStateStart=function(e,t,r,o){var n=this;if(this.logger.info("zsc.pss.1 call "+e),this.rtm.isDisConnect()&&this.stateCenter.networkState==l.ENUM_NETWORK_STATE.offline)return this.logger.error("zsc.pss.1 network offline"),!1;if(this.playerList[e])return this.logger.error("zsc.pss.1 player already exist"),this.stateCenter.reporter.spanEnd({key:I.event,par:e},{error:I.error.kIsPlaying.code,message:I.error.kIsPlaying.message}),I.error.kPlayRepeatedPullError;var i=this.getPlayRoom(e)||this.stateCenter.roomList[0];if(!i)return this.logger.error("zsc.pss.1 not login room"),this.stateCenter.reporter.spanEnd({key:I.event,par:e},{error:I.error.kPlayNoLoginError.code,message:I.error.kPlayNoLoginError.message}),I.error.kPlayNoLoginError;var s=new g.ZegoPlayWeb(e,this.logger,null,this.dataReport,this.qualityTimerInterval,this,this.ac,this.stateCenter);t&&[0,1,2,3].includes(t.resourceMode)&&(s.resourceMode=t.resourceMode),this.stateCenter.reporter.spanSetAttributes({key:I.event,par:e},{resource_mode:I.resource_mode(s.resourceMode),src:I.src((0,w.getPlaySourceType)(s.resourceMode)),room_id:I.room_id(null==i?void 0:i.roomID),room_sid_string:I.room_sid_string(null==i?void 0:i.roomSessionID),is_multi:I.is_multi(this.stateCenter.isMultiRoom)}),s.state=f.ENUM_PLAY_STATE.start,s.isPeer=this.isPeer,s.reportSeq=this.stateCenter.reportSeqList.startPlay[e],s.isExternal=!0,s.cachedGwNodesMode=this.cachedGwNodesMode,s.parentSpanKey=b.ZegoRTCLogEvent.kZegoStartPlay.event,s.beginTime=(new Date).getTime();var a=new m.RetryStreamHandler(this.logger,this.stateCenter,this,!1),c=l.PlayMode.CDN,u=(new Date).getTime();for(var d in this.playerList)if(this.playerList[d].playMode==l.PlayMode.L3){c=l.PlayMode.L3;break}return this.cdnProtocolBadTimestamp&&this.cdnProtocolBadTimestamp+this.protocolQualityCacheExpiredTime>u&&0==this.l3ProtocolBadTimestamp&&(c=l.PlayMode.L3),this.playerList[e]={seq:0,room:i,player:s,signal:null,serverUrls:[],ttl:0,isCenterNode:!0,streamID:e,playOption:t,retryStreamHandler:a,retryDispatchHandler:new v.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:o,cdnPlayer:null==t?void 0:t.CDNPlayer,playMode:c,streamSid:r},s.onPlayStateUpdate=function(e,t,r,o,i,s){var c=n.playerList[t];c?a.playStateHandle(e,c.streamID,r,o,i,s):n.logger.error("zsc.pss.1 cannot find play "+t)},s.onPlayQualityUpdate=function(e,t){var r=n.playerList[e];r?n.onPlayQualityUpdate(r.streamID,t):n.logger.error("zsc.pss.1 cannot find play "+e)},s.onRemoteCameraStatusUpdate=function(e,t,r){var o=n.playerList[e];o?n.onRemoteCameraStatusUpdate(o.streamID,t,r):n.logger.error("zsc.pss.1 cannot find play "+e)},s.onRemoteMicStatusUpdate=function(e,t,r){var o=n.playerList[e];o?n.onRemoteMicStatusUpdate(o.streamID,t,r):n.logger.error("zsc.pss.1 cannot find play "+e)},!0},t.prototype.onRemoteMicStatusUpdate=function(e,t,r){},t.prototype.onRemoteCameraStatusUpdate=function(e,t,r){},t.prototype.startPlayingStream=function(e,t,r,o){var n;void 0===t&&(t=!1),this.logger.info("zsc.sps.1 start play called");var i=this.playerList[e];if((null===(n=i.playOption)||void 0===n?void 0:n.CDNVideo)&&i.player.firstPlay){var s=i.playOption.CDNVideo;i.player._CDNPlayerClone=s.cloneNode(),i.player.initPoster=(null==s?void 0:s.getAttribute("poster"))||"",i.player.initVideoStyle=(null==s?void 0:s.getAttribute("style"))||"",i.player.firstPlay=!1}if(o)return this.playCDN(e,this.playerList[e].playOption,this.playSuccessCallBackList[e],this.playErrorCallBackList[e]),!0;if(!i)return this.logger.error("zsc.sps.1 player don't exist"),!1;var a=i.player;if(-1==e.indexOf("zegoprobe-")&&i.playMode==l.PlayMode.L3&&this.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:b.ZegoRTCLogEvent.kZegoTaskL3Play.event,par:e},b.ZegoRTCLogEvent.kZegoTaskL3Play.event).setAttributes({tryidx:b.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(a.tryidx),biz_product:b.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(i.playOption.resourceMode==l.ResourceMode.DG?1:0)}),this.stateCenter.reporter.spanSetAttributes({key:I.event,par:e},{urls:I.urls(i.serverUrls),is_center:I.is_center(i.isCenterNode)}),!t){if(0==i.serverUrls.length)return i.retryStreamHandler.playStateHandle(f.ENUM_PLAY_STATE_UPDATE.error,e,y.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.1 server don't have signal url"),!1;var c=i.serverUrls.indexOf(this.server);-1!==c&&(i.serverUrls.splice(c,1),i.serverUrls.unshift(this.server))}var u=i.retryStreamHandler;return u.invalid(),u.init(this.stateCenter.streamRetryTime),u.initStream(e,i.serverUrls),u.startMaxTime(),u.activePull(0,r)},t.prototype.connectPlayServer=function(e,t,r){var o=this,n=this.playerList[e];if(!n)return this.logger.error("zsc.cps.1 player don't exist"),!1;this.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:n.player.parentSpanKey,par:e},{key:b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:e},b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,!0);var s=Date.now();return this.connectWithReuseSignalServer(e,!1,r,(function(e,r,n){var i=o.playerList[e];if(i){var a=i.player;if(a){a.reportSpan.setAttributes({server_url:b.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.server_url(n)});var c=Date.now()-s;o.stateCenter.reporter.spanSetAttributes({key:a.parentSpanKey,par:e},{dispatch_consume:b.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(c)}),o.stateCenter.reporter.spanSetAttributes({key:I.event,par:e},{server_url:I.server_url(n)}),o.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:e},{result:0,server_url:n});var u=r.tokenInfo;o.logger.info("zsc.cps.1 update token success"),u&&u.report&&(a.qualityHandler.qualityUpload=u.report,a.qualityHandler.qualityUploadInterval=u.report_interval),a.signal=r.signal,o.server=n,o.playStream(e,t),o.getTokenSuccess()}else o.logger.error("zsc.cps.1 checkplayer don't exist")}else o.logger.error("zsc.cps.1 after connect player don't exist")}),(function(e,t){var n=o.playerList[e];if(n){var s=i({},y.errorCodeList.CONNECT_FAILED);s.message=s.message+" "+t,1008===t&&(s=y.errorCodeList.TOKEN_EXPIRED),o.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:e},{result:t,error:s.code,message:s.message});var a=1008==t;20010===t&&(a=!0,s="unified_l3"===r?y.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL:y.errorCodeList.PLAYER_SESSION_REQUEST_FAIL),n.retryStreamHandler.playStateHandle(f.ENUM_PLAY_STATE_UPDATE.error,e,s,a)}else o.logger.error("zsc.cps.1 after connect player don't exist")})),!0},t.prototype.playStream=function(e,t){var r=this.playerList[e].player;r?(this.logger.info("zsc.ps.1 call success"),this.setStreamGwNode(r,!1),r.startPlay(e,t,this.playerList[e].playOption)):this.logger.warn("zsc.ps.1 player don't exist")},t.prototype.stopSignalHeartbeat=function(){this.logger.debug("zsc.ssh.1 call");var e=0;for(var t in this.signalList)e+=1;this.heartbeatTimer&&0==e&&(this.logger.info("zsc.ssh.1 stop"),clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},t.prototype.removeStreamFromSignal=function(e,t){this.logger.info("zsc.rsfs.0 call "+e+" "+t);var r=[];for(var o in this.signalList){var n=this.signalList[o];if(e){for(var i=0;i<n.publishConnectedList.length;i++)if(n.publishConnectedList[i]===t){this.logger.debug("zsc.rsfs.0 found from publish"),n.publishConnectedList.splice(i,1);break}for(i=0;i<n.publishWaitingList.length;i++)if(n.publishWaitingList[i].streamID===t){this.logger.debug("zsc.rsfs.0 found from publish"),n.publishWaitingList.splice(i,1);break}}else{for(var s=0;s<n.playConnectedList.length;s++)if(n.playConnectedList[s]===t){this.logger.debug("zsc.rsfs.0 found from play"),n.playConnectedList.splice(s,1);break}for(s=0;s<n.playWaitingList.length;s++)if(n.playWaitingList[s].streamID===t){this.logger.debug("zsc.rsfs.0 found from play"),n.playWaitingList.splice(s,1);break}}0==n.publishConnectedList.length&&0==n.playConnectedList.length&&0==n.publishWaitingList.length&&0==n.playWaitingList.length&&(n.signal.disconnectServer(),r.push(o))}for(var a=0;a<r.length;a++)delete this.signalList[r[a]],this.server==r[a]&&(this.server="")},t.prototype.stopPlayingStream=function(e,t){var r=this.playerList[e];if(r){var o=r.retryStreamHandler,n=r.cdnPlayer;for(var i in o&&(o.stopMaxTime(),o.invalid()),this.signalList)this.signalList[i].playWaitingList=this.signalList[i].playWaitingList.filter((function(t){return t.streamID!==e}));if(r.playMode==l.PlayMode.CDN&&n&&(this.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:e}),n.stop()),-1==e.indexOf("zegoprobe-")&&r.playMode==l.PlayMode.L3&&this.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskL3Play.event,par:e}),delete this.playerList[e],r.player){r.player.stopPlay(t);var s=r.player.rtcViewer;s&&s.stop()}this.removeStreamFromSignal(!1,e),this.stopSignalHeartbeat(),this.stateCenter.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),delete this.playSuccessCallBackList[e],delete this.playErrorCallBackList[e],this.logger.debug("zsc.sps.1.1 call success")}else this.logger.info("zsc.sps.1.1 player don't exist")},t.prototype.reset=function(e,t,r){var o,n,i,s;for(var a in this.logger.info("zsc.rs call "+e+" "+t+" "+r),this.publisherList)if(this.publisherList[a].room.roomID==e||!e){0===t?this.publisherList[a].publisher.stopReason="Logout":1002031==t&&(this.publisherList[a].publisher.stopReason="ReachMaxAVRetryTime");var c=1002031==t?C.error.kPublishRetryTimeoutError:{code:0,message:""};null===(n=null===(o=this.publisherList[a].room)||void 0===o?void 0:o.streamHandler)||void 0===n||n.onPublishStateUpdate(f.ENUM_PUBLISH_STATE_UPDATE.error,a,c),r&&this.stateCenter.waitPublishStreamList[a]?this.stateCenter.waitPublishStreamList[a].retryStart=!0:r||delete this.stateCenter.waitPublishStreamList[a],this.stopPublishingStream(a,c)}var u=function(o){l.playerList[o].player.stopReason=0===t?"Logout":"ReachMaxAVRetryTime";var n=l.playerList[o].room;if(r&&(null===(s=null===(i=l.playerList[o])||void 0===i?void 0:i.player)||void 0===s?void 0:s.state)<=f.ENUM_PLAY_STATE.playing){var a=l.playerList[o],c=null==a?void 0:a.player;l.stopedPlayerList[o]={streamID:o,playStream:c.playStream,roomID:a.room.roomID,playOption:a.playOption,state:c.state,sucCallBack:(null==c?void 0:c.state)!==f.ENUM_PLAY_STATE.playing?l.playSuccessCallBackList[o]:void 0,errCallBack:(null==c?void 0:c.state)!==f.ENUM_PLAY_STATE.playing?l.playErrorCallBackList[o]:void 0}}if(n.roomID!=e||!n.streamList.find((function(e){return e.stream_id==o}))&&1!=l.stateCenter.roomList.length){if(n.roomID==e&&l.stateCenter.roomList.length>1){var u=l.stateCenter.roomList.find((function(t){return t.roomID!==e}));u?l.playerList[o].room=u:(l.stopPlayingStream(o),l.onPlayStateUpdate(f.ENUM_PLAY_STATE_UPDATE.error,o,I.error.kPlayRetryTimeoutError))}}else l.onPlayStateUpdate(f.ENUM_PLAY_STATE_UPDATE.error,o,1002031==t?I.error.kPlayRetryTimeoutError:{code:0,message:""}),l.stopPlayingStream(o)},l=this;for(var d in this.playerList)u(d);0==Object.keys(this.publisherList).length&&0==Object.keys(this.playerList).length&&(this.probeList={}),this.waitPublishList=[],this.waitPlayList=[],this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=0,this.qualityUploadTimestamp=0,this.l3DetectedTimestamp=0,this.l3DetectResult=0,this.isL3Fallback=!1,this.cdnProtocolBadTimestamp=0,this.l3ProtocolBadTimestamp=0,this.lastHandleCDNBadTimestamp=0,this.lastHandleL3BadTimestamp=0,this.cdnProtocolBadTime=0,this.l3ProtocolBadTime=0,this.qualityWebsocket&&(this.qualityWebsocket.close(),this.qualityWebsocket=void 0),this.logger.info("zsc.rs call success")},t.prototype.startSignalHeartbeat=function(){var e=this;this.logger.debug("zsc.ssh.0 call"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatTimer=setTimeout((function(){e.checkSignalHeartbeat()}),this.heartbeatInterval)},t.prototype.checkSignalHeartbeat=function(){for(var e in this.logger.debug("zsc.csh.0 call"),this.signalList)this.signalList[e].signal&&this.signalList[e].signal.sendHeartbeat();this.heartbeatTimer&&this.startSignalHeartbeat()},t.prototype.getChargeInfos=function(){this.logger.debug("zsc.cci.0 call");var e={is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[]};for(var t in this.shouldReportNoPlaying&&(e.no_playing=1),this.chargeInfos.timestamp_begin=(new Date).getTime(),this.publisherList){this.publisherList[t].publisher.state===f.ENUM_PUBLISH_STATE.publishing&&(e.is_publishing=1);break}e.play_max_audio_bitrate=0;var r=function(t){var r={width:o.playerList[t].player.qualityHandler.lastPlayStats.frameWidth,height:o.playerList[t].player.qualityHandler.lastPlayStats.frameHeight};if(!r.height||!r.width){var n=o.playerList[t].player.playStream;r=n&&0!==n.getVideoTracks().length?n.getVideoTracks()[0].getSettings():void 0}var i={video_width:r&&r.width?r.width:0,video_height:r&&r.height?r.height:0,count:1};if(!e.play_stream_resolution_infos.find((function(e){return e.video_width==i.video_width&&e.video_height==i.video_height&&(e.count++,!0)}))&&e.play_stream_resolution_infos.push(i),0==i.video_width&&0==i.video_height){var s=1e3*o.playerList[t].player.qualityHandler.lastPlayStats.audioBitrate;s>e.play_max_audio_bitrate&&(e.play_max_audio_bitrate=s)}},o=this;for(var n in this.playerList)r(n);return 0!==e.play_stream_resolution_infos.length&&this.shouldReportNoPlaying&&(e.no_playing=0),0!==this.chargeInfos.timestamp_end?(this.chargeInfos.timestamp_diff=this.chargeInfos.timestamp_begin-this.chargeInfos.timestamp_end,this.chargeInfos.timestamp_diff_flag=1):(this.chargeInfos.timestamp_diff=0,this.chargeInfos.timestamp_diff_flag=0),this.chargeInfos.timestamp_end=(new Date).getTime(),this.chargeInfos.infos=[e],this.chargeInfos},t.prototype.getPublisher=function(e){var t=null;if("string"==typeof e&&this.publisherList[e]&&this.publisherList[e].publisher)t=this.publisherList[e].publisher;else if(e instanceof MediaStream){var r=this.checkPublish(e);r&&(t=null==r?void 0:r.publisher)}return t},t.prototype.getPreviewer=function(e){var t,r=null;return"string"==typeof e&&this.publisherList[e]&&this.publisherList[e].publisher?r=null===(t=this.publisherList[e].publisher)||void 0===t?void 0:t.previewer:e instanceof MediaStream&&(r=this.checkPreview(e)),r},t.prototype.checkPlayer=function(e){var t=Object.values(this.playerList).find((function(t){return t.player.playStream===e}));return(null==t?void 0:t.player)||null},t.prototype.checkPreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t].localStream===e)return this.previewStreamList[t];return null},t.prototype.checkPublish=function(e){for(var t in this.publisherList)if(this.publisherList[t].localStream==e)return this.publisherList[t];return null},t.prototype.getPublishList=function(e){var t=[];for(var r in this.publisherList)this.publisherList[r].localStream==e&&t.push(this.publisherList[r]);return t},t.prototype.removePreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t]===e){this.previewStreamList.splice(t,1);break}},t.prototype.onPlayerStreamUrlUpdate=function(e,t,r){},t.prototype.getScreenConstrains=function(e){var t={};if("boolean"==typeof e&&e)t={audio:!1,video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};else if("object"==typeof e){switch(e.videoQuality){case 1:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.LOW.frameRate},bitRate:f.ENUM_SCREEM_RESOLUTION_TYPE.LOW.bitRate};break;case 3:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.frameRate},bitRate:f.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.bitRate};break;case 4:t={video:{frameRate:e.frameRate,width:e.width,height:e.height},bitRate:e.bitRate};break;case 2:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};break;default:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate}}t.audio="boolean"==typeof e.audio&&e.audio,t=i(i(i({},e),t),{width:void 0,height:void 0,frameRate:void 0})}return t},t.prototype.createScreenPreviewer=function(e,t){var r=new d.ZegoPreview(this.logger,this.ac,this.stateCenter,this,"screen"),o=e.getVideoTracks()[0].getSettings();return this.previewStreamList.push(r),r.mediaStreamConfig=t,e.getAudioTracks().length>0&&(r.audioTrack=e.getAudioTracks()[0]),r.localStream=e,r.videoInfo={width:o.width,height:o.height,frameRate:o.frameRate||15,bitRate:(null==t?void 0:t.bitRate)||1e3,startBitrate:(null==t?void 0:t.startBitrate)||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:null==t?void 0:t.minBitrate,keyFrameInterval:null==t?void 0:t.keyFrameInterval},r.previewSuc=!0,r.previewType="screen",(null==t?void 0:t.videoOptimizationMode)&&this.setVideoTrackContentHint(e,null==t?void 0:t.videoOptimizationMode),r},t.prototype.setSoundLevelDelegate=function(e,t,r){void 0===r&&(r=!1),this.logger.info("zsc.ssd.0 call"),t&&this.setSoundLevelInterval(t),this.soundLevelDelegate=e,this.enableInBackground=r,this.enableSoundLevelProcessor(e),e?(this.logger.info("zsc.ssd.0 start getting sound"),this.activeSoundLevel()):(this.logger.info("zsc.ssd.0 stop getting sound"),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null,this.soundLevelInterval=1e3)},t.prototype.setSoundLevelInterval=function(e){var t,r;if(e&&this.soundLevelDelegate){for(var o in this.soundLevelInterval=e,this.previewStreamList)null===(t=this.previewStreamList[o].soundMeterWorklet)||void 0===t||t.setInterval(e);for(var o in this.playerList)null===(r=this.playerList[o].player.soundMeterWorklet)||void 0===r||r.setInterval(e)}},t.prototype.enableSoundLevelProcessor=function(e){for(var t in this.previewStreamList){var r=this.previewStreamList[t];e?r.startSoundLevel():r.stopSoundLevel()}for(var t in this.playerList){var o=this.playerList[t].player;e?o.startSoundLevel():o.stopSoundLevel()}},Object.defineProperty(t.prototype,"hasRemoteStream",{get:function(){return Object.keys(this.signalList).length>0},enumerable:!1,configurable:!0}),t.prototype.activeSoundLevel=function(){!this.soundLevelTimer&&this.soundLevelDelegate&&this.startSoundLevel()},t.prototype.startSoundLevel=function(){var e=this;this.soundLevelTimer&&(clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null),this.soundLevelDelegate&&(this.hasRemoteStream&&this.checkSoundLevel(),this.checkMicSoundLevel(),this.soundLevelTimer=setTimeout((function(){e.startSoundLevel()}),this.soundLevelInterval))},t.prototype.checkSoundLevel=function(){this.logger.debug("zsc.csl.0 call");var e=[];for(var t in this.publisherList){var r=0,o=this.publisherList[t].publisher,n=o.previewer;n&&(r=n.soundLevel),e.push({streamID:this.getBackStreamId(o.streamId),soundLevel:r,type:"push"})}for(var t in this.playerList){var i=this.playerList[t].player;i.streamId&&!i.isProbe&&e.push({streamID:this.getBackStreamId(i.streamId),soundLevel:i.soundLevel,type:"pull"})}this.soundLevelDelegate&&e.length>0&&this.onSoundLevelUpdate(e)},t.prototype.checkMicSoundLevel=function(){this.microphonePreviewStream&&this.soundLevelDelegate&&this.onMicSoundLevelUpdate(this.microphonePreviewStream.soundLevel)},t.prototype.getBackStreamId=function(e){return this.testEnvironment&&e?e.replace("zegotest-"+this.appid+"-",""):e},t.prototype.onSoundLevelUpdate=function(e){},t.prototype.onMicSoundLevelUpdate=function(e){},t.prototype.stopSoundLevel=function(){this.soundLevelTimer&&!this.hasRemoteStream&&0===this.previewStreamList.length&&(this.logger.info("zsc.ssl.0 stop"),clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null)},t.prototype.startNetProbe=function(e,t,r,o){var n=this,i=this.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},b.ZegoRTCLogEvent.kZegoNetProbe.event);if(this.isPeer)if(o){var s="zegoprobe-"+(new Date).getTime();this.setPlayStateStart(s);var a=this.playerList[s]?this.playerList[s].player:null;if(!a)return;a.isProbe=!0,this.playerList[s].serverUrls=["unified_l3"],this.startPlayingStream(s,!0,(function(){})),this.playerList[s].player.isProbeByDG=!0,a.onCalNetQualityResult=function(e,t){n.logger.info("zc.ocnqr.0 l3 detect "+e+" "+t),n.stopPlayingStream(s),n.l3DetectResult=t,n.l3DetectedTimestamp=(new Date).getTime()}}else{var c=!0;r&&0==r.length&&t&&(c=!1,r=e?this.publisherList[t.streamId].serverUrls:this.playerList[t.streamId].serverUrls),r&&t&&r.forEach((function(o){if(!(n.probeList[o]&&n.probeList[o].timeStamp+9e5<(new Date).getTime()||t.probeState==f.ENUM_PROBE_STATE.probed)){var s="zegoprobe-"+(new Date).getTime();n.setPlayStateStart(s);var a=n.playerList[s]?n.playerList[s].player:null;a&&(a.isProbe=!0,c?(a.gwNode=o,a.signal=t.signal,a.startPlay(s,(function(){}))):n.connectPlayServer(s,(function(){}),o),a.onCalNetQualityResult=function(c,u){n.logger.info("zc.ocnqr.0 "+a.gwNode+" "+c+" "+u),n.probeList[o]={result:c,netQuality:u,timeStamp:(new Date).getTime()};var l=Object.keys(n.probeList),d=r&&r.every((function(e){return l.findIndex((function(t){return t===e}))>=0}));t.gwNode==o||t.signal.server==o?t.netQuality=u:n.handleCalNetQualityResult(e,c,u,t,o,d),n.stopPlayingStream(s),i.setAttributes({net_quality:b.ZegoRTCLogEvent.kZegoNetProbe.net_quality(parseInt(t.netQuality+"")),node_list:b.ZegoRTCLogEvent.kZegoNetProbe.node_list(r)}),i.end()})}}))}else this.stateCenter.reporter.setError(i,{code:-1,message:"not support peer"})},t.prototype.handleCalNetQualityResult=function(e,t,r,o,n,i){if(this.logger.info("zc.hcqr.0 "+o.netQuality+" probe "+r+" "+n),0===t){var s=this.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},b.ZegoRTCLogEvent.kZegoNetProbeResult.event),a=!1;r>Math.max(75,o.netQuality+20)&&o.probeState==f.ENUM_PROBE_STATE.tryProbe?(a=!0,this.retryStream(o,e,n),o.probeState=f.ENUM_PROBE_STATE.probed):(a=!1,o.probeState==f.ENUM_PROBE_STATE.tryProbe&&i&&o.netProbeToReDispatch(),this.logger.warn("zc.hcqr.0 "+o.netQuality+" probe "+r+" "+n));var c=b.ZegoRTCLogEvent.kZegoNetProbeResult;s.setAttributes({is_switch:c.is_switch(a),is_publish:c.is_publish(e),stream_id:c.stream_id(o.streamId),result:c.result(t),node:c.node(n),net_quality:c.net_quality(parseInt(o.netQuality+"")),probe_net_quality:c.probe_net_quality(parseInt(r+""))}),s.end()}},t.prototype.retryStream=function(e,t,r){if(t){var o=e,n=o.streamId,i=o.localStream,s=o.videoInfo,a=o.mediaStreamConfig,c=o.publishOption;0!=o.sessionId&&o.signal&&o.shouldSendCloseSession()&&(o.signal.sendCloseSession(this.stateCenter.getSeq(),o.sessionId,1),o.signal.removeSession(o.sessionId),o.closeSessionSignal=!0),o.resetPublish(),this.publisherList[n].isCenterNode?(o.gwNode=r,o.startPublish(n,i,s,a,c)):(o.isExternal=!1,this.connectPublishServer(n,r))}else{var u=e,l=(n=u.streamId,u.getRemoteStreamSuc),d=u.playOption;0!=u.sessionId&&u.signal&&u.shouldSendCloseSession()&&(u.signal.sendCloseSession(this.stateCenter.getSeq(),u.sessionId,1),u.signal.removeSession(u.sessionId),u.closeSessionSignal=!0),u.resetPlay(),this.playerList[n].isCenterNode?(u.gwNode=r,u.startPlay(n,l,d)):(u.isExternal=!1,this.connectPlayServer(n,l,r))}},t.prototype.getRoomByStreamID=function(e){return this.publisherList[e]?this.publisherList[e].room:this.playerList[e]?this.playerList[e].room:void 0},t.prototype.setVideoTrackContentHint=function(e,t){if("string"==typeof t){var r=t.toLowerCase();if(["default","motion","detail","text"].includes(r)){var o=e.getVideoTracks()[0];o?"contentHint"in o?(this.logger.info("zc.svtch "+r),o.contentHint="default"==r?"":r):this.logger.warn("zc.svtch mediaStreamTrack contentHint attribute not supported"):this.logger.warn("zc.svtch video track no found")}else this.logger.warn("zc.svtch videoOptimizationMode wrong")}else this.logger.warn("zc.svtch videoOptimizationMode type wrong")},t.prototype.getPlayRoom=function(e){return this.stateCenter.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},t.prototype.getQualityHead=function(e,t){var r=new Uint8Array(12);r[0]=0,r[1]=12,r[2]=e.length>>8,r[3]=e.length-(r[2]<<8),r[4]=t.length>>24,r[5]=t.length-(r[4]<<24)>>16,r[6]=t.length-(r[4]<<24)-(r[5]<<16)>>8,r[7]=t.length-(r[4]<<24)-(r[5]<<16)-(r[6]<<8);var o=Math.ceil((new Date).getTime()/1e3);return r[8]=o>>24,r[9]=o-(r[8]<<24)>>16,r[10]=o-(r[8]<<24)-(r[9]<<16)>>8,r[11]=o-(r[8]<<24)-(r[9]<<16)-(r[10]<<8),r},t.prototype.streamQualityUpload=function(){var e,t=this;if(Object.keys(this.publisherList).length>0||Object.keys(this.playerList).length>0){var r={version:10,timestamp:this.qualityHeadTimestamp,event:0,app_id:this.stateCenter.appid,user_id:this.stateCenter.idName,biz_type:1,time_offset:T.default.MAX_VALUE,os_type:w.ClientUtil.getOsType(),sdk_version:f.PROTO_VERSION},o={publish_quality_infos:this.publishQualityInfos,play_quality_infos:this.playQualityInfos,client_type:2},n=S.logreport.SpeedLogHead.create(r),i=S.logreport.QualityEvent.create(o),c=S.logreport.SpeedLogHead.encode(n).finish(),u=S.logreport.QualityEvent.encode(i).finish(),l=this.getQualityHead(c,u),d=new Uint8Array(12+c.length+u.length);d.set(l),d.set(c,12),d.set(u,12+c.length);var h=null===(e=this.logger.url)||void 0===e?void 0:e.split("/")[2];if(!h)return;var p=function(){return new Promise((function(e){if(t.qualityWebsocket&&2!=t.qualityWebsocket.readyState&&3!=t.qualityWebsocket.readyState)1==t.qualityWebsocket.readyState&&e(t.qualityWebsocket);else{var r=t.stateCenter.appid,o=t.stateCenter.idName,n=t.stateCenter.roomList[0].token,i="wss://".concat(h,"/ws/report/stream?appid=").concat(r,"&product=rtc&token=").concat(encodeURIComponent(n),"&id_name=").concat(o);t.qualityWebsocket=new WebSocket(i),t.qualityWebsocket.onopen=function(){t.qualityWebsocket&&e(t.qualityWebsocket)},t.qualityWebsocket.onclose=function(){t.logger.info(E.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" speed log socket close")}}}))};p().then((function(e){var r=Date.now()%1e4,o=!1;e.onmessage=function(n){(n.data+"").includes("success")&&(t.logger.info(E.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" quality (".concat(r,") upload success")),o=!0),e.onmessage=null},setTimeout((function(){return s(t,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return o?[3,2]:[4,p()];case 1:e.sent().send(d),this.logger.info(E.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" retry upload quality (".concat(r,"), length: ")+d.length+"."),e.label=2;case 2:return[2]}}))}))}),3e3),e.send(d),t.logger.info(E.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" upload quality (".concat(r,"), length: ")+d.length+".")}))}},t.prototype.updateQuality=function(e,t){var r=this,o=(new Date).getTime(),n=JSON.stringify(this.publishQualityInfos).length+JSON.stringify(this.playQualityInfos).length;0!==this.qualityUploadTimestamp&&o-this.qualityUploadTimestamp>6e4||n>8e3?(this.publishQualityInfos.forEach((function(e){return e.timestamp_offset_end=Math.round(o/1e3)-r.qualityHeadTimestamp})),this.playQualityInfos.forEach((function(e){return e.timestamp_offset_end=Math.round(o/1e3)-r.qualityHeadTimestamp})),this.streamQualityUpload(),this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=Math.round((new Date).getTime()/1e3),this.qualityUploadTimestamp=o):0==this.qualityHeadTimestamp&&(this.qualityHeadTimestamp=Math.round((new Date).getTime()/1e3),this.qualityUploadTimestamp=o),0==e?this.handlePublishQualityData(t):this.handlePlayQualityData(t)},t.prototype.handlePublishQualityData=function(e){var t=this.publishQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!t){var r=this.getRoomByStreamID(e.stream_id);t={timestamp_offset_begin:Math.abs(Number(e.timeStamp-this.qualityHeadTimestamp)),timestamp_offset_end:0,stream_id:e.stream_id,session_id:r?Number(r.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:r?r.roomID:"",evnvironment:1,room_session_id:r?Number(r.roomSessionID):0,resource_type:2},this.publishQualityInfos.push(t)}t.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_capture_fps:Math.round(10*e.videoFPS)||0,video_network_fps:Math.round(10*e.videoTransferFPS)||0,uplink_plr:e.audioPacketsLostRate,rtt:Math.round(1e3*e.currentRoundTripTime)||0,audio_network_fps:Math.round(10*e.audioFPS),captured_sound_level:Math.round(e.audioLevel),sample_time_window:Math.round(e.sampleTimeWindow/10)})},t.prototype.handlePlayQualityData=function(e){var t,r=this.playQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!r){var o=this.getRoomByStreamID(e.stream_id),n=null===(t=this.playerList[e.stream_id])||void 0===t?void 0:t.player;r={timestamp_offset_begin:Math.abs(Number(e.timeStamp-this.qualityHeadTimestamp)),timestamp_offset_end:0,stream_id:e.stream_id,session_id:o?Number(o.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:o?o.roomID:"",room_session_id:o?Number(o.roomSessionID):0,resource_type:0===(null==n?void 0:n.resourceMode)?2:3},this.playQualityInfos.push(r)}r.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_network_fps:Math.round(10*e.videoFPS)||0,downlink_plr:Math.round(e.audioPacketsLostRate)||0,audio_network_fps:Math.round(10*e.audioFPS)||0,audio_break_duration:Math.round(e.audio_break_duration/10),video_break_duration:Math.round(e.video_break_duration/10),rtt:Math.round(1e3*e.currentRoundTripTime)||0,rendered_sound_level:Math.round(e.audioLevel),audio_break_cancel_duration:Math.round(e.audio_break_cancel_duration/10),video_break_cancel_duration:Math.round(e.video_break_cancel_duration/10),audio_decode_time:Math.round(e.audio_decode_time/10),video_decode_time:Math.round(e.video_decode_time/10),real_sampling_interval:Math.round(e.real_sampling_interval/10),video_frames_decoded:Math.round(e.videoFramesDecoded)||0,video_frames_dropped:Math.round(e.videoFramesDropped)||0,sample_time_window:Math.round(e.sampleTimeWindow/10),peer_to_peer_plr:e.peerToPeerPacketLostRate,peer_to_peer_delay:e.peerToPeerDelay})},t.prototype.setIsPeer=function(e){this.isPeer=e,Object.values(this.publisherList).forEach((function(t){t.publisher.isPeer=e})),Object.values(this.playerList).forEach((function(t){t.player.isPeer=e}))},t.prototype.getCDNUrl=function(e,t){var r,o,n=this.stateCenter.appConfig.media_config.play_config.resource_info;if(n.length)for(var i=n.find((function(e){return e.resource_type==t})),s=0;s<i.service_info.length;s++){var a=i.service_info[s],c=a.protocol,u=a.url_template.replace("{STREAM_NAME}",e);switch(c){case l.ProtocolType.FLV:r=u;break;case l.ProtocolType.HLS:o=u}}return{flv:r,hls:o}},t.prototype.playCDN=function(e,t,r,o){var n,i=this;if(!t.CDNVideo)return this.logger.error("zsc.pc.1 cdn video no found"),o&&o(),!1;var s=this.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:e},b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,!0),a="",c=null===(n=this.getPlayRoom(e))||void 0===n?void 0:n.streamList.find((function(t){return t.stream_id==e})),u=this.playerList[e],d=u.cdnPlayer,h=u.playOption.resourceMode;u.player.streamId=e,u.player.playOption=u.playOption,u.player.tryidx++,s.setAttributes({tryidx:b.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(u.player.tryidx),biz_product:b.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(h==l.ResourceMode.DG?1:0)});var p=c||{},_=p.urls_flv,g=p.urls_flv_plus,m=p.urls_m3u8,v=p.urls_m3u8_plus;if(!c){if(!this.stateCenter.appConfig||!h)return this.logger.error("zsc.pss.1 stream info no found"),o&&o(),!1;var y=this.getCDNUrl(e,h),S=y.flv,E=y.hls;h==l.ResourceMode.DG?(g=S?[S]:[],v=E?[E]:[]):(_=S?[S]:[],m=E?[E]:[])}if(!u||!d)return o&&o(),!1;h===l.ResourceMode.DG&&(u.player.useResourceTypes.push("CDN"),u.player.useResourceTypes=Array.from(new Set(u.player.useResourceTypes)));var T=h==l.ResourceMode.DG?g:_,w=h==l.ResourceMode.DG?v:m;if(d.isSupportFLV()&&(null==T?void 0:T.length)>0)a=T[0],s.setAttributes({protocol:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("flv")});else if(d.isSupportHLS()&&(null==w?void 0:w.length)>0)a=w[0],s.setAttributes({protocol:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("hls")});else if(!u.cdnUrl)return this.logger.error("zsc.pc.1 can not find cdn plus urls"),o&&o(),!1;if((a=a.replace("http://","https://"))!==u.cdnUrl&&u.player.tryidx>1){var C=this.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},b.ZegoRTCLogEvent.kZegoTaskSrcChange.event);C.setAttributes({src:b.ZegoRTCLogEvent.kZegoTaskSrcChange.src(a),last_src:b.ZegoRTCLogEvent.kZegoTaskSrcChange.last_src(u.cdnUrl)}),C.end()}return u.cdnUrl=a||u.cdnUrl,s.setAttributes({url:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.url(u.cdnUrl)}),u.playMode==l.PlayMode.CDN&&(d.play(u.cdnUrl,t.CDNVideo),t.CDNVideo.srcObject=null,this.onPlayStateUpdate(f.ENUM_PLAY_STATE_UPDATE.start,e,{code:0,message:"success"}),d.onQualityUpdate=function(r,o){o<=i.cdnBadQualityScore?i.handleQualityBad(e,t.resourceMode,l.PlayMode.CDN):(u.qualityBadCount=0,i.cdnProtocolBadTimestamp=0,i.lastHandleCDNBadTimestamp=0)},d.onComplete=function(){if(u.playMode==l.PlayMode.CDN&&u.player.state==f.ENUM_PLAY_STATE.playing)d.retry();else var e=u.player,t=e.initPoster,r=e.initVideoStyle,o=u.playOption.CDNVideo,n=setTimeout((function(){clearTimeout(n),o&&o.setAttribute("style",r),o&&o.setAttribute("poster",t)}),1e3)},d.onError=function(e){i.stateCenter.networkState==l.ENUM_NETWORK_STATE.offline&&(d.canRetry=!1),s.setAttributes({stop_reason:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.stop_reason(e)})},d.onCanplay=function(){if(u.player.state!=f.ENUM_PLAY_STATE.playing&&(u.player.state=f.ENUM_PLAY_STATE.playing,0==u.player.firstFrameTime)){u.player.firstFrameTime=Date.now()-u.player.beginTime;var r=i.stateCenter.reporter.createSpan(l.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},b.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.event);r.setAttributes({fft_consumed:b.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.fft_consumed(u.player.firstFrameTime),biz_product:b.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.biz_product(t.resourceMode==l.ResourceMode.DG?1:0)}),r.end()}},r&&r(),!0)},t.prototype.handleQualityBad=function(e,t,r){var o=this;if(this.logger.info("zsc.hqb.0 call ".concat(e," ").concat(t," ").concat(r)),t!==l.ResourceMode.DG)return!1;this.fetchL3CDNCloudSetting();var n=(new Date).getTime(),i=0;for(var s in this.playerList)this.playerList[s].isQualityBad&&i++;r==l.PlayMode.CDN?(this.cdnProtocolBadTime=this.cdnProtocolBadTime+(0==this.lastHandleCDNBadTimestamp?this.qualityInterval:n-this.lastHandleCDNBadTimestamp),(i>=this.protocolBadQualityCount||this.cdnProtocolBadTime>=this.protocolBadQualityTime)&&(this.cdnProtocolBadTime=0,this.cdnProtocolBadTimestamp=(new Date).getTime())):r==l.PlayMode.L3&&(this.l3ProtocolBadTime=this.l3ProtocolBadTime+(0==this.lastHandleL3BadTimestamp?this.qualityInterval:n-this.lastHandleL3BadTimestamp),(i>=this.protocolBadQualityCount||this.l3ProtocolBadTime>=this.protocolBadQualityTime)&&(this.l3ProtocolBadTime=0,this.l3ProtocolBadTimestamp=(new Date).getTime()));var a=!1,c=this.playerList[e],u=c.qualityBadCount?c.qualityBadCount*this.qualityInterval:0;if((r==l.PlayMode.L3&&u>this.l3BadQualityTime||r==l.PlayMode.CDN&&this.isL3Fallback&&u>this.fallbackInhibitionTime||r==l.PlayMode.CDN&&!this.isL3Fallback&&u>this.defaultBadQualityTime)&&(a=!0),a){for(var d in c.isQualityBad=!0,i=0,this.playerList)this.playerList[d].isQualityBad&&i++;if(r==l.PlayMode.CDN&&(0==this.l3DetectedTimestamp||this.l3DetectedTimestamp+this.probeExpiredTime<n&&this.l3DetectedTimestamp+this.minProbeInterval<n)&&(this.l3DetectedTimestamp=(new Date).getTime(),this.startNetProbe(!1,void 0,void 0,!0)),i/Object.keys(this.playerList).filter((function(e){return!e.includes("zegoprobe")})).length>this.multiPlaySwitchRate){this.logger.error("zsc.hqb.0 low quality "+(0==r?"CDN":"L3"));var h=Object.keys(this.playerList).filter((function(e){return!e.includes("zegoprobe")}));return h.forEach((function(e,t){var n=o.playerList[e];r==l.PlayMode.L3?(o.stopPlayingStream(e),o.playerList[e]=n,n.isQualityBad=!1,n.playMode=l.PlayMode.CDN,n.qualityBadCount=0,o.playCDN(e,n.playOption,o.playSuccessCallBackList[e],o.playErrorCallBackList[e])):o.l3DetectResult>o.switchDetectResultScore&&(n.qualityBadCount=0,o.l3DetectedTimestamp=0,t==h.length-1&&(o.l3DetectResult=0),o.cdnSwitchL3(n))})),r==l.PlayMode.L3&&(this.isL3Fallback=!0),!0}}return"number"==typeof c.qualityBadCount?c.qualityBadCount++:c.qualityBadCount=1,!1},t.prototype.cdnSwitchL3=function(e){var t,r=this,o=e.streamID,n=this.stateCenter.useNetAgent;if(e.playMode=l.PlayMode.L3,this.stopPlayingStream(o),this.playerList[o]=e,e.isQualityBad=!1,(null===(t=e.playOption)||void 0===t?void 0:t.resourceMode)==l.ResourceMode.DG&&(e.player.useResourceTypes.push("L3"),e.player.useResourceTypes=Array.from(new Set(e.player.useResourceTypes))),n)this.stateCenter.appConfig?(e.serverUrls=["unified_l3"],this.startPlayingStream(o,n,(function(t){var n;r.logger.info("zsc.cqi.1 switch l3 success");var i=e.player,s=i.initPoster,a=i.initVideoStyle,c=e.playOption.CDNVideo;if("safari"===r.stateCenter.browser&&c&&e.player._CDNPlayerClone){var u=c.parentElement;if(u){var l=document.createElement("style"),d=c.cloneNode(!0),h=Date.now().toString(16);l.innerText=".zego_cdn_video_".concat(h," .zego_clone_video_").concat(h,"{width:").concat(c.offsetWidth,"px;height:").concat(c.offsetHeight,"px;}")+".zego_cdn_video_".concat(h," .hide_").concat(h,"{display:none!important;width:0;height:0}"),document.head.append(l),d.classList.add("zego_clone_video_".concat(h)),d.id=e.streamID+"_clone",d.src="",d.srcObject=t,d.classList.add("hide_".concat(h)),c.before(d),u.classList.add("zego_cdn_video_".concat(h));var p=setTimeout((function(){clearTimeout(p),c.classList.add("hide_".concat(h)),d.classList.remove("hide_".concat(h))}),2e3),f=setTimeout((function(){var t;clearTimeout(f),e.playOption.CDNVideo=d,null===(t=e.cdnPlayer)||void 0===t||t.stop(),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:o}),u.classList.remove("zego_cdn_video_".concat(h)),c.classList.remove("zego_cdn_video_".concat(h)),d.classList.remove("zego_clone_video_".concat(h)),d.id=c.id,l.remove(),c.remove()}),4e3)}}else{null===(n=e.cdnPlayer)||void 0===n||n.stop(),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:o});var _=setTimeout((function(){clearTimeout(_),c&&c.setAttribute("style",a),c&&c.setAttribute("poster",s)}),1e3);t&&(null==c||(c.srcObject=t))}}))):this.waitPlayList.push(o);else{var i=this.playerList[o].retryDispatchHandler;i.stopMaxTime(),i.invalid(),i.initStream(o,e.playOption,!1),i.startMaxTime(),i.active(0)}},t.prototype.fetchL3CDNCloudSetting=function(){this.switchScore=this.stateCenter.settingConfig.getSetting("switch_score")||60,this.defaultBadQualityTime=this.stateCenter.settingConfig.getSetting("default_bad_quality_time")||3e4,this.l3BadQualityTime=this.stateCenter.settingConfig.getSetting("l3_bad_quality_time")||1e4,this.switchDetectResultScore=this.stateCenter.settingConfig.getSetting("switch_detect_result_score")||60,this.cdnBadQualityScore=this.stateCenter.settingConfig.getSetting("cdn_bad_quality_score")||60,this.l3BadQualityScore=this.stateCenter.settingConfig.getSetting("l3_bad_quality_score")||60,this.multiPlaySwitchRate=this.stateCenter.settingConfig.getSetting("multi_play_switch_rate")||.8,this.protocolBadQualityCount=this.stateCenter.settingConfig.getSetting("protocol_bad_quality_count")||3,this.protocolBadQualityTime=this.stateCenter.settingConfig.getSetting("protocol_bad_quality_time")||12e3,this.protocolQualityCacheExpiredTime=this.stateCenter.settingConfig.getSetting("protocol_quality_cache_expired_time\t")||18e4,this.fallbackInhibitionTime=this.stateCenter.settingConfig.getSetting("fallback_inhibition_time")||18e4,this.probeExpiredTime=this.stateCenter.settingConfig.getSetting("probe_expired_time")||3e4,this.minProbeInterval=this.stateCenter.settingConfig.getSetting("min_probe_interval")||15e3},t.prototype.setStreamGwNode=function(e,t){this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" call "+e.streamId),this.checkCachedNodesUse(e,t),e.gwNodesTTL&&e.gwNodesTTL<(new Date).getTime()&&(this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" call "+e.streamId+" ttl timeout, reset gw"),e.gwNode="",e.gwNodeList=[],e.gwNodesTTL=0),this.gwNode&&(e.gwNode=this.gwNode);var r=this.stateCenter.settingConfig.getSetting("gw_nodes");r&&r instanceof Array&&r.length>0&&(this.logger.info(E.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(r)),e.gwNodeList=r,e.gwNode=e.gwNodeList[0]||e.gwNode),this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" end "+e.streamId+" "+e.gwNode)},t.prototype.getNodeIndex=function(e,t){var r="",o=t?"publish":"play";switch(e.cachedGwNodesMode){case u.NotReUse:break;case u.TheSameReUse:r=o+"_"+e.streamId;break;case u.DiffReUse:r=o;break;case u.AllReUse:r="stream"}return r},t.prototype.checkCachedNodesUse=function(e,t){if(this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+e.streamId+" "+e.cachedGwNodesMode),e.isExternal)if(t&&e.isCustomCdn())this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+e.streamId+" custom cdn");else if(this.stateCenter.useNetAgent&&this.stateCenter.isMultiOuter)this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+e.streamId+" multi outer");else{var r=this.getNodeIndex(e,t);if(this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+e.streamId+" "+r),r){var o=this.cachedGwNodesList[r];o&&o.gwNodesTTL>(new Date).getTime()&&(null==o?void 0:o.gwNodes.length)>0&&(this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+e.streamId+" use cache gwnodes"),e.gwNodeList=o.gwNodes,e.gwNodesTTL=o.gwNodesTTL,e.gwNode=e.gwNodeList[0])}this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" end "+e.streamId+" "+e.gwNode)}else this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+e.streamId+" retry internal")},t.prototype.updateCachedGwNodesList=function(e,t,r,o){if(this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST+" call "+e.streamId),0===o)this.setCachedGwNodesMode(u.NotReUse);else if(o>0){var n=this.getNodeIndex(e,t);this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST+" "+e.streamId+" nodeIndex "+n),n&&(this.cachedGwNodesList[n]={gwNodes:r,gwNodesTTL:(new Date).getTime()+1e3*o})}},t.prototype.clearCachedGwNodesList=function(e,t){var r=this.getNodeIndex(e,t);this.logger.info(E.ZEGO_WEBRTC_ACTION.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST+" "+e.streamId+" nodeIndex "+r),r&&delete this.cachedGwNodesList[r]},t.prototype.setCachedGwNodesMode=function(e){this.cachedGwNodesMode=e,Object.values(this.publisherList).forEach((function(t){t.publisher.cachedGwNodesMode=e})),Object.values(this.playerList).forEach((function(t){t.player.cachedGwNodesMode=e}))},t}(p.ZegoStreamCenter);t.ZegoStreamCenterWeb=O},2990:function(e,t,r){"use strict";var o,n=r(2100),i=n.Writer,s=n.util,a=n.roots.default||(n.roots.default={});a.logreport=((o={}).SpeedLogHead=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t,r;return e.prototype.version=0,e.prototype.signature=s.newBuffer([]),e.prototype.timestamp=0,e.prototype.event=0,e.prototype.app_id=0,e.prototype.user_id="",e.prototype.biz_type=0,e.prototype.device_id="",e.prototype.lite_sign=s.newBuffer([]),e.prototype.token=s.newBuffer([]),e.prototype.os_type="",e.prototype.sdk_version="",e.prototype.time_offset=s.Long?s.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(18).bytes(e.signature),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint32(e.timestamp),null!=e.event&&Object.hasOwnProperty.call(e,"event")&&t.uint32(32).uint32(e.event),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(40).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(50).string(e.user_id),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(56).uint32(e.biz_type),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(66).string(e.device_id),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).bytes(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).bytes(e.token),null!=e.os_type&&Object.hasOwnProperty.call(e,"os_type")&&t.uint32(90).string(e.os_type),null!=e.sdk_version&&Object.hasOwnProperty.call(e,"sdk_version")&&t.uint32(98).string(e.sdk_version),null!=e.time_offset&&Object.hasOwnProperty.call(e,"time_offset")&&t.uint32(104).int64(e.time_offset),t},e.ProtoVersion=(t={},(r=Object.create(t))[t[0]="PROTO_VERSION"]=0,r[t[1]="PROTO_VERSION1"]=1,r[t[2]="PROTO_VERSION2"]=2,r[t[3]="PROTO_VERSION3"]=3,r[t[4]="PROTO_VERSION4"]=4,r[t[5]="PROTO_VERSION5"]=5,r[t[6]="PROTO_VERSION6"]=6,r[t[7]="PROTO_VERSION7"]=7,r[t[8]="PROTO_VERSION8"]=8,r[t[9]="PROTO_VERSION9"]=9,r[t[10]="PROTO_VERSION10"]=10,r),e.Event=function(){var e={},t=Object.create(e);return t[e[0]="QUALITY_EVENT"]=0,t[e[100]="NO_BILLING_EVENT"]=100,t[e[300]="DETECT_QUALITY_EVENT"]=300,t}(),e.BizType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="LIVE"]=1,t[e[2]="RTV"]=2,t}(),e}(),o.SpeedLogRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},e}(),o.QualityEvent=function(){function e(e){if(this.publish_quality_infos=[],this.play_quality_infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t,r;return e.prototype.hardware_infos=null,e.prototype.publish_quality_infos=s.emptyArray,e.prototype.play_quality_infos=s.emptyArray,e.prototype.network_type=0,e.prototype.charge_infos=null,e.prototype.client_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.hardware_infos&&Object.hasOwnProperty.call(e,"hardware_infos")&&a.logreport.HardwareInfos.encode(e.hardware_infos,t.uint32(10).fork()).ldelim(),null!=e.publish_quality_infos&&e.publish_quality_infos.length)for(var r=0;r<e.publish_quality_infos.length;++r)a.logreport.PublishQualityInfos.encode(e.publish_quality_infos[r],t.uint32(18).fork()).ldelim();if(null!=e.play_quality_infos&&e.play_quality_infos.length)for(r=0;r<e.play_quality_infos.length;++r)a.logreport.PlayQualityInfos.encode(e.play_quality_infos[r],t.uint32(26).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(32).uint32(e.network_type),null!=e.charge_infos&&Object.hasOwnProperty.call(e,"charge_infos")&&a.logreport.ChargeInfos.encode(e.charge_infos,t.uint32(42).fork()).ldelim(),null!=e.client_type&&Object.hasOwnProperty.call(e,"client_type")&&t.uint32(800).uint32(e.client_type),t},e.ResourceType=(t={},(r=Object.create(t))[t[0]="UNKNOWN"]=0,r[t[1]="CDN"]=1,r[t[2]="RTC"]=2,r[t[3]="L3"]=3,r),e}(),o.HardwareInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.infos=s.emptyArray,e.prototype.sys_mem_total=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.HardwareInfo.encode(e.infos[r],t.uint32(26).fork()).ldelim();return null!=e.sys_mem_total&&Object.hasOwnProperty.call(e,"sys_mem_total")&&t.uint32(32).uint32(e.sys_mem_total),t},e}(),o.PublishQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=s.emptyArray,e.prototype.room_id="",e.prototype.evnvironment=0,e.prototype.ap="",e.prototype.session="",e.prototype.room_session_id=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.prototype.setting_video_bitrate=0,e.prototype.setting_audio_bitrate=0,e.prototype.setting_video_fps=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.PublishQualityInfo.encode(e.infos[r],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.evnvironment&&Object.hasOwnProperty.call(e,"evnvironment")&&t.uint32(104).uint32(e.evnvironment),null!=e.ap&&Object.hasOwnProperty.call(e,"ap")&&t.uint32(114).string(e.ap),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(122).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(128).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(136).uint32(e.protocol_type),null!=e.setting_video_bitrate&&Object.hasOwnProperty.call(e,"setting_video_bitrate")&&t.uint32(144).uint32(e.setting_video_bitrate),null!=e.setting_audio_bitrate&&Object.hasOwnProperty.call(e,"setting_audio_bitrate")&&t.uint32(152).uint32(e.setting_audio_bitrate),null!=e.setting_video_fps&&Object.hasOwnProperty.call(e,"setting_video_fps")&&t.uint32(160).uint32(e.setting_video_fps),t},e}(),o.PlayQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=s.emptyArray,e.prototype.room_id="",e.prototype.session="",e.prototype.room_session_id=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.prototype.product=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.PlayQualityInfo.encode(e.infos[r],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(106).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(112).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(120).uint32(e.protocol_type),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(128).uint32(e.product),t},e}(),o.ChargeInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.timestamp_diff_flag=0,e.prototype.timestamp_diff=0,e.prototype.room_id="",e.prototype.infos=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.timestamp_diff_flag&&Object.hasOwnProperty.call(e,"timestamp_diff_flag")&&t.uint32(24).uint32(e.timestamp_diff_flag),null!=e.timestamp_diff&&Object.hasOwnProperty.call(e,"timestamp_diff")&&t.uint32(32).uint32(e.timestamp_diff),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(42).string(e.room_id),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.ChargeInfo.encode(e.infos[r],t.uint32(802).fork()).ldelim();return t},e}(),o.HardwareInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sys_cpu_used=0,e.prototype.app_cpu_used=0,e.prototype.sys_mem_used=0,e.prototype.app_mem_used=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.sys_cpu_used&&Object.hasOwnProperty.call(e,"sys_cpu_used")&&t.uint32(8).uint32(e.sys_cpu_used),null!=e.app_cpu_used&&Object.hasOwnProperty.call(e,"app_cpu_used")&&t.uint32(16).uint32(e.app_cpu_used),null!=e.sys_mem_used&&Object.hasOwnProperty.call(e,"sys_mem_used")&&t.uint32(24).uint32(e.sys_mem_used),null!=e.app_mem_used&&Object.hasOwnProperty.call(e,"app_mem_used")&&t.uint32(32).uint32(e.app_mem_used),t},e}(),o.PublishQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_capture_fps=0,e.prototype.video_network_fps=0,e.prototype.uplink_plr=0,e.prototype.rtt=0,e.prototype.audio_network_fps=0,e.prototype.captured_sound_level=0,e.prototype.quality=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_capture_fps&&Object.hasOwnProperty.call(e,"video_capture_fps")&&t.uint32(24).uint32(e.video_capture_fps),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(32).uint32(e.video_network_fps),null!=e.uplink_plr&&Object.hasOwnProperty.call(e,"uplink_plr")&&t.uint32(40).uint32(e.uplink_plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(48).uint32(e.rtt),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(56).uint32(e.audio_network_fps),null!=e.captured_sound_level&&Object.hasOwnProperty.call(e,"captured_sound_level")&&t.uint32(64).uint32(e.captured_sound_level),null!=e.quality&&Object.hasOwnProperty.call(e,"quality")&&t.uint32(72).uint32(e.quality),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e}(),o.PlayQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_network_fps=0,e.prototype.audio_break_count=0,e.prototype.video_break_count=0,e.prototype.downlink_plr=0,e.prototype.peer_to_peer_plr=0,e.prototype.peer_to_peer_delay=0,e.prototype.audio_network_fps=0,e.prototype.audio_break_duration=0,e.prototype.video_break_duration=0,e.prototype.audio_break_rate=0,e.prototype.video_break_rate=0,e.prototype.audio_break_cancel=0,e.prototype.video_break_cancel=0,e.prototype.rtt=0,e.prototype.rendered_sound_level=0,e.prototype.audio_break_cancel_duration=0,e.prototype.video_break_cancel_duration=0,e.prototype.audio_decode_time=0,e.prototype.video_decode_time=0,e.prototype.real_sampling_interval=0,e.prototype.mos=0,e.prototype.audio_decode_fps=0,e.prototype.video_decode_fps=0,e.prototype.video_frames_decoded=0,e.prototype.video_frames_dropped=0,e.prototype.quality=0,e.prototype.evaluation_quality=0,e.prototype.break_stat_duration=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(24).uint32(e.video_network_fps),null!=e.audio_break_count&&Object.hasOwnProperty.call(e,"audio_break_count")&&t.uint32(32).uint32(e.audio_break_count),null!=e.video_break_count&&Object.hasOwnProperty.call(e,"video_break_count")&&t.uint32(40).uint32(e.video_break_count),null!=e.downlink_plr&&Object.hasOwnProperty.call(e,"downlink_plr")&&t.uint32(48).uint32(e.downlink_plr),null!=e.peer_to_peer_plr&&Object.hasOwnProperty.call(e,"peer_to_peer_plr")&&t.uint32(56).uint32(e.peer_to_peer_plr),null!=e.peer_to_peer_delay&&Object.hasOwnProperty.call(e,"peer_to_peer_delay")&&t.uint32(64).uint32(e.peer_to_peer_delay),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(72).uint32(e.audio_network_fps),null!=e.audio_break_duration&&Object.hasOwnProperty.call(e,"audio_break_duration")&&t.uint32(80).uint32(e.audio_break_duration),null!=e.video_break_duration&&Object.hasOwnProperty.call(e,"video_break_duration")&&t.uint32(88).uint32(e.video_break_duration),null!=e.audio_break_rate&&Object.hasOwnProperty.call(e,"audio_break_rate")&&t.uint32(96).uint32(e.audio_break_rate),null!=e.video_break_rate&&Object.hasOwnProperty.call(e,"video_break_rate")&&t.uint32(104).uint32(e.video_break_rate),null!=e.audio_break_cancel&&Object.hasOwnProperty.call(e,"audio_break_cancel")&&t.uint32(112).uint32(e.audio_break_cancel),null!=e.video_break_cancel&&Object.hasOwnProperty.call(e,"video_break_cancel")&&t.uint32(120).uint32(e.video_break_cancel),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(128).uint32(e.rtt),null!=e.rendered_sound_level&&Object.hasOwnProperty.call(e,"rendered_sound_level")&&t.uint32(136).uint32(e.rendered_sound_level),null!=e.audio_break_cancel_duration&&Object.hasOwnProperty.call(e,"audio_break_cancel_duration")&&t.uint32(144).uint32(e.audio_break_cancel_duration),null!=e.video_break_cancel_duration&&Object.hasOwnProperty.call(e,"video_break_cancel_duration")&&t.uint32(152).uint32(e.video_break_cancel_duration),null!=e.audio_decode_time&&Object.hasOwnProperty.call(e,"audio_decode_time")&&t.uint32(160).uint32(e.audio_decode_time),null!=e.video_decode_time&&Object.hasOwnProperty.call(e,"video_decode_time")&&t.uint32(168).uint32(e.video_decode_time),null!=e.real_sampling_interval&&Object.hasOwnProperty.call(e,"real_sampling_interval")&&t.uint32(176).uint32(e.real_sampling_interval),null!=e.mos&&Object.hasOwnProperty.call(e,"mos")&&t.uint32(184).int32(e.mos),null!=e.audio_decode_fps&&Object.hasOwnProperty.call(e,"audio_decode_fps")&&t.uint32(192).uint32(e.audio_decode_fps),null!=e.video_decode_fps&&Object.hasOwnProperty.call(e,"video_decode_fps")&&t.uint32(200).uint32(e.video_decode_fps),null!=e.video_frames_decoded&&Object.hasOwnProperty.call(e,"video_frames_decoded")&&t.uint32(208).uint32(e.video_frames_decoded),null!=e.video_frames_dropped&&Object.hasOwnProperty.call(e,"video_frames_dropped")&&t.uint32(216).uint32(e.video_frames_dropped),null!=e.quality&&Object.hasOwnProperty.call(e,"quality")&&t.uint32(224).int32(e.quality),null!=e.evaluation_quality&&Object.hasOwnProperty.call(e,"evaluation_quality")&&t.uint32(232).int32(e.evaluation_quality),null!=e.break_stat_duration&&Object.hasOwnProperty.call(e,"break_stat_duration")&&t.uint32(240).uint32(e.break_stat_duration),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e}(),o.ChargeInfo=function(){function e(e){if(this.play_stream_resolution_infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.is_publishing=0,e.prototype.play_stream_resolution_infos=s.emptyArray,e.prototype.play_max_audio_bitrate=0,e.prototype.no_playing=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.is_publishing&&Object.hasOwnProperty.call(e,"is_publishing")&&t.uint32(8).uint32(e.is_publishing),null!=e.play_stream_resolution_infos&&e.play_stream_resolution_infos.length)for(var r=0;r<e.play_stream_resolution_infos.length;++r)a.logreport.ResolutionInfo.encode(e.play_stream_resolution_infos[r],t.uint32(18).fork()).ldelim();return null!=e.play_max_audio_bitrate&&Object.hasOwnProperty.call(e,"play_max_audio_bitrate")&&t.uint32(24).uint32(e.play_max_audio_bitrate),null!=e.no_playing&&Object.hasOwnProperty.call(e,"no_playing")&&t.uint32(32).uint32(e.no_playing),t},e}(),o.ResolutionInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(8).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(16).uint32(e.video_height),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).uint32(e.count),t},e}(),o.NoBillingEvent=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.platform_info="",e.prototype.room_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.platform_info&&Object.hasOwnProperty.call(e,"platform_info")&&t.uint32(10).string(e.platform_info),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).string(e.room_id),t},e}(),o.DynQualityEvent=function(){function e(e){if(this.dyn_quality_infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq_no="",e.prototype.num=0,e.prototype.dyn_quality_infos=s.emptyArray,e.prototype.device_id="",e.prototype.latitude=0,e.prototype.longitude=0,e.prototype.country="",e.prototype.region="",e.prototype.city="",e.prototype.isp="",e.prototype.ve_mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.seq_no&&Object.hasOwnProperty.call(e,"seq_no")&&t.uint32(10).string(e.seq_no),null!=e.num&&Object.hasOwnProperty.call(e,"num")&&t.uint32(16).uint32(e.num),null!=e.dyn_quality_infos&&e.dyn_quality_infos.length)for(var r=0;r<e.dyn_quality_infos.length;++r)a.logreport.DynQualityInfos.encode(e.dyn_quality_infos[r],t.uint32(26).fork()).ldelim();return null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(34).string(e.device_id),null!=e.latitude&&Object.hasOwnProperty.call(e,"latitude")&&t.uint32(40).uint32(e.latitude),null!=e.longitude&&Object.hasOwnProperty.call(e,"longitude")&&t.uint32(48).uint32(e.longitude),null!=e.country&&Object.hasOwnProperty.call(e,"country")&&t.uint32(58).string(e.country),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(66).string(e.region),null!=e.city&&Object.hasOwnProperty.call(e,"city")&&t.uint32(74).string(e.city),null!=e.isp&&Object.hasOwnProperty.call(e,"isp")&&t.uint32(82).string(e.isp),null!=e.ve_mode&&Object.hasOwnProperty.call(e,"ve_mode")&&t.uint32(88).uint32(e.ve_mode),t},e}(),o.DynQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.timestamp_offset_end=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.server_ip="",e.prototype.infos=s.emptyArray,e.prototype.network_type=0,e.prototype.stream_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint64(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint64(e.timestamp_offset_end),null!=e.server_ip&&Object.hasOwnProperty.call(e,"server_ip")&&t.uint32(26).string(e.server_ip),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.DynQualityInfo.encode(e.infos[r],t.uint32(34).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(40).uint32(e.network_type),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(50).string(e.stream_id),t},e}(),o.DynQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.time=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.plr=0,e.prototype.rtt=0,e.prototype.score=0,e.prototype.sample_time=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(8).uint64(e.time),null!=e.plr&&Object.hasOwnProperty.call(e,"plr")&&t.uint32(16).uint32(e.plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(24).uint32(e.rtt),null!=e.score&&Object.hasOwnProperty.call(e,"score")&&t.uint32(32).uint32(e.score),null!=e.sample_time&&Object.hasOwnProperty.call(e,"sample_time")&&t.uint32(40).uint32(e.sample_time),t},e}(),o),e.exports=a},6348:function(e,t,r){"use strict";var o,n=r(2100),i=n.Reader,s=n.Writer,a=n.util,c=n.roots.default||(n.roots.default={});c.webrtc_cmd=((o={}).MetadataPush=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.width=0,e.prototype.height=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(8).uint32(e.width),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(16).uint32(e.height),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.MetadataPush;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.width=e.uint32();break;case 2:o.height=e.uint32();break;default:e.skipType(7&n)}}return o},e}(),o.MetadataAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.MetadataAck;e.pos<r;){var n=e.uint32();n>>>3==1?o.result=e.sint32():e.skipType(7&n)}return o},e}(),o.VideoStreamSubscribeReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).uint32(e.type),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.VideoStreamSubscribeReq;e.pos<r;){var n=e.uint32();n>>>3==1?o.type=e.uint32():e.skipType(7&n)}return o},e}(),o.VideoStreamSubscribeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.VideoStreamSubscribeRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.result=e.sint32():e.skipType(7&n)}return o},e}(),o.VideoStreamFallbackTypeReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).uint32(e.type),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.VideoStreamFallbackTypeReq;e.pos<r;){var n=e.uint32();n>>>3==1?o.type=e.uint32():e.skipType(7&n)}return o},e}(),o.VideoStreamFallbackTypeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.VideoStreamFallbackTypeRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.result=e.sint32():e.skipType(7&n)}return o},e}(),o.VideoStreamChangePush=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.change_type=0,e.prototype.video_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.change_type&&Object.hasOwnProperty.call(e,"change_type")&&t.uint32(8).uint32(e.change_type),null!=e.video_type&&Object.hasOwnProperty.call(e,"video_type")&&t.uint32(16).uint32(e.video_type),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.VideoStreamChangePush;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.change_type=e.uint32();break;case 2:o.video_type=e.uint32();break;default:e.skipType(7&n)}}return o},e}(),o.VideoStreamChangeAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.VideoStreamChangeAck;e.pos<r;){var n=e.uint32();n>>>3==1?o.result=e.sint32():e.skipType(7&n)}return o},e}(),o.UserUnregisteredSEIFilterReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sei_filter="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.sei_filter&&Object.hasOwnProperty.call(e,"sei_filter")&&t.uint32(10).string(e.sei_filter),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.UserUnregisteredSEIFilterReq;e.pos<r;){var n=e.uint32();n>>>3==1?o.sei_filter=e.string():e.skipType(7&n)}return o},e}(),o.UserUnregisteredSEIFilterRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.UserUnregisteredSEIFilterRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.result=e.sint32():e.skipType(7&n)}return o},e}(),o.WebrtcCmdReqMsg=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.meta_data_push=null,e.prototype.video_stream_sub=null,e.prototype.video_fallback_type=null,e.prototype.video_change_push=null,e.prototype.usr_sei_filter=null,Object.defineProperty(e.prototype,"body",{get:a.oneOfGetter(t=["meta_data_push","video_stream_sub","video_fallback_type","video_change_push","usr_sei_filter"]),set:a.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.meta_data_push&&Object.hasOwnProperty.call(e,"meta_data_push")&&c.webrtc_cmd.MetadataPush.encode(e.meta_data_push,t.uint32(10).fork()).ldelim(),null!=e.video_stream_sub&&Object.hasOwnProperty.call(e,"video_stream_sub")&&c.webrtc_cmd.VideoStreamSubscribeReq.encode(e.video_stream_sub,t.uint32(18).fork()).ldelim(),null!=e.video_fallback_type&&Object.hasOwnProperty.call(e,"video_fallback_type")&&c.webrtc_cmd.VideoStreamFallbackTypeReq.encode(e.video_fallback_type,t.uint32(26).fork()).ldelim(),null!=e.video_change_push&&Object.hasOwnProperty.call(e,"video_change_push")&&c.webrtc_cmd.VideoStreamChangePush.encode(e.video_change_push,t.uint32(34).fork()).ldelim(),null!=e.usr_sei_filter&&Object.hasOwnProperty.call(e,"usr_sei_filter")&&c.webrtc_cmd.UserUnregisteredSEIFilterReq.encode(e.usr_sei_filter,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.WebrtcCmdReqMsg;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.meta_data_push=c.webrtc_cmd.MetadataPush.decode(e,e.uint32());break;case 2:o.video_stream_sub=c.webrtc_cmd.VideoStreamSubscribeReq.decode(e,e.uint32());break;case 3:o.video_fallback_type=c.webrtc_cmd.VideoStreamFallbackTypeReq.decode(e,e.uint32());break;case 4:o.video_change_push=c.webrtc_cmd.VideoStreamChangePush.decode(e,e.uint32());break;case 5:o.usr_sei_filter=c.webrtc_cmd.UserUnregisteredSEIFilterReq.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},e}(),o.WebrtcCmdRspMsg=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.meta_data_ack=null,e.prototype.video_stream_sub=null,e.prototype.video_fallback_type=null,e.prototype.video_change_ack=null,e.prototype.usr_sei_filter=null,Object.defineProperty(e.prototype,"body",{get:a.oneOfGetter(t=["meta_data_ack","video_stream_sub","video_fallback_type","video_change_ack","usr_sei_filter"]),set:a.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.meta_data_ack&&Object.hasOwnProperty.call(e,"meta_data_ack")&&c.webrtc_cmd.MetadataAck.encode(e.meta_data_ack,t.uint32(10).fork()).ldelim(),null!=e.video_stream_sub&&Object.hasOwnProperty.call(e,"video_stream_sub")&&c.webrtc_cmd.VideoStreamSubscribeRsp.encode(e.video_stream_sub,t.uint32(18).fork()).ldelim(),null!=e.video_fallback_type&&Object.hasOwnProperty.call(e,"video_fallback_type")&&c.webrtc_cmd.VideoStreamFallbackTypeRsp.encode(e.video_fallback_type,t.uint32(26).fork()).ldelim(),null!=e.video_change_ack&&Object.hasOwnProperty.call(e,"video_change_ack")&&c.webrtc_cmd.VideoStreamChangeAck.encode(e.video_change_ack,t.uint32(34).fork()).ldelim(),null!=e.usr_sei_filter&&Object.hasOwnProperty.call(e,"usr_sei_filter")&&c.webrtc_cmd.UserUnregisteredSEIFilterRsp.encode(e.usr_sei_filter,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.webrtc_cmd.WebrtcCmdRspMsg;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.meta_data_ack=c.webrtc_cmd.MetadataAck.decode(e,e.uint32());break;case 2:o.video_stream_sub=c.webrtc_cmd.VideoStreamSubscribeRsp.decode(e,e.uint32());break;case 3:o.video_fallback_type=c.webrtc_cmd.VideoStreamFallbackTypeRsp.decode(e,e.uint32());break;case 4:o.video_change_ack=c.webrtc_cmd.VideoStreamChangeAck.decode(e,e.uint32());break;case 5:o.usr_sei_filter=c.webrtc_cmd.UserUnregisteredSEIFilterRsp.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},e}(),o),e.exports=c},5515:function(e){e.exports=function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return n(t[s][1][e]||e)}),u,u.exports,e,t,r,o)}return r[s].exports}for(var i=void 0,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,r){"use strict";var o=(0,e("./adapter_factory.js").adapterFactory)({window:window});t.exports=o},{"./adapter_factory.js":2}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adapterFactory=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=o.log,u=o.detectBrowser(e),l={browserDetails:u,commonShim:c,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(u.browser){case"chrome":if(!n||!n.shimPeerConnection||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),l;r("adapter.js shimming chrome."),l.browserShim=n,n.shimGetUserMedia(e),n.shimMediaStream(e),n.shimPeerConnection(e),n.shimOnTrack(e),n.shimAddTrackRemoveTrack(e),n.shimGetSendersWithDtmf(e),n.shimGetStats(e),n.shimSenderReceiverGetStats(e),n.fixNegotiationNeeded(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),l;r("adapter.js shimming firefox."),l.browserShim=s,s.shimGetUserMedia(e),s.shimPeerConnection(e),s.shimOnTrack(e),s.shimRemoveStream(e),s.shimSenderGetStats(e),s.shimReceiverGetStats(e),s.shimRTCDataChannel(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"edge":if(!i||!i.shimPeerConnection||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),l;r("adapter.js shimming edge."),l.browserShim=i,i.shimGetUserMedia(e),i.shimGetDisplayMedia(e),i.shimPeerConnection(e),i.shimReplaceTrack(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"safari":if(!a||!t.shimSafari)return r("Safari shim is not included in this adapter release."),l;r("adapter.js shimming safari."),l.browserShim=a,a.shimRTCIceServerUrls(e),a.shimCreateOfferLegacy(e),a.shimCallbacksAPI(e),a.shimLocalStreamsAPI(e),a.shimRemoteStreamsAPI(e),a.shimTrackEventTransceiver(e),a.shimGetUserMedia(e),c.shimRTCIceCandidate(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;default:r("Unsupported browser!")}return l};var o=u(e("./utils")),n=u(e("./chrome/chrome_shim")),i=u(e("./edge/edge_shim")),s=u(e("./firefox/firefox_shim")),a=u(e("./safari/safari_shim")),c=u(e("./common_shim"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),r.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},r.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(o){var n;n=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===o.track.id})):{track:o.track};var i=new Event("track");i.track=o.track,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],r.dispatchEvent(i)})),t.stream.getTracks().forEach((function(o){var n;n=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===o.id})):{track:o};var i=new Event("track");i.track=o,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],r.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},r.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===t.kind?e.createDTMFSender(t):null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,o){var n=r.apply(this,arguments);return n||(n=t(this,e),this._senders.push(n)),n};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){r._senders.push(t(r,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var r=t._senders.find((function(t){return t.track===e}));r&&t._senders.splice(t._senders.indexOf(r),1)}))}}else if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},r.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,o){var n=this,i=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){r[t]=e.stat(t)})),t[r.id]=r})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};return arguments.length>=2?t.apply(this,[function(e){i[1](a(s(e)))},arguments[0]]):new Promise((function(e,r){t.apply(n,[function(t){e(a(s(t)))},r])})).then(r,o)}}},r.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],r=void 0,o=void 0,n=void 0;return this.getSenders().forEach((function(e){e.track===t&&(r?n=!0:r=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(o?n=!0:o=e),e.track===t})),n||r&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}},r.shimAddTrackRemoveTrackWithNative=a,r.shimAddTrackRemoveTrack=function(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return a(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(r.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}o.apply(this,[t])};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var o=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var i=this._streams[r.id];if(i)i.addTrack(t),Promise.resolve().then((function(){o.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var o=u(e,r);t[0].apply(null,[o])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then((function(t){return u(e,t)}))}}));var i=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=l(this,arguments[0]),i.apply(this,arguments)):i.apply(this,arguments)};var c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:u(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var r=void 0;Object.keys(this._streams).forEach((function(o){t._streams[o].getTracks().find((function(t){return e.track===t}))&&(r=t._streams[o])})),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function u(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var o=e._reverseStreams[t];r=r.replace(new RegExp(e._streams[o.id].id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function l(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var o=e._reverseStreams[t],n=e._streams[o.id];r=r.replace(new RegExp(o.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}},r.shimPeerConnection=function(e){if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},r.fixNegotiationNeeded=function(e){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils.js"));function a(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var o=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(o)&&this._shimmedLocalStreams[r.id].push(o):this._shimmedLocalStreams[r.id]=[r,o],o};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var o=this.getSenders();r.apply(this,arguments);var n=this.getSenders().filter((function(e){return-1===o.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(n)};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],o.apply(this,arguments)};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(r){var o=t._shimmedLocalStreams[r].indexOf(e);-1!==o&&t._shimmedLocalStreams[r].splice(o,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]})),n.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((function(t){var o=r.video&&r.video.width,n=r.video&&r.video.height;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:r.video&&r.video.frameRate||3}},o&&(r.video.mandatory.maxWidth=o),n&&(r.video.mandatory.maxHeight=n),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var r=n.detectBrowser(e),s=function(e){if("object"!==(void 0===e?"undefined":o(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"===o(e[r])?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var s={};"number"==typeof n.ideal?(s[i("min",r)]=n.ideal,t.optional.push(s),(s={})[i("max",r)]=n.ideal,t.optional.push(s)):(s[i("",r)]=n.ideal,t.optional.push(s))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,n){if(r.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)){var a=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"===o(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":o(c))?c:{ideal:c});var u=r.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var l=void 0;if("environment"===c.exact||"environment"===c.ideal?l=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(l=["front"]),l)return t.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return l.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!r&&t.length&&l.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=c.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=s(e.video),i("chrome: "+JSON.stringify(e)),n(e)}))}e.video=s(e.video)}return i("chrome: "+JSON.stringify(e)),n(e)},c=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,o){a(e,(function(e){t.webkitGetUserMedia(e,r,(function(e){o&&o(c(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var u=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return u(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}}};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils.js")),i=n.log},{"../utils.js":15}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),i=n.default.parseCandidate(e.candidate),s=Object.assign(r,i);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},r.shimMaxMessageSize=function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=i.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){if(!e||!e.sdp)return!1;var t=n.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=n.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},o=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r},s=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},a=function(e,r){var o=65536;"firefox"===t.browser&&57===t.version&&(o=65535);var i=n.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?o=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(o=2147483637),o},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r(arguments[0])){var e=o(arguments[0]),t=s(e),n=a(arguments[0],e),i=void 0;i=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);var u={};Object.defineProperty(u,"maxMessageSize",{get:function(){return i}}),this._sctp=u}return c.apply(this,arguments)}}},r.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(function(e){return r(e.channel,e.target),e}))}function r(e,t){var r=e.send;e.send=function(){var o=arguments[0];if("open"===e.readyState&&t.sctp&&(o.length||o.size||o.byteLength)>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}},r.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}},r.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=i.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),r.apply(this,arguments)}}}};var n=function(e){return e&&e.__esModule?e:{default:e}}(e("sdp")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var o=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var n=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}}),r.shimPeerConnection=function(e){var t=i.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var o=(0,a.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,s.filterIceServers)(e.iceServers,t.version),i.log("ICE servers after filtering:",e.iceServers)),new o(e)},e.RTCPeerConnection.prototype=o.prototype},r.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils")),s=e("./filtericeservers"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("rtcpeerconnection-shim"))},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.filterIceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&o.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"==typeof t;return n&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=n?t[0]:t,!!t.length}}))};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetUserMedia=function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),r.shimOnTrack=function(e){"object"===(void 0===e?"undefined":o(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},r.shimPeerConnection=function(e){var t=s.detectBrowser(e);if("object"===(void 0===e?"undefined":o(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,o){return i.apply(this,[e||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,o)}}},r.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},r.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},r.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)}))})},r.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimGetUserMedia=function(e){var t=n.detectBrowser(e),r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,o){n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,o)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":o(e))&&"object"===o(e.audio)&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":o(e))&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getTracks().forEach((function(o){return t.call(r,o,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?this._localStreams.includes(r)||this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var o=e.getTracks();this.getSenders().forEach((function(e){o.includes(e.track)&&t.removeTrack(e)}))}})}},r.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}}))}),t.apply(e,arguments)}}},r.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var o=r.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var r=n.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=c,t.setRemoteDescription=c=function(e,t,r){var o=s.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=c=function(e,t,r){var o=a.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o}}},r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,o=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return o(i(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))},r.shimConstraints=i,r.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var o=[],i=0;i<e.iceServers.length;i++){var s=e.iceServers[i];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,o.push(s)):o.push(e.iceServers[i])}e.iceServers=o}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},r.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},r.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveVideo||o||this.addTransceiver("video")}return t.apply(this,arguments)}};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"));function i(e){return e&&void 0!==e.video?Object.assign({},e,{video:n.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.extractVersion=s,r.wrapPeerConnectionEvent=function(e,t,r){if(e.RTCPeerConnection){var o=e.RTCPeerConnection.prototype,n=o.addEventListener;o.addEventListener=function(e,o){if(e!==t)return n.apply(this,arguments);var i=function(e){var t=r(e);t&&o(t)};return this._eventMap=this._eventMap||{},this._eventMap[o]=i,n.apply(this,[e,i])};var i=o.removeEventListener;o.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return i.apply(this,arguments);var o=this._eventMap[r];return delete this._eventMap[r],i.apply(this,[e,o])},Object.defineProperty(o,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},r.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":o(e))+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},r.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":o(e))+". Please use a boolean."):(i=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},r.log=function(){if("object"===("undefined"==typeof window?"undefined":o(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},r.deprecated=function(e,t){i&&console.warn(e+" is deprecated, please use "+t+" instead.")},r.detectBrowser=function(e){var t=e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=s(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=s(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=s(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=s(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return r},r.compactObject=function e(t){return"object"!==(void 0===t?"undefined":o(t))?t:Object.keys(t).reduce((function(r,n){var i="object"===o(t[n]),s=i?e(t[n]):t[n],a=i&&!Object.keys(s).length;return void 0===s||a?r:Object.assign(r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,s))}),{})},r.walkStats=a,r.filterStats=function(e,t,r){var o=r?"outbound-rtp":"inbound-rtp",n=new Map;if(null===t)return n;var i=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((function(t){e.forEach((function(r){r.type===o&&r.trackId===t.id&&a(e,r,n)}))})),n};var n=!0,i=!0;function s(e,t,r){var o=e.match(t);return o&&o.length>=r&&parseInt(o[r],10)}function a(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((function(o){o.endsWith("Id")?a(e,e.get(t[o]),r):o.endsWith("Ids")&&t[o].forEach((function(t){a(e,e.get(t),r)}))})))}},{}],16:[function(e,t,r){"use strict";var o=e("sdp");function n(e,t,r,n,i){var s=o.writeRtpDescription(e.kind,t);if(s+=o.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=o.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),s+="a=mid:"+e.mid+"\r\n",s+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(n?n.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),s}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},o=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},n=function(e,t,r,n){var i=o(e.parameters.apt,r),s=o(t.parameters.apt,n);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(o){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(o.name.toLowerCase()===s.name.toLowerCase()&&o.clockRate===s.clockRate){if("rtx"===o.name.toLowerCase()&&o.parameters&&s.parameters.apt&&!n(o,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(o.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<o.rtcpFeedback.length;t++)if(o.rtcpFeedback[t].type===e.type&&o.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var o=0;o<t.headerExtensions.length;o++){var n=t.headerExtensions[o];if(e.uri===n.uri){r.headerExtensions.push(n);break}}})),r}function s(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function a(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function c(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}t.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function l(t,r,o,n){var i=new Event("track");i.track=r,i.receiver=o,i.transceiver={receiver:o},i.streams=n,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var d=function(r){var n=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var o=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof o;return n&&(o=[o]),o=o.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)})),delete e.url,e.urls=n?o[0]:o,!!o.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=o.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},d.prototype.addTrack=function(t,r){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var o;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(o=this.transceivers[n]);return o||(o=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),o.track=t,o.stream=r,o.rtpSender=new e.RTCRtpSender(t,o.dtlsTransport),o.rtpSender},d.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var o=e.clone();e.getTracks().forEach((function(e,t){var r=o.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),o.getTracks().forEach((function(e){r.addTrack(e,o)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw c("InvalidAccessError","Sender was not created by this connection.");var o=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(o)&&this.localStreams.indexOf(o)>-1&&this.localStreams.splice(this.localStreams.indexOf(o),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,r){var o=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?"completed":"gathering",null!==o.transceivers[t].bufferedCandidateEvents&&o.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),n},d.prototype._gather=function(t,r){var n=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var u=o.writeCandidate(a);s.candidate=Object.assign(s.candidate,o.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=o.getMediaSections(n._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=o.getDescription(n._localDescription.sdp)+l.join("");var d=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),d&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var o=new e.RTCDtlsTransport(r);return o.ondtlsstatechange=function(){t._updateConnectionState()},o.onerror=function(){Object.defineProperty(o,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:o}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var o=this.transceivers[e].dtlsTransport;o&&(delete o.ondtlsstatechange,delete o.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,r,n){var s=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:o.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),n&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),s.encodings=e.recvEncodingParameters.length?e.recvEncodingParameters:[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},d.prototype.setLocalDescription=function(e){var t,r,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=o.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=o.parseRtpParameters(e);n.transceivers[t].localCapabilities=r})),n.transceivers.forEach((function(e,t){n._gather(e.mid,t)}));else if("answer"===e.type){t=o.splitSections(n._remoteDescription.sdp),r=t.shift();var a=o.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var s=n.transceivers[t],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,d=s.localCapabilities,h=s.remoteCapabilities;if(!(o.isRejected(e)&&0===o.matchPrefix(e,"a=bundle-only").length||s.rejected)){var p=o.getIceParameters(e,r),f=o.getDtlsParameters(e,r);a&&(f.role="server"),n.usingBundle&&0!==t||(n._gather(s.mid,t),"new"===u.state&&u.start(c,p,a?"controlling":"controlled"),"new"===l.state&&l.start(f));var _=i(d,h);n._transceive(s,_.codecs.length>0,!1)}}))}return n._localDescription={type:e.type,sdp:e.sdp},n._updateSignalingState("offer"===e.type?"have-local-offer":"stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(n){var d=this;if(-1===["offer","answer"].indexOf(n.type))return Promise.reject(c("TypeError",'Unsupported type "'+n.type+'"'));if(!s("setRemoteDescription",n.type,d.signalingState)||d._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+n.type+" in state "+d.signalingState));var h={};d.remoteStreams.forEach((function(e){h[e.id]=e}));var p=[],f=o.splitSections(n.sdp),_=f.shift(),g=o.matchPrefix(_,"a=ice-lite").length>0,m=o.matchPrefix(_,"a=group:BUNDLE ").length>0;d.usingBundle=m;var v=o.matchPrefix(_,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(s,c){var l=o.splitLines(s),f=o.getKind(s),v=o.isRejected(s)&&0===o.matchPrefix(s,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],b=o.getDirection(s,_),S=o.parseMsid(s),E=o.getMid(s)||o.generateIdentifier();if(v||"application"===f&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))d.transceivers[c]={mid:E,kind:f,protocol:y,rejected:!0};else{var T,w,C,I,O,k,R,A,P;!v&&d.transceivers[c]&&d.transceivers[c].rejected&&(d.transceivers[c]=d._createTransceiver(f,!0));var L,N,D=o.parseRtpParameters(s);v||(L=o.getIceParameters(s,_),(N=o.getDtlsParameters(s,_)).role="client"),R=o.parseRtpEncodingParameters(s);var M=o.parseRtcpParameters(s),x=o.matchPrefix(s,"a=end-of-candidates",_).length>0,B=o.matchPrefix(s,"a=candidate:").map((function(e){return o.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===n.type||"answer"===n.type)&&!v&&m&&c>0&&d.transceivers[c]&&(d._disposeIceAndDtlsTransports(c),d.transceivers[c].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[c].iceTransport=d.transceivers[0].iceTransport,d.transceivers[c].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[c].rtpSender&&d.transceivers[c].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[c].rtpReceiver&&d.transceivers[c].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==n.type||v)"answer"!==n.type||v||(w=(T=d.transceivers[c]).iceGatherer,C=T.iceTransport,I=T.dtlsTransport,O=T.rtpReceiver,k=T.sendEncodingParameters,A=T.localCapabilities,d.transceivers[c].recvEncodingParameters=R,d.transceivers[c].remoteCapabilities=D,d.transceivers[c].rtcpParameters=M,B.length&&"new"===C.state&&(!g&&!x||m&&0!==c?B.forEach((function(e){a(T.iceTransport,e)})):C.setRemoteCandidates(B)),m&&0!==c||("new"===C.state&&C.start(w,L,"controlling"),"new"===I.state&&I.start(N)),!i(T.localCapabilities,T.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&T.sendEncodingParameters[0].rtx&&delete T.sendEncodingParameters[0].rtx,d._transceive(T,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!O||"sendrecv"!==b&&"sendonly"!==b?delete T.rtpReceiver:(P=O.track,S?(h[S.stream]||(h[S.stream]=new e.MediaStream),r(P,h[S.stream]),p.push([P,O,h[S.stream]])):(h.default||(h.default=new e.MediaStream),r(P,h.default),p.push([P,O,h.default]))));else{(T=d.transceivers[c]||d._createTransceiver(f)).mid=E,T.iceGatherer||(T.iceGatherer=d._createIceGatherer(c,m)),B.length&&"new"===T.iceTransport.state&&(!x||m&&0!==c?B.forEach((function(e){a(T.iceTransport,e)})):T.iceTransport.setRemoteCandidates(B)),A=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(A.codecs=A.codecs.filter((function(e){return"rtx"!==e.name}))),k=T.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var U,j=!1;"sendrecv"===b||"sendonly"===b?(j=!T.rtpReceiver,O=T.rtpReceiver||new e.RTCRtpReceiver(T.dtlsTransport,f),j&&(P=O.track,S&&"-"===S.stream||(S?(h[S.stream]||(h[S.stream]=new e.MediaStream,Object.defineProperty(h[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(P,"id",{get:function(){return S.track}}),U=h[S.stream]):(h.default||(h.default=new e.MediaStream),U=h.default)),U&&(r(P,U),T.associatedRemoteMediaStreams.push(U)),p.push([P,O,U]))):T.rtpReceiver&&T.rtpReceiver.track&&(T.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===T.rtpReceiver.track.id}));t&&u(t,e)})),T.associatedRemoteMediaStreams=[]),T.localCapabilities=A,T.remoteCapabilities=D,T.rtpReceiver=O,T.rtcpParameters=M,T.sendEncodingParameters=k,T.recvEncodingParameters=R,d._transceive(d.transceivers[c],!1,j)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===n.type?"active":"passive"),d._remoteDescription={type:n.type,sdp:n.sdp},d._updateSignalingState("offer"===n.type?"have-remote-offer":"stable"),Object.keys(h).forEach((function(t){var r=h[t];if(r.getTracks().length){if(-1===d.remoteStreams.indexOf(r)){d.remoteStreams.push(r);var o=new Event("addstream");o.stream=r,e.setTimeout((function(){d._dispatchEvent("addstream",o)}))}p.forEach((function(e){r.id===e[2].id&&l(d,e[0],e[1],[r])}))}})),p.forEach((function(e){e[2]||l(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},d.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,s=r.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));i>0||s>0;)i>0&&(r._createTransceiver("audio"),i--),s>0&&(r._createTransceiver("video"),s--);var u=o.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(n,i){var s=n.track,a=n.kind,c=n.mid||o.generateIdentifier();n.mid=c,n.iceGatherer||(n.iceGatherer=r._createIceGatherer(i,r.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=n.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];s&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,a)),n.localCapabilities=u,n.sendEncodingParameters=l})),"max-compat"!==r._config.bundlePolicy&&(u+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){u+=n(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+o.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},d.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var s=o.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(s+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=o.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,o){if(!(o+1>a)){if(e.rejected)return"application"===e.kind?s+="DTLS/SCTP"===e.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=n(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},d.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,i){if(!r._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){s=u;break}var l=r.transceivers[s];if(!l)return i(c("OperationError","Can not add ICE candidate"));if(l.rejected)return n();var d=Object.keys(e.candidate).length>0?o.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return n();if(d.component&&1!==d.component)return n();if((0===s||s>0&&l.iceTransport!==r.transceivers[0].iceTransport)&&!a(l.iceTransport,d))return i(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=o.getMediaSections(r._remoteDescription.sdp))[s]+="a="+(d.type?h:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=o.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var p=0;p<r.transceivers.length&&(r.transceivers[p].rejected||(r.transceivers[p].iceTransport.addRemoteCandidate({}),(t=o.getMediaSections(r._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=o.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));p++);n()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var o=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&o.push(e[t].getStats())}))})),Promise.all(o).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var o=r.prototype.getStats;r.prototype.getStats=function(){return o.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){e[r].type=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}(e[r]),t.set(r,e[r])})),t}))}}}));var h=["createOffer","createAnswer"];return h.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(h=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},{sdp:17}],17:[function(e,t,r){"use strict";var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},o.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},o.getDescription=function(e){var t=o.splitSections(e);return t&&t[0]},o.getMediaSections=function(e){var t=o.splitSections(e);return t.shift(),t},o.matchPrefix=function(e,t){return o.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},o.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},o=8;o<t.length;o+=2)switch(t[o]){case"raddr":r.relatedAddress=t[o+1];break;case"rport":r.relatedPort=parseInt(t[o+1],10);break;case"tcptype":r.tcpType=t[o+1];break;case"ufrag":r.ufrag=t[o+1],r.usernameFragment=t[o+1];break;default:r[t[o]]=t[o+1]}return r},o.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},o.parseIceOptions=function(e){return e.substr(14).split(" ")},o.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},o.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},o.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},o.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},o.parseFmtp=function(e){for(var t,r={},o=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<o.length;n++)r[(t=o[n].trim().split("="))[0].trim()]=t[1];return r},o.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var o=[];Object.keys(e.parameters).forEach((function(t){o.push(e.parameters[t]?t+"="+e.parameters[t]:t)})),t+="a=fmtp:"+r+" "+o.join(";")+"\r\n"}return t},o.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},o.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},o.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},o=e.indexOf(":",t);return o>-1?(r.attribute=e.substr(t+1,o-t-1),r.value=e.substr(o+1)):r.attribute=e.substr(t+1),r},o.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},o.getMid=function(e){var t=o.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},o.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},o.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:o.matchPrefix(e+t,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},o.getIceParameters=function(e,t){var r=o.splitLines(e);return{usernameFragment:(r=r.concat(o.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:r.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},o.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},o.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=o.splitLines(e)[0].split(" "),n=3;n<r.length;n++){var i=r[n],s=o.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var a=o.parseRtpMap(s),c=o.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=c.length?o.parseFmtp(c[0]):{},a.rtcpFeedback=o.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(o.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return o.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(o.parseExtmap(e))})),t},o.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=o.writeRtpMap(e),r+=o.writeFmtp(e),r+=o.writeRtcpFb(e)}));var n=0;return t.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(r+="a=maxptime:"+n+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=o.writeExtmap(e)})),r},o.parseRtpEncodingParameters=function(e){var t,r=[],n=o.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),s=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=o.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var o={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(o.rtx={ssrc:t}),r.push(o),i&&((o=JSON.parse(JSON.stringify(o))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(o))}})),0===r.length&&c&&r.push({ssrc:c});var l=o.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},o.parseRtcpParameters=function(e){var t={},r=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var n=o.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var i=o.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},o.parseMsid=function(e){var t,r=o.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var n=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(e,t,r){var n=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||o.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(e,t,r,n){var i=o.writeRtpDescription(e.kind,t);if(i+=o.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=o.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var s="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),i},o.getDirection=function(e,t){for(var r=o.splitLines(e),n=0;n<r.length;n++)switch(r[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[n].substr(2)}return t?o.getDirection(t):"sendrecv"},o.getKind=function(e){return o.splitLines(e)[0].split(" ")[0].substr(2)},o.isRejected=function(e){return"0"===e.split(" ",2)[1]},o.parseMLine=function(e){var t=o.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},o.parseOLine=function(e){var t=o.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},o.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=o.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=o)},{}]},{},[1])(1)},4119:function(e){"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__4119__}},__webpack_module_cache__={};function __nested_webpack_require_1508128__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__nested_webpack_require_1508128__),r.exports}__nested_webpack_require_1508128__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__=__nested_webpack_require_1508128__(4780);return __webpack_exports__}()},module.exports=t(__webpack_require__(3068))},3068:function(e,t,r){"undefined"!=typeof self&&self,e.exports=function(e){return r=[function(e,t,r){"use strict";var o,n,i=(r=r(7)).Reader,s=r.Writer,a=r.util,c=r.roots.default||(r.roots.default={});function u(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function g(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function m(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function y(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function S(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function E(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function T(e){if(this.redirect_server=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function C(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function I(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function O(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function R(e){if(this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function A(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function P(e){if(this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function L(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function N(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function D(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function M(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function x(e){if(this.trans_seqs=[],this.user_trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function B(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function U(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function j(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function H(e){if(this.user_basic_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function z(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function V(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function q(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function G(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Z(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function F(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function W(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Y(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Q(e){if(this.stream_info=[],this.stream_mix_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function K(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function J(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function X(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ee(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function te(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function re(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function oe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ne(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ie(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function se(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ae(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ce(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ue(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function le(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function de(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function he(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function pe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function fe(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ge(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function me(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ve(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ye(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function be(e){if(this.room_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Se(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ee(e){if(this.stream_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Te(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function we(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ce(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ie(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Oe(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ke(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Re(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ae(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Pe(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Le(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ne(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function De(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Me(e){if(this.msgs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function xe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Be(e){if(this.msgs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ue(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function je(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function He(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ze(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ve(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function qe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ge(e){if(this.user_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ze(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Fe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function We(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ye(e){if(this.stream_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Qe(e){if(this.stream_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ke(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Je(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Xe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $e(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function et(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function tt(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function rt(e){if(this.trans_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ot(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}c.proto_switch=((r={}).CommonRsp=(u.prototype.rsp_head=null,u.create=function(e){return new u(e)},u.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},u.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.CommonRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},u),r.RspHead=(l.prototype.code=0,l.prototype.message="",l.create=function(e){return new l(e)},l.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},l.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.RspHead;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;default:e.skipType(7&n)}}return o},l),r.LoginRoomReq=(d.prototype.app_id=0,d.prototype.id_name=a.newBuffer([]),d.prototype.device_id="",d.prototype.term_type=0,d.prototype.net_type=0,d.prototype.sdk_ver=0,d.prototype.proto_ver=0,d.prototype.nick_name=a.newBuffer([]),d.prototype.client_stamp=a.newBuffer([]),d.prototype.crypt_version=0,d.prototype.k1_sign=a.newBuffer([]),d.prototype.login_token=a.newBuffer([]),d.prototype.relogin_token=a.newBuffer([]),d.prototype.role=0,d.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,d.prototype.room_id=a.newBuffer([]),d.prototype.room_name=a.newBuffer([]),d.prototype.biz_type=0,d.prototype.room_create_flag=0,d.prototype.user_state_flag=0,d.prototype.lv_key="",d.prototype.third_token=a.newBuffer([]),d.prototype.cluster_req=0,d.prototype.user_count_limit=0,d.prototype.relate_service="",d.prototype.biz_version="",d.prototype.login_logic=0,d.prototype.sdk_conn_type=0,d.create=function(e){return new d(e)},d.encode=function(e,t){return t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(26).string(e.device_id),null!=e.term_type&&Object.hasOwnProperty.call(e,"term_type")&&t.uint32(32).int32(e.term_type),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).int32(e.net_type),null!=e.sdk_ver&&Object.hasOwnProperty.call(e,"sdk_ver")&&t.uint32(48).uint32(e.sdk_ver),null!=e.proto_ver&&Object.hasOwnProperty.call(e,"proto_ver")&&t.uint32(56).int32(e.proto_ver),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(66).bytes(e.nick_name),null!=e.client_stamp&&Object.hasOwnProperty.call(e,"client_stamp")&&t.uint32(74).bytes(e.client_stamp),null!=e.crypt_version&&Object.hasOwnProperty.call(e,"crypt_version")&&t.uint32(80).uint32(e.crypt_version),null!=e.k1_sign&&Object.hasOwnProperty.call(e,"k1_sign")&&t.uint32(90).bytes(e.k1_sign),null!=e.login_token&&Object.hasOwnProperty.call(e,"login_token")&&t.uint32(98).bytes(e.login_token),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(106).bytes(e.relogin_token),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(112).uint32(e.role),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(120).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(130).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(138).bytes(e.room_name),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(144).uint32(e.biz_type),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(152).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(160).uint32(e.user_state_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(170).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(178).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(184).uint32(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(192).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(202).string(e.relate_service),null!=e.biz_version&&Object.hasOwnProperty.call(e,"biz_version")&&t.uint32(210).string(e.biz_version),null!=e.login_logic&&Object.hasOwnProperty.call(e,"login_logic")&&t.uint32(216).uint32(e.login_logic),null!=e.sdk_conn_type&&Object.hasOwnProperty.call(e,"sdk_conn_type")&&t.uint32(224).int32(e.sdk_conn_type),t},d.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.LoginRoomReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.app_id=e.uint32();break;case 2:o.id_name=e.bytes();break;case 3:o.device_id=e.string();break;case 4:o.term_type=e.int32();break;case 5:o.net_type=e.int32();break;case 6:o.sdk_ver=e.uint32();break;case 7:o.proto_ver=e.int32();break;case 8:o.nick_name=e.bytes();break;case 9:o.client_stamp=e.bytes();break;case 10:o.crypt_version=e.uint32();break;case 11:o.k1_sign=e.bytes();break;case 12:o.login_token=e.bytes();break;case 13:o.relogin_token=e.bytes();break;case 14:o.role=e.uint32();break;case 15:o.liveroom_session_id=e.uint64();break;case 16:o.room_id=e.bytes();break;case 17:o.room_name=e.bytes();break;case 18:o.biz_type=e.uint32();break;case 19:o.room_create_flag=e.uint32();break;case 20:o.user_state_flag=e.uint32();break;case 21:o.lv_key=e.string();break;case 22:o.third_token=e.bytes();break;case 23:o.cluster_req=e.uint32();break;case 24:o.user_count_limit=e.uint32();break;case 25:o.relate_service=e.string();break;case 26:o.biz_version=e.string();break;case 27:o.login_logic=e.uint32();break;case 28:o.sdk_conn_type=e.int32();break;default:e.skipType(7&n)}}return o},d),r.LoginRoomRsp=(h.prototype.rsp_head=null,h.prototype.room_id=a.newBuffer([]),h.prototype.heartbeat_interval=0,h.prototype.heartbeat_timeout=0,h.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,h.prototype.crypt_option=0,h.prototype.k2_sign=a.newBuffer([]),h.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,h.prototype.liveroom_hb_interval=0,h.prototype.liveroom_hb_timeout=0,h.prototype.anchor_info=null,h.prototype.stream_seq=0,h.prototype.stream_info=a.emptyArray,h.prototype.stream_fetch_flag=0,h.prototype.lv_key="",h.prototype.zp_key="",h.prototype.online_count=0,h.prototype.bigim_time_window=0,h.prototype.dati_time_window=0,h.prototype.cluster_name="",h.prototype.relogin_token=a.newBuffer([]),h.prototype.stream_mix_info=a.emptyArray,h.prototype.userlist_merge_timeout=0,h.prototype.userlist_interval=0,h.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,h.prototype.trans_seqs=a.emptyArray,h.prototype.stream_list_push_merge_timeout=0,h.prototype.stream_list_hb_wait_merge_time=0,h.prototype.trans_list_seq=0,h.prototype.token_remain_time=0,h.create=function(e){return new h(e)},h.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(24).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(32).uint32(e.heartbeat_timeout),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(40).int64(e.ret_timestamp),null!=e.crypt_option&&Object.hasOwnProperty.call(e,"crypt_option")&&t.uint32(48).uint32(e.crypt_option),null!=e.k2_sign&&Object.hasOwnProperty.call(e,"k2_sign")&&t.uint32(58).bytes(e.k2_sign),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(64).uint64(e.liveroom_session_id),null!=e.liveroom_hb_interval&&Object.hasOwnProperty.call(e,"liveroom_hb_interval")&&t.uint32(72).uint32(e.liveroom_hb_interval),null!=e.liveroom_hb_timeout&&Object.hasOwnProperty.call(e,"liveroom_hb_timeout")&&t.uint32(80).uint32(e.liveroom_hb_timeout),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&c.proto_switch.StAnchorInfo.encode(e.anchor_info,t.uint32(90).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(96).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.proto_switch.StStreamInfo.encode(e.stream_info[r],t.uint32(106).fork()).ldelim();if(null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(112).uint32(e.stream_fetch_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(122).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(130).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(136).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(144).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(152).uint32(e.dati_time_window),null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(162).string(e.cluster_name),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(170).bytes(e.relogin_token),null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)c.proto_switch.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(178).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(184).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(192).uint32(e.userlist_interval),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(200).uint64(e.room_session_id),null!=e.trans_seqs&&e.trans_seqs.length)for(r=0;r<e.trans_seqs.length;++r)c.proto_switch.StTransInfo.encode(e.trans_seqs[r],t.uint32(210).fork()).ldelim();return null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(216).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(224).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(232).uint32(e.trans_list_seq),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(240).uint32(e.token_remain_time),t},h.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.LoginRoomRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32());break;case 2:o.room_id=e.bytes();break;case 3:o.heartbeat_interval=e.uint32();break;case 4:o.heartbeat_timeout=e.uint32();break;case 5:o.ret_timestamp=e.int64();break;case 6:o.crypt_option=e.uint32();break;case 7:o.k2_sign=e.bytes();break;case 8:o.liveroom_session_id=e.uint64();break;case 9:o.liveroom_hb_interval=e.uint32();break;case 10:o.liveroom_hb_timeout=e.uint32();break;case 11:o.anchor_info=c.proto_switch.StAnchorInfo.decode(e,e.uint32());break;case 12:o.stream_seq=e.uint32();break;case 13:o.stream_info&&o.stream_info.length||(o.stream_info=[]),o.stream_info.push(c.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 14:o.stream_fetch_flag=e.uint32();break;case 15:o.lv_key=e.string();break;case 16:o.zp_key=e.string();break;case 17:o.online_count=e.uint32();break;case 18:o.bigim_time_window=e.uint32();break;case 19:o.dati_time_window=e.uint32();break;case 20:o.cluster_name=e.string();break;case 21:o.relogin_token=e.bytes();break;case 22:o.stream_mix_info&&o.stream_mix_info.length||(o.stream_mix_info=[]),o.stream_mix_info.push(c.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 23:o.userlist_merge_timeout=e.uint32();break;case 24:o.userlist_interval=e.uint32();break;case 25:o.room_session_id=e.uint64();break;case 26:o.trans_seqs&&o.trans_seqs.length||(o.trans_seqs=[]),o.trans_seqs.push(c.proto_switch.StTransInfo.decode(e,e.uint32()));break;case 27:o.stream_list_push_merge_timeout=e.uint32();break;case 28:o.stream_list_hb_wait_merge_time=e.uint32();break;case 29:o.trans_list_seq=e.uint32();break;case 30:o.token_remain_time=e.uint32();break;default:e.skipType(7&n)}}return o},h),r.StAnchorInfo=(p.prototype.anchor_id_name=a.newBuffer([]),p.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.anchor_nick_name=a.newBuffer([]),p.create=function(e){return new p(e)},p.encode=function(e,t){return t=t||s.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},p.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.StAnchorInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.anchor_id_name=e.bytes();break;case 2:o.anchor_id=e.uint64();break;case 3:o.anchor_nick_name=e.bytes();break;default:e.skipType(7&n)}}return o},p),r.StStreamInfo=(f.prototype.stream_id=a.newBuffer([]),f.prototype.stream_sid="",f.prototype.id_name=a.newBuffer([]),f.prototype.nick_name=a.newBuffer([]),f.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,f.prototype.extra_info=a.newBuffer([]),f.prototype.title=a.newBuffer([]),f.prototype.stream_ver=0,f.prototype.stream_attr=a.newBuffer([]),f.prototype.stream_src=0,f.prototype.stream_state=0,f.prototype.stream_type=0,f.prototype.stream_nid=0,f.create=function(e){return new f(e)},f.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(41).fixed64(e.create_time),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(58).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(64).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(74).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(88).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},f.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.StStreamInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.stream_id=e.bytes();break;case 2:o.stream_sid=e.string();break;case 3:o.id_name=e.bytes();break;case 4:o.nick_name=e.bytes();break;case 5:o.create_time=e.fixed64();break;case 6:o.extra_info=e.bytes();break;case 7:o.title=e.bytes();break;case 8:o.stream_ver=e.uint32();break;case 9:o.stream_attr=e.bytes();break;case 10:o.stream_src=e.uint32();break;case 11:o.stream_state=e.uint32();break;case 12:o.stream_type=e.uint32();break;case 13:o.stream_nid=e.uint32();break;default:e.skipType(7&n)}}return o},f),r.StTransSeqInfo=(_.prototype.trans_type=a.newBuffer([]),_.prototype.trans_seq=0,_.create=function(e){return new _(e)},_.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},_.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.StTransSeqInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_seq=e.uint32();break;default:e.skipType(7&n)}}return o},_),r.StTransInfo=(g.prototype.trans_channel=a.newBuffer([]),g.prototype.trans_seq_array=a.emptyArray,g.create=function(e){return new g(e)},g.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)c.proto_switch.StTransSeqInfo.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},g.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.StTransInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_channel=e.bytes();break;case 2:o.trans_seq_array&&o.trans_seq_array.length||(o.trans_seq_array=[]),o.trans_seq_array.push(c.proto_switch.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},g),r.LogoutRoomReq=(m.prototype.logout_code=0,m.prototype.logout_check=a.newBuffer([]),m.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,m.prototype.room_id=a.newBuffer([]),m.prototype.role=0,m.prototype.nickname=a.newBuffer([]),m.prototype.logout_logic=0,m.create=function(e){return new m(e)},m.encode=function(e,t){return t=t||s.create(),null!=e.logout_code&&Object.hasOwnProperty.call(e,"logout_code")&&t.uint32(8).uint32(e.logout_code),null!=e.logout_check&&Object.hasOwnProperty.call(e,"logout_check")&&t.uint32(18).bytes(e.logout_check),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(24).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(34).bytes(e.room_id),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(50).bytes(e.nickname),null!=e.logout_logic&&Object.hasOwnProperty.call(e,"logout_logic")&&t.uint32(56).uint32(e.logout_logic),t},m.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.LogoutRoomReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.logout_code=e.uint32();break;case 2:o.logout_check=e.bytes();break;case 3:o.liveroom_session_id=e.uint64();break;case 4:o.room_id=e.bytes();break;case 5:o.role=e.uint32();break;case 6:o.nickname=e.bytes();break;case 7:o.logout_logic=e.uint32();break;default:e.skipType(7&n)}}return o},m),r.LogoutRoomRsp=(v.prototype.rsp_head=null,v.create=function(e){return new v(e)},v.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},v.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.LogoutRoomRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},v),r.TcpHbReq=(y.prototype.id_name=a.newBuffer([]),y.create=function(e){return new y(e)},y.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),t},y.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.TcpHbReq;e.pos<r;){var n=e.uint32();n>>>3==1?o.id_name=e.bytes():e.skipType(7&n)}return o},y),r.TcpHbRsp=(b.prototype.rsp_head=null,b.prototype.heartbeat_interval=0,b.prototype.heartbeat_timeout=0,b.prototype.server_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,b.create=function(e){return new b(e)},b.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(16).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(24).uint32(e.heartbeat_timeout),null!=e.server_timestamp&&Object.hasOwnProperty.call(e,"server_timestamp")&&t.uint32(32).int64(e.server_timestamp),t},b.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.TcpHbRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32());break;case 2:o.heartbeat_interval=e.uint32();break;case 3:o.heartbeat_timeout=e.uint32();break;case 4:o.server_timestamp=e.int64();break;default:e.skipType(7&n)}}return o},b),r.TermType=(n={},(o=Object.create(n))[n[0]="TT_NONE"]=0,o[n[1]="TT_PC"]=1,o[n[2]="TT_IOS"]=2,o[n[3]="TT_ANDROID"]=3,o[n[4]="TT_MAC"]=4,o[n[5]="TT_LINUX"]=5,o[n[6]="TT_WEB"]=6,o[n[7]="TT_MINIPROGRAM"]=7,o[n[32]="TT_UNKNOWN"]=32,o),r.NetType=(n={},(o=Object.create(n))[n[0]="NT_NONE"]=0,o[n[1]="NT_LINE"]=1,o[n[2]="NT_WIFI"]=2,o[n[3]="NT_2G"]=3,o[n[4]="NT_3G"]=4,o[n[5]="NT_4G"]=5,o[n[32]="NT_UNKNOWN"]=32,o),r.ProductType=(n={},(o=Object.create(n))[n[0]="PRODUCT_TYPE_NONE"]=0,o[n[1]="PRODUCT_TYPE_LIVEROOM"]=1,o[n[2]="PRODUCT_TYPE_IM"]=2,o),r.LiveroomProtoVersion=(n={},(o=Object.create(n))[n[0]="PROTO_VERSION_NONE"]=0,o[n[131072]="RPOTO_V020000"]=131072,o),r.SdkConnType=(n={},(o=Object.create(n))[n[0]="SdkConnType_None"]=0,o[n[1]="SdkConnType_Tcp"]=1,o[n[2]="SdkConnType_Websocket"]=2,o),r.Header=(S.prototype.cmd="",S.prototype.seq=0,S.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,S.prototype.app_id=0,S.prototype.user_id="",S.prototype.session_id=a.Long?a.Long.fromBits(0,0,!1):0,S.prototype.user_nid=a.Long?a.Long.fromBits(0,0,!1):0,S.prototype.controls=a.newBuffer([]),S.prototype.product=0,S.prototype.flags=a.newBuffer([]),S.create=function(e){return new S(e)},S.encode=function(e,t){return t=t||s.create(),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(10).string(e.cmd),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint32(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(32).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(42).string(e.user_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(48).int64(e.session_id),null!=e.user_nid&&Object.hasOwnProperty.call(e,"user_nid")&&t.uint32(56).int64(e.user_nid),null!=e.controls&&Object.hasOwnProperty.call(e,"controls")&&t.uint32(66).bytes(e.controls),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(72).int32(e.product),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(82).bytes(e.flags),t},S.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.Header;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.cmd=e.string();break;case 2:o.seq=e.uint32();break;case 3:o.timestamp=e.int64();break;case 4:o.app_id=e.uint32();break;case 5:o.user_id=e.string();break;case 6:o.session_id=e.int64();break;case 7:o.user_nid=e.int64();break;case 8:o.controls=e.bytes();break;case 9:o.product=e.int32();break;case 10:o.flags=e.bytes();break;default:e.skipType(7&n)}}return o},S),r.PushKickout=(E.prototype.reason=0,E.prototype.message="",E.prototype.need_relogin=0,E.create=function(e){return new E(e)},E.encode=function(e,t){return t=t||s.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).uint32(e.reason),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.need_relogin&&Object.hasOwnProperty.call(e,"need_relogin")&&t.uint32(24).uint32(e.need_relogin),t},E.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.PushKickout;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.reason=e.uint32();break;case 2:o.message=e.string();break;case 3:o.need_relogin=e.uint32();break;default:e.skipType(7&n)}}return o},E),r.PushRedirect2Sdk=(T.prototype.redirect_server=a.emptyArray,T.create=function(e){return new T(e)},T.encode=function(e,t){if(t=t||s.create(),null!=e.redirect_server&&e.redirect_server.length)for(var r=0;r<e.redirect_server.length;++r)t.uint32(10).string(e.redirect_server[r]);return t},T.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.PushRedirect2Sdk;e.pos<r;){var n=e.uint32();n>>>3==1?(o.redirect_server&&o.redirect_server.length||(o.redirect_server=[]),o.redirect_server.push(e.string())):e.skipType(7&n)}return o},T),r.PushReq=(w.prototype.head=null,w.prototype.msg_body=a.newBuffer([]),w.create=function(e){return new w(e)},w.encode=function(e,t){return t=t||s.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&c.proto_switch.PushReqHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(18).bytes(e.msg_body),t},w.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.PushReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.head=c.proto_switch.PushReqHead.decode(e,e.uint32());break;case 2:o.msg_body=e.bytes();break;default:e.skipType(7&n)}}return o},w),r.PushReqHead=(C.prototype.sub_cmd="",C.prototype.sender_user_id="",C.prototype.qos_flag=0,C.prototype.msg_id="",C.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,C.prototype.room_id=a.newBuffer([]),C.prototype.sender_user_nid=a.Long?a.Long.fromBits(0,0,!0):0,C.create=function(e){return new C(e)},C.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sender_user_id&&Object.hasOwnProperty.call(e,"sender_user_id")&&t.uint32(18).string(e.sender_user_id),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(24).uint32(e.qos_flag),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(40).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(50).bytes(e.room_id),null!=e.sender_user_nid&&Object.hasOwnProperty.call(e,"sender_user_nid")&&t.uint32(56).uint64(e.sender_user_nid),t},C.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.PushReqHead;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.sub_cmd=e.string();break;case 2:o.sender_user_id=e.string();break;case 3:o.qos_flag=e.uint32();break;case 4:o.msg_id=e.string();break;case 5:o.send_time=e.int64();break;case 6:o.room_id=e.bytes();break;case 7:o.sender_user_nid=e.uint64();break;default:e.skipType(7&n)}}return o},C),r.PushRsp=(I.prototype.code=0,I.prototype.message="",I.prototype.sub_cmd="",I.prototype.msg_id="",I.prototype.server_send_time=a.Long?a.Long.fromBits(0,0,!1):0,I.create=function(e){return new I(e)},I.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(26).string(e.sub_cmd),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.server_send_time&&Object.hasOwnProperty.call(e,"server_send_time")&&t.uint32(40).int64(e.server_send_time),t},I.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.PushRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.sub_cmd=e.string();break;case 4:o.msg_id=e.string();break;case 5:o.server_send_time=e.int64();break;default:e.skipType(7&n)}}return o},I),r.MergePushHead=(O.prototype.qos_flag=0,O.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,O.prototype.room_id=a.newBuffer([]),O.create=function(e){return new O(e)},O.encode=function(e,t){return t=t||s.create(),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(8).uint32(e.qos_flag),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(16).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(26).bytes(e.room_id),t},O.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.MergePushHead;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.qos_flag=e.uint32();break;case 2:o.send_time=e.int64();break;case 3:o.room_id=e.bytes();break;default:e.skipType(7&n)}}return o},O),r.MergePushInfo=(k.prototype.sub_cmd="",k.prototype.sub_seq=0,k.prototype.sender_nid=a.Long?a.Long.fromBits(0,0,!0):0,k.prototype.msg_id=a.newBuffer([]),k.prototype.msg_body=a.newBuffer([]),k.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,k.create=function(e){return new k(e)},k.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.sender_nid&&Object.hasOwnProperty.call(e,"sender_nid")&&t.uint32(24).uint64(e.sender_nid),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).bytes(e.msg_id),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(42).bytes(e.msg_body),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(48).int64(e.msg_timestamp),t},k.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.MergePushInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.sub_cmd=e.string();break;case 2:o.sub_seq=e.uint32();break;case 3:o.sender_nid=e.uint64();break;case 4:o.msg_id=e.bytes();break;case 5:o.msg_body=e.bytes();break;case 6:o.msg_timestamp=e.int64();break;default:e.skipType(7&n)}}return o},k),r.CmdMergePushReq=(R.prototype.head=null,R.prototype.messages=a.emptyArray,R.create=function(e){return new R(e)},R.encode=function(e,t){if(t=t||s.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&c.proto_switch.MergePushHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.messages&&e.messages.length)for(var r=0;r<e.messages.length;++r)c.proto_switch.MergePushInfo.encode(e.messages[r],t.uint32(18).fork()).ldelim();return t},R.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.CmdMergePushReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.head=c.proto_switch.MergePushHead.decode(e,e.uint32());break;case 2:o.messages&&o.messages.length||(o.messages=[]),o.messages.push(c.proto_switch.MergePushInfo.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},R),r.CmdMergePushRspInfo=(A.prototype.sub_cmd="",A.prototype.sub_seq=0,A.prototype.msg_id=a.newBuffer([]),A.create=function(e){return new A(e)},A.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(26).bytes(e.msg_id),t},A.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.CmdMergePushRspInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.sub_cmd=e.string();break;case 2:o.sub_seq=e.uint32();break;case 3:o.msg_id=e.bytes();break;default:e.skipType(7&n)}}return o},A),r.CmdMergePushRsp=(P.prototype.messages=a.emptyArray,P.create=function(e){return new P(e)},P.encode=function(e,t){if(t=t||s.create(),null!=e.messages&&e.messages.length)for(var r=0;r<e.messages.length;++r)c.proto_switch.CmdMergePushRspInfo.encode(e.messages[r],t.uint32(10).fork()).ldelim();return t},P.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.proto_switch.CmdMergePushRsp;e.pos<r;){var n=e.uint32();n>>>3==1?(o.messages&&o.messages.length||(o.messages=[]),o.messages.push(c.proto_switch.CmdMergePushRspInfo.decode(e,e.uint32()))):e.skipType(7&n)}return o},P),r),c.liveroom_cs=((n={}).ReqHead=(L.prototype.room_id="",L.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,L.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,L.create=function(e){return new L(e)},L.encode=function(e,t){return t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(16).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(24).uint64(e.room_session_id),t},L.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.ReqHead;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.user_session_id=e.uint64();break;case 3:o.room_session_id=e.uint64();break;default:e.skipType(7&n)}}return o},L),n.RspHead=(N.prototype.code=0,N.prototype.message="",N.create=function(e){return new N(e)},N.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},N.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.RspHead;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;default:e.skipType(7&n)}}return o},N),n.CommonRsp=(D.prototype.rsp_head=null,D.create=function(e){return new D(e)},D.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},D.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.CommonRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},D),n.HbReq=(M.prototype.req_head=null,M.prototype.role=0,M.prototype.lv_key="",M.create=function(e){return new M(e)},M.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(16).uint32(e.role),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(26).string(e.lv_key),t},M.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.HbReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.role=e.uint32();break;case 3:o.lv_key=e.string();break;default:e.skipType(7&n)}}return o},M),n.HbRsp=(x.prototype.rsp_head=null,x.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,x.prototype.hb_interval=0,x.prototype.hb_timeout=0,x.prototype.stream_seq=0,x.prototype.user_seq=a.Long?a.Long.fromBits(0,0,!1):0,x.prototype.online_count=0,x.prototype.bigim_time_window=0,x.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,x.prototype.trans_seqs=a.emptyArray,x.prototype.user_trans_seqs=a.emptyArray,x.prototype.StreamRefresh=0,x.prototype.trans_list_seq=0,x.create=function(e){return new x(e)},x.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(16).int64(e.ret_timestamp),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(24).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(32).uint32(e.hb_timeout),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(40).uint32(e.stream_seq),null!=e.user_seq&&Object.hasOwnProperty.call(e,"user_seq")&&t.uint32(48).int64(e.user_seq),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(56).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(64).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(72).int64(e.dati_time_window),null!=e.trans_seqs&&e.trans_seqs.length)for(var r=0;r<e.trans_seqs.length;++r)c.liveroom_cs.StTransChannelSeq.encode(e.trans_seqs[r],t.uint32(82).fork()).ldelim();if(null!=e.user_trans_seqs&&e.user_trans_seqs.length)for(r=0;r<e.user_trans_seqs.length;++r)c.liveroom_cs.StTransChannelSeq.encode(e.user_trans_seqs[r],t.uint32(90).fork()).ldelim();return null!=e.StreamRefresh&&Object.hasOwnProperty.call(e,"StreamRefresh")&&t.uint32(96).uint32(e.StreamRefresh),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(104).uint32(e.trans_list_seq),t},x.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.HbRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.ret_timestamp=e.int64();break;case 3:o.hb_interval=e.uint32();break;case 4:o.hb_timeout=e.uint32();break;case 5:o.stream_seq=e.uint32();break;case 6:o.user_seq=e.int64();break;case 7:o.online_count=e.uint32();break;case 8:o.bigim_time_window=e.uint32();break;case 9:o.dati_time_window=e.int64();break;case 10:o.trans_seqs&&o.trans_seqs.length||(o.trans_seqs=[]),o.trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 11:o.user_trans_seqs&&o.user_trans_seqs.length||(o.user_trans_seqs=[]),o.user_trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 12:o.StreamRefresh=e.uint32();break;case 13:o.trans_list_seq=e.uint32();break;default:e.skipType(7&n)}}return o},x),n.StTransSeq=(B.prototype.trans_type=a.newBuffer([]),B.prototype.trans_seq=0,B.create=function(e){return new B(e)},B.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},B.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StTransSeq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_seq=e.uint32();break;default:e.skipType(7&n)}}return o},B),n.StTransChannelSeq=(U.prototype.trans_channel=a.newBuffer([]),U.prototype.trans_seq_array=a.emptyArray,U.create=function(e){return new U(e)},U.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)c.liveroom_cs.StTransSeq.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},U.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StTransChannelSeq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_channel=e.bytes();break;case 2:o.trans_seq_array&&o.trans_seq_array.length||(o.trans_seq_array=[]),o.trans_seq_array.push(c.liveroom_cs.StTransSeq.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},U),n.UserlistReq=(j.prototype.req_head=null,j.prototype.sort_type=0,j.prototype.user_index=0,j.create=function(e){return new j(e)},j.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(16).uint32(e.sort_type),null!=e.user_index&&Object.hasOwnProperty.call(e,"user_index")&&t.uint32(24).uint32(e.user_index),t},j.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.UserlistReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.sort_type=e.uint32();break;case 3:o.user_index=e.uint32();break;default:e.skipType(7&n)}}return o},j),n.UserlistRsp=(H.prototype.rsp_head=null,H.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!0):0,H.prototype.server_user_index=a.Long?a.Long.fromBits(0,0,!1):0,H.prototype.ret_user_index=a.Long?a.Long.fromBits(0,0,!1):0,H.prototype.user_basic_list=a.emptyArray,H.create=function(e){return new H(e)},H.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).uint64(e.server_user_seq),null!=e.server_user_index&&Object.hasOwnProperty.call(e,"server_user_index")&&t.uint32(24).int64(e.server_user_index),null!=e.ret_user_index&&Object.hasOwnProperty.call(e,"ret_user_index")&&t.uint32(32).int64(e.ret_user_index),null!=e.user_basic_list&&e.user_basic_list.length)for(var r=0;r<e.user_basic_list.length;++r)c.liveroom_cs.StUserBasicDef.encode(e.user_basic_list[r],t.uint32(42).fork()).ldelim();return t},H.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.UserlistRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.server_user_seq=e.uint64();break;case 3:o.server_user_index=e.int64();break;case 4:o.ret_user_index=e.int64();break;case 5:o.user_basic_list&&o.user_basic_list.length||(o.user_basic_list=[]),o.user_basic_list.push(c.liveroom_cs.StUserBasicDef.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},H),n.StUserBasicDef=(z.prototype.id_name=a.newBuffer([]),z.prototype.nick_name=a.newBuffer([]),z.prototype.role=0,z.create=function(e){return new z(e)},z.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),t},z.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StUserBasicDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;default:e.skipType(7&n)}}return o},z),n.StreamAddReq=(V.prototype.req_head=null,V.prototype.stream_id=a.newBuffer([]),V.prototype.title=a.newBuffer([]),V.prototype.stream_attr=a.newBuffer([]),V.prototype.extra_info=a.newBuffer([]),V.prototype.client_req_seq=0,V.prototype.nickname=a.newBuffer([]),V.prototype.login_mode=0,V.prototype.stream_type=0,V.prototype.third_token=a.newBuffer([]),V.create=function(e){return new V(e)},V.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(34).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(48).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(58).bytes(e.nickname),null!=e.login_mode&&Object.hasOwnProperty.call(e,"login_mode")&&t.uint32(64).uint32(e.login_mode),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(72).uint32(e.stream_type),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(82).bytes(e.third_token),t},V.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamAddReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.stream_id=e.bytes();break;case 3:o.title=e.bytes();break;case 4:o.stream_attr=e.bytes();break;case 5:o.extra_info=e.bytes();break;case 6:o.client_req_seq=e.uint32();break;case 7:o.nickname=e.bytes();break;case 8:o.login_mode=e.uint32();break;case 9:o.stream_type=e.uint32();break;case 10:o.third_token=e.bytes();break;default:e.skipType(7&n)}}return o},V),n.StreamAddRsp=(q.prototype.rsp_head=null,q.prototype.stream_seq=0,q.prototype.stream_sid="",q.prototype.stream_ver=0,q.prototype.stream_nid=0,q.prototype.token_remain_time=0,q.create=function(e){return new q(e)},q.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(26).string(e.stream_sid),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(32).uint32(e.stream_ver),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(40).uint32(e.stream_nid),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(48).uint32(e.token_remain_time),t},q.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamAddRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.stream_seq=e.uint32();break;case 3:o.stream_sid=e.string();break;case 4:o.stream_ver=e.uint32();break;case 5:o.stream_nid=e.uint32();break;case 6:o.token_remain_time=e.uint32();break;default:e.skipType(7&n)}}return o},q),n.StreamDeleteReq=(G.prototype.req_head=null,G.prototype.stream_sid="",G.prototype.stream_id=a.newBuffer([]),G.prototype.client_req_seq=0,G.create=function(e){return new G(e)},G.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(32).uint32(e.client_req_seq),t},G.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamDeleteReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.stream_sid=e.string();break;case 3:o.stream_id=e.bytes();break;case 4:o.client_req_seq=e.uint32();break;default:e.skipType(7&n)}}return o},G),n.StreamDeleteRsp=(Z.prototype.rsp_head=null,Z.prototype.stream_seq=0,Z.prototype.stream_ver=0,Z.create=function(e){return new Z(e)},Z.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},Z.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamDeleteRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.stream_seq=e.uint32();break;case 3:o.stream_ver=e.uint32();break;default:e.skipType(7&n)}}return o},Z),n.StreamUpdateReq=(F.prototype.req_head=null,F.prototype.stream_sid="",F.prototype.stream_id=a.newBuffer([]),F.prototype.title=a.newBuffer([]),F.prototype.stream_attr=a.newBuffer([]),F.prototype.extra_info=a.newBuffer([]),F.prototype.client_req_seq=0,F.prototype.nickname=a.newBuffer([]),F.create=function(e){return new F(e)},F.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(34).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(42).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(56).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(66).bytes(e.nickname),t},F.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamUpdateReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.stream_sid=e.string();break;case 3:o.stream_id=e.bytes();break;case 4:o.title=e.bytes();break;case 5:o.stream_attr=e.bytes();break;case 6:o.extra_info=e.bytes();break;case 7:o.client_req_seq=e.uint32();break;case 8:o.nickname=e.bytes();break;default:e.skipType(7&n)}}return o},F),n.StreamUpdateRsp=(W.prototype.rsp_head=null,W.prototype.stream_seq=0,W.prototype.stream_ver=0,W.create=function(e){return new W(e)},W.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},W.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamUpdateRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.stream_seq=e.uint32();break;case 3:o.stream_ver=e.uint32();break;default:e.skipType(7&n)}}return o},W),n.StreamListReq=(Y.prototype.req_head=null,Y.create=function(e){return new Y(e)},Y.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},Y.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamListReq;e.pos<r;){var n=e.uint32();n>>>3==1?o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&n)}return o},Y),n.StreamListRsp=(Q.prototype.rsp_head=null,Q.prototype.stream_seq=0,Q.prototype.stream_info=a.emptyArray,Q.prototype.stream_refresh=0,Q.prototype.stream_mix_info=a.emptyArray,Q.create=function(e){return new Q(e)},Q.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_info[r],t.uint32(26).fork()).ldelim();if(null!=e.stream_refresh&&Object.hasOwnProperty.call(e,"stream_refresh")&&t.uint32(32).uint32(e.stream_refresh),null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(42).fork()).ldelim();return t},Q.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StreamListRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.stream_seq=e.uint32();break;case 3:o.stream_info&&o.stream_info.length||(o.stream_info=[]),o.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 4:o.stream_refresh=e.uint32();break;case 5:o.stream_mix_info&&o.stream_mix_info.length||(o.stream_mix_info=[]),o.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Q),n.StStreamInfo=(K.prototype.stream_sid="",K.prototype.stream_id=a.newBuffer([]),K.prototype.id_name=a.newBuffer([]),K.prototype.nick_name=a.newBuffer([]),K.prototype.extra_info=a.newBuffer([]),K.prototype.title=a.newBuffer([]),K.prototype.stream_ver=0,K.prototype.stream_attr=a.newBuffer([]),K.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,K.prototype.stream_src=0,K.prototype.state=0,K.prototype.stream_type=0,K.prototype.stream_nid=0,K.create=function(e){return new K(e)},K.encode=function(e,t){return t=t||s.create(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(10).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(56).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(66).bytes(e.stream_attr),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(72).int64(e.create_time),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.state&&Object.hasOwnProperty.call(e,"state")&&t.uint32(88).uint32(e.state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},K.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StStreamInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.stream_sid=e.string();break;case 2:o.stream_id=e.bytes();break;case 3:o.id_name=e.bytes();break;case 4:o.nick_name=e.bytes();break;case 5:o.extra_info=e.bytes();break;case 6:o.title=e.bytes();break;case 7:o.stream_ver=e.uint32();break;case 8:o.stream_attr=e.bytes();break;case 9:o.create_time=e.int64();break;case 10:o.stream_src=e.uint32();break;case 11:o.state=e.uint32();break;case 12:o.stream_type=e.uint32();break;case 13:o.stream_nid=e.uint32();break;default:e.skipType(7&n)}}return o},K),n.StDstUser=(J.prototype.id_name=a.newBuffer([]),J.prototype.id=a.Long?a.Long.fromBits(0,0,!0):0,J.create=function(e){return new J(e)},J.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).uint64(e.id),t},J.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StDstUser;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.id=e.uint64();break;default:e.skipType(7&n)}}return o},J),n.SignalLiveReq=(X.prototype.req_head=null,X.prototype.push_message=a.newBuffer([]),X.prototype.dst_userlist=a.emptyArray,X.create=function(e){return new X(e)},X.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},X.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.push_message=e.bytes();break;case 3:o.dst_userlist&&o.dst_userlist.length||(o.dst_userlist=[]),o.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},X),n.SignalLiveRsp=($.prototype.rsp_head=null,$.create=function(e){return new $(e)},$.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},$.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},$),n.SignalLiveResultReq=(ee.prototype.req_head=null,ee.prototype.push_message=a.newBuffer([]),ee.prototype.dst_userlist=a.emptyArray,ee.create=function(e){return new ee(e)},ee.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},ee.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveResultReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.push_message=e.bytes();break;case 3:o.dst_userlist&&o.dst_userlist.length||(o.dst_userlist=[]),o.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},ee),n.SignalLiveResulRsp=(te.prototype.rsp_head=null,te.create=function(e){return new te(e)},te.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},te.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveResulRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},te),n.SignalLiveInviteReq=(re.prototype.req_head=null,re.prototype.push_message=a.newBuffer([]),re.prototype.dst_userlist=a.emptyArray,re.create=function(e){return new re(e)},re.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},re.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveInviteReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.push_message=e.bytes();break;case 3:o.dst_userlist&&o.dst_userlist.length||(o.dst_userlist=[]),o.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},re),n.SignalLiveInviteRsp=(oe.prototype.rsp_head=null,oe.create=function(e){return new oe(e)},oe.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},oe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveInviteRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},oe),n.SignalLiveStopReq=(ne.prototype.req_head=null,ne.prototype.push_message=a.newBuffer([]),ne.prototype.dst_userlist=a.emptyArray,ne.create=function(e){return new ne(e)},ne.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},ne.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveStopReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.push_message=e.bytes();break;case 3:o.dst_userlist&&o.dst_userlist.length||(o.dst_userlist=[]),o.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},ne),n.SignalLiveStopRsp=(ie.prototype.rsp_head=null,ie.create=function(e){return new ie(e)},ie.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ie.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveStopRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},ie),n.SignalLiveCustomReq=(se.prototype.req_head=null,se.prototype.push_message=a.newBuffer([]),se.prototype.dst_userlist=a.emptyArray,se.create=function(e){return new se(e)},se.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},se.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveCustomReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.push_message=e.bytes();break;case 3:o.dst_userlist&&o.dst_userlist.length||(o.dst_userlist=[]),o.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},se),n.SignalLiveCustomRsp=(ae.prototype.rsp_head=null,ae.create=function(e){return new ae(e)},ae.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ae.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.SignalLiveCustomRsp;e.pos<r;){var n=e.uint32();n>>>3==1?o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},ae),n.ImChatReq=(ce.prototype.req_head=null,ce.prototype.msg_category=0,ce.prototype.msg_type=0,ce.prototype.msg_priority=0,ce.prototype.msg_content=a.newBuffer([]),ce.prototype.dst_userlist=a.emptyArray,ce.create=function(e){return new ce(e)},ce.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(16).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(24).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(32).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(42).bytes(e.msg_content),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(50).fork()).ldelim();return t},ce.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.ImChatReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.msg_category=e.uint32();break;case 3:o.msg_type=e.uint32();break;case 4:o.msg_priority=e.uint32();break;case 5:o.msg_content=e.bytes();break;case 6:o.dst_userlist&&o.dst_userlist.length||(o.dst_userlist=[]),o.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},ce),n.ImChatRsp=(ue.prototype.rsp_head=null,ue.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,ue.create=function(e){return new ue(e)},ue.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(16).uint64(e.msg_id),t},ue.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.ImChatRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.msg_id=e.uint64();break;default:e.skipType(7&n)}}return o},ue),n.ImGethatReq=(le.prototype.req_head=null,le.prototype.msg_priority=0,le.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,le.prototype.sort_type=0,le.prototype.msg_count=0,le.create=function(e){return new le(e)},le.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(16).uint32(e.msg_priority),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(24).uint64(e.msg_id),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(32).uint32(e.sort_type),null!=e.msg_count&&Object.hasOwnProperty.call(e,"msg_count")&&t.uint32(40).uint32(e.msg_count),t},le.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.ImGethatReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.msg_priority=e.uint32();break;case 3:o.msg_id=e.uint64();break;case 4:o.sort_type=e.uint32();break;case 5:o.msg_count=e.uint32();break;default:e.skipType(7&n)}}return o},le),n.ImGetChatRsp=(de.prototype.rsp_head=null,de.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.msg_data=a.emptyArray,de.create=function(e){return new de(e)},de.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)c.liveroom_cs.StMsgData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},de.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.ImGetChatRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.server_msg_id=e.uint64();break;case 3:o.ret_msg_id=e.uint64();break;case 4:o.msg_data&&o.msg_data.length||(o.msg_data=[]),o.msg_data.push(c.liveroom_cs.StMsgData.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},de),n.StMsgData=(he.prototype.id_name=a.newBuffer([]),he.prototype.nick_name=a.newBuffer([]),he.prototype.role=0,he.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,he.prototype.msg_category=0,he.prototype.msg_type=0,he.prototype.msg_priority=0,he.prototype.msg_content=a.newBuffer([]),he.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,he.create=function(e){return new he(e)},he.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},he.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StMsgData;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;case 4:o.msg_id=e.uint64();break;case 5:o.msg_category=e.uint32();break;case 6:o.msg_type=e.uint32();break;case 7:o.msg_priority=e.uint32();break;case 8:o.msg_content=e.bytes();break;case 9:o.send_time=e.int64();break;default:e.skipType(7&n)}}return o},he),n.EnterReq=(pe.prototype.req_head=null,pe.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,pe.prototype.nick_name=a.newBuffer([]),pe.prototype.role=0,pe.prototype.net_type=0,pe.prototype.config=null,pe.prototype.lv_key="",pe.prototype.third_token=a.newBuffer([]),pe.prototype.cluster_req=a.Long?a.Long.fromBits(0,0,!0):0,pe.prototype.user_count_limit=0,pe.prototype.relate_service="",pe.prototype.conn_type=0,pe.prototype.room_name=a.newBuffer([]),pe.create=function(e){return new pe(e)},pe.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).uint32(e.net_type),null!=e.config&&Object.hasOwnProperty.call(e,"config")&&c.liveroom_cs.StConfigList.encode(e.config,t.uint32(50).fork()).ldelim(),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(58).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(66).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(72).uint64(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(80).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(90).string(e.relate_service),null!=e.conn_type&&Object.hasOwnProperty.call(e,"conn_type")&&t.uint32(96).uint32(e.conn_type),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(106).bytes(e.room_name),t},pe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.EnterReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.switch_session_id=e.uint64();break;case 3:o.nick_name=e.bytes();break;case 4:o.role=e.uint32();break;case 5:o.net_type=e.uint32();break;case 6:o.config=c.liveroom_cs.StConfigList.decode(e,e.uint32());break;case 7:o.lv_key=e.string();break;case 8:o.third_token=e.bytes();break;case 9:o.cluster_req=e.uint64();break;case 10:o.user_count_limit=e.uint32();break;case 11:o.relate_service=e.string();break;case 12:o.conn_type=e.uint32();break;case 13:o.room_name=e.bytes();break;default:e.skipType(7&n)}}return o},pe),n.EnterRsp=(fe.prototype.rsp_head=null,fe.prototype.room_id=a.newBuffer([]),fe.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.user_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,fe.prototype.bigim_time_window=0,fe.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,fe.prototype.room_id32=0,fe.prototype.hb_interval=0,fe.prototype.hb_timeout=0,fe.prototype.lv_key="",fe.prototype.zp_key="",fe.prototype.online_count=0,fe.prototype.anchor_info=null,fe.prototype.stream_seq=0,fe.prototype.stream_info=a.emptyArray,fe.prototype.stream_mix_info=a.emptyArray,fe.prototype.userlist_merge_timeout=0,fe.prototype.userlist_interval=0,fe.prototype.stream_list_push_merge_timeout=0,fe.prototype.stream_list_hb_wait_merge_time=0,fe.prototype.trans_list_seq=0,fe.prototype.trans_seqs=a.emptyArray,fe.prototype.cluster_name="",fe.prototype.token_remain_time=0,fe.prototype.stream_fetch_flag=0,fe.create=function(e){return new fe(e)},fe.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(24).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(32).uint64(e.room_session_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(40).uint64(e.user_id),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(49).fixed64(e.ret_timestamp),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(56).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(64).int64(e.dati_time_window),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(72).uint32(e.room_id32),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(80).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(88).uint32(e.hb_timeout),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(98).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(106).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(112).uint32(e.online_count),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&c.liveroom_cs.StAnchorInfo.encode(e.anchor_info,t.uint32(122).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(128).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_info[r],t.uint32(138).fork()).ldelim();if(null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(146).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(152).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(160).uint32(e.userlist_interval),null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(168).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(176).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(184).uint32(e.trans_list_seq),null!=e.trans_seqs&&e.trans_seqs.length)for(r=0;r<e.trans_seqs.length;++r)c.liveroom_cs.StTransInfo.encode(e.trans_seqs[r],t.uint32(194).fork()).ldelim();return null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(202).string(e.cluster_name),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(208).uint32(e.token_remain_time),null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(216).uint32(e.stream_fetch_flag),t},fe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.EnterRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.room_id=e.bytes();break;case 3:o.user_session_id=e.uint64();break;case 4:o.room_session_id=e.uint64();break;case 5:o.user_id=e.uint64();break;case 6:o.ret_timestamp=e.fixed64();break;case 7:o.bigim_time_window=e.uint32();break;case 8:o.dati_time_window=e.int64();break;case 9:o.room_id32=e.uint32();break;case 10:o.hb_interval=e.uint32();break;case 11:o.hb_timeout=e.uint32();break;case 12:o.lv_key=e.string();break;case 13:o.zp_key=e.string();break;case 14:o.online_count=e.uint32();break;case 15:o.anchor_info=c.liveroom_cs.StAnchorInfo.decode(e,e.uint32());break;case 16:o.stream_seq=e.uint32();break;case 17:o.stream_info&&o.stream_info.length||(o.stream_info=[]),o.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 18:o.stream_mix_info&&o.stream_mix_info.length||(o.stream_mix_info=[]),o.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 19:o.userlist_merge_timeout=e.uint32();break;case 20:o.userlist_interval=e.uint32();break;case 21:o.stream_list_push_merge_timeout=e.uint32();break;case 22:o.stream_list_hb_wait_merge_time=e.uint32();break;case 23:o.trans_list_seq=e.uint32();break;case 24:o.trans_seqs&&o.trans_seqs.length||(o.trans_seqs=[]),o.trans_seqs.push(c.liveroom_cs.StTransInfo.decode(e,e.uint32()));break;case 25:o.cluster_name=e.string();break;case 26:o.token_remain_time=e.uint32();break;case 27:o.stream_fetch_flag=e.uint32();break;default:e.skipType(7&n)}}return o},fe),n.StAnchorInfo=(_e.prototype.anchor_id_name=a.newBuffer([]),_e.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,_e.prototype.anchor_nick_name=a.newBuffer([]),_e.create=function(e){return new _e(e)},_e.encode=function(e,t){return t=t||s.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},_e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StAnchorInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.anchor_id_name=e.bytes();break;case 2:o.anchor_id=e.uint64();break;case 3:o.anchor_nick_name=e.bytes();break;default:e.skipType(7&n)}}return o},_e),n.QuitReq=(ge.prototype.req_head=null,ge.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,ge.prototype.room_id32=0,ge.prototype.nick_name=a.newBuffer([]),ge.prototype.role=0,ge.prototype.net_type=0,ge.prototype.config_list=null,ge.create=function(e){return new ge(e)},ge.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(48).uint32(e.net_type),null!=e.config_list&&Object.hasOwnProperty.call(e,"config_list")&&c.liveroom_cs.StConfigList.encode(e.config_list,t.uint32(58).fork()).ldelim(),t},ge.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.QuitReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.switch_session_id=e.uint64();break;case 3:o.room_id32=e.uint32();break;case 4:o.nick_name=e.bytes();break;case 5:o.role=e.uint32();break;case 6:o.net_type=e.uint32();break;case 7:o.config_list=c.liveroom_cs.StConfigList.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},ge),n.StConfigList=(me.prototype.room_create_flag=0,me.prototype.user_state_flag=0,me.create=function(e){return new me(e)},me.encode=function(e,t){return t=t||s.create(),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(8).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(16).uint32(e.user_state_flag),t},me.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StConfigList;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_create_flag=e.uint32();break;case 2:o.user_state_flag=e.uint32();break;default:e.skipType(7&n)}}return o},me),n.QuitRsp=(ve.prototype.rsp_head=null,ve.prototype.room_id=a.newBuffer([]),ve.prototype.room_id32=0,ve.create=function(e){return new ve(e)},ve.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),t},ve.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.QuitRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.room_id=e.bytes();break;case 3:o.room_id32=e.uint32();break;default:e.skipType(7&n)}}return o},ve),n.RoomListReq=(ye.prototype.req_head=null,ye.create=function(e){return new ye(e)},ye.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},ye.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.RoomListReq;e.pos<r;){var n=e.uint32();n>>>3==1?o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&n)}return o},ye),n.RoomListRsp=(be.prototype.rsp_head=null,be.prototype.room_list=a.emptyArray,be.create=function(e){return new be(e)},be.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_list&&e.room_list.length)for(var r=0;r<e.room_list.length;++r)c.liveroom_cs.StRoomListRoom.encode(e.room_list[r],t.uint32(18).fork()).ldelim();return t},be.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.RoomListRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.room_list&&o.room_list.length||(o.room_list=[]),o.room_list.push(c.liveroom_cs.StRoomListRoom.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},be),n.StRoomListStream=(Se.prototype.stream_id=a.newBuffer([]),Se.create=function(e){return new Se(e)},Se.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),t},Se.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StRoomListStream;e.pos<r;){var n=e.uint32();n>>>3==1?o.stream_id=e.bytes():e.skipType(7&n)}return o},Se),n.StRoomListRoom=(Ee.prototype.room_id=a.newBuffer([]),Ee.prototype.room_name=a.newBuffer([]),Ee.prototype.anchor_id_name=a.newBuffer([]),Ee.prototype.anchor_nick_name=a.newBuffer([]),Ee.prototype.stream_list=a.emptyArray,Ee.create=function(e){return new Ee(e)},Ee.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(18).bytes(e.room_name),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(26).bytes(e.anchor_id_name),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(34).bytes(e.anchor_nick_name),null!=e.stream_list&&e.stream_list.length)for(var r=0;r<e.stream_list.length;++r)c.liveroom_cs.StRoomListStream.encode(e.stream_list[r],t.uint32(42).fork()).ldelim();return t},Ee.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StRoomListRoom;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.bytes();break;case 2:o.room_name=e.bytes();break;case 3:o.anchor_id_name=e.bytes();break;case 4:o.anchor_nick_name=e.bytes();break;case 5:o.stream_list&&o.stream_list.length||(o.stream_list=[]),o.stream_list.push(c.liveroom_cs.StRoomListStream.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Ee),n.StTransSeqInfo=(Te.prototype.trans_type=a.newBuffer([]),Te.prototype.trans_seq=0,Te.create=function(e){return new Te(e)},Te.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},Te.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StTransSeqInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_seq=e.uint32();break;default:e.skipType(7&n)}}return o},Te),n.StTransInfo=(we.prototype.trans_channel=a.newBuffer([]),we.prototype.trans_seq_array=a.emptyArray,we.create=function(e){return new we(e)},we.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)c.liveroom_cs.StTransSeqInfo.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},we.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StTransInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_channel=e.bytes();break;case 2:o.trans_seq_array&&o.trans_seq_array.length||(o.trans_seq_array=[]),o.trans_seq_array.push(c.liveroom_cs.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},we),n.TransReq=(Ce.prototype.req_head=null,Ce.prototype.nick_name=a.newBuffer([]),Ce.prototype.role=0,Ce.prototype.trans_type=a.newBuffer([]),Ce.prototype.trans_data=a.newBuffer([]),Ce.prototype.trans_local_seq=0,Ce.prototype.trans_channel=a.newBuffer([]),Ce.create=function(e){return new Ce(e)},Ce.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(34).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(42).bytes(e.trans_data),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(48).uint32(e.trans_local_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(58).bytes(e.trans_channel),t},Ce.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.TransReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;case 4:o.trans_type=e.bytes();break;case 5:o.trans_data=e.bytes();break;case 6:o.trans_local_seq=e.uint32();break;case 7:o.trans_channel=e.bytes();break;default:e.skipType(7&n)}}return o},Ce),n.TransRsp=(Ie.prototype.rsp_head=null,Ie.prototype.trans_type=a.newBuffer([]),Ie.prototype.trans_seq=0,Ie.prototype.trans_list_seq=0,Ie.prototype.trans_channel=a.newBuffer([]),Ie.create=function(e){return new Ie(e)},Ie.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(18).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(42).bytes(e.trans_channel),t},Ie.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.TransRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.trans_type=e.bytes();break;case 3:o.trans_seq=e.uint32();break;case 4:o.trans_list_seq=e.uint32();break;case 5:o.trans_channel=e.bytes();break;default:e.skipType(7&n)}}return o},Ie),n.TransFetchReq=(Oe.prototype.req_head=null,Oe.prototype.trans_channel=a.newBuffer([]),Oe.prototype.fetch_array=a.emptyArray,Oe.create=function(e){return new Oe(e)},Oe.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var r=0;r<e.fetch_array.length;++r)c.liveroom_cs.StTransFetch.encode(e.fetch_array[r],t.uint32(26).fork()).ldelim();return t},Oe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.TransFetchReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.trans_channel=e.bytes();break;case 3:o.fetch_array&&o.fetch_array.length||(o.fetch_array=[]),o.fetch_array.push(c.liveroom_cs.StTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Oe),n.StTransFetch=(ke.prototype.trans_type=a.newBuffer([]),ke.prototype.trans_local_seq=0,ke.create=function(e){return new ke(e)},ke.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},ke.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StTransFetch;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_local_seq=e.uint32();break;default:e.skipType(7&n)}}return o},ke),n.TransFetchRsp=(Re.prototype.rsp_head=null,Re.prototype.trans_channel=a.newBuffer([]),Re.prototype.trans_fetch_results=a.emptyArray,Re.prototype.trans_list_seq=0,Re.create=function(e){return new Re(e)},Re.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var r=0;r<e.trans_fetch_results.length;++r)c.liveroom_cs.TransFetchResult.encode(e.trans_fetch_results[r],t.uint32(26).fork()).ldelim();return null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),t},Re.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.TransFetchRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.trans_channel=e.bytes();break;case 3:o.trans_fetch_results&&o.trans_fetch_results.length||(o.trans_fetch_results=[]),o.trans_fetch_results.push(c.liveroom_cs.TransFetchResult.decode(e,e.uint32()));break;case 4:o.trans_list_seq=e.uint32();break;default:e.skipType(7&n)}}return o},Re),n.TransFetchResult=(Ae.prototype.trans_type=a.newBuffer([]),Ae.prototype.trans_data=a.newBuffer([]),Ae.prototype.trans_idname=a.newBuffer([]),Ae.prototype.trans_nickname=a.newBuffer([]),Ae.prototype.trans_role=0,Ae.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,Ae.prototype.trans_seq=0,Ae.prototype.err_code=0,Ae.create=function(e){return new Ae(e)},Ae.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},Ae.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.TransFetchResult;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_data=e.bytes();break;case 3:o.trans_idname=e.bytes();break;case 4:o.trans_nickname=e.bytes();break;case 5:o.trans_role=e.uint32();break;case 6:o.trans_send_time=e.int64();break;case 7:o.trans_seq=e.uint32();break;case 8:o.err_code=e.int32();break;default:e.skipType(7&n)}}return o},Ae),n.UserTransFetchReq=(Pe.prototype.req_head=null,Pe.prototype.nick_name=a.newBuffer([]),Pe.prototype.role=0,Pe.prototype.trans_channel=a.newBuffer([]),Pe.prototype.fetch_array=a.emptyArray,Pe.create=function(e){return new Pe(e)},Pe.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(34).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var r=0;r<e.fetch_array.length;++r)c.liveroom_cs.StUserTransFetch.encode(e.fetch_array[r],t.uint32(42).fork()).ldelim();return t},Pe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.UserTransFetchReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;case 4:o.trans_channel=e.bytes();break;case 5:o.fetch_array&&o.fetch_array.length||(o.fetch_array=[]),o.fetch_array.push(c.liveroom_cs.StUserTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Pe),n.StUserTransFetch=(Le.prototype.trans_type=a.newBuffer([]),Le.prototype.trans_local_seq=0,Le.create=function(e){return new Le(e)},Le.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},Le.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StUserTransFetch;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_local_seq=e.uint32();break;default:e.skipType(7&n)}}return o},Le),n.UserTransFetchRsp=(Ne.prototype.rsp_head=null,Ne.prototype.trans_channel=a.newBuffer([]),Ne.prototype.trans_fetch_results=a.emptyArray,Ne.create=function(e){return new Ne(e)},Ne.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var r=0;r<e.trans_fetch_results.length;++r)c.liveroom_cs.StUserTransFetchResult.encode(e.trans_fetch_results[r],t.uint32(26).fork()).ldelim();return t},Ne.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.UserTransFetchRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.trans_channel=e.bytes();break;case 3:o.trans_fetch_results&&o.trans_fetch_results.length||(o.trans_fetch_results=[]),o.trans_fetch_results.push(c.liveroom_cs.StUserTransFetchResult.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Ne),n.StUserTransFetchResult=(De.prototype.trans_type=a.newBuffer([]),De.prototype.trans_data=a.newBuffer([]),De.prototype.trans_idname=a.newBuffer([]),De.prototype.trans_nickname=a.newBuffer([]),De.prototype.trans_role=0,De.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,De.prototype.trans_seq=0,De.prototype.err_code=0,De.create=function(e){return new De(e)},De.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},De.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StUserTransFetchResult;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_data=e.bytes();break;case 3:o.trans_idname=e.bytes();break;case 4:o.trans_nickname=e.bytes();break;case 5:o.trans_role=e.uint32();break;case 6:o.trans_send_time=e.int64();break;case 7:o.trans_seq=e.uint32();break;case 8:o.err_code=e.int32();break;default:e.skipType(7&n)}}return o},De),n.BigimChatReq=(Me.prototype.req_head=null,Me.prototype.nick_name=a.newBuffer([]),Me.prototype.role=0,Me.prototype.msgs=a.emptyArray,Me.create=function(e){return new Me(e)},Me.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msgs&&e.msgs.length)for(var r=0;r<e.msgs.length;++r)c.liveroom_cs.StBigimChatData.encode(e.msgs[r],t.uint32(34).fork()).ldelim();return t},Me.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.BigimChatReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;case 4:o.msgs&&o.msgs.length||(o.msgs=[]),o.msgs.push(c.liveroom_cs.StBigimChatData.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Me),n.StBigimChatData=(xe.prototype.msg_category=0,xe.prototype.msg_type=0,xe.prototype.msg_content=a.newBuffer([]),xe.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,xe.prototype.bigmsg_client_id=a.newBuffer([]),xe.create=function(e){return new xe(e)},xe.encode=function(e,t){return t=t||s.create(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(8).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(16).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(26).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(32).int64(e.msg_timestamp),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(42).bytes(e.bigmsg_client_id),t},xe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StBigimChatData;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_category=e.uint32();break;case 2:o.msg_type=e.uint32();break;case 3:o.msg_content=e.bytes();break;case 4:o.msg_timestamp=e.int64();break;case 5:o.bigmsg_client_id=e.bytes();break;default:e.skipType(7&n)}}return o},xe),n.BigimChatRsp=(Be.prototype.rsp_head=null,Be.prototype.bigim_time_window=0,Be.prototype.msgs=a.emptyArray,Be.create=function(e){return new Be(e)},Be.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(16).uint32(e.bigim_time_window),null!=e.msgs&&e.msgs.length)for(var r=0;r<e.msgs.length;++r)c.liveroom_cs.StBigimChatRspData.encode(e.msgs[r],t.uint32(26).fork()).ldelim();return t},Be.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.BigimChatRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.bigim_time_window=e.uint32();break;case 3:o.msgs&&o.msgs.length||(o.msgs=[]),o.msgs.push(c.liveroom_cs.StBigimChatRspData.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Be),n.StBigimChatRspData=(Ue.prototype.bigmsg_id=a.newBuffer([]),Ue.prototype.bigmsg_client_id=a.newBuffer([]),Ue.create=function(e){return new Ue(e)},Ue.encode=function(e,t){return t=t||s.create(),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(10).bytes(e.bigmsg_id),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(18).bytes(e.bigmsg_client_id),t},Ue.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StBigimChatRspData;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.bigmsg_id=e.bytes();break;case 2:o.bigmsg_client_id=e.bytes();break;default:e.skipType(7&n)}}return o},Ue),n.RelayReq=(je.prototype.req_head=null,je.prototype.nick_name=a.newBuffer([]),je.prototype.role=0,je.prototype.relay_type=a.newBuffer([]),je.prototype.relay_data=a.newBuffer([]),je.create=function(e){return new je(e)},je.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.relay_type&&Object.hasOwnProperty.call(e,"relay_type")&&t.uint32(34).bytes(e.relay_type),null!=e.relay_data&&Object.hasOwnProperty.call(e,"relay_data")&&t.uint32(42).bytes(e.relay_data),t},je.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.RelayReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;case 4:o.relay_type=e.bytes();break;case 5:o.relay_data=e.bytes();break;default:e.skipType(7&n)}}return o},je),n.RelayRsp=(He.prototype.rsp_head=null,He.prototype.reley_type=a.newBuffer([]),He.prototype.relay_result=a.newBuffer([]),He.create=function(e){return new He(e)},He.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.reley_type&&Object.hasOwnProperty.call(e,"reley_type")&&t.uint32(18).bytes(e.reley_type),null!=e.relay_result&&Object.hasOwnProperty.call(e,"relay_result")&&t.uint32(26).bytes(e.relay_result),t},He.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.RelayRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.reley_type=e.bytes();break;case 3:o.relay_result=e.bytes();break;default:e.skipType(7&n)}}return o},He),n.RenewTokenReq=(ze.prototype.req_head=null,ze.prototype.token="",ze.create=function(e){return new ze(e)},ze.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),t},ze.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.RenewTokenReq;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:o.token=e.string();break;default:e.skipType(7&n)}}return o},ze),n.RenewTokenRsp=(Ve.prototype.rsp_head=null,Ve.prototype.token_remain_time=0,Ve.create=function(e){return new Ve(e)},Ve.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(16).uint32(e.token_remain_time),t},Ve.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.RenewTokenRsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:o.token_remain_time=e.uint32();break;default:e.skipType(7&n)}}return o},Ve),n.UserAction=(qe.prototype.action=0,qe.prototype.id_name=a.newBuffer([]),qe.prototype.nick_name=a.newBuffer([]),qe.prototype.role=0,qe.prototype.login_time=a.Long?a.Long.fromBits(0,0,!1):0,qe.create=function(e){return new qe(e)},qe.encode=function(e,t){return t=t||s.create(),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).uint32(e.action),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.login_time&&Object.hasOwnProperty.call(e,"login_time")&&t.uint32(40).int64(e.login_time),t},qe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.UserAction;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.action=e.uint32();break;case 2:o.id_name=e.bytes();break;case 3:o.nick_name=e.bytes();break;case 4:o.role=e.uint32();break;case 5:o.login_time=e.int64();break;default:e.skipType(7&n)}}return o},qe),n.PushUserInfoUpdated=(Ge.prototype.room_id=a.newBuffer([]),Ge.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!1):0,Ge.prototype.user_list=a.emptyArray,Ge.create=function(e){return new Ge(e)},Ge.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).int64(e.server_user_seq),null!=e.user_list&&e.user_list.length)for(var r=0;r<e.user_list.length;++r)c.liveroom_cs.UserAction.encode(e.user_list[r],t.uint32(26).fork()).ldelim();return t},Ge.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushUserInfoUpdated;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.bytes();break;case 2:o.server_user_seq=e.int64();break;case 3:o.user_list&&o.user_list.length||(o.user_list=[]),o.user_list.push(c.liveroom_cs.UserAction.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Ge),n.PushUserKickout=(Ze.prototype.id_name=a.newBuffer([]),Ze.prototype.room_id=a.newBuffer([]),Ze.prototype.session_id=a.Long?a.Long.fromBits(0,0,!0):0,Ze.prototype.kickout_reason=0,Ze.prototype.custom_reason=a.newBuffer([]),Ze.create=function(e){return new Ze(e)},Ze.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(24).uint64(e.session_id),null!=e.kickout_reason&&Object.hasOwnProperty.call(e,"kickout_reason")&&t.uint32(32).int32(e.kickout_reason),null!=e.custom_reason&&Object.hasOwnProperty.call(e,"custom_reason")&&t.uint32(42).bytes(e.custom_reason),t},Ze.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushUserKickout;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.room_id=e.bytes();break;case 3:o.session_id=e.uint64();break;case 4:o.kickout_reason=e.int32();break;case 5:o.custom_reason=e.bytes();break;default:e.skipType(7&n)}}return o},Ze),n.PushUserLogReport=(Fe.create=function(e){return new Fe(e)},Fe.encode=function(e,t){return t||s.create()},Fe.decode=function(e,t){e instanceof i||(e=i.create(e));var r=void 0===t?e.len:e.pos+t;for(t=new c.liveroom_cs.PushUserLogReport;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return t},Fe),n.PushUserTokenExpire=(We.prototype.room_id=a.newBuffer([]),We.prototype.token="",We.prototype.stop_stream=null,We.create=function(e){return new We(e)},We.encode=function(e,t){return t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),null!=e.stop_stream&&Object.hasOwnProperty.call(e,"stop_stream")&&c.liveroom_cs.StopStream.encode(e.stop_stream,t.uint32(26).fork()).ldelim(),t},We.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushUserTokenExpire;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.bytes();break;case 2:o.token=e.string();break;case 3:o.stop_stream=c.liveroom_cs.StopStream.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},We),n.StopStream=(Ye.prototype.stream_id_list=a.emptyArray,Ye.create=function(e){return new Ye(e)},Ye.encode=function(e,t){if(t=t||s.create(),null!=e.stream_id_list&&e.stream_id_list.length)for(var r=0;r<e.stream_id_list.length;++r)t.uint32(10).bytes(e.stream_id_list[r]);return t},Ye.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StopStream;e.pos<r;){var n=e.uint32();n>>>3==1?(o.stream_id_list&&o.stream_id_list.length||(o.stream_id_list=[]),o.stream_id_list.push(e.bytes())):e.skipType(7&n)}return o},Ye),n.PushStream=(Qe.prototype.room_id=a.newBuffer([]),Qe.prototype.stream_seq=0,Qe.prototype.stream_info=a.emptyArray,Qe.create=function(e){return new Qe(e)},Qe.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.liveroom_cs.StPushStreamInfo.encode(e.stream_info[r],t.uint32(26).fork()).ldelim();return t},Qe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushStream;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.bytes();break;case 2:o.stream_seq=e.uint32();break;case 3:o.stream_info&&o.stream_info.length||(o.stream_info=[]),o.stream_info.push(c.liveroom_cs.StPushStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Qe),n.StPushStreamInfo=(Ke.prototype.stream_id=a.newBuffer([]),Ke.prototype.stream_sid="",Ke.prototype.id_name=a.newBuffer([]),Ke.prototype.nick_name=a.newBuffer([]),Ke.prototype.extra_info=a.newBuffer([]),Ke.prototype.title=a.newBuffer([]),Ke.prototype.third_define_data=a.newBuffer([]),Ke.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,Ke.prototype.req_seq=0,Ke.prototype.stream_ver=0,Ke.prototype.stream_attr=a.newBuffer([]),Ke.prototype.stream_src=0,Ke.prototype.stream_state=0,Ke.prototype.stream_type=0,Ke.prototype.stream_nid=0,Ke.prototype.close_type=0,Ke.create=function(e){return new Ke(e)},Ke.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.third_define_data&&Object.hasOwnProperty.call(e,"third_define_data")&&t.uint32(58).bytes(e.third_define_data),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(64).int64(e.create_time),null!=e.req_seq&&Object.hasOwnProperty.call(e,"req_seq")&&t.uint32(72).uint32(e.req_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(80).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(90).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(96).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(104).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(112).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(120).uint32(e.stream_nid),null!=e.close_type&&Object.hasOwnProperty.call(e,"close_type")&&t.uint32(128).uint32(e.close_type),t},Ke.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StPushStreamInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.stream_id=e.bytes();break;case 2:o.stream_sid=e.string();break;case 3:o.id_name=e.bytes();break;case 4:o.nick_name=e.bytes();break;case 5:o.extra_info=e.bytes();break;case 6:o.title=e.bytes();break;case 7:o.third_define_data=e.bytes();break;case 8:o.create_time=e.int64();break;case 9:o.req_seq=e.uint32();break;case 10:o.stream_ver=e.uint32();break;case 11:o.stream_attr=e.bytes();break;case 12:o.stream_src=e.uint32();break;case 13:o.stream_state=e.uint32();break;case 14:o.stream_type=e.uint32();break;case 15:o.stream_nid=e.uint32();break;case 16:o.close_type=e.uint32();break;default:e.skipType(7&n)}}return o},Ke),n.PushImChat=(Je.prototype.room_id=a.newBuffer([]),Je.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Je.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Je.prototype.msg_data=a.emptyArray,Je.create=function(e){return new Je(e)},Je.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)c.liveroom_cs.StImChatData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},Je.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushImChat;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.bytes();break;case 2:o.server_msg_id=e.uint64();break;case 3:o.ret_msg_id=e.uint64();break;case 4:o.msg_data&&o.msg_data.length||(o.msg_data=[]),o.msg_data.push(c.liveroom_cs.StImChatData.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Je),n.StImChatData=(Xe.prototype.id_name=a.newBuffer([]),Xe.prototype.nick_name=a.newBuffer([]),Xe.prototype.role=0,Xe.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Xe.prototype.msg_category=0,Xe.prototype.msg_type=0,Xe.prototype.msg_priority=0,Xe.prototype.msg_content=a.newBuffer([]),Xe.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,Xe.create=function(e){return new Xe(e)},Xe.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},Xe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StImChatData;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;case 4:o.msg_id=e.uint64();break;case 5:o.msg_category=e.uint32();break;case 6:o.msg_type=e.uint32();break;case 7:o.msg_priority=e.uint32();break;case 8:o.msg_content=e.bytes();break;case 9:o.send_time=e.int64();break;default:e.skipType(7&n)}}return o},Xe),n.PushBigImChat=($e.prototype.app_id=0,$e.prototype.room_id=a.newBuffer([]),$e.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,$e.prototype.msg_data=a.emptyArray,$e.create=function(e){return new $e(e)},$e.encode=function(e,t){if(t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)c.liveroom_cs.StBigImChatData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},$e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushBigImChat;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.app_id=e.uint32();break;case 2:o.room_id=e.bytes();break;case 3:o.timestamp=e.int64();break;case 4:o.msg_data&&o.msg_data.length||(o.msg_data=[]),o.msg_data.push(c.liveroom_cs.StBigImChatData.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},$e),n.StBigImChatData=(et.prototype.id_name=a.newBuffer([]),et.prototype.nick_name=a.newBuffer([]),et.prototype.role=0,et.prototype.bigmsg_id=a.newBuffer([]),et.prototype.msg_category=0,et.prototype.msg_type=0,et.prototype.msg_content=a.newBuffer([]),et.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,et.create=function(e){return new et(e)},et.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(34).bytes(e.bigmsg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(58).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(64).int64(e.msg_timestamp),t},et.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StBigImChatData;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.nick_name=e.bytes();break;case 3:o.role=e.uint32();break;case 4:o.bigmsg_id=e.bytes();break;case 5:o.msg_category=e.uint32();break;case 6:o.msg_type=e.uint32();break;case 7:o.msg_content=e.bytes();break;case 8:o.msg_timestamp=e.int64();break;default:e.skipType(7&n)}}return o},et),n.PushTrans=(tt.prototype.app_id=0,tt.prototype.room_id=a.newBuffer([]),tt.prototype.trans_idname=a.newBuffer([]),tt.prototype.trans_nickname=a.newBuffer([]),tt.prototype.trans_role=0,tt.prototype.trans_type=a.newBuffer([]),tt.prototype.trans_data=a.newBuffer([]),tt.prototype.trans_seq=0,tt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,tt.prototype.trans_channel=a.newBuffer([]),tt.prototype.trans_list_seq=0,tt.create=function(e){return new tt(e)},tt.encode=function(e,t){return t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(50).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(58).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(64).uint32(e.trans_seq),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(88).uint32(e.trans_list_seq),t},tt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushTrans;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.app_id=e.uint32();break;case 2:o.room_id=e.bytes();break;case 3:o.trans_idname=e.bytes();break;case 4:o.trans_nickname=e.bytes();break;case 5:o.trans_role=e.uint32();break;case 6:o.trans_type=e.bytes();break;case 7:o.trans_data=e.bytes();break;case 8:o.trans_seq=e.uint32();break;case 9:o.trans_send_time=e.int64();break;case 10:o.trans_channel=e.bytes();break;case 11:o.trans_list_seq=e.uint32();break;default:e.skipType(7&n)}}return o},tt),n.PushUserTrans=(rt.prototype.app_id=0,rt.prototype.room_id=a.newBuffer([]),rt.prototype.trans_idname=a.newBuffer([]),rt.prototype.trans_nickname=a.newBuffer([]),rt.prototype.trans_role=0,rt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,rt.prototype.trans_channel=a.newBuffer([]),rt.prototype.trans_array=a.emptyArray,rt.create=function(e){return new rt(e)},rt.encode=function(e,t){if(t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_array&&e.trans_array.length)for(var r=0;r<e.trans_array.length;++r)c.liveroom_cs.StTransSimple.encode(e.trans_array[r],t.uint32(90).fork()).ldelim();return t},rt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.PushUserTrans;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.app_id=e.uint32();break;case 2:o.room_id=e.bytes();break;case 3:o.trans_idname=e.bytes();break;case 4:o.trans_nickname=e.bytes();break;case 5:o.trans_role=e.uint32();break;case 9:o.trans_send_time=e.int64();break;case 10:o.trans_channel=e.bytes();break;case 11:o.trans_array&&o.trans_array.length||(o.trans_array=[]),o.trans_array.push(c.liveroom_cs.StTransSimple.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},rt),n.StTransSimple=(ot.prototype.trans_type=a.newBuffer([]),ot.prototype.trans_data=a.newBuffer([]),ot.prototype.trans_seq=0,ot.create=function(e){return new ot(e)},ot.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),t},ot.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new c.liveroom_cs.StTransSimple;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.trans_type=e.bytes();break;case 2:o.trans_data=e.bytes();break;case 3:o.trans_seq=e.uint32();break;default:e.skipType(7&n)}}return o},ot),n),e.exports=c},function(e,t,r){var o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function o(e){return!0===(e&&e.__isLong__)}function n(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var i={},s={};function a(e,t){var r,o,n;return t?(n=0<=(e>>>=0)&&e<256)&&(o=s[e])?o:(r=u(e,0,!0),n&&(s[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(o=i[e])?o:(r=u(e,e<0?-1:0,!1),n&&(i[e]=r),r)}function c(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(f<=e)return T}else{if(e<=-_)return w;if(_<=e+1)return E}return e<0?c(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,o){return new r(e,t,o)}r.fromInt=a,r.fromNumber=c,r.fromBits=u;var l=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(r=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:m;if((r=r||10)<2||36<r)throw RangeError("radix");var o;if(0<(o=e.indexOf("-")))throw Error("interior hyphen");if(0===o)return d(e.substring(1),t,r).neg();for(var n=c(l(r,8)),i=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);i=a<8?(a=c(l(r,a)),i.mul(a).add(c(u))):(i=i.mul(n)).add(c(u))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,_=f/2,g=a(1<<24),m=a(0),v=(r.ZERO=m,a(0,!0)),y=(r.UZERO=v,a(1)),b=(r.ONE=y,a(1,!0)),S=(r.UONE=b,a(-1)),E=(r.NEG_ONE=S,u(-1,2147483647,!1)),T=(r.MAX_VALUE=E,u(-1,-1,!0)),w=(r.MAX_UNSIGNED_VALUE=T,u(0,-2147483648,!1)),C=(r.MIN_VALUE=w,r.prototype);return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,r;if(this.isNegative())return this.eq(w)?(r=c(e),r=(t=this.div(r)).mul(r).sub(this),t.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(var o=c(l(e,6),this.unsigned),n=this,i="";;){var s=n.div(o),a=(n.sub(s.mul(o)).toInt()>>>0).toString(e);if((n=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||0<=this.high},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return o(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return 0<this.comp(e)},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return 0<=this.comp(e)},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(o(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(y)},C.neg=C.negate,C.add=function(e){o(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,d=0,p=0,f=0;return d+=(p=p+((f+=i+(65535&e.low))>>>16)+(n+c))>>>16,u((p&=65535)<<16|(f&=65535),((l+=(d+=r+a)>>>16)+(t+s)&65535)<<16|(d&=65535),this.unsigned)},C.subtract=function(e){return o(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return this;if(o(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:m;if(this.eq(w))return e.isOdd()?w:m;if(e.eq(w))return this.isOdd()?w:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,d=e.low>>>16,p=0,f=0,_=0,y=(y=0)+((f=f+((_+=s*(e=65535&e.low))>>>16)+i*e)>>>16)+((f=(65535&f)+s*d)>>>16);return u((f&=65535)<<16|(_&=65535),((p+=(y+=n*e)>>>16)+((y=(65535&y)+i*d)>>>16)+((y=(65535&y)+s*l)>>>16)+(r*e+n*d+i*l+s*a)&65535)<<16|(y&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if((e=o(e)?e:h(e)).isZero())throw Error("division by zero");var r,n,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return v;if(e.gt(this.shru(1)))return b;n=v}else{if(this.eq(w))return e.eq(y)||e.eq(S)?w:e.eq(w)?y:(i=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:S:(r=this.sub(e.mul(i)),i.add(r.div(e)));if(e.eq(w))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=m}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:l(2,s-48),d=c(i),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=c(i-=a,this.unsigned)).mul(e);d.isZero()&&(d=y),n=n.add(d),r=r.sub(p)}return n},C.div=C.divide,C.modulo=function(e){return o(e)||(e=h(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?n(this.low):n(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(e){return o(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return o(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return o(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(e){var t;return o(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):u(this.high<<(e-=32)|this.low>>>(t=32-e),this.low<<e|this.high>>>t,this.unsigned)},C.rotl=C.rotateLeft,C.rotateRight=function(e){var t;return o(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):u(this.low<<(t=32-(e-=32))|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,o){return o?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=r,"default"in e?e.default:e}({});void 0!==(t=function(){return o}.apply(t,[]))&&(e.exports=t)},function(e,t,r){(function(t){var o;e.exports=(o=function(e){var o;if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),"undefined"!=typeof self&&self.crypto&&(o=self.crypto),!(o=!(o=!(o="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:o)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:o)&&void 0!==t&&t.crypto?t.crypto:o))try{o=r(17)}catch(s){}var n=Object.create||function(e){return i.prototype=e,e=new i,i.prototype=null,e};function i(){}var s={},a=s.lib={},c=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(var a=0;a<n;a+=4)t[o+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new u.init(t,e)}}),l=s.enc={},d=l.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new u.init(r,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new u.init(r,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,o=this._data,n=o.words,i=o.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s;if(t=e.min(4*c,i),c){for(var l=0;l<c;l+=s)this._doProcessBlock(n,l);r=n.splice(0,c),o.sigBytes-=t}return new u.init(r,t)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),_=(a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new _.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math),o)}).call(this,r(12))},function(e,t,r){e.exports=function(e){for(var t=e,r=t.lib.BlockCipher,o=t.algo,n=[],i=[],s=[],a=[],c=[],u=[],l=[],d=[],h=[],p=[],f=[],_=0;_<256;_++)f[_]=_<128?_<<1:_<<1^283;var g=0,m=0;for(_=0;_<256;_++){var v=m^m<<1^m<<2^m<<3^m<<4;v=v>>>8^255&v^99,n[g]=v,i[v]=g;var y=f[g],b=f[y],S=f[b],E=257*f[v]^16843008*v;s[g]=E<<24|E>>>8,a[g]=E<<16|E>>>16,c[g]=E<<8|E>>>24,u[g]=E,E=16843009*S^65537*b^257*y^16843008*g,l[v]=E<<24|E>>>8,d[v]=E<<16|E>>>16,h[v]=E<<8|E>>>24,p[v]=E,g?(g=y^f[f[f[S^y]]],m^=f[f[m]]):g=m=1}var T=[0,1,2,4,8,16,32,64,128,27,54],w=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,o=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],s=0;s<o;s++)s<r?i[s]=t[s]:(u=i[s-1],s%r?r>6&&s%r==4&&(u=n[u>>>24]<<24|n[u>>>16&255]<<16|n[u>>>8&255]<<8|n[255&u]):(u=n[(u=u<<8|u>>>24)>>>24]<<24|n[u>>>16&255]<<16|n[u>>>8&255]<<8|n[255&u],u^=T[s/r|0]<<24),i[s]=i[s-r]^u);for(var a=this._invKeySchedule=[],c=0;c<o;c++){if(s=o-c,c%4)var u=i[s];else u=i[s-4];a[c]=c<4||s<=4?u:l[n[u>>>24]]^d[n[u>>>16&255]]^h[n[u>>>8&255]]^p[n[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,d,h,p,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,o,n,i,s,a){for(var c=this._nRounds,u=e[t]^r[0],l=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<c;f++){var _=o[u>>>24]^n[l>>>16&255]^i[d>>>8&255]^s[255&h]^r[p++],g=o[l>>>24]^n[d>>>16&255]^i[h>>>8&255]^s[255&u]^r[p++],m=o[d>>>24]^n[h>>>16&255]^i[u>>>8&255]^s[255&l]^r[p++],v=o[h>>>24]^n[u>>>16&255]^i[l>>>8&255]^s[255&d]^r[p++];u=_,l=g,d=m,h=v}_=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[p++],g=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^r[p++],m=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^r[p++],v=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^r[p++],e[t]=_,e[t+1]=g,e[t+2]=m,e[t+3]=v},keySize:8});return t.AES=r._createHelper(w),e.AES}(r(2),(r(18),r(4),r(13),r(21)))},function(e,t,r){e.exports=function(e){for(var t=Math,r=e,o=r.lib,n=o.WordArray,i=o.Hasher,s=r.algo,a=[],c=0;c<64;c++)a[c]=4294967296*t.abs(t.sin(c+1))|0;var u=s.MD5=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var o=t+r,n=e[o];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],u=e[t+2],f=e[t+3],_=e[t+4],g=e[t+5],m=e[t+6],v=e[t+7],y=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],T=e[t+12],w=e[t+13],C=e[t+14],I=e[t+15],O=i[0],k=i[1],R=i[2],A=i[3];O=l(O,k,R,A,s,7,a[0]),A=l(A,O,k,R,c,12,a[1]),R=l(R,A,O,k,u,17,a[2]),k=l(k,R,A,O,f,22,a[3]),O=l(O,k,R,A,_,7,a[4]),A=l(A,O,k,R,g,12,a[5]),R=l(R,A,O,k,m,17,a[6]),k=l(k,R,A,O,v,22,a[7]),O=l(O,k,R,A,y,7,a[8]),A=l(A,O,k,R,b,12,a[9]),R=l(R,A,O,k,S,17,a[10]),k=l(k,R,A,O,E,22,a[11]),O=l(O,k,R,A,T,7,a[12]),A=l(A,O,k,R,w,12,a[13]),R=l(R,A,O,k,C,17,a[14]),O=d(O,k=l(k,R,A,O,I,22,a[15]),R,A,c,5,a[16]),A=d(A,O,k,R,m,9,a[17]),R=d(R,A,O,k,E,14,a[18]),k=d(k,R,A,O,s,20,a[19]),O=d(O,k,R,A,g,5,a[20]),A=d(A,O,k,R,S,9,a[21]),R=d(R,A,O,k,I,14,a[22]),k=d(k,R,A,O,_,20,a[23]),O=d(O,k,R,A,b,5,a[24]),A=d(A,O,k,R,C,9,a[25]),R=d(R,A,O,k,f,14,a[26]),k=d(k,R,A,O,y,20,a[27]),O=d(O,k,R,A,w,5,a[28]),A=d(A,O,k,R,u,9,a[29]),R=d(R,A,O,k,v,14,a[30]),O=h(O,k=d(k,R,A,O,T,20,a[31]),R,A,g,4,a[32]),A=h(A,O,k,R,y,11,a[33]),R=h(R,A,O,k,E,16,a[34]),k=h(k,R,A,O,C,23,a[35]),O=h(O,k,R,A,c,4,a[36]),A=h(A,O,k,R,_,11,a[37]),R=h(R,A,O,k,v,16,a[38]),k=h(k,R,A,O,S,23,a[39]),O=h(O,k,R,A,w,4,a[40]),A=h(A,O,k,R,s,11,a[41]),R=h(R,A,O,k,f,16,a[42]),k=h(k,R,A,O,m,23,a[43]),O=h(O,k,R,A,b,4,a[44]),A=h(A,O,k,R,T,11,a[45]),R=h(R,A,O,k,I,16,a[46]),O=p(O,k=h(k,R,A,O,u,23,a[47]),R,A,s,6,a[48]),A=p(A,O,k,R,v,10,a[49]),R=p(R,A,O,k,C,15,a[50]),k=p(k,R,A,O,g,21,a[51]),O=p(O,k,R,A,T,6,a[52]),A=p(A,O,k,R,f,10,a[53]),R=p(R,A,O,k,S,15,a[54]),k=p(k,R,A,O,c,21,a[55]),O=p(O,k,R,A,y,6,a[56]),A=p(A,O,k,R,I,10,a[57]),R=p(R,A,O,k,m,15,a[58]),k=p(k,R,A,O,w,21,a[59]),O=p(O,k,R,A,_,6,a[60]),A=p(A,O,k,R,E,10,a[61]),R=p(R,A,O,k,u,15,a[62]),k=p(k,R,A,O,b,21,a[63]),i[0]=i[0]+O|0,i[1]=i[1]+k|0,i[2]=i[2]+R|0,i[3]=i[3]+A|0},_doFinalize:function(){var e=this._data,r=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var i=t.floor(o/4294967296),s=o;r[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,o,n,i,s){var a=e+(t&r|~t&o)+n+s;return(a<<i|a>>>32-i)+t}function d(e,t,r,o,n,i,s){var a=e+(t&o|r&~o)+n+s;return(a<<i|a>>>32-i)+t}function h(e,t,r,o,n,i,s){var a=e+(t^r^o)+n+s;return(a<<i|a>>>32-i)+t}function p(e,t,r,o,n,i,s){var a=e+(r^(t|~o))+n+s;return(a<<i|a>>>32-i)+t}return r.MD5=i._createHelper(u),r.HmacMD5=i._createHmacHelper(u),e.MD5}(r(2))},function(e,t,r){function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i;e.exports=(n=[function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_ENV=t.ZEGO_BROWSER_TYPE=void 0,(o=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[o.IE=0]="IE",o[o.FIREFOX=1]="FIREFOX",o[o.CHROME=2]="CHROME",o[o.SAFARI=3]="SAFARI",o[o.OPERA=4]="OPERA",o[o.WEIXIN=5]="WEIXIN",o[o.WEIXINMINI=6]="WEIXINMINI",o[o.UNKOWN=7]="UNKOWN",(o=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",(o=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[o.DISABLE=0]="DISABLE",o[o.WEBSOCKET=1]="WEBSOCKET",o[o.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(o=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[o.ClientType_None=0]="ClientType_None",o[o.ClientType_H5=1]="ClientType_H5",o[o.ClientType_SmallPragram=2]="ClientType_SmallPragram",o[o.ClientType_Webrtc=3]="ClientType_Webrtc"},function(e,t,r){"use strict";function o(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=void 0,o.getInstance=function(){return o.instance||(o.instance=new o).init(),o.instance},o.prototype.init=function(){},Object.defineProperty(o.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),o.instance=new o,t.LoggerStateCenter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var o=r(0),n=(i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()},i);function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=n,t.createZegoWebSocket=function(e,t){return new(t%2===o.ZEGO_ENV.BROWSER?WebSocket:n)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=t.createZegoWebSocket=t.ZegoDataReport=t.ZegoLogger=void 0;var o=r(1),n=(Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return o.LoggerStateCenter}}),r(2)),i=(Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return n.createZegoWebSocket}}),r(4)),s=(Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return i.ZegoDataReport}}),r(5));Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}})},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,i.prototype.newReport=function(e,t){this.dataStatistics[e]={event_time:Date.now(),time_consumed:0,seq:e,error:0,message:"success",event:t,events:[]}},i.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn(e+" not exist")},i.prototype.addMsgInfo=function(e,t){this.dataStatistics[e]?Object.assign(this.dataStatistics[e],t):console.warn(e+" not exist")},i.prototype.eventStart=function(e,t){this.dataStatistics[e]?null!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},i.prototype.eventEnd=function(e,t,r){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(o&&0!==o.length){for(var n=o.length-1;0<=n;n--)if(o[n].event==t&&0==o[n].time_consumed){o[n].time_consumed=Date.now()-o[n].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},i.prototype.eventEndWithMsg=function(e,t,r){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(n){for(var i=n.length-1;0<=i;i--)if(n[i].event==t&&0==n[i].time_consumed){n[i].time_consumed=Date.now()-n[i].event_time,null==n[i].msg_ext&&(n[i].msg_ext={}),n[i].msg_ext=o({},r);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},i.prototype.eventEndWithMsgInfo=function(e,t,r){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(o){for(var n=o.length-1;0<=n;n--)if(o[n].event==t&&0==o[n].time_consumed){o[n].time_consumed=Date.now()-o[n].event_time,Object.assign(o[n],r);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},i.prototype.addEventInfo=function(e,t,r,o){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(null!=n){for(var i=n.length-1;0<=i;i--)if(n[i].event==t&&null!=n[i].time_consumed){null==n[i].msg_ext?n[i].msg_ext={}:n[i].msg_ext&&(n[i].msg_ext[r]=o);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},i.prototype.addEventMsg=function(e,t,r,o){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(null!=n){for(var i=n.length-1;0<=i;i--)if(n[i].event==t){n[i][r]=o;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},i.prototype.addEvent=function(e,t,r){this.dataStatistics[e]?this.dataStatistics[e].events&&(r?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),msg_ext:r}):this.dataStatistics[e].events.push({event:t,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},i.prototype.uploadReport=function(e,t,r,o){var n=this.dataStatistics[e];null!=n&&(t&&(n.event=t),n.time_consumed=Date.now()-n.event_time,r&&this.addMsgInfo(e,{error:r.code,message:r.message||r.msg+" "+(o||"")}),this.logger.report(n),delete this.dataStatistics[e])},i);function i(e){this.dataStatistics={},this.logger=e}t.ZegoDataReport=n},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,r(0)),i=r(2),s=r(1),a=r(6);function c(e){this.logLevel=n.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.websocket=null,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=100,this.existUserID=!1,this.stateCenter=s.LoggerStateCenter.getInstance(),this.env=e}c.prototype.setLogLevel=function(e){return void 0!==(e=n.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},c.prototype.setRemoteLogLevel=function(e){return void 0!==(e=n.ENUM_LOG_LEVEL[e])&&(this.logRemoteLevel=e,!0)},c.prototype.setSessionInfo=function(e,t,r,o,n,i){this.appid=e,this.roomid=t,this.sessionid=r,this.userid=o,this.userName=n,this.version=i},c.prototype.report=function(e){e=this.logReportParamList(n.ENUM_LOG_LEVEL.REPORT,e),this.logLevel!==n.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=n.ENUM_LOG_LEVEL.REPORT&&console.debug(e),this.RemoteLog(n.ENUM_LOG_LEVEL.REPORT,e,!0)},c.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(n.ENUM_LOG_LEVEL.DEBUG,e.join(""));this.logLevel!==n.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=n.ENUM_LOG_LEVEL.DEBUG&&console.debug(r),this.log(n.ENUM_LOG_LEVEL.DEBUG,r)},c.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(n.ENUM_LOG_LEVEL.INFO,e.join(""));this.logLevel!==n.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=n.ENUM_LOG_LEVEL.INFO&&console.info(r),this.log(n.ENUM_LOG_LEVEL.INFO,r)},c.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(n.ENUM_LOG_LEVEL.WARN,e.join(""));this.logLevel!==n.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=n.ENUM_LOG_LEVEL.WARN&&console.warn(r),this.log(n.ENUM_LOG_LEVEL.WARN,r)},c.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(n.ENUM_LOG_LEVEL.ERROR,e.join(""));this.logLevel!==n.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=n.ENUM_LOG_LEVEL.ERROR&&(console.error(r),this.env%2===n.ZEGO_ENV.BROWSER&&window?this.stateCenter.debug&&window.alert(e.join("").substr(e.join("").indexOf(" ")+1,4500)):this.env%2===n.ZEGO_ENV.WEIXINMINI&&wx&&this.stateCenter.debug&&wx.showModal({title:"",content:e.join("").substr(e.join("").indexOf(" ")+1,4500)})),this.log(n.ENUM_LOG_LEVEL.ERROR,r)},c.prototype.log=function(e,t){this.logRemoteLevel!==n.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=e&&this.RemoteLog(e,t)},c.prototype.setLogServer=function(e){try{return e.startsWith("wss:")?(this.logType=n.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=n.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=n.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return this.error(JSON.stringify(e)),!1}},c.prototype.stopLogServer=function(){this.logType==n.ENUM_REMOTE_TYPE.WEBSOCKET?this.stopWebSocketServer():this.logType==n.ENUM_REMOTE_TYPE.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=n.ENUM_REMOTE_TYPE.DISABLE},c.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},c.prototype.openHttpsLogServer=function(e){var t=this;(this.url=e)&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval((function(){t.SendHttpsLog()}),this.logUploadInterval)))},c.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},c.prototype.RemoteLog=function(e,t,r){if(void 0===r&&(r=!1),""!=this.url)if(this.logType==n.ENUM_REMOTE_TYPE.WEBSOCKET)this.RemoteWebSocketLog(e,t);else if(this.logType==n.ENUM_REMOTE_TYPE.HTTPS)this.RemoteHttpsLog(e,t,r);else if(this.logLevel!==n.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=e)for(this.logCacheSend.push(t);this.logCacheSend.length>this.logCacheMax;)this.logCacheSend.shift()},c.prototype.RemoteWebSocketLog=function(e,t){if("string"==typeof t&&4e3<t.length)console.info("log over maximum, ignore");else if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState){var r=this.url;this.url="",this.setLogServer(r),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)}else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(0<this.logCacheSend.length){for(var n="",i=0;i<this.logCacheSend.length;i++){4e3<(n+this.logCacheSend[i]).length&&(this.websocket.send(n),n="");var s=JSON.parse(this.logCacheSend[i]);s=o(o({},s),{userid:s.userid||this.userid,roomid:s.roomid||this.roomid,userName:s.userName||this.userName}),n=n+JSON.stringify(s)+"\n"}t=n+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},c.prototype.RemoteHttpsLog=function(e,t,r){this.logCacheSend.push(t),(this.logCacheSend.length>=this.logCacheMax||!0===r)&&this.SendHttpsLog()},c.prototype.logParamList=function(e,t){var r={time:r=a.getCurrentTime(),level:e,action:(t=[t.substr(0,t.indexOf(" "))||t,t.substr(t.indexOf(" ")+1,4500)||t])[0],content:t[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(r)},c.prototype.logReportParamList=function(e,t){var r=a.getCurrentTime();return t=o(o({},t),{time:r,level:e,console:this.env%2===n.ZEGO_ENV.BROWSER?"rtc":"xcx",appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+t.event_time+"_"+t.seq}),JSON.stringify(t)},c.prototype.openWebSocketLogServer=function(e){this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.websocket=i.createZegoWebSocket(e,this.env),this.websocket.onopen=function(){},this.websocket.onclose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("onclose   websocket error:",e)},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("open log websocket error:",e)})},c.prototype.SendHttpsLog=function(){0!=this.logCacheSend.length&&(this.env%2===n.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},c.prototype.SendHttpsLogWeb=function(){var e=this,t=this.logCacheSend.join("\n"),r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){if(0!=r.responseText.length)try{var t=JSON.parse(r.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(t){console.log("send result failed "+t)}}else console.log("send failed "+r.status)},r.open("POST",this.url,!0),0==this.env?r.send(t):2==this.env&&(r.setRequestHeader("content-type","application/json"),r.send(JSON.stringify({user_id:this.userid,log:t}))),this.logCacheSend=[]},c.prototype.SendHttpsLogWeChatMini=function(){var e=this;if(!this.existUserID){if(!this.userid)return void console.log("no userid");this.logCacheSend.forEach((function(t,r){(t=JSON.parse(t))&&""==t.userid?(t.userid=e.userid,t.id_name=t.id_name||e.userid,t.roomid=t.roomid||e.roomid,t.userName=t.userName||e.userName,e.logCacheSend[r]=JSON.stringify(t)):e.existUserID=!0}))}var t=this.logCacheSend.join("\n");t=1==this.env?t:JSON.stringify({user_id:this.userid,log:t}),wx.request({url:this.url,data:t,method:"POST",success:function(t){0!=t.data.length&&"number"==typeof(t=t&&t.data&&t.data.interval)&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))},fail:function(e){console.log("send failed "+e.statusCode)}}),this.logCacheSend=[]},t.ZegoLogger=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0;var o=r(0),n=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),n=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?o.ZEGO_BROWSER_TYPE.IE:r?o.ZEGO_BROWSER_TYPE.FIREFOX:n?o.ZEGO_BROWSER_TYPE.OPERA:i?o.ZEGO_BROWSER_TYPE.CHROME:s?o.ZEGO_BROWSER_TYPE.SAFARI:e?o.ZEGO_BROWSER_TYPE.WEIXIN:o.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(o.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(n[e.getMonth()+1]||e.getMonth()+1)+"/",(n[e.getDate()]||e.getDate())+" ",(n[e.getHours()]||e.getHours())+":",(n[e.getMinutes()]||e.getMinutes())+":",n[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}}],i={},o.m=n,o.c=i,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3))},function(e,t,r){e.exports=r(2).enc.Utf8},function(t,r){t.exports=e},function(e,t,r){"use strict";t.byteLength=function(e){return 3*((e=u(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){var t,r,o=(s=u(e))[0],s=s[1],a=new i(function(e,t){return 3*(e+t)/4-t}(o,s)),c=0,l=0<s?o-4:o;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,a[c++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,a=r-n;s<a;s+=16383)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(function(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}(n));return i.join("")}(e,s,a<s+16383?a:s+16383));return 1==n?(t=e[r-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")};for(var o=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)o[a]=s[a],n[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t,r){function o(e){if(u[e])return u[e].exports;var t=u[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i,s,a,c,u;e.exports=(n=r(11),i=r(4),s=r(3),a=r(6),u={},o.m=c=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=t.ENUM_CONNECT_STATE=t.ENUM_NETWORK_STATE=t.SOCKET_DISCONNECT=t.errorList=t.Queue=t.getSeq=t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.0",(n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",(n=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[n.IE=0]="IE",n[n.FIREFOX=1]="FIREFOX",n[n.CHROME=2]="CHROME",n[n.SAFARI=3]="SAFARI",n[n.OPERA=4]="OPERA",n[n.WEIXIN=5]="WEIXIN",n[n.WEIXINMINI=6]="WEIXINMINI",n[n.UNKOWN=7]="UNKOWN",(n=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[n.DISABLE=0]="DISABLE",n[n.WEBSOCKET=1]="WEBSOCKET",n[n.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(n=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[n.ClientType_None=0]="ClientType_None",n[n.ClientType_H5=1]="ClientType_H5",n[n.ClientType_SmallPragram=2]="ClientType_SmallPragram",n[n.ClientType_Webrtc=3]="ClientType_Webrtc",t.getSeq=(o=1,function(){return o++}),i.prototype.isEmpty=function(){return 0==this.items.length},i.prototype.enqueue=function(e){this.items.push(e)},i.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},i.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},i.prototype.size=function(){return this.items.length},i.prototype.clear=function(){this.items=[]},i.prototype.all=function(){return this.items};var o,n=i;function i(){this.items=[],this.items=[]}t.Queue=n,t.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},t.SOCKET_DISCONNECT=-1,(n=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[n.offline=0]="offline",n[n.online=1]="online",(n=t.ENUM_CONNECT_STATE||(t.ENUM_CONNECT_STATE={}))[n.disconnected=0]="disconnected",n[n.connecting=1]="connecting",n[n.connected=2]="connected",Object.defineProperty(a.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),a.prototype.hasNext=function(){return this.next&&this.next.id},a.prototype.hasPrev=function(){return this.prev&&this.prev.id};var s=a;function a(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function c(){this.start=new s,this.end=new s,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=s,c.prototype.insertBefore=function(e,t){return(t=new s(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},c.prototype.addLast=function(e){return this.insertBefore(this.end,e)},c.prototype.add=function(e){return this.addLast(e)},c.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},c.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},c.prototype.size=function(){return this._numNodes},c.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},c.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},c.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},c.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},c.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},c.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},c.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},c.prototype.find=function(e){for(var t=this.start,r=!1,o=null;t.hasNext()&&!r;)e(t=t.next)&&(o=t,r=!0);return o},c.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},c.prototype.push=function(e){return this.addLast(e)},c.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},c.prototype.pop=function(){return this.removeLast()},c.prototype.shift=function(){return this.removeFirst()},t.LinkedList=n=c},function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=t.suppressInstrumentation=t.ROOT_CONTEXT=t.BaseContext=t.setSpan=t.getSpanContext=t.getSpan=t.createContextKey=void 0,r(16));function s(e){return Symbol.for(e)}var a=(t.createContextKey=s)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),c=s("OpenTelemetry Context Key SPAN");function u(e){return e.getValue(c)||void 0}function l(e){this.name=e,this.contextManager=new i.StackContextManager}t.getSpan=u,t.getSpanContext=function(e){return null==(e=u(e))?void 0:e.context()},t.setSpan=function(e,t){return e.setValue(c,t)},t.BaseContext=r=function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,o){var n=new e(r._currentContext);return n._currentContext.set(t,o),n},r.deleteValue=function(t){var o=new e(r._currentContext);return o._currentContext.delete(t),o}},t.ROOT_CONTEXT=new r,t.suppressInstrumentation=function(e){return e.setValue(a,!0)},l.getInstance=function(e){return void 0===e&&(e="context"),this._instance||(this._instance=new l(e)),this._instance},l.prototype.active=function(){return this.contextManager.active()},l.prototype.with=function(e,t,r){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,n([e,t,r],i))},l.prototype._getContextManager=function(){return this.contextManager},t.ContextAPI=r=l},function(e,t,r){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.TraceFlags=t.SpanKind=t.SpanStatusCode=void 0,(o=t.SpanStatusCode||(t.SpanStatusCode={}))[o.UNSET=0]="UNSET",o[o.OK=1]="OK",o[o.ERROR=2]="ERROR",(n=t.SpanKind||(t.SpanKind={}))[n.INTERNAL=0]="INTERNAL",n[n.SERVER=1]="SERVER",n[n.CLIENT=2]="CLIENT",n[n.PRODUCER=3]="PRODUCER",n[n.CONSUMER=4]="CONSUMER",(n=o=t.TraceFlags||(t.TraceFlags={}))[n.NONE=0]="NONE",n[n.SAMPLED=1]="SAMPLED",t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:o.NONE}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ZegoLog=void 0,n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.log(r)},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.debug(r)},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.info(r)},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.warn(r)},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.error(r)};var o=n;function n(){}o=new(t.ZegoLog=o),t.log=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FAIL_TIME=t.FAIL_MAX_COUNT=t.FAIL_COUNT=t.STORE_SIZE=t.CACHE_SIZE=t.BUCKET_CONFIG=t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:4},t.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},t.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},t.STORE_SIZE={totalDBSize:1024e3,storeDelPer:.2},t.FAIL_COUNT=10,t.FAIL_MAX_COUNT=10,t.FAIL_TIME=30},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.calculateMemSize=t.analyzeKey=t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0,r(0)),i=o(r(31)),s=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),o=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?n.ZEGO_BROWSER_TYPE.IE:r?n.ZEGO_BROWSER_TYPE.FIREFOX:o?n.ZEGO_BROWSER_TYPE.OPERA:i?n.ZEGO_BROWSER_TYPE.CHROME:s?n.ZEGO_BROWSER_TYPE.SAFARI:e?n.ZEGO_BROWSER_TYPE.WEIXIN:n.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(n.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(s[e.getMonth()+1]||e.getMonth()+1)+"/",(s[e.getDate()]||e.getDate())+" ",(s[e.getHours()]||e.getHours())+":",(s[e.getMinutes()]||e.getMinutes())+":",s[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.calculateMemSize=function(e){return i.default(e)},t.uuid=function(e,t){var r,o,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||n.length,e)for(r=0;r<e;r++)i[r]=n[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(o=0|16*Math.random(),i[r]=n[19==r?3&o|8:o]);return i.join("")}},function(e,t,r){"use strict";var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s};function i(e){return null==e||!Array.isArray(e)||function(e){var t,r,n;try{for(var i=o(e),s=i.next();!s.done;s=i.next()){var a=s.value;if(null!=a)if(n){if(typeof a!==n)return!1}else n=typeof a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!0}(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeAttributes=t.isAttributeValue=void 0,t.isAttributeValue=i,t.sanitizeAttributes=function(e){var t,r,s={};if(null!=e&&"object"==typeof e)try{for(var a=o(Object.entries(e)),c=a.next();!c.done;c=a.next()){var u=n(c.value,2),l=u[0],d=u[1];i(d)&&(Array.isArray(d)?s[l]=d.slice():s[l]=d)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdGenerator=void 0;var o=Array(32);function n(e){return function(){for(var t=0;t<2*e;t++)o[t]=Math.floor(16*Math.random())+48,58<=o[t]&&(o[t]+=39);return String.fromCharCode.apply(null,o.slice(0,2*e))}}t.IdGenerator=function(){this.generateTraceId=n(16),this.generateSpanId=n(8),this.generateEventId=n(4)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=t.SDK_INFO=t.SemanticResourceAttributes=void 0,t.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},t.SDK_INFO=((o={})[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",o[t.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",o[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",o[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.VERSION,o),n.empty=function(){return n.EMPTY},n.createTelemetrySDKResource=function(){var e;return new n(((e={})[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],e[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME],e[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],e))},n.prototype.merge=function(e){return e&&Object.keys(e.attributes).length?new n(Object.assign({},this.attributes,e.attributes)):this},n.EMPTY=new n({});var o=n;function n(e){this.attributes=e}t.Resource=o},function(e,t,r){"use strict";var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0,r(6)),s=r(1),a=r(2),c=r(7),u=r(17);function l(e,t,r,o,n,i,s,u){void 0===u&&(u=[]),this.attributes={},this.links=[],this.events=[],this.status={code:a.SpanStatusCode.UNSET},this.endTime=0,this._ended=!1,this._duration=0,this.exported=!0,this.contextAPI=e.context,this.reporter=e.reporter,this.spanProcessor=e.spanProcessor,this.parentTracer=e,this.name=r,this.level=o,this.spanContext=n,this.parentSpanId=s,this.kind=i,this.links=u,this.startTime=Date.now(),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._traceParams=e.getActiveTraceParams(),this._idGenerator=new c.IdGenerator}l.prototype.context=function(){return this.spanContext},l.prototype.setAttribute=function(e,t){return null!=t&&0!==e.length&&(!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=t)),this},l.prototype.appendAttribute=function(e,t){return null!=t&&0!==e.length&&(!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]&&Array.isArray(this.attributes[e])?this.attributes[e].push(t):this.attributes[e]=[t])),this},l.prototype.setAttributes=function(e){var t,r;try{for(var i=o(Object.entries(e)),s=i.next();!s.done;s=i.next()){var a=n(s.value,2),c=a[0],u=a[1];this.setAttribute(c,u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},l.prototype.addEvent=function(e,t,r){this.events.length>=this._traceParams.numberOfEventsPerSpan&&this.events.shift();var o=this._idGenerator.generateEventId();return u.isTimeInput(t)&&(void 0===r&&(r=t),t=void 0),void 0===r&&(r=u.hrTime()),this.events.push({name:e,attributes:t,time:u.timeInputToHrTime(r),event_id:o}),this},l.prototype.setStatus=function(e){return this.status=e,this},l.prototype.updateName=function(e){return this.name=e,this},l.prototype.end=function(e){var t=this;void 0===e&&(e=u.hrTime()),this._isSpanEnded()||(this._ended=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),e=u.getCurrentTime(),this.setAttribute("e_time_s",e),this.endTime=Date.now(),this._duration=this.endTime-this.startTime,this.contextAPI.with(s.suppressInstrumentation(this.contextAPI.active()),(function(){var e=t.toReporterSpan(t);t.spanProcessor.spanEnd&&t.spanProcessor.spanEnd(e,t.level),e.droped||(delete e.droped,t.reporter.report(JSON.stringify(e),t.level))})))},l.prototype.isRecording=function(){return!1===this._ended},Object.defineProperty(l.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),l.prototype._isSpanEnded=function(){return this._ended,this._ended},l.prototype.toReporterSpan=function(e){var t=[],r=(e.events.forEach((function(e){var r={};Object.keys(e).forEach((function(t){"name"===t&&(r[t]=e[t]),"time"===t&&(r.timestamp=u.hrTimeToMilliseconds(e[t])),"attributes"===t&&(r.tags=e[t])})),t.push(r)})),[]);return e.links.forEach((function(e){r.push({span_id:e.context.spanId,trace_id:e.context.traceId})})),{trace_id:e.spanContext.traceId,parent_span_id:e.parentSpanId,name:e.name,span_id:e.spanContext.spanId,kind:e.kind,start_time:e.startTime,end_time:e.endTime,duration:e.duration,logs:t,tags:e.attributes,links:r}},t.Span=r=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSpan=void 0;var o=r(3),n=r(9);function i(e,t){this.spanId=e,this.span=t}i.prototype.setAttribute=function(e,t){var r=this;return this.span?this.span.setAttribute(e,t):this._activeSpan().then((function(){r.span&&r.span.setAttribute(e,t)})),this},i.prototype.setAttributes=function(e){var t=this;return this.span?this.span.setAttributes(e):this._activeSpan().then((function(){t.span&&t.span.setAttributes(e)})),this},i.prototype.appendAttribute=function(e,t){var r=this;return this.span?this.span.appendAttribute(e,t):this._activeSpan().then((function(){r.span&&r.span.appendAttribute(e,t)})),this},i.prototype.addEvent=function(e,t,r){var o=this;return this.span?this.span.addEvent(e,t,r):this._activeSpan().then((function(){o.span&&o.span.addEvent(e,t,r)})),this},i.prototype.setStatus=function(e){var t=this;return this.span?this.span.setStatus(e):this._activeSpan().then((function(){t.span&&t.span.setStatus(e)})),this},i.prototype.updateName=function(e){var t=this;return this.span?this.span.updateName(e):this._activeSpan().then((function(){t.span&&t.span.updateName(e)})),this},i.prototype.end=function(e){var t=this;this.span?this.span.end(e):this._activeSpan(!0).then((function(){t.span&&t.span.end(e),t._spanEnd()}))},i.prototype.setSpanActive=function(e){this.activeCallback=e},i.prototype.setSpanEnd=function(e){this.endCallback=e},i.prototype._spanEnd=function(){this._isSpanNoop()||(this.removeStoreItem(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},i.prototype._isSpanNoop=function(){return"noop"===this.spanId},i.prototype._activeSpan=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(r,o){t.store.getItem(t.spanId).then((function(o){var s=new n.Span(i.tracer,i.tracer.context.active(),o.name,o.level,o.spanContext,o.kind,o.parentSpanId,o.links);s.setStatus(o.status),s.setAttributes(o.attributes),t.span=s,t.activeCallback&&t.activeCallback(t.spanId,e),r()})).catch((function(e){o(e)}))}))},i.prototype.removeStoreItem=function(e){var t=this;this.store.getItem(e).then((function(r){r&&t.store.removeItem(e).then((function(){o.log.log("remove suc")})).catch((function(e){o.log.warn("remove fail")}))}))},t.ZegoSpan=r=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=t.ZEGO_ENV=void 0;var o,n,i=r(12),s=((n=o=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",r(3)),a=(c.prototype.getItem=function(e){var t=this;return new Promise((function(r,o){try{r(wx.getStorageSync(t.keyPrefix+e))}catch(r){o(r)}}))},c.prototype.setItem=function(e,t){var r=this;return new Promise((function(o,n){try{wx.setStorageSync(r.keyPrefix+e,t),o()}catch(o){n(o)}}))},c.prototype.removeItem=function(e){var t=this;return new Promise((function(r,o){try{r(wx.removeStorageSync(t.keyPrefix+e))}catch(r){o(r)}}))},c.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},c.prototype.keys=function(){var e=this;return new Promise((function(t,r){try{var o=wx.getStorageInfoSync().keys,n=(s.log.warn("keys",o),[]);o.forEach((function(t){0==t.indexOf(e.keyPrefix)&&n.push(t.replace(e.keyPrefix,""))})),s.log.warn("keyArr",JSON.stringify(n)),n.sort(),t(n)}catch(t){r(t)}}))},c);function c(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=a,t.createZegoStore=function(e,t,r){return t===o.BROWSER?i.createInstance({name:e+":"+(r||"store")}):new a(e)}},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=t.ZegoTracer=t.ZegoSpan=void 0;var o=r(14),n=(Object.defineProperty(t,"ZegoTracer",{enumerable:!0,get:function(){return o.ZegoTracer}}),r(46)),i=(Object.defineProperty(t,"DynamicCode",{enumerable:!0,get:function(){return n.DynamicCode}}),r(10));Object.defineProperty(t,"ZegoSpan",{enumerable:!0,get:function(){return i.ZegoSpan}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoTracer=void 0;var o=r(15),n=r(21),i=r(10),s=r(22),a=r(3),c=r(1),u=r(8),l=r(23),d=r(39),h=r(11),p=r(44),f=r(45);function _(){this.tracingSpans=[],this._maxTracingSpanSize=s.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new p.ZegoLog,this.stateCenter=new f.StateCenter(this.log)}_.prototype.init=function(e){this.options=e,this.name=e.product,this.reporter=new l.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:e.appID,env:e.env||0,importantLevel:e.importantLevel,levels:e.levels,deviceID:e.deviceID,bps:e.bps,serverUrl:e.serverUrl}),this.tracer=new o.Tracer({name:this.name,version:e.version},{resource:new u.Resource(e.resources)},this.reporter,{spanStart:e.spanStart,spanBeforeEnd:e.spanBeforeEnd,spanEnd:e.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.initRoot(this.options),this.dyStore=h.createZegoStore(e.product+"_"+e.appID+"_dy",e.env||0)},_.prototype.initRoot=function(e){this.rootSpan=this.tracer.startSpan("root",0);var t=c.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context._getContextManager()._currentContext=t,this.rootSpan.end()},_.prototype.createSpan=function(e,t,r){var o,u;return e<=this.level?(o=void 0,o=r&&r.parent?c.setSpan(this.tracer.context.active(),r.parent.span):c.setSpan(this.tracer.context.active(),this.rootSpan),u=[],r&&r.linkSpans&&(r.linkSpans.forEach((function(e){u.push({context:e.span.context()})})),delete r.linkSpans),o=this.tracer.startSpan(t,e,Object.assign({},r,{links:u}),o),this.tracingSpans.length>=this._maxTracingSpanSize&&a.log.warn("max to limit"),o=new i.ZegoSpan(o.spanContext.spanId,o),i.ZegoSpan.tracer=this.tracer,this.tracingSpans.push(o),o):(a.log.warn("createSpan level not fix"),new i.ZegoSpan(s.NOOP_SPAN_ID,new n.NoopSpan))},_.prototype.setLogger=function(e){this.stateCenter.logger=e},_.prototype.setTimeOffset=function(e){this.reporter.setTimeOffset(e)},_.prototype.setWaitNtpTimeout=function(e){this.reporter.setWaitNtpTimeout(e)},_.prototype.setLogLevel=function(e){return this.stateCenter.logger.setLogLevel(e)},_.prototype.startReport=function(e){return this.reporter.startReport(e)},_.prototype.setConfig=function(e){this.reporter.setConfig(e)},_.prototype.loadJs=function(e,t,r,o,n,i){return d.loadJS(e,this.dyStore,t,r,o,n,i)},_.prototype.flush=function(e){this.reporter.flush(e)},_.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},_.prototype.setProcessorCallBack=function(e,t){},_.prototype.setSampleConfig=function(e){this.level=e.level||this.level},_.prototype.setResource=function(e){this.tracer.setResource(e),this.reporter.setProcessData(this.tracer.resource.attributes)},t.ZegoTracer=r=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var o=r(6),n=r(1),i=r(2),s=r(7),a=r(8),c=r(9),u=r(18),l=r(19);function d(e,t,r,o){var i=l.mergeConfig(t);this._traceParams=i.traceParams,this._idGenerator=new s.IdGenerator,this.resource=null!=(t=t.resource)?t:a.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=e,e=Math.random().toString(36).slice(-6),this.context=new n.ContextAPI(e),this.reporter=r,this.spanProcessor=o||{}}d.prototype.startSpan=function(e,t,r,s){var a,l,d,h=function(e,t){if(!e.root)return n.getSpanContext(t)}(r=void 0===r?{}:r,s=void 0===s?this.context.active():s),p=this._idGenerator.generateSpanId(),f=(h&&u.isSpanContextValid(h)?(a=h.traceId,l=h.traceState,d=h.spanId):a=this._idGenerator.generateTraceId(),null!=(_=r.kind)?_:i.SpanKind.INTERNAL),_=null!=(h=r.links)?h:[];return h=o.sanitizeAttributes(r.attributes),r=i.TraceFlags.NONE,(_=new c.Span(this,s,e,t,{traceId:a,spanId:p,traceFlags:r,traceState:l},f,d,_)).setAttributes(h),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(_),_},d.prototype.setResource=function(e){this.resource=this.resource.merge(new a.Resource(e))},d.prototype.getActiveTraceParams=function(){return this._traceParams},t.Tracer=r=d},function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.StackContextManager=void 0,r(1));function s(){this._enabled=!1,this._currentContext=i.ROOT_CONTEXT}s.prototype._bindFunction=function(e,t){function r(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return o.with(t,(function(){return e.apply(r,n)}))}void 0===t&&(t=i.ROOT_CONTEXT);var o=this;return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r},s.prototype.active=function(){return this._currentContext},s.prototype.bind=function(e,t){return void 0===(t=void 0===t?i.ROOT_CONTEXT:t)&&(t=this.active()),"function"==typeof e?this._bindFunction(e,t):e},s.prototype.disable=function(){return this._currentContext=i.ROOT_CONTEXT,this._enabled=!1,this},s.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=i.ROOT_CONTEXT),this},s.prototype.with=function(e,t,r){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=this._currentContext;this._currentContext=e||i.ROOT_CONTEXT;try{return t.call.apply(t,n([r],o))}finally{this._currentContext=a}},t.StackContextManager=r=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.isTimeInput=t.hrTimeToMilliseconds=t.hrTimeDuration=t.timeInputToHrTime=t.isTimeInputHrTime=t.hrTime=void 0;var o=Math.pow(10,9),n=["00","01","02","03","04","05","06","07","08","09"];function i(e){var t=e/1e3;return[e=Math.trunc(t),Number((t-e).toFixed(9))*o]}function s(){var e,t=performance.timeOrigin;return"number"!=typeof t?(e=performance).timing&&e.timing.fetchStart:t}function a(e){var t=i(s()),r=i("number"==typeof e?e:performance.now());return e=t[0]+r[0],r=t[1]+r[1],o<r&&(r-=o,e+=1),[e,r]}function c(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.hrTime=a,t.isTimeInputHrTime=c,t.timeInputToHrTime=function(e){if(c(e))return e;if("number"==typeof e)return(e<s()?a:i)(e);if(e instanceof Date)return i(e.getTime());throw TypeError("Invalid input type")},t.hrTimeDuration=function(e,t){var r=t[0]-e[0];return(e=t[1]-e[1])<0&&(--r,e+=o),[r,e]},t.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},t.isTimeInput=function(e){return c(e)||"number"==typeof e||e instanceof Date},t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(n[e.getMonth()+1]||e.getMonth()+1)+"/",(n[e.getDate()]||e.getDate())+" ",(n[e.getHours()]||e.getHours())+":",(n[e.getMinutes()]||e.getMinutes())+":",n[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0,r=r(2);var o=/^([0-9a-f]{32})$/i,n=/^[0-9a-f]{16}$/i;function i(e){return o.test(e)&&e!==t.INVALID_TRACEID}function s(e){return n.test(e)&&e!==t.INVALID_SPANID}t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.TraceFlags.NONE},t.isValidTraceId=i,t.isValidSpanId=s,t.isSpanContextValid=function(e){return i(e.traceId)&&s(e.spanId)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var o=r(20);t.mergeConfig=function(e){var t=Object.assign({},o.DEFAULT_CONFIG,e);return t.traceParams=Object.assign({},o.DEFAULT_CONFIG.traceParams,e.traceParams||{}),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpan=void 0;var o=r(2);function n(e){void 0===e&&(e=o.INVALID_SPAN_CONTEXT),this._spanContext=e}n.prototype.context=function(){return this._spanContext},n.prototype.setAttribute=function(e,t){return this},n.prototype.appendAttribute=function(e,t){return this},n.prototype.setAttributes=function(e){return this},n.prototype.addEvent=function(e,t,r){return this},n.prototype.setStatus=function(e){return this},n.prototype.updateName=function(e){return this},n.prototype.end=function(e){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(e,t){},t.NoopSpan=r=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_SPAN_ID=t.SCHEDULED_DELAY_MILLIS=t.DEFAULT_MAX_SPAN_SIZE=t.readSpanKeys=void 0,t.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],t.DEFAULT_MAX_SPAN_SIZE=1e3,t.SCHEDULED_DELAY_MILLIS=3e3,t.NOOP_SPAN_ID="noop"},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,(c=n?[2&c[0],n.value]:c)[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],o=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,r(0)),l=r(24),d=r(30),h=r(38),p=r(5),f=r(4);function _(e,t){this.stateCenter=t,this.QUEUE_MAX=100,this.cacheMaxSize=f.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=f.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:f.CACHE_SIZE.totalAvailCache,totalDBSize:f.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.product=e,this.reporterCommonField=new Map,this.reportMap=new Map}_.prototype.init=function(e){return n(this,void 0,void 0,(function(){var t=this;return i(this,(function(r){switch(r.label){case 0:return this.config=o(o({},f.DEFAULT_CONFIG),e),this.config.env%2!=1&&this.bindWindowListener(),this.zegoService=new l.ZegoService(this.config.env||u.ZEGO_ENV.BROWSER,this.config.bps||f.DEFAULT_CONFIG.bps,this.product,this.pro,this.stateCenter),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.postSucHandler.bind(this)),this.zegoService.setPostFailCallback(this.product,(function(e){return n(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.stateCenter.logger.warn("zt.zd.i fail"),this.dropCount++,this.storePackagesDataToDB(e),[4,this.storePendingDataToDB(1)];case 1:return t.sent(),this._actionListener("postFail"),[2]}}))}))})),this.initPendingQueue(),this.storeHandler=new d.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",p.uuid(6),this.config,this.traceType,this.staticConfig,this.stateCenter),this.storeHandler.setDropCallBack((function(e){t.traceType.DB_O_DROP+=p.calculateMemSize(e),t._actionListener("dataDroped",e)})),[4,this.storeHandler.loadPendingData()];case 1:return r.sent(),this.storeHandler.init().then((function(){t.loadReportData()})).catch((function(e){console.warn(e)})),this.startReportTimer(),this.setWaitNtpTimer(),this.checkCacheDataTimer(),[2]}}))}))},_.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null)},_.prototype.setConfig=function(e){"object"==typeof e&&"number"==typeof e.bps&&(this.config.bps=e.bps,this.zegoService.setBps(this.config.bps)),"object"==typeof e&&"number"==typeof e.totalDBSize&&(this.staticConfig.totalDBSize=e.totalDBSize),"object"==typeof e&&"string"==typeof e.serverUrl&&""!==e.serverUrl&&(this.config.serverUrl=e.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},_.prototype.pause=function(){this.isPaused=!0},_.prototype.resume=function(){this.isPaused=!1;var e=(t=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=t.size;this.checkPendingQueue(e,t)},_.prototype.startReport=function(e){var t=e.get("userID"),r=e.get("token");return!(!t||"string"!=typeof t||!r||"string"!=typeof r||(this.startCommonField=e,this.config.userID=t,this.config.token=r,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.isWithNtp()&&this.bufferDump(),(r=e.get("serverUrl"))&&(this.config.serverUrl=r,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(r=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,this.checkPendingQueue(r,e)),0))},_.prototype.setTimeOffset=function(e){var t=this;this.clientTimeOffset=e,this.tempBuffer.forEach((function(e){(e=e.data).tags.time_offset||(e.tags.time_offset=t.clientTimeOffset)})),this.config.userID&&this.bufferDump()},_.prototype.setProcessData=function(e){this.stateCenter.processData=e},_.prototype.on=function(e,t){return this._bindListener(e,t)},_.prototype.off=function(e,t){return this._deleteListener(e,t)},_.prototype.report=function(e,t){var r,o;if(15e3<e.length)return!1;try{o=JSON.parse(e)}catch(e){return!1}return(null!=o&&o.id_name||null!=(r=null==o?void 0:o.tags)&&r.id_name||this.config.userID)&&this.isWithNtp()?null!=o&&o.id_name||null!=(r=null==o?void 0:o.tags)&&r.id_name?(this.clientTimeOffset&&(o.tags.time_offset=this.clientTimeOffset),this.dumpData(e,t)):(this.clientTimeOffset&&(o.tags.time_offset=this.clientTimeOffset),o.tags.id_name=this.config.userID,this.dumpData(JSON.stringify(o),t)):this.tempBuffer.push({data:o,level:t}),!0},_.prototype.dumpData=function(e,t){var r=this,o=p.calculateMemSize(e),n=(this.traceType.MEM_I_API+=o,u.getSeq()),i=(new Date).getTime(),s={seq:n,content:e,level:t,timestamp:i,packagedContent:""};t<=this.config.importantLevel?(s.key=t+"_"+i+"_"+n,this.dataInDb.push(s.key),this.storeHandler.storeData(s).then((function(e){r.pendingQueue.enqueue(s,t),r.traceType.DB_I_BACKUP+=o})).catch((function(e){var o=r.dataInDb.findIndex((function(e){return e===s.key}));-1<o&&r.dataInDb.splice(o,1),r.pendingQueue.enqueue(s,t)}))):this.pendingQueue.enqueue(s,t),"force"===this.state&&(e=p.calculateMemSize(e),this.forceDataTotalLen+=e)},_.prototype.isWithNtp=function(){return this.isWaitNtpTimeout||void 0!==this.clientTimeOffset},_.prototype.bufferDump=function(){var e,t=this.tempBuffer.shift();t&&(e=t.data,t=t.level,e.tags.id_name=this.config.userID,this.dumpData(JSON.stringify(e),t),this.bufferDump())},_.prototype.isConfigOK=function(e){return""!==e.userID&&""!==e.token&&""!==e.server},_.prototype.testSize=function(e){},_.prototype.flush=function(e){var t;"force"!==this.state&&(this.state="force",t=16e6,"object"==typeof e&&"number"==typeof e.bps&&(t=e.bps),this.zegoService.setBps(t),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,t=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,0<t?this.checkPendingQueue(t,e):this.loadReportData())},_.prototype.setWaitNtpTimeout=function(e){this.waitNtpTimeout=e},_.prototype.setWaitNtpTimer=function(){var e=this;this.ntpTimer=setTimeout((function(){e.isWaitNtpTimeout=!0,e.config.userID&&e.bufferDump()}),this.waitNtpTimeout)},_.prototype.startReportTimer=function(){var e=this,t=(this.timeInterval=!0,(r=this.pendingQueue.getPendingDataInfo()).pendingDataSize),r=r.size;this.checkPendingQueue(t,r),this.timer=window.setTimeout((function(){e.startReportTimer()}),3e4)},_.prototype.checkCacheDataTimer=function(){return n(this,void 0,void 0,(function(){var e,t,r=this;return i(this,(function(o){switch(o.label){case 0:return t=this.pendingQueue.getPendingDataInfo(),e=t.pendingDataSize,t=t.size,e>this.config.reportSize||t>this.config.reportNum?[4,this.checkPendingQueue(e,t)]:[3,2];case 1:return o.sent(),[3,3];case 2:this.loadReportData(),o.label=3;case 3:return this.timer=window.setTimeout((function(){r.checkCacheDataTimer()}),15e3),[2]}}))}))},_.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(t?"pagehide":"beforeunload",(function(){window.event&&(window.event.cancelBubble=!0),e.saveDataBeforeUnload()}))},_.prototype.saveDataBeforeUnload=function(){var e=this.pendingQueue.readStoreData(1),t=(e.totalLen,e.storeArr);this.storeHandler.resetCommonStore(),(e=[]).push.apply(e,a(t)),t=this.zegoService.readReportQueueData(),e.push.apply(e,a(t)),0<e.length&&this.storeHandler.storePendingData(e)},_.prototype.postSucHandler=function(e,t,r){return n(this,void 0,void 0,(function(){var r,o,n,s,a,c=this;return i(this,(function(i){switch(i.label){case 0:for(e.forEach((function(e){c.traceType.MEM_O_DONE+=p.calculateMemSize(e.content)})),r=function(t){var r=e[t];o.storeHandler.removeDataItem(r).then((function(e){r.key&&c.reportMap.delete(r.key)})).catch((function(e){}))},o=this,n=0;n<e.length;n++)r(n);return this.reportPackagesSize-=t,a=this.pendingQueue.getPendingDataInfo(),s=a.pendingDataSize,a=a.size,s>this.config.reportSize||a>this.config.reportNum?[4,this.checkPendingQueue(s,a)]:[3,2];case 1:return i.sent(),[3,3];case 2:this.loadReportData(),i.label=3;case 3:return"force"===this.state&&0==this.reportPackagesSize&&(a=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,a=1-Number((a/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this._actionListener("progressUpdate",a),0<this.storeHandler.storeSize&&this.loadReportData((function(e){0===e&&(c.state="normal",c.zegoService.setBps(c.config.bps||f.DEFAULT_CONFIG.bps),c.listenerList.forceSuccessCallback&&c._actionListener("forceResult","SUCCESS"))}))),[2]}}))}))},_.prototype.checkPendingQueue=function(e,t){return n(this,void 0,void 0,(function(){var r,o,n,s,a;return i(this,(function(i){switch(i.label){case 0:return e>this.config.reportSize||t>this.config.reportNum||"force"==this.state||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,2]):[3,7];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,5]);case 4:i.sent(),i.label=5;case 5:return[2];case 6:if(n=this.pendingQueue.readReportData(this.config.reportSize),r=n.totalLen,n=n.reportDataArr,r<=0)return[2];for(n=this.setCommonField(n),o=n.packageArr,n=n.packageLen,this.zegoService.report(o,n,this.product),s=0;s<o.length;s++)a=o[s],this.reportMap.set(a.key,a);this.reportPackagesSize+=n,this.pendingQueue.refresh(r),i.label=7;case 7:return[2]}}))}))},_.prototype.initPendingQueue=function(){var e=this;this.pendingQueue=new h.PendingQueue(this.config.levels,this.product,this.staticConfig,this.stateCenter),this.pendingQueue.setListener({enCallback:function(t,r,o){return n(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.checkPendingQueue(o,r)];case 1:return e.sent(),[2]}}))}))}})},_.prototype.loadDBDataToMem=function(){var e=this;this.storeHandler.readStoreDataItem().then((function(t){var r=p.calculateMemSize(t.content);e.traceType.MEM_I_LOAD+=r,e.pendingQueue.enqueue(t,t.level)})).catch((function(e){}))},_.prototype.storePendingDataToDB=function(e){return n(this,void 0,void 0,(function(){var t,r,o,n,s,a,u,l;return i(this,(function(d){switch(d.label){case 0:r=this.pendingQueue.readStoreData(e),t=r.totalLen,a=r.storeArr,r=function(e){var r,n;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,o.storeDataItem(e,t)];case 1:return i.sent(),r=e.level+"_"+e.timestamp+"_"+e.seq,-1<(n=o.dataInDb.findIndex((function(e){return e===r})))&&o.dataInDb.splice(n,1),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))},o=this,d.label=1;case 1:d.trys.push([1,6,7,8]),n=c(a),s=n.next(),d.label=2;case 2:return s.done?[3,5]:(a=s.value,[5,r(a)]);case 3:d.sent(),d.label=4;case 4:return s=n.next(),[3,2];case 5:return[3,8];case 6:return u={error:u=d.sent()},[3,8];case 7:try{s&&!s.done&&(l=n.return)&&l.call(n)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))}))},_.prototype.storePackagesDataToDB=function(e){var t=this;e.length&&e.forEach((function(e){t.storeHandler.storeData(e).then((function(r){var o=p.calculateMemSize(e.content);t.traceType.MEM_O_DUMP+=o})).catch((function(e){}))}))},_.prototype.storeDataItem=function(e,t){var r=this;return new Promise((function(t,o){return n(r,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.storeHandler.storeData(e)];case 1:return n.sent(),r=p.calculateMemSize(e.content),this.traceType.MEM_O_DUMP+=r,t(),[3,3];case 2:return r=n.sent(),o(r),[3,3];case 3:return[2]}}))}))}))},_.prototype.loadReportData=function(e){var t=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),(function(e){return-1<t.dataInDb.indexOf(e)})).then((function(r){t.isLoadReportData=!1,r.datas.forEach((function(e){var r;t.reportMap.has(e.key)||t.pendingQueue.findInQueue(e)||(r=p.calculateMemSize(e.content),t.traceType.MEM_I_LOAD+=r,t.pendingQueue.enqueue(e,e.level),t.dataInDb.push(e.key))})),e&&e(r.len)})).catch((function(e){t.isLoadReportData=!1})))},_.prototype.setCommonField=function(e){var t=this,r=0;return e.forEach((function(e){var o,n,i,a,u,l;if(e.packagedContent=JSON.parse(e.content),t.config.initCommonField)try{for(var d=c(t.config.initCommonField),h=d.next();!h.done;h=d.next()){var f=s(h.value,2),_=f[0],g=f[1];(E=JSON.parse(e.content))[_]=g,e.packagedContent=E}}catch(e){o={error:e}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(o)throw o.error}}if(t.startCommonField)try{for(var m=c(t.startCommonField),v=m.next();!v.done;v=m.next()){var y=s(v.value,2);_=y[0],g=y[1],"userID"!==_&&"token"!==_&&"serverUrl"!==_&&((E=JSON.parse(e.content))[_]=g,e.packagedContent=E)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(t.reporterCommonField)try{for(var b=c(t.reporterCommonField),S=b.next();!S.done;S=b.next()){var E,T=s(S.value,2);_=T[0],g=T[1],(E=JSON.parse(e.content))[_]=g,e.packagedContent=E}}catch(e){u={error:e}}finally{try{S&&!S.done&&(l=b.return)&&l.call(b)}finally{if(u)throw u.error}}r+=p.calculateMemSize(JSON.stringify(e.packagedContent))})),{packageArr:e,packageLen:r}},_.prototype._bindListener=function(e,t){return!!this.listenerList[e]&&"function"==typeof t&&(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0)},_.prototype._deleteListener=function(e,t){if(!this.listenerList[e])return!1;var r=this.listenerList[e];return t?r.splice(r.indexOf(t),1):this.listenerList[e]=[],!0},_.prototype._actionListener=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.listenerList[e]&&this.listenerList[e].forEach((function(e){try{e.apply(void 0,a(t))}catch(e){}}))},t.ZegoDataReport=r=_},function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoService=void 0,r(0)),s=r(25),a=r(29),c=r(4);function u(e,t,r,o,n){this.env=e,this.product=r,this.pro=o,this.stateCenter=n,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.reportDataCheckInterval=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=i.ENUM_NETWORK_STATE.online,this.state=i.ENUM_CONNECT_STATE.disconnected,this.bindWindowListener(),this.networkState=i.ENUM_NETWORK_STATE.online,this.service=new s.LogService(e,r,o,n),this.setBps(t),this.reportQueue=new i.Queue}u.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.networkState=i.ENUM_NETWORK_STATE.offline})),window.addEventListener("online",(function(t){e.networkState=i.ENUM_NETWORK_STATE.online;var r=e.url;e.url="",e.setLogServer(r),e.netWorkFail=!1}))},u.prototype.setLogServer=function(e){try{return e.startsWith("wss:")||e.startsWith("ws:")?(this.logType=i.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")||e.startsWith("http:")?(this.logType=i.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=i.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return!1}},u.prototype.setLogUrlParams=function(e){this.logParams=e},u.prototype.openWebSocketLogServer=function(e){var t=this;this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.logParams.id_name&&(this.state=i.ENUM_CONNECT_STATE.connecting,e=e+"?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(e),this.service.openHandler((function(){t.service.onPush(),t.service.startCheck(),t.stateCenter.logger.info("zt.rzs.owsls socket open"),t.openHandler()})),this.service.closeHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()})),this.service.errorHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()}))))},u.prototype.stopWebSocketServer=function(){this.service.closeSocket()},u.prototype.openHttpsLogServer=function(e){(this.url=e)&&this.stopHttpsServer()},u.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},u.prototype.SendHttpsLog=function(e,t,r,o){this.env===i.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb(e,t,r,o):this.SendHttpsLogWeChatMini(e,t,r,o)},u.prototype.SendHttpsLogWeb=function(e,t,r,o){var n=this,i=(e=JSON.stringify({body:{data:e}}),new XMLHttpRequest);i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){if(0!=i.responseText.length)try{var e=JSON.parse(i.responseText).interval;"number"==typeof e&&n.logUploadInterval!==e&&n.openHttpsLogServer(n.url),r&&r()}catch(e){o&&o()}}else o&&o()},i.open("POST",this.url,!0),i.send(e)},u.prototype.SendHttpsLogWeChatMini=function(e,t,r,o){var n=this;e={appid:this.logParams.appid+"",timestamp:(new Date).getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:e})},wx.request({url:this.url,data:JSON.stringify(e),method:"POST",success:function(e){0!=e.data.length&&("number"==typeof(e=e&&e.data&&e.data.interval)&&n.logUploadInterval!==e&&n.openHttpsLogServer(n.url),r&&r())},fail:function(e){o&&o()}})},u.prototype.openHandler=function(){this.state=i.ENUM_CONNECT_STATE.connected,this.startReport()},u.prototype.setPostSucCallback=function(e,t){this.postSucCallbackList[e]=t},u.prototype.setPostFailCallback=function(e,t){this.postFailCallbackList[e]=t},u.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},u.prototype.report=function(e,t,r){this.packageLen++,this.packagesDataSize+=t,this.reportQueue.enqueue({reportDatas:e,dataLen:t,product:r}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport()},u.prototype.setBps=function(e){this.tokenBucket=new a.TokenBucket(c.BUCKET_CONFIG.bucketSize,e/8,"sec")},u.prototype.startReport=function(){var e,t,r,o,n=this;this.state===i.ENUM_CONNECT_STATE.disconnected?(o=this.url,this.url="",this.setLogServer(o)):0<this.reportQueue.size()&&(o=this.reportQueue.dequeue(),e=o.reportDatas,t=o.dataLen,r=o.product,new Date,this.tokenBucket.removeTokens(t,(function(){n.netWorkFail?n.postFailCallbackList[r](e):n.reportData(e,t,r,(function(){n.failCount=0,n.failStartTime=0,n.packageLen--,n.packagesDataSize-=t,n.postSucCallbackList[r]&&n.postSucCallbackList[r](e,t,r)}),(function(o){n.reportQueue.enqueue({reportDatas:e,dataLen:t,product:r}),n.failCount++,1==n.failCount&&(n.failStartTime=Date.now());var i,s=(Date.now()-n.failStartTime)/1e3;n.failCount>=c.FAIL_COUNT&&s>c.FAIL_TIME||n.failCount>=c.FAIL_MAX_COUNT?(n.netWorkFail=!0,i=n.decodeReportQueue(),Object.keys(n.postFailCallbackList).forEach((function(e){n.postFailCallbackList[r](i[e])}))):n.startReport()}))})))},u.prototype.resumeReport=function(){!0===this.netWorkFail&&this.networkState===i.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},u.prototype.reportData=function(e,t,r,o,n){var s=this,a=[];e.forEach((function(e){a.push(e.packagedContent)})),this.logType==i.ENUM_REMOTE_TYPE.WEBSOCKET?this.networkState!==i.ENUM_NETWORK_STATE.offline?this.service.sendMessage("report",a,o,(function(e){var t;s.state===i.ENUM_CONNECT_STATE.disconnected&&e===i.SOCKET_DISCONNECT&&(t=s.url,s.url="",s.setLogServer(t)),n&&n(e)})):n&&n(i.errorList.BROKEN):this.logType==i.ENUM_REMOTE_TYPE.HTTPS&&this.SendHttpsLog(a,t,o,(function(){n&&n()}))},u.prototype.unsigned2signed=function(e){var t=parseInt(e,10);if(256<t)return t%256;for(var r=[];0<t;)t%2!=0?r.push(1):r.push(0),t=Number(t/2);for(r.reverse();r.length<8;)r.unshift(0);var o="";if(1==(r=r.join("")).substr(0,1)){for(var n=1;n<r.length;n++)1==r.substr(n,1)?o+=0:o+=1;return"-"+(parseInt(o,2)+1)}for(n=0;n<r.length;n++)o+=r.substr(n,1);return parseInt(o,2)},u.prototype.decodeReportQueue=function(){for(var e={},t=this.reportQueue.size(),r=0;r<t;r++){var o,i=(o=this.reportQueue.dequeue()).reportDatas,s=o.dataLen;e[o=o.product]||(e[o]=[]),e[o]=n(e[o],i),this.reportQueue.enqueue({reportDatas:i,dataLen:s,product:o})}return e},u.prototype.readReportQueueData=function(){for(var e=[],t=this.reportQueue.size(),r=0;r<t;r++){var o=this.reportQueue.dequeue(),i=o.reportDatas;o.dataLen,o.product,e.push.apply(e,n(i))}return e},t.ZegoService=r=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var o=r(26),n=r(4),i=r(0);function s(e,t,r,n){this.env=e,this.product=t,this.pro=r,this.stateCenter=n,this.service=new o.ZegoSocketService(this.env,this.product,this.pro,this.stateCenter),this.cmdSeq=0,this.responseRouters={}}s.prototype.handleSendCommandMsgRsp=function(e){var t,r,o=this,n=this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)];null!=n&&(r=n._data,delete this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)],this.service.sendCommandList.remove(n),0===e.code?setTimeout((function(){r&&null!=r.success&&r.success(e,o.cmdSeq)}),0):setTimeout((function(){r&&null!=r.error&&r.error(e,o.cmdSeq)}),0))},s.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){e.handleSendCommandMsgRsp(t)}},s.prototype.closeHandler=function(e){this.service.closeHandler(e)},s.prototype.openHandler=function(e){this.service.openHandler(e)},s.prototype.errorHandler=function(e){this.service.errorHandler(e)},s.prototype.getHeader=function(e){return{Protocol:"req",cmd:e,appid:123,seq:++this.cmdSeq,session_id:""}},s.prototype.startCheck=function(){this.service.startCheck()},s.prototype.stopCheck=function(){this.service.stopCheck()},s.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},s.prototype.createSocket=function(e){this.service.createSocket(e),this.responseRouters={}},s.prototype.closeSocket=function(){this.service.closeSocket()},s.prototype.sendMessage=function(e,t,r,o,s,a){return this.service.isDisConnect()?(o&&o(i.SOCKET_DISCONNECT),0):(e=s||this.getHeader(e),this.service.sendMessage(e,t,r,o,{timeOut:1e3*n.DEFAULT_CONFIG.netTimeout}))},s.prototype.on=function(e,t){this.responseRouters[e]=t},t.LogService=r=s},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSocketService=void 0,r(27)),i=r(0),s=r(28);function a(e,t,r,o){this.product=t,this.pro=r,this.stateCenter=o,this.socket=null,this.sendCommandList=new i.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}a.prototype.createSocket=function(e){this.socket=n.createZegoWebSocket(e,this.ENV),this.socket.binaryType="arraybuffer"},a.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},a.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},a.prototype.sendMessage=function(e,t,r,n,i){void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i={timeOut:6e3});var a=o(o({},this.stateCenter.processData),{time_upload:Date.now()});return r={data:a={message_id:e.seq,product:this.product,s:JSON.stringify({speed_detail:t,process:a})},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:i.timeOut,success:r,error:n},n=this.sendCommandList.push(r),this.sendCommandMap[r.seq]=n,this.socket&&"pb"!==this.pro&&(a=s.deflate(JSON.stringify(a),{to:"string"}),this.socket.send(a)),e.seq},a.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(i.errorList.TIMEOUT,t._data.data.message_id,t._data.data.s)}),0),t=e.getFirst()},a.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),o=Date.parse(new Date+""),n=0;!(null==r||r._data&&r._data.sendTime+r._data.timeOut>o||(r._data&&delete t[r._data.data.message_id],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+this.sendDataDropTimeout<o||r&&r._data&&r._data.error&&r._data.error(i.errorList.TIMEOUT,r._data.data.message_id,r._data.data.s),++n>=this.sendDataCheckOnceCount));)r=e.getFirst()},a.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},a.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},a.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.responseHandler(),e(r)})},a.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.data))),e.onMessage(t)})},a.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},a.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},a.prototype.onMessage=function(e){},t.ZegoSocketService=r=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var o=r(0),n=(i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()},i);function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=n,t.createZegoWebSocket=function(e,t){return new(t===o.ZEGO_ENV.BROWSER?WebSocket:n)(e)}},function(e,t,r){!function(e){"use strict";function t(e){for(var t=e.length;0<=--t;)e[t]=0}var r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),n=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576),a=(t(s),new Array(60)),c=(t(a),new Array(512)),u=(t(c),new Array(256)),l=(t(u),new Array(29));t(l);var d,h,p,f=new Array(30);function _(e,t,r,o,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=o,this.max_length=n,this.has_stree=e&&e.length}function g(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function m(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function v(e){8<e.bi_valid?x(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function y(e,t,r,o){var n=2*t,i=2*r;return e[n]<e[i]||e[n]===e[i]&&o[t]<=o[r]}function b(e,t,n){var i,s,a,c,d=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],s=e.pending_buf[e.l_buf+d],d++,0==i?U(e,s,t):(a=u[s],U(e,a+256+1,t),0!==(c=r[a])&&(s-=l[a],B(e,s,c)),a=M(--i),U(e,a,n),0!==(c=o[a])&&(i-=f[a],B(e,i,c))),d<e.last_lit;);U(e,256,t)}function S(e,t){var r,o,n,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<c;r++)0!==i[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(n=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[n]=0,e.opt_len--,a&&(e.static_len-=s[2*n+1]);for(t.max_code=u,r=e.heap_len>>1;1<=r;r--)z(e,i,r);for(n=c;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],z(e,i,1),o=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=o,i[2*n]=i[2*r]+i[2*o],e.depth[n]=(e.depth[r]>=e.depth[o]?e.depth[r]:e.depth[o])+1,i[2*r+1]=i[2*o+1]=n,e.heap[1]=n++,z(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var l,d,h,p,f,_=e,g=t.dyn_tree,m=t.max_code,v=t.stat_desc.static_tree,y=t.stat_desc.has_stree,b=t.stat_desc.extra_bits,S=t.stat_desc.extra_base,E=t.stat_desc.max_length,T=0,w=0;w<=15;w++)_.bl_count[w]=0;for(g[2*_.heap[_.heap_max]+1]=0,l=_.heap_max+1;l<573;l++)(w=g[2*g[2*(d=_.heap[l])+1]+1]+1)>E&&(w=E,T++),g[2*d+1]=w,m<d||(_.bl_count[w]++,p=0,S<=d&&(p=b[d-S]),f=g[2*d],_.opt_len+=f*(w+p),y&&(_.static_len+=f*(v[2*d+1]+p)));if(0!==T){do{for(w=E-1;0===_.bl_count[w];)w--}while(_.bl_count[w]--,_.bl_count[w+1]+=2,_.bl_count[E]--,0<(T-=2));for(w=E;0!==w;w--)for(d=_.bl_count[w];0!==d;)(h=_.heap[--l])>m||(g[2*h+1]!==w&&(_.opt_len+=(w-g[2*h+1])*g[2*h],g[2*h+1]=w),d--)}H(i,u,e.bl_count)}function E(e,t,r){var o,n,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(r+1)+1]=65535,o=0;o<=r;o++)n=s,s=t[2*(o+1)+1],++a<c&&n===s||(a<u?e.bl_tree[2*n]+=a:0!==n?(n!==i&&e.bl_tree[2*n]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=n,u=(a=0)===s?(c=138,3):n===s?(c=6,3):(c=7,4))}function T(e,t,r){var o,n,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),o=0;o<=r;o++)if(n=s,s=t[2*(o+1)+1],!(++a<c&&n===s)){if(a<u)for(;U(e,n,e.bl_tree),0!=--a;);else 0!==n?(n!==i&&(U(e,n,e.bl_tree),a--),U(e,16,e.bl_tree),B(e,a-3,2)):a<=10?(U(e,17,e.bl_tree),B(e,a-3,3)):(U(e,18,e.bl_tree),B(e,a-11,7));i=n,u=(a=0)===s?(c=138,3):n===s?(c=6,3):(c=7,4)}}function w(e,t,r,o){B(e,0+(o?1:0),3),o=t,t=r,v(r=e),x(r,t),x(r,~t),r.pending_buf.set(r.window.subarray(o,o+t),r.pending),r.pending+=t}function C(e,t,r,o){var n=Z,i=o+r;e^=-1;for(var s=o;s<i;s++)e=e>>>8^n[255&(e^t[s])];return-1^e}function I(e,t){return e.msg=F[t],t}function O(e){return(e<<1)-(4<e?9:0)}function k(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function R(e,t){Q(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,k(e.strm)}function A(e,t){e.pending_buf[e.pending++]=t}function P(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var r,o,n=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-_e?e.strstart-(e.w_size-_e):0,u=e.window,l=e.w_mask,d=e.prev,h=e.strstart+258,p=u[i+s-1],f=u[i+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(r=t)+s]===f&&u[r+s-1]===p&&u[r]===u[i]&&u[++r]===u[i+1]){for(i+=2,r++;u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&i<h;);if(o=258-(h-i),i=h-258,s<o){if(e.match_start=t,a<=(s=o))break;p=u[i+s-1],f=u[i+s]}}}while((t=d[t&l])>c&&0!=--n);return s<=e.lookahead?s:e.lookahead}function N(e,t){for(var r,o;;){if(e.lookahead<_e){if(ve(e),e.lookahead<_e&&t===X)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-_e&&(e.match_length=L(e,r)),3<=e.match_length)if(o=K(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=me(e,e.ins_h,e.window[e.strstart+1]);else o=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(R(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(R(e,!1),0===e.strm.avail_out)?1:2}function D(e,t){for(var r,o,n;;){if(e.lookahead<_e){if(ve(e),e.lookahead<_e&&t===X)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-_e&&(e.match_length=L(e,r),e.match_length<=5&&(e.strategy===ue||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-3,o=K(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,o&&(R(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((o=K(e,0,e.window[e.strstart-1]))&&R(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=K(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(R(e,!1),0===e.strm.avail_out)?1:2}t(f);var M=function(e){return e<256?c[e]:c[256+(e>>>7)]},x=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},B=function(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},U=function(e,t,r){B(e,r[2*t],r[2*t+1])},j=function(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1},H=function(e,t,r){for(var o,n=new Array(16),i=0,s=1;s<=15;s++)n[s]=i=i+r[s-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=j(n[a]++,a))}},z=function(e,t,r){for(var o=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&y(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!y(t,o,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=o},V=!1,q=w,G=function(e,t,r,o){for(var n=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;i=i+(n=n+t[o++]|0)|0,--s;);n%=65521,i%=65521}return n|i<<16|0},Z=new Uint32Array(function(){for(var e=[],t=0;t<256;t++){for(var r=t,o=0;o<8;o++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}()),F={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},W={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Y=q,Q=function(e,t,r,o){var n,c,u,l=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==e.dyn_ltree[2*r])return 1;return 0}(e)),S(e,e.l_desc),S(e,e.d_desc),l=function(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*i[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=n&&(n=c)):n=c=r+5,r+4<=n&&-1!==t)w(e,t,r,o);else if(4===e.strategy||c===n)B(e,2+(o?1:0),3),b(e,s,a);else{B(e,4+(o?1:0),3);var d=e,h=(t=e.l_desc.max_code+1,r=e.d_desc.max_code+1,l+1);for(B(d,t-257,5),B(d,r-1,5),B(d,h-4,4),u=0;u<h;u++)B(d,d.bl_tree[2*i[u]+1],3);T(d,d.dyn_ltree,t-1),T(d,d.dyn_dtree,r-1),b(e,e.dyn_ltree,e.dyn_dtree)}m(e),o&&v(e)},K=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(u[r]+256+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1},J=function(e){B(e,2,3),U(e,256,s),16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},X=W.Z_NO_FLUSH,$=W.Z_PARTIAL_FLUSH,ee=W.Z_FULL_FLUSH,te=W.Z_FINISH,re=W.Z_BLOCK,oe=W.Z_OK,ne=W.Z_STREAM_END,ie=W.Z_STREAM_ERROR,se=W.Z_DATA_ERROR,ae=W.Z_BUF_ERROR,ce=W.Z_DEFAULT_COMPRESSION,ue=W.Z_FILTERED,le=W.Z_HUFFMAN_ONLY,de=W.Z_RLE,he=W.Z_FIXED,pe=W.Z_UNKNOWN,fe=W.Z_DEFLATED,_e=262,ge=function(e){for(var t=e.length;0<=--t;)e[t]=0},me=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},ve=function(e){var t,r,o,n,i,s,a,c,u,l=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-_e)){for(e.window.set(e.window.subarray(l,l+l),0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=r=e.hash_size;o=e.head[--t],e.head[t]=l<=o?o-l:0,--r;);for(t=r=l;o=e.prev[--t],e.prev[t]=l<=o?o-l:0,--r;);c+=l}if(0===e.strm.avail_in)break;if(i=e.strm,s=e.window,a=e.strstart+e.lookahead,u=void 0,r=0===(u=(u=i.avail_in)>c?c:u)?0:(i.avail_in-=u,s.set(i.input.subarray(i.next_in,i.next_in+u),a),1===i.state.wrap?i.adler=G(i.adler,s,u,a):2===i.state.wrap&&(i.adler=C(i.adler,s,u,a)),i.next_in+=u,i.total_in+=u,u),e.lookahead+=r,3<=e.lookahead+e.insert)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=me(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=me(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<_e&&0!==e.strm.avail_in)};function ye(e,t,r,o,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=o,this.func=n}var be=[new ye(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ve(e),0===e.lookahead&&t===X)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+r;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,R(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-_e&&(R(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(R(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(R(e,!1),e.strm.avail_out),1)})),new ye(4,4,8,4,N),new ye(4,5,16,8,N),new ye(4,6,32,32,N),new ye(4,4,16,16,D),new ye(8,16,32,32,D),new ye(8,16,128,128,D),new ye(8,32,128,256,D),new ye(32,128,258,1024,D),new ye(32,258,258,4096,D)];function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=fe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ee=function(e){if(!e||!e.state)return I(e,ie);e.total_in=e.total_out=0,e.data_type=pe;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=X,function(e){if(!V){for(var t,i,v,y=new Array(16),b=0,S=0;S<28;S++)for(l[S]=b,t=0;t<1<<r[S];t++)u[b++]=S;for(u[b-1]=S,S=v=0;S<16;S++)for(f[S]=v,t=0;t<1<<o[S];t++)c[v++]=S;for(v>>=7;S<30;S++)for(f[S]=v<<7,t=0;t<1<<o[S]-7;t++)c[256+v++]=S;for(i=0;i<=15;i++)y[i]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,y[8]++;for(;t<=255;)s[2*t+1]=9,t++,y[9]++;for(;t<=279;)s[2*t+1]=7,t++,y[7]++;for(;t<=287;)s[2*t+1]=8,t++,y[8]++;for(H(s,287,y),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=j(t,5);d=new _(s,r,257,286,15),h=new _(a,o,0,30,15),p=new _(new Array(0),n,0,19,7),V=!0}e.l_desc=new g(e.dyn_ltree,d),e.d_desc=new g(e.dyn_dtree,h),e.bl_desc=new g(e.bl_tree,p),e.bi_buf=0,e.bi_valid=0,m(e)}(t),oe};function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){}for(var we=new Uint8Array(256),Ce=0;Ce<256;Ce++)we[Ce]=252<=Ce?6:248<=Ce?5:240<=Ce?4:224<=Ce?3:192<=Ce?2:1;function Ie(e){for(var t,r,o,n,i=e.length,s=0,a=0;a<i;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(o=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(o-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=n=0;n<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(o=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(o-56320),a++),r<128?t[n++]=r:(r<2048?t[n++]=192|r>>>6:(r<65536?t[n++]=224|r>>>12:(t[n++]=240|r>>>18,t[n++]=128|r>>>12&63),t[n++]=128|r>>>6&63),t[n++]=128|63&r);return t}function Oe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}we[254]=we[254]=1;var ke=Object.prototype.toString,Re=W.Z_NO_FLUSH,Ae=W.Z_SYNC_FLUSH,Pe=W.Z_FULL_FLUSH,Le=W.Z_FINISH,Ne=W.Z_OK,De=W.Z_STREAM_END,Me=W.Z_DEFAULT_COMPRESSION,xe=W.Z_DEFAULT_STRATEGY,Be=W.Z_DEFLATED;function Ue(e){this.options=function(e){for(var t,r,o=Array.prototype.slice.call(arguments,1);o.length;){var n=o.shift();if(n){if("object"!==Te(n))throw new TypeError(n+"must be non-object");for(var i in n)t=n,r=i,Object.prototype.hasOwnProperty.call(t,r)&&(e[i]=n[i])}}return e}({level:Me,method:Be,chunkSize:16384,windowBits:15,memLevel:8,strategy:xe},e||{});var t,r=((e=this.options).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Oe,this.strm.avail_out=0,function(e,t,r,o,n,i){if(!e)return ie;var s=1;if(t===ce&&(t=6),o<0?(s=0,o=-o):15<o&&(s=2,o-=16),n<1||9<n||r!==fe||o<8||15<o||t<0||9<t||i<0||he<i)return I(e,ie);8===o&&(o=9);var a=new Se;return(e.state=a).strm=e,a.wrap=s,a.gzhead=null,a.w_bits=o,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=n+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<n+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=i,a.method=r,(o=Ee(s=e))===oe&&((s=s.state).window_size=2*s.w_size,ge(s.head),s.max_lazy_match=be[s.level].max_lazy,s.good_match=be[s.level].good_length,s.nice_match=be[s.level].nice_length,s.max_chain_length=be[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),o}(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(r!==Ne)throw new Error(F[r]);if(e.header&&(o=this.strm,t=e.header,o&&o.state&&2===o.state.wrap&&(o.state.gzhead=t)),e.dictionary){var o="string"==typeof e.dictionary?Ie(e.dictionary):"[object ArrayBuffer]"===ke.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((r=function(e,t){var r=t.length;if(!e||!e.state)return ie;var o=e.state,n=o.wrap;if(2===n||1===n&&42!==o.status||o.lookahead)return ie;1===n&&(e.adler=G(e.adler,t,r,0)),o.wrap=0,r>=o.w_size&&(0===n&&(ge(o.head),o.strstart=0,o.block_start=0,o.insert=0),(i=new Uint8Array(o.w_size)).set(t.subarray(r-o.w_size,r),0),t=i,r=o.w_size);var i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,ve(o);3<=o.lookahead;){for(var c=o.strstart,u=o.lookahead-2;o.ins_h=me(o,o.ins_h,o.window[c+3-1]),o.prev[c&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=c,c++,--u;);o.strstart=c,o.lookahead=2,ve(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=2,o.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,o.wrap=n,oe}(this.strm,o))!==Ne)throw new Error(F[r]);this._dict_set=!0}}function je(e,t){if((t=new Ue(t)).push(e,!0),t.err)throw t.msg||F[t.err];return t.result}function He(e,t){return(t=t||{}).raw=!0,je(e,t)}function ze(e,t){return(t=t||{}).gzip=!0,je(e,t)}Ue.prototype.push=function(e,t){var r,o,n=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Le:Re,"string"==typeof e?n.input=Ie(e):"[object ArrayBuffer]"===ke.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(o===Ae||o===Pe)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(function(e,t){var r,o;if(!e||!e.state||re<t||t<0)return e?I(e,ie):ie;var n=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==te)return I(e,0===e.avail_out?ae:ie);n.strm=e;var i=n.last_flush;if(n.last_flush=t,42===n.status&&(2===n.wrap?(e.adler=0,A(n,31),A(n,139),A(n,8),n.gzhead?(A(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),A(n,255&n.gzhead.time),A(n,n.gzhead.time>>8&255),A(n,n.gzhead.time>>16&255),A(n,n.gzhead.time>>24&255),A(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),A(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(A(n,255&n.gzhead.extra.length),A(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=C(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(A(n,0),A(n,0),A(n,0),A(n,0),A(n,0),A(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),A(n,3),n.status=113)):(s=fe+(n.w_bits-8<<4)<<8,s|=(n.strategy>=le||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(s|=32),s+=31-s%31,n.status=113,P(n,s),0!==n.strstart&&(P(n,e.adler>>>16),P(n,65535&e.adler)),e.adler=1)),69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(e.adler=C(e.adler,n.pending_buf,n.pending-r,r)),k(e),r=n.pending,n.pending!==n.pending_buf_size));)A(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(e.adler=C(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=C(e.adler,n.pending_buf,n.pending-r,r)),k(e),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}}while(o=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,A(n,o),0!==o);n.gzhead.hcrc&&n.pending>r&&(e.adler=C(e.adler,n.pending_buf,n.pending-r,r)),0===o&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=C(e.adler,n.pending_buf,n.pending-r,r)),k(e),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}}while(o=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,A(n,o),0!==o);n.gzhead.hcrc&&n.pending>r&&(e.adler=C(e.adler,n.pending_buf,n.pending-r,r)),0===o&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&k(e),n.pending+2<=n.pending_buf_size&&(A(n,255&e.adler),A(n,e.adler>>8&255),e.adler=0,n.status=113)):n.status=113),0!==n.pending){if(k(e),0===e.avail_out)return n.last_flush=-1,oe}else if(0===e.avail_in&&O(t)<=O(i)&&t!==te)return I(e,ae);if(666===n.status&&0!==e.avail_in)return I(e,ae);if(0!==e.avail_in||0!==n.lookahead||t!==X&&666!==n.status){var s=n.strategy===le?function(e,t){for(var r;;){if(0===e.lookahead&&(ve(e),0===e.lookahead)){if(t===X)return 1;break}if(e.match_length=0,r=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(R(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(R(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===de?function(e,t){for(var r,o,n,i,s=e.window;;){if(e.lookahead<=258){if(ve(e),e.lookahead<=258&&t===X)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(o=s[n=e.strstart-1])===s[++n]&&o===s[++n]&&o===s[++n]){for(i=e.strstart+258;o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&n<i;);e.match_length=258-(i-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(r=K(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(R(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(R(e,!1),0===e.strm.avail_out)?1:2}(n,t):be[n.level].func(n,t);if(3!==s&&4!==s||(n.status=666),1===s||3===s)return 0===e.avail_out&&(n.last_flush=-1),oe;if(2===s&&(t===$?J(n):t!==re&&(Y(n,0,0,!1),t===ee&&(ge(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),k(e),0===e.avail_out))return n.last_flush=-1,oe}return t!==te?oe:n.wrap<=0?ne:(2===n.wrap?(A(n,255&e.adler),A(n,e.adler>>8&255),A(n,e.adler>>16&255),A(n,e.adler>>24&255),A(n,255&e.total_in),A(n,e.total_in>>8&255),A(n,e.total_in>>16&255),A(n,e.total_in>>24&255)):(P(n,e.adler>>>16),P(n,65535&e.adler)),k(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?oe:ne)}(n,o)===De)return 0<n.next_out&&this.onData(n.output.subarray(0,n.next_out)),r=function(e){if(!e||!e.state)return ie;var t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?I(e,ie):(e.state=null,113===t?I(e,se):oe)}(this.strm),this.onEnd(r),this.ended=!0,r===Ne;if(0!==n.avail_out){if(0<o&&0<n.next_out)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Ue.prototype.onData=function(e){this.chunks.push(e)},Ue.prototype.onEnd=function(e){e===Ne&&(this.result=function(e){for(var t=0,r=0,o=e.length;r<o;r++)t+=e[r].length;for(var n=new Uint8Array(t),i=0,s=0,a=e.length;i<a;i++){var c=e[i];n.set(c,s),s+=c.length}return n}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ve={Deflate:Ue,deflate:q=je,deflateRaw:He,gzip:ze,constants:W};e.Deflate=Ue,e.constants=W,e.default=Ve,e.deflate=q,e.deflateRaw=He,e.gzip=ze,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";function o(e,t,r,o){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof r)switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+r)}else this.interval=r;this.parentBucket=o,this.content=0,this.lastDrip=+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.TokenBucket=void 0,o.prototype.removeTokens=function(e,t){var r=this;return this.bucketSize?e>this.bucketSize?(setTimeout(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),e>this.content?o():this.parentBucket?this.parentBucket.removeTokens(e,(function(n,i){return n?t(n,null):e>r.content?o():(r.content-=e,void t(null,Math.min(i,r.content)))})):(this.content-=e,setTimeout(t.bind(null,null,this.content),0),!0)):(setTimeout(t.bind(null,null,e,Number.POSITIVE_INFINITY),0),!0);function o(){var o=Math.ceil((e-r.content)*(r.interval/r.tokensPerInterval));return setTimeout((function(){r.removeTokens(e,t)}),o),!1}},o.prototype.tryRemoveTokens=function(e){return!(this.bucketSize&&(e>this.bucketSize||(this.drip(),e>this.content||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)||(this.content-=e,0))))},o.prototype.drip=function(){var e,t;this.tokensPerInterval?(e=+new Date,t=Math.max(e-this.lastDrip,0),this.lastDrip=e,t*=this.tokensPerInterval/this.interval,this.content=Math.min(this.content+t,this.bucketSize)):this.content=this.bucketSize},t.TokenBucket=o},function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,(c=n?[2&c[0],n.value]:c)[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],o=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStoreHandler=void 0,r(11)),a=r(5),c=r(4),u=i(r(12));function l(e,t,r,o,n,i){this.name=e,this.storeName=t,this.config=r,this.traceType=o,this.staticConfig=n,this.stateCenter=i,this.storeSize=0,this.storeTime=0,this.storeDelPer=c.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.store=s.createZegoStore(e,r.env,t),this.commonStore=s.createZegoStore("data_common",r.env,"reporter")}l.prototype.init=function(){return o(this,void 0,void 0,(function(){var e,t;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),[4,this.transferStoreData()];case 1:return r.sent(),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 2:return(e=r.sent())?[3,4]:(t={storeSize:this.storeSize,lock:0,pros:1},[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,t)]);case 3:return r.sent(),[3,5];case 4:t="string"==typeof e?JSON.parse(e):e,this.storeSize=t.storeSize,r.label=5;case 5:return[3,7];case 6:return r.sent(),[3,7];case 7:return[2]}}))}))},l.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},l.prototype.resetCommonStore=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return e.sent(),[2]}}))}))},l.prototype.transferStoreData=function(){return o(this,void 0,void 0,(function(){var e,t,r,i,c,u,l,d,h,p,f,_=this;return n(this,(function(g){switch(g.label){case 0:return[4,this.commonStore.keys()];case 1:e=g.sent(),t=0,g.label=2;case 2:return t<e.length?(f=e[t])===this.name+this.interSymbol+this.storeName?[3,12]:[4,this.commonStore.getItem(f)]:[3,13];case 3:return(h="string"==typeof(h=g.sent())?JSON.parse(h):h).lock||h.pros?[3,12]:(d=f.split(this.interSymbol),r=d[0],i=d[1],[4,(c=s.createZegoStore(r,this.config.env,i)).keys()]);case 4:return 0!=(p=g.sent()).length?[3,5]:[3,11];case 5:return h.lock=1,[4,this.commonStore.setItem(f,h)];case 6:g.sent(),u=0,g.label=7;case 7:return u<p.length?(l=p[u],[4,c.getItem(l)]):[3,11];case 8:return d=g.sent(),-1!==l.indexOf("pending")?d&&JSON.parse(d).forEach((function(e){return o(_,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})):(f=a.analyzeKey(l),h=f.level,p=f.timestamp,f=f.seq,this.storeData({level:h,timestamp:p,seq:f,content:d})),[4,c.removeItem(l)];case 9:g.sent(),g.label=10;case 10:return u++,[3,7];case 11:this.drops.push({name:r,storeName:i}),g.label=12;case 12:return t++,[3,2];case 13:return setTimeout((function(){return o(_,void 0,void 0,(function(){var e,t,r;return n(this,(function(o){switch(o.label){case 0:e=0,o.label=1;case 1:if(!(e<this.drops.length))return[3,7];r=this.drops[e],t=r.name,r=r.storeName,o.label=2;case 2:return o.trys.push([2,5,,6]),[4,this.dropInstance(t,r)];case 3:return o.sent(),[4,this.commonStore.removeItem(t+this.interSymbol+r)];case 4:case 5:return o.sent(),[3,6];case 6:return e++,[3,1];case 7:return[2]}}))}))}),1e3),[2]}}))}))},l.prototype.dropInstance=function(e,t){return new Promise((function(r,o){u.default.dropInstance({name:e+":"+t}).then((function(){r()})).catch((function(e){o(e)}))}))},l.prototype.setDropCallBack=function(e){this.dropCallBack=e},l.prototype.storeData=function(e){var t=this;return new Promise((function(r,i){return o(t,void 0,void 0,(function(){var t,o,i,s,c,u=this;return n(this,(function(n){switch(n.label){case 0:t=e.level,o=e.timestamp,s=e.seq,i=e.content,s=t+"_"+o+"_"+s,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.store.getItem(s)];case 2:return n.sent()?(r(),[2]):[3,4];case 3:return n.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(e),[2];if(c=a.calculateMemSize(s)+a.calculateMemSize(i),this.staticConfig.totalDBSize-c<=0)return this.dropDBData(t,s,i).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),r(),[2];n.label=5;case 5:return n.trys.push([5,8,,9]),[4,this.store.setItem(s,i)];case 6:return n.sent(),this.storeSize+=c,this.staticConfig.totalDBSize-=c,[4,this.refreshStoreInfo()];case 7:return n.sent(),r(),[3,9];case 8:return"QuotaExceededError"===n.sent().name&&this.dropDBData(t,s,i).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),[3,9];case 9:return[2]}}))}))}))},l.prototype.loadPendingData=function(){return o(this,void 0,void 0,(function(){var e=this;return n(this,(function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return t.sent().forEach((function(t){return o(e,void 0,void 0,(function(){var e,r=this;return n(this,(function(i){switch(i.label){case 0:return-1===t.indexOf("pending")?[3,3]:[4,this.store.getItem(t)];case 1:return(e=i.sent())?(JSON.parse(e).forEach((function(e){return o(r,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})),[4,this.store.removeItem(t)]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))})),[2]}}))}))},l.prototype.storePendingData=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.store.setItem("pending"+(new Date).getTime(),JSON.stringify(e))];case 1:return t.sent(),[2]}}))}))},l.prototype.bufferDump=function(){return o(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return(e=this.bufferData.pop())?[4,this.storeData(e)]:[3,2];case 1:t.sent(),this.bufferDump(),t.label=2;case 2:return[2]}}))}))},l.prototype.dropDBData=function(e,t,r){return o(this,void 0,void 0,(function(){var e=this;return n(this,(function(i){return this.droping=!0,[2,new Promise((function(i,s){return o(e,void 0,void 0,(function(){var e,o,c,u;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(c=n.sent()).reverse(),e=Math.ceil(c.length*this.storeDelPer),u=0,n.label=2;case 2:return u<e?[4,this.store.getItem(c[u])]:[3,7];case 3:return null==(o=n.sent())?[3,6]:[4,this.store.removeItem(c[u])];case 4:return n.sent(),c=a.calculateMemSize(c[u])+a.calculateMemSize(o),this.staticConfig.totalDBSize+=c,this.storeSize-=c,[4,this.refreshStoreInfo()];case 5:n.sent(),this.dropCallBack(o),n.label=6;case 6:return u++,[3,2];case 7:return[4,this.store.setItem(t,r)];case 8:return n.sent(),this.storeSize+=a.calculateMemSize(t)+a.calculateMemSize(r),[4,this.refreshStoreInfo()];case 9:return n.sent(),i(),[3,11];case 10:return u=n.sent(),s(u),[3,11];case 11:return[2]}}))}))}))]}))}))},l.prototype.removeDataItem=function(e){var t=this;return new Promise((function(r,i){return o(t,void 0,void 0,(function(){var t,o,s,c,u;return n(this,(function(n){switch(n.label){case 0:t=e.level,o=e.timestamp,s=e.seq,e.content,s=t+"_"+o+"_"+s,n.label=1;case 1:return n.trys.push([1,6,,7]),[4,this.store.getItem(s)];case 2:return(c=n.sent())?[4,this.store.removeItem(s)]:[3,5];case 3:return n.sent(),u=1==this.config.env?a.calculateMemSize(JSON.parse(c)):a.calculateMemSize(c),u=a.calculateMemSize(s)+u,this.storeSize-=u,this.staticConfig.totalDBSize+=u,this.traceType.DB_O_DONE+=u,[4,this.refreshStoreInfo()];case 4:n.sent(),r(),n.label=5;case 5:return[3,7];case 6:return u=n.sent(),i(u),[3,7];case 7:return[2]}}))}))}))},l.prototype.refreshStoreInfo=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 1:return e.sent()?[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},l.prototype.readStoreDataItem=function(){var e=this;return new Promise((function(t,r){return o(e,void 0,void 0,(function(){var e,o,i,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return o=n.sent(),[4,this.store.getItem(o[0])];case 2:return s=n.sent(),i=a.analyzeKey(o[0]),e=i.level,o=i.timestamp,i=i.seq,t({level:e,timestamp:o,seq:i,content:s}),[3,4];case 3:return s=n.sent(),r(s),[3,4];case 4:return[2]}}))}))}))},l.prototype.loadDBData=function(e,t,r,i){var s=this;return new Promise((function(c,u){return o(s,void 0,void 0,(function(){var o,s,l,d,h,p,f,_,g,m;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),[4,this.store.keys()];case 1:o=n.sent(),s=[],h=d=m=l=0,n.label=2;case 2:return h<o.length?i(o[h])?[3,4]:[4,this.store.getItem(o[h])]:[3,5];case 3:if(null==(g=n.sent()))return[3,4];if(_=a.analyzeKey(o[h]),p=_.level,f=_.timestamp,_=_.seq,s.push({level:p,timestamp:f,seq:_,content:g,key:o[h]}),g=a.calculateMemSize(g),m+=g,e<=(l+=g)&&(l=0,d++),t<=d&&r<=m)return[3,5];n.label=4;case 4:return h++,[3,2];case 5:return c({datas:s,len:m}),[3,7];case 6:return m=n.sent(),u(m),[3,7];case 7:return[2]}}))}))}))},l.prototype.sortKeys=function(e,t){void 0===t&&(t=!1),e.sort((function(e,t){var r=e.split("_");return(t=+(e=t.split("_"))[0]-+r[0])?t:(t=+e[1]-+r[1])||+e[2]-+r[2]})),t&&e.reverse()},t.ZegoStoreHandler=r=l},function(e,t,r){"use strict";var o=r(32),n=r(33).Buffer;function i(e){return function(t){if(n.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*o.STRING;case"boolean":return o.BOOLEAN;case"number":return o.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(t)?Symbol.keyFor(t).length*o.STRING:(t.toString().length-8)*o.STRING;case"object":if(Array.isArray(t))return t.map(i(e)).reduce((function(e,t){return e+t}),0);var r=e,s=t;if(null==s)return 0;for(var a=0,c=function(e){var t=[];for(var r in e)t.push(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(e),Array.prototype.push.apply(t,e)),t}(s),u=0;u<c.length;u++){var l=c[u];if("object"==typeof s[l]&&null!==s[l]){if(r.has(s[l]))continue;r.add(s[l])}a+=i(r)(l);try{a+=i(r)(s[l])}catch(r){r instanceof RangeError&&(a=0)}}return a;default:return 0}}}e.exports=function(e){return i(new WeakSet)(e)}},function(e,t){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(e,t,r){"use strict";(function(e){var o=r(35),n=r(36),i=r(37);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(e=null===e?new c(t):e).length=t,e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"!=typeof e)return u(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}function u(e,t,r,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var n=e,s=t,u=r;if(s.byteLength,u<0||s.byteLength<u)throw new RangeError("'offset' is out of bounds");if(s.byteLength<u+(o||0))throw new RangeError("'length' is out of bounds");return s=void 0===u&&void 0===o?new Uint8Array(s):void 0===o?new Uint8Array(s,u):new Uint8Array(s,u,o),c.TYPED_ARRAY_SUPPORT?(n=s).__proto__=c.prototype:n=h(n,s),n}if("string"==typeof t){if(u=e,o=t,s=r,!c.isEncoding(s="string"==typeof s&&""!==s?s:"utf8"))throw new TypeError('"encoding" must be a valid string encoding');return(s=(u=a(u,n=0|f(o,s))).write(o,s))!==n?u.slice(0,s):u}var l;if(r=e,o=t,c.isBuffer(o))return 0!==(r=a(r,l=0|p(o.length))).length&&o.copy(r,0,0,l),r;if(o){if("undefined"!=typeof ArrayBuffer&&o.buffer instanceof ArrayBuffer||"length"in o)return"number"!=typeof o.length||(l=o.length)!=l?a(r,0):h(r,o);if("Buffer"===o.type&&i(o.data))return h(r,o.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var o=0;o<r;o+=1)e[o]=255&t[o];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var r=(e="string"!=typeof e?""+e:e).length;if(0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(o)return R(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}function g(e,t,r,o,n){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?n?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=c.from(t,o)),c.isBuffer(t))return 0===t.length?-1:m(e,t,r,o,n);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):m(e,[t],r,o,n);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,o,n){var i=1,s=e.length,a=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n)for(var u=-1,l=r;l<s;l++)if(c(e,l)===c(t,-1===u?0:l-u)){if(l-(u=-1===u?l:u)+1===a)return u*i}else-1!==u&&(l-=l-u),u=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var d=!0,h=0;h<a;h++)if(c(e,l+h)!==c(t,h)){d=!1;break}if(d)return l}return-1}function v(e,t,r,o){return P(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,o)}function y(e,t,r){r=Math.min(e.length,r);for(var o=[],n=t;n<r;){var i,s,a,c,u=e[n],l=null,d=239<u?4:223<u?3:191<u?2:1;if(n+d<=r)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[n+1]))&&127<(c=(31&u)<<6|63&i)&&(l=c);break;case 3:i=e[n+1],s=e[n+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:i=e[n+1],s=e[n+2],a=e[n+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)&&c<1114112&&(l=c)}null===l?(l=65533,d=1):65535<l&&(l-=65536,o.push(l>>>10&1023|55296),l=56320|1023&l),o.push(l),n+=d}var h=o,p=h.length;if(p<=b)return String.fromCharCode.apply(String,h);for(var f="",_=0;_<p;)f+=String.fromCharCode.apply(String,h.slice(_,_+=b));return f}t.Buffer=c,t.SlowBuffer=function(e){return c.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return l(e),e<=0||void 0===t?a(null,e):"string"==typeof r?a(null,e).fill(t,r):a(null,e).fill(t)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,o=t.length,n=0,i=Math.min(r,o);n<i;++n)if(e[n]!==t[n]){r=e[n],o=t[n];break}return r<o?-1:o<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;for(var r=c.allocUnsafe(t),o=0,n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?y(this,0,e):function(e,t,r){var n=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var i=t,s=r,a=this.length;(!s||s<0||a<s)&&(s=a);for(var c,u="",l=i=!i||i<0?0:i;l<s;++l)u+=(c=this[l])<16?"0"+c.toString(16):c.toString(16);return u;case"utf8":case"utf-8":return y(this,t,r);case"ascii":a=t;var d=r,h="";d=Math.min(this.length,d);for(var p=a;p<d;++p)h+=String.fromCharCode(127&this[p]);return h;case"latin1":case"binary":i=t;var f=r,_="";f=Math.min(this.length,f);for(var g=i;g<f;++g)_+=String.fromCharCode(this[g]);return _;case"base64":return v=r,0===(m=t)&&v===this.length?o.fromByteArray(this):o.fromByteArray(this.slice(m,v));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var m=t,v=r,b=this.slice(m,v),S="",E=0;E<b.length;E+=2)S+=String.fromCharCode(b[E]+256*b[E+1]);return S;default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(c.isBuffer(e))return this===e||0===c.compare(this,e);throw new TypeError("Argument must be a Buffer")},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,o,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===n&&(n=this.length),(t=void 0===t?0:t)<0||r>e.length||o<0||n>this.length)throw new RangeError("out of range index");if(n<=o&&r<=t)return 0;if(n<=o)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(n>>>=0)-(o>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(o,n),l=e.slice(t,r),d=0;d<a;++d)if(u[d]!==l[d]){i=u[d],s=l[d];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},c.prototype.write=function(e,t,r,o){if(void 0===t)o="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)o=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===o&&(o="utf8")):(o=r,r=void 0)}var n=this.length-t;if((void 0===r||n<r)&&(r=n),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o=o||"utf8";for(var i,s,a,c,u=!1;;)switch(o){case"hex":var l,d=e,h=r,p=(l=Number(t)||0,this.length-l);if((!h||p<(h=Number(h)))&&(h=p),(p=d.length)%2!=0)throw new TypeError("Invalid hex string");p/2<h&&(h=p/2);for(var f=0;f<h;++f){var _=parseInt(d.substr(2*f,2),16);if(isNaN(_))return f;this[l+f]=_}return f;case"utf8":case"utf-8":return s=t,a=r,P(R(e,(i=this).length-s),i,s,a);case"ascii":case"latin1":case"binary":return v(this,e,t,r);case"base64":return i=this,s=t,a=r,P(A(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,c=r,P(function(e,t){for(var r,o,n=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(o=e.charCodeAt(i))>>8,n.push(o%=256),n.push(r);return n}(e,this.length-p),this,p,c);default:if(u)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),u=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function S(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,r,o,n,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function T(e,t,r,o){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(e.length-r,2);n<i;++n)e[r+n]=(t&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function w(e,t,r,o){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(e.length-r,4);n<i;++n)e[r+n]=t>>>8*(o?n:3-n)&255}function C(e,t,r,o){if(r+o>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,o,i){return i||C(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function O(e,t,r,o,i){return i||C(e,0,r,8),n.write(e,t,r,o,52,8),r+8}c.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else for(var o=t-e,n=new c(o,void 0),i=0;i<o;++i)n[i]=this[i+e];return n},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return o},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var o=this[e+--t],n=1;0<t&&(n*=256);)o+=this[e+--t]*n;return o},c.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*t)),o},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var o=t,n=1,i=this[e+--o];0<o&&(n*=256);)i+=this[e+--o]*n;return(n*=128)<=i&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){return t||S(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},c.prototype.readInt16BE=function(e,t){return t||S(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},c.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,o){e=+e,t|=0,r|=0,o||E(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,i=0;for(this[t]=255&e;++i<r&&(n*=256);)this[t+i]=e/n&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,o){e=+e,t|=0,r|=0,o||E(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,i=1;for(this[t+n]=255&e;0<=--n&&(i*=256);)this[t+n]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):w(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,o){e=+e,t|=0,o||E(this,e,t,r,(o=Math.pow(2,8*r-1))-1,-o);var n=0,i=1,s=0;for(this[t]=255&e;++n<r&&(i*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/i>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,o){e=+e,t|=0,o||E(this,e,t,r,(o=Math.pow(2,8*r-1))-1,-o);var n=r-1,i=1,s=0;for(this[t+n]=255&e;0<=--n&&(i*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/i>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return O(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return O(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,o){if(r=r||0,o||0===o||(o=this.length),t>=e.length&&(t=e.length),(o=0<o&&o<r?r:o)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length);var n,i=(o=e.length-t<o-r?e.length-t+r:o)-r;if(this===e&&r<t&&t<o)for(n=i-1;0<=n;--n)e[n+t]=this[n+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<i;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,o){if("string"==typeof e){var n;if("string"==typeof t?(o=t,t=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===e.length&&(n=e.charCodeAt(0))<256&&(e=n),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=t;a<r;++a)this[a]=e;else for(var i=c.isBuffer(e)?e:R(new c(e,o).toString()),s=i.length,a=0;a<r-t;++a)this[a+t]=i[a%s];return this};var k=/[^+\/0-9A-Za-z-_]/g;function R(e,t){var r;t=t||1/0;for(var o=e.length,n=null,i=[],s=0;s<o;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!n){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===o){-1<(t-=3)&&i.push(239,191,189);continue}n=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&-1<(t-=3)&&i.push(239,191,189);if(n=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function A(e){return o.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,o){for(var n=0;n<o&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(34))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t;return 3*((e=(t=u(e))[0])+(t=t[1]))/4-t},t.toByteArray=function(e){for(var t,r=(o=u(e))[0],o=o[1],s=new i(3*(r+o)/4-o),a=0,c=0<o?r-4:r,l=0;l<c;l+=4)t=n[e.charCodeAt(l)]<<18|n[e.charCodeAt(l+1)]<<12|n[e.charCodeAt(l+2)]<<6|n[e.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===o&&(t=n[e.charCodeAt(l)]<<2|n[e.charCodeAt(l+1)]>>4,s[a++]=255&t),1===o&&(t=n[e.charCodeAt(l)]<<10|n[e.charCodeAt(l+1)]<<4|n[e.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,a=r-n;s<a;s+=16383)i.push(function(e,t){for(var r,n=[],i=s;i<t;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),n.push(o[r>>18&63]+o[r>>12&63]+o[r>>6&63]+o[63&r]);return n.join("")}(e,a<s+16383?a:s+16383));return 1==n?(t=e[r-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")};for(var o=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)o[a]=s[a],n[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,o,n){var i,s,a=8*n-o-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?n-1:0,h=r?-1:1;for(r=e[t+d],d+=h,i=r&(1<<-l)-1,r>>=-l,l+=a;0<l;i=256*i+e[t+d],d+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=o;0<l;s=256*s+e[t+d],d+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,o),i-=u}return(r?-1:1)*s*Math.pow(2,i-o)},t.write=function(e,t,r,o,n,i){var s,a,c=8*i-n-1,u=(1<<c)-1,l=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,p=o?1:-1;for(i=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(o=Math.pow(2,-s))<1&&(s--,o*=2),2<=(t+=1<=s+l?d/o:d*Math.pow(2,1-l))*o&&(s++,o/=2),u<=s+l?(a=0,s=u):1<=s+l?(a=(t*o-1)*Math.pow(2,n),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,n),s=0));8<=n;e[r+h]=255&a,h+=p,a/=256,n-=8);for(s=s<<n|a,c+=n;0<c;e[r+h]=255&s,h+=p,s/=256,c-=8);e[r+h-p]|=128*i}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.PendingQueue=void 0,r(0)),s=r(5);function a(e,t,r,o){var n=this;this.levels=e,this.product=t,this.staticConfig=r,this.stateCenter=o,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,e.forEach((function(e){n.cacheMap.set(e,new i.Queue)}))}a.prototype.enqueue=function(e,t){!(t=this.cacheMap.get(t))||t.all().find((function(t){return t.content==e.content}))||(t.enqueue(e),t=s.calculateMemSize(e.content),this.pendingDataSize+=t,this.size++,this.staticConfig.totalAvailCache-=t,this.enCallback&&this.enCallback(this.byteLength,this.size,this.pendingDataSize))},a.prototype.dequeue=function(e){return e=null==(e=this.cacheMap.get(e))?void 0:e.dequeue(),this.size--,this.deCallback&&this.deCallback(),e},a.prototype.findInQueue=function(e){var t=null==(t=this.cacheMap.get(e.level))?void 0:t.all();return null==t?void 0:t.find((function(t){return t.key===e.key}))},a.prototype.readReportData=function(e){var t=n(this.cacheMap.entries());return e=this.readData(t,e,!0),this.reset(),{totalLen:e.totalLen,reportDataArr:e.resArr}},a.prototype.readStoreData=function(e){var t=Math.ceil(this.pendingDataSize*e);return e=n(this.cacheMap.entries()).reverse(),t=this.readData(e,t,!1),this.refresh(t.totalLen),{totalLen:t.totalLen,storeArr:t.resArr}},a.prototype.readData=function(e,t,r){var n=[],i=0;e:for(var a=0;a<e.length;a++)for(var c=o(e[a],2),u=c[0],l=c[1];l.size();){var d=this.dequeue(u);if(n.push(d),t<(i+=s.calculateMemSize(d.content)))break e}return{totalLen:i,resArr:n}},a.prototype.decodeReportData=function(e){var t=this;e.forEach((function(e){t.enqueue(e,e.level)}))},a.prototype.setListener=function(e){this.enCallback=e.enCallback,this.deCallback=e.deCallback},a.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},a.prototype.refresh=function(e){this.pendingDataSize-=e,this.staticConfig.totalAvailCache+=e},a.prototype.reset=function(){this.byteLength=0},t.PendingQueue=r=a},function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,(c=n?[2&c[0],n.value]:c)[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],o=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.loadJS=void 0,r(40));function s(e,t,r){return(t=i.decrypt(e,t))&&i.hashMd5(t)===r?t:""}t.loadJS=function(e,t,r,i,a,c,u){var l=this;return new Promise((function(d,h){return o(l,void 0,void 0,(function(){var l,p,f,_,g;return n(this,(function(m){switch(m.label){case 0:if(l="dy",e)return[3,7];m.label=1;case 1:return m.trys.push([1,5,,6]),[4,t.getItem("code")];case 2:return p=m.sent(),[4,t.getItem("key")];case 3:return f=m.sent(),[4,t.getItem("hash")];case 4:_=m.sent();var v=s(p,f,_)||c,y=l,b=u,S=document.getElementsByTagName("HEAD").item(0),E=document.createElement("script");E.language="javascript",E.type="text/javascript",E.id=y,E.param=b;try{E.appendChild(document.createTextNode(v))}catch(y){E.text=v}return S.appendChild(E),d(),[3,6];case 5:return m.sent(),h(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{g=new ActiveXObject("Msxml2.XMLHTTP")}catch(m){g=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(g=new XMLHttpRequest);return g.open("GET",r,!0),g.send(null),g.onreadystatechange=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:if(4!=g.readyState)return[3,10];if(!(200<=g.status&&g.status<300||0==g.status||304==g.status))return[3,8];e.label=1;case 1:return e.trys.push([1,6,,7]),s(g.responseText,i,a)?[4,t.setItem("code",g.responseText)]:[3,5];case 2:return e.sent(),[4,t.setItem("key",i)];case 3:return e.sent(),[4,t.setItem("hash",a)];case 4:e.sent(),e.label=5;case 5:return d(),[3,7];case 6:return e.sent(),h(),[3,7];case 7:return[2];case 8:return h(),[2];case 9:return[3,11];case 10:case 11:return[2]}}))}))},[2]}}))}))}))}},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.hashMd5=t.decrypt=void 0,o(r(41))),i=o(r(42)),s=o(r(43));t.decrypt=function(e,t){var r="";try{r=i.default.decrypt(e,t).toString(s.default)}catch(e){}return r},t.hashMd5=function(e){return n.default(e).toString()}},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=a},function(e,t,r){"use strict";function o(){this.logLevel=t.ENUM_LOG_LEVEL.INFO}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=t.ENUM_LOG_LEVEL=void 0,t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},o.prototype.setLogLevel=function(e){return void 0!==(e=t.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},o.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.DEBUG&&console.info(o)},o.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.log(o)},o.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.info(o)},o.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.WARN&&console.warn(o)},o.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.ERROR&&console.error(o)},t.ZegoLog=o},function(e,t,r){"use strict";function o(e){this.logger=e}Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0,o.prototype.isLogin=function(){return!0},t.StateCenter=o},function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=void 0,r(3));function s(){this.init()}s.prototype.init=function(){window.dyObj={}},s.prototype.runExecution=function(e,t,r){r=new(Function.bind.apply(Function,n([void 0],e,[r])));try{r.apply(void 0,n(t))}catch(e){i.log.error(e)}},t.DynamicCode=r=s}],o.c=u,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=13))},function(e,t,r){e.exports=r(2).enc.Hex},function(e,t,r){(function(t){e.exports=function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}c=r[s]={exports:{}},t[s][0].call(c.exports,(function(e){return n(t[s][1][e]||e)}),c,c.exports,e,t,r,o)}return r[s].exports}for(var i=!1,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,r,o){(function(e){"use strict";var t,o,n,i,s=e.MutationObserver||e.WebKitMutationObserver,a=s?(t=0,s=new s(u),o=e.document.createTextNode(""),s.observe(o,{characterData:!0}),function(){o.data=t=++t%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)}:((n=new e.MessageChannel).port1.onmessage=u,function(){n.port2.postMessage(0)}),c=[];function u(){i=!0;for(var e,t,r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}i=!1}r.exports=function(e){1!==c.push(e)||i||a()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var o=e(1);function n(){}var i={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==n&&p(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){o((function(){var o;try{o=t(r)}catch(o){return i.reject(e,o)}o===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,o)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function o(t){r||(r=!0,i.reject(e,t))}function n(t){r||(r=!0,i.resolve(e,t))}var s=f((function(){t(n,o)}));"error"===s.status&&o(s.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=u).prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(n);return this.state!==c?d(r,this.state===a?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return i.reject(e,r.value);if(r=r.value)p(e,r);else{e.state=a,e.outcome=t;for(var o=-1,n=e.queue.length;++o<n;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(n),e)},u.reject=function(e){var t=new this(n);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,c=-1,u=new this(n);++c<r;)!function(e,n){t.resolve(e).then((function(e){s[n]=e,++a!==r||o||(o=!0,i.resolve(u,s))}),(function(e){o||(o=!0,i.reject(u,e))}))}(e[c],c);return u},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=-1,a=new this(n);++s<r;)!function(e){t.resolve(e).then((function(e){o||(o=!0,i.resolve(a,e))}),(function(e){o||(o=!0,i.reject(a,e))}))}(e[s]);return a}},{1:1}],3:[function(e,r,o){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){try{return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}catch(e){}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",h=void 0,p={},f=Object.prototype.toString,_="readonly",g="readwrite";function m(e){return"boolean"==typeof h?s.resolve(h):(t=e,new s((function(e){var r=t.transaction(d,g),o=i([""]);r.objectStore(d).put(o,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||43<=parseInt(t[1],10))}})).catch((function(){return!1})).then((function(e){return h=e})));var t}function v(e){e=p[e.name];var t={};t.promise=new s((function(e,r){t.resolve=e,t.reject=r})),e.deferredOperations.push(t),e.dbReady?e.dbReady=e.dbReady.then((function(){return t.promise})):e.dbReady=t.promise}function y(e){(e=p[e.name].deferredOperations.pop())&&(e.resolve(),e.promise)}function b(e,t){if(e=p[e.name].deferredOperations.pop())return e.reject(t),e.promise}function S(e,t){return new s((function(r,o){if(p[e.name]=p[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);v(e),e.db.close()}var i=[e.name],s=(t&&i.push(e.version),n.open.apply(n,i));t&&(s.onupgradeneeded=function(t){var r=s.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),o(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},r(t),y(e)}}))}function E(e){return S(e,!1)}function T(e){return S(e,!0)}function w(e,t){if(!e.db)return 1;var r=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,n=e.version>e.db.version;return o&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(n||r)&&(r&&(o=e.db.version+1)>e.version&&(e.version=o),1)}function C(e){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),o=new Uint8Array(r),n=0;n<t;n++)o[n]=e.charCodeAt(n);return r}(atob(e.data))],{type:e.type})}function I(e){return e&&e.__local_forage_encoded_blob}function O(e){var t=this,r=t._initReady().then((function(){var e=p[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(r,e,e),r}function k(e,t,r,o){void 0===o&&(o=1);try{var n=e.db.transaction(e.storeName,t);r(null,n)}catch(n){if(0<o&&(!e.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===n.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),T(e)})).then((function(){return function(e){v(e);for(var t=p[e.name],r=t.forages,o=0;o<r.length;o++){var n=r[o];n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null)}return e.db=null,E(e).then((function(t){return e.db=t,w(e)?T(e):t})).then((function(o){e.db=t.db=o;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=o})).catch((function(t){throw b(e,t),t}))}(e).then((function(){k(e,t,r,o-1)}))})).catch(r);r(n)}}e={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var o in e)r[o]=e[o];var n=p[r.name],i=(n||(n={forages:[],db:null,dbReady:null,deferredOperations:[]},p[r.name]=n),n.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=O),[]);function a(){return s.resolve()}for(var c=0;c<n.forages.length;c++){var u=n.forages[c];u!==t&&i.push(u._initReady().catch(a))}var l=n.forages.slice(0);return s.all(i).then((function(){return r.db=n.db,E(r)})).then((function(e){return r.db=e,w(r,t._defaultConfig.version)?T(r):e})).then((function(e){r.db=n.db=e,t._dbInfo=r;for(var o=0;o<l.length;o++){var i=l[o];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!n||!n.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,o=new s((function(t,o){r.ready().then((function(){k(r._dbInfo,_,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var r,o=s.result;o?(I(r=o.value)&&(r=C(r)),void 0!==(r=e(r,o.key,a++))?t(r):o.continue()):t()},s.onerror=function(){o(s.error)}}catch(n){o(n)}}))})).catch(o)}));return a(o,t),o},getItem:function(e,t){var r=this,o=(e=u(e),new s((function(t,o){r.ready().then((function(){k(r._dbInfo,_,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;I(e=void 0===e?null:e)&&(e=C(e)),t(e)},s.onerror=function(){o(s.error)}}catch(n){o(n)}}))})).catch(o)})));return a(o,t),o},setItem:function(e,t,r){var o=this,n=(e=u(e),new s((function(r,n){var i;o.ready().then((function(){return i=o._dbInfo,"[object Blob]"===f.call(t)?m(i.db).then((function(e){return e?t:(r=t,new s((function(e,t){var o=new FileReader;o.onerror=t,o.onloadend=function(t){t=btoa(t.target.result||""),e({__local_forage_encoded_blob:!0,data:t,type:r.type})},o.readAsBinaryString(r)})));var r})):t})).then((function(t){k(o._dbInfo,g,(function(i,s){if(i)return n(i);try{var a=s.objectStore(o._dbInfo.storeName),c=(null===t&&(t=void 0),a.put(t,e));s.oncomplete=function(){r(t=void 0===t?null:t)},s.onabort=s.onerror=function(){var e=c.error||c.transaction.error;n(e)}}catch(i){n(i)}}))})).catch(n)})));return a(n,r),n},removeItem:function(e,t){var r=this,o=(e=u(e),new s((function(t,o){r.ready().then((function(){k(r._dbInfo,g,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){o(s.error)},i.onabort=function(){var e=s.error||s.transaction.error;o(e)}}catch(n){o(n)}}))})).catch(o)})));return a(o,t),o},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){k(t._dbInfo,g,(function(o,n){if(o)return r(o);try{var i=n.objectStore(t._dbInfo.storeName).clear();n.oncomplete=function(){e()},n.onabort=n.onerror=function(){var e=i.error||i.transaction.error;r(e)}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){k(t._dbInfo,_,(function(o,n){if(o)return r(o);try{var i=n.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,o=new s((function(t,o){e<0?t(null):r.ready().then((function(){k(r._dbInfo,_,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName),a=!1,c=s.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||a?t(r.key):(a=!0,r.advance(e)):t(null)},c.onerror=function(){o(c.error)}}catch(n){o(n)}}))})).catch(o)}));return a(o,t),o},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){k(t._dbInfo,_,(function(o,n){if(o)return r(o);try{var i=n.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){r(i.error)}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();return(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),a(r=e.name?(r=e.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):E(e).then((function(t){var r=p[e.name],o=r.forages;r.db=t;for(var n=0;n<o.length;n++)o[n]._dbInfo.db=t;return t})),e.storeName?r.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1,o=(v(e),p[e.name]),i=o.forages;t.close();for(var a=0;a<i.length;a++){var c=i[a];c._dbInfo.db=null,c._dbInfo.version=r}return new s((function(t,o){var i=n.open(e.name,r);i.onerror=function(e){i.result.close(),o(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){o.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,y(r._dbInfo)}})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}})):r.then((function(t){v(e);var r=p[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++)o[i]._dbInfo.db=null;return new s((function(t,r){var o=n.deleteDatabase(e.name);o.onerror=function(){var e=o.result;e&&e.close(),r(o.error)},o.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},o.onsuccess=function(){var e=o.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++)y(o[t]._dbInfo)})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}))):s.reject("Invalid arguments"),t),r}};var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",L=P.length,N=L+"arbf".length,D=Object.prototype.toString;function M(e){for(var t,r,o,n,i=.75*e.length,s=e.length,a=0,c=("="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--),i=new ArrayBuffer(i),new Uint8Array(i)),u=0;u<s;u+=4)t=R.indexOf(e[u]),r=R.indexOf(e[u+1]),o=R.indexOf(e[u+2]),n=R.indexOf(e[u+3]),c[a++]=t<<2|r>>4,c[a++]=(15&r)<<4|o>>2,c[a++]=(3&o)<<6|63&n;return i}function x(e){for(var t=new Uint8Array(e),r="",o=0;o<t.length;o+=3)r=(r=(r=(r+=R[t[o]>>2])+R[(3&t[o])<<4|t[o+1]>>4])+R[(15&t[o+1])<<2|t[o+2]>>6])+R[63&t[o+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var B={serialize:function(e,t){var r="";if(e&&(r=D.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===D.call(e.buffer))){var o,n=P;e instanceof ArrayBuffer?(o=e,n+="arbf"):(o=e.buffer,"[object Int8Array]"===r?n+="si08":"[object Uint8Array]"===r?n+="ui08":"[object Uint8ClampedArray]"===r?n+="uic8":"[object Int16Array]"===r?n+="si16":"[object Uint16Array]"===r?n+="ur16":"[object Int32Array]"===r?n+="si32":"[object Uint32Array]"===r?n+="ui32":"[object Float32Array]"===r?n+="fl32":"[object Float64Array]"===r?n+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(n+x(o))}else if("[object Blob]"===r)(n=new FileReader).onload=function(){var r="~~local_forage_type~"+e.type+"~"+x(this.result);t(P+"blob"+r)},n.readAsArrayBuffer(e);else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,L)!==P)return JSON.parse(e);var t,r=e.substring(N),o=e.substring(L,N),n=("blob"===o&&A.test(r)&&(t=(e=r.match(A))[1],r=r.substring(e[0].length)),M(r));switch(o){case"arbf":return n;case"blob":return i([n],{type:t});case"si08":return new Int8Array(n);case"ui08":return new Uint8Array(n);case"uic8":return new Uint8ClampedArray(n);case"si16":return new Int16Array(n);case"ur16":return new Uint16Array(n);case"si32":return new Int32Array(n);case"ui32":return new Uint32Array(n);case"fl32":return new Float32Array(n);case"fl64":return new Float64Array(n);default:throw new Error("Unkown type: "+o)}},stringToBuffer:M,bufferToString:x};function U(e,t,r,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,o)}function j(e,t,r,o,n,i){e.executeSql(r,o,n,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):U(e,t,(function(){e.executeSql(r,o,n,i)}),i)}),i):i(e,s)}),i)}function H(e,t,r,o){var n=this,i=(e=u(e),new s((function(i,s){n.ready().then((function(){var a=t=void 0===t?null:t,c=n._dbInfo;c.serializer.serialize(t,(function(t,u){u?s(u):c.db.transaction((function(r){j(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){t.code===t.QUOTA_ERR&&(0<o?i(H.apply(n,[e,a,r,o-1])):s(t))}))}))})).catch(s)})));return a(i,r),i}var z={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var o in e)r[o]="string"!=typeof e[o]?e[o].toString():e[o];var n=new s((function(e,o){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return o(e)}r.db.transaction((function(n){U(n,r,(function(){t._dbInfo=r,e()}),(function(e,t){o(t)}))}),o)}));return r.serializer=B,n},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,o=new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){j(r,n,"SELECT * FROM "+n.storeName,[],(function(r,o){for(var i=o.rows,s=i.length,a=0;a<s;a++){var c=i.item(a),u=(u=c.value)&&n.serializer.deserialize(u);if(void 0!==(u=e(u,c.key,a+1)))return void t(u)}t()}),(function(e,t){o(t)}))}))})).catch(o)}));return a(o,t),o},getItem:function(e,t){var r=this,o=(e=u(e),new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){j(r,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){r=(r=r.rows.length?r.rows.item(0).value:null)&&n.serializer.deserialize(r),t(r)}),(function(e,t){o(t)}))}))})).catch(o)})));return a(o,t),o},setItem:function(e,t,r){return H.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this,o=(e=u(e),new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){j(r,n,"DELETE FROM "+n.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){o(t)}))}))})).catch(o)})));return a(o,t),o},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){j(t,o,"DELETE FROM "+o.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){j(t,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],(function(t,r){r=r.rows.item(0).c,e(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,o=new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){j(r,n,"SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){r=r.rows.length?r.rows.item(0).key:null,t(r)}),(function(e,t){o(t)}))}))})).catch(o)}));return a(o,t),o},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){j(t,o,"SELECT key FROM "+o.storeName,[],(function(t,r){for(var o=[],n=0;n<r.rows.length;n++)o.push(r.rows.item(n).key);e(o)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config(),o=((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),this),n=e.name?new s((function(t){var n,i=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0);e.storeName?t({db:i,storeNames:[e.storeName]}):t((n=i,new s((function(e,t){n.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);e({db:n,storeNames:o})}),(function(e,r){t(r)}))}),(function(e){t(e)}))}))))})).then((function(e){return new s((function(t,r){e.db.transaction((function(o){for(var n=[],i=0,a=e.storeNames.length;i<a;i++)n.push(function(e){return new s((function(t,r){o.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}(e.storeNames[i]));s.all(n).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):s.reject("Invalid arguments");return a(n,t),n}};function V(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function q(e,t){for(var r,o,n=e.length,i=0;i<n;){if((r=e[i])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return 1;i++}}var G={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=V(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{localStorage.setItem(e,!0),localStorage.removeItem(e)}catch(e){return 1}}()||0<localStorage.length?((this._dbInfo=t).serializer=B,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,o=r.ready().then((function(){for(var t=r._dbInfo,o=t.keyPrefix,n=o.length,i=localStorage.length,s=1,a=0;a<i;a++){var c=localStorage.key(a);if(0===c.indexOf(o)){var u=(u=localStorage.getItem(c))&&t.serializer.deserialize(u);if(void 0!==(u=e(u,c.substring(n),s++)))return u}}}));return a(o,t),o},getItem:function(e,t){var r=this,o=(e=u(e),r.ready().then((function(){var t=r._dbInfo,o=localStorage.getItem(t.keyPrefix+e);return o&&t.serializer.deserialize(o)})));return a(o,t),o},setItem:function(e,t,r){var o=this,n=(e=u(e),o.ready().then((function(){var r=t=void 0===t?null:t;return new s((function(n,i){var s=o._dbInfo;s.serializer.serialize(t,(function(t,o){if(o)i(o);else try{localStorage.setItem(s.keyPrefix+e,t),n(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))})));return a(n,r),n},removeItem:function(e,t){var r=this,o=(e=u(e),r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)})));return a(o,t),o},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;0<=r;r--){var o=localStorage.key(r);0===o.indexOf(e)&&localStorage.removeItem(o)}}));return a(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var r=this,o=r.ready().then((function(){var t,o=r._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&t.substring(o.keyPrefix.length)}));return a(o,t),o},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,o=[],n=0;n<r;n++){var i=localStorage.key(n);0===i.indexOf(e.keyPrefix)&&o.push(i.substring(e.keyPrefix.length))}return o}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments),(e="function"!=typeof e&&e||{}).name||(o=this.config(),e.name=e.name||o.name,e.storeName=e.storeName||o.storeName);var r=this,o=e.name?new s((function(t){e.storeName?t(V(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):s.reject("Invalid arguments");return a(o,t),o}},Z=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},F={},W={},Y={INDEXEDDB:e,WEBSQL:z,LOCALSTORAGE:G},Q=(e=[Y.INDEXEDDB._driver,Y.WEBSQL._driver,Y.LOCALSTORAGE._driver],["dropInstance"]),K=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Q),J={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function X(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var o in r)r.hasOwnProperty(o)&&(Z(r[o])?e[o]=r[o].slice():e[o]=r[o])}return e}function $(e){var t,r,o;if(!(this instanceof $))throw new TypeError("Cannot call a class as a function");for(t in Y)Y.hasOwnProperty(t)&&(o=(r=Y[t])._driver,this[t]=o,F[o]||this.defineDriver(r));this._defaultConfig=X({},J),this._config=X({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}$.prototype.config=function(e){if("object"!==(void 0===e?"undefined":o(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},$.prototype.defineDriver=function(e,t,r){var o=new s((function(t,r){try{var o=e._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(e._driver){for(var i=K.concat("_initStorage"),c=0,u=i.length;c<u;c++){var l=i[c];if((!q(Q,l)||e[l])&&"function"!=typeof e[l])return void r(n)}for(var d=0,h=Q.length;d<h;d++){var p=Q[d];e[p]||(e[p]=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver");return a(t=s.reject(t),arguments[arguments.length-1]),t}}(p))}var f=function(r){F[o]&&console.info("Redefining LocalForage driver: "+o),F[o]=e,W[o]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}else r(n)}catch(n){r(n)}}));return c(o,t,r),o},$.prototype.driver=function(){return this._driver||null},$.prototype.getDriver=function(e,t,r){return c(e=F[e]?s.resolve(F[e]):s.reject(new Error("Driver not found.")),t,r),e},$.prototype.getSerializer=function(e){var t=s.resolve(B);return c(t,e),t},$.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(r,e,e),r},$.prototype.setDriver=function(e,t,r){var o=this,n=(Z(e)||(e=[e]),this._getSupportedDrivers(e));function i(){o._config.driver=o.driver()}function a(e){return o._extend(e),i(),o._ready=o._initStorage(o._config),o._ready}return e=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve(),this._driverSet=e.then((function(){var e=n[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then((function(e){o._driver=e._driver,i(),o._wrapLibraryMethodsWithReady(),o._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var n=e[t];return t++,o._dbInfo=null,o._ready=null,o.getDriver(n).then(a).catch(r)}i();var c=new Error("No available storage method found.");return o._driverSet=s.reject(c),o._driverSet}()}}(n)}))})).catch((function(){i();var e=new Error("No available storage method found.");return o._driverSet=s.reject(e),o._driverSet})),c(this._driverSet,t,r),this._driverSet},$.prototype.supports=function(e){return!!W[e]},$.prototype._extend=function(e){X(this,e)},$.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,o=e.length;r<o;r++){var n=e[r];this.supports(n)&&t.push(n)}return t},$.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=K.length;e<t;e++)!function(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}(this,K[e])},$.prototype.createInstance=function(e){return new $(e)},z=new $,t.exports=z},{3:3}]},{},[4])(4)}).call(this,r(12))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var o,n,i,s,a;e.exports=(e=r(2),r(19),r(20),o=(i=(r=e).lib).Base,n=i.WordArray,s=(i=r.algo).MD5,a=i.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,o=this.cfg,i=o.hasher.create(),s=n.create(),a=s.words,c=o.keySize,u=o.iterations;a.length<c;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)r=i.finalize(r),i.reset();s.concat(r)}return s.sigBytes=4*c,s}}),r.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)},e.EvpKDF)},function(e,t,r){function o(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i,s;e.exports=(n=r(11),s={},o.m=i=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_SETTING_ACTION=void 0,(t=t.ZEGO_SETTING_ACTION||(t.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",t.SETTING_INIT="zs.ii.0",t.SETTING_FETCH_SETTING="zs.fs.0",t.SETTING__FETCH_SETTING="zs.fs.1",t.SETTING_GET_CLOUD_SETTING="zs.gcs.0",t.SETTING_POLLING_SETTING="zs.ps.0",t.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",t.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",t.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorList=void 0,t.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"},AUTH_FAIL:{code:1005,msg:"auth failed"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=t.checkValidNumber=t.analyzeKey=t.getCurrentTime=t.getBrowser=void 0,t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),o=null!=window.opr,n=e.indexOf("Chrome")&&window.chrome,i=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?"IE":r?"FIREFOX":o?"OPERA":n?"CHROME":i?"SAFARI":e?"WEIXIN":"UNKOWN"};var o=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(o[e.getMonth()+1]||e.getMonth()+1)+"/",(o[e.getDate()]||e.getDate())+" ",(o[e.getHours()]||e.getHours())+":",(o[e.getMinutes()]||e.getMinutes())+":",o[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=r},t.generateUUID=function(e){var t,r;return 0===(e=void 0===e?0:e)?r=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),r||(t=(new Date).getTime(),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(36)})),0===e?localStorage.setItem("z_deviceID",r):wx.setStorageSync("z_deviceID",r)),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var o=r(4);Object.defineProperty(t,"ZegoSetting",{enumerable:!0,get:function(){return o.ZegoSetting}})},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,(c=n?[2&c[0],n.value]:c)[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],o=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0,r(5)),a=r(6),c=r(10),u=r(0),l=r(12),d=r(1),h=r(2);function p(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.pollingInterval=300,this.inited=!1,this.checkFailCount=0,this.checkFailed=!1,this.log=new s.ZegoLog}Object.defineProperty(p.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),p.prototype.init=function(e){var t=this;return e.pollingFreq&&!h.checkValidNumber(e.pollingFreq)?(this.log.error(u.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1):(this.options=Object.assign({},l.INIT_CONFIG,e),this.getPublicEnvVariable(),this.settingFetchHandler=new c.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),e=Math.round(60*Math.random()),this.log.info(u.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+e),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.options.pollingFreq&&60<=this.options.pollingFreq&&(this.pollingInterval=this.options.pollingFreq),this.delayTimer=setTimeout((function(){t.pollingSetting(1e3*t.pollingInterval)}),1e3*e),this.settingCacheHandler=new a.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+this.options.product+"_"+this.options.appID,this.log,this.options.env),this.refreshAuthCheck(),this.inited=!0)},p.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},p.prototype.setEnvVariable=function(e,t){this.proEnvVariable[e]=String(t)},p.prototype.getEnvVariable=function(e){return this.envVariable[e]},p.prototype.setEnvVariables=function(e){var t=this;Object.keys(e).forEach((function(r){"string"!=typeof e[r]&&"number"!=typeof e[r]&&t.log.error("zs.sev env "+r+" type error"),t.proEnvVariable[r]=String(e[r])}))},p.prototype.getEnvVariables=function(){return this.envVariable},p.prototype.enablePolling=function(e,t){var r=this;t?t.forEach((function(t){var o=r.fileList.find((function(e){return e.fileName===t}));o&&(o.needPolling=e)})):this.fileList.forEach((function(t){return t.needPolling=e}))},p.prototype.setToken=function(e){this.token!==e&&this.refreshAuthCheck(),this.token=e},p.prototype.setUserID=function(e){this.userID!==e&&this.refreshAuthCheck(),this.userID=e},p.prototype.getSettingCache=function(e){return n(this,void 0,void 0,(function(){var t,r,o;return i(this,(function(n){switch(n.label){case 0:return this.inited?(t=this.fileList.find((function(t){return t.fileName===e})))?[2,Promise.resolve({setting:t.setting,versions:t.versions})]:[3,1]:[2,Promise.reject(d.errorList.NOT_INIT)];case 1:return r=this._getFileName(e),[4,this.settingCacheHandler.getCacheSetting(r)];case 2:return(r=n.sent())&&(this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:0,needPolling:!1,setting:r.setting,versions:r.versions}),o={setting:r.setting,versions:r.versions}),[2,Promise.resolve(o)]}}))}))},p.prototype.fetchSetting=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=!0),this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+e),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,o(o({},this.envVariable),t))):(t=this.fileList.find((function(t){return t.fileName===e})))?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),t.needPolling=r,Promise.resolve({setting:t.setting,versions:t.versions})):this._fetchSetting(e,t,r)):(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(e,t,r))):Promise.reject(d.errorList.NOT_INIT)},p.prototype.fetchMultiSetting=function(e,t,r){var s=this;return void 0===t&&(t={}),void 0===r&&(r=!0),this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call"),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,o(o({},this.envVariable),t))):new Promise((function(t,o){var a={},c=[];if(e.forEach((function(e){return n(s,void 0,void 0,(function(){var t;return i(this,(function(r){return(t=this.fileList.find((function(t){return t.fileName===e})))&&(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),a[e]={setting:t.setting,versions:t.versions}):c.push(e),[2]}))}))})),!(0<c.length))return t(a);s._getCloudSetting(c,s.envVariable).then((function(e){return s.handleFetchFiles(e,r),Object.assign(a,e),t(a)})).catch((function(e){c.forEach((function(e){return n(s,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return(t=this.fileList.find((function(t){return t.fileName==e})))?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(e)];case 1:return t=o.sent(),a[e]={setting:t.setting,versions:t.versions},[2]}}))}))})),0<Object.keys(a).length?t(a):o(e)}))}))):(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" not init"),Promise.reject(d.errorList.NOT_INIT))},p.prototype.setOptions=function(e){e&&"boolean"==typeof e.unify&&(this.options.unify=e.unify,this.settingFetchHandler.setOptions(this.options))},p.prototype.setLog=function(e){this.log=e},p.prototype._getCloudSetting=function(e,t){var r=this;return new Promise((function(o,s){return n(r,void 0,void 0,(function(){var r,n,a,c,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.checkFailed?(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" check fail"),s(d.errorList.AUTH_FAIL),[2]):(a=e instanceof Array,[4,this.settingFetchHandler.fetchSetting(a?e:[e],t,this.token,this.userID,!1)]);case 1:return c=i.sent(),r=c.data,c=c.polling_interval,this.checkFailCount=0,this.log.info(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" suc"),"number"==typeof c&&5<=c&&this.pollingInterval!==60*c&&(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" polling interval change"),this.pollingInterval=60*c,this.uninit(),this.activePolling()),a?(n={},e.forEach((function(e){var t;0==(null==(t=r[e])?void 0:t.code)&&void 0!==(null==(t=r[e])?void 0:t.data)&&(n[e]={setting:null==(t=r[e])?void 0:t.data,versions:null==(e=r[e])?void 0:e.versions})})),0<Object.keys(n).length?o(n):s(d.errorList.MULTI_FILE_NOT_EXIST)):0===(null==(a=r[e])?void 0:a.code)&&null!=(c=r[e])&&c.data?o({setting:null==(c=r[e])?void 0:c.data,versions:null==(c=r[e])?void 0:c.versions}):s({code:null==(l=r[e])?void 0:l.code,msg:null==(l=r[e])?void 0:l.message}),[3,3];case 2:return l=i.sent(),this.log.error(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail "+JSON.stringify(l)),21002===(null==l?void 0:l.code)&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),s(l),[3,3];case 3:return[2]}}))}))}))},p.prototype.handleFetchFiles=function(e,t){var r=this;Object.keys(e).forEach((function(o){var n=r.fileList.find((function(e){return e.fileName==o}));n?(n.fetchedTime=(new Date).getTime(),n.setting=e[o].setting,n.versions=e[o].versions,n.needPolling=t):r.fileList.find((function(e){return e.fileName===o}))||r.fileList.push({fileName:o,fetchedTime:(new Date).getTime(),needPolling:t,setting:e[o].setting,versions:e[o].versions}),n=r._getFileName(o),r.settingCacheHandler.storeSetting(n,e[o])}))},p.prototype._fetchSetting=function(e,t,r){var o=this;return new Promise((function(s,a){o.log.info(u.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),o._getCloudSetting(e,o.envVariable).then((function(n){t?(t.fetchedTime=(new Date).getTime(),t.setting=n.setting,t.versions=n.versions,t.needPolling=r):o.fileList.find((function(t){return t.fileName===e}))||o.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:n.setting,versions:n.versions});var i=o._getFileName(e);o.settingCacheHandler.storeSetting(i,n),s(n),o.log.info(u.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")})).catch((function(c){return n(o,void 0,void 0,(function(){var o;return i(this,(function(n){switch(n.label){case 0:t?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:{},versions:{}}),o=this._getFileName(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(o)];case 2:return o=n.sent(),s(o),[3,4];case 3:return n.sent(),a(c),[3,4];case 4:return this.log.info(u.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}}))}))}))}))},p.prototype.getPublicEnvVariable=function(){var e;0==this.options.env?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=h.getBrowser(),this.publicEnvVariable.deviceid=h.generateUUID()):1==this.options.env&&(e=wx.getSystemInfoSync(),this.publicEnvVariable.brand=e.brand,this.publicEnvVariable.model=e.model,this.publicEnvVariable.system=e.system,this.publicEnvVariable.platform=e.platform,this.publicEnvVariable.wechatVersion=e.version,this.publicEnvVariable.wechatSDKVersion=e.SDKVersion,this.publicEnvVariable.deviceid=h.generateUUID(this.options.env))},p.prototype.pollingSetting=function(e){return n(this,void 0,void 0,(function(){var t,r,o,s,a=this;return i(this,(function(c){switch(c.label){case 0:return this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+e),t=[],this.fileList.forEach((function(e){e.fileName,e.needPolling&&t.push(e.fileName)})),r=e,this.checkFailed?(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" has checked fail"),[3,7]):[3,1];case 1:if(!(0<t.length))return[3,6];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.settingFetchHandler.fetchSetting(t,this.envVariable,this.token,this.userID)];case 3:return s=c.sent(),o=s.data,s=s.polling_interval,this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch suc"),this.checkFailCount=0,"number"==typeof s&&5<=s&&this.pollingInterval!==60*s&&(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling interval change"),this.pollingInterval=60*s,r=1e3*this.pollingInterval),this.fileList.forEach((function(e){return n(a,void 0,void 0,(function(){var t,r,n,s;return i(this,(function(i){switch(i.label){case 0:return e.fetchedTime=(new Date).getTime(),t=this._getFileName(e.fileName),o[e.fileName]&&0===o[e.fileName].code&&o[e.fileName].data?(r=JSON.stringify(o[e.fileName].data),n=JSON.stringify(e.setting),s={setting:o[e.fileName].data,versions:null==(s=o[e.fileName])?void 0:s.versions,code:null==(s=o[e.fileName])?void 0:s.code,message:null==(s=o[e.fileName])?void 0:s.message},n!==r&&(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+e.fileName+" setting changed"),e.setting=s.setting,e.versions=s.versions,this.options.pollingNotify(e.fileName,s)),[4,this.settingCacheHandler.getCacheSetting(t)]):[3,2];case 1:n=i.sent(),r=JSON.stringify(n),n=JSON.stringify(s),r!==n&&this.settingCacheHandler.storeSetting(t,s),i.label=2;case 2:return[2]}}))}))})),[3,5];case 4:return s=c.sent(),this.log.error(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(s)),21002===(null==s?void 0:s.code)&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),[3,5];case 5:return[3,7];case 6:this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),c.label=7;case 7:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout((function(){a.pollingSetting(r)}),r),[2]}}))}))},p.prototype._getFileName=function(e){return e},p.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.pollingInterval)},p.prototype.refreshAuthCheck=function(){this.checkFailCount=0,this.checkFailed=!1},t.ZegoSetting=r=p},function(e,t,r){"use strict";function o(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=void 0,o.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},o.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},o.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},o.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},o.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},t.ZegoLog=o},function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,(c=n?[2&c[0],n.value]:c)[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],o=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.SettingCacheHandler=void 0,r(0)),s=r(7);function a(e,t,r){void 0===r&&(r=0),this.storeName=e,this.log=t,this.store=s.createZegoStore(e,r)}a.prototype.getCacheSetting=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.log.info(i.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(e)];case 1:return[2,t.sent()||""]}}))}))},a.prototype.storeSetting=function(e,t){return o(this,void 0,void 0,(function(){return n(this,(function(r){switch(r.label){case 0:return this.log.info(i.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(e,t)];case 1:return r.sent(),[2]}}))}))},t.SettingCacheHandler=r=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=void 0;var o=r(8),n=r(9),i=(s.prototype.getItem=function(e){var t=this;return new Promise((function(r,o){try{r(wx.getStorageSync(t.keyPrefix+e))}catch(r){o(r)}}))},s.prototype.setItem=function(e,t){var r=this;return new Promise((function(o,n){try{wx.setStorageSync(r.keyPrefix+e,t),o()}catch(o){n(o)}}))},s.prototype.removeItem=function(e){var t=this;return new Promise((function(r,o){try{r(wx.removeStorageSync(t.keyPrefix+e))}catch(r){o(r)}}))},s.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},s.prototype.keys=function(){var e=this;return new Promise((function(t,r){try{var o=wx.getStorageInfoSync().keys,n=[];o.forEach((function(t){0==t.indexOf(e.keyPrefix)&&n.push(t.replace(e.keyPrefix,""))})),n.sort(),t(n)}catch(t){r(t)}}))},s);function s(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=i,t.createZegoStore=function(e,t){return t===n.ZEGO_ENV.BROWSER?o.createInstance({name:e}):new i(e)}},function(e,t){e.exports=n},function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_DISCONNECT=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.6",(o=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",(o=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[o.IE=0]="IE",o[o.FIREFOX=1]="FIREFOX",o[o.CHROME=2]="CHROME",o[o.SAFARI=3]="SAFARI",o[o.OPERA=4]="OPERA",o[o.WEIXIN=5]="WEIXIN",o[o.WEIXINMINI=6]="WEIXINMINI",o[o.UNKOWN=7]="UNKOWN",(o=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[o.DISABLE=0]="DISABLE",o[o.WEBSOCKET=1]="WEBSOCKET",o[o.HTTPS=2]="HTTPS",t.SOCKET_DISCONNECT=-1},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingFetchHandler=void 0;var n,i,s=r(0),a=r(1),c=r(11),u=r(2);function l(e,t){this.options=e,this.log=t,this.seq=0,this.userID=""}r=n={SERVICE_ClOUD_SETTING:10,10:"SERVICE_ClOUD_SETTING"},r=i={METHOD_UNSET:0,0:"METHOD_UNSET",METHOD_GET:1,1:"METHOD_GET",METHOD_POST:2,2:"METHOD_POST"},l.prototype.setOptions=function(e){this.options=e},l.prototype.setDataReport=function(e){this.reportFunc=e},l.prototype.setUserID=function(e){this.userID=e},l.prototype.fetchSetting=function(e,t,r,n,i){var a=this;return void 0===i&&(i=!0),new Promise((function(l,d){var h,p={product:a.options.product,files:e,param:o(o({},t),{deviceid:void 0}),appid:a.options.appID,token:r,id_name:n,timestamp:(new Date).getTime(),biztype:0,deviceid:t.deviceid||u.generateUUID(a.options.env),compress:!1,mode:a.options.online?"online":"test"},f=p.param,_={appid:p.appid,token:p.token,id_name:p.id_name,deviceid:p.deviceid},g=a.seq++;a.reportFunc&&a.reportFunc(g,"request_start",{polling:i}),null!=(h=a.options)&&h.unify&&a.options.connection?a.sendCloudRequest(n,p,"/cloud-setting/get",(function(e){var t,r=e.code,o=(e.msg,e.data),n=e.polling_interval;e=e.reportData,a.log.info(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+r),o&&(t=[],Object.keys(o).forEach((function(e){var r;t.push({name:e,code:o[e].code,message:null==(r=o[e])?void 0:r.message,versions:JSON.stringify(null==(r=o[e])?void 0:r.versions),content:JSON.stringify(null==(e=o[e])?void 0:e.data)})}))),a.reportFunc&&a.reportFunc(g,"request_end",{code:r,reportData:e,params:_,requestKV:f,files:t,polling:i}),l({data:o,polling_interval:n})}),(function(e){var t=e.code,r=e.msg;e.data,e=e.reportData,a.log.warn(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+t),a.reportFunc&&a.reportFunc(g,"request_end",{code:t,params:_,requestKV:f,reportData:e,polling:i}),d({code:t,msg:r})})):c.fetch(a.options.urls,p,a.options.env||0).then((function(e){var t,r=e.code,o=(e.msg,e.data),n=e.polling_interval;e=e.reportData,a.log.info(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+r),o&&(t=[],Object.keys(o).forEach((function(e){var r;t.push({name:e,code:o[e].code,message:null==(r=o[e])?void 0:r.message,versions:JSON.stringify(null==(r=o[e])?void 0:r.versions),content:JSON.stringify(null==(e=o[e])?void 0:e.data)})}))),a.reportFunc&&a.reportFunc(g,"request_end",{code:r,reportData:e,params:_,requestKV:f,files:t,polling:i}),l({data:o,polling_interval:n})})).catch((function(e){var t=e.code,r=e.msg;e.data,e=e.reportData,a.log.warn(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+t),a.reportFunc&&a.reportFunc(g,"request_end",{code:t,params:_,requestKV:f,reportData:e,polling:i}),d({code:t,msg:r})}))}))},l.prototype.sendCloudRequest=function(e,t,r,s,c,u,l){var d,h=this,p=(void 0===u&&(u=3),void 0===l&&(l=[]),(new Date).getTime());null!=(d=this.options.connection)&&d.startHttpRequest({service:n.SERVICE_ClOUD_SETTING,body:t,ack:!1,idName:e,method_no:i.METHOD_POST,location:r},(function(n){var i,d,f,_,g;200===(null==n?void 0:n.status_code)?(i=(_=JSON.parse(n.body)).code,g=_.message,d=_.data,f=_.polling_interval,_=(new Date).getTime()-p,l.push({timestamp:p,url:r,error:i,duration:_}),0===i?s({code:i,msg:g,data:d,polling_interval:f,reportData:l}):c({code:i,msg:g,reportData:l})):(g=(new Date).getTime()-p,l.push({timestamp:p,url:r,error:null==n?void 0:n.status_code,duration:g}),0<u?(u--,h.sendCloudRequest(e,t,r,s,c,u,l)):c(o(o({},a.errorList.FILE_REQUEST_FAIL),{reportData:l})))}),(function(n){var i=(new Date).getTime()-p;l.push({timestamp:p,url:r,error:n.code,duration:i}),0<u?(u--,h.sendCloudRequest(e,t,r,s,c,u,l)):c(o(o({},a.errorList.FILE_REQUEST_FAIL),{reportData:l}))}),null,{timeout:4e3})},t.SettingFetchHandler=r=l},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0,r(1));t.fetch=function e(t,r,i,s,a,c){return void 0===s&&(s=5),void 0===a&&(a=0),void 0===c&&(c=[]),new Promise((function(u,l){a=a||(new Date).getTime();var d,h,p,f=(new Date).getTime();0===i?(d=new XMLHttpRequest,h=t[(s+1)%2]||t[0],d.open("post",h),1==r.compress&&(d.responseType="arraybuffer"),d.ontimeout=function(){},d.onreadystatechange=function(){var p,_,g,m,v;4==d.readyState&&(200<=d.status&&d.status<300||304==d.status?(_=void 0,1!=r.compress&&(_=d.responseText),v=(new Date).getTime()-f,p=(g=JSON.parse(_)).code,m=g.message,_=g.data,g=g.polling_interval,c.push({timestamp:f,url:h,error:p,duration:v}),0===p?u({code:p,msg:m,data:_,polling_interval:g,reportData:c}):l({code:p,msg:m,reportData:c})):(m=(new Date).getTime()-f,c.push({timestamp:f,url:h,error:d.status,duration:m}),v=(new Date).getTime()-a,0<s&&v<8e3?e(t,r,i,--s,a,c).then((function(e){u(e)})).catch((function(e){l(e)})):l(o(o({},n.errorList.FILE_REQUEST_FAIL),{reportData:c}))))},d.timeout=8e3,d.send(JSON.stringify(r))):(p=t[(s+1)%2]||t[0],wx.request({url:p,data:r,method:"POST",success:function(d){var h=(m=d.data).code,_=m.message,g=m.data,m=m.polling_interval;void 0!==h?0===h?u({code:h,msg:_,data:g,polling_interval:m,reportData:c}):l({code:h,msg:_,reportData:c}):(_=(new Date).getTime()-f,c.push({timestamp:f,url:p,error:n.errorList.FILE_REQUEST_FAIL.code,msg:d.data,duration:_}),0<s?e(t,r,i,--s,a,c).then((function(e){u(e)})).catch((function(e){l(e)})):l(o(o({},n.errorList.FILE_REQUEST_FAIL),{reportData:c})))},fail:function(d){var h=(new Date).getTime()-f;c.push({timestamp:f,url:p,error:n.errorList.FILE_REQUEST_FAIL.code,msg:d.errMsg,duration:h}),0<s?e(t,r,i,--s,a,c).then((function(e){u(e)})).catch((function(e){l(e)})):l(o(o({},n.errorList.FILE_REQUEST_FAIL),{reportData:c}))}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_CONFIG=void 0,t.INIT_CONFIG={env:0}}],o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3))},function(e,t,r){function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i,s,a;e.exports=(n=r(7),i=r(1),s=[function(e,t,r){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.typeMap=t.BrokenType=t.ConnectedType=t.DisconnectedType=t.Method=t.ConnectionClosedAction=t.NetWorkState=t.externalErrorList=t.Stick=t.PcConnectState=t.ENUM_CONNECT_STATE=t.DestroyType=t.StreamType=t.ModeMap=t.Mode=t.ZegoconnRunEnv=t.BusinessService=t.AccessHub_Error_Code=t.AccessHubMessageType=t.ENUM_NETWORK_STATE=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.20.0",(n=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[n.offline=0]="offline",n[n.online=1]="online",(n=t.AccessHubMessageType||(t.AccessHubMessageType={}))[n.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",n[n.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",n[n.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",n[n.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",n[n.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",n[n.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",n[n.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",n[n.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",n[n.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",n[n.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",n[n.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",n[n.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",n[n.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",n[n.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",n[n.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",n[n.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",n[n.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",n[n.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",n[n.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",n[n.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",n[n.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",(o=n=t.AccessHub_Error_Code||(t.AccessHub_Error_Code={}))[o.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",o[o.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",o[o.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",o[o.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",o[o.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",o[o.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",o[o.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",o[o.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",o[o.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",o[o.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",o[o.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",o[o.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",o[o.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",o[o.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",o[o.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(o=t.BusinessService||(t.BusinessService={}))[o.SERVICE_UNSET=0]="SERVICE_UNSET",o[o.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",o[o.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",o[o.SERVICE_MIX=3]="SERVICE_MIX",o[o.SERVICE_ZEUS=4]="SERVICE_ZEUS",o[o.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",o[o.SERVICE_L3=6]="SERVICE_L3",o[o.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",o[o.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",o[o.SERVICE_ZIM=9]="SERVICE_ZIM",o[o.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",o[o.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",o[o.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",o[o.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",o[o.SERVICE_QUALITY=14]="SERVICE_QUALITY",o[o.SERVICE_SECURITY=15]="SERVICE_SECURITY",o[o.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",o[o.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",o[o.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",o[o.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",o[o.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",o[o.SERVICE_CDN=21]="SERVICE_CDN",o[o.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",o[o.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",o[o.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",o[o.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",o[o.SERVICE_ECHO=26]="SERVICE_ECHO",o[o.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",o[o.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(o=t.ZegoconnRunEnv||(t.ZegoconnRunEnv={}))[o.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",o[o.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",o[o.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(o=t.Mode||(t.Mode={}))[o.Mode_UNSET=0]="Mode_UNSET",o[o.MODE_ONLINE=1]="MODE_ONLINE",o[o.MODE_TEST=2]="MODE_TEST",o[o.MODE_ALPHA=3]="MODE_ALPHA",t.ModeMap={1:"online",2:"test",3:"alpha"},(o=t.StreamType||(t.StreamType={}))[o.HTTP=0]="HTTP",o[o.PC=1]="PC",o[o.OTHER=2]="OTHER",(o=t.DestroyType||(t.DestroyType={}))[o.NONE=0]="NONE",o[o.BROKEN=1]="BROKEN",o[o.DISCONNECT=2]="DISCONNECT",t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},(o=t.PcConnectState||(t.PcConnectState={}))[o.CONNECTED=0]="CONNECTED",o[o.DISCONNECT=1]="DISCONNECT",o[o.BROKEN=2]="BROKEN",t.Stick={DISPATCH:"zego-action-dispatch",RETRY:"zego-action-retry",ABORT:"zego-action-abort",NEXT_GROUP:"zego-action-next-group",PUSH_APP_CONFIG:"push-app-config:"},t.externalErrorList=[n.ACCESSHUB_INVALID_APPID,n.ACCESSHUB_INVALID_SIGNATURE],(o=t.NetWorkState||(t.NetWorkState={}))[o.offline=0]="offline",o[o.online=1]="online",(n=t.ConnectionClosedAction||(t.ConnectionClosedAction={}))[n.ACTION_RESERVED=0]="ACTION_RESERVED",n[n.ACTION_DISPATCH=1]="ACTION_DISPATCH",n[n.ACTION_RETRY=2]="ACTION_RETRY",n[n.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",n[n.ACTION_ABORT=4]="ACTION_ABORT",n[n.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(o=t.Method||(t.Method={}))[o.METHOD_UNSET=0]="METHOD_UNSET",o[o.METHOD_GET=1]="METHOD_GET",o[o.METHOD_POST=2]="METHOD_POST",(n=t.DisconnectedType||(t.DisconnectedType={}))[n.CLOSE=0]="CLOSE",n[n.TEMP=1]="TEMP",n[n.TIMEOUT=2]="TIMEOUT",(o=t.ConnectedType||(t.ConnectedType={}))[o.AUTO=0]="AUTO",o[o.MANUAL=1]="MANUAL",(n=t.BrokenType||(t.BrokenType={}))[n.EMPTY=0]="EMPTY",n[n.CLOSE=1]="CLOSE",t.typeMap={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_CONFIG_KEY=t.NET_ACCESS_SERVERS=t.NET_ACCESS_CONFIG=void 0,r=r(0),t.NET_ACCESS_CONFIG={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:r.Mode.MODE_ONLINE,sdkType:3,connectVer:2,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},t.NET_ACCESS_SERVERS="z_net_access_servers",t.APP_CONFIG_KEY="z_appconfig"},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},NET_CONNECT_TIMEOUT:{code:1100006,msg:"net connect timeout"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidNum=t.decodeString=t.encodeString=void 0,t.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},t.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},t.uuidNum=function(e,t){var r,o,n="0123456789".split(""),i=[];if(t=n.length,e)for(r=0;r<e;r++)i[r]=n[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(o=0|16*Math.random(),i[r]=n[19==r?3&o|8:o]);return i.join("")}},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequest=void 0,r(0)),i=r(1),s=r(6),a=r(4),c=[n.BusinessService.SERVICE_WEBRTC_SIGNAL,n.BusinessService.SERVICE_L3_WEBRTC_SIGNAL];function u(e,t,r,o,i){this.logger=e,this.service=t,this.streamManager=r,this.pcEstablishTimeout=o,this.option=i,this.connectState=n.PcConnectState.DISCONNECT,this.lastConnectState=n.PcConnectState.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(n.StreamType.PC),this.eventManager=new s.EventManager,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}u.prototype.sendRequest=function(e,t,r){var o=this,s=e.payload,u=((c.includes(this.service)||null!=(u=this.option)&&u.encode)&&(s=(0,a.encodeString)(e.payload)),{service_no:this.service,ack:e.ack,payload:s,wss_message_type:i.NET_ACCESS_CONFIG.wssMessageType,wss_path:null==(u=this.option)?void 0:u.path,wss_raw_query:null==(s=this.option)?void 0:s.query,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer});this.netPcStream.isConnect()||(this.logger.info("zn.napr.sr pc is not connect"),this.eventManager.emit("connectStart")),this.netPcStream.sendMessage(n.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE,u,(function(){o.logger.info("zn.napr.sr suc"),r&&r()}),(function(e){o.logger.error("zn.napr.sr fail"),t&&t(e)}),null,{isInSendMap:"boolean"==typeof e.isInSendMap&&e.isInSendMap}),this.netPcStream.isFirst=!1},u.prototype.onPushEvent=function(e,t){var r;switch(this.logger.info("zn.napr.ope"+" msgType: ".concat(e)),e){case n.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:this.pcEstablished(t,this.netPcStream.StreamID);break;case n.AccessHubMessageType.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case n.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:this.logger.info("zn.napr.ope"+" ".concat(this.service," down ").concat(null==(o=null==t?void 0:t.ts)?void 0:o.toNumber()));var o=t.payload;(c.includes(this.service)||null!=(r=this.option)&&r.encode)&&(o=(0,a.decodeString)(t.payload)),this.eventManager.emit("downLoadMessage",o)}},u.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},u.prototype.off=function(e,t){this.eventManager.removeEventHandler(e,t)},u.prototype.pcEstablished=function(e,t){this.logger.info("zn.napr.pe call "+JSON.stringify(e)),this.setConnectState(n.PcConnectState.CONNECTED);var r=n.ConnectedType.MANUAL;this.lastConnectState===n.PcConnectState.BROKEN&&this.connectState===n.PcConnectState.CONNECTED&&(r=n.ConnectedType.AUTO),this.eventManager.emit("connected",r),this.reportEvent("pcConnectedEvent",{proxy_link_sources:null==e?void 0:e.from,connect_stream:t}),this.brokenTimer&&clearTimeout(this.brokenTimer)},u.prototype.pcBroken=function(){var e=this;this.logger.info("zn.napr.pb call"),this.setConnectState(n.PcConnectState.BROKEN),this.eventManager.emit("broken"),this.reportEvent("pcBrokenEvent"),this.brokenTimer=setTimeout((function(){e.eventManager.emit("disconnected",n.DisconnectedType.TEMP),e.reportEvent("pcDisconnectedEvent")}),1e3*this.pcEstablishTimeout)},u.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},u.prototype._close=function(e,t){var r;this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==n.PcConnectState.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),r=this.streamManager.getStreamID(),this.netPcStream.refresh(r),this.eventManager.emit(e,t),r="","broken"===e?r="pcBrokenEvent":"disconnected"===e&&(r="pcDisconnectedEvent"),r&&this.reportEvent(r)),this.setConnectState(n.PcConnectState.DISCONNECT)},u.prototype.closePc=function(){this._close("broken")},u.prototype.closeRequest=function(){this._close("disconnected",n.DisconnectedType.CLOSE)},u.prototype.setConnectState=function(e){this.connectState!==e&&(this.lastConnectState=this.connectState,this.connectState=e)},u.prototype.reportEvent=function(e,t){this.eventManager.emit(e,o({service_no:this.service},t))},t.NetAgentPCRequest=u},function(e,t,r){"use strict";function o(){this.handlerListMap={}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0,o.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return this.handlerListMap[e]&&-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},o.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,t)}),0)}catch(r){console.error("dispatch "+e+" "+r)}}))},t.EventManager=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentHttpRequest=void 0;var o=r(0),n=r(4),i=r(1);function s(e,t,r){this.logger=e,this.service=t,this.streamManager=r,this.netHttpStream=this.streamManager.createStream(o.StreamType.HTTP)}s.prototype.sendRequest=function(e,t,r,s,a){var c=this;e={service_no:this.service,ack:e.ack,headers:e.headers,body:(0,n.encodeString)(JSON.stringify(e.body)),id_name:e.idName,method_no:e.method_no,stick:e.stick,location:e.location,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer},this.netHttpStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST,e,(function(e){var r=(null==e?void 0:e.headers).find((function(e){return"Content-Encoding"===(null==e?void 0:e.name)}));"gzip"===(null==r?void 0:r.val)?c.logger.info("zn.nahr.sr gzip"):e.body&&(r=(0,n.decodeString)(e.body),e.body=r),c.logger.info("zn.nahr.sr suc "+JSON.stringify(e)),t&&t(e)}),(function(e,t,o){c.logger.error("zn.nahr.sr fail"),r&&r(o||e)}),(function(e){c.logger.error("zn.nahr.sr ack"),s&&s(e)}),a),this.netHttpStream.isFirst=!1},t.NetAgentHttpRequest=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Method=t.Mode=t.DisconnectedType=t.ConnectedType=t.NET_ACCESS_CONFIG=t.BrokenType=t.BusinessService=t.NetAgentHttpRequest=t.NetAgentPCRequest=t.ZegoConnectionAgent=void 0;var o=r(0),n=(Object.defineProperty(t,"BrokenType",{enumerable:!0,get:function(){return o.BrokenType}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return o.BusinessService}}),Object.defineProperty(t,"ConnectedType",{enumerable:!0,get:function(){return o.ConnectedType}}),Object.defineProperty(t,"DisconnectedType",{enumerable:!0,get:function(){return o.DisconnectedType}}),Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return o.Mode}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return o.Method}}),r(9)),i=(Object.defineProperty(t,"ZegoConnectionAgent",{enumerable:!0,get:function(){return n.ZegoConnectionAgent}}),r(7)),s=(Object.defineProperty(t,"NetAgentHttpRequest",{enumerable:!0,get:function(){return i.NetAgentHttpRequest}}),r(1)),a=(Object.defineProperty(t,"NET_ACCESS_CONFIG",{enumerable:!0,get:function(){return s.NET_ACCESS_CONFIG}}),r(5));Object.defineProperty(t,"NetAgentPCRequest",{enumerable:!0,get:function(){return a.NetAgentPCRequest}})},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoConnectionAgent=void 0,r(0)),s=r(10),a=r(13),c=r(18),u=r(19),l=r(20),d=r(1),h=r(6),p=r(21),f=r(3),_=r(22),g=r(4),m=r(23),v=r(7),y=r(24);function b(){var e=this;this.linkCheckTimer=null,this.connectServers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.primaryDomains=[],this.onConnectedEvent=function(t,r){var o;e.getConfig(),e.stateCenter.specified||(o=e.reportSeq++,e.eventManager.emit("dispatchEvent",o,"start"),e.dispatch().then((function(t){var r=t.servers;t=t.domains,e.eventManager.emit("dispatchEvent",o,"end",{domains:t}),0<r.length&&e.eventManager.emit("dispatchResultUpdate",{servers:r})})).catch((function(e){}))),e.eventManager.emit("connected"),e.connectedTime=(new Date).getTime(),e.connectid=(0,g.uuidNum)(16),e.eventManager.emit("connectedEvent",e.connectSeq,"end",{servers:t,count:t.length,connectid:e.connectid,connectEvents:r})},this.onConnectingEvent=function(){e.logger.info("zn.zca.oce call")},this.onDisConnectedEvent=function(t){e.logger.info("zn.zca.ode"+" ".concat(t)),t?(e.disConnect(),e.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.BROKEN)):(e.eventManager.emit("disconnected"),e.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.DISCONNECT))},this.onPushEvent=function(t,r,o){switch(r){case i.AccessHubMessageType.MSG_TYPE_REDIRECT:e.redirect(o);break;case i.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION:e.connectClosed(o);break;case i.AccessHubMessageType.MSG_TYPE_PC_BROKEN:case i.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:case i.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:e.streamManager.onPushEvent(t,r,o);break;case i.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG:e.businessRequestMgr.decodeConfigMessage(o.data)}}}Object.defineProperty(b.prototype,"clientIP",{get:function(){return this.stateCenter.clientIP},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"timeOffset",{get:function(){return this.stateCenter.timeOffset},enumerable:!1,configurable:!0}),b.prototype.init=function(){this.logger=new m.ZegoLogger,this.protobuf=new s.AccessHubProtoBuf,this.stateCenter=new _.StateCenter,this.eventManager=new h.EventManager,this.checkLinkMsg(),this.inited=!0},b.prototype.unInit=function(){this.inited=!1},b.prototype.setAppInfo=function(e){this.stateCenter.appInfo=e,this.stateCenter.networkState=!navigator||navigator.onLine?i.ENUM_NETWORK_STATE.online:i.ENUM_NETWORK_STATE.offline,0===e.env?this.bindWindowListener():1===e.env&&this.bindWxListener(),this.zegoLink=new a.ZegoWssLink(e.appID,e.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new y.StreamManager(this.zegoLink),this.businessRequestMgr=new c.NetAgentBusinessRequestMgr(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new u.NetHeartBeatHandler(this.streamManager,this.logger,this.stateCenter),this.netAgentPCRequestMgr=new l.NetAgentPCRequestMgr(this.streamManager,this.logger),this.heartBeatHandler()},b.prototype.setUserInfo=function(e){this.stateCenter.userId=e},b.prototype.setNetAgentDefaultServers=function(e){this.connectServers=n([],e,!0)},b.prototype.setNetAgentSpecifiedServers=function(e){this.logger.info("zn.sss.0 "+JSON.stringify(e)),this.stateCenter.specified=!0,this.specifiedServers=n([],e,!0)},b.prototype.setBackupDomains=function(e){this.primaryDomains=e},b.prototype.setDispatchConnectServers=function(e){this.connect(e)},b.prototype.startHttpRequest=function(e,t,r,o,n){var i=this,s=this.reportSeq++;this.eventManager.emit("requestEvent",s,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new v.NetAgentHttpRequest(this.logger,e.service,this.streamManager).sendRequest(e,(function(r){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,status_code:r.status_code,err_code:0}),t&&t(r)}),(function(t){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,err_code:t.code||0}),r&&r(t)}),o,n)},b.prototype.getAppConfigByAgent=function(e,t,r){return this.isConnect()||(this.logger.info("zn.gab.0 link is not connect"),this.connectUa()),this.getAppConfig(e,this.stateCenter.userId,t,r)},b.prototype.getPCRequest=function(e,t){var r=this;return(t=this.netAgentPCRequestMgr.getRequest(e,t)).on("disconnected",(function(t){r.logger.warn("zn.zca.gpr "+e+" disconnect "+t),t===i.DisconnectedType.TEMP&&(r.disConnect(),r.connectStart())})),t.on("connectStart",(function(){r.connectUa()})),t},b.prototype.connectUa=function(){this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0))},b.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},b.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},b.prototype.on=function(e,t){return this.logger.info("zn.zca.o.0 "+e),this.eventManager.addEventHandler(e,t)},b.prototype.off=function(e,t){this.logger.info("zn.zca.o.1 "+e),this.eventManager.removeEventHandler(e,t)},b.prototype.setLogger=function(e){this.logger=e},b.prototype.setAccess=function(e){this.stateCenter.useNetAgent=e},b.prototype.getVersion=function(){return i.PROTO_VERSION},b.prototype.heartBeatHandler=function(){var e=this;this.netHeartBeatHandler.netHbLogout=function(t){e.retryLinkHandler&&([f.errorCodeList.NET_HB_TIMEOUT.code].includes(t.code)?(e.retryLinkHandler.startMaxTime(),e.disConnect(),e.connectStart()):(e.retryLinkHandler.stopMaxTime(),e.retryLinkHandler.invalid(),e.eventManager.emit("disconnected")))}},b.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},b.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},b.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=i.ENUM_NETWORK_STATE.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},b.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=i.ENUM_NETWORK_STATE.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},b.prototype.checkLinkMsg=function(){var e=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var t=Date.now()-this.zegoLink.updatedMsgTime;if(t>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+t),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout((function(){e.checkLinkMsg()}),1e3*this.linkMsgCheckInterval)}},b.prototype.connect=function(e){var t=this;0<e.length&&(this.connectServers=n([],e,!0)),this.stateCenter.specified&&0<this.specifiedServers.length&&(this.connectServers=this.specifiedServers),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new p.NetRetryLinkHandler(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(e,r){r===f.errorCodeList.NET_SOCKET_TIMEOUT&&(t.eventManager.emit("disconnected",r),t.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.DISCONNECT,i.DisconnectedType.TIMEOUT,r))},this.connectStart(!1,!0)},b.prototype.resetNetAgent=function(){this.netHeartBeatHandler.reset(),this.zegoLink.destroySocket(i.DestroyType.DISCONNECT)},b.prototype.getConfig=function(){function e(e,o,n){n?t.logger.info("zn.zca.gc fail "+JSON.stringify(n)):0===e.code?(t.logger.info("zn.zca.gc suc "+JSON.stringify(e)),t.getConfigSuccess(e,r)):t.logger.info("zn.zca.gc fail")}var t=this,r=(new Date).getTime();this.businessRequestMgr.getConfig(e,e)},b.prototype.getConfigSuccess=function(e,t){var r;this.netHeartBeatHandler.init(e),this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout),null!=(r=null==e?void 0:e.data)&&r.client_outer_ip&&(this.stateCenter.clientIP=e.data.client_outer_ip),null!=(r=null==e?void 0:e.data)&&r.ntp_time&&(r=e.data.ntp_time.toNumber(),e=(new Date).getTime(),r+=Math.round((e-t)/2),this.stateCenter.timeOffset=r-e),this.eventManager.emit("clientInfo",{clientIP:this.clientIP,timeOffset:this.timeOffset})},b.prototype.dispatch=function(){var e=this;return new Promise((function(t,r){e.businessRequestMgr.dispatchURL((function(r){r=r.data.wss_groups;var o=(e.logger.info("zn.nab.du wss_groups: "+JSON.stringify(r)),e.getConnectionDomains(r,e.primaryDomains));o=e.handleWssGroups(o),t({servers:o,domains:r})}),(function(e){r(e)}))}))},b.prototype.handleWssGroups=function(e){return Array.isArray(e)&&0<e.length?e.map((function(e){return d.NET_ACCESS_CONFIG.scheme+"://"+e.host+"/"+d.NET_ACCESS_CONFIG.location})):[]},b.prototype.getConnectionDomains=function(e,t){var r=n([],e,!0);return t.forEach((function(t){e.forEach((function(e){var o;(o=e.main_domain||(o=e.host.split("."))[o.length-2]+"."+o[o.length-1])!==t&&(o=e.host.replace(o,t),r.push({group:e.group,host:o}))}))})),r},b.prototype.getAppConfig=function(e,t,r,n){var s=this;return new Promise((function(a,c){"string"==typeof t&&"string"==typeof r?s.businessRequestMgr.getAppConfig(e,t,r,n).then((function(e){a(o(o({},e),{retryCount:s.getAppConfigFailCount}))})).catch((function(n){var u;s.logger.error("zn.zca.gac "+JSON.stringify(n)),-1<i.externalErrorList.indexOf(n.code)?(u=s.getAppConfigFailCount,s.getAppConfigFailCount=0,c(o(o({},n),{retryCount:u}))):(s.getAppConfigFailCount++,(20008===n.code||1100002===n.code)&&s.getAppConfigFailCount<3?s.getAppConfig(e,t,r).then((function(e){return a(e)})).catch((function(e){return c(e)})):(u=s.getAppConfigFailCount,s.getAppConfigFailCount=0,c(o(o({},n),{retryCount:u}))))})):s.logger.error("zn.zca.gac userID or token must be string")}))},b.prototype.reportDisConnectEvent=function(){var e=(new Date).getTime()-this.connectedTime;this.connectid&&this.eventManager.emit("disConnectedEvent",{duration:e,server:this.zegoLink.connectServer,connectid:this.connectid})},b.prototype.redirect=function(e){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(e.wss_groups))),(e=this.handleWssGroups(e.wss_groups))&&Array.isArray(e)&&0<e.length?(this.disConnect(),this.stateCenter.specified&&(this.logger.info("zn.zca.rd specified"),e=this.specifiedServers),this.zegoLink.createSocket(e),this.connectStart(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},b.prototype.connectClosed=function(e){var t=this;switch(this.logger.info("zn.zca.cc"+" ".concat(e.reason," ").concat(e.msg," ").concat(e.action)),e.action){case i.ConnectionClosedAction.ACTION_DISPATCH:var r=this.reportSeq++;this.eventManager.emit("dispatchEvent",r,"start"),this.dispatch().then((function(e){var o=e.servers;e=e.domains,t.eventManager.emit("dispatchEvent",r,"end",{domains:e,reason:"ConnectClosed"}),Array.isArray(o)&&0<o.length&&(t.eventManager.emit("dispatchResultUpdate",{servers:o}),e=t.stateCenter.specified?t.specifiedServers:o,t.disConnect(),t.zegoLink.createSocket(e),t.connectStart(!1,!0))})).catch((function(e){t.logger.info("zn.zca.cc dispatch fail")}));break;case i.ConnectionClosedAction.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case i.ConnectionClosedAction.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",i.BrokenType.CLOSE),this.connectStart();case i.ConnectionClosedAction.ACTION_ABORT:case i.ConnectionClosedAction.ACTION_RESERVED:}},b.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},b.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(i.ENUM_CONNECT_STATE.disconnect))},b.prototype.connectStart=function(e,t){this.retryLinkHandler.active(e,t)&&this.reportConnectEvent()},b.prototype.reportConnectEvent=function(){var e=this.reportSeq++;this.connectSeq=e,this.eventManager.emit("connectedEvent",e,"start")},b.prototype.disConnect=function(){this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.reportDisConnectEvent()},b.prototype.testConnect=function(){this.startHttpRequest({service:i.BusinessService.SERVICE_ClOUD_SETTING,headers:[],body:{appid:3349318446,biztype:0,deviceid:"27a315ae-ff78-4ded-8581-8b7b7afe6f2e",files:["init","room"],id_name:"sample1647345322471",mode:"online",param:{},product:"Web_SDK",timestamp:1647345362932,token:"eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ=="},idName:"sample1647345322471",ack:!0,stick:"zego-action-dispatch",method_no:i.Method.METHOD_POST,location:"/cloud-setting/get"},(function(e){console.warn("suc",e)}),(function(e){console.warn("err",e)}),(function(e){console.warn("suc",e)}))},t.ZegoConnectionAgent=b},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.AccessHubProtoBuf=void 0,a(r(11))),u=(s=s(r(2)),r(0)),l=a(r(12));function d(){var e;this.protoInstance=l.default,this.protoMap=((e={})[u.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],e[u.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],e[u.AccessHubMessageType.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],e[u.AccessHubMessageType.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],e[u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],e[u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HBResponse"],e[u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],e[u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],e[u.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],e[u.AccessHubMessageType.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],e[u.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],e[u.AccessHubMessageType.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],e[u.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],e[u.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],e[u.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],e[u.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],e[u.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],e[u.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],e)}s.util.Long=c.default,s.configure(),d.prototype.encodeRequest=function(e,t,r){var o=(n=this.protoMap[e])[0],n=n[1];return n=(o=this.encode(this.protoInstance[o][n],t)).length,(t=new Uint8Array(13+n))[0]=175,t[1]=0,t[2]=e>>8,t[3]=e-(t[2]<<8),t.set(new Uint8Array(Int32Array.from([n]).buffer).reverse(),4),t.set(new Uint8Array(Int32Array.from([r]).buffer).reverse(),8),t[12]=0,t.set(o,13),t},d.prototype.decodeResponse=function(e){var t=(e[2]<<8)+e[3],r=new DataView(e.buffer).getUint32(8),o=e.slice(13);try{var n=this.protoMap[t],i=n[0],s=n[1];return[r,t,this.decode(this.protoInstance[i][s],o)]}catch(e){return[r,t,{code:1}]}},d.prototype.decodeConfigMessage=function(e){return this.decode(this.protoInstance.proto_initconfig.InitConfig,e)},d.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},d.prototype.decode=function(e,t){return o({},e.decode(t))},t.AccessHubProtoBuf=d},function(e,t){e.exports=i},function(e,t,r){"use strict";r.r(t),r.d(t,"proto_accesshub",(function(){return a})),r.d(t,"proto_initconfig",(function(){return c})),r.d(t,"default",(function(){return s}));var o=(t=r(2)).Reader,n=t.Writer,i=t.util,s=t.roots.default||(t.roots.default={}),a=s.proto_accesshub=function(){var e={};return e.MessageType=function(){var e={},t=Object.create(e);return t[e[0]="MSG_TYPE_EMPTY"]=0,t[e[1]="MSG_TYPE_CONNECTION_CLOSED"]=1,t[e[2]="MSG_TYPE_STREAM_CLOSED"]=2,t[e[3]="MSG_TYPE_CLOSE_CONNECTION"]=3,t[e[4]="MSG_TYPE_HTTP_REQUEST"]=4,t[e[5]="MSG_TYPE_HTTP_RESPONSE"]=5,t[e[6]="MSG_TYPE_HTTP_REQUEST_DROPED"]=6,t[e[7]="MSG_TYPE_PROXY_CONNECT"]=7,t[e[8]="MSG_TYPE_PROXY_CONNECTED"]=8,t[e[9]="MSG_TYPE_PROXY_CONNECTION_CLOSED"]=9,t[e[10]="MSG_TYPE_PROXY_SEND_DATA"]=10,t[e[11]="MSG_TYPE_PROXY_RECV_DATA"]=11,t[e[12]="MSG_TYPE_HB_REQUEST"]=12,t[e[13]="MSG_TYPE_HB_RESPONSE"]=13,t[e[14]="MSG_TYPE_GET_CONFIG_REQUEST"]=14,t[e[15]="MSG_TYPE_GET_CONFIG_RESPONSE"]=15,t[e[16]="MSG_TYPE_HTTP_REQUEST_ACK"]=16,t[e[17]="MSG_TYPE_PC_UPWARD_MESSAGE"]=17,t[e[18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK"]=18,t[e[19]="MSG_TYPE_PC_ESTABLISHED"]=19,t[e[20]="MSG_TYPE_PC_BROKEN"]=20,t[e[21]="MSG_TYPE_PC_DOWNWARD_MESSAGE"]=21,t[e[22]="MSG_TYPE_REDIRECT"]=22,t[e[23]="MSG_TYPE_GET_APPCONFIG_REQUEST"]=23,t[e[24]="MSG_TYPE_GET_APPCONFIG_RESPONSE"]=24,t[e[25]="MSG_TYPE_PUSH_APPCONFIG"]=25,t[e[26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"]=26,t[e[27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"]=27,t[e[28]="MSG_TYPE_GET_IM_CONFIG_REQUEST"]=28,t[e[29]="MSG_TYPE_GET_IM_CONFIG_RESPONSE"]=29,t[e[30]="MSG_TYPE_PUSH_EXCEPTION"]=30,t[e[31]="MSG_TYPE_RESOLVE_DOMAIN_REQUEST"]=31,t[e[32]="MSG_TYPE_RESOLVE_DOMAIN_RESPONSE"]=32,t[e[50]="MSG_TYPE_UA_DISPATCH_REQUEST"]=50,t[e[51]="MSG_TYPE_UA_DISPATCH_RESPONSE"]=51,t[e[52]="MSG_TYPE_UA_ECHO_REQUEST"]=52,t[e[53]="MSG_TYPE_UA_ECHO_RESPONSE"]=53,t[e[100]="MSG_TYPE_NODE_REGISTER_REQUEST"]=100,t[e[101]="MSG_TYPE_NODE_REGISTER_RESPONSE"]=101,t[e[102]="MSG_TYPE_NODE_HB_REQUEST"]=102,t[e[103]="MSG_TYPE_NODE_HB_RESPONSE"]=103,t}(),e.ErrorCode=function(){var e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1e4]="DISPATCH_NO_AVAILABLE_NODE"]=1e4,t[e[10001]="DISPATCH_INTERNAL_ERROR"]=10001,t[e[10002]="DISPATCH_INVALID_FRAME"]=10002,t[e[10003]="DISPATCH_UNMARSHAL"]=10003,t[e[10004]="DISPATCH_MSGTYPE"]=10004,t[e[10005]="DISPATCH_MARSHAL"]=10005,t[e[10006]="DISPATCH_TOO_FREQUENTLY"]=10006,t[e[2e4]="ACCESSHUB_INVALID_FRAME"]=2e4,t[e[20001]="ACCESSHUB_NEED_ENCRYPT"]=20001,t[e[20002]="ACCESSHUB_DECRYPT"]=20002,t[e[20003]="ACCESSHUB_MSGTYPE"]=20003,t[e[20004]="ACCESSHUB_UNMARSHAL"]=20004,t[e[20005]="ACCESSHUB_TIMEOUT"]=20005,t[e[20006]="ACCESSHUB_CONNECT"]=20006,t[e[20007]="ACCESSHUB_BROKEN"]=20007,t[e[20008]="ACCESSHUB_INTERNAL_ERROR"]=20008,t[e[20009]="ACCESSHUB_MARSHAL"]=20009,t[e[20010]="ACCESSHUB_UNSUPPORTED_SERVICE"]=20010,t[e[20011]="ACCESSHUB_TOO_FREQUENTLY"]=20011,t[e[20012]="ACCESSHUB_INVALID_APPID"]=20012,t[e[20013]="ACCESSHUB_HB_TIMEOUT"]=20013,t[e[20014]="ACCESSHUB_INVALID_SIGNATURE"]=20014,t[e[20015]="ACCESSHUB_AUTH_FAILED"]=20015,t[e[3e4]="ACCESSHUB_GET_STREAM_FAILED"]=3e4,t[e[30001]="ACCESSHUB_GET_CONN_FAILED"]=30001,t[e[30002]="ACCESSHUB_DO_HTTP_REQUEST_FAILED"]=30002,t[e[30003]="ACCESSHUB_UNMARSHAL_HB_FAILED"]=30003,t[e[30004]="ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"]=30004,t}(),e.Mode=function(){var e={},t=Object.create(e);return t[e[0]="Mode_UNSET"]=0,t[e[1]="MODE_ONLINE"]=1,t[e[2]="MODE_TEST"]=2,t[e[3]="MODE_ALPHA"]=3,t}(),e.Service=function(){var e={},t=Object.create(e);return t[e[0]="SERVICE_UNSET"]=0,t[e[1]="SERVICE_MEDIAGW"]=1,t[e[2]="SERVICE_LIVEROOM"]=2,t[e[3]="SERVICE_MIX"]=3,t[e[4]="SERVICE_ZEUS"]=4,t[e[5]="SERVICE_ZPUSH"]=5,t[e[6]="SERVICE_L3"]=6,t[e[7]="SERVICE_TALKLINE"]=7,t[e[8]="SERVICE_EDUSUITE"]=8,t[e[9]="SERVICE_ZIM"]=9,t[e[10]="SERVICE_ClOUD_SETTING"]=10,t[e[11]="SERVICE_ZEUSHB"]=11,t[e[12]="SERVICE_USER_LOGIC"]=12,t[e[13]="SERVICE_UNIFYDISPATCH"]=13,t[e[14]="SERVICE_QUALITY"]=14,t[e[15]="SERVICE_SECURITY"]=15,t[e[16]="SERVICE_KTVCPR"]=16,t[e[17]="SERVICE_SWITCH4LIVEROOM"]=17,t[e[18]="SERVICE_WEBRTC_SIGNAL"]=18,t[e[19]="SERVICE_L3_WEBRTC_SIGNAL"]=19,t[e[20]="SERVICE_VIDEOCPR"]=20,t[e[21]="SERVICE_CDN"]=21,t[e[22]="SERVICE_CLOUDRECORD"]=22,t[e[23]="SERVICE_INNER_ECHO"]=23,t[e[24]="SERVICE_OUTER_ECHO"]=24,t[e[25]="SERVICE_LOCALHOST_ECHO"]=25,t[e[26]="SERVICE_ECHO"]=26,t[e[27]="SERVICE_DOCSERVICE"]=27,t[e[28]="SERVICE_AUTHSVR"]=28,t[e[29]="SERVICE_WEBLIVEROOM"]=29,t[e[30]="SERVICE_WHITEBOARD"]=30,t[e[31]="SERVICE_METAWORLD"]=31,t[e[32]="SERVICE_ZEGOLAND"]=32,t}(),e.Method=function(){var e={},t=Object.create(e);return t[e[0]="METHOD_UNSET"]=0,t[e[1]="METHOD_GET"]=1,t[e[2]="METHOD_POST"]=2,t}(),e.SdkType=function(){var e={},t=Object.create(e);return t[e[0]="SDK_TYPE_UNSET"]=0,t[e[1]="SDK_TYPE_QUIC_MTCP_NATIVE"]=1,t[e[2]="SDK_TYPE_WSS_NATIVE"]=2,t[e[3]="SDK_TYPE_WSS_WEB"]=3,t}(),e.ZegoconnRunEnv=function(){var e={},t=Object.create(e);return t[e[0]="ZEGOCONN_RUN_ENV_UNSET"]=0,t[e[1]="ZEGOCONN_RUN_ENV_BROWSER"]=1,t[e[2]="ZEGOCONN_RUN_ENV_APPLET"]=2,t}(),e.BackendConnType=function(){var e={},t=Object.create(e);return t[e[0]="BACKEND_CONN_TYPE_UNSET"]=0,t[e[1]="BACKEND_CONN_TYPE_TCP"]=1,t[e[2]="BACKEND_CONN_TYPE_WSS"]=2,t}(),e.ConnectionClosed=(D.prototype.code=0,D.prototype.msg="",D.encode=function(e,t){return t=t||n.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},D.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.ConnectionClosed;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.code=e.int32();break;case 2:n.msg=e.string();break;default:e.skipType(7&i)}}return n},D),e.StreamClosed=(N.prototype.code=0,N.prototype.msg="",N.encode=function(e,t){return t=t||n.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},N.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.StreamClosed;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.code=e.int32();break;case 2:n.msg=e.string();break;default:e.skipType(7&i)}}return n},N),e.CloseConnection=(L.prototype.reason=0,L.prototype.msg="",L.prototype.action=0,L.encode=function(e,t){return t=t||n.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(24).int32(e.action),t},L.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.CloseConnection;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.reason=e.int32();break;case 2:n.msg=e.string();break;case 3:n.action=e.int32();break;default:e.skipType(7&i)}}return n},L.Action=function(){var e={},t=Object.create(e);return t[e[0]="ACTION_RESERVED"]=0,t[e[1]="ACTION_DISPATCH"]=1,t[e[2]="ACTION_RETRY"]=2,t[e[3]="ACTION_NEXT_NODE"]=3,t[e[4]="ACTION_ABORT"]=4,t[e[5]="ACTION_NEXT_GROUP"]=5,t}(),L),e.HTTPRequest=(A.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,A.prototype.appid=0,A.prototype.biz_type=0,A.prototype.mode="",A.prototype.id_name="",A.prototype.reqid="",A.prototype.stick="",A.prototype.service="",A.prototype.location="",A.prototype.method="",A.prototype.headers=i.emptyArray,A.prototype.body=i.newBuffer([]),A.prototype.ack=!1,A.prototype.mode_no=0,A.prototype.service_no=0,A.prototype.method_no=0,A.prototype.sdk_type=0,A.prototype.zegoconn_run_env=0,A.prototype.zegoconn_version=0,A.encode=function(e,t){if(t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.stick&&Object.hasOwnProperty.call(e,"stick")&&t.uint32(58).string(e.stick),null!=e.service&&Object.hasOwnProperty.call(e,"service")&&t.uint32(66).string(e.service),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(74).string(e.location),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(82).string(e.method),null!=e.headers&&e.headers.length)for(var r=0;r<e.headers.length;++r)s.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(90).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(98).bytes(e.body),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(104).bool(e.ack),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(112).int32(e.mode_no),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(120).int32(e.service_no),null!=e.method_no&&Object.hasOwnProperty.call(e,"method_no")&&t.uint32(128).int32(e.method_no),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(136).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(144).int32(e.zegoconn_run_env),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(152).uint32(e.zegoconn_version),t},A.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.HTTPRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.appid=e.uint32();break;case 3:n.biz_type=e.uint32();break;case 4:n.mode=e.string();break;case 5:n.id_name=e.string();break;case 6:n.reqid=e.string();break;case 7:n.stick=e.string();break;case 8:n.service=e.string();break;case 9:n.location=e.string();break;case 10:n.method=e.string();break;case 11:n.headers&&n.headers.length||(n.headers=[]),n.headers.push(s.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 12:n.body=e.bytes();break;case 13:n.ack=e.bool();break;case 14:n.mode_no=e.int32();break;case 15:n.service_no=e.int32();break;case 16:n.method_no=e.int32();break;case 17:n.sdk_type=e.int32();break;case 18:n.zegoconn_run_env=e.int32();break;case 19:n.zegoconn_version=e.uint32();break;default:e.skipType(7&i)}}return n},A.HTTPHeader=(P.prototype.name="",P.prototype.val="",P.encode=function(e,t){return t=t||n.create(),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&t.uint32(18).string(e.val),t},P.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.HTTPRequest.HTTPHeader;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.name=e.string();break;case 2:n.val=e.string();break;default:e.skipType(7&i)}}return n},P),A),e.HTTPResponse=(R.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,R.prototype.headers=i.emptyArray,R.prototype.status_code=0,R.prototype.body=i.newBuffer([]),R.encode=function(e,t){if(t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.headers&&e.headers.length)for(var r=0;r<e.headers.length;++r)s.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(18).fork()).ldelim();return null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(34).bytes(e.body),t},R.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.HTTPResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.headers&&n.headers.length||(n.headers=[]),n.headers.push(s.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 3:n.status_code=e.int32();break;case 4:n.body=e.bytes();break;default:e.skipType(7&i)}}return n},R),e.HTTPRequestAck=(k.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,k.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},k.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.HTTPRequestAck;e.pos<r;){var i=e.uint32();i>>>3==1?n.txid=e.uint64():e.skipType(7&i)}return n},k),e.HTTPRequestDroped=(O.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,O.prototype.reason=0,O.prototype.msg="",O.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(16).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(26).string(e.msg),t},O.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.HTTPRequestDroped;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.reason=e.int32();break;case 3:n.msg=e.string();break;default:e.skipType(7&i)}}return n},O),e.ProxyConnectionClosed=(I.prototype.code=0,I.prototype.msg="",I.prototype.connected=0,I.encode=function(e,t){return t=t||n.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.connected&&Object.hasOwnProperty.call(e,"connected")&&t.uint32(24).int32(e.connected),t},I.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.ProxyConnectionClosed;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.code=e.int32();break;case 2:n.msg=e.string();break;case 3:n.connected=e.int32();break;default:e.skipType(7&i)}}return n},I),e.HBRequest=(C.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,C.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,C.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},C.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.HBRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.ts=e.int64();break;default:e.skipType(7&i)}}return n},C),e.HBResponse=(w.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,w.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,w.prototype.ntp_time=i.Long?i.Long.fromBits(0,0,!0):0,w.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),null!=e.ntp_time&&Object.hasOwnProperty.call(e,"ntp_time")&&t.uint32(24).uint64(e.ntp_time),t},w.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.HBResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.ts=e.int64();break;case 3:n.ntp_time=e.uint64();break;default:e.skipType(7&i)}}return n},w),e.GetConfigRequest=(T.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,T.prototype.appid=0,T.prototype.biz_type=0,T.prototype.mode="",T.prototype.id_name="",T.prototype.reqid="",T.prototype.zegoconn_version=0,T.prototype.sdk_type=0,T.prototype.zegoconn_run_env=0,T.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(64).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(72).int32(e.zegoconn_run_env),t},T.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.GetConfigRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.appid=e.uint32();break;case 3:n.biz_type=e.uint32();break;case 4:n.mode=e.string();break;case 5:n.id_name=e.string();break;case 6:n.reqid=e.string();break;case 7:n.zegoconn_version=e.uint32();break;case 8:n.sdk_type=e.int32();break;case 9:n.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return n},T),e.GetConfigResponseData=(E.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,E.prototype.quic_hb_interval=0,E.prototype.quic_hb_timeout=0,E.prototype.logic_hb_interval=0,E.prototype.logic_hb_timeout=0,E.prototype.pc_establish_timeout=0,E.prototype.sdk_link_detect_interval=0,E.prototype.sdk_link_detect_duration=0,E.prototype.client_outer_ip="",E.prototype.ntp_time=i.Long?i.Long.fromBits(0,0,!0):0,E.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.quic_hb_interval&&Object.hasOwnProperty.call(e,"quic_hb_interval")&&t.uint32(16).uint32(e.quic_hb_interval),null!=e.quic_hb_timeout&&Object.hasOwnProperty.call(e,"quic_hb_timeout")&&t.uint32(24).uint32(e.quic_hb_timeout),null!=e.logic_hb_interval&&Object.hasOwnProperty.call(e,"logic_hb_interval")&&t.uint32(32).uint32(e.logic_hb_interval),null!=e.logic_hb_timeout&&Object.hasOwnProperty.call(e,"logic_hb_timeout")&&t.uint32(40).uint32(e.logic_hb_timeout),null!=e.pc_establish_timeout&&Object.hasOwnProperty.call(e,"pc_establish_timeout")&&t.uint32(48).uint32(e.pc_establish_timeout),null!=e.sdk_link_detect_interval&&Object.hasOwnProperty.call(e,"sdk_link_detect_interval")&&t.uint32(56).uint32(e.sdk_link_detect_interval),null!=e.sdk_link_detect_duration&&Object.hasOwnProperty.call(e,"sdk_link_detect_duration")&&t.uint32(64).uint32(e.sdk_link_detect_duration),null!=e.client_outer_ip&&Object.hasOwnProperty.call(e,"client_outer_ip")&&t.uint32(74).string(e.client_outer_ip),null!=e.ntp_time&&Object.hasOwnProperty.call(e,"ntp_time")&&t.uint32(80).uint64(e.ntp_time),t},E.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.GetConfigResponseData;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.quic_hb_interval=e.uint32();break;case 3:n.quic_hb_timeout=e.uint32();break;case 4:n.logic_hb_interval=e.uint32();break;case 5:n.logic_hb_timeout=e.uint32();break;case 6:n.pc_establish_timeout=e.uint32();break;case 7:n.sdk_link_detect_interval=e.uint32();break;case 8:n.sdk_link_detect_duration=e.uint32();break;case 9:n.client_outer_ip=e.string();break;case 10:n.ntp_time=e.uint64();break;default:e.skipType(7&i)}}return n},E),e.GetConfigResponse=(S.prototype.code=0,S.prototype.message="",S.prototype.data=null,S.encode=function(e,t){return t=t||n.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.GetConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},S.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.GetConfigResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.code=e.int32();break;case 2:n.message=e.string();break;case 3:n.data=s.proto_accesshub.GetConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},S),e.PCUpwardMessage=(b.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,b.prototype.appid=0,b.prototype.biz_type=0,b.prototype.mode_no=0,b.prototype.id_name="",b.prototype.service_no=0,b.prototype.ack=!1,b.prototype.payload=i.newBuffer([]),b.prototype.sdk_type=0,b.prototype.wss_message_type=0,b.prototype.wss_path="",b.prototype.wss_raw_query="",b.prototype.zegoconn_version=0,b.prototype.zegoconn_run_env=0,b.prototype.backend_conn_type=0,b.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(48).int32(e.service_no),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(56).bool(e.ack),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(72).int32(e.sdk_type),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(80).uint32(e.wss_message_type),null!=e.wss_path&&Object.hasOwnProperty.call(e,"wss_path")&&t.uint32(90).string(e.wss_path),null!=e.wss_raw_query&&Object.hasOwnProperty.call(e,"wss_raw_query")&&t.uint32(98).string(e.wss_raw_query),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(104).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(112).int32(e.zegoconn_run_env),null!=e.backend_conn_type&&Object.hasOwnProperty.call(e,"backend_conn_type")&&t.uint32(120).int32(e.backend_conn_type),t},b.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.PCUpwardMessage;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.appid=e.uint32();break;case 3:n.biz_type=e.uint32();break;case 4:n.mode_no=e.int32();break;case 5:n.id_name=e.string();break;case 6:n.service_no=e.int32();break;case 7:n.ack=e.bool();break;case 8:n.payload=e.bytes();break;case 9:n.sdk_type=e.int32();break;case 10:n.wss_message_type=e.uint32();break;case 11:n.wss_path=e.string();break;case 12:n.wss_raw_query=e.string();break;case 13:n.zegoconn_version=e.uint32();break;case 14:n.zegoconn_run_env=e.int32();break;case 15:n.backend_conn_type=e.int32();break;default:e.skipType(7&i)}}return n},b),e.PCUpwardMessageAck=(y.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,y.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.PCUpwardMessageAck;e.pos<r;){var i=e.uint32();i>>>3==1?n.txid=e.uint64():e.skipType(7&i)}return n},y),e.PCEstablished=(v.prototype.elapse=0,v.prototype.from=0,v.encode=function(e,t){return t=t||n.create(),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(8).uint32(e.elapse),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(16).uint32(e.from),t},v.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.PCEstablished;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.elapse=e.uint32();break;case 2:n.from=e.uint32();break;default:e.skipType(7&i)}}return n},v),e.PCBroken=(m.encode=function(e,t){return t||n.create()},m.decode=function(e,t){e instanceof o||(e=o.create(e));var r=void 0===t?e.len:e.pos+t;for(t=new s.proto_accesshub.PCBroken;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return t},m),e.PCDownwardMessage=(g.prototype.payload=i.newBuffer([]),g.prototype.wss_message_type=0,g.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,g.encode=function(e,t){return t=t||n.create(),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(10).bytes(e.payload),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(16).uint32(e.wss_message_type),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},g.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.PCDownwardMessage;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.payload=e.bytes();break;case 2:n.wss_message_type=e.uint32();break;case 3:n.ts=e.uint64();break;default:e.skipType(7&i)}}return n},g),e.Redirect=(_.prototype.rand="",_.prototype.secret="",_.prototype.groups=i.emptyArray,_.prototype.opt_ports=i.emptyArray,_.prototype.wss_groups=i.emptyArray,_.encode=function(e,t){if(t=t||n.create(),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(10).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(18).string(e.secret),null!=e.groups&&e.groups.length)for(var r=0;r<e.groups.length;++r)s.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(26).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(var o=0;o<e.opt_ports.length;++o)t.uint32(32).uint32(e.opt_ports[o]);if(null!=e.wss_groups&&e.wss_groups.length)for(var i=0;i<e.wss_groups.length;++i)s.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[i],t.uint32(42).fork()).ldelim();return t},_.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.Redirect;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.rand=e.string();break;case 2:n.secret=e.string();break;case 3:n.groups&&n.groups.length||(n.groups=[]),n.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 4:if(n.opt_ports&&n.opt_ports.length||(n.opt_ports=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)n.opt_ports.push(e.uint32());else n.opt_ports.push(e.uint32());break;case 5:n.wss_groups&&n.wss_groups.length||(n.wss_groups=[]),n.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},_),e.GetAppConfigRequest=(f.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,f.prototype.appid=0,f.prototype.biz_type=0,f.prototype.mode_no=0,f.prototype.id_name="",f.prototype.config_key="",f.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,f.prototype.signature=i.newBuffer([]),f.prototype.lite_sign="",f.prototype.token="",f.prototype.sdk_type=0,f.prototype.zegoconn_version=0,f.prototype.zegoconn_run_env=0,f.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(50).string(e.config_key),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(56).uint64(e.ts),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(66).bytes(e.signature),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).string(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).string(e.token),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(88).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(96).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(104).int32(e.zegoconn_run_env),t},f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.GetAppConfigRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.appid=e.uint32();break;case 3:n.biz_type=e.uint32();break;case 4:n.mode_no=e.int32();break;case 5:n.id_name=e.string();break;case 6:n.config_key=e.string();break;case 7:n.ts=e.uint64();break;case 8:n.signature=e.bytes();break;case 9:n.lite_sign=e.string();break;case 10:n.token=e.string();break;case 11:n.sdk_type=e.int32();break;case 12:n.zegoconn_version=e.uint32();break;case 13:n.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return n},f),e.GetAppConfigResponseData=(p.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,p.prototype.data=i.newBuffer([]),p.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,p.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.GetAppConfigResponseData;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.data=e.bytes();break;case 3:n.ts=e.uint64();break;default:e.skipType(7&i)}}return n},p),e.GetAppConfigResponse=(h.prototype.code=0,h.prototype.message="",h.prototype.data=null,h.encode=function(e,t){return t=t||n.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.GetAppConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.GetAppConfigResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.code=e.int32();break;case 2:n.message=e.string();break;case 3:n.data=s.proto_accesshub.GetAppConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},h),e.PushAppConfig=(d.prototype.config_key="",d.prototype.data=i.newBuffer([]),d.encode=function(e,t){return t=t||n.create(),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(10).string(e.config_key),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.PushAppConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.config_key=e.string();break;case 2:n.data=e.bytes();break;default:e.skipType(7&i)}}return n},d),e.AccesshubDispatchRequest=(l.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,l.prototype.appid=0,l.prototype.biz_type=0,l.prototype.mode_no=0,l.prototype.id_name="",l.prototype.sdk_type=0,l.prototype.zegoconn_version=0,l.prototype.zegoconn_run_env=0,l.encode=function(e,t){return t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(48).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(64).int32(e.zegoconn_run_env),t},l.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.AccesshubDispatchRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.appid=e.uint32();break;case 3:n.biz_type=e.uint32();break;case 4:n.mode_no=e.int32();break;case 5:n.id_name=e.string();break;case 6:n.sdk_type=e.int32();break;case 7:n.zegoconn_version=e.uint32();break;case 8:n.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return n},l),e.AccesshubDispatchGroup=(u.prototype.group="",u.prototype.quic_nodes=i.emptyArray,u.prototype.mtcp_nodes=i.emptyArray,u.prototype.wss_nodes=i.emptyArray,u.encode=function(e,t){if(t=t||n.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.quic_nodes&&e.quic_nodes.length)for(var r=0;r<e.quic_nodes.length;++r)t.uint32(18).string(e.quic_nodes[r]);if(null!=e.mtcp_nodes&&e.mtcp_nodes.length)for(var o=0;o<e.mtcp_nodes.length;++o)t.uint32(26).string(e.mtcp_nodes[o]);if(null!=e.wss_nodes&&e.wss_nodes.length)for(var i=0;i<e.wss_nodes.length;++i)t.uint32(34).string(e.wss_nodes[i]);return t},u.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.AccesshubDispatchGroup;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.group=e.string();break;case 2:n.quic_nodes&&n.quic_nodes.length||(n.quic_nodes=[]),n.quic_nodes.push(e.string());break;case 3:n.mtcp_nodes&&n.mtcp_nodes.length||(n.mtcp_nodes=[]),n.mtcp_nodes.push(e.string());break;case 4:n.wss_nodes&&n.wss_nodes.length||(n.wss_nodes=[]),n.wss_nodes.push(e.string());break;default:e.skipType(7&i)}}return n},u),e.WssAccesshubDispatchGroup=(c.prototype.group="",c.prototype.host="",c.prototype.main_domain="",c.encode=function(e,t){return t=t||n.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.host&&Object.hasOwnProperty.call(e,"host")&&t.uint32(18).string(e.host),null!=e.main_domain&&Object.hasOwnProperty.call(e,"main_domain")&&t.uint32(26).string(e.main_domain),t},c.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.WssAccesshubDispatchGroup;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.group=e.string();break;case 2:n.host=e.string();break;case 3:n.main_domain=e.string();break;default:e.skipType(7&i)}}return n},c),e.AccesshubDispatchResponseData=(a.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,a.prototype.rand="",a.prototype.secret="",a.prototype.groups=i.emptyArray,a.prototype.opt_ports=i.emptyArray,a.prototype.wss_groups=i.emptyArray,a.encode=function(e,t){if(t=t||n.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(18).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(26).string(e.secret),null!=e.groups&&e.groups.length)for(var r=0;r<e.groups.length;++r)s.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(34).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(var o=0;o<e.opt_ports.length;++o)t.uint32(40).uint32(e.opt_ports[o]);if(null!=e.wss_groups&&e.wss_groups.length)for(var i=0;i<e.wss_groups.length;++i)s.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[i],t.uint32(50).fork()).ldelim();return t},a.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.AccesshubDispatchResponseData;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.txid=e.uint64();break;case 2:n.rand=e.string();break;case 3:n.secret=e.string();break;case 4:n.groups&&n.groups.length||(n.groups=[]),n.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 5:if(n.opt_ports&&n.opt_ports.length||(n.opt_ports=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)n.opt_ports.push(e.uint32());else n.opt_ports.push(e.uint32());break;case 6:n.wss_groups&&n.wss_groups.length||(n.wss_groups=[]),n.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},a),e.AccesshubDispatchResponse=(r.prototype.code=0,r.prototype.message="",r.prototype.data=null,r.encode=function(e,t){return t=t||n.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.AccesshubDispatchResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},r.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.AccesshubDispatchResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.code=e.int32();break;case 2:n.message=e.string();break;case 3:n.data=s.proto_accesshub.AccesshubDispatchResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},r),e.PushException=(t.prototype.reason=0,t.prototype.msg="",t.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,t.encode=function(e,t){return t=t||n.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(24).uint64(e.txid),t},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_accesshub.PushException;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.reason=e.int32();break;case 2:n.msg=e.string();break;case 3:n.txid=e.uint64();break;default:e.skipType(7&i)}}return n},t),e;function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function r(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function a(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function g(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function m(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function y(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function S(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function E(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function T(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function C(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function I(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function O(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function R(e){if(this.headers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function A(e){if(this.headers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function P(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function L(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function N(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function D(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}}(),c=s.proto_initconfig=function(){var e,t={};return t.ResourceType=function(){var e={},t=Object.create(e);return t[e[0]="CDN"]=0,t[e[1]="RTC"]=1,t[e[2]="L3"]=2,t}(),t.ProtocolType=function(){var e={},t=Object.create(e);return t[e[0]="UDP"]=0,t[e[1]="RTMP"]=1,t[e[2]="FLV"]=2,t[e[3]="HLS"]=3,t[e[4]="WEBRTC"]=4,t}(),t.ResolveType=function(){var e={},t=Object.create(e);return t[e[0]="LOCAL_DNS"]=0,t[e[1]="DISPATCH"]=1,t}(),t.AppConfig=(p.prototype.test_id=null,p.prototype.domain=null,p.prototype.flexible_domain=null,p.prototype.replace_flexible_domain=null,Object.defineProperty(p.prototype,"_test_id",{get:i.oneOfGetter(e=["test_id"]),set:i.oneOfSetter(e)}),Object.defineProperty(p.prototype,"_domain",{get:i.oneOfGetter(e=["domain"]),set:i.oneOfSetter(e)}),Object.defineProperty(p.prototype,"_flexible_domain",{get:i.oneOfGetter(e=["flexible_domain"]),set:i.oneOfSetter(e)}),Object.defineProperty(p.prototype,"_replace_flexible_domain",{get:i.oneOfGetter(e=["replace_flexible_domain"]),set:i.oneOfSetter(e)}),p.encode=function(e,t){return t=t||n.create(),null!=e.test_id&&Object.hasOwnProperty.call(e,"test_id")&&t.uint32(8).int32(e.test_id),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(18).string(e.domain),null!=e.flexible_domain&&Object.hasOwnProperty.call(e,"flexible_domain")&&t.uint32(26).string(e.flexible_domain),null!=e.replace_flexible_domain&&Object.hasOwnProperty.call(e,"replace_flexible_domain")&&t.uint32(34).string(e.replace_flexible_domain),t},p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.AppConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.test_id=e.int32();break;case 2:n.domain=e.string();break;case 3:n.flexible_domain=e.string();break;case 4:n.replace_flexible_domain=e.string();break;default:e.skipType(7&i)}}return n},p),t.SpeedlogConfig=(h.prototype.report_count=null,h.prototype.report_retry_interval=null,h.prototype.push_quality_sample_count=null,h.prototype.pull_quality_sample_count=null,h.prototype.hardware_report_cycle=null,h.prototype.room_user_max_count=null,h.prototype.room_stream_max_count=null,h.prototype.charge_info_report_cycle=null,h.prototype.charge_info_report_mode=null,h.prototype.disable_report_pull=i.emptyArray,h.prototype.report_max_bytes=null,h.prototype.push_quality_report_freq=null,h.prototype.pull_quality_report_freq=null,h.prototype.charge_info_report_no_playing=null,Object.defineProperty(h.prototype,"_report_count",{get:i.oneOfGetter(e=["report_count"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_report_retry_interval",{get:i.oneOfGetter(e=["report_retry_interval"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_push_quality_sample_count",{get:i.oneOfGetter(e=["push_quality_sample_count"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_pull_quality_sample_count",{get:i.oneOfGetter(e=["pull_quality_sample_count"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_hardware_report_cycle",{get:i.oneOfGetter(e=["hardware_report_cycle"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_room_user_max_count",{get:i.oneOfGetter(e=["room_user_max_count"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_room_stream_max_count",{get:i.oneOfGetter(e=["room_stream_max_count"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_charge_info_report_cycle",{get:i.oneOfGetter(e=["charge_info_report_cycle"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_charge_info_report_mode",{get:i.oneOfGetter(e=["charge_info_report_mode"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_report_max_bytes",{get:i.oneOfGetter(e=["report_max_bytes"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_push_quality_report_freq",{get:i.oneOfGetter(e=["push_quality_report_freq"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_pull_quality_report_freq",{get:i.oneOfGetter(e=["pull_quality_report_freq"]),set:i.oneOfSetter(e)}),Object.defineProperty(h.prototype,"_charge_info_report_no_playing",{get:i.oneOfGetter(e=["charge_info_report_no_playing"]),set:i.oneOfSetter(e)}),h.encode=function(e,t){if(t=t||n.create(),null!=e.report_count&&Object.hasOwnProperty.call(e,"report_count")&&t.uint32(8).int32(e.report_count),null!=e.report_retry_interval&&Object.hasOwnProperty.call(e,"report_retry_interval")&&t.uint32(16).int32(e.report_retry_interval),null!=e.push_quality_sample_count&&Object.hasOwnProperty.call(e,"push_quality_sample_count")&&t.uint32(24).int32(e.push_quality_sample_count),null!=e.pull_quality_sample_count&&Object.hasOwnProperty.call(e,"pull_quality_sample_count")&&t.uint32(32).int32(e.pull_quality_sample_count),null!=e.hardware_report_cycle&&Object.hasOwnProperty.call(e,"hardware_report_cycle")&&t.uint32(40).int32(e.hardware_report_cycle),null!=e.room_user_max_count&&Object.hasOwnProperty.call(e,"room_user_max_count")&&t.uint32(48).int32(e.room_user_max_count),null!=e.room_stream_max_count&&Object.hasOwnProperty.call(e,"room_stream_max_count")&&t.uint32(56).int32(e.room_stream_max_count),null!=e.charge_info_report_cycle&&Object.hasOwnProperty.call(e,"charge_info_report_cycle")&&t.uint32(64).int32(e.charge_info_report_cycle),null!=e.charge_info_report_mode&&Object.hasOwnProperty.call(e,"charge_info_report_mode")&&t.uint32(72).int32(e.charge_info_report_mode),null!=e.disable_report_pull&&e.disable_report_pull.length){t.uint32(82).fork();for(var r=0;r<e.disable_report_pull.length;++r)t.int32(e.disable_report_pull[r]);t.ldelim()}return null!=e.report_max_bytes&&Object.hasOwnProperty.call(e,"report_max_bytes")&&t.uint32(88).int32(e.report_max_bytes),null!=e.push_quality_report_freq&&Object.hasOwnProperty.call(e,"push_quality_report_freq")&&t.uint32(96).int32(e.push_quality_report_freq),null!=e.pull_quality_report_freq&&Object.hasOwnProperty.call(e,"pull_quality_report_freq")&&t.uint32(104).int32(e.pull_quality_report_freq),null!=e.charge_info_report_no_playing&&Object.hasOwnProperty.call(e,"charge_info_report_no_playing")&&t.uint32(112).int32(e.charge_info_report_no_playing),t},h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.SpeedlogConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.report_count=e.int32();break;case 2:n.report_retry_interval=e.int32();break;case 3:n.push_quality_sample_count=e.int32();break;case 4:n.pull_quality_sample_count=e.int32();break;case 5:n.hardware_report_cycle=e.int32();break;case 6:n.room_user_max_count=e.int32();break;case 7:n.room_stream_max_count=e.int32();break;case 8:n.charge_info_report_cycle=e.int32();break;case 9:n.charge_info_report_mode=e.int32();break;case 10:if(n.disable_report_pull&&n.disable_report_pull.length||(n.disable_report_pull=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)n.disable_report_pull.push(e.int32());else n.disable_report_pull.push(e.int32());break;case 11:n.report_max_bytes=e.int32();break;case 12:n.push_quality_report_freq=e.int32();break;case 13:n.pull_quality_report_freq=e.int32();break;case 14:n.charge_info_report_no_playing=e.int32();break;default:e.skipType(7&i)}}return n},h),t.MediaServiceProtocolInfo=(d.prototype.config_id=null,d.prototype.protocol=null,d.prototype.url_template=null,d.prototype.resolve_type=null,d.prototype.push_cdn_authentication=null,d.prototype.cdn_quic_version=i.emptyArray,Object.defineProperty(d.prototype,"_config_id",{get:i.oneOfGetter(e=["config_id"]),set:i.oneOfSetter(e)}),Object.defineProperty(d.prototype,"_protocol",{get:i.oneOfGetter(e=["protocol"]),set:i.oneOfSetter(e)}),Object.defineProperty(d.prototype,"_url_template",{get:i.oneOfGetter(e=["url_template"]),set:i.oneOfSetter(e)}),Object.defineProperty(d.prototype,"_resolve_type",{get:i.oneOfGetter(e=["resolve_type"]),set:i.oneOfSetter(e)}),Object.defineProperty(d.prototype,"_push_cdn_authentication",{get:i.oneOfGetter(e=["push_cdn_authentication"]),set:i.oneOfSetter(e)}),d.encode=function(e,t){if(t=t||n.create(),null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(10).string(e.config_id),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).int32(e.protocol),null!=e.url_template&&Object.hasOwnProperty.call(e,"url_template")&&t.uint32(26).string(e.url_template),null!=e.resolve_type&&Object.hasOwnProperty.call(e,"resolve_type")&&t.uint32(32).int32(e.resolve_type),null!=e.push_cdn_authentication&&Object.hasOwnProperty.call(e,"push_cdn_authentication")&&t.uint32(40).int32(e.push_cdn_authentication),null!=e.cdn_quic_version&&e.cdn_quic_version.length){t.uint32(50).fork();for(var r=0;r<e.cdn_quic_version.length;++r)t.int32(e.cdn_quic_version[r]);t.ldelim()}return t},d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.MediaServiceProtocolInfo;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.config_id=e.string();break;case 2:n.protocol=e.int32();break;case 3:n.url_template=e.string();break;case 4:n.resolve_type=e.int32();break;case 5:n.push_cdn_authentication=e.int32();break;case 6:if(n.cdn_quic_version&&n.cdn_quic_version.length||(n.cdn_quic_version=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)n.cdn_quic_version.push(e.int32());else n.cdn_quic_version.push(e.int32());break;default:e.skipType(7&i)}}return n},d),t.MediaResourceInfo=(l.prototype.resource_type=null,l.prototype.service_info=i.emptyArray,Object.defineProperty(l.prototype,"_resource_type",{get:i.oneOfGetter(e=["resource_type"]),set:i.oneOfSetter(e)}),l.encode=function(e,t){if(t=t||n.create(),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(8).int32(e.resource_type),null!=e.service_info&&e.service_info.length)for(var r=0;r<e.service_info.length;++r)s.proto_initconfig.MediaServiceProtocolInfo.encode(e.service_info[r],t.uint32(18).fork()).ldelim();return t},l.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.MediaResourceInfo;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.resource_type=e.int32();break;case 2:n.service_info&&n.service_info.length||(n.service_info=[]),n.service_info.push(s.proto_initconfig.MediaServiceProtocolInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},l),t.MediaPublishConfig=(u.prototype.resource_info=i.emptyArray,u.encode=function(e,t){if(t=t||n.create(),null!=e.resource_info&&e.resource_info.length)for(var r=0;r<e.resource_info.length;++r)s.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(18).fork()).ldelim();return t},u.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.MediaPublishConfig;e.pos<r;){var i=e.uint32();i>>>3==2?(n.resource_info&&n.resource_info.length||(n.resource_info=[]),n.resource_info.push(s.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return n},u),t.MediaPlayConfig=(c.prototype.resource_info=i.emptyArray,c.encode=function(e,t){if(t=t||n.create(),null!=e.resource_info&&e.resource_info.length)for(var r=0;r<e.resource_info.length;++r)s.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(42).fork()).ldelim();return t},c.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.MediaPlayConfig;e.pos<r;){var i=e.uint32();i>>>3==5?(n.resource_info&&n.resource_info.length||(n.resource_info=[]),n.resource_info.push(s.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return n},c),t.MediaConfig=(a.prototype.play_config=null,a.prototype.publish_config=null,Object.defineProperty(a.prototype,"_play_config",{get:i.oneOfGetter(e=["play_config"]),set:i.oneOfSetter(e)}),Object.defineProperty(a.prototype,"_publish_config",{get:i.oneOfGetter(e=["publish_config"]),set:i.oneOfSetter(e)}),a.encode=function(e,t){return t=t||n.create(),null!=e.play_config&&Object.hasOwnProperty.call(e,"play_config")&&s.proto_initconfig.MediaPlayConfig.encode(e.play_config,t.uint32(10).fork()).ldelim(),null!=e.publish_config&&Object.hasOwnProperty.call(e,"publish_config")&&s.proto_initconfig.MediaPublishConfig.encode(e.publish_config,t.uint32(18).fork()).ldelim(),t},a.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.MediaConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.play_config=s.proto_initconfig.MediaPlayConfig.decode(e,e.uint32());break;case 2:n.publish_config=s.proto_initconfig.MediaPublishConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},a),t.InitConfig=(r.prototype.app_config=null,r.prototype.speedlog_config=null,r.prototype.media_config=null,Object.defineProperty(r.prototype,"_app_config",{get:i.oneOfGetter(e=["app_config"]),set:i.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_speedlog_config",{get:i.oneOfGetter(e=["speedlog_config"]),set:i.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_media_config",{get:i.oneOfGetter(e=["media_config"]),set:i.oneOfSetter(e)}),r.encode=function(e,t){return t=t||n.create(),null!=e.app_config&&Object.hasOwnProperty.call(e,"app_config")&&s.proto_initconfig.AppConfig.encode(e.app_config,t.uint32(10).fork()).ldelim(),null!=e.speedlog_config&&Object.hasOwnProperty.call(e,"speedlog_config")&&s.proto_initconfig.SpeedlogConfig.encode(e.speedlog_config,t.uint32(34).fork()).ldelim(),null!=e.media_config&&Object.hasOwnProperty.call(e,"media_config")&&s.proto_initconfig.MediaConfig.encode(e.media_config,t.uint32(42).fork()).ldelim(),t},r.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.proto_initconfig.InitConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.app_config=s.proto_initconfig.AppConfig.decode(e,e.uint32());break;case 4:n.speedlog_config=s.proto_initconfig.SpeedlogConfig.decode(e,e.uint32());break;case 5:n.media_config=s.proto_initconfig.MediaConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},r),t;function r(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function a(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(this.resource_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(this.resource_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(this.service_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(this.cdn_quic_version=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(this.disable_report_pull=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}}()},function(e,t,r){"use strict";var o,n,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWssLink=void 0,r(14)),u=r(0),l=r(15),d=r(16),h=r(3),p=r(1);function f(e,t,r,o,i){var s=n.call(this)||this;return s.appID=e,s.env=t,s.protobuf=r,s.logger=o,s.stateCenter=i,s.socketService=new d.NetSocketService(s.env),s.urlIndex=0,s.updatedMsgTime=0,s.unUpdateMsgTimeTypes=[u.AccessHubMessageType.MSG_TYPE_HB_REQUEST,u.AccessHubMessageType.MSG_TYPE_HB_RESPONSE,u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE],s.netLinkState=u.ENUM_CONNECT_STATE.disconnect,s.sendCommandList=new c.LinkedList,s.unSendCommandList=new c.LinkedList,s.sendCommandMap={},s.unSendCommandMap={},s.sendDataCheckOnceCount=100,s.sendDataDropTimeout=1e4,s.sendDataCheckInterval=2e3,s.timeout=5e3,s.connectInterval=1e4,s.connectTimer=null,s.connectRsp={},s.unlogTypes=[12,13],s.tryServers=[],s.tryConnectEvents=[],s.connectStartTime=0,s.updatedMsgTime=Date.now(),s}i(f,n=l.ZegoLink),f.prototype.initEvent=function(e,t,r,o){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onConnectingEvent=r,this.onPushEvent=o},f.prototype.createSocket=function(e){this.servers=e,this.urlIndex=0},f.prototype.destroySocket=function(e){this.logger.info("zn.wl.ds.0 call "+e),this.socketService.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.disconnect,e!==u.DestroyType.NONE&&this.onDisConnectedEvent&&this.onDisConnectedEvent(e===u.DestroyType.BROKEN),this.resetConnect()},f.prototype.refreshServers=function(e){this.servers=a(a([],e,!0),this.servers,!0)},f.prototype.connectSocket=function(e,t,r){var o=this,n=(void 0===e&&(e=!0),this.logger.info("zn.wl.cs.0 call"),this.connectRsp.suc=t,!1),i=(this.connectRsp.fail=function(){r&&(n?o.logger.info("zn.wl.cs.0 fail cb has exec"):(r(),n=!0))},e&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.servers[this.urlIndex]);return this.connectServer=i,this.logger.info("zn.wl.cs.0 server "+i),this.tryServers.push(i),this.connectStartTime=Date.now(),this.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.connecting,this.socketService.createSocket(i),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout((function(){o.logger.info("zn.wl.cs.0 timeout"),o.connectEvent(i,h.errorCodeList.NET_CONNECT_TIMEOUT.code),o.connectRsp.fail&&o.connectRsp.fail()}),this.connectInterval),!0},f.prototype.bindSocketEvent=function(){var e=this;this.openHandler((function(){e.logger.info("zn.wl.bse open"),e.resetConnect(),e.connectRsp.suc&&e.connectRsp.suc(),e.netLinkState=u.ENUM_CONNECT_STATE.connected,e.connectEvent(e.connectServer,0),e.onConnectedEvent&&e.onConnectedEvent(e.tryServers,e.tryConnectEvents),e.tryConnectEvents=[],e.checkUnSendMsgs(e.unSendCommandList),e.startCheck()})),this.closeHandler((function(t){e.logger.warn("zn.wl.bse close "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||h.errorCodeList.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=u.ENUM_CONNECT_STATE.disconnect})),this.errorHandler((function(t){e.logger.warn("zn.wl.bse error "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||h.errorCodeList.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=u.ENUM_CONNECT_STATE.disconnect})),this.onMessage()},f.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.disconnect},f.prototype.connectEvent=function(e,t){var r;this.connectStartTime&&(r=Date.now()-this.connectStartTime,this.tryConnectEvents.push({url:e,time_consumed:r,connect_type:3,error:t}))},f.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},f.prototype.isConnect=function(){return this.netLinkState===u.ENUM_CONNECT_STATE.connected},f.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},f.prototype.isConnecting=function(){return this.netLinkState===u.ENUM_CONNECT_STATE.connecting},f.prototype.setState=function(e){this.netLinkState=e},f.prototype.closeHandler=function(e){this.socketService.closeHandler(e)},f.prototype.openHandler=function(e){this.socketService.openHandler(e)},f.prototype.errorHandler=function(e){this.socketService.errorHandler(e)},f.prototype.updateMsgTime=function(){this.updatedMsgTime=Date.now()},f.prototype.sendMessage=function(e,t,r,o,n,i,a,c){void 0===o&&(o=!0),void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=null),void 0===(c=void 0===c?{}:c).timeout&&(c.timeout=5e3),void 0===c.isInSendMap&&(c.isInSendMap=!0),this.txid++,o={appid:this.appID,biz_type:0,mode_no:(null==(o=this.stateCenter.appInfo)?void 0:o.mode)||p.NET_ACCESS_CONFIG.modeNo,id_name:this.stateCenter.userId,sdk_type:p.NET_ACCESS_CONFIG.sdkType,zegoconn_run_env:0===this.env?u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER:u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET},r={data:o=s(s({txid:this.txid},o),r),txid:this.txid,sendTime:Date.now(),streamID:t,type:e,timeOut:c.timeout||this.timeout,ack:r.ack,success:n,error:i,ackFunc:a,isSend:!0,isCheck:e!==u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE},c.isInSendMap&&(n=this.sendCommandList.push(r),this.sendCommandMap[this.txid]=n),this.unUpdateMsgTimeTypes.includes(e)||(this.updatedMsgTime=Date.now()),-1===this.unlogTypes.indexOf(e)&&this.logger.info("zn.wl.sm type: "+e+"-"+u.typeMap[e]+" streamID: "+t+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(e,o,t):(r.isSend=!1,i=this.unSendCommandList.push(r),this.unSendCommandMap[this.txid]=i)},f.prototype.checkUnSendMsgs=function(e){for(var t,r=e.getFirst();null!=r;)e.remove(r),r._data&&!1===(null==(t=r._data)?void 0:t.isSend)&&r._data.type&&r._data.streamID&&r._data.data&&(this.sendUint8Data(r._data.type,r._data.data,r._data.streamID),r._data.isSend=!0),r=e.getFirst()},f.prototype.sendUint8Data=function(e,t,r){e=this.protobuf.encodeRequest(e,t,r),this.socketService.sendMessage(e)},f.prototype.onMessage=function(){var e=this;this.socketService.onMessage=function(t){t=new Uint8Array(t);var r,o=(t=e.protobuf.decodeResponse(t))[0],n=t[1];t=t[2],e.unUpdateMsgTimeTypes.includes(n)||(e.updatedMsgTime=Date.now()),-1===e.unlogTypes.indexOf(n)&&e.logger.info("zn.wl.om"+" streamID: ".concat(o,", msgType: ").concat(n,"-").concat(u.typeMap[n])),(null!=t&&t.txid||null!=(r=null==t?void 0:t.data)&&r.txid)&&e.isRspMsg((null==t?void 0:t.txid)||(null==(r=null==t?void 0:t.data)?void 0:r.txid))?e.handleSendCommandMsgRsp(o,n,(null==t?void 0:t.txid)||(null==(r=null==t?void 0:t.data)?void 0:r.txid),t):e.onPushEvent(o,n,t)}},f.prototype.isRspMsg=function(e){return void 0!==this.sendCommandMap[e]},f.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},f.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},f.prototype.checkMessageListTimeout=function(e,t){for(var r,o=e.getFirst(),n=Date.now(),i=0,s=this;null!=o&&"break"!==function(){return o._data&&o._data.sendTime+o._data.timeOut>n?"break":(o._data&&delete t[o._data.data.txid],e.remove(o),o._data&&null==o._data.error||o._data&&o._data.sendTime+s.sendDataDropTimeout<n||(a=o&&o._data&&o._data.error,c=o&&o._data&&o._data.txid,u=o&&o._data&&(null==(r=o._data)?void 0:r.isCheck),setTimeout((function(){u&&a&&a({},c,h.errorCodeList.TIMEOUT)}),0)),++i>=s.sendDataCheckOnceCount?"break":void(o=e.getFirst()));var a,c,u}(););},f.prototype.checkSendMessageList=function(e){for(var t,r=e.getFirst();null!=r&&r._data;)!function(){var o,n,i;e.remove(r),r._data.isSend&&r._data.error&&(o=r&&r._data&&r._data.error,n=r&&r._data&&r._data.txid,i=r&&r._data&&(null==(t=r._data)?void 0:t.isCheck),setTimeout((function(){i&&o&&o({},n,h.errorCodeList.TIMEOUT)}),0)),r=e.getFirst()}()},f.prototype.handleSendCommandMsgRsp=function(e,t,r,o){var n,i=this.sendCommandMap[r];null!=i&&(null!=(n=i._data)&&n.ack||(delete this.sendCommandMap[r],this.sendCommandList.remove(i)),o.code&&0!==o.code?n&&null!=n.error&&n.error(o,r):t===u.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION?(o.code=o.reason,o.message=o.msg,n&&null!=n.error&&n.error(o,r)):t===u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK?n&&null!=n.ackFunc&&n.ackFunc(o,r):n&&null!=n.success&&n.success(o,r))},r=f,t.ZegoWssLink=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=void 0,Object.defineProperty(n.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),n.prototype.hasNext=function(){return this.next&&this.next.id},n.prototype.hasPrev=function(){return this.prev&&this.prev.id};var o=n;function n(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function i(){this.start=new o,this.end=new o,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=o,i.prototype.insertBefore=function(e,t){return(t=new o(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},i.prototype.addLast=function(e){return this.insertBefore(this.end,e)},i.prototype.add=function(e){return this.addLast(e)},i.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},i.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},i.prototype.size=function(){return this._numNodes},i.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},i.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},i.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},i.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},i.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},i.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},i.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},i.prototype.find=function(e){for(var t=this.start,r=!1,o=null;t.hasNext()&&!r;)e(t=t.next)&&(o=t,r=!0);return o},i.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},i.prototype.push=function(e){return this.addLast(e)},i.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},i.prototype.pop=function(){return this.removeLast()},i.prototype.shift=function(){return this.removeFirst()},t.LinkedList=i},function(e,t,r){"use strict";function o(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLink=void 0,o.prototype.createSocket=function(e){},o.prototype.setState=function(e){},o.prototype.initEvent=function(e,t,r,o){},o.prototype.sendMessage=function(e,t,r,o,n,i,s,a){void 0===o&&(o=!0),void 0===n&&(n=null),void 0===i&&(i=null),void 0===s&&(s=null)},t.ZegoLink=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetSocketService=void 0;var o=r(17);function n(e){this.socket=null,this.ENV=e}n.prototype.createSocket=function(e){this.socket=(0,o.createZegoWebSocket)(e,this.ENV%2)},n.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.socket.binaryType="arraybuffer",t.responseHandler(),e(r)})},n.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},n.prototype.onMessage=function(e){},n.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},n.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},n.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},n.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},n.prototype.sendMessage=function(e){this.isDisConnect()||this.socket&&this.ENV%2!=1&&this.socket.send(e)},t.NetSocketService=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=t.ZEGO_ENV=void 0,(n=o=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",s.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},s.prototype.onopen=function(e){},s.prototype.onerror=function(e){},s.prototype.onclose=function(e){},s.prototype.onmessage=function(e){},s.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},s.prototype.close=function(){this._websocket&&this._websocket.close()};var o,n,i=s;function s(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=i,t.createZegoWebSocket=function(e,t){return new(t%2===o.BROWSER?WebSocket:i)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentBusinessRequestMgr=void 0;var o=r(0),n=r(1);function i(e,t,r,o){this.streamManager=e,this.protobuf=t,this.logger=r,this.stateCenter=o}i.prototype.getConfig=function(e,t){var r;this.logger.info("zn.nab.gc call"),this.streamManager.createStream(o.StreamType.OTHER).sendMessage(o.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,{zegoconn_version:n.NET_ACCESS_CONFIG.connectVer,mode:o.ModeMap[(null==(r=this.stateCenter.appInfo)?void 0:r.mode)||n.NET_ACCESS_CONFIG.modeNo]},e,t)},i.prototype.dispatchURL=function(e,t){var r=this;this.logger.info("zn.nab.du call"),this.streamManager.createStream(o.StreamType.OTHER).sendMessage(o.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST,{},(function(t){r.logger.info("zn.nab.du suc "),e&&e(t)}),(function(e,o,n){r.logger.info("zn.nab.du fail"),t&&t(n||e)}))},i.prototype.getAppConfig=function(e,t,r,i){var s=this;return new Promise((function(a,c){function u(e,t,r){r?(s.logger.error("zn.nab.gac fail "+JSON.stringify(r)),c(r)):0===e.code?(s.logger.info("zn.nab.gac suc"),r=s.decodeConfigMessage(e.data.data),a({code:0,data:r})):(s.logger.error("zn.nab.gac fail "+e.code),c({code:e.code}))}s.logger.info("zn.nab.gac call");var l={id_name:t,config_key:e,token:r,mode_no:(null==(l=s.stateCenter.appInfo)?void 0:l.mode)||n.NET_ACCESS_CONFIG.modeNo};s.streamManager.createStream(o.StreamType.OTHER).sendMessage(o.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST,l,u,u,null,{timeout:i})}))},i.prototype.decodeConfigMessage=function(e){return this.protobuf.decodeConfigMessage(e)},t.NetAgentBusinessRequestMgr=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetHeartBeatHandler=void 0;var o=r(3),n=r(0);function i(e,t,r){this.streamManager=e,this.logger=t,this.stateCenter=r,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}i.prototype.init=function(e){var t=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(n.StreamType.OTHER)),1<=e.data.logic_hb_interval&&e.data.logic_hb_interval<=10&&(this.hbInterval=e.data.logic_hb_interval),3<=e.data.logic_hb_timeout&&e.data.logic_hb_timeout<=30&&(this.hbTimeout=e.data.logic_hb_timeout),this.tryHbCount=0,this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){t.start()}),1e3*this.hbInterval)},i.prototype.start=function(){var e,t,r,i=this;this.logger.debug("zn.nhb.s call "),this.tryHbCount++>this.hbTimeoutMaxCount?(this.logger.error("zn.nhb.s come to try limit"),this.reset(),this.netHbLogout(o.errorCodeList.NET_HB_TIMEOUT)):(e=(new Date).getTime(),t=function(t,r,o){var n=(new Date).getTime()-e;i.logger.debug("zn.nhb.s hb callback "+n),o&&0!==(null==o?void 0:o.code)?i.logger.info("zn.nhb.s fail "+JSON.stringify(o)):(null!=t&&t.ntp_time&&(o=t.ntp_time.toNumber(),t=(new Date).getTime(),o+=Math.round(n/2),i.stateCenter.timeOffset=o-t),i.tryHbCount=0)},r={ts:Date.now()},this.hbStream.sendMessage(n.AccessHubMessageType.MSG_TYPE_HB_REQUEST,r,t,t,null),this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){i.start()}),1e3*this.hbInterval))},i.prototype.netHbLogout=function(e){},i.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},t.NetHeartBeatHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequestMgr=void 0;var o=r(0),n=r(1),i=r(5);function s(e,t){this.streamManager=e,this.logger=t,this.pcStreamRequests=[],this.pcEstablishTimeout=n.NET_ACCESS_CONFIG.pcEstablishTimeout}s.prototype.getRequest=function(e,t){return e=new i.NetAgentPCRequest(this.logger,e,this.streamManager,this.pcEstablishTimeout,t),this.pcStreamRequests.push(e),e},s.prototype.updateConnectState=function(e,t,r){this.pcStreamRequests.forEach((function(n){e===o.PcConnectState.BROKEN?(n.eventManager.emit("broken"),n.reportEvent("pcBrokenEvent")):e===o.PcConnectState.DISCONNECT&&(n.eventManager.emit("disconnected",t,r),n.reportEvent("pcDisconnectedEvent"))}))},s.prototype.closePCs=function(){this.pcStreamRequests.forEach((function(e){e.closePc()}))},s.prototype.setEstablishTimeout=function(e){this.pcEstablishTimeout=e},t.NetAgentPCRequestMgr=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetRetryLinkHandler=void 0;var o=r(3),n=r(0);function i(e,t){this.logger=e,this.stateCenter=t,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1,this.RETRY_MAX_TIME=90}i.prototype.initLink=function(e){this.link=e},i.prototype.startMaxTime=function(){var e=this;this.logger.info("zn.rlh.sm call"),this.maxTimer||(this.logger.info("zn.rlh.sm start max timer"),this.maxTimer=setTimeout((function(){e.logger.warn("zn.rlh.sm"+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.link.destroySocket(n.DestroyType.NONE),e.stopMaxTime(),e.invalid(),e.onactive(!1,o.errorCodeList.NET_SOCKET_TIMEOUT)}),1e3*this.RETRY_MAX_TIME))},i.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},i.prototype.active=function(e,t,r){var o=this;if(void 0===r&&(r=!1),this.logger.info("zn.rlh.at call "+e+" "+(t=void 0!==t&&t)),this.retryTimer)return this.logger.info("zn.rlh.at has actived, ignore"),!1;var i=this.stateCenter.networkState==n.ENUM_NETWORK_STATE.offline;if(i){if(this.logger.info("zn.rlh.at  check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zn.rlh.at network is broken, stop retry"),!1}else this.retryNetCount=0;return this.link.isConnecting()&&!r?(this.logger.info("zn.rlh.at link is connecting, ignore"),!1):this.isOverTime?(this.logger.info("zn.rlh.at retry over time, stop retry"),!1):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(r=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=r>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:r),this.logger.info("zn.rlh.at interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){o.link.destroySocket(n.DestroyType.BROKEN),o.link.connectSocket(e,(function(){o.logger.info("zn.rlh.at suc"),o.stateCenter.networkState=n.ENUM_NETWORK_STATE.online,o.stopMaxTime(),o.invalid(),o.onactive(!0)}),(function(){o.logger.info("zn.rlh.at fail"),o.maxTimer||o.startMaxTime(),o.active(!0,!1,!0)})),o.retryTimer&&clearTimeout(o.retryTimer),o.retryTimer=null,i?o.retryNetCount++:o.retryActiveCount++}),t?0:1e3*this.retryActiveInterval),!0)},i.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},i.prototype.init=function(e,t,r,o){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof o&&(this.RETRY_MAX_TIME_INTERVAL=o)},i.prototype.invalid=function(){this.logger.info("zn.rlh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},t.NetRetryLinkHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var o=r(0);t.StateCenter=function(){this.networkState=o.ENUM_NETWORK_STATE.online,this.useNetAgent=!0,this.specified=!1,this.clientIP="",this.timeOffset=0}},function(e,t,r){"use strict";function o(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,o.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.log(r)},o.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.debug(r)},o.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.info(r)},o.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.warn(r)},o.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.error(r)},t.ZegoLogger=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var o=r(0),n=r(25);function i(e){this.zegoLink=e,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}i.prototype.createStream=function(e){return e!==o.StreamType.HTTP&&e===o.StreamType.PC?(t=new n.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.pcStreams.push(t),t):this.getStream(e,this.httpStreams);var t},i.prototype.getStream=function(e,t){return t=t.find((function(e){return!0===e.isFree})),t?(t.isFree=!1,t.isFirst=!1,t):(t=new n.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.httpStreams.push(t),t)},i.prototype.onPushEvent=function(e,t,r){var o=this.pcStreams.find((function(t){return t.StreamID===e}));o&&o.onPushEvent(t,r)},i.prototype.getStreamID=function(){return this.streamID++},t.StreamManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLinkStream=void 0;var o=r(0);function n(e,t,r){this.type=e,this.streamID=t,this.zegoLink=r,this.isFree=!1,this.isFirst=!0}Object.defineProperty(n.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),n.prototype.refresh=function(e){this.streamID=e},n.prototype.sendMessage=function(e,t,r,n,i,s){var a=this;void 0===r&&(r=null),void 0===n&&(n=null),this.zegoLink.sendMessage(e,this.streamID,t,this.isFirst,(function(e){a.type!==o.StreamType.PC&&(a.isFree=!0),r&&r(e)}),(function(e,t,r){a.type!==o.StreamType.PC&&(a.isFree=!0),n&&n(e,t,r)}),i=void 0===i?null:i,s=void 0===s?{timeout:5e3,isInSendMap:!0}:s)},n.prototype.onPushEvent=function(e,t){},n.prototype.closeStream=function(e,t){this.zegoLink.sendMessage(o.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:e,msg:t})},n.prototype.isConnect=function(){return this.zegoLink.isConnect()},t.ZegoLinkStream=n}],a={},o.m=s,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=8))},function(e,t,r){var o;e.exports=(o=r(2),function(){var e,t;"function"==typeof ArrayBuffer&&(e=o.lib.WordArray,t=e.init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var r=e.byteLength,o=[],n=0;n<r;n++)o[n>>>2]|=e[n]<<24-n%4*8;t.call(this,o,r)}else t.apply(this,arguments)}).prototype=e)}(),o.lib.WordArray)},function(e,t){},function(e,t,r){var o;e.exports=(e=r(2),o=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=this._map,n=(e.clamp(),[]),i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)n.push(o.charAt(s>>>6*(3-a)&63));var c=o.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,r=this._map;if(!(n=this._reverseMap))for(var n=this._reverseMap=[],i=0;i<r.length;i++)n[r.charCodeAt(i)]=i;var s=r.charAt(64);return s&&-1!==(s=e.indexOf(s))&&(t=s),function(e,t,r){for(var n,i,s=[],a=0,c=0;c<t;c++)c%4&&(n=r[e.charCodeAt(c-1)]<<c%4*2,i=r[e.charCodeAt(c)]>>>6-c%4*2,s[a>>>2]|=(n|i)<<24-a%4*8,a++);return o.create(s,a)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)},function(e,t,r){var o,n,i,s;e.exports=(e=r(2),s=(r=e).lib,o=s.WordArray,n=s.Hasher,s=r.algo,i=[],s=s.SHA1=n.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],s=r[2],a=r[3],c=r[4],u=0;u<80;u++){u<16?i[u]=0|e[t+u]:(l=i[u-3]^i[u-8]^i[u-14]^i[u-16],i[u]=l<<1|l>>>31);var l=(o<<5|o>>>27)+c+i[u];l+=u<20?1518500249+(n&s|~n&a):u<40?1859775393+(n^s^a):u<60?(n&s|n&a|s&a)-1894007588:(n^s^a)-899497514,c=a,a=s,s=n<<30|n>>>2,n=o,o=l}r[0]=r[0]+o|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(64+o>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+o>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=n._createHelper(s),r.HmacSHA1=n._createHmacHelper(s),e.SHA1)},function(e,t,r){var o;e.exports=(e=r(2),r=e.lib.Base,o=e.enc.Utf8,void(e.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));for(var r=e.blockSize,n=4*r,i=((t=t.sigBytes>n?e.finalize(t):t).clamp(),e=this._oKey=t.clone(),t=this._iKey=t.clone(),e.words),s=t.words,a=0;a<r;a++)i[a]^=1549556828,s[a]^=909522486;e.sigBytes=t.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})))},function(e,t,r){var o,n,i,s,a,c,u,l,d,h,p,f;e.exports=(e=r(2),r(13),void(e.lib.Cipher||(r=e.lib,o=r.Base,n=r.WordArray,i=r.BufferedBlockAlgorithm,(d=e.enc).Utf8,s=d.Base64,a=e.algo.EvpKDF,c=r.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?f:h}return function(t){return{encrypt:function(r,o,n){return e(o).encrypt(t,r,o,n)},decrypt:function(r,o,n){return e(o).decrypt(t,r,o,n)}}}}()}),r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=e.mode={},u=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=d.CBC=function(){var e=u.extend();function t(e,t,r){var o,n=this._iv;n?(o=n,this._iv=void 0):o=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=o[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize;t.call(this,e,r,n),o.encryptBlock(e,r),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize,i=e.slice(r,r+n);o.decryptBlock(e,r),t.call(this,e,r,n),this._prevBlock=i}}),e}(),p=(e.pad={}).Pkcs7={pad:function(e,t){for(var r=(t*=4)-e.sigBytes%t,o=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(o);t=n.create(i,r),e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:p}),reset:function(){c.reset.call(this);var e,t=(r=this.cfg).iv,r=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,t&&t.words):(this._mode=e.call(r,this,t&&t.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),l=r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(e=(e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t,r=(e=s.parse(e)).words;return 1398893684==r[0]&&1701076831==r[1]&&(t=n.create(r.slice(2,4)),r.splice(0,4),e.sigBytes-=16),l.create({ciphertext:e,salt:t})}},h=r.SerializableCipher=o.extend({cfg:o.extend({format:d}),encrypt:function(e,t,r,o){o=this.cfg.extend(o),t=(n=e.createEncryptor(r,o)).finalize(t);var n=n.cfg;return l.create({ciphertext:t,key:r,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(r,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),p=(e.kdf={}).OpenSSL={execute:function(e,t,r,o){return o=o||n.random(8),e=a.create({keySize:t+r}).compute(e,o),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,l.create({key:e,iv:r,salt:o})}},f=r.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(e,t,r,o){return r=(o=this.cfg.extend(o)).kdf.execute(r,e.keySize,e.ivSize),o.iv=r.iv,(e=h.encrypt.call(this,e,t,r.key,o)).mixIn(r),e},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),r=o.kdf.execute(r,e.keySize,e.ivSize,t.salt),o.iv=r.iv,h.decrypt.call(this,e,t,r.key,o)}}))))},function(e,t,r){"use strict";r.r(t),r.d(t,"ZegoExpressWebRTMEngine",(function(){return st})),r.d(t,"getReportSeq",(function(){return f})),r.d(t,"getSeq",(function(){return p})),r.d(t,"ZegoLogger",(function(){return d.ZegoLogger})),r.d(t,"ZegoDataReport",(function(){return d.ZegoDataReport})),r.d(t,"ZegoExpressWebRTM",(function(){return We})),r.d(t,"BusinessService",(function(){return T})),r.d(t,"NetConnection",(function(){return O})),r.d(t,"ZReporter",(function(){return nt}));var o,n,i,s,a,c,u,l,d=r(5),h={debug:0,info:1,warn:2,error:3,report:99,disable:100},p=((t=o=o||{})[t.TT_NONE=0]="TT_NONE",t[t.TT_PC=1]="TT_PC",t[t.TT_IOS=2]="TT_IOS",t[t.TT_ANDROID=3]="TT_ANDROID",t[t.TT_MAC=4]="TT_MAC",t[t.TT_LINUX=5]="TT_LINUX",t[t.TT_WEB=6]="TT_WEB",t[t.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",t[t.TT_UNKNOWN=32]="TT_UNKNOWN",(t=n=n||{})[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login",(t=i=i||{})[t.I=0]="I",t[t.H=10]="H",t[t.M=100]="M",t[t.L=1e3]="L",(t=s=s||{})[t.offline=0]="offline",t[t.online=1]="online",(t=a=a||{})[t.NT_NONE=0]="NT_NONE",t[t.NT_LINE=1]="NT_LINE",t[t.NT_WIFI=2]="NT_WIFI",t[t.NT_2G=3]="NT_2G",t[t.NT_3G=4]="NT_3G",t[t.NT_4G=5]="NT_4G",t[t.NT_UNKNOWN=32]="NT_UNKNOWN",(t=c=c||{})[t.ClientType_None=0]="ClientType_None",t[t.ClientType_H5=1]="ClientType_H5",t[t.ClientType_SmallProgram=2]="ClientType_SmallProgram",t[t.ClientType_Webrtc=3]="ClientType_Webrtc",function(){return u++}),f=(l=u=1,function(){return l++}),_=(Object.defineProperty(g.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),g.prototype.hasNext=function(){return this.next&&this.next.id},g.prototype.hasPrev=function(){return this.prev&&this.prev.id},g);function g(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}v.prototype.insertBefore=function(e,t){return(t=new _(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},v.prototype.addLast=function(e){return this.insertBefore(this.end,e)},v.prototype.add=function(e){return this.addLast(e)},v.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},v.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},v.prototype.size=function(){return this._numNodes},v.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},v.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},v.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},v.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},v.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},v.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},v.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},v.prototype.find=function(e){for(var t=this.start,r=!1,o=null;t.hasNext()&&!r;)e(t=t.next)&&(o=t,r=!0);return o},v.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},v.prototype.push=function(e){return this.addLast(e)},v.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},v.prototype.pop=function(){return this.removeLast()},v.prototype.shift=function(){return this.removeFirst()};var m=v;function v(){this.start=new _,this.end=new _,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}var y,b,S,E,T,w,C="\u672a\u5f15\u5165\u6d88\u606f\u6a21\u5757",I=r(15),O=(Object.defineProperty(k.prototype,"clientIP",{get:function(){var e;return(null==(e=this.connection)?void 0:e.clientIP)||""},enumerable:!1,configurable:!0}),k.prototype.init=function(){var e;null!=(e=this.connection)&&e.init()},k.prototype.unInit=function(){var e;null!=(e=this.connection)&&e.unInit()},k.prototype.setAppInfo=function(e){var t;null!=(t=this.connection)&&t.setAppInfo(e)},k.prototype.setUserInfo=function(e){var t;null!=(t=this.connection)&&t.setUserInfo(e)},k.prototype.setNetAgentDefaultServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentDefaultServers(e)},k.prototype.setBackupDomains=function(e){var t;null!=(t=this.connection)&&t.setBackupDomains(e)},k.prototype.setDispatchConnectServers=function(e){var t;null!=(t=this.connection)&&t.setDispatchConnectServers(e)},k.prototype.setNetAgentSpecifiedServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentSpecifiedServers(e)},k.prototype.startHttpRequest=function(e,t,r,o,n){var i;null!=(i=this.connection)&&i.startHttpRequest(e,t,r,o,n)},k.prototype.getAppConfigByAgent=function(e,t,r){var o;return null==(o=this.connection)?void 0:o.getAppConfigByAgent(e,t,r)},k.prototype.getPCRequest=function(e,t){var r;return(null==(r=this.connection)?void 0:r.getPCRequest(e,t))||null},k.prototype.connectUa=function(){var e;null!=(e=this.connection)&&e.connectUa()},k.prototype.destroyConnect=function(){var e;null!=(e=this.connection)&&e.destroyConnect()},k.prototype.isConnect=function(){return!!this.connection&&this.connection.isConnect()},k.prototype.on=function(e,t){var r;return(null==(r=this.connection)?void 0:r.on(e,t))||!0},k.prototype.off=function(e,t){var r;return null==(r=this.connection)?void 0:r.off(e,t)},k.prototype.setLogger=function(e){var t;return null==(t=this.connection)?void 0:t.setLogger(e)},k.prototype.setAccess=function(e){var t;return null==(t=this.connection)?void 0:t.setAccess(e)},k);function k(){this.isLoad=!1,this.callBackList=[],this.connection=new I.ZegoConnectionAgent}(t=y=y||{})[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",(t=b=b||{})[t.EMPTY=0]="EMPTY",t[t.CLOSE=1]="CLOSE",(t=S=S||{})[t.Mode_UNSET=0]="Mode_UNSET",t[t.MODE_ONLINE=1]="MODE_ONLINE",t[t.MODE_TEST=2]="MODE_TEST",t[t.MODE_ALPHA=3]="MODE_ALPHA",(t=E=E||{})[t.CLOSE=0]="CLOSE",t[t.TEMP=1]="TEMP",t[t.TIMEOUT=2]="TIMEOUT",(t=T=T||{})[t.SERVICE_UNSET=0]="SERVICE_UNSET",t[t.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",t[t.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",t[t.SERVICE_MIX=3]="SERVICE_MIX",t[t.SERVICE_ZEUS=4]="SERVICE_ZEUS",t[t.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",t[t.SERVICE_L3=6]="SERVICE_L3",t[t.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",t[t.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",t[t.SERVICE_ZIM=9]="SERVICE_ZIM",t[t.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",t[t.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",t[t.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",t[t.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",t[t.SERVICE_QUALITY=14]="SERVICE_QUALITY",t[t.SERVICE_SECURITY=15]="SERVICE_SECURITY",t[t.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",t[t.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",t[t.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",t[t.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",t[t.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",t[t.SERVICE_CDN=21]="SERVICE_CDN",t[t.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",t[t.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",t[t.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",t[t.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",t[t.SERVICE_ECHO=26]="SERVICE_ECHO",t[t.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",t[t.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(t=w=w||{}).Logining="LOGINING",t.Logined="LOGINED",t.LoginFailed="LOGIN_FAILED",t.Reconnecting="RECONNECTING",t.Reconnected="RECONNECTED",t.ReconnectFailed="RECONNECT_FAILED",t.Kickout="KICKOUT",t.Logout="LOGOUT",t.LogoutFailed="LOGOUT_FAILED";var R={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."}},A=(P.base64encode=function(e){for(var t,r,o,n=e.length,i=0,s="";i<n;){if(t=255&e.charCodeAt(i++),i==n){s=(s+=P.base64EncodeChars.charAt(t>>2))+P.base64EncodeChars.charAt((3&t)<<4)+"==";break}if(r=e.charCodeAt(i++),i==n){s=(s=(s+=P.base64EncodeChars.charAt(t>>2))+P.base64EncodeChars.charAt((3&t)<<4|(240&r)>>4))+P.base64EncodeChars.charAt((15&r)<<2)+"=";break}o=e.charCodeAt(i++),s=(s=(s=(s+=P.base64EncodeChars.charAt(t>>2))+P.base64EncodeChars.charAt((3&t)<<4|(240&r)>>4))+P.base64EncodeChars.charAt((15&r)<<2|(192&o)>>6))+P.base64EncodeChars.charAt(63&o)}return s},P.base64decode=function(e){for(var t,r,o,n,i=e.length,s=0,a="";s<i;){for(;t=P.base64DecodeChars[255&e.charCodeAt(s++)],s<i&&-1==t;);if(-1==t)break;for(;r=P.base64DecodeChars[255&e.charCodeAt(s++)],s<i&&-1==r;);if(-1==r)break;a+=String.fromCharCode(t<<2|(48&r)>>4);do{if(61==(o=255&e.charCodeAt(s++)))return a}while(o=P.base64DecodeChars[o],s<i&&-1==o);if(-1==o)break;a+=String.fromCharCode((15&r)<<4|(60&o)>>2);do{if(61==(n=255&e.charCodeAt(s++)))return a}while(n=P.base64DecodeChars[n],s<i&&-1==n);if(-1==n)break;a+=String.fromCharCode((3&o)<<6|n)}return a},P.utf16to8=function(e){for(var t,r="",o=e.length,n=0;n<o;n++)1<=(t=e.charCodeAt(n))&&t<=127?r+=e.charAt(n):r=2047<t?(r=(r+=String.fromCharCode(224|t>>12&15))+String.fromCharCode(128|t>>6&63))+String.fromCharCode(128|t>>0&63):(r+=String.fromCharCode(192|t>>6&31))+String.fromCharCode(128|t>>0&63);return r},P.utf8to16=function(e){for(var t,r,o,n="",i=e.length,s=0;s<i;)switch((t=e.charCodeAt(s++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=e.charAt(s-1);break;case 12:case 13:r=e.charCodeAt(s++),n+=String.fromCharCode((31&t)<<6|63&r);break;case 14:r=e.charCodeAt(s++),o=e.charCodeAt(s++),n+=String.fromCharCode((15&t)<<12|(63&r)<<6|(63&o)<<0)}return n},P.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],P);function P(){}t=r(3);var L=r.n(t),N=(t=r(6),r.n(t)),D=function(){return(D=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},M=["00","01","02","03","04","05","06","07","08","09"],x=(B.checkConfigParam=function(e,t,r){return e&&"number"==typeof e&&this.checkInteger(e)?!(!t||"string"!=typeof t&&!Array.isArray(t)||""==t)||(r.error("ccp.0 server must be string or string array and not empty"),!1):(r.error("ccp.0 appid must be positive integer number and not empty"),!1)},B.checkPriConfigParam=function(e,t,r,o,n){return e&&"number"==typeof e&&this.checkInteger(e)?t&&"string"==typeof t?"object"!=typeof r||"string"!=typeof r.deviceID?(n.error("ccp.0 deviceID must be string and not empty"),!1):1===o||0===o||(n.error("ccp.0 anType must be 0 or 1"),!1):(n.error("ccp.0 dispatchServer must be string and not empty"),!1):(n.error("ccp.0 appid must be positive integer number and not empty"),!1)},B.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},B.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},B.registerCallback=function(e,t,r){var o;t.success&&(o=t.success,r[e+"SuccessCallback"]=o),t.error&&(o=t.error,r[e+"ErrorCallback"]=o)},B.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},B.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},B.logReportCallback=function(e,t,r,o){B.registerCallback(e,{success:function(e,o){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];B.dataReportEvent(t,r,e,o,n)}},o)},B.proxyRes=function(e,t,r,o){return{interResolve:function(o){e.uploadReport(t),r(o)},interReject:function(r,n){var i;void 0===n&&(n=""),(i=r.code<2e9&&1e9<r.code?B.decodeServerError(r.code,r.msg):{code:r.code,message:r.msg})&&e.addMsgInfo(t,{error:i.code,message:i.message+n}),e.uploadReport(t),o({errorCode:r.code||r.errorCode})}}},B.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return R.SUCCESS;var r,o=D({},R.ROOM_INNER_ERROR);return o.code=e,o.msg=1e9<e?(r=t[e])?"liveroom cmd error, code: "+e+", message: "+r:t[1e9]+e:t[e]?t[e]+" code:"+e:"unknown error code:"+e,o},B.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},B.decodeServerError=function(e,t){var r={code:-1,message:"server error"};return r.code=1e9<e?e-1e9+52e6:e+2002e6,t&&(r.message=t),r},B.getLiveRoomError=function(e,t){var r={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED"};return t?2e5<e&&e<3e5?r[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||r[e]||"ROOM_INNER_ERROR":r[e]||"ROOM_INNER_ERROR":1e9<e?r[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},B.getKickoutError=function(e,t){var r={code:e,message:"kickout reason = "+e};if(t)switch(e){case 1:r.code=63000001,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:r.code=63000002,r.message="zpush manual kickout",r.name="MANUAL_KICKOUT";break;case 4:r.code=63000005,r.message="zpush token expired",r.name="TOKEN_EXPIRED";break;default:r.code=e,r.message="kickout reason = "+e}else switch(e){case 1:r.code=63000001,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:r.code=63000002,r.message="zpush manual kickout",r.name="MANUAL_KICKOUT";break;case 3:r.code=63000003,r.message="kickout reason = "+e;break;case 4:r.code=63000004,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:r.code=63000005,r.message="zpush token expired",r.name="TOKEN_EXPIRED";break;default:r.code=e,r.message="kickout reason = "+e}return r},B.dataReportEvent=function(e,t,r,o,n){switch(r){case"eventStart":e.eventStart(t,o);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,o,n[0]);break;case"addEventMsg":e.addEventMsg(t,o,n[0],n[1]);break;case"addEvent":e.addEvent(t,o);break;case"eventEnd":e.eventEnd(t,o);break;case"addMsgInfo":e.addMsgInfo(t,n[0])}},B.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},B.mergeUserList=function(e,t,r,o){e.debug("msl.0 call");var n=[],i=[];r=r||[];for(var s=0;s<r.length;s++){for(var a=!1,c=0;c<t.length;c++)if(r[s].userID===t[c].userID){a=!0;break}a||n.push(r[s])}for(var u=0;u<t.length;u++){a=!1;for(var l=0;l<r.length;l++)if(t[u].userID===r[l].userID){a=!0;break}a||i.push(t[u])}for(t.splice(0),s=0;s<r.length;s++)t.push(t[s]);o(n,i),e.debug("msl.0 call success")},B.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&0<=e:"number"==typeof e&&e%1==0&&0<e},B.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=r},B.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},B.uuid=function(e,t){var r,o,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||n.length,e)for(r=0;r<e;r++)i[r]=n[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(o=0|16*Math.random(),i[r]=n[19==r?3&o|8:o]);return i.join("")},B.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var o=0;o<r;o++){var n=parseInt(e[o]),i=parseInt(t[o]);if(i<n)return 1;if(n<i)return-1}return 0},B.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),o=null!=window.opr,n=e.indexOf("Chrome")&&window.chrome;return e=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version"),t?"IE":r?"Firefox":o?"Opera":n?"Chrome":e?"Safari":"Unkown"},B.isTestEnv=function(e){return!(!e.startsWith("wss")||-1===e.indexOf("test")||!e.endsWith("ws"))},B.getLogLevel=function(e){return h[e]},B.getUint64=function(e,t,r){var o=r.getUint32(e,t);return r=r.getUint32(e+4,t),e=t?o+Math.pow(2,32)*r:Math.pow(2,32)*o+r,Number.isSafeInteger(e)||console.warn(e,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),e},B.decodeTokenExpire=function(e){try{var t,r=Uint8Array.from(A.base64decode(e),(function(e){return e.charCodeAt(0)})),o=new DataView(r.buffer);return 0<(t="function"==typeof o.getBigInt64?o.getBigUint64(0):B.getUint64(0,!1,o))?Number(t):Number(o.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},B.bin2hex=function(e){for(var t,r="",o=0,n=(e+="").length;o<n;o++)r+=(t=e.charCodeAt(o).toString(16)).length<2?"0"+t:t;return r},B.getCanvasFingerprint=function(e){var t=document.createElement("canvas"),r=((r=t.getContext("2d")).textBaseline="top",r.font="14px 'Arial'",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",r.fillText(e,2,15),r.fillStyle="rgba(102, 204, 0, 0.7)",r.fillText(e,4,17),t.toDataURL().replace("data:image/png;base64,",""));return e=atob(r),this.bin2hex(e.slice(-16,-12))},B.generateUUID=function(e){var t,r;return 0===(e=void 0===e?0:e)?r=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),r||(t=(new Date).getTime(),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(36)})),0===e?(e=this.getCanvasFingerprint("hello, zego")+r.slice(8),localStorage.setItem("z_deviceID",e)):wx.setStorageSync("z_deviceID",r),r)},B.getNetType=function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()},B.getNetTypeNum=function(){var e;return-1<(e=((null==(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection)?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()).indexOf("4G")?a.NT_4G:-1<e.indexOf("2G")?a.NT_2G:-1<e.indexOf("3G")?a.NT_3G:-1<e.indexOf("WIFI")?a.NT_WIFI:-1<e.indexOf("LINE")?a.NT_LINE:-1<e.indexOf("NONE")?a.NT_NONE:a.NT_UNKNOWN},B.encryptStores=function(e,t){return L.a.encrypt(e,t).toString()},B.decryptStores=function(e,t){try{return L.a.decrypt(e,t).toString(N.a)}catch(e){return""}},B.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(M[e.getMonth()+1]||e.getMonth()+1)+"/",(M[e.getDate()]||e.getDate())+" ",(M[e.getHours()]||e.getHours())+":",(M[e.getMinutes()]||e.getMinutes())+":",M[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},B);function B(){}var U,j={product:"Web_SDK",URL:["https://cloud-setting-api.zego.im/cloud-setting/get","https://cloud-setting-api.zegocloud.com/cloud-setting/get"],ONLINE:!1},H={product:"rtc_web",importLevel:i.I,levels:[0,10,100,1e3],bps:32e3},z="init",V="0c9e6e0f8c0a8f4e",q="z_net_access_servers",G="z_appconfig",Z={domains:["accesshub-wss.zego.im","accesshub-wss.coolzcloud.com","accesshub-wss.zegocloud.com"],primaryDomains:["zego.im","coolzcloud.com","zegocloud.com"],mode:"online",modeNo:S.MODE_ONLINE,sdkType:3,connectVer:4,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1};function F(e,t){this.logger=e,this.stateCenter=t,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}function W(e){return e}function Y(e){return e}function Q(e){return e}function K(e){return e}F.prototype.init=function(e,t,r,o){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof o&&(this.RETRY_MAX_TIME_INTERVAL=o)},F.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},t=F,(Ce=U=U||{}).RTM_CONSTRUCTOR="zm.0",Ce.RTM_BIND_WINDOW_LISTENER="zm.wl",Ce.RTM_SET_LOG_CONFIG="zm.slf",Ce.RTM_SET_DEBUG_VERBOSE="zm.sdv",Ce.RTM_LOGIN_ROOM="zm.lg",Ce.RTM_LOGOUT_ROOM="zm.lo",Ce.RTM_GET_SETTING_UNIFY="zm.gsu",Ce.RTM_FETCH_APP_CONFIG="zm.fac",Ce.RTM_SET_ACCESS="zm.sa",Ce.RTM_CREATENETAGENT="zm.cna",Ce.RTM_GETSTOREAPPCONFIG="zm.gsac",Ce.LIVEROOMMODULES_BINDROOMHANDLER="zm.lrm.brh",Ce.RTM_SET_CLOUD_SETTING_URLS="zm.scsu",Ce.RTM_CLOUD_REPORT_NOTIFY="zm.crn",Ce.RTM_ON="zm.on",Ce.RTM_OFF="zm.off",Ce.RTM_RENEWTOKEN="zm.rntk",Ce.RTM_RESETTOKENTIMER="zm.rstt",Ce.RTM_ENABLE_MULTI_ROOM="zm.emr",Ce.RTM_SEND_PB="zm.spb",Ce.RTM_GET_HEADER="zm.gh",Ce.ROOM_LOGIN_ROOM="zm.rm.lg",Ce.ROOM_TRY_LOGIN="zm.rm.tl",Ce.ROOM_OPEN_HANDLER="zm.rm.op",Ce.ROOM_HANDLE_LOGINRSP="zm.rm.lgr",Ce.ROOM_CLOSEHANDLER="zm.rm.clh",Ce.ROOM_LOGOUT="zm.rm.lo",Ce.ROOM_RESET_ROOM="zm.rm.rr",Ce.ROOM_DISCONNECT="zm.rm.dcn",Ce.ROOM_KICK_OUT="zm.rm.kco",Ce.ROOM_STATUS_CALLBACK="zm.rm.scb",Ce.ROOM_RESETTOKEN_TIMER="zm.rm.rst",Ce.ROOM_HANDLE_Hb_LOGOUT="zm.hhl",Ce.HEARTBEAT_START="zm.hb.st",Ce.HEARTBEAT_HEARTBEAT_RSP="zm.hb.rsp",Ce.HEARTBEAT_RESET="zm.hb.rst",Ce.SERVICE_START_CHECK="zm.sc.0",Ce.SERVICE_STOP_CHECK="zm.sc.1",Ce.SERVICE_PUSH="zm.sv.ps",Ce.SERVICE_SEND="zm.sv.sd",Ce.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH="zm.rrh.hlf",Ce.RETRYROOMHANDLER_HANDLE_ERROR="zm.rrh.he",Ce.USER_LOGIN_RSP="zm.us.lgr",Ce.USER_FETCH_USER="zm.us.ftu",Ce.USER_FETCH_USER_RSP="zm.us.urp",Ce.USER_USER_PUSH="zm.us.uph",Ce.USER_MERGE_SEQ="zm.us.mg",Ce.USER_MERGE_TIMEOUT="zm.us.mto",Ce.USER_MERGE="zm.us.mg",Ce.USER_HB_PATCH="zm.us.pt",Ce.STATE_ACTION="zm.st.at",Ce.ON_LISTENER="ON_LISTENER",Ce.LIVEROOMHANDLER_SENDMESSAGE="zm.lrh.sm",Ce.LIVEROOMHANDLER_HANDLEPUSH="zm.lrh.hp",Ce.LIVEROOMHANDLER_HANDLESWITCHPUSH="zm.lrh.hsp",Ce.LIVEROOMHANDLER_PUSHUSERUPDATE="zm.lrh.puu",Ce.LIVEROOMHANDLER_PUSHKICKOUT="zm.lrh.pk",Ce.LIVEROOMHANDLER_GETSTREAMLIST="zm.lrh.gs",Ce.LIVEROOMHANDLER_LOGIN="zm.lrh.lgi",Ce.LIVEROOMHANDLER_FETCH_USER_LIST="zm.lrh.ful",Ce.LIVEROOMHANDLER_LOGOUT="zm.lrh.lgo",Ce.LIVEROOMHANDLER_SENDSTREAMUPDATE="zm.lrh.sru",Ce.LIVEROOMHANDLER_RENEW_TOKEN="zm.lrh.rt",Ce.LIVEROOMHANDLER_SENDSIGNALCMD="zm.lrh.ssc",Ce.LIVEROOMHANDLER_SENDBIGROOMMESSAGE="zm.lrh.sbrm",Ce.LIVEROOMHANDLER_SENDCUSTOMCOMMAND="zm.lrh.scc",Ce.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE="zm.lrh.frm",Ce.LIVEROOMHANDLER_SENDRELIABLEMESSAGE="zm.lrh.srm.0",Ce.LIVEROOMHANDLER_SENDROOMMSG="zm.lrh.srm.1",Ce.LIVEROOMHANDLER_HANDLEDISCONNECTED="zm.lrh.hd",Ce.LIVEROOMHANDLER_HANDLEBROKEN="zm.lrh.hb",Ce.LIVEROOMHANDLER_HANDLECONNECTED="zm.lrh.hc",Ce.LIVEROOMHANDLER_RESET="zm.lrh.r.0",Ce.TRACER_INIT="zm.tc.ii",Ce.TRACER_LOAD_SCRIPT="zm.tc.ls";var J={kZMInitSetting:{event:"/sdk/init",error:{kInvalidParamError:R.INPUT_PARAM},system_info:Y,servers:function(e){return e},is_from_cache:K,project:Y,liveroom_version:Y,biz_type:Q,lua_md5:Y,sev_env:Y,use_na:Q},kZMListener:{event:"listener"},kZMRoomContext:{event:"room_context"},kZMHB:{event:"room_hb"},kZMSetDebug:{event:"/sdk/set_debug",debug:Y},kZMSetLog:{event:"/sdk/set_log_config",error:{kInvalidParamError:R.INPUT_PARAM},log_level:function(e){return e},remote_log_level:Y,log_url:Y},kZMOnListener:{event:"/sdk/on_listener",listener:Y,error:{INPUT_PARAM:R.INPUT_PARAM}},kZMOffListener:{event:"/sdk/off_listener",listener:Y,error:{INPUT_PARAM:R.INPUT_PARAM}},kZMLoginRoom:{event:"/sdk/login",room_id:Y,room_sid_string:Y,user_state_update:Q,max_member_cnt:Q,message:Y,token:Y,svr_env:Y,server:Y,try_cnt:Q,room_mode:Q,role:Q,audience_create_room:Q,liveroom_sid_string:Y,error:{ROOM_ID_NULL:R.ROOM_ID_NULL,INPUT_PARAM:R.INPUT_PARAM,ROOM_ID_TOO_LONG:R.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:R.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:R.USER_ID_NULL,USER_ID_TOO_LONG:R.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:R.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:R.USER_NAME_NULL,USER_NAME_TOO_LONG:R.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:R.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:R.LOGIN_TIMEOUT,INNER_ERROR:R.ROOM_INNER_ERROR,NETWORK_BROKEN:R.NETWORK_BROKEN}},kZMSubLogin:{event:"/sdk/sublogin",server:Y,room_id:Y,room_sid_string:Y},kZMSwitchLogin:{event:"/zpush/login",sdk_zpush_sessionid_string:Y},kZMLiveRoomEnter:{event:"/liveroom/enter"},kZegoLiveRoomConnect:{event:"/liveroom/connect"},kZMReNewToken:{event:"/sdk/renew_token",error:{INPUT_PARAM:R.INPUT_PARAM,NOT_LOGIN:R.NOT_LOGIN},token:Y},kZMHbTimeout:{event:"/zpush/hb_timeout"},kZMLogoutRoom:{event:"/sdk/logout",error:{INPUT_PARAM:R.INPUT_PARAM,ROOM_NOT_EXIST:R.ROOM_NOT_EXIST},room_id:Y,room_sid_string:Y,is_multi:K,is_send_cmd_net:K,liveroom_sid_string:Y},kZMSwitchLogout:{event:"/switch/logout_user",error:{INPUT_PARAM:R.INPUT_PARAM,ROOM_NOT_EXIST:R.ROOM_NOT_EXIST}},kZMQuitLiveroom:{event:"/liveroom/quit",error:{INPUT_PARAM:R.INPUT_PARAM,ROOM_NOT_EXIST:R.ROOM_NOT_EXIST},is_multi:K,liveroom_sid_string:Y,sdk_zpush_sessionid_string:Y},kZMMultiLogout:{event:"/zpush/multi_logout_user",error:{INPUT_PARAM:R.INPUT_PARAM,ROOM_NOT_EXIST:R.ROOM_NOT_EXIST}},kZMReLoginRoom:{event:"/sdk/relogin",error:{ROOM_ID_NULL:R.ROOM_ID_NULL,ROOM_DISCONNECT:R.NETWORK_BROKEN},server:Y,try_cnt:Q},kZMTempBroken:{event:"/liveroom/tempbroken"},kZMReconnect:{event:"/sdk/reconnect",room_broken_time:Q},kZMSdkDisconnect:{event:"/sdk/disconnect"},kZMKickout:{event:"/sdk/kickout",user_id:Y,kickout_reason:Q,need_relogin:Q,error:{}},kZMRoomHB:{event:"/liveroom/hb",room_id:Y,room_sid_string:Y,interval:Q,stream_seq:Q,server_user_seq:Q,error:{NOT_LOGIN:R.NOT_LOGIN,HB_TIMEOUT:R.TIMEOUT}},kZMRoomRecvUserUpdateInfo:{event:"/liveroom/recv_user_update_info",user_list_seq:Q,update_user:W,error:{ROOM_NOT_EXIST:R.ROOM_NOT_EXIST}},kZegoListener:{event:"/sdk/listener"},kZegoEnableMultiRoom:{event:"/sdk/enable_multi_room",is_multi:K,error:{kInvalidParamError:R.INPUT_PARAM,kAlreadyLoginError:R.ALREADY_LOGIN}},kZMCloudSettingCache:{event:"/cloud_setting/cache",files:W},kZMCloudSettingRefresh:{event:"/cloud_setting/refresh",request_kv:W,files:W},kZMCloudSettingRequest:{event:"/cloud_setting/request",request_detail:W,files:W},kZMGetCurrentUserList:{event:"/liveroom/get_current_user_list",user_index:Q,is_time_ascend:K,use_na:Q},kZegoConnConnect:{event:"/zegoconn/connect",connect_id:Y,request_count:Q,events:W},kZegoConnDisConnect:{event:"/zegoconn/disconnect",connect_id:Y,url:Y,connect_duration:Q},kZegoConnDispatch:{event:"/zegoconn/auto_dispatch",domain_list:function(e){return e}},kZegoRequest:{event:"/zegoconn/request",req_location:W},kZegoSDKConfigInit:{event:"/sdk_config/init",trigger_reason:W,try_count:Q},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",service_no:Q,proxy_link_sources:Q,recv_time:Q,connect_stream:Q},kZegoSDKProxyBroken:{event:"/zegoconn/proxy_broken",service_no:Q},kZegoSDKProxyDisconnect:{event:"/zegoconn/proxy_disconnect",service_no:Q}};X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(re,$=t),re.prototype.renewLocalToken=function(e,t){this.token=e,this.room.token=this.token;var r=(new Date).getTime(),o=void 0;t&&"number"==typeof t?o=1e3*t:"string"==typeof e&&["03","04"].includes(e.substring(0,2))&&(o=1e3*x.decodeTokenExpire(e.substring(2))-r),o&&this.roomHandler.resetTokenTimer(o-this.stateCenter.local_time_deviation),this.stateCenter.actionListener("_tokenRenewed",e,this.room.roomID)},re.prototype.initRoom=function(e,t,r,o,n,i,s){this.roomHandler=e,this.roomID=t,this.renewLocalToken(r),this.user=o,this.server=n,this.serverBak=i||n,this.config=s},re.prototype.active=function(e){var t=this,r=(void 0===e&&(e=!1),this.logger.info(U.ROOM_LOGIN_ROOM+" retry call "+(null==(r=this.room)?void 0:r.roomID)),(null!=(r=this.loginRoomCallback)&&r.success?J.kZMSubLogin:J.kZMReLoginRoom).event);if(this.subLoginSpan||(this.subLoginSpan=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.roomID},{key:r,par:this.roomID},r,!0),this.spanKey=r),this.roomHandler.setRunState(n.trylogin),this.room.isMulti&&(null==(r=this.stateCenter.roomModulesList.find((function(e){return!e.isMulti})))?void 0:r.runState)!==n.login)this.logger.info(U.ROOM_LOGIN_ROOM+" service is disconnected, multi room stop retry");else if(this.retryTimer)this.logger.info(U.ROOM_LOGIN_ROOM+" has actived, ignore");else{var o=this.stateCenter.networkState==s.offline;if(o){if(this.logger.info(U.ROOM_LOGIN_ROOM+" check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return void this.logger.warn(U.ROOM_LOGIN_ROOM+" network is broken, stop retry")}else this.retryNetCount=0;this.isOverTime?this.logger.info(U.ROOM_LOGIN_ROOM+" retry over time, stop retry"):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(r=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=r>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:r),this.retryTimer=setTimeout((function(){t.roomHandler.login(t.retryActiveCount%2==1?t.server:t.serverBak,t.roomID,t.token,t.user,t.config,(function(e){t.stateCenter.networkState=s.online,t.handleLoginFinish(e)}),(function(e,r){t.handleLoginFinish(!1,e,r)})),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,o?t.retryNetCount++:t.retryActiveCount++}),e?0:1e3*this.retryActiveInterval))}},re.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.logger.info(U.ROOM_LOGIN_ROOM+" start max timer"),this.maxTimer=setTimeout((function(){e.logger.info(U.ROOM_LOGIN_ROOM+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.roomHandler.resetRoom(),e.stopMaxTime(),e.invalid(),e.onactive(!1,R.LOGIN_TIMEOUT),e.subLoginSpan&&(e.stateCenter.reporter.spanEnd({key:e.spanKey,par:e.roomID},{error:R.LOGIN_TIMEOUT.code,message:R.LOGIN_TIMEOUT.msg}),e.subLoginSpan=null),e.loginRoomCallback.fail&&(e.loginRoomCallback.fail(R.LOGIN_TIMEOUT),e.roomHandler.disconnectedHandle(R.LOGIN_TIMEOUT),e.resetCallBack())}),1e3*this.RETRY_MAX_TIME))},re.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},re.prototype.onactive=function(e,t){},re.prototype.handleError=function(e,t){if(this.RETRY_MAX_TIME<3)return!1;if(t){t=void 0;var r=void 0,o=void 0,i=(this.stateCenter.useNetAgent?(t=["202002","205030","205035","50116","50117","50118","50119","50120","50121","50122","50123","50124","50125","50126","50127","50128"],r=["40001","40100"],o=["201002","30019"]):(t=["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"],r=["1100040001","1100040100"]),e.code+"");if(this.stateCenter.useNetAgent){if(10015===e.code)return this.room.retryConnect(),!0;if(40001<=e.code&&e.code<=40100||50200<=e.code&&e.code<=50299||null!=o&&o.includes(i))return this.room.resetSessionInfo(),!0}return!t.includes(i)&&(!!r.includes(i)||this.room.lastRunState==n.login&&(this.logger.warn(U.RETRYROOMHANDLER_HANDLE_ERROR+" reset"),this.room.sessionID="0",this.invalid(),!0))}return!0},re.prototype.setLoginRoomCallback=function(e,t){this.loginRoomCallback.success=e,this.loginRoomCallback.fail=t},re.prototype.loginFail=function(e){this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(!1,e),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(e),this.roomHandler.disconnectedHandle(e),this.resetCallBack())},re.prototype.handleLoginFinish=function(e,t,r){this.logger.info(U.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH+" "+e+" "+JSON.stringify(t)),t?(this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{error:t.code,message:t.msg}),this.subLoginSpan=null),this.handleError(t,r)?(this.maxTimer||this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(e,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.roomHandler.disconnectedHandle(t),this.resetCallBack()))):(this.stopMaxTime(),this.invalid(),this.onactive(e,{code:0,msg:""}),this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{room_id:this.roomID,room_sid_string:null==(r=this.room)?void 0:r.roomSessionID}),this.subLoginSpan=null),this.loginRoomCallback.success&&(this.loginRoomCallback.success(e),this.resetCallBack()))},re.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},re.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0};var X,$,ee,te=re;function re(e,t,r){var o=$.call(this,e,t)||this;return o.logger=e,o.stateCenter=t,o.room=r,o.retryNetCount=0,o.retryNetMaxTimes=3,o.spanKey="",o.loginRoomCallback={},o}(Ce=ee=ee||{}).NOT_EMPTY="NOT_EMPTY",Ce.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",Ce.TYPE_STRING="TYPE_STRING",Ce.TYPE_INTEGER="TYPE_INTEGER",Ce.TYPE_OBJECT="TYPE_OBJECT",Ce.MAX_LENGTH_10="MAX_LENGTH_10",Ce.MAX_LENGTH_64="MAX_LENGTH_64",Ce.MAX_LENGTH_100="MAX_LENGTH_100",Ce.MAX_LENGTH_128="MAX_LENGTH_128",Ce.MAX_LENGTH_256="MAX_LENGTH_256",Ce.MAX_LENGTH_1024="MAX_LENGTH_1024";var oe={error:{code:0,msg:"suc"}},ne={NOT_EMPTY:function(e,t,r,o,n){return void 0===t||""===t||null===t?(o.error("".concat(r," ").concat(e," is empty")),n):oe},ILLEGAL_CHARACTERS:function(e,t,r,o,n){return x.checkIllegalCharacters(t)?oe:(o.error("".concat(r," ").concat(e," contains illegal characters")),n)},TYPE_STRING:function(e,t,r,o,n){return"string"!=typeof t?(o.error("".concat(r," ").concat(e," must be string")),n):oe},TYPE_INTEGER:function(e,t,r,o,n){return x.checkInteger(t,!1)?oe:(o.error("".concat(r," ").concat(e,"  must be integer number")),n)},TYPE_OBJECT:function(e,t,r,o,n){return t&&"object"==typeof t?oe:(o.error("".concat(r," ").concat(e,"  must be object")),n)},MAX_LENGTH_10:function(e,t,r,o,n){return 10<t.length?(o.error("".concat(r," ").concat(e," is too long")),n):oe},MAX_LENGTH_64:function(e,t,r,o,n){return 64<t.length?(o.error("".concat(r," ").concat(e," is too long")),n):oe},MAX_LENGTH_100:function(e,t,r,o,n){return 100<t.length?(o.error("".concat(r," ").concat(e," is too long")),n):oe},MAX_LENGTH_128:function(e,t,r,o,n){return 128<t.length?(o.error("".concat(r," ").concat(e," is too long")),n):oe},MAX_LENGTH_256:function(e,t,r,o,n){return 256<t.length?(o.error("".concat(r," ").concat(e," is too long")),n):oe},MAX_LENGTH_1024:function(e,t,r,o,n){return 1024<t.length?(o.error("".concat(r," ").concat(e," is too long")),n):oe}};Object.defineProperty(se.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,d.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,d.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,d.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),se.prototype.getRequestId=function(){return this.idName+"-"+p()},se.prototype.actionListener=function(e){for(var t,r=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];["getAnchorInfo","HBResponse","roomLoginResponse"].includes(e)||e.startsWith("_")||!this.listenerList[e]||((t=this.reporter.createSpan(i.H,{key:J.kZMListener.event},{key:""},J.kZegoListener.event)).setAttributes({listener:e,listener_params:JSON.stringify(o)}),t.end()),["roomStateChanged","tokenWillExpire"].includes(e)&&this.logger.info("zm.al ".concat(e," ").concat(JSON.stringify(o))),this.listenerList[e]&&this.listenerList[e].forEach((function(t){try{t.apply(void 0,o)}catch(t){r.logger.error(U.STATE_ACTION+" ",e," ",JSON.stringify(t))}}))},se.prototype.onListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(U.ON_LISTENER+" listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error(U.ON_LISTENER+" event "+e+" no found"),!1)},Object.defineProperty(se.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),se.prototype.proxyRes=function(e,t,r){return{interResolve:function(r){t(r),e.end()},interReject:function(t,o){var n;void 0===o&&(o=""),(n=t.code<2e9&&1e9<t.code?x.decodeServerError(t.code,t.msg):{code:t.code,message:t.msg})&&e.setAttributes({error:n.code,message:n.message+o}),e.end(),r({errorCode:t.code})}}};var ie=se;function se(e,t){this.logger=e,this.dataReport=t,this._debug=!1,this.appConfigFetched=!1,this.requestList={},this.mode=S.MODE_ONLINE,this.connectState="connected",this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],roomStateChanged:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=s.online,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.useNetAgent=!0,this.netHasSet=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown",this.mode=Z.modeNo}ce.prototype.init=function(e){var t=this,r=e.body.hearbeat_interval<3e3?3e3:e.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout((function(){t.start(r)}),r),this.initCount++},ce.prototype.start=function(e){var t,r=this,o=(this.logger.info(U.HEARTBEAT_START+" call"),this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},J.kZMRoomHB.event));this.room.isLogin()?3<++this.tryHeartbeatCount?(this.logger.error(U.HEARTBEAT_START+" come to try limit"),this.stateCenter.reporter.setError(o,J.kZMRoomHB.error.HB_TIMEOUT),this.hbLogout(R.HEARTBEAT_TIMEOUT),this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},J.kZMHbTimeout.event).end()):((this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).heartBeat(t=function(e,t){var n=e.body&&e.body.err_code;e.header&&e.body?0!==n&&(n=x.decodeServerError(e.body.err_code||e.body.code,e.body.err_message||e.body.message),o.setAttributes({error:n.code,message:n.message+e.body.err_code})):o.setAttributes({error:(0<e.code?e:R.ROOM_INNER_ERROR).code,message:e.msg||R.ROOM_INNER_ERROR}),r.handleHeartbeatRsp(e,t),0===(null==(n=null==e?void 0:e.body)?void 0:n.err_code)&&o.setAttributes({interval:J.kZMRoomHB.interval(null==(t=null==e?void 0:e.body)?void 0:t.hearbeat_interval),stream_seq:J.kZMRoomHB.stream_seq(null==(n=null==e?void 0:e.body)?void 0:n.stream_seq),server_user_seq:J.kZMRoomHB.server_user_seq(null==(t=null==e?void 0:e.body)?void 0:t.server_user_seq)}),o.end()},t,this.room),this.heartbeatInterval=e,t=this.heartbeatInterval,2<=this.initCount?(t=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):t=this.heartbeatInterval,this.heartbeatTimer=setTimeout((function(){r.start(r.heartbeatInterval)}),t),this.logger.info(U.HEARTBEAT_START+" call success")):(this.logger.error(U.HEARTBEAT_START+" state error"),this.stateCenter.reporter.setError(o,J.kZMRoomHB.error.NOT_LOGIN))},ce.prototype.handleHeartbeatRsp=function(e,t){if(e.body&&e.body.err_code&&0!==e.body.err_code)return this.logger.error(U.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.err_code),1000000152==e.body.err_code?void this.hbLogout(R.HEARTBEAT_TIMEOUT):void this.hbLogout(x.getServerError(e.body.err_code));e.header&&e.body?((this.tryHeartbeatCount=0)!==e.body.hearbeat_interval&&(this.heartbeatInterval=e.body.hearbeat_interval,this.heartbeatInterval<3e3&&(this.heartbeatInterval=3e3)),this.heartbeatRspNotiFy(e),this.logger.info(U.HEARTBEAT_HEARTBEAT_RSP+" call success")):(this.logger.error(U.HEARTBEAT_HEARTBEAT_RSP+" disconnect, error=",JSON.stringify(e)+", seq = "+t),this.hbLogout(e))},ce.prototype.heartbeatRspNotiFy=function(e){},ce.prototype.hbLogout=function(e){},ce.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info(U.HEARTBEAT_RESET+" call success")};var ae=ce;function ce(e,t,r,o,n,i){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=o,this.liveRoomHandler=n,this.room=i,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}le.prototype.resetTokenTimer=function(e){var t=this;this.logger.info(U.ROOM_RESETTOKEN_TIMER+"  call: "+(e=2147483647<(e=(e-=3e4)<0?0:e)?2147483647:e)),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout((function(){t.stateCenter.actionListener("tokenWillExpire",t.room.roomID),t.stateCenter.actionListener("roomTokenWillExpire",t.room.roomID)}),e)},le.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},le.prototype.setRunState=function(e){this.room.runState!==e&&(this.room.lastRunState=this.room.runState,this.room.runState=e)},le.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},le.prototype.reportLogoutSpan=function(e){var t,r=(this.stateCenter.isMultiRoom?J.kZMQuitLiveroom:J.kZMSwitchLogout).event;r=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLogoutRoom.event,par:this.room.roomID},{key:""},r),e&&this.stateCenter.useNetAgent&&"0"===this.liveRoomHandler.roomServicer.zPushSid&&(this.liveRoomHandler.roomServicer.zPushSid=null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()),e=this.stateCenter.useNetAgent?e?null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.zPushSid:null==(t=null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.switchSessionID)?void 0:t.toString():void 0,r.setAttributes({room_id:J.kZMLogoutRoom.room_id(null==(t=this.room)?void 0:t.roomID),room_sid_string:J.kZMLogoutRoom.room_sid_string(null==(t=this.room)?void 0:t.roomSessionID),liveroom_sid_string:J.kZMQuitLiveroom.liveroom_sid_string(null==(t=this.room)?void 0:t.sessionID),sdk_zpush_sessionid_string:J.kZMQuitLiveroom.sdk_zpush_sessionid_string(e)}),r.end()},le.prototype.resetRoom=function(e){var t,r=this;this.logger.info(U.ROOM_RESET_ROOM+" call"),1<this.stateCenter.roomModulesList.length&&!e&&(this.room.isMulti=!0),this.resetTryLogin(),"0"===this.room.sessionID||this.room.runState===n.logout||this.room.isDisConnect()||(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).logout(this.room,t=function(e){r.handleLogoutRsp(e,!r.room.isMulti)},t),this.reportLogoutSpan(e),this.setRunState(n.logout),this.room.sessionID="0",this.room.roomSessionID="0",this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent?null!=(t=this.liveRoomHandler)&&t.reset():this.service.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter((function(e){return e!==r.room})),(e=this.stateCenter.roomModulesList[0])&&(e.isMulti=!1,e.runState!==n.login&&e.roomTryHandler&&(e.roomTryHandler.startMaxTime(),e.roomTryHandler.active())),this.stateCenter.isMultiRoom&&0===this.stateCenter.roomModulesList.length&&(this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLogoutRoom.event,par:this.room.roomID},{key:""},J.kZMMultiLogout.event).end(),this.liveRoomHandler.roomServicer.zPushSid="0"),this.logger.info(U.ROOM_RESET_ROOM+" call success")},le.prototype.resetRoomCallBack=function(){},le.prototype.loginSuccessCallBack=function(e,t){},le.prototype.handlePushKickout=function(e,t,r){var o,s,a=this;this.logger.info(U.ROOM_KICK_OUT+"  call "+JSON.stringify(e)),r||this.room.sessionID===e.header.session_id||this.room.sessionID===e.body.session_id?(r=x.getKickoutError(e.body.reason,this.stateCenter.useNetAgent),(o=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},J.kZMKickout.event)).setAttributes({error:null==(s=R[r.name||"ROOM_INNER_ERROR"])?void 0:s.code,message:r.message,kickout_reason:J.kZMKickout.kickout_reason(null==(s=e.body)?void 0:s.reason),need_relogin:J.kZMKickout.need_relogin(null==(s=null==e?void 0:e.body)?void 0:s.need_relogin)}),o.end(),(s=this.room.roomTryHandler)?(s.onactive=function(e,t){a.disconnectedHandle(t),a.stateCenter.actionListener("_kickout",t)},e.body.need_relogin&&1==e.body.need_relogin?(this.room.sessionID="0",s.startMaxTime(),s.active()):(this.setRunState(n.logout),this.resetRoom(t),o={},e&&e.body.custom_reason?o.custom_kickout_message=e.body.custom_reason:r.name&&R[r.name]&&(s=e.body.reason||e.body.kickout_reason,o.custom_kickout_message=R[r.name].msg+"; kickout reason: "+s),r.name&&R[r.name]?this.disconnectedHandle(R[r.name],{extendedData:JSON.stringify(o),isKickout:!0}):this.disconnectedHandle(R.ROOM_INNER_ERROR,{extendedData:JSON.stringify(o),isKickout:!0}),this.stateCenter.actionListener("_kickout",{code:R.MANUAL_KICKOUT.code,msg:R.MANUAL_KICKOUT.msg+e.body.reason||e.body.kickout_reason}))):this.logger.info(U.ROOM_KICK_OUT+" try handler no found")):this.logger.info(U.ROOM_KICK_OUT+" session id wrong, ignore")},le.prototype.handleHbLogout=function(e){var t=this,r=this.room.roomTryHandler;r&&(r.onactive=function(e,r){t.disconnectedHandle(r)},[R.HEARTBEAT_TIMEOUT,R.SOCKET_CLOSE].includes(e)||[105,152,2001].includes(null==e?void 0:e.code)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?(r.startMaxTime(),r.active()):[R.TIMEOUT].includes(e)?this.logger.warn(U.ROOM_HANDLE_Hb_LOGOUT+" timeout"):(this.logger.warn(U.ROOM_HANDLE_Hb_LOGOUT+" unexpected error: ".concat(JSON.stringify(e))),r.stopMaxTime(),r.invalid(),this.resetRoom(),this.disconnectedHandle(e)))},le.prototype.onDisconnect=function(e){var t=this;this.logger.error(U.ROOM_DISCONNECT+" "+e.msg),"string"==typeof e.code&&"Error.Network"===e.code||"number"==typeof e.code&&(e.code<2e9&&1e9<e.code||e.code<1e6?x.decodeServerError(e.code,e.msg):(e.code,e.msg)),x.unregisterCallback(J.kZMReLoginRoom.event,this.stateCenter.reportList),(e=this.room.roomTryHandler)?(e.onactive=function(e,r){r&&0!==r.code?t.roomStateHandle("DISCONNECTED",w.ReconnectFailed,r):t.roomStateHandle("CONNECTED",w.Reconnected,r)},e.startMaxTime(),e.active()):this.logger.error(U.ROOM_DISCONNECT+" try handler no found")},le.prototype.onConnecting=function(e){this.roomStateHandle("CONNECTING",w.Logining,e)},le.prototype.disconnectedHandle=function(e,t){var r;e&&0!==e.code?(this.stopTokenTimer(),r=null!=t&&t.isKickout?w.Kickout:w.ReconnectFailed,this.roomStateHandle("DISCONNECTED",r,e,null==t?void 0:t.extendedData)):this.roomStateHandle("CONNECTED",w.Reconnected,e,null==t?void 0:t.extendedData)},le.prototype.roomStateHandle=function(e,t,r,o,n){if(!t||t!=w.Reconnecting||(this.reconectTimes++,1!=this.reconectTimes)){this.logger.info(U.ROOM_STATUS_CALLBACK+" "+e+" "+JSON.stringify(r)),["CONNECTED","DISCONNECTED"].includes(e)&&(this.reconectTimes=0);var s,a,c=0;switch(t=(t=(t=t&&[w.LoginFailed,w.ReconnectFailed].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.fail?w.LoginFailed:w.ReconnectFailed:t)&&[w.Logined,w.Reconnected].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.success?w.Logined:w.Reconnected:t)&&[w.Logining,w.Reconnecting].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.success?w.Logining:w.Reconnecting:t){case w.Reconnecting:s=J.kZMTempBroken,this.tempBrokenTime=(new Date).getTime();break;case w.ReconnectFailed:s=J.kZMSdkDisconnect;break;case w.Reconnected:s=J.kZMReconnect,c=(new Date).getTime()-this.tempBrokenTime}this.room.lastRoomState=this.room.roomState,this.room.roomState=e,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,e,r?r.code:0,o,n),n||(this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,e,r?r.code:0,o),this.stateCenter.actionListener("roomStateChanged",this.room.roomID,t,r?r.code:0,o)),s&&(a=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},s.event),t===w.Reconnected?a.setAttributes({room_broken_time:J.kZMReconnect.room_broken_time(c)}):a.setAttributes({error:(null==r?void 0:r.code)||0,message:o||""}),a.end()))}},le.prototype.login=function(e,t,r,o,s,a,c){this.logger.info(U.ROOM_LOGIN_ROOM+" call:"+t+" "+r),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,t,"",o.userID,"",this.stateCenter.sdKVersion),s&&(s.userUpdate&&"boolean"==typeof s.userUpdate&&(this.stateCenter.userStateUpdate=s.userUpdate),s.maxMemberCount&&"number"==typeof s.maxMemberCount&&(this.room.maxMemberCount=s.maxMemberCount)),this.stateCenter.configOK?(this.room.runState!==n.trylogin&&this.setRunState(n.trylogin),this.room.roomID=t,this.room.token=r,this.room.thirdToken=r,this.stateCenter.idName=o.userID,this.stateCenter.nickName=o.userName||o.userID,this.loginCallback.success=a,this.loginCallback.fail=c,this.server=e,this.stateCenter.reporter.spanSetAttributes({key:J.kZMSubLogin.event,bak_key:J.kZMReLoginRoom.event,par:t},{server:this.stateCenter.useNetAgent?void 0:J.kZMSubLogin.server(this.server)}),this.liveRoomLoginKey=this.room.isMulti?J.kZMLiveRoomEnter:J.kZMSwitchLogin,this.stateCenter.reporter.createSpan(i.H,{key:J.kZMSubLogin.event,bak_key:J.kZMReLoginRoom.event,par:this.room.roomID},{key:this.liveRoomLoginKey.event,par:this.room.roomID},this.liveRoomLoginKey.event,!0),this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(e),this.logger.info(U.ROOM_LOGIN_ROOM+" call success")):(this.logger.error(U.ROOM_LOGIN_ROOM+" init sdk wrong"),c(R.INIT))},le.prototype.tryLogin=function(e){var t,r=this;if(this.room.runState!==n.trylogin)this.logger.error("zb.rh.tl state error");else if((0!==this.stateCenter.reportSeqList.login?J.kZMLoginRoom:J.kZMReLoginRoom).event,this.stateCenter.useNetAgent)this.room.isMulti&&this.room.isDisConnect()?this.logger.warn(U.ROOM_TRY_LOGIN+" liveroom is not connected"):(i=function(e,t){r.handleLoginRsp(e,t)},null!=(t=this.liveRoomHandler)&&t.isUaConnect()?(this.stateCenter.reporter.spanSetAttributes({key:this.liveRoomLoginKey.event,par:null==(t=this.room)?void 0:t.roomID},{sdk_zpush_sessionid_string:null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()}),this.liveRoomHandler.login(this.room,i,i)):(this.tryLoginTimer=setTimeout((function(){r.logger.info(U.ROOM_TRY_LOGIN+" over time no response, login timeout"),r.loginCallback.fail&&r.loginCallback.fail(J.kZMLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.warn(U.ROOM_TRY_LOGIN+" ua is not connected")));else{if(this.service.isDisConnect())try{this.service.closeSocket(),this.logger.debug(U.ROOM_TRY_LOGIN+" new websocket"),this.service.createSocket(e);var o=Date.now();this.service.openHandler((function(){var e;r.stateCenter.reporter.spanSetAttributes({key:r.liveRoomLoginKey.event,par:null==(e=r.room)?void 0:e.roomID},{connect_consume:Date.now()-o}),r.openHandler()})),this.service.closeHandler((function(e){r.logger.error(U.ROOM_TRY_LOGIN+" close "+JSON.stringify(e.code||e)),r.service.closeSocket(),r.closeHandler(e)})),this.service.errorHandler((function(e){r.logger.error(U.ROOM_TRY_LOGIN+" error "+JSON.stringify(e.code||e)),r.service.closeSocket(),r.closeHandler(e)}))}catch(e){this.logger.error(U.ROOM_TRY_LOGIN+"  websocket err:"+JSON.stringify(e))}else{this.logger.info(U.ROOM_TRY_LOGIN+" use current websocket and sent login");var i=function(e,t){r.handleLoginRsp(e,t)};this.service.login(this.room,i,i)}this.tryLoginTimer=setTimeout((function(){r.logger.info(U.ROOM_TRY_LOGIN+" over time no response, login timeout"),r.loginCallback.fail&&r.loginCallback.fail(J.kZMLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.info(U.ROOM_TRY_LOGIN+" call success")}},le.prototype.openHandler=function(){function e(e,r){t.handleLoginRsp(e,r)}var t=this;this.logger.info(U.ROOM_OPEN_HANDLER+" websocket.onpen call"),this.service.onPush(),this.service.login(this.room,e,e)},le.prototype.handleLoginRsp=function(e,t){this.logger.info(U.ROOM_HANDLE_LOGINRSP+" seq: "+t+" "+JSON.stringify(e)),(0!==this.stateCenter.reportSeqList.login?J.kZMLoginRoom:J.kZMReLoginRoom).event,this.room.runState!==n.trylogin?this.logger.error(U.ROOM_HANDLE_LOGINRSP+" state error"):e.header&&e.body?e.header.seq!==t&&0==this.room.isMulti?this.logger.error(U.ROOM_HANDLE_LOGINRSP+" in wrong seq, local=",t+"",",recv=",e.header.seq):0!==e.body.err_code?(this.logger.error(U.ROOM_HANDLE_LOGINRSP+" server error=",e.body.err_code),this.handleLoginFail(e)):(this.logger.info(U.ROOM_HANDLE_LOGINRSP+" call success."),this.handleLoginSuccess(e)):(this.logger.error(U.ROOM_HANDLE_LOGINRSP+" "+JSON.stringify(e)),this.handleLoginFail(e))},le.prototype.handleLoginFail=function(e){this.resetTryLogin();var t=J.kZMLoginRoom.error.INNER_ERROR;e.header&&e.body?t=x.getServerError(e.body.err_code):e.code&&e.msg&&(t=e),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{error:t.code,message:t.msg}),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},le.prototype.handleLoginSuccess=function(e){var t,r,o={},i=(this.room.roomSessionID!==e.body.room_session_id&&(this.room.loginTime=Date.now()),this.room.lastRunState),s=(this.setRunState(n.login),this.stateCenter.userid=e.body.user_id,this.room.sessionID=e.body.session_id,this.room.roomSessionID=e.body.room_session_id,(s={})[this.room.roomID]={room_sid_string:this.room.roomSessionID},this.stateCenter.reporter.setPublicPros(s),this.room.lvKey=e.body.lv_key,null==(s=null==e?void 0:e.body)?void 0:s.token_remain_time);this.stateCenter.configRoomAuth=0<s,e.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))&&(r=(t=(new Date).getTime())-e.body.ret_timestamp,this.stateCenter.local_time_deviation=r<5e3?0:r,r=0<s?1e3*s:1e3*x.decodeTokenExpire(this.room.token.substring(2))-t,this.resetTokenTimer(r-this.stateCenter.local_time_deviation)),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent||(e.body.config_info&&(s=this.stateCenter.settingConfig.getSetting("remote_log_level",!0)||e.body.config_info.log_level,this.logger.setRemoteLogLevel(s),o.log_level=s,""==e.body.config_info.log_url||this.logger.url||(this.logger.setLogServer(e.body.config_info.log_url),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),o.log_url=e.body.config_info.log_url)),e.body.cluster_env&&1===e.body.cluster_env&&(this.stateCenter.testEnvironment=!0,o.test_environment="true",this.stateCenter.debugCustom||(this.stateCenter.debug=!0))),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{server:this.stateCenter.useNetAgent?void 0:J.kZMSubLogin.server(this.server),room_id:null==(r=this.room)?void 0:r.roomID,room_sid_string:null==(s=this.room)?void 0:s.roomSessionID,zpush_sessionid_string:this.stateCenter.useNetAgent&&null!=(o=null==(t=null==e?void 0:e.header)?void 0:t.session_id)?o.toString():void 0,liveroom_sid_string:null==(r=null==e?void 0:e.body)?void 0:r.session_id}),this.resetTryLogin(),this.loginSuccessCallBack(i,e),this.roomStateHandle("CONNECTED",w.Logined,{code:0,msg:""}),this.loginCallback.success&&this.loginCallback.success(!0)},le.prototype.closeHandler=function(e){this.logger.error(U.ROOM_CLOSEHANDLER+" room websocket close "+JSON.stringify(e.code||e)),this.room.runState!==n.logout?this.room.runState===n.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(1006==e.code?J.kZMLoginRoom.error.LOGIN_TIMEOUT:e)):this.room.runState===n.login&&(this.logger.info(U.ROOM_CLOSEHANDLER+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(J.kZMLoginRoom.error.NETWORK_BROKEN)):this.logger.info(U.ROOM_CLOSEHANDLER+" onclose logout flow call websocket.close")},le.prototype.logout=function(e,t){this.logger.info(U.ROOM_LOGOUT+" call"),this.room.runState===n.logout?this.logger.warn("zb.rh.lo at logout"):(this.resetRoom(e),this.roomStateHandle("DISCONNECTED",w.Logout,{code:0,msg:""},void 0,t),this.stopTokenTimer(),this.logger.info(U.ROOM_LOGOUT+" call success"))},le.prototype.handleLogoutRsp=function(e,t){this.logger.info(U.ROOM_LOGOUT+" result=",e.body&&e.body.err_code?e.body.err_code:"-1"),this.stateCenter.useNetAgent&&t&&null!=(e=this.liveRoomHandler)&&e.closeRequest()};var ue=le;function le(e,t,r,o,n,i){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=o,this.room=n,this.liveRoomHandler=i,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.server="",this.tempBrokenTime=0,this.reconectTimes=0,this.loginCallback={}}var de=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},he=(pe.prototype.loginRsp=function(e,t){this.anchor_info=e.body.anchor_info||this.anchor_info,this.userListInterval=e.body.userlist_interval||this.userListInterval,this.userListMergeInterval=e.body.userlist_merge_timeout||this.userListMergeInterval,e.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count),this.logger.info(U.USER_LOGIN_RSP+"  userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList(t)},pe.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.userSeq&&this.stateCenter.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info(U.USER_HB_PATCH+" call update user "+this.userSeq+" server "+e.body.server_user_seq),this.userSeqMergeMap||(this.userSeqMergeMap={}),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.userListMergeInterval)),this.minUserSeq=e.body.server_user_seq,null!=e.body.online_count&&0!=e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count)},pe.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},pe.prototype.fetchUserList=function(e){this.userQuerying?this.logger.warn(U.USER_FETCH_USER+" is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,e||0),this.logger.info(U.USER_FETCH_USER+" the first time call"))},pe.prototype.fetchUserListWithPage=function(e,t){function r(e){o.handleFetchUserListRsp(e,t)}var o=this,n={user_index:e,sort_type:0},s=J.kZMGetCurrentUserList;this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:s.event,par:this.room.roomID},s.event,!0).setAttribute("user_index",s.user_index(e)),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchUserList(n,r,r,this.room)},pe.prototype.handleFetchUserListRsp=function(e,t){var r=this;if(this.stateCenter.reporter.spanEnd({key:J.kZMGetCurrentUserList.event,par:this.room.roomID},{error:(null==(o=null==e?void 0:e.body)?void 0:o.err_code)||(null==e?void 0:e.code),message:(null==(o=null==e?void 0:e.body)?void 0:o.err_message)||(null==e?void 0:e.msg)}),e.body&&0!=e.body.err_code)this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(U.USER_FETCH_USER_RSP+" fetch error "+e.body.err_code);else if(e.header&&e.body){if(this.stateCenter.userStateUpdate){this.userTempList=de(de([],this.userTempList,!0),e.body.user_baseinfos,!0);var o=e.body.ret_user_index;if(o!=e.body.server_user_index)this.logger.info(U.USER_FETCH_USER_RSP+" fetch another page"),this.fetchUserListWithPage(o+1,t);else{this.userSeq=e.body.server_user_seq;for(var i=[],s=[],a=0;a<this.userTempList.length;a++){var c={userID:this.userTempList[a].id_name,userName:this.userTempList[a].nick_name,role:this.userTempList[a].role};i.push(c),s.push({idName:this.userTempList[a].id_name,nickName:this.userTempList[a].nick_name,role:this.userTempList[a].role})}this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,s),t==n.login?(this.userList&&x.mergeUserList(this.logger,this.userList,i,(function(e,t){0!==e.length&&r.onUserStateUpdate(r.room.roomID,"ADD",e),0!==t.length&&r.onUserStateUpdate(r.room.roomID,"DELETE",t)})),this.userList=i):0!==(this.userList=i).length&&this.onUserStateUpdate(this.room.roomID,"ADD",i),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(U.USER_FETCH_USER_RSP+" call success user_list "+i+" count "+i.length)}}}else this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(U.USER_FETCH_USER_RSP+" fetch error "+e)},pe.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.info(U.USER_USER_PUSH+" call"),this.stateCenter.userStateUpdate)if(this.userSeq===e.body.user_list_seq)this.logger.warn(U.USER_USER_PUSH+" user_list_seq is the same with local seq");else if(this.userSeq+e.body.user_actions.length!==e.body.user_list_seq)this.mergeUserByUserSeq(e.body.user_list_seq,e.body.user_actions);else{this.userSeq=e.body.user_list_seq;for(var t=[],r=0;r<e.body.user_actions.length;r++){var o={action:e.body.user_actions[r].Action,idName:e.body.user_actions[r].IdName,nickName:e.body.user_actions[r].NickName,role:e.body.user_actions[r].Role,loginTime:e.body.user_actions[r].LoginTime};t.push(o)}this.stateCenter.actionListener("_userStateUpdate",e.body.room_id,t);var n=[],i=[];t.forEach((function(e){1==e.action?n.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&i.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList&&(this.userList=this.userList.concat(n).filter((function(e){return!i.some((function(t){return t.userID==e.userID}))}))),0!==n.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"ADD",n),0!==i.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"DELETE",i),this.logger.info(U.USER_USER_PUSH+" call success")}else this.logger.info(U.USER_USER_PUSH+" userStateUpdate is false")},pe.prototype.onUserStateUpdate=function(e,t,r){var o=this;r=r.filter((function(e){return e.userID!==o.stateCenter.idName})),0!=r.length&&(r=r.map((function(e){return{userID:e.userID,userName:e.userName}})),this.stateCenter.actionListener("roomUserUpdate",e,t,r))},pe.prototype.mergeUserByUserSeq=function(e,t){var r=this;this.userSeqMergeMap||(this.logger.warn(U.USER_MERGE_SEQ+" new merge userlist "+this.userSeq+" server "+e),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){r.handleMergeTimeout()}),this.userListMergeInterval)),this.userSeqMergeMap[e]=t,this.logger.warn(U.USER_MERGE_SEQ+"  merge userlist "+this.userSeq+" server "+e+" userlist "+t.length)},pe.prototype.mergeUser=function(e){var t=this,r=(this.logger.info(U.USER_MERGE+" merge userlist "+this.userSeq+" userSeqList "+e.join(",")),this.userSeq=e[e.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval,{}),o=((e.forEach((function(e){t.userSeqMergeMap&&t.userSeqMergeMap[e].forEach((function(e){r[e.IdName]=e}))})),this.userSeqMergeMap=null,e=Object.values(r).map((function(e){return{action:e.Action,idName:e.IdName,nickName:e.NickName,role:e.Role,loginTime:e.LoginTime?String(e.LoginTime):""}}))).sort((function(e,t){return e.loginTime.localeCompare(t.loginTime)})),[]),n=[];e.forEach((function(e){1==e.action?o.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&n.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList=this.userList&&this.userList.concat(o).filter((function(e){return!n.some((function(t){return t.userID==e.userID}))})),0!==o.length&&this.onUserStateUpdate(this.room.roomID,"ADD",o),0!==n.length&&this.onUserStateUpdate(this.room.roomID,"DELETE",n),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,e)},pe.prototype.handleMergeTimeout=function(){var e,t=this,r=Object.keys(this.userSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));r[r.length-1]-r[0]+1===r.length||r[r.length-1]>=this.minUserSeq?this.mergeUser(r):(this.userSeqMergeMap=null,e=this.lastUserQueryTime-Date.now(),this.logger.info(U.USER_MERGE_TIMEOUT+"  fetch merge userlist "+this.userSeq+" userSeqList "+r.join(",")+" wait "+e),0<e?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout((function(){t.fetchUserList()}),e)):this.fetchUserList())},pe.prototype.loginPrivateRsp=function(e){this.logger.info(U.USER_FETCH_USER," userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList()},pe);function pe(e,t,r,o,n,i){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=o,this.liveRoomHandler=n,this.room=i,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}_e.prototype.initMessageHandler=function(){},_e.prototype.initLiveHandler=function(){},_e.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},_e.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e.HBResponse(t)}},_e.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,r){e.logger.info(U.LIVEROOMMODULES_BINDROOMHANDLER+" login suc "+t),e.heartBeatHandler.init(r),e.stateCenter.useNetAgent?e.liveRoomHandler.startCheck():(e.service.stopCheck(),e.service.startCheck()),e.userHandler.loginRsp(r,t),e.messageHandler&&e.messageHandler.loginRsp(r),e.isMulti||e.handleMultiRoom(),e.roomLoginResponse(r)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.stateCenter.useNetAgent&&e.liveRoomHandler&&e.liveRoomHandler.stopCheck(),e.userHandler.resetUserHandler(),e.service.stopCheck(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime())}},_e.prototype.bindUserHandler=function(){},_e.prototype.bindMessageHandler=function(){},_e.prototype.bindLiveHandler=function(){},_e.prototype.HBResponse=function(e){this.stateCenter.actionListener("HBResponse",e)},_e.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},_e.prototype.handleMultiRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.runState!==n.login&&t.roomTryHandler&&1==t.isMulti&&(t.roomTryHandler.onactive=function(r,o){var n;o&&0!==o.code?(0!==o.code&&(n=x.getLiveRoomError(o.code,e.stateCenter.useNetAgent))&&R[n]&&(o=R[n]),t.roomHandler.roomStateHandle("DISCONNECTED",w.ReconnectFailed,o,o.msg)):t.roomHandler.roomStateHandle("CONNECTED",w.Reconnected,o)},t.roomTryHandler.startMaxTime(),t.roomTryHandler.active())}))},_e.prototype.isLogin=function(){return this.runState===n.login},_e.prototype.isLogout=function(){return this.runState===n.logout},_e.prototype.isTryLogin=function(){return this.runState===n.trylogin},_e.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},_e.prototype.retryConnect=function(){this.logger.info("zm.lrm.rc call"),this.stateCenter.useNetAgent&&(this.resetSessionInfo(),this.liveRoomHandler.closeRequest())},_e.prototype.retryRoom=function(){this.logger.info("zm.lrm.rr.0 call"),this.roomTryHandler&&this.rtm.netAgent.isConnect()&&(this.sessionID="0",this.roomSessionID="0",this.roomTryHandler.active(!0))},_e.prototype.resetSessionInfo=function(){var e;this.logger.info("zm.lrm.rsi call"),this.sessionID="0",this.roomSessionID="0",null!=(e=this.liveRoomHandler)&&e.reset()};var fe=_e;function _e(e,t,r,o,i,s,a){this.roomID=e,this.stateCenter=t,this.logger=r,this.dataReport=o,this.service=i,this.rtm=s,this.liveRoomHandler=a,this.runState=n.logout,this.lastRunState=n.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.isMulti=!1,this.token="",this.thirdToken="",this.loginTime=0,this.maxMemberCount=0,this.lvKey="",this.roomName="",this.roomHandler=new ue(this.logger,this.stateCenter,this.dataReport,this.service,this,a),this.heartBeatHandler=new ae(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.userHandler=new he(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}me.prototype.createSocket=function(e){this.socket=Object(d.createZegoWebSocket)(e,this.ENV%2)},me.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},me.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},me.prototype.sendMessage=function(e,t,r,o,n){return void 0===r&&(r=null),void 0===o&&(o=null),void 0===n&&(n={timeOut:6e3}),n={data:t={header:e,body:t},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:n.timeOut,success:r,error:o},r=this.sendCommandList.push(n),this.sendCommandMap[n.seq]=r,this.socket&&this.socket.send(JSON.stringify(t)),e.seq},me.prototype.sendPB=function(e){return this.socket&&this.socket.send(e),!0},me.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)!function(){var r,o,n;e.remove(t),t&&t._data&&(r=t._data.error,o=t._data.seq,n=t._data.data.body.custom_msg,setTimeout((function(){r&&r(R.TIMEOUT,o,n)}),0)),t=e.getFirst()}()},me.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),o=Date.parse(new Date+""),n=0,i=this;null!=r&&"break"!==function(){return r._data&&r._data.sendTime+r._data.timeOut>o?"break":(r._data&&delete t[r._data.data.header.seq],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+i.sendDataDropTimeout<o||r&&r._data&&(s=r._data.error,a=r._data.seq,c=r._data.data.body.custom_msg,setTimeout((function(){s&&s(R.TIMEOUT,a,c)}),0)),++n>=i.sendDataCheckOnceCount?"break":void(r=e.getFirst()));var s,a,c}(););},me.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},me.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),this.sendCommandMap={},clearTimeout(this.sendDataCheckTimer)},me.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.socket.binaryType="arraybuffer",t.responseHandler(),e(r)})},me.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},me.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},me.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},me.prototype.onMessage=function(e){};var ge=me;function me(e){this.socket=null,this.sendCommandList=new m,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}var ve=function(){return(ve=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ye=(be.prototype.checkResponse=function(e){return 0!=this.stateCenter.roomModulesList.filter((function(e){return e.runState!==n.logout})).length&&(e.header.appid!==this.stateCenter.appid||e.header.user_id!==this.stateCenter.userid)},be.prototype.handleSendCommandMsgRsp=function(e){var t,r=this,o=this.service.sendCommandMap[e.header.seq];null!=o&&(t=o._data,delete this.service.sendCommandMap[e.header.seq],this.service.sendCommandList.remove(o),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,r.cmdSeq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,r.cmdSeq)}),0))},be.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){t instanceof ArrayBuffer?e.stateCenter.actionListener("_protobufResponse",t):t.header?(0!==t.body.err_code?t.body.err_message&&e.logger.error("".concat(U.SERVICE_PUSH," cmd=").concat(t.header.cmd,", err_code=").concat(t.body.err_code,", err_message=").concat(t.body.err_message," ")):e.logger.info("".concat(U.SERVICE_PUSH," cmd=").concat(t.header.cmd,", msg=").concat(JSON.stringify(t)," ")),-1<["login","logout"].indexOf(t.header.cmd)?e.handleSendCommandMsgRsp(t):e.checkResponse(t)?e.logger.error(U.SERVICE_PUSH+"  check session fail."):(e.logger.info("".concat(U.SERVICE_PUSH," cmd=").concat(t.header.cmd,",function=").concat(!!e.responseRouters[t.header.cmd])),e.handleSendCommandMsgRsp(t),e.responseRouters[t.header.cmd]&&e.responseRouters[t.header.cmd](t,e.cmdSeq))):e.logger.error("".concat(U.SERVICE_PUSH," msg type error "))}},be.prototype.handlePushKickout=function(e){var t,r;void 0===(null==(r=null==e?void 0:e.body)?void 0:r.protocol)||1===(null==(r=null==e?void 0:e.body)?void 0:r.protocol)?function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([],this.stateCenter.roomModulesList,!0).forEach((function(t){return t.roomHandler.handlePushKickout(e,!0)})):(t=null==(r=null==e?void 0:e.header)?void 0:r.room_id,(r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t})))?r.roomHandler.handlePushKickout(e):this.logger.error(U.SERVICE_PUSH+" room no found ignore "+JSON.stringify(null==(r=e.header)?void 0:r.room_id)))},be.prototype.handlePushCustomMsg=function(e){},be.prototype.handlePushRoomMsg=function(e){},be.prototype.handlePushUserStateUpdateMsg=function(e){var t,r=null==(o=null==e?void 0:e.header)?void 0:o.room_id,o=this.stateCenter.roomModulesList.find((function(e){return e.roomID==r})),n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:r},{key:""},J.kZMRoomRecvUserUpdateInfo.event);o?(n.setAttributes({user_list_seq:null==(t=null==e?void 0:e.body)?void 0:t.user_list_seq,update_user:null==(t=null==e?void 0:e.body)?void 0:t.user_actions}),n.end(),o.userHandler.handlePushUserStateUpdateMsg(e)):(this.logger.error(U.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e)),this.stateCenter.reporter.setError(n,J.kZMRoomRecvUserUpdateInfo.error.ROOM_NOT_EXIST))},be.prototype.handlePushMergeMsg=function(e){},be.prototype.handlePushTransMsg=function(e){},be.prototype.handleBigImMsgRsp=function(e){},be.prototype.handlePushSignalMsg=function(e){},be.prototype.handlePushTokenExpire=function(e){this.stateCenter.actionListener("_tokenExpired",e)},be.prototype.closeHandler=function(e){this.service.closeHandler(e)},be.prototype.openHandler=function(e){this.service.openHandler(e)},be.prototype.errorHandler=function(e){this.service.errorHandler(e)},be.prototype.getHeader=function(e,t,r,o){return{Protocol:"req",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:t||"",room_id:r||"",room_session_id:o||"",biz_version:this.stateCenter.bizVersion||""}},be.prototype.startCheck=function(){this.logger.info(U.SERVICE_START_CHECK+" start"),this.service.startCheck()},be.prototype.stopCheck=function(){this.logger.info(U.SERVICE_STOP_CHECK+" stop"),this.service.stopCheck()},be.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},be.prototype.createSocket=function(e){var t=this;this.stateCenter.roomServer=e,this.service.createSocket(e),this.responseRouters=ve(ve({},this.responseRouters),{push_kickout:function(e){t.handlePushKickout(e)},push_custommsg:function(e){t.handlePushCustomMsg(e)},push_im_chat:function(e){t.handlePushRoomMsg(e)},push_userlist_update:function(e){t.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){t.handlePushMergeMsg(e)},push_trans:function(e){t.handlePushTransMsg(e)},push_signal:function(e){t.handlePushSignalMsg(e)},push_token_expire:function(e){t.handlePushTokenExpire(e)}})},be.prototype.closeSocket=function(){this.service.closeSocket()},be.prototype.sendMessage=function(e,t,r,o,n,i){var s,a;return this.service.isDisConnect()?(this.logger.error(U.SERVICE_SEND+" socket is disconnect"),o(R.SOCKET_CLOSE),0):(s=null!=i&&i.roomID?i.roomID:null==(s=this.stateCenter.roomModulesList[0])?void 0:s.roomID,a=null!=i&&i.roomSessionID?i.roomSessionID:null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomSessionID,i=null!=i&&i.sessionID?i.sessionID:null==(i=this.stateCenter.roomModulesList[0])?void 0:i.sessionID,n=n||this.getHeader(e,i,s,a),this.logger.info(U.SERVICE_SEND+" sendMsg:"+JSON.stringify({header:n,body:t})),this.service.sendMessage(n,t,r,o))},be.prototype.on=function(e,t){this.responseRouters[e]=t},be.prototype.login=function(e,t,r){var o=this.getHeader(e.isMulti?"enter":"login",e.sessionID,e.roomID,e.roomSessionID);return e={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:e.token,version:this.stateCenter.sdKVersion,room_name:e.roomID,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:0===this.stateCenter.ENV?c.ClientType_Webrtc:c.ClientType_SmallProgram,third_token:e.thirdToken,user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat},this.sendMessage("",e,t,r,o)},be.prototype.logout=function(e,t,r){var o=e.isMulti?"quit":"logout",n={reserve:0};return"logout"==o&&(n.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(o,n,t,r,void 0,{sessionID:e.sessionID,roomID:e.roomID,roomSessionID:e.roomSessionID})},be.prototype.heartBeat=function(e,t,r){return this.sendMessage("hb",{reserve:0},e,t,void 0,r)},be.prototype.fetchUserList=function(e,t,r,o){return this.sendMessage("user_list",e,t,r,void 0,o)},be.prototype.fetchUserListV2=function(e,t,r,o){return this.sendMessage("user_list_v2",e,t,r,void 0,o)},be.prototype.fetchReliableMessage=function(e,t,r,o){return this.sendMessage("trans_fetch",e,t,r,void 0,o)},be.prototype.sendReliableMessage=function(e,t,r,o){return this.sendMessage("trans",e,t,r,void 0,o)},be.prototype.sendRoomMsg=function(e,t,r,o){return this.sendMessage("im_chat",e,t,r,void 0,o)},be.prototype.sendCustomCommand=function(e,t,r,o){return this.sendMessage("custommsg",e,t,r,void 0,o)},be.prototype.sendBigRoomMessage=function(e,t,r,o){return this.sendMessage("bigim_chat",e,t,r,void 0,o)},be.prototype.sendRelayMessage=function(e,t,r,o){return this.sendMessage("relay",e,t,r,void 0,o)},be.prototype.sendSignalCmd=function(e,t,r,o){return this.sendMessage("signal",e,t,r,void 0,o)},be.prototype.sendPB=function(e){return this.service.isDisConnect()||this.stateCenter.networkState==s.offline?(this.logger.error(U.RTM_SEND_PB+" socket is disconnected"),!1):this.service.sendPB(e)},be);function be(e,t,r){this.stateCenter=e,this.logger=t,this.rtm=r,this.service=new ge(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}Ee.prototype.setSetting=function(e,t){var r,o,n=Array.isArray(t)&&0<t.length;for(r in e)if("number"==typeof e[r].ctrlmode&&[1,2].includes(e[r].ctrlmode))this.setting[r]=e[r],this.setting[r+"_ctrlmode"]=e[r].ctrlmode;else for(var i in e[r])i.endsWith("_ctrlmode")||n&&-1==t.indexOf(i)||(1===(o=e[r][i+"_ctrlmode"])||2===o?this.setting[i]=e[r][i]:this.defaultSetting[i]&&(this.setting[i]=this.defaultSetting[i]),"number"==typeof o&&(this.setting[i+"_ctrlmode"]=e[r][i+"_ctrlmode"]))},Ee.prototype.getSetting=function(e,t){return(t=void 0!==t&&t)&&2!=this.setting[e+"_ctrlmode"]?void 0:this.setting[e]};var Se=Ee;function Ee(){this.defaultSetting={remote_log_level:"info"},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}var Te=r(0),we=r.n(Te),Ce=(t=r(7),r(8)),Ie=r.n(Ce),Oe=(Ce=r(10),r.n(Ce)),ke=(Ce=r(16),r.n(Ce)),Re=(Ce=r(4),r.n(Ce)),Ae={d:function(e,t){for(var r in t)Ae.o(t,r)&&!Ae.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},Pe=(function(e,t,r){function o(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function n(e,t){return e&t}function i(e,t){return e|t}function s(e,t){return e^t}function a(e,t){return e&~t}r.d(t,{default:function(){return ie}});var c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function l(e){for(var t,r="",o=0;o+3<=e.length;o+=3)t=parseInt(e.substring(o,o+3),16),r+=u.charAt(t>>6)+u.charAt(63&t);for(o+1==e.length?(t=parseInt(e.substring(o,o+1),16),r+=u.charAt(t<<2)):o+2==e.length&&(t=parseInt(e.substring(o,o+2),16),r+=u.charAt(t>>2)+u.charAt((3&t)<<4));0<(3&r.length);)r+="=";return r}function d(e){for(var t="",r=0,n=0,i=0;i<e.length&&"="!=e.charAt(i);++i){var s=u.indexOf(e.charAt(i));s<0||(r=0==r?(t+=o(s>>2),n=3&s,1):1==r?(t+=o(n<<2|s>>4),n=15&s,2):2==r?(t=(t+=o(n))+o(s>>2),n=3&s,3):(t=(t+=o(n<<2|s>>4))+o(15&s),0))}return 1==r&&(t+=o(n<<2)),t}var h,p={decode:function(e){if(void 0===h){var t="= \f\n\r\t\xa0\u2028\u2029";for(h=Object.create(null),i=0;i<64;++i)h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i)]=i;for(h["-"]=62,h._=63,i=0;i<t.length;++i)h[t.charAt(i)]=-1}for(var r=[],o=0,n=0,i=0;i<e.length;++i){var s=e.charAt(i);if("="==s)break;if(-1!=(s=h[s])){if(void 0===s)throw new Error("Illegal character at offset "+i);o|=s,4<=++n?(r[r.length]=o>>16,r[r.length]=o>>8&255,r[r.length]=255&o,n=o=0):o<<=6}}switch(n){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:r[r.length]=o>>10;break;case 3:r[r.length]=o>>16,r[r.length]=o>>8&255}return r},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=p.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw new Error("RegExp out of sync");e=t[2]}return p.decode(e)}},f=(m.prototype.mulAdd=function(e,t){for(var r,o=this.buf,n=o.length,i=0;i<n;++i)(r=o[i]*e+t)<1e13?t=0:r-=1e13*(t=0|r/1e13),o[i]=r;0<t&&(o[i]=t)},m.prototype.sub=function(e){for(var t,r=this.buf,o=r.length,n=0;n<o;++n)e=(t=r[n]-e)<0?(t+=1e13,1):0,r[n]=t;for(;0===r[r.length-1];)r.pop()},m.prototype.toString=function(e){if(10!=(e||10))throw new Error("only base 10 is supported");for(var t=this.buf,r=t[t.length-1].toString(),o=t.length-2;0<=o;--o)r+=(1e13+t[o]).toString().substring(1);return r},m.prototype.valueOf=function(){for(var e=this.buf,t=0,r=e.length-1;0<=r;--r)t=1e13*t+e[r];return t},m.prototype.simplify=function(){var e=this.buf;return 1==e.length?e[0]:this},m),_=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,g=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function m(e){this.buf=[+e||0]}function v(e,t){return e.length>t?e.substring(0,t)+"\u2026":e}x.prototype.get=function(e){if((e=void 0===e?this.pos++:e)>=this.enc.length)throw new Error("Requesting byte offset "+e+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(e):this.enc[e]},x.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},x.prototype.hexDump=function(e,t,r){for(var o="",n=e;n<t;++n)if(o+=this.hexByte(this.get(n)),!0!==r)switch(15&n){case 7:o+="  ";break;case 15:o+="\n";break;default:o+=" "}return o},x.prototype.isASCII=function(e,t){for(var r=e;r<t;++r){var o=this.get(r);if(o<32||176<o)return!1}return!0},x.prototype.parseStringISO=function(e,t){for(var r="",o=e;o<t;++o)r+=String.fromCharCode(this.get(o));return r},x.prototype.parseStringUTF=function(e,t){for(var r="",o=e;o<t;){var n=this.get(o++);r+=n<128?String.fromCharCode(n):191<n&&n<224?String.fromCharCode((31&n)<<6|63&this.get(o++)):String.fromCharCode((15&n)<<12|(63&this.get(o++))<<6|63&this.get(o++))}return r},x.prototype.parseStringBMP=function(e,t){for(var r,o,n="",i=e;i<t;)r=this.get(i++),o=this.get(i++),n+=String.fromCharCode(r<<8|o);return n},x.prototype.parseTime=function(e,t,r){return e=this.parseStringISO(e,t),(t=(r?_:g).exec(e))?(r&&(t[1]=+t[1],t[1]+=+t[1]<70?2e3:1900),e=t[1]+"-"+t[2]+"-"+t[3]+" "+t[4],t[5]&&(e+=":"+t[5],t[6]&&(e+=":"+t[6],t[7]&&(e+="."+t[7]))),t[8]&&(e+=" UTC","Z"!=t[8]&&(e+=t[8],t[9]&&(e+=":"+t[9]))),e):"Unrecognized time: "+e},x.prototype.parseInteger=function(e,t){for(var r,o=this.get(e),n=127<o,i=n?255:0,s="";o==i&&++e<t;)o=this.get(e);if(0==(r=t-e))return n?-1:0;if(4<r){for(s=o,r<<=3;0==(128&(+s^i));)s=+s<<1,--r;s="("+r+" bit)\n"}n&&(o-=256);for(var a=new f(o),c=e+1;c<t;++c)a.mulAdd(256,this.get(c));return s+a.toString()},x.prototype.parseBitString=function(e,t,r){for(var o=this.get(e),n="("+((t-e-1<<3)-o)+" bit)\n",i="",s=e+1;s<t;++s){for(var a=this.get(s),c=s==t-1?o:0,u=7;c<=u;--u)i+=a>>u&1?"1":"0";if(i.length>r)return n+v(i,r)}return n+i},x.prototype.parseOctetString=function(e,t,r){if(this.isASCII(e,t))return v(this.parseStringISO(e,t),r);var o=t-e,n="("+o+" byte)\n";o>(r/=2)&&(t=e+r);for(var i=e;i<t;++i)n+=this.hexByte(this.get(i));return r<o&&(n+="\u2026"),n},x.prototype.parseOID=function(e,t,r){for(var o="",n=new f,i=0,s=e;s<t;++s){var a=this.get(s);if(n.mulAdd(128,127&a),i+=7,!(128&a)){if(""===o?o=(n=n.simplify())instanceof f?(n.sub(80),"2."+n.toString()):(a=n<80?n<40?0:1:2)+"."+(n-40*a):o+="."+n.toString(),o.length>r)return v(o,r);n=new f,i=0}}return 0<i&&(o+=".incomplete"),o};var y=x,b=(M.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},M.prototype.content=function(e){if(void 0!==this.tag){void 0===e&&(e=1/0);var t=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(t)?"false":"true";case 2:return this.stream.parseInteger(t,t+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(t,t+r,e);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);case 6:return this.stream.parseOID(t,t+r,e);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return v(this.stream.parseStringUTF(t,t+r),e);case 18:case 19:case 20:case 21:case 22:case 26:return v(this.stream.parseStringISO(t,t+r),e);case 30:return v(this.stream.parseStringBMP(t,t+r),e);case 23:case 24:return this.stream.parseTime(t,t+r,23==this.tag.tagNumber)}}return null},M.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},M.prototype.toPrettyString=function(e){var t=(e=void 0===e?"":e)+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(t+="+"),t+=this.length,this.tag.tagConstructed?t+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(t+=" (encapsulates)"),t+="\n",null!==this.sub){e+="  ";for(var r=0,o=this.sub.length;r<o;++r)t+=this.sub[r].toPrettyString(e)}return t},M.prototype.posStart=function(){return this.stream.pos},M.prototype.posContent=function(){return this.stream.pos+this.header},M.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},M.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},M.decodeLength=function(e){var t=127&(r=e.get());if(t==r)return t;if(6<t)throw new Error("Length over 48 bits not supported at position "+(e.pos-1));if(0==t)return null;for(var r=0,o=0;o<t;++o)r=256*r+e.get();return r},M.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,r=2*this.length;return e.substr(t,r)},M.decode=function(e){function t(){var e=[];if(null!==n){for(var t=i+n;r.pos<t;)e[e.length]=M.decode(r);if(r.pos!=t)throw new Error("Content size is not correct for container starting at offset "+i)}else try{for(;;){var o=M.decode(r);if(o.tag.isEOC())break;e[e.length]=o}n=i-r.pos}catch(e){throw new Error("Exception while decoding undefined length content: "+e)}return e}var r=e instanceof y?e:new y(e,0),o=(e=new y(r),new S(r)),n=M.decodeLength(r),i=r.pos,s=i-e.pos,a=null;if(o.tagConstructed)a=t();else if(o.isUniversal()&&(3==o.tagNumber||4==o.tagNumber))try{if(3==o.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=t();for(var c=0;c<a.length;++c)if(a[c].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(e){a=null}if(null===a){if(null===n)throw new Error("We can't skip over an invalid tag with undefined length at offset "+i);r.pos=i+Math.abs(n)}return new M(e,s,n,o,a)},M),S=(D.prototype.isUniversal=function(){return 0===this.tagClass},D.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},D),E=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],T=(1<<26)/E[E.length-1],w=(N.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",a=this.t,c=this.DB-a*this.DB%t;if(0<a--)for(c<this.DB&&0<(r=this[a]>>c)&&(i=!0,s=o(r));0<=a;)c<t?(r=(this[a]&(1<<c)-1)<<t-c,r|=this[--a]>>(c+=this.DB-t)):(r=this[a]>>(c-=t)&n,c<=0&&(c+=this.DB,--a)),(i=0<r||i)&&(s+=o(r));return i?s:"0"},N.prototype.negate=function(){var e=B();return N.ZERO.subTo(this,e),e},N.prototype.abs=function(){return this.s<0?this.negate():this},N.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;0<=--r;)if(0!=(t=this[r]-e[r]))return t;return 0},N.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+G(this[this.t-1]^this.s&this.DM)},N.prototype.mod=function(e){var t=B();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(N.ZERO)&&e.subTo(t,t),t},N.prototype.modPowInt=function(e,t){return t=new(e<256||t.isEven()?I:O)(t),this.exp(e,t)},N.prototype.clone=function(){var e=B();return this.copyTo(e),e},N.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},N.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},N.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},N.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},N.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,o=this.DB-e*this.DB%8,n=0;if(0<e--)for(o<this.DB&&(r=this[e]>>o)!=(this.s&this.DM)>>o&&(t[n++]=r|this.s<<this.DB-o);0<=e;)o<8?(r=(this[e]&(1<<o)-1)<<8-o,r|=this[--e]>>(o+=this.DB-8)):(r=this[e]>>(o-=8)&255,o<=0&&(o+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(0<n||r!=this.s)&&(t[n++]=r);return t},N.prototype.equals=function(e){return 0==this.compareTo(e)},N.prototype.min=function(e){return this.compareTo(e)<0?this:e},N.prototype.max=function(e){return 0<this.compareTo(e)?this:e},N.prototype.and=function(e){var t=B();return this.bitwiseTo(e,n,t),t},N.prototype.or=function(e){var t=B();return this.bitwiseTo(e,i,t),t},N.prototype.xor=function(e){var t=B();return this.bitwiseTo(e,s,t),t},N.prototype.andNot=function(e){var t=B();return this.bitwiseTo(e,a,t),t},N.prototype.not=function(){for(var e=B(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},N.prototype.shiftLeft=function(e){var t=B();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},N.prototype.shiftRight=function(e){var t=B();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},N.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},N.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[r]^t);return e},N.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},N.prototype.setBit=function(e){return this.changeBit(e,i)},N.prototype.clearBit=function(e){return this.changeBit(e,a)},N.prototype.flipBit=function(e){return this.changeBit(e,s)},N.prototype.add=function(e){var t=B();return this.addTo(e,t),t},N.prototype.subtract=function(e){var t=B();return this.subTo(e,t),t},N.prototype.multiply=function(e){var t=B();return this.multiplyTo(e,t),t},N.prototype.divide=function(e){var t=B();return this.divRemTo(e,t,null),t},N.prototype.remainder=function(e){var t=B();return this.divRemTo(e,null,t),t},N.prototype.divideAndRemainder=function(e){var t=B(),r=B();return this.divRemTo(e,t,r),[t,r]},N.prototype.modPow=function(e,t){var r=e.bitLength(),o=q(1);if(r<=0)return o;var n=r<18?1:r<48?3:r<144?4:r<768?5:6,i=new(r<8?I:t.isEven()?k:O)(t),s=[],a=3,c=n-1,u=(1<<n)-1;if(s[1]=i.convert(this),1<n){var l=B();for(i.sqrTo(s[1],l);a<=u;)s[a]=B(),i.mulTo(l,s[a-2],s[a]),a+=2}var d,h,p=e.t-1,f=!0,_=B();for(r=G(e[p])-1;0<=p;){for(c<=r?d=e[p]>>r-c&u:(d=(e[p]&(1<<r+1)-1)<<c-r,0<p&&(d|=e[p-1]>>this.DB+r-c)),a=n;0==(1&d);)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--p),f)s[d].copyTo(o),f=!1;else{for(;1<a;)i.sqrTo(o,_),i.sqrTo(_,o),a-=2;0<a?i.sqrTo(o,_):(h=o,o=_,_=h),i.mulTo(_,s[d],o)}for(;0<=p&&0==(e[p]&1<<r);)i.sqrTo(o,_),h=o,o=_,_=h,--r<0&&(r=this.DB-1,--p)}return i.revert(o)},N.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return N.ZERO;for(var r=e.clone(),o=this.clone(),n=q(1),i=q(0),s=q(0),a=q(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(n.isEven()&&i.isEven()||(n.addTo(this,n),i.subTo(e,i)),n.rShiftTo(1,n)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;o.isEven();)o.rShiftTo(1,o),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);0<=r.compareTo(o)?(r.subTo(o,r),t&&n.subTo(s,n),i.subTo(a,i)):(o.subTo(r,o),t&&s.subTo(n,s),a.subTo(i,a))}return 0!=o.compareTo(N.ONE)?N.ZERO:0<=a.compareTo(e)?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},N.prototype.pow=function(e){return this.exp(e,new C)},N.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone(),o=(t.compareTo(r)<0&&(e=t,t=r,r=e),t.getLowestSetBit());if((e=r.getLowestSetBit())<0)return t;for(0<(e=o<e?o:e)&&(t.rShiftTo(e,t),r.rShiftTo(e,r));0<t.signum();)0<(o=t.getLowestSetBit())&&t.rShiftTo(o,t),0<(o=r.getLowestSetBit())&&r.rShiftTo(o,r),0<=t.compareTo(r)?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return 0<e&&r.lShiftTo(e,r),r},N.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=E[E.length-1]){for(t=0;t<E.length;++t)if(r[0]==E[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<E.length;){for(var o=E[t],n=t+1;n<E.length&&o<T;)o*=E[n++];for(o=r.modInt(o);t<n;)if(o%E[t++]==0)return!1}return r.millerRabin(e)},N.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},N.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},N.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var o=e.length,n=!1,i=0;0<=--o;){var s=8==r?255&+e[o]:V(e,o);s<0?"-"==e.charAt(o)&&(n=!0):(n=!1,0==i?this[this.t++]=s:i+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=r)>=this.DB&&(i-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,0<i&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),n&&N.ZERO.subTo(this,this)},N.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},N.prototype.dlShiftTo=function(e,t){for(var r=this.t-1;0<=r;--r)t[r+e]=this[r];for(r=e-1;0<=r;--r)t[r]=0;t.t=this.t+e,t.s=this.s},N.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},N.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,o=this.DB-r,n=(1<<o)-1,i=Math.floor(e/this.DB),s=this.s<<r&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>o|s,s=(this[a]&n)<<r;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},N.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var o=e%this.DB,n=this.DB-o,i=(1<<o)-1;t[0]=this[r]>>o;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&i)<<n,t[s-r]=this[s]>>o;0<o&&(t[this.t-r-1]|=(this.s&i)<<n),t.t=this.t-r,t.clamp()}},N.prototype.subTo=function(e,t){for(var r=0,o=0,n=Math.min(e.t,this.t);r<n;)o+=this[r]-e[r],t[r++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;r<this.t;)o+=this[r],t[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<e.t;)o-=e[r],t[r++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[r++]=this.DV+o:0<o&&(t[r++]=o),t.t=r,t.clamp()},N.prototype.multiplyTo=function(e,t){var r=this.abs(),o=e.abs(),n=r.t;for(t.t=n+o.t;0<=--n;)t[n]=0;for(n=0;n<o.t;++n)t[n+r.t]=r.am(0,o[n],t,n,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&N.ZERO.subTo(t,t)},N.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;0<=--r;)e[r]=0;for(r=0;r<t.t-1;++r){var o=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,o,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},N.prototype.divRemTo=function(e,t,r){if(!((u=e.abs()).t<=0)){var o=this.abs();if(o.t<u.t)null!=t&&t.fromInt(0),null!=r&&this.copyTo(r);else{null==r&&(r=B());var n=B(),i=this.s,s=(e=e.s,this.DB-G(u[u.t-1])),a=(0<s?(u.lShiftTo(s,n),o.lShiftTo(s,r)):(u.copyTo(n),o.copyTo(r)),n.t),c=n[a-1];if(0!=c){var u=c*(1<<this.F1)+(1<a?n[a-2]>>this.F2:0),l=this.FV/u,d=(1<<this.F1)/u,h=1<<this.F2,p=r.t,f=p-a,_=null==t?B():t;for(n.dlShiftTo(f,_),0<=r.compareTo(_)&&(r[r.t++]=1,r.subTo(_,r)),N.ONE.dlShiftTo(a,_),_.subTo(n,n);n.t<a;)n[n.t++]=0;for(;0<=--f;){var g=r[--p]==c?this.DM:Math.floor(r[p]*l+(r[p-1]+h)*d);if((r[p]+=n.am(0,g,r,f,0,a))<g)for(n.dlShiftTo(f,_),r.subTo(_,r);r[p]<--g;)r.subTo(_,r)}null!=t&&(r.drShiftTo(a,t),i!=e&&N.ZERO.subTo(t,t)),r.t=a,r.clamp(),0<s&&r.rShiftTo(s,r),i<0&&N.ZERO.subTo(r,r)}}}},N.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},N.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},N.prototype.exp=function(e,t){if(4294967295<e||e<1)return N.ONE;var r,o=B(),n=B(),i=t.convert(this),s=G(e)-1;for(i.copyTo(o);0<=--s;)t.sqrTo(o,n),0<(e&1<<s)?t.mulTo(n,i,o):(r=o,o=n,n=r);return t.revert(o)},N.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},N.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),o=q(r),n=B(),i=B(),s="";for(this.divRemTo(o,n,i);0<n.signum();)s=(r+i.intValue()).toString(e).substr(1)+s,n.divRemTo(o,n,i);return i.intValue().toString(e)+s},N.prototype.fromRadix=function(e,t){this.fromInt(0);for(var r=this.chunkSize(t=null==t?10:t),o=Math.pow(t,r),n=!1,i=0,s=0,a=0;a<e.length;++a){var c=V(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(n=!0):(s=t*s+c,++i>=r&&(this.dMultiply(o),this.dAddOffset(s,0),s=i=0))}0<i&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),n&&N.ZERO.subTo(this,this)},N.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(N.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(N.ONE.shiftLeft(e-1),this);else{var o=7&e;(r=[]).length=1+(e>>3),t.nextBytes(r),0<o?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}},N.prototype.bitwiseTo=function(e,t,r){for(var o,n=Math.min(e.t,this.t),i=0;i<n;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(o=e.s&this.DM,i=n;i<this.t;++i)r[i]=t(this[i],o);r.t=this.t}else{for(o=this.s&this.DM,i=n;i<e.t;++i)r[i]=t(o,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},N.prototype.changeBit=function(e,t){return e=N.ONE.shiftLeft(e),this.bitwiseTo(e,t,e),e},N.prototype.addTo=function(e,t){for(var r=0,o=0,n=Math.min(e.t,this.t);r<n;)o+=this[r]+e[r],t[r++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;r<this.t;)o+=this[r],t[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<e.t;)o+=e[r],t[r++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,0<o?t[r++]=o:o<-1&&(t[r++]=this.DV+o),t.t=r,t.clamp()},N.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},N.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},N.prototype.multiplyLowerTo=function(e,t,r){var o=Math.min(this.t+e.t,t);for(r.s=0,r.t=o;0<o;)r[--o]=0;for(var n=r.t-this.t;o<n;++o)r[o+this.t]=this.am(0,e[o],r,o,0,this.t);for(n=Math.min(e.t,t);o<n;++o)this.am(0,e[o],r,o,0,t-o);r.clamp()},N.prototype.multiplyUpperTo=function(e,t,r){var o=r.t=this.t+e.t- --t;for(r.s=0;0<=--o;)r[o]=0;for(o=Math.max(t-this.t,0);o<e.t;++o)r[this.t+o-t]=this.am(t-o,e[o],r,0,0,this.t+o-t);r.clamp(),r.drShiftTo(1,r)},N.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(0<this.t)if(0==t)r=this[0]%e;else for(var o=this.t-1;0<=o;--o)r=(t*r+this[o])%e;return r},N.prototype.millerRabin=function(e){var t=this.subtract(N.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var o=t.shiftRight(r);(e=e+1>>1)>E.length&&(e=E.length);for(var n=B(),i=0;i<e;++i){n.fromInt(E[Math.floor(Math.random()*E.length)]);var s=n.modPow(o,this);if(0!=s.compareTo(N.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(N.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},N.prototype.square=function(){var e=B();return this.squareTo(e),e},N.prototype.gcda=function(e,t){var r,o=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone(),i=(o.compareTo(n)<0&&(e=o,o=n,n=e),o.getLowestSetBit()),s=n.getLowestSetBit();s<0?t(o):(0<(s=i<s?i:s)&&(o.rShiftTo(s,o),n.rShiftTo(s,n)),r=function(){0<(i=o.getLowestSetBit())&&o.rShiftTo(i,o),0<(i=n.getLowestSetBit())&&n.rShiftTo(i,n),0<=o.compareTo(n)?(o.subTo(n,o),o.rShiftTo(1,o)):(n.subTo(o,n),n.rShiftTo(1,n)),0<o.signum()?setTimeout(r,0):(0<s&&n.lShiftTo(s,n),setTimeout((function(){t(n)}),0))},setTimeout(r,10))},N.prototype.fromNumberAsync=function(e,t,r,o){var n,s,a;"number"==typeof t?e<2?this.fromInt(1):(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(N.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0),n=this,s=function(){n.dAddOffset(2,0),n.bitLength()>e&&n.subTo(N.ONE.shiftLeft(e-1),n),n.isProbablePrime(t)?setTimeout((function(){o()}),0):setTimeout(s,0)},setTimeout(s,0)):(r=7&e,(a=[]).length=1+(e>>3),t.nextBytes(a),0<r?a[0]&=(1<<r)-1:a[0]=0,this.fromString(a,256))},N),C=(L.prototype.convert=function(e){return e},L.prototype.revert=function(e){return e},L.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},L.prototype.sqrTo=function(e,t){e.squareTo(t)},L),I=(P.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},P.prototype.revert=function(e){return e},P.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},P.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},P),O=(A.prototype.convert=function(e){var t=B();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(w.ZERO)&&this.m.subTo(t,t),t},A.prototype.revert=function(e){var t=B();return e.copyTo(t),this.reduce(t),t},A.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],o=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,o,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},A.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},A.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},A),k=(R.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=B();return e.copyTo(t),this.reduce(t),t},R.prototype.revert=function(e){return e},R.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},R.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},R.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},R);function R(e){this.m=e,this.r2=B(),this.q3=B(),w.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e)}function A(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function P(e){this.m=e}function L(){}function N(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function D(e){var t=e.get();if(this.tagClass=t>>6,this.tagConstructed=0!=(32&t),this.tagNumber=31&t,31==this.tagNumber){for(var r=new f;t=e.get(),r.mulAdd(128,127&t),128&t;);this.tagNumber=r.simplify()}}function M(e,t,r,o,n){if(!(o instanceof S))throw new Error("Invalid tag value.");this.stream=e,this.header=t,this.length=r,this.tag=o,this.sub=n}function x(e,t){this.hexDigits="0123456789ABCDEF",e instanceof x?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=t)}function B(){return new w(null)}function U(e,t){return new w(e,t)}t=(r="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(w.prototype.am=function(e,t,r,o,n,i){for(var s=32767&t,a=t>>15;0<=--i;){var c=32767&this[e],u=this[e++]>>15,l=a*c+u*s;n=((c=s*c+((32767&l)<<15)+r[o]+(1073741823&n))>>>30)+(l>>>15)+a*u+(n>>>30),r[o++]=1073741823&c}return n},30):r&&"Netscape"!=navigator.appName?(w.prototype.am=function(e,t,r,o,n,i){for(;0<=--i;){var s=t*this[e++]+r[o]+n;n=Math.floor(s/67108864),r[o++]=67108863&s}return n},26):(w.prototype.am=function(e,t,r,o,n,i){for(var s=16383&t,a=t>>14;0<=--i;){var c=16383&this[e],u=this[e++]>>14,l=a*c+u*s;n=((c=s*c+((16383&l)<<14)+r[o]+n)>>28)+(l>>14)+a*u,r[o++]=268435455&c}return n},28),w.prototype.DB=t,w.prototype.DM=(1<<t)-1,w.prototype.DV=1<<t,w.prototype.FV=Math.pow(2,52),w.prototype.F1=52-t,w.prototype.F2=2*t-52;for(var j=[],H="0".charCodeAt(0),z=0;z<=9;++z)j[H++]=z;for(H="a".charCodeAt(0),z=10;z<36;++z)j[H++]=z;for(H="A".charCodeAt(0),z=10;z<36;++z)j[H++]=z;function V(e,t){return null==(e=j[e.charCodeAt(t)])?-1:e}function q(e){var t=B();return t.fromInt(e),t}function G(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}w.ZERO=q(0),w.ONE=q(1),Y.prototype.init=function(e){for(var t,r,o=0;o<256;++o)this.S[o]=o;for(o=t=0;o<256;++o)t=t+this.S[o]+e[o%e.length]&255,r=this.S[o],this.S[o]=this.S[t],this.S[t]=r;this.i=0,this.j=0},Y.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var Z,F=Y,W=null;function Y(){this.i=0,this.j=0,this.S=[]}W=[];var Q=0,K=void 0;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var J=new Uint32Array(256);for(window.crypto.getRandomValues(J),K=0;K<J.length;++K)W[Q++]=255&J[K]}te.prototype.nextBytes=function(e){for(var t=0;t<e.length;++t)e[t]=function(){if(null==Z){for(Z=new F;Q<256;){var e=Math.floor(65536*Math.random());W[Q++]=255&e}for(Z.init(W),Q=0;Q<W.length;++Q)W[Q]=0;Q=0}return Z.next()}()};var X=te,$=(ee.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ee.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},ee.prototype.setPublic=function(e,t){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=U(e,16),this.e=parseInt(t,16)):console.error("Invalid RSA public key")},ee.prototype.encrypt=function(e){var t=this.n.bitLength()+7>>3;if(e=function(e,t){if(t<e.length+11)return console.error("Message too long for RSA"),null;for(var r=[],o=e.length-1;0<=o&&0<t;){var n=e.charCodeAt(o--);n<128?r[--t]=n:127<n&&n<2048?(r[--t]=63&n|128,r[--t]=n>>6|192):(r[--t]=63&n|128,r[--t]=n>>6&63|128,r[--t]=n>>12|224)}r[--t]=0;for(var i=new X,s=[];2<t;){for(s[0]=0;0==s[0];)i.nextBytes(s);r[--t]=s[0]}return r[--t]=2,r[--t]=0,new w(r)}(e,t),null==e)return null;if(null==(e=this.doPublic(e)))return null;for(var r=e.toString(16),o=r.length,n=0;n<2*t-o;n++)r="0"+r;return r},ee.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=U(e,16),this.e=parseInt(t,16),this.d=U(r,16)):console.error("Invalid RSA private key")},ee.prototype.setPrivateEx=function(e,t,r,o,n,i,s,a){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=U(e,16),this.e=parseInt(t,16),this.d=U(r,16),this.p=U(o,16),this.q=U(n,16),this.dmp1=U(i,16),this.dmq1=U(s,16),this.coeff=U(a,16)):console.error("Invalid RSA private key")},ee.prototype.generate=function(e,t){var r=new X,o=e>>1;this.e=parseInt(t,16);for(var n=new w(t,16);;){for(;this.p=new w(e-o,1,r),0!=this.p.subtract(w.ONE).gcd(n).compareTo(w.ONE)||!this.p.isProbablePrime(10););for(;this.q=new w(o,1,r),0!=this.q.subtract(w.ONE).gcd(n).compareTo(w.ONE)||!this.q.isProbablePrime(10););this.p.compareTo(this.q)<=0&&(i=this.p,this.p=this.q,this.q=i);var i=this.p.subtract(w.ONE),s=this.q.subtract(w.ONE),a=i.multiply(s);if(0==a.gcd(n).compareTo(w.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(a),this.dmp1=this.d.mod(i),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},ee.prototype.decrypt=function(e){if(e=U(e,16),null==(e=this.doPrivate(e)))return null;for(var t=this.n.bitLength()+7>>3,r=e.toByteArray(),o=0;o<r.length&&0==r[o];)++o;if(r.length-o!=t-1||2!=r[o])return null;for(++o;0!=r[o];)if(++o>=r.length)return null;for(var n="";++o<r.length;){var i=255&r[o];i<128?n+=String.fromCharCode(i):191<i&&i<224?(n+=String.fromCharCode((31&i)<<6|63&r[o+1]),++o):(n+=String.fromCharCode((15&i)<<12|(63&r[o+1])<<6|63&r[o+2]),o+=2)}return n},ee.prototype.generateAsync=function(e,t,r){var o=new X,n=e>>1,i=(this.e=parseInt(t,16),new w(t,16)),s=this,a=function t(){var a=function(){s.p.compareTo(s.q)<=0&&(e=s.p,s.p=s.q,s.q=e);var e=s.p.subtract(w.ONE),o=s.q.subtract(w.ONE),n=e.multiply(o);0==n.gcd(i).compareTo(w.ONE)?(s.n=s.p.multiply(s.q),s.d=i.modInverse(n),s.dmp1=s.d.mod(e),s.dmq1=s.d.mod(o),s.coeff=s.q.modInverse(s.p),setTimeout((function(){r()}),0)):setTimeout(t,0)},c=function e(){s.q=B(),s.q.fromNumberAsync(n,1,o,(function(){s.q.subtract(w.ONE).gcda(i,(function(t){0==t.compareTo(w.ONE)&&s.q.isProbablePrime(10)?setTimeout(a,0):setTimeout(e,0)}))}))};setTimeout((function t(){s.p=B(),s.p.fromNumberAsync(e-n,1,o,(function(){s.p.subtract(w.ONE).gcda(i,(function(e){0==e.compareTo(w.ONE)&&s.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(t,0)}))}))}),0)};setTimeout(a,0)},ee.prototype.sign=function(e,t,r){return r=function(e,t){if(t<e.length+22)return console.error("Message too long for RSA"),null;for(var r=t-e.length-6,o="",n=0;n<r;n+=2)o+="ff";return U("0001"+o+"00"+e,16)}(($[r]||"")+t(e).toString(),this.n.bitLength()/4),null==r||null==(t=this.doPrivate(r))?null:0==(1&(e=t.toString(16)).length)?e:"0"+e},ee.prototype.verify=function(e,t,r){return t=U(t,16),null==(t=this.doPublic(t))?null:function(e){for(var t in $)if($.hasOwnProperty(t)){var r=(t=$[t]).length;if(e.substr(0,r)==t)return e.substr(r)}return e}(t.toString(16).replace(/^1f+00/,""))==r(e).toString()},r=ee,{md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"});function ee(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function te(){}(t={}).lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");function o(){}if(o.prototype=t.prototype,e.prototype=new o,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){for(var n in r)e.prototype[n]=r[n];t=function(){};var i=["toString","valueOf"];try{"undefined"!=typeof navigator&&/MSIE/.test(navigator.userAgent)&&(t=function(e,t){for(n=0;n<i.length;n+=1){var r=i[n],o=t[r];"function"==typeof o&&o!=Object.prototype[r]&&(e[r]=o)}})}catch(e){}t(e.prototype,r)}}};var re={};void 0!==re.asn1&&re.asn1||(re.asn1={}),re.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){return(e=e.toString(16)).length%2==1?"0"+e:e},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var o="",n=0;n<r;n++)o+="f";t=new w(o,16).xor(e).add(w.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t,r=(t=re.asn1).DERBoolean,o=t.DERInteger,n=t.DERBitString,i=t.DEROctetString,s=t.DERNull,a=t.DERObjectIdentifier,c=t.DEREnumerated,u=t.DERUTF8String,l=t.DERNumericString,d=t.DERPrintableString,h=t.DERTeletexString,p=t.DERIA5String,f=t.DERUTCTime,_=t.DERGeneralizedTime,g=t.DERSequence,m=t.DERSet,v=t.DERTaggedObject,y=t.ASN1Util.newObject;if(1!=(t=Object.keys(e)).length)throw"key of param shall be only one.";if(t=t[0],-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+t+":"))throw"undefined key: "+t;if("bool"==t)return new r(e[t]);if("int"==t)return new o(e[t]);if("bitstr"==t)return new n(e[t]);if("octstr"==t)return new i(e[t]);if("null"==t)return new s(e[t]);if("oid"==t)return new a(e[t]);if("enum"==t)return new c(e[t]);if("utf8str"==t)return new u(e[t]);if("numstr"==t)return new l(e[t]);if("prnstr"==t)return new d(e[t]);if("telstr"==t)return new h(e[t]);if("ia5str"==t)return new p(e[t]);if("utctime"==t)return new f(e[t]);if("gentime"==t)return new _(e[t]);if("seq"==t){for(var b=e[t],S=[],E=0;E<b.length;E++){var T=y(b[E]);S.push(T)}return new g({array:S})}if("set"==t){for(b=e[t],S=[],E=0;E<b.length;E++)T=y(b[E]),S.push(T);return new m({array:S})}if("tag"==t){if(r=e[t],"[object Array]"===Object.prototype.toString.call(r)&&3==r.length)return o=y(r[2]),new v({tag:r[0],explicit:r[1],obj:o});if(n={},void 0!==r.explicit&&(n.explicit=r.explicit),void 0!==r.tag&&(n.tag=r.tag),void 0===r.obj)throw"obj shall be specified for 'tag'.";return n.obj=y(r.obj),new v(n)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},re.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),o=(t=Math.floor(r/40)+"."+r%40,""),n=2;n<e.length;n+=2){var i=("00000000"+parseInt(e.substr(n,2),16).toString(2)).slice(-8);o+=i.substr(1,7),"0"==i.substr(0,1)&&(t=t+"."+new w(o,2).toString(10),o="")}return t},re.asn1.ASN1Util.oidIntToHex=function(e){function t(e){return 1==(e=e.toString(16)).length?"0"+e:e}if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",o=e.split(".");r+=t(e=40*parseInt(o[0])+parseInt(o[1])),o.splice(0,2);for(var n=0;n<o.length;n++)r+=function(e){var r="",o=new w(e,10).toString(2),n=7-o.length%7;7==n&&(n=0);for(var i="",s=0;s<n;s++)i+="0";for(o=i+o,s=0;s<o.length-1;s+=7){var a=o.substr(s,7);s!=o.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(o[n]);return r},re.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(15<r)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return null!=this.hTLV&&!this.isModified||(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},re.asn1.DERAbstractString=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},t.lang.extend(re.asn1.DERAbstractString,re.asn1.ASN1Object),re.asn1.DERAbstractTime=function(e){re.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,r){var o=this.zeroPadding,n=(e=this.localDateToUTC(e),String(e.getFullYear()));return t=(n="utc"==t?n.substr(2,2):n)+o(String(e.getMonth()+1),2)+o(String(e.getDate()),2)+o(String(e.getHours()),2)+o(String(e.getMinutes()),2)+o(String(e.getSeconds()),2),(t=!0===r&&0!=(n=e.getMilliseconds())?t+"."+o(String(n),3).replace(/[0]+$/,""):t)+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,r,o,n,i){e=new Date(Date.UTC(e,t-1,r,o,n,i,0)),this.setByDate(e)},this.getFreshValueHex=function(){return this.hV}},t.lang.extend(re.asn1.DERAbstractTime,re.asn1.ASN1Object),re.asn1.DERAbstractStructured=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},t.lang.extend(re.asn1.DERAbstractStructured,re.asn1.ASN1Object),re.asn1.DERBoolean=function(){re.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},t.lang.extend(re.asn1.DERBoolean,re.asn1.ASN1Object),re.asn1.DERInteger=function(e){re.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new w(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DERInteger,re.asn1.ASN1Object),re.asn1.DERBitString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex="00"+t.getEncodedHex()),re.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;e="0"+e,this.hTLV=null,this.isModified=!0,this.hV=e+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var o="";for(r=0;r<e.length-1;r+=8){var n=e.substr(r,8);o+=n=1==(n=parseInt(n,2).toString(16)).length?"0"+n:n}this.hTLV=null,this.isModified=!0,this.hV="0"+t+o},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},t.lang.extend(re.asn1.DERBitString,re.asn1.ASN1Object),re.asn1.DEROctetString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex=t.getEncodedHex()),re.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},t.lang.extend(re.asn1.DEROctetString,re.asn1.DERAbstractString),re.asn1.DERNull=function(){re.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},t.lang.extend(re.asn1.DERNull,re.asn1.ASN1Object),re.asn1.DERObjectIdentifier=function(e){var t=function(e){return 1==(e=e.toString(16)).length?"0"+e:e};re.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",o=e.split(".");e=40*parseInt(o[0])+parseInt(o[1]),r+=t(e),o.splice(0,2);for(var n=0;n<o.length;n++)r+=function(e){var r="",o=new w(e,10).toString(2),n=7-o.length%7;7==n&&(n=0);for(var i="",s=0;s<n;s++)i+="0";for(o=i+o,s=0;s<o.length-1;s+=7){var a=o.substr(s,7);s!=o.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(o[n]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=re.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},t.lang.extend(re.asn1.DERObjectIdentifier,re.asn1.ASN1Object),re.asn1.DEREnumerated=function(e){re.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new w(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DEREnumerated,re.asn1.ASN1Object),re.asn1.DERUTF8String=function(e){re.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},t.lang.extend(re.asn1.DERUTF8String,re.asn1.DERAbstractString),re.asn1.DERNumericString=function(e){re.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},t.lang.extend(re.asn1.DERNumericString,re.asn1.DERAbstractString),re.asn1.DERPrintableString=function(e){re.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},t.lang.extend(re.asn1.DERPrintableString,re.asn1.DERAbstractString),re.asn1.DERTeletexString=function(e){re.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},t.lang.extend(re.asn1.DERTeletexString,re.asn1.DERAbstractString),re.asn1.DERIA5String=function(e){re.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},t.lang.extend(re.asn1.DERIA5String,re.asn1.DERAbstractString),re.asn1.DERUTCTime=function(e){re.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},t.lang.extend(re.asn1.DERUTCTime,re.asn1.DERAbstractTime),re.asn1.DERGeneralizedTime=function(e){re.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},t.lang.extend(re.asn1.DERGeneralizedTime,re.asn1.DERAbstractTime),re.asn1.DERSequence=function(e){re.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},t.lang.extend(re.asn1.DERSequence,re.asn1.DERAbstractStructured),re.asn1.DERSet=function(e){re.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},t.lang.extend(re.asn1.DERSet,re.asn1.DERAbstractStructured),re.asn1.DERTaggedObject=function(e){re.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},t.lang.extend(re.asn1.DERTaggedObject,re.asn1.ASN1Object),oe=function(e,t){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var oe,ne=function(e){function t(r){var o=e.call(this)||this;return r&&("string"==typeof r?o.parseKey(r):(t.hasPrivateKeyProperty(r)||t.hasPublicKeyProperty(r))&&o.parsePropertiesFrom(r)),o}var r=t,o=e;if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=r}return oe(r,o),r.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n),t.prototype.parseKey=function(e){try{var t=0,r=0,o=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?function(e){if(void 0===c){var t="0123456789ABCDEF",r=" \f\n\r\t\xa0\u2028\u2029";for(c={},s=0;s<16;++s)c[t.charAt(s)]=s;for(t=t.toLowerCase(),s=10;s<16;++s)c[t.charAt(s)]=s;for(s=0;s<r.length;++s)c[r.charAt(s)]=-1}for(var o=[],n=0,i=0,s=0;s<e.length;++s){var a=e.charAt(s);if("="==a)break;if(-1!=(a=c[a])){if(void 0===a)throw new Error("Illegal character at offset "+s);n|=a,2<=++i?(o[o.length]=n,i=n=0):n<<=4}}if(i)throw new Error("Hex encoding incomplete: 4 bits missing");return o}(e):p.unarmor(e),n=b.decode(o);if(9===(n=3===n.sub.length?n.sub[2].sub[0]:n).sub.length){t=n.sub[1].getHexStringValue(),this.n=U(t,16),r=n.sub[2].getHexStringValue(),this.e=parseInt(r,16);var i=n.sub[3].getHexStringValue(),s=(this.d=U(i,16),n.sub[4].getHexStringValue()),a=(this.p=U(s,16),n.sub[5].getHexStringValue()),u=(this.q=U(a,16),n.sub[6].getHexStringValue()),l=(this.dmp1=U(u,16),n.sub[7].getHexStringValue()),d=(this.dmq1=U(l,16),n.sub[8].getHexStringValue());this.coeff=U(d,16)}else{if(2!==n.sub.length)return!1;var h=n.sub[1].sub[0];t=h.sub[0].getHexStringValue(),this.n=U(t,16),r=h.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(e){return!1}},t.prototype.getPrivateBaseKey=function(){var e={array:[new re.asn1.DERInteger({int:0}),new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e}),new re.asn1.DERInteger({bigint:this.d}),new re.asn1.DERInteger({bigint:this.p}),new re.asn1.DERInteger({bigint:this.q}),new re.asn1.DERInteger({bigint:this.dmp1}),new re.asn1.DERInteger({bigint:this.dmq1}),new re.asn1.DERInteger({bigint:this.coeff})]};return new re.asn1.DERSequence(e).getEncodedHex()},t.prototype.getPrivateBaseKeyB64=function(){return l(this.getPrivateBaseKey())},t.prototype.getPublicBaseKey=function(){var e=new re.asn1.DERSequence({array:[new re.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new re.asn1.DERNull]}),t=new re.asn1.DERSequence({array:[new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e})]});return t=new re.asn1.DERBitString({hex:"00"+t.getEncodedHex()}),new re.asn1.DERSequence({array:[e,t]}).getEncodedHex()},t.prototype.getPublicBaseKeyB64=function(){return l(this.getPublicBaseKey())},t.wordwrap=function(e,t){return e?(t="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})",e.match(RegExp(t,"g")).join("\n")):e},t.prototype.getPrivateKey=function(){return"-----BEGIN RSA PRIVATE KEY-----\n"+t.wordwrap(this.getPrivateBaseKeyB64())+"\n-----END RSA PRIVATE KEY-----"},t.prototype.getPublicKey=function(){return"-----BEGIN PUBLIC KEY-----\n"+t.wordwrap(this.getPublicBaseKeyB64())+"\n-----END PUBLIC KEY-----"},t.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")},t.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},t.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)},t}(r);se.prototype.setKey=function(e){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new ne(e)},se.prototype.setPrivateKey=function(e){this.setKey(e)},se.prototype.setPublicKey=function(e){this.setKey(e)},se.prototype.decrypt=function(e){try{return this.getKey().decrypt(d(e))}catch(e){return!1}},se.prototype.encrypt=function(e){try{return l(this.getKey().encrypt(e))}catch(e){return!1}},se.prototype.sign=function(e,t,r){try{return l(this.getKey().sign(e,t,r))}catch(e){return!1}},se.prototype.verify=function(e,t,r){try{return this.getKey().verify(e,d(t),r)}catch(e){return!1}},se.prototype.getKey=function(e){if(!this.key){if(this.key=new ne,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},se.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},se.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},se.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},se.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},se.version="3.2.1";var ie=se;function se(e){this.default_key_size=(e=(e=void 0===e?{}:e)||{}).default_key_size?parseInt(e.default_key_size,10):1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null}}(0,Ce={},Ae),Ce.default),Le=(Object.defineProperty(Ne.prototype,"publicKey",{get:function(){return"-----BEGIN PUBLIC KEY-----\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxtEM51skf+Bg29Mdb+WN\n        IkgbGDZ/wOP4MTntlut65WpPpXOkg2m9EKscmzfE6kUNLYnYV77fZGFSjr+Wkmoz\n        VK1lJ3seswBNyP6X5LUszkf1WoeEyBbfegTf3XkHEeWJ5BlD9syurlA2Fh+cTaNO\n        RNlAGBZO7SdgTHPYAcHu0fAnJZwCZ9+ZZkVnjyTBqQckovMttKqvtoUKcp7NgGve\n        w0OJxFKwIITu1keGdZ+yN9wBul4qJfTy8otOcwGL4bnoABMhCNvJc3xA70BuaaF0\n        fvhxA8diV/2W+qg+LAzdqajLaNciuDHIY5Y+z5kZI1eBa3J3aqUASse4YzzTYv48\n        7wIDAQAB\n        -----END PUBLIC KEY-----"},enumerable:!1,configurable:!0}),Ne.prototype.encrypt=function(e){return e=L.a.encrypt(this.uint8Array2WordArray(e),this.key2,{iv:this.iv2}).toString(),Ie.a.toByteArray(e)},Ne.prototype.decrypt=function(e){return this.wordArray2Uint8Array(L.a.decrypt(Ie.a.fromByteArray(e),this.key2,{iv:this.iv2}))},Ne.prototype.generateK1Sign=function(){var e=this.generateNonce(),t=((this.key1=N.a.parse(e),this.iv1=Oe.a.parse(Re()(e).toString().toLowerCase()),t=new Pe).setPublicKey(this.publicKey),t.getKey().encrypt(e));return this.wordArray2Uint8Array(Oe.a.parse(t))},Ne.prototype.decryptK2Sign=function(e){try{this.key2=L.a.decrypt(Ie.a.fromByteArray(e),this.key1,{iv:this.iv1}),this.iv2=Re()(this.key2)}catch(e){}},Ne.prototype.generateNonce=function(){var e=Math.random().toString().substr(2,16);return e.length<16&&(e+=e.substr(0,16-e.length)),e},Ne.prototype.md5=function(e){return Re()(e).toString()},Ne.prototype.md5Bytes=function(e){return this.wordArray2Uint8Array(Re()(this.uint8Array2WordArray(e)))},Ne.prototype.wordArray2Uint8Array=function(e){for(var t=e.words,r=e.sigBytes,o=new Uint8Array(r),n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o[n]=i}return o},Ne.prototype.uint8Array2WordArray=function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e[o])<<24-o%4*8;return ke.a.create(r,t)},Ne);function Ne(){}function De(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))}function Me(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))}var xe={"/lr/login_room_rsp":"LoginRoomRsp","/lr/logout_room_rsp":"LogoutRoomRsp","/sw/push_kickout":"PushKickout","/sw/push":"PushReq","/sw/merge_push":"CmdMergePushReq","/lr/room/hb_rsp":"HbRsp","/lr/userlist/userlist_rsp":"UserlistRsp","/lr/stream/add_rsp":"StreamAddRsp","/lr/stream/delete_rsp":"StreamDeleteRsp","/lr/stream/update_rsp":"StreamUpdateRsp","/lr/stream/list_rsp":"StreamListRsp","/lr/push/stream_add":"PushStream","/lr/push/stream_delete":"PushStream","/lr/push/stream_update":"PushStream","/lr/signal/liverequest_rsp":"SignalLiveRsp","/lr/signal/liverresult_rsp":"SignalLiveResulRsp","/lr/signal/liveinvite_rsp":"SignalLiveInviteRsp","/lr/signal/livestop_rsp":"SignalLiveStopRsp","/lr/signal/livescustom_rsp":"SignalLiveCustomRsp","/lr/im/chat_rsp":"ImChatRsp","/lr/room/enter_rsp":"EnterRsp","/lr/room/quit_rsp":"QuitRsp","/lr/trans/trans_rsp":"TransRsp","/lr/trans/transfetch_rsp":"TransFetchRsp","/lr/bigim/chat_rsp":"BigimChatRsp","/lr/relay_rsp":"RelayRsp","/lr/token/renew_token_rsp":"RenewTokenRsp","/lr/push/user_updated":"PushUserInfoUpdated","/lr/push/user_token_expire":"PushUserTokenExpire","/lr/push/im_chat":"PushImChat","/lr/push/bigim_chat":"PushBigImChat","/lr/push/trans":"PushTrans","/lr/push/user_kickout":"PushUserKickout","/lr/push/user_logreport":"PushUserLogReport","/lr/push/usertrans":"PushUserTrans"},Be=(Ce=r(1),r.n(Ce)),Ue=function(){return(Ue=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};t.util.Long=Be.a,t.configure();var je,He=((Ce=je=je||{})[Ce.disconnected=0]="disconnected",Ce[Ce.broken=1]="broken",Ce[Ce.connected=2]="connected",Object.defineProperty(ze.prototype,"nickName",{get:function(){return De(this.stateCenter.nickName)},enumerable:!1,configurable:!0}),ze.prototype.isDisConnect=function(){return this.state!==je.connected},ze.prototype.getHeader=function(e){e={cmd:e,seq:++this.seq,timestamp:(new Date).getTime(),session_id:this.switchSessionID,controls:this.controls,flags:this.flags};var t=Te.proto_switch.Header.create(e);return t=Te.proto_switch.Header.encode(t).finish(),[e.seq,t]},ze.prototype.isUaConnect=function(){return this.ua.isConnect()},ze.prototype.sendMessage=function(e,t,r,o,n,i,s){var a=this;if(void 0===n&&(n={timeout:6e3}),void 0===i&&(i=!0),this.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" call"),"/lr/login_room"!==e&&this.state!==je.connected)return this.logger.warn(U.LIVEROOMHANDLER_SENDMESSAGE+" state "+this.state),-1;var c=this.getHeader(e),u=c[1],l=t;return!this.unEncryptCmdList.includes(e)&&this.isEncrypt&&(l=this.crypto.encrypt(t)),t=this.getHead(u.length,l.length),t=new Uint8Array(Array.from(t).concat(Array.from(u)).concat(Array.from(l))),i&&(u={seq:this.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeout:n.timeout,success:r,error:function(e,t,r){var n;if(a.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+t+" "+JSON.stringify(e)+" "+JSON.stringify(r)),"/lr/login_room_rsp"!==(null==(n=null==e?void 0:e.header)?void 0:n.cmd)&&-1<[1002,105].indexOf(null==(n=null==e?void 0:e.body)?void 0:n.err_code))return null!=r&&r.roomID?(n=a.stateCenter.roomModulesList.find((function(e){return e.roomID==r.roomID})))?void n.retryRoom():void a.logger.error(U.LIVEROOMHANDLER_SENDMESSAGE+" room no found ignore "):void a.rtm.retryRoom();[207,208].indexOf(null==(n=null==e?void 0:e.body)?void 0:n.err_code),o&&o(e,t)},params:s},l=this.sendCommandList.push(u),this.sendCommandMap[u.seq]=l),this.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+c[0]+" cmd: "+e),i="/lr/login_room"===e,null!=(n=this.liveroomRequest)&&n.sendRequest({payload:t,ack:i},(function(e){a.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" fail")}),(function(){a.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" ack")})),c[0]},ze.prototype.getHead=function(e,t){var r=new Uint8Array(7);return r[0]=33,r[1]=e>>8,r[2]=e-(r[1]<<8),r.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),r},ze.prototype.handlePush=function(e,t){if(void 0===t&&(t=!1),33===(r=e[0])){var r=(e[1]<<8)+e[2],o=Te.proto_switch.Header.decode(e.slice(7,7+r)),n=r=e.slice(7+r);if(!this.unEncryptCmdList.includes(o.cmd)&&this.isEncrypt){if(!this.hasCryptSign)return this.logger.warn(U.LIVEROOMHANDLER_HANDLEPUSH+" decrypt early "+o.cmd),void this.waitDecryptCmdList.push(e);try{n=this.crypto.decrypt(r)}catch(e){this.logger.warn(U.LIVEROOMHANDLER_HANDLEPUSH+" decrypt fail "+o.cmd)}}if(xe[o.cmd]){if(e=this.decodeResponseBody(o,n),this.swPushCmdList.includes(o.cmd))return t&&"/lr/push/user_updated"===(null==(r=null==e?void 0:e.head)?void 0:r.sub_cmd)?void this.logger.info(U.LIVEROOMHANDLER_HANDLEPUSH+" ignore user updated"):void this.handleSwitchPush(o,e);this.logger.info(U.LIVEROOMHANDLER_HANDLEPUSH+" down "+o.cmd+" "+JSON.stringify(this.transBuf(e))),t={header:this.transHeader(o),body:this.transRsp(e)},this.handleSendCommandMsgRsp(t)}else this.logger.info(U.LIVEROOMHANDLER_HANDLEPUSH+" cmd is not rtc"),this.onSwitchMessage(o,n)}},ze.prototype.handleSwitchPush=function(e,t){if("/sw/push"===e.cmd){var r=(a=this.transRsp(t.head)).room_id;if(this.stateCenter.roomModulesList.find((function(e){return e.roomID==r}))){var o=void 0,n={header:a,body:o=this.unStructCmdList.includes(t.head.sub_cmd)?{signal_msg:Me(t.msg_body),sub_cmd:this.joinLiveMap[t.head.sub_cmd]}:"/lr/push/signal_custom"===t.head.sub_cmd?{custommsg:Me(t.msg_body)}:xe[t.head.sub_cmd]?this.transRsp(this.decode(Te.liveroom_cs[xe[t.head.sub_cmd]],t.msg_body)):{}};if(this.logger.info(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" push "+JSON.stringify(this.transBuf(n))),this.whiteboardPushCmdList.includes(t.head.sub_cmd))this.logger.info(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" white "),this.onSwitchMessage(e,t);else switch(t.head.sub_cmd){case"/lr/push/user_updated":this.handlePushUserStateUpdateMsg(n);break;case"/lr/push/user_kickout":this.handlePushKickout(n,!1);break;case"/lr/push/trans":this.handlePushTransMsg(n);break;case"/lr/push/im_chat":this.handlePushRoomMsg(n);break;case"/lr/push/signal_custom":this.handlePushCustomMsg(n);break;case"/lr/push/stream_add":case"/lr/push/stream_delete":case"/lr/push/stream_update":this.handlePushStreamMsg(n);break;case"/lr/push/joinlive_request":case"/lr/push/joinlive_result":case"/lr/push/joinlive_invite":case"/lr/push/joinlive_stop":this.handlePushSignalMsg(n);break;case"/lr/push/user_token_expire":this.handlePushTokenExpire(n)}1==t.head.qos_flag&&(c={code:0,message:"",sub_cmd:t.head.sub_cmd,msg_id:t.head.msg_id,server_send_time:t.head.send_time},u=Te.proto_switch.PushRsp.create(c),l=Te.proto_switch.PushRsp.encode(u).finish(),this.sendMessage("/sw/push_rsp",l,void 0,void 0))}else this.logger.warn(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")}else{var i,s,a,c,u,l;"/sw/merge_push"===e.cmd?(i=(a=this.transRsp(t.head)).room_id,this.stateCenter.roomModulesList.find((function(e){return e.roomID==i}))?(s=[],t.messages.forEach((function(e){var t;s.push({sub_cmd:e.sub_cmd,sub_seq:e.sub_seq,msg_id:e.msg_id}),"/lr/push/bigim_chat"===e.sub_cmd&&(t=Te.liveroom_cs.PushBigImChat.decode(e.msg_body),e.msg_body=t)})),delete(a={header:(o=this.transRsp(t)).head,body:o}).body.head,this.handlePushMergeMsg(a),1==t.head.qos_flag&&(u=Te.proto_switch.CmdMergePushRsp.create(c={messages:s}),l=Te.proto_switch.CmdMergePushRsp.encode(u).finish(),this.sendMessage("/sw/merge_push_rsp",l,void 0,void 0))):this.logger.warn(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")):"/sw/push_kickout"===e.cmd&&(o={reason:900<t.reason?t.reason-900:t.reason,msg:t.message,need_relogin:void 0!==t.need_relogin?t.need_relogin:0},this.handlePushKickout({header:e,body:o},!0))}},ze.prototype.handlePushTokenExpire=function(e){},ze.prototype.handlePushKickout=function(e,t){},ze.prototype.handlePushStreamMsg=function(e){},ze.prototype.handlePushSignalMsg=function(e){},ze.prototype.handlePushMergeMsg=function(e){},ze.prototype.handlePushCustomMsg=function(e){},ze.prototype.handlePushRoomMsg=function(e){},ze.prototype.handlePushTransMsg=function(e){},ze.prototype.onSwitchMessage=function(e,t){},ze.prototype.decodeResponseBody=function(e,t){var r=this.onSwitchCmdList.includes(e.cmd)?"proto_switch":"liveroom_cs";return this.decode(this.protoInstance[r][xe[e.cmd]],t)},ze.prototype.handleWaitDecryptCmdList=function(){var e=this;this.waitDecryptCmdList.forEach((function(t){e.handlePush(t,!0)})),this.waitDecryptCmdList=[]},ze.prototype.handlePushUserStateUpdateMsg=function(e){},ze.prototype.login=function(e,t,r){var n,i,s,a,c=this,u=(this.state==je.disconnected&&(this.logger.info(U.LIVEROOMHANDLER_LOGIN+" state disconnect"),this.closeRequest()),(new Date).getTime()+"");e.isMulti?(s={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,net_type:x.getNetTypeNum(),config:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0},lv_key:e.lvKey,third_token:De(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",conn_type:2,room_name:De(e.roomName)},i=Ue(Ue({},s),{room_name:e.roomName,third_token:e.token}),this.logger.info(U.LIVEROOMHANDLER_LOGIN+" enter "+JSON.stringify(i)),s=Te.liveroom_cs.EnterReq.create(s),a=Te.liveroom_cs.EnterReq.encode(s).finish(),this.sendMessage("/lr/room/enter",a,(function(e,r){c.longToStringNumber(e.body,["user_session_id","room_session_id","ret_timestamp"],"toString"),c.transKeysName(e.body,[["user_session_id","session_id"],["hb_interval","hearbeat_interval"]]),c.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,r)}),(function(e,t){r&&r(e,t)}),void 0,void 0,{roomID:e.roomID})):(n={app_id:this.stateCenter.appid,id_name:De(this.stateCenter.idName),device_id:this.stateCenter.deviceID,term_type:this.stateCenter.ENV%2==0?o.TT_WEB:o.TT_MINIPROGRAM,net_type:x.getNetTypeNum(),sdk_ver:parseInt(this.rtm.version.replace(/\./g,"")),proto_ver:131072,nick_name:this.nickName,client_stamp:De(u),crypt_version:1,k1_sign:this.crypto.generateK1Sign(),relogin_token:this.switchSessionID.notEquals(Be.a.fromInt(0))?De(this.reloginToken):"",role:this.stateCenter.role,liveroom_session_id:Be.a.fromString(e.sessionID),room_id:De(e.roomID),room_name:De(e.roomName),biz_type:0,room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0,lv_key:e.lvKey,third_token:De(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",biz_version:this.stateCenter.bizVersion||"",login_logic:this.stateCenter.isMultiRoom?3:1,sdk_conn_type:2},i=Ue(Ue({},n),{id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,client_stamp:u,k1_sign:void 0,relogin_token:this.reloginToken,liveroom_session_id:e.sessionID,room_id:e.roomID,room_name:e.roomName,third_token:e.token}),this.logger.info(U.LIVEROOMHANDLER_LOGIN+" login "+JSON.stringify(i)),this.k1SignLogoutBuffer=this.crypto.md5Bytes(n.k1_sign),s=Te.proto_switch.LoginRoomReq.create(n),a=Te.proto_switch.LoginRoomReq.encode(s).finish(),this.sendMessage("/lr/login_room",a,(function(e,r){c.switchSessionID=e.header.session_id,c.reloginToken=e.body.relogin_token,c.logger.info(U.LIVEROOMHANDLER_LOGIN+" login rsp"),c.crypto.decryptK2Sign(e.body.k2_sign),1===e.body.crypt_option?c.isEncrypt=!1:void 0===e.body.crypt_option&&(c.isEncrypt=!0),c.hasCryptSign=!0,c.waitDecryptTimer=setTimeout((function(){c.handleWaitDecryptCmdList()}),0),c.longToStringNumber(e.body,["liveroom_session_id","room_session_id","ret_timestamp"],"toString"),delete e.body.heartbeat_interval,delete e.body.heartbeat_timeout,c.transKeysName(e.body,[["liveroom_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"]]),c.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,r)}),(function(e,t){r&&r(e,t)})))},ze.prototype.transKeysName=function(e,t){t.forEach((function(t){e[t[1]]=e[t[0]],delete e[t[0]]}))},ze.prototype.keysExist=function(e,t){t.forEach((function(t){void 0===e[t]&&(e[t]=0)}))},ze.prototype.longToStringNumber=function(e,t,r){t.forEach((function(t){Be.a.isLong(e[t])&&(e[t]=e[t][r]())}))},ze.prototype.logout=function(e,t,r){var o,n,i,s;return e.isMulti?(o={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,config_list:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0}},n=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_LOGOUT+" quit "+JSON.stringify(n)),i=Te.liveroom_cs.QuitReq.create(o),s=Te.liveroom_cs.QuitReq.encode(i).finish(),this.sendMessage("/lr/room/quit",s,t,r)):(o={logout_code:0,logout_check:this.crypto.md5Bytes(De(e.token)),liveroom_session_id:Be.a.fromString(e.sessionID),room_id:De(e.roomID),role:this.stateCenter.role,nickname:this.nickName,logout_logic:this.stateCenter.isMultiRoom?3:1},n=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_LOGOUT+" logout "+JSON.stringify(n)),i=Te.proto_switch.LogoutRoomReq.create(o),s=Te.proto_switch.LogoutRoomReq.encode(i).finish(),this.sendMessage("/lr/logout_room",s,t,r))},ze.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(R.TIMEOUT,t._data.seq)}),0),t=e.getFirst()},ze.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),o=Date.parse(new Date+""),n=0,i=this;null!=r&&"break"!==function(){return r._data&&r._data.sendTime+r._data.timeout>o?"break":(r._data&&delete t[r._data.seq],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+i.sendDataDropTimeout<o||(s=r&&r._data&&r._data.error,a=r&&r._data&&r._data.seq,setTimeout((function(){s&&s(R.TIMEOUT,a)}),0)),++n>=i.sendDataCheckOnceCount?"break":void(r=e.getFirst()));var s,a}(););},ze.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},ze.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},ze.prototype.handleSendCommandMsgRsp=function(e){var t,r,o=this,n=this.sendCommandMap[e.header.seq];null!=n&&(t=n._data,r=null==t?void 0:t.params,delete this.sendCommandMap[e.header.seq],this.sendCommandList.remove(n),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,o.seq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,o.seq,r)}),0))},ze.prototype.getReqHead=function(e){return{room_id:e.roomID,user_session_id:Be.a.fromString(e.sessionID),room_session_id:Be.a.fromString(e.roomSessionID)}},ze.prototype.heartBeat=function(e,t,r){var o=this;r={req_head:this.getReqHead(r),role:this.stateCenter.role,lv_key:r.lvKey},r=Te.liveroom_cs.HbReq.create(r),r=Te.liveroom_cs.HbReq.encode(r).finish(),this.sendMessage("/lr/room/hb",r,(function(t){o.transKeysName(t.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"]]),t.body.server_user_seq=t.body.user_seq.toNumber(),o.longToStringNumber(t.body,["dati_time_window"],"toNumber"),e&&e(t)}),t)},ze.prototype.fetchUserList=function(e,t,r,o){var n=this;return o=this.getReqHead(o),o=Ue({req_head:o},e),e=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_FETCH_USER_LIST+" "+JSON.stringify(e)),e=Te.liveroom_cs.UserlistReq.create(o),o=Te.liveroom_cs.UserlistReq.encode(e).finish(),this.sendMessage("/lr/userlist/userlist",o,(function(e,r){n.logger.info(U.LIVEROOMHANDLER_FETCH_USER_LIST+" suc "+r),n.transKeysName(e.body,[["user_basic_list","user_baseinfos"]]),n.longToStringNumber(e.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),t&&t(e,r)}),r)},ze.prototype.sendRoomMsg=function(e,t,r,o){var n=this;return o={req_head:this.getReqHead(o),msg_category:e.msg_category,msg_priority:e.msg_priority,msg_type:e.msg_type,msg_content:De(e.msg_content)},e=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_SENDROOMMSG+" "+JSON.stringify(e)),e=Te.liveroom_cs.ImChatReq.create(o),o=Te.liveroom_cs.ImChatReq.encode(e).finish(),this.sendMessage("/lr/im/chat",o,(function(e){n.longToStringNumber(e.body,["msg_id"],"toNumber"),t&&t(e)}),r)},ze.prototype.sendReliableMessage=function(e,t,r,o){return o={req_head:this.getReqHead(o),role:this.stateCenter.role,nick_name:this.nickName,trans_type:De(e.trans_type),trans_data:De(e.trans_data),trans_local_seq:e.trans_local_seq,trans_channel:De(e.trans_channel)},e=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_SENDRELIABLEMESSAGE+" "+JSON.stringify(e)),e=Te.liveroom_cs.TransReq.create(o),o=Te.liveroom_cs.TransReq.encode(e).finish(),this.sendMessage("/lr/trans/trans",o,t,r)},ze.prototype.fetchReliableMessage=function(e,t,r,o){o=this.getReqHead(o);var n=e.fetch_array.map((function(e){return{trans_type:De(e.trans_type),trans_local_seq:e.trans_seq}}));return o={req_head:o,trans_channel:De(e.trans_channel),fetch_array:n},e=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE+" "+JSON.stringify(e)),n=Te.liveroom_cs.TransFetchReq.create(o),e=Te.liveroom_cs.TransFetchReq.encode(n).finish(),this.sendMessage("/lr/trans/transfetch",e,t,r)},ze.prototype.sendCustomCommand=function(e,t,r,o){var n=this,i=(o=this.getReqHead(o),e.dest_id_name.map((function(e){return{id_name:De(e)}})));return o=Ue({req_head:o,dst_userlist:i,push_message:De(e.custom_msg)},e),i=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_SENDCUSTOMCOMMAND+" "+JSON.stringify(i)),e=Te.liveroom_cs.SignalLiveReq.create(o),i=Te.liveroom_cs.SignalLiveReq.encode(e).finish(),this.sendMessage("/lr/signal/livescustom",i,(function(e){t&&t(n.transRsp(e))}),(function(e){r&&r(n.transRspHead(e.rsp_head))}))},ze.prototype.sendBigRoomMessage=function(e,t,r,o){return o=this.getReqHead(o),e=e.msgs.map((function(e){return{msg_category:e.msg_category,msg_type:e.msg_type,msg_timestamp:Be.a.fromNumber(Date.now()),msg_content:De(e.msg_content),bigmsg_client_id:De(e.bigmsg_client_id)}})),o={req_head:o,nick_name:this.nickName,role:this.stateCenter.role,msgs:e},e=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_SENDBIGROOMMESSAGE+" "+JSON.stringify(e)),e=Te.liveroom_cs.BigimChatReq.create(o),o=Te.liveroom_cs.BigimChatReq.encode(e).finish(),this.sendMessage("/lr/bigim/chat",o,t,r)},ze.prototype.sendRelayMessage=function(e,t,r,o){return o={req_head:this.getReqHead(o),nick_name:this.nickName,role:this.stateCenter.role,relay_type:De(e.relay_type),relay_data:De(e.relay_data)},e=Te.liveroom_cs.RelayReq.create(o),o=Te.liveroom_cs.RelayReq.encode(e).finish(),this.sendMessage("/lr/relay",o,t,r)},ze.prototype.sendSignalCmd=function(e,t,r,o){var n="",i="";switch(e.sub_cmd){case 1003:n="/lr/signal/liveinvite",i="SignalLiveInviteReq";break;case 1001:n="/lr/signal/liverequest",i="SignalLiveReq";break;case 1002:n="/lr/signal/liverresult",i="SignalLiveResultReq";break;case 1004:n="/lr/signal/livestop",i="SignalLiveStopReq"}o=this.getReqHead(o);var s=e.dest_id_name.map((function(e){return{id_name:De(e)}}));return o={req_head:o,push_message:De(e.signal_msg),dst_userlist:s},e=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_SENDSIGNALCMD+" "+JSON.stringify(e)),s=Te.liveroom_cs[i].create(o),e=Te.liveroom_cs[i].encode(s).finish(),Te.liveroom_cs[i].decode(e),this.sendMessage(n,e,t,r)},ze.prototype.sendStreamUpdate=function(e,t,r,o){var n,i=this;try{n=JSON.parse(e.stream_msg)}catch(e){}var s,a,c="",u=(this.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(e)),this.stateCenter.roomModulesList.find((function(e){return e.roomID==o.roomID})));if(!u)return this.logger.error(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" room no found ignore "),-1;switch(e.sub_cmd){case 2001:c="/lr/stream/add",s="StreamAddReq",a={req_head:this.getReqHead(u),stream_id:De(n.stream_id),extra_info:De(n.extra_info),client_req_seq:this.seq+1,login_mode:1,third_token:De(e.third_token||"")};break;case 2002:c="/lr/stream/delete",s="StreamDeleteReq",a={req_head:this.getReqHead(u),stream_id:De(n.stream_id),stream_sid:n.stream_sid,client_req_seq:this.seq+1};break;case 2003:c="/lr/stream/update",s="StreamUpdateReq",a={req_head:this.getReqHead(u),stream_id:De(n.stream_id),stream_sid:n.stream_sid,client_req_seq:this.seq+1,extra_info:De(n.extra_info)}}var l=this.transBuf(a);return this.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(l)),l=Te.liveroom_cs[s].create(a),l=Te.liveroom_cs[s].encode(l).finish(),this.sendMessage(c,l,(function(e){i.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" suc "+c+" "+JSON.stringify(e)),e.header.room_id=u.roomID,t&&t(e)}),(function(e){i.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" fail "+c+" "+JSON.stringify(e)),r&&r(e)}))},ze.prototype.getStreamList=function(e,t,r,o){var n,i=this.stateCenter.roomModulesList.find((function(e){return e.roomID==o.roomID}));i?(i={req_head:this.getReqHead(i)},n=this.transBuf(i),this.logger.info(U.LIVEROOMHANDLER_GETSTREAMLIST+" "+JSON.stringify(n)),n=Te.liveroom_cs.StreamListReq.create(i),i=Te.liveroom_cs.StreamListReq.encode(n).finish(),this.sendMessage("/lr/stream/list",i,(function(e){var r;null!=(r=e.body)&&r.stream_info.forEach((function(e){e.create_time=e.create_time.toNumber()})),t&&t(e)}),(function(e){r&&r(e)}))):this.logger.error(U.LIVEROOMHANDLER_GETSTREAMLIST+" room no found ignore "+o.roomID)},ze.prototype.transBuf=function(e){var t=this,r={};return Object.keys(e).forEach((function(o){["logout_check","k2_sign","k1_sign"].includes(o)?r[o]=e[o]:t.transReqBytes(r,e,o)})),r},ze.prototype.transReqBytes=function(e,t,r){var o=this;if(Be.a.isLong(t[r]))e[r]=t[r].toString();else if("[object Object]"===Object.prototype.toString.call(t[r]))e[r]={},Object.keys(t[r]).forEach((function(n){return o.transReqBytes(e[r],t[r],n)}));else if("[object Array]"===Object.prototype.toString.call(t[r])&&"[object Object]"===Object.prototype.toString.call(t[r][0])){e[r]=[];for(var n=0;n<t[r].length;n++)!function(n){var i={};Object.keys(t[r][n]).forEach((function(e){o.transReqBytes(i,t[r][n],e)})),e[r].push(i)}(n)}else"[object Uint8Array]"===Object.prototype.toString.call(t[r])?e[r]=Me(t[r]):e[r]=t[r]},ze.prototype.transHeader=function(e){return e.timestamp=Be.a.isLong(e.timestamp)?e.timestamp.toString():e.timestamp,e},ze.prototype.transRsp=function(e){var t=this,r=e&&e.rsp_head?this.transRspHead(e.rsp_head):{},o=Ue(Ue({},e),r),n=(delete o.rsp_head,{});return Object.keys(o).forEach((function(e){"k2_sign"===e?n[e]=o[e]:t.transBytes(n,o,e)})),n},ze.prototype.transBytes=function(e,t,r){var o=this;if(Be.a.isLong(t[r]))e[r]=t[r];else if("[object Object]"===Object.prototype.toString.call(t[r]))e[r]={},Object.keys(t[r]).forEach((function(n){return o.transBytes(e[r],t[r],n)}));else if("[object Array]"===Object.prototype.toString.call(t[r])&&"[object Object]"===Object.prototype.toString.call(t[r][0])){e[r]=[];for(var n=0;n<t[r].length;n++)!function(n){var i={};Object.keys(t[r][n]).forEach((function(e){o.transBytes(i,t[r][n],e)})),e[r].push(i)}(n)}else"[object Uint8Array]"===Object.prototype.toString.call(t[r])?e[r]=Me(t[r]):e[r]=t[r]},ze.prototype.transRspHead=function(e){return e?{err_code:e.code||0,err_message:e.message}:{}},ze.prototype.decode=function(e,t){return Ue({},e.decode(t))},ze.prototype.handleDisconnected=function(e,t){var r=this;this.logger.info(U.LIVEROOMHANDLER_HANDLEDISCONNECTED+" call"),this.state=je.disconnected,this.resetWaitCmd(),this.stateCenter.useNetAgent&&e===E.TIMEOUT&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(r.ua.isConnect()?(r.logger.info(U.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is connect"),e.roomTryHandler.active()):(r.logger.info(U.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is disconnect"),r.ua.connectUa()))}))},ze.prototype.handleBroken=function(){this.logger.info(U.LIVEROOMHANDLER_HANDLEBROKEN+" call"),this.state=je.broken,this.stateCenter.useNetAgent&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,r){e.roomHandler.disconnectedHandle(r)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",w.Reconnecting,R.NETWORK_BROKEN))}))},ze.prototype.handleConnected=function(e){var t=this;this.logger.info(U.LIVEROOMHANDLER_HANDLECONNECTED+" call "+e),this.state=je.connected,this.hasCryptSign=!1,this.resetWaitCmd(),this.stateCenter.useNetAgent&&(e===y.AUTO?this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&t.ua.isConnect()&&e.roomTryHandler.active()})):this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.stopMaxTime(),e.roomTryHandler.invalid())})))},ze.prototype.resetWaitCmd=function(){this.waitDecryptCmdList=[],clearTimeout(this.waitDecryptTimer),this.waitDecryptTimer=null},ze.prototype.renewToken=function(e,t,r,o){var n=this;o={req_head:this.getReqHead(o),token:e.token},e=Te.liveroom_cs.RenewTokenReq.create(o),e=Te.liveroom_cs.RenewTokenReq.encode(e).finish(),o=this.transBuf(o),this.logger.info(U.LIVEROOMHANDLER_RENEW_TOKEN+" "+JSON.stringify(o)),this.sendMessage("/lr/token/renew_token",e,(function(e,r){n.keysExist(e.body,["token_remain_time"]),t&&t(e,r)}),r)},ze.prototype.reset=function(){this.logger.info(U.LIVEROOMHANDLER_RESET+" call "),this.state=je.disconnected,this.switchSessionID=Be.a.fromInt(0),this.sendDataCheckTimer&&clearTimeout(this.sendDataCheckTimer)},ze.prototype.closeRequest=function(){var e;null!=(e=this.liveroomRequest)&&e.closeRequest()},ze.prototype.resetSessionInfo=function(){this.switchSessionID=Be.a.fromInt(0)},ze);function ze(e,t,r,o,n){var s=this;this.logger=e,this.stateCenter=t,this.ua=r,this.dataReport=o,this.rtm=n,this.seq=0,this.controls=new Uint8Array(1),this.flags=new Uint8Array(1),this.sendCommandList=new m,this.sendCommandMap={},this.isEncrypt=!1,this.hasCryptSign=!1,this.waitDecryptCmdList=[],this.zPushSid="0",this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.protoInstance=we.a,this.swPushCmdList=["/sw/push","/sw/merge_push","/sw/push_kickout","/sw/push_redirect"],this.onSwitchCmdList=["/lr/login_room_rsp","/lr/logout_room_rsp","/sw/push_kickout","/sw/push","/sw/merge_push"],this.unEncryptCmdList=["/lr/login_room","/lr/login_room_rsp"],this.whiteboardPushCmdList=["/edu/push/set_room","/edu/push/set_user","/edu/push/joinlive","/edu/push/set_mod","/edu/push/draw_graphics","/edu/push/clear_graphics","/edu/push/draw_page_graphics","/edu/push/clear_page_graphics","/edu/push/clear_user_graphic_list","/edu/push/qaa","/edu/push/set_user_auth","/edu/push/set_room_auth"],this.state=je.disconnected,this.unStructCmdList=["/lr/push/joinlive_request","/lr/push/joinlive_result","/lr/push/joinlive_invite","/lr/push/joinlive_stop"],this.joinLiveMap={"/lr/push/joinlive_request":11001,"/lr/push/joinlive_result":11002,"/lr/push/joinlive_invite":11003,"/lr/push/joinlive_stop":11004},this.reloginToken="",this.crypto=new Le,this.liveroomRequest=this.ua.getPCRequest(T.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=Be.a.fromInt(0),null!=(e=this.liveroomRequest)&&e.on("connected",(function(e){s.handleConnected(e)})),null!=(t=this.liveroomRequest)&&t.on("broken",(function(e){s.handleBroken()})),null!=(r=this.liveroomRequest)&&r.on("disconnected",(function(e,t){s.handleDisconnected(e,t)})),null!=(o=this.liveroomRequest)&&o.on("downLoadMessage",(function(e){s.handlePush(e)})),null!=(n=this.liveroomRequest)&&n.on("pcBrokenEvent",(function(e){var t=J.kZegoSDKProxyBroken,r=s.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},t.event);r.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),r.end()})),null!=(e=this.liveroomRequest)&&e.on("pcDisconnectedEvent",(function(e){var t=J.kZegoSDKProxyDisconnect,r=s.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},t.event);r.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),r.end()})),null!=(t=this.liveroomRequest)&&t.on("pcConnectedEvent",(function(e){var t=J.kZegoSDKProxyConnect,r=s.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},t.event);r.setAttributes({service_no:t.service_no(e.service_no),recv_time:t.recv_time((new Date).getTime()),proxy_link_sources:t.proxy_link_sources(e.proxy_link_sources),connect_stream:t.connect_stream(e.connect_stream)}),r.end()}))}var Ve=(qe.prototype.listenCallBack=function(){var e=this;this.roomServicer.handlePushCustomMsg=function(t){e.handlePushCustomMsg(t)},this.roomServicer.handlePushTokenExpire=function(t){var r,o=null==(o=null==(o=null==t?void 0:t.body)?void 0:o.stop_stream)?void 0:o.stream_id_list.map(Me);null!=(r=null==(r=null==t?void 0:t.body)?void 0:r.stop_stream)&&(r.stream_id_list=o),e.stateCenter.actionListener("_tokenExpired",t)},this.roomServicer.handlePushKickout=function(t,r){var o;r?function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([],e.stateCenter.roomModulesList,!0).forEach((function(e){e.roomHandler.handlePushKickout(t,!0,!0)})):(o=null==(r=null==t?void 0:t.header)?void 0:r.room_id,r=e.stateCenter.roomModulesList.find((function(e){return e.roomID==o})),e.roomServicer.longToStringNumber(t.body,["session_id"],"toString"),r?r.roomHandler.handlePushKickout(t):e.logger.error(U.LIVEROOMHANDLER_PUSHKICKOUT+" room no found ignore "+JSON.stringify(null==(r=t.header)?void 0:r.room_id)))},this.roomServicer.handlePushStreamMsg=function(t){e.handlePushStreamMsg(t)},this.roomServicer.handlePushSignalMsg=function(t){e.handlePushSignalMsg(t)},this.roomServicer.handlePushMergeMsg=function(t){e.handlePushMergeMsg(t)},this.roomServicer.handlePushRoomMsg=function(t){e.handlePushRoomMsg(t)},this.roomServicer.handlePushTransMsg=function(t){e.handlePushTransMsg(t)},this.roomServicer.onSwitchMessage=function(t,r){e.onSwitchMessage(t,r)},this.roomServicer.handlePushUserStateUpdateMsg=function(t){var r,o,n,s=null==(a=null==t?void 0:t.header)?void 0:a.room_id,a=e.stateCenter.roomModulesList.find((function(e){return e.roomID==s}));a?(n=t.body.user_list.map((function(e){return{Action:e.action,IdName:e.id_name,NickName:e.nick_name,Role:e.role,LoginTime:e.login_time.toString()}})),o=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:s},{key:""},J.kZMRoomRecvUserUpdateInfo.event),n={body:{user_actions:n,user_list_seq:t.body.server_user_seq.toNumber(),room_id:t.body.room_id}},o.setAttributes({user_list_seq:null==(r=null===n?void 0:n.body)?void 0:r.user_list_seq,update_user:null==(r=null===n?void 0:n.body)?void 0:r.user_actions}),o.end(),a.userHandler.handlePushUserStateUpdateMsg(n)):e.logger.error(U.LIVEROOMHANDLER_PUSHUSERUPDATE+" room no found ignore "+JSON.stringify(t))}},qe.prototype.isDisConnect=function(){return!!this.roomServicer&&this.roomServicer.isDisConnect()},qe.prototype.isUaConnect=function(){var e;return null==(e=this.roomServicer)?void 0:e.isUaConnect()},qe.prototype.sendMessage=function(e,t,r,o,n,i){var s;return null==(s=this.roomServicer)?void 0:s.sendMessage(e,t,r,o,n)},qe.prototype.handlePushTokenExpire=function(e){},qe.prototype.handlePushKickout=function(e,t){},qe.prototype.handlePushStreamMsg=function(e){},qe.prototype.handlePushSignalMsg=function(e){},qe.prototype.handlePushMergeMsg=function(e){},qe.prototype.handlePushCustomMsg=function(e){},qe.prototype.handlePushRoomMsg=function(e){},qe.prototype.handlePushTransMsg=function(e){},qe.prototype.onSwitchMessage=function(e,t){},qe.prototype.handlePushUserStateUpdateMsg=function(e){},qe.prototype.login=function(e,t,r){var o;null!=(o=this.roomServicer)&&o.login(e,t,r)},qe.prototype.logout=function(e,t,r){var o;return null==(o=this.roomServicer)?void 0:o.logout(e,t,r)},qe.prototype.startCheck=function(){var e;null!=(e=this.roomServicer)&&e.startCheck()},qe.prototype.stopCheck=function(){var e;null!=(e=this.roomServicer)&&e.stopCheck()},qe.prototype.getReqHead=function(e){var t;return null==(t=this.roomServicer)?void 0:t.getReqHead(e)},qe.prototype.heartBeat=function(e,t,r){var o;null!=(o=this.roomServicer)&&o.heartBeat(e,t,r)},qe.prototype.fetchUserList=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.fetchUserList(e,t,r,o)},qe.prototype.sendRoomMsg=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.sendRoomMsg(e,t,r,o)},qe.prototype.sendReliableMessage=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.sendReliableMessage(e,t,r,o)},qe.prototype.fetchReliableMessage=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.fetchReliableMessage(e,t,r,o)},qe.prototype.sendCustomCommand=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.sendCustomCommand(e,t,r,o)},qe.prototype.sendBigRoomMessage=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.sendBigRoomMessage(e,t,r,o)},qe.prototype.sendRelayMessage=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.sendRelayMessage(e,t,r,o)},qe.prototype.sendSignalCmd=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.sendSignalCmd(e,t,r,o)},qe.prototype.sendStreamUpdate=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.sendStreamUpdate(e,t,r,o)},qe.prototype.getStreamList=function(e,t,r,o){var n;return null==(n=this.roomServicer)?void 0:n.getStreamList(e,t,r,o)},qe.prototype.renewToken=function(e,t,r,o){var n;null!=(n=this.roomServicer)&&n.renewToken(e,t,r,o)},qe.prototype.reset=function(){var e;null!=(e=this.roomServicer)&&e.reset()},qe.prototype.closeRequest=function(){var e;null!=(e=this.roomServicer)&&e.closeRequest()},qe);function qe(e,t,r,o,n){this.logger=e,this.stateCenter=t,this.ua=r,this.dataReport=o,this.rtm=n,this.roomServicer=new He(e,t,r,o,n),this.listenCallBack()}var Ge=function(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},Ze=function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,(c=n?[2&c[0],n.value]:c)[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],o=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},Fe=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},We=(Object.defineProperty(Ye.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),Ye.prototype.getSettingUnify=function(e){var t=this.stateCenter.settingConfig.getSetting("unify",e=void 0!==e&&e);return this.logger.info(U.RTM_GET_SETTING_UNIFY+" "+e+" "+JSON.stringify(t)),t?(e=t.enable,t=t.sdk_conn_ver,!!(e&&t<=Z.connectVer)):this.stateCenter.useNetAgent},Ye.prototype.initCallback=function(){this.proxyRes=x.proxyRes,this.actionSuccessCallback=x.actionSuccessCallback,this.actionErrorCallback=x.actionErrorCallback,this.getServerError=x.getServerError,this.generateRandumNumber=x.generateRandumNumber,this.unregisterCallback=x.unregisterCallback,this.logReportCallback=x.logReportCallback,this.registerCallback=x.registerCallback},Ye.prototype.initSpans=function(){this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMListener.event},J.kZMListener.event,!0).end()},Ye.prototype.getStoreAppConfig=function(){this.logger.info(U.RTM_GETSTOREAPPCONFIG+" call");var e=localStorage.getItem(G+"_"+this.getAppID()+"_"+(this.stateCenter.mode||Z.modeNo));if(e)try{var t=x.decryptStores(e,V);t?(this.stateCenter.appConfig=JSON.parse(t),this.stateCenter.reporter.spanSetAttributes({key:J.kZMInitSetting.event},{is_from_cache:J.kZMInitSetting.is_from_cache(!0)}),this.stateCenter.actionListener("_appConfigRsp"),this.handleLogUpload()):localStorage.removeItem(G+"_"+this.getAppID()+"_"+(this.stateCenter.mode||Z.modeNo))}catch(e){this.logger.warn(U.RTM_GETSTOREAPPCONFIG+" "+JSON.stringify(e))}else this.logger.info(U.RTM_GETSTOREAPPCONFIG+" no store config")},Ye.prototype.createNetAgent=function(){var e=this,t=(this.logger.info(U.RTM_CREATENETAGENT+" call"),this.netAgent.on("disconnected",(function(t){e.logger.info("".concat(U.RTM_CREATENETAGENT," netAgent disconnect"))})),this.netAgent.on("connected",(function(){e.logger.info("".concat(U.RTM_CREATENETAGENT," netAgent connect")),e.stateCenter.useNetAgent?(e.fetchAppConfig(),e.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&t.roomTryHandler.active(!0)}))):e.logger.info("".concat(U.RTM_CREATENETAGENT," unify false"))})),this.netAgent.on("broken",(function(t){e.logger.info("".concat(U.RTM_CREATENETAGENT," netAgent broken")),t===b.CLOSE&&e.stateCenter.roomModulesList.forEach((function(e){e.resetSessionInfo()}))})),this.netAgent.on("dispatchEvent",(function(t,r,o){var n;e.logger.info("".concat(U.RTM_CREATENETAGENT," dispatch")),"start"===r?(n=e.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},J.kZegoConnDispatch.event),e.stateCenter.requestList[t]=n):"end"===r&&(n=e.stateCenter.requestList[t])&&(n.setAttributes({domain_list:J.kZegoConnDispatch.domain_list(o.domains)}),n.end())})),this.netAgent.on("dispatchResultUpdate",(function(t){t=t.servers,e.logger.info("".concat(U.RTM_CREATENETAGENT," dispatchResult ").concat(JSON.stringify(t))),t=x.encryptStores(JSON.stringify(t),V),localStorage.setItem(q+"_"+e.stateCenter.appid+"_"+(e.stateCenter.mode||Z.modeNo),t)})),this.netAgent.on("connectedEvent",(function(t,r,o){var n;e.logger.info("".concat(U.RTM_CREATENETAGENT," connect")),"start"===r?(n=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZegoConnConnect.event},J.kZegoConnConnect.event,!0),e.stateCenter.requestList[t]=n):"end"===r&&(n=e.stateCenter.requestList[t])&&(n.setAttributes({request_count:J.kZegoConnConnect.request_count(o.count),connect_id:J.kZegoConnConnect.connect_id(o.connectid),events:J.kZegoConnConnect.events(o.connectEvents)}),n.end())})),this.netAgent.on("requestEvent",(function(t,r,o){var n;e.logger.info("".concat(U.RTM_CREATENETAGENT," request")),"start"===r?(n=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZegoRequest.event},J.kZegoRequest.event,!0),e.stateCenter.requestList[t]=n):"end"===r&&(n=e.stateCenter.requestList[t])&&(n.setAttributes({req_location:J.kZegoRequest.req_location(o.na_req_location),http_code:o.status_code,error:o.err_code}),n.end())})),this.netAgent.on("disConnectedEvent",(function(t){var r=t.duration,o=t.server,n=(t=t.connectid,e.logger.info("".concat(U.RTM_CREATENETAGENT," disconnect")),e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZegoConnDisConnect.event));n.setAttributes({url:J.kZegoConnDisConnect.url(o),connect_duration:J.kZegoConnDisConnect.connect_duration(r),connect_id:J.kZegoConnDisConnect.connect_id(t)}),n.end()})),(null!=(t=this.options)&&t.accessDomains&&0<(null==(t=this.options)?void 0:t.accessDomains.length)?null==(t=this.options)?void 0:t.accessDomains:Z.domains).map((function(e){return"wss://".concat(e,"/accesshub")})));this.netAgent.setBackupDomains(Z.primaryDomains),this.netAgent.setNetAgentDefaultServers(t),null!=(t=this.options)&&t.customDomain&&this.netAgent.setNetAgentSpecifiedServers(["wss://accesshub-wss."+this.options.customDomain+"/accesshub"]),this.dispatchServers=this.getDispatchUrl(),this.netAgent.setDispatchConnectServers(this.dispatchServers)},Ye.prototype.getDispatchUrl=function(){var e=localStorage.getItem(q+"_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||Z.modeNo));if(e&&(e=x.decryptStores(e,V)))try{return JSON.parse(e)}catch(e){}return[]},Ye.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),r=x.getBrowser(),o=t?"pagehide":"Firefox"===r?"beforeunload":"unload";window.addEventListener(o,(function(){e.logger.info(U.RTM_BIND_WINDOW_LISTENER+" "+o),e.logoutRoom()})),window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},Ye.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},Ye.prototype.retryRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&(t.resetSessionInfo(),t.roomTryHandler.active(!0))}))},Ye.prototype.netOnLineHandle=function(){var e=this;this.logger.info(U.RTM_BIND_WINDOW_LISTENER+" network is online"),this.stateCenter.networkState=s.online,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.service.isDisConnect()?t.roomTryHandler.active():t.roomTryHandler&&(t.roomTryHandler.stopMaxTime(),t.roomHandler.roomStateHandle("CONNECTED",w.Reconnected,{code:0,msg:""}))}))},Ye.prototype.netOffLineHandle=function(){this.logger.info(U.RTM_BIND_WINDOW_LISTENER+" network is broken"),this.stateCenter.networkState=s.offline,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,r){e.roomHandler.disconnectedHandle(r)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",w.Reconnecting,R.NETWORK_BROKEN))}))},Ye.prototype.setLogConfig=function(e){this.logger.info(U.RTM_SET_LOG_CONFIG+" call");var t,r=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMSetLog.event},J.kZMSetLog.event);if(e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.logger.setLogLevel(e.logLevel),r.setAttributes({log_level:J.kZMSetLog.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&r.setAttributes({remote_log_level:J.kZMSetLog.remote_log_level(e.remoteLogLevel)}),"string"==typeof e.logURL&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))this.logger.setLogServer(e.logURL),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),r.setAttributes({log_url:J.kZMSetLog.log_url(e.logURL)}),r.end();else if(e.logURL)return this.logger.error(U.RTM_SET_LOG_CONFIG+"log url must be a wss or https url"),this.stateCenter.reporter.setError(r,J.kZMSetLog.error.kInvalidParamError),!1;return this.logger.info(U.RTM_SET_LOG_CONFIG+" call success"),r.end(),!0},Ye.prototype.setDebugVerbose=function(e){var t=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMSetDebug.event},J.kZMSetDebug.event);"boolean"==typeof e&&(this.stateCenter.debug=e,this.stateCenter.debugCustom=!0,t.setAttributes({debug:J.kZMSetDebug.debug(e?"true":"false")})),t.end(),this.logger.info(U.RTM_SET_DEBUG_VERBOSE+" call success")},Ye.prototype.setDebug=function(e){"string"==typeof e&&-1<e.indexOf("wss")?this.stateCenter.debug=x.isTestEnv(e):Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("wss")}))?this.stateCenter.debug=x.isTestEnv(e[0]):this.logger.info(U.RTM_CONSTRUCTOR+" server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},Ye.prototype.renewToken=function(e,t){var r,o=this,n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:t},{key:""},J.kZMReNewToken.event);if(void 0!==t&&("string"!=typeof t||""==t))return this.logger.error(U.RTM_RENEWTOKEN+" roomID must be string and no empty"),!1;var s,a,c=this.getRoomModules(t)||this.stateCenter.roomModulesList[0];return c?"string"==typeof e&&c.roomTryHandler?(e===c.roomTryHandler.token?(this.logger.info(U.RTM_RENEWTOKEN+" token has not changed"),n.setAttributes({error:J.kZMReNewToken.error.INPUT_PARAM.code,message:"token has not changed"}),n.end()):(n.setAttributes({token:J.kZMReNewToken.token(e)}),this.stateCenter.configRoomAuth?(s=function(t){var r;null!=(r=c.roomTryHandler)&&r.renewLocalToken(e,null==(r=null==t?void 0:t.body)?void 0:r.token_remain_time),o.cloudSetting.setToken(e),o.stateCenter.configCheckToken=!0,n.end(),o.logger.info(U.RTM_RENEWTOKEN+" "+JSON.stringify(t))},a=function(t){var r=null==(r=null==t?void 0:t.body)?void 0:r.err_code;o.stateCenter.reporter.setError(n,t),!r||1000002014!==r&&2014!==r?o.logger.error(U.RTM_RENEWTOKEN+" "+JSON.stringify(t)):(o.stateCenter.configCheckToken=!1,null!=(r=c.roomTryHandler)&&r.renewLocalToken(e),o.cloudSetting.setToken(e),o.logger.warn(U.RTM_RENEWTOKEN+" "+JSON.stringify(t)))},this.stateCenter.useNetAgent?null!=(r=this.liveRoomHandler)&&r.renewToken({token:e},s,a,c):this.service.sendMessage("renew_token",{token:e},s,a,void 0,{sessionID:c.sessionID,roomID:t,roomSessionID:c.roomSessionID})):(null!=(r=c.roomTryHandler)&&r.renewLocalToken(e),this.cloudSetting.setToken(e),n.end())),!0):("string"!=typeof e||c.roomTryHandler?(this.logger.error(U.RTM_RENEWTOKEN+" token must be string and not empty"),this.stateCenter.reporter.setError(n,J.kZMReNewToken.error.INPUT_PARAM)):(this.logger.error(U.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(n,J.kZMReNewToken.error.NOT_LOGIN)),!1):(this.logger.error(U.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(n,J.kZMReNewToken.error.NOT_LOGIN),!1)},Ye.prototype.setCloudSettingURLs=function(e){var t=this;this.logger.info(U.RTM_SET_CLOUD_SETTING_URLS+" call "),Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("http")}))&&this.cloudSetting.init({product:j.product,appID:this.stateCenter.appid,urls:e,env:this.stateCenter.ENV,pollingNotify:function(e,r){t.logger.info(U.RTM_SET_CLOUD_SETTING_URLS," setting file changed "+e+" "+JSON.stringify(r)),t.stateCenter.actionListener("_cloudSettingNotify",e,r)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent})},Ye.prototype.loginRoom=function(e,t,r,o){var i=this;return this.logger.info(U.RTM_LOGIN_ROOM+" call by user "+(null==r?void 0:r.userID)+" "+e+" "+this.version),new Promise((function(a,c){return Ge(i,void 0,void 0,(function(){var i,u,l,d,h,p=this;return Ze(this,(function(f){switch(f.label){case 0:return 1!==this.stateCenter.ENV?[3,2]:[4,new Promise((function(e){wx.getNetworkType({success:function(t){p.stateCenter.networkState="none"===t.networkType?s.offline:s.online,e()},fail:function(t){p.logger.error(U.RTM_CONSTRUCTOR+" network "+JSON.stringify(t)),p.stateCenter.networkState=s.online,e()}})}))];case 1:f.sent(),f.label=2;case 2:return u=this.loginReport(a,c,e,t,o),d=u.interResolve,i=u.interReject,u=u.loginSpan,(o=o||{}).maxMemberCount||(o.maxMemberCount=0),this.netAgent&&(this.stateCenter.idName=r.userID,this.netAgent.setUserInfo(r.userID),this.stateCenter.actionListener("_roomLogin",e,t),this.netAgent.isConnect()&&this.fetchAppConfig(t)),this.cloudSetting.setUserID(r.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),this.stateCenter.onListener("roomLoginResponse",(function(e){p.cloudSettingTimer=setTimeout((function(){clearTimeout(p.cloudSettingTimer),p.getCloudSetting(),p.stateCenter.actionListener("_settingCanFetch")}),100)})),this.stateCenter.reporter.setCommonAttributes({id_name:r.userID}),this.stateCenter.reporter.setReporterInfo(r.userID,t),l=this.getRoomModules(e),h=J.kZMLoginRoom.error,l?(this.logger.setSessionInfo(this.stateCenter.appid,e,"",r.userID,"",this.stateCenter.sdKVersion),i(h.REPEATEDLY_LOGIN)):((l=new fe(e,this.stateCenter,this.logger,this.dataReport,this.service,this,this.liveRoomHandler)).roomTryHandler||(l.roomTryHandler=new te(this.logger,this.stateCenter,l)),l.roomTryHandler.init(this.stateCenter.roomRetryTime),l.roomTryHandler.initRoom(l.roomHandler,e,t,r,this.stateCenter.server,this.stateCenter.serverBak,o),l.roomTryHandler.setLoginRoomCallback(d,i),l.roomHandler.roomStateHandle("CONNECTING",w.Logining,{code:0,msg:""}),(d=function(e,t){var r,o,n=[],i={};for(r in e)i[e[r].order]=e[r],e[r].key=r;for(o in i)n.push(i[o]);for(var s=0;s<n.length;s++)for(var a=n[s].rules,c=0;c<a.length;c++){var u={key:n[s].key,value:n[s].value,action:t.action,logger:t.logger},l=u.value,d=a[c].name?""+a[c].name:"";if((void 0===l&&d===ee.NOT_EMPTY||void 0!==l)&&ne[d]&&(d=ne[d](u.key,l,u.action,u.logger,a[c]))!=oe)return d}return oe}({roomID:{order:0,value:e,rules:[{name:ee.NOT_EMPTY,error:h.ROOM_ID_NULL},{name:ee.TYPE_STRING,error:h.INPUT_PARAM,extMsg:"roomID must be string"},{name:ee.MAX_LENGTH_128,error:h.ROOM_ID_TOO_LONG},{name:ee.ILLEGAL_CHARACTERS,error:h.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:ee.NOT_EMPTY,error:h.INPUT_PARAM},{name:ee.TYPE_STRING,error:h.INPUT_PARAM}]},user:{order:2,value:r,rules:[{name:ee.NOT_EMPTY,error:h.INPUT_PARAM,extMsg:" param user error."},{name:ee.TYPE_OBJECT,error:h.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:r.userID,rules:[{name:ee.NOT_EMPTY,error:h.USER_ID_NULL,extMsg:" param user error."},{name:ee.TYPE_STRING,error:h.INPUT_PARAM,extMsg:" param userID error."},{name:ee.MAX_LENGTH_64,error:h.USER_ID_TOO_LONG},{name:ee.ILLEGAL_CHARACTERS,error:h.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:r.userName,rules:[{name:ee.TYPE_STRING,error:h.INPUT_PARAM,extMsg:" userName must be string."},{name:ee.MAX_LENGTH_256,error:h.USER_NAME_TOO_LONG}]},config:{order:5,value:o,rules:[]},"config.maxMemberCount":{order:6,value:o.maxMemberCount,rules:[{name:ee.TYPE_INTEGER,error:h.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:U.RTM_LOGIN_ROOM,logger:this.logger}))!==oe?(l.roomHandler.roomStateHandle("DISCONNECTED",w.LoginFailed,d.error,d.extMsg),i(d.error,d.extMsg)):(0<this.stateCenter.roomModulesList.length&&1==this.stateCenter.isMultiRoom?l.isMulti=!0:Fe([],this.stateCenter.roomModulesList,!0).forEach((function(e){return e.roomHandler.logout()})),o&&(l.config=o),this.stateCenter.roomModulesList.push(l),this.stateCenter.reporter.setSpanInMap(u,{key:J.kZMLoginRoom.event,par:e}),h=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(h)&&0<h.length&&(this.logger.info(U.RTM_LOGIN_ROOM," setting room_server "+h),this.stateCenter.server=h[0],this.stateCenter.serverBak=h[1]||h[0]),this.stateCenter.setMultiRoom=!0,l.roomTryHandler.startMaxTime(),this.stateCenter.useNetAgent&&!this.netAgent.isConnect()?(this.logger.info(U.RTM_LOGIN_ROOM," us is not connected"),l.roomHandler.setRunState(n.trylogin),this.netAgent.connectUa()):(this.stateCenter.useNetAgent&&(this.stateCenter.networkState=s.online),l.roomTryHandler.active(!0)))),[2]}}))}))}))},Ye.prototype.handleLogUpload=function(){var e=this.stateCenter.appConfig.app_config.domain;e&&(this.stateCenter.logDomain="weblogger".concat(this.stateCenter.appid,"-api.").concat(e),e="",0===this.stateCenter.ENV?(e="wss://".concat(this.stateCenter.logDomain,"/log"),this.reporter.setConfig({serverUrl:"wss://".concat(this.stateCenter.logDomain,"/zglog/tlog")})):e="https://".concat(this.stateCenter.logDomain,"/httplog"),this.logger.setLogServer(e))},Ye.prototype.fetchAppConfig=function(e){return Ge(this,void 0,void 0,(function(){var t,r,o,n,s,a;return Ze(this,(function(c){switch(c.label){case 0:if(this.stateCenter.appConfigFetched)return this.logger.warn(U.RTM_FETCH_APP_CONFIG+" config fetched"),[2];if(!this.getUserID())return this.logger.warn(U.RTM_FETCH_APP_CONFIG+" user not exist"),[2];if(t="",e)t=e;else{if(!(0<this.stateCenter.roomModulesList.length))return this.logger.warn(U.RTM_FETCH_APP_CONFIG+" token not exist"),[2];t=this.getToken()}r=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZegoSDKConfigInit.event),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",t,5e3)];case 2:return n=c.sent(),a=n.code,o=n.data,n=n.retryCount,r.setAttributes({trigger_reason:J.kZegoSDKConfigInit.trigger_reason(this.stateCenter.appConfig?"refresh":"normal"),try_count:J.kZegoSDKConfigInit.try_count(n||0)}),r.end(),this.stateCenter.appConfigFetched=!0,this.logger.info(U.RTM_LOGIN_ROOM+" initConfig code:"+a+" data: "+JSON.stringify(o)),n=o.app_config,a=o.media_config,s=a.publish_config,a=a.play_config,o=o.speedlog_config.charge_info_report_no_playing,this.stateCenter.appConfig={app_config:n,media_config:{publish_config:s,play_config:a},speedlog_config:{charge_info_report_no_playing:o||0}},n=JSON.stringify(this.stateCenter.appConfig),s=x.encryptStores(n,V),localStorage.setItem(G+"_"+this.getAppID()+"_"+(this.stateCenter.mode||Z.modeNo),s),this.handleLogUpload(),this.stateCenter.appConfig||this.stateCenter.actionListener("_appConfigRsp"),[3,4];case 3:return a=c.sent(),this.logger.error(U.RTM_LOGIN_ROOM+" fail "+JSON.stringify(a)),r.setAttributes({error:null==a?void 0:a.code}),r.end(),[20012,20008].includes(null==a?void 0:a.code)&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&e.roomTryHandler.loginFail(R.APPID_INVALID)})),[3,4];case 4:return[2]}}))}))},Ye.prototype.getCloudSetting=function(){var e=this;this.cloudSetting.fetchMultiSetting([z,"room"]).then((function(t){var r,o;e.logger.info(U.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t)),t&&(e.stateCenter.settingConfig.setSetting(null==(t=null==t?void 0:t.init)?void 0:t.setting,["remote_log_level"]),(t=e.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(e.logger.info("".concat(U.RTM_LOGIN_ROOM,"  setting remote_log_level ").concat(t)),e.logger.setRemoteLogLevel(t)),(t=e.stateCenter.settingConfig.getSetting("unify",e.stateCenter.netHasSet))&&(e.logger.info("".concat(U.RTM_LOGIN_ROOM," unify ").concat(JSON.stringify(t))),o=t.enable,t=t.sdk_conn_ver,r=!0,r=!!(o&&t<=Z.connectVer),!0===e.stateCenter.useNetAgent&&!1===r&&(e.cloudSetting.setOptions({unify:!1}),"connecting"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connecting",e.stateCenter.actionListener("_connectChanged","connecting")),o=Fe([],e.stateCenter.roomModulesList,!0),Fe([],e.stateCenter.roomModulesList,!0).forEach((function(e){e.roomHandler.logout(!0,!0)})),e.stateCenter.useNetAgent=r,o.forEach((function(t){var r;e.stateCenter.roomModulesList.push(t),t.roomTryHandler||(t.roomTryHandler=new te(e.logger,e.stateCenter,t)),t.roomTryHandler.init(e.stateCenter.roomRetryTime),t.roomTryHandler.initRoom(t.roomHandler,t.roomID,t.token,{userID:e.stateCenter.idName,userName:e.stateCenter.nickName},e.stateCenter.server,e.stateCenter.serverBak,t.config),null!=(r=t.roomTryHandler)&&r.startMaxTime(),t.roomTryHandler.onactive=function(r,o){r?"connected"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connected",e.stateCenter.actionListener("_connectChanged","connected",{roomID:t.roomID})):t.roomHandler.disconnectedHandle(o)},null!=(r=t.roomTryHandler)&&r.active()})))),(t=e.stateCenter.settingConfig.getSetting("report_script"))&&(r=t.url,o=t.key,t=t.hash,e.logger.info("".concat(U.RTM_LOGIN_ROOM," report script ").concat(r," ").concat(o," ").concat(t)),e.stateCenter.reporter.loadScript(!0,r,o,t)))})).catch((function(t){e.logger.warn(U.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t))})),this.stateCenter.onListener("_cloudSettingNotify",(function(t,r){var o=e.cloudSetting.getEnvVariables(),n=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZMCloudSettingRefresh.event);n.setAttributes({request_kv:J.kZMCloudSettingRefresh.request_kv(o),files:J.kZMCloudSettingRefresh.files([{name:t,content:r.setting,versions:r.versions,code:null==r?void 0:r.code,message:null==r?void 0:r.message}])}),n.end(),t===z&&(e.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting,["remote_log_level"]),(o=e.stateCenter.settingConfig.getSetting("remote_log_level"))&&(e.logger.info(U.RTM_LOGIN_ROOM," setting remote_log_level "+o),e.logger.setRemoteLogLevel(o)))}))},Ye.prototype.cloudReportNotify=function(e,t,r){0!==(null==r?void 0:r.code)||!1===(null==r?void 0:r.polling)?"request_start"===t?this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMCloudSettingRequest.event,par:e+""},J.kZMCloudSettingRequest.event,!0):"request_end"===t&&this.stateCenter.reporter.spanEnd({key:J.kZMCloudSettingRequest.event,par:e+""},{request_detail:J.kZMCloudSettingRequest.request_detail(null==r?void 0:r.reportData),files:J.kZMCloudSettingRequest.files(null==r?void 0:r.files),code:null==r?void 0:r.code,request_params:null==r?void 0:r.params,request_kv:null==r?void 0:r.requestKV}):this.logger.info(U.RTM_CLOUD_REPORT_NOTIFY+" not report")},Ye.prototype.loginReport=function(e,t,r,o,n){var s=this,a=J.kZMLoginRoom,c=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},a.event);return c.setAttributes({svr_env:a.svr_env(this.stateCenter.testEnvironment?"test":"online"),token:a.token(o)}),n&&("boolean"==typeof n.userUpdate&&c.setAttribute("user_state_update",a.user_state_update(n.userUpdate?1:0)),"number"==typeof n.maxMemberCount&&c.setAttributes({max_member_cnt:a.max_member_cnt(n.maxMemberCount)})),{interResolve:function(t){var o=s.getRoomSessionID(r),n=s.getRoomModules(r),i=s.getSessionId(r);c.setAttributes({room_id:a.room_id(r),room_sid_string:a.room_sid_string(o),liveroom_sid_string:a.liveroom_sid_string(i),try_cnt:a.try_cnt(null==(o=null==n?void 0:n.roomTryHandler)?void 0:o.retryActiveCount),server:a.server(null==(i=null==n?void 0:n.roomHandler)?void 0:i.server),room_mode:a.room_mode(s.stateCenter.isMultiRoom?1:0),role:a.role(s.stateCenter.role),audience_create_room:a.audience_create_room(s.stateCenter.roomCreateFlag?1:0),max_member_cnt:a.max_member_cnt((null==n?void 0:n.maxMemberCount)||0)}),c.end(),e(t)},interReject:function(e,o){var n,i;void 0===o&&(o=""),c.setAttributes({room_id:a.room_id(r)}),e.code<2e9&&1e9<e.code||e.code<1e6?(n=x.decodeServerError(e.code,e.msg),i=x.getLiveRoomError(e.code,s.stateCenter.useNetAgent)):n={code:e.code,message:e.msg},n&&s.stateCenter.reporter.setError(c,{code:n.code,msg:n.message+o}),i&&R[i]&&(e.code=R[i].code),e.code&&e.msg&&""!==o?t({code:e.code,msg:e.msg+o}):t(e)},loginSpan:c}},Ye.prototype.logoutRoom=function(e){var t,r=this;this.logger.info(U.RTM_LOGOUT_ROOM+" call by user "+e),void 0===e?(Fe([],this.stateCenter.roomModulesList,!0).forEach((function(e){r.logoutSpan(e),e.roomHandler.logout(!0)})),this.cloudSetting.uninit()):"string"!=typeof e||""==e?(this.logger.error(U.RTM_LOGOUT_ROOM+" roomID must be string and not empty"),this.logoutSpan(void 0,J.kZMLogoutRoom.error.INPUT_PARAM)):(t=this.getRoomModules(e))?(this.logoutSpan(t),t.roomHandler.logout(),0===this.stateCenter.roomModulesList.length&&this.cloudSetting.uninit()):(this.logger.error(U.RTM_LOGOUT_ROOM+" room not exist"),this.logoutSpan(void 0,J.kZMLogoutRoom.error.ROOM_NOT_EXIST,e))},Ye.prototype.loginHall=function(e,t,r){var o=this;return new Promise((function(e,t){return Ge(o,void 0,void 0,(function(){return Ze(this,(function(e){return[2]}))}))}))},Ye.prototype.loginHallReport=function(e,t,r,o){},Ye.prototype.logoutHall=function(){},Ye.prototype.enterRoom=function(e,t){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype.leaveRoom=function(){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype.sendCustomCommand=function(e,t,r){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype._sendCustomCommand=function(e,t,r){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype.sendBroadcastMessage=function(e,t){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype._sendBroadcastMessage=function(e,t,r,o){return void 0===r&&(r=1),void 0===o&&(o=1),new Promise((function(e,t){console.error(C),t()}))},Ye.prototype.setRoomExtraInfo=function(e,t,r){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype._setRoomExtraInfo=function(e,t,r){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype.sendBarrageMessage=function(e,t){return new Promise((function(e,t){console.error(C),t()}))},Ye.prototype._sendBarrageMessage=function(e,t,r,o){return void 0===r&&(r=1),void 0===o&&(o=1),new Promise((function(e,t){console.error(C),t()}))},Ye.prototype.sendRelayMessage=function(e,t,r,o,n){console.error(C)},Ye.prototype.requestJoinLive=function(e,t,r,o,n){return console.error(C),!1},Ye.prototype.inviteJoinLive=function(e,t,r,o,n){return console.error(C),!1},Ye.prototype.endJoinLive=function(e,t,r,o){return console.error(C),!1},Ye.prototype.respondJoinLive=function(e,t,r,o,n){return console.error(C),!1},Ye.prototype.getVersion=function(){return this.version},Ye.prototype.setSdkBizVersion=function(e){"string"==typeof e&&""!==e&&(this.stateCenter.bizVersion=e)},Ye.prototype.on=function(e,t){var r=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMListener.event},{key:""},J.kZMOnListener.event);return r.setAttributes({listener:J.kZMOnListener.listener(e)}),this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(U.RTM_ON+" listener callBack must be funciton"),this.stateCenter.reporter.setError(r,J.kZMOnListener.error.INPUT_PARAM," listener callBack must be function"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),r.end(),!0):(this.logger.error(U.RTM_ON+" event "+e+" no found"),this.stateCenter.reporter.setError(r,J.kZMOnListener.error.INPUT_PARAM," event "+e+" no found"),!1)},Ye.prototype.off=function(e,t){var r=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMListener.event},{key:""},J.kZMOffListener.event);if(r.setAttributes({listener:J.kZMOffListener.listener(e)}),!this.stateCenter.listenerList[e])return this.logger.error(U.RTM_OFF+" listener no found"),this.stateCenter.reporter.setError(r,J.kZMOnListener.error.INPUT_PARAM," event "+e+" no found"),!1;var o=this.stateCenter.listenerList[e];return t?o.splice(o.indexOf(t),1):this.stateCenter.listenerList[e]=[],r.end(),!0},Ye.prototype._on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(U.RTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(U.RTM_ON+" event "+e+" no found"),!1)},Ye.prototype._off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(U.RTM_OFF+" listener no found"),!1;var r=this.stateCenter.listenerList[e];return t?r.splice(r.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},Ye.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},Ye.prototype.isLogin=function(e){return!!(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&e.isLogin()},Ye.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},Ye.prototype.getAppID=function(){return this.stateCenter.appid},Ye.prototype.getUserID=function(){return this.stateCenter.idName},Ye.prototype.getUseNetAgent=function(){return this.stateCenter.useNetAgent},Ye.prototype.getUserName=function(){return this.stateCenter.nickName},Ye.prototype.getToken=function(e){return(this.getRoomModules(e)||this.stateCenter.roomModulesList[0]).token},Ye.prototype.setRoomCreateFlag=function(e){this.stateCenter.roomCreateFlag=e},Ye.prototype.setRole=function(e){this.stateCenter.role=e},Ye.prototype.getSessionId=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.sessionID:"0"},Ye.prototype.getRoomSessionID=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.roomSessionID:"0"},Ye.prototype.getAppConfig=function(){return this.stateCenter.appConfig},Ye.prototype.setAccess=function(e){this.stateCenter.configOK&&(this.stateCenter.netHasSet=!0,this.stateCenter.useNetAgent=e,this.stateCenter.useNetAgent=this.getSettingUnify(!0),this.netAgent.setAccess(this.stateCenter.useNetAgent),this.cloudSetting.setOptions({unify:this.stateCenter.useNetAgent}))},Ye.prototype.enableMultiRoom=function(e){var t=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZegoEnableMultiRoom.event);return"boolean"!=typeof e?(this.logger.error(U.RTM_ENABLE_MULTI_ROOM+" param must be boolean"),this.stateCenter.reporter.setError(t,J.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):(t.setAttribute("is_multi",J.kZegoEnableMultiRoom.is_multi(e)),0<this.stateCenter.roomModulesList.length||this.stateCenter.setMultiRoom?(this.logger.error(U.RTM_ENABLE_MULTI_ROOM+" multi room can only be set once before first login"),this.stateCenter.reporter.setError(t,J.kZegoEnableMultiRoom.error.kInvalidParamError),!1):(t.end(),this.stateCenter.isMultiRoom=e,this.stateCenter.setMultiRoom=!0))},Ye.prototype.getRoomModules=function(e){return this.stateCenter.roomModulesList.find((function(t){return t.roomID==e}))},Ye.use=function(e){switch(e.type){case"message":case"live":e.install(Ye,fe,ye,Ve)}},Ye.prototype.resetRoomTokenTimer=function(e,t){(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&t&&0<t&&e.roomHandler.resetTokenTimer(1e3*t-this.stateCenter.local_time_deviation)},Ye.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Ye.prototype.sendMessage=function(e,t,r,o){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendMessage(e,t,r,o)},Ye.prototype.setProtoFormat=function(e){if(!["json","pb"].includes(e=void 0===e?"json":e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=e},Ye.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.stateCenter.relateService=e)},Ye.prototype.sendMessageByService=function(e,t,r,o,n,i){return this.service.sendMessage(e,t,r,o,n,i)},Ye.prototype.getHeader=function(e){var t,r,o=this.stateCenter.roomModulesList[0];if(o&&o.isLogin())return t=o.roomID,r=o.sessionID,o=o.roomSessionID,this.service.getHeader(e,r,t,o);this.logger.error(U.RTM_GET_HEADER+" room no found or no login")},Ye.prototype.sendPB=function(e){return e instanceof Uint8Array?this.service.sendPB(e):(this.logger.error(U.RTM_SEND_PB+" type error"),!1)},Ye.prototype.onPushBizChannel=function(e){e&&this.service.on("push_biz_channel",e)},Ye.prototype.getRoomID=function(){return this.stateCenter.roomid},Ye.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},Ye.prototype.isUseNetAgent=function(){return this.stateCenter.useNetAgent},Ye.prototype.getReqHead=function(e){return e="string"==typeof e&&""!==e&&this.getRoomModules(e)||this.stateCenter.roomModulesList[0],this.liveRoomHandler.getReqHead(e)},Ye.prototype.sendSwitchMessage=function(e,t){return"string"==typeof e&&t?this.liveRoomHandler.sendMessage(e,t,void 0,void 0,void 0,!1):-1},Ye.prototype.onSwitchMessage=function(e){e&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=e)},Ye.prototype.logoutSpan=function(e,t,r){var o=this,n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMLogoutRoom.event,par:null==e?void 0:e.roomID},J.kZMLogoutRoom.event,!0);n.setAttributes({is_multi:J.kZMLogoutRoom.is_multi(this.stateCenter.isMultiRoom),is_send_cmd_net:J.kZMLogoutRoom.is_send_cmd_net(!0)}),e?n.setAttributes({room_id:J.kZMLogoutRoom.room_id(null==e?void 0:e.roomID),room_sid_string:J.kZMLogoutRoom.room_sid_string(null==e?void 0:e.roomSessionID),liveroom_sid_string:J.kZMLogoutRoom.liveroom_sid_string(null==e?void 0:e.sessionID)}):"string"==typeof r&&n.setAttributes({room_id:J.kZMLogoutRoom.room_id(r)}),t?this.stateCenter.reporter.setError(n,t):n.end(),setTimeout((function(){o.reporter.flush()}),200)},Ye.prototype.getMsgSpan=function(e,t,r){return this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:t},{key:e,par:t},e,r=void 0!==r&&r)},Ye);function Ye(e,t,r,o,n,a,c,u,l){var d,h=this,_=(this.logger=r,this.dataReport=o,this.reporter=n,this.cloudSetting=a,this.version=c,this.options=l,this.stateCenter=new ie(this.logger,this.dataReport),this.stateCenter.ENV=u,this.stateCenter.product=H.product,this.getReportSeq=f,this.getSeq=p,this.initCallback(),this.stateCenter.deviceID=x.generateUUID(u),this.reporter.init(e,u,this.stateCenter.deviceID),this.reporter.setLogger(this.logger),this.stateCenter.reporter=this.reporter,J.kZMInitSetting),g=this.stateCenter.reporter.createSpan(i.H,{key:""},{key:_.event},_.event,!0);if(0!=u&&1!=u||this.setDebug(t),r="Express",null!=(o=this.options)&&o.reportData&&(d=null==(a=null==(n=this.options)?void 0:n.reportData)?void 0:a.version,r=(null==(l=null==(c=this.options)?void 0:c.reportData)?void 0:l.project)||r),g.setAttributes({biz_type:_.biz_type(0),project:_.project(r),servers:_.servers("string"==typeof t?[t]:t),liveroom_version:_.liveroom_version(d),is_from_cache:_.is_from_cache(!1),sev_env:_.sev_env(this.stateCenter.testEnvironment?"test":"online")}),x.checkConfigParam(e,t,this.logger)){this.stateCenter.appid=e,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,this.stateCenter.testEnvironment&&(this.stateCenter.mode=S.MODE_TEST),this.netAgent=new O,this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.logger),this.netAgent.setAppInfo({appID:this.stateCenter.appid,env:this.stateCenter.ENV,mode:this.stateCenter.mode}),this.liveRoomHandler=new Ve(this.logger,this.stateCenter,this.netAgent,this.dataReport,this),this.service=new ye(this.stateCenter,this.logger,this),this.stateCenter.settingConfig=new Se,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({product:j.product,appID:e,urls:j.URL,env:u,pollingNotify:function(e,t){h.logger.info(U.RTM_CONSTRUCTOR," setting file changed "+e+" "+JSON.stringify(t)),h.stateCenter.actionListener("_cloudSettingNotify",e,t)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent}),(o=this.stateCenter.settingConfig.getSetting("remote_log_level"))&&(this.logger.info("".concat(U.RTM_CONSTRUCTOR," setting remote_log_level default ").concat(o)),this.logger.setRemoteLogLevel(o)),n="",0===u?n="rtc":1===u&&(n="xcx"),this.cloudSetting.setEnvVariable("environment",n),a=this.cloudSetting.getSettingCache(z),c=this.cloudSetting.getSettingCache("room");var m=!1,v=setTimeout((function(){h.logger.warn("".concat(U.RTM_CONSTRUCTOR," time out, get cache settings failed!")),h.stateCenter.useNetAgent=!0,m=!0,h.createNetAgent(),h.getStoreAppConfig(),g.setAttributes({use_na:_.use_na(h.stateCenter.useNetAgent?1:0)}),g.end()}),3e3);if(Promise.all([a,c]).then((function(e){v&&clearTimeout(v);var t,r=null==e?void 0:e[0],o=(h.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting),h.stateCenter.useNetAgent=h.getSettingUnify(h.stateCenter.netHasSet),h.cloudSetting.setOptions({unify:h.stateCenter.useNetAgent}),h.stateCenter.useNetAgent&&!m&&(h.createNetAgent(),h.getStoreAppConfig()),(t=h.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(h.logger.info("".concat(U.RTM_CONSTRUCTOR,"  setting remote_log_level ").concat(t)),h.logger.setRemoteLogLevel(t)),(t=h.stateCenter.settingConfig.getSetting("report_script"))?(o=t.url,n=t.key,t=t.hash,h.logger.info("".concat(U.RTM_CONSTRUCTOR," report script ").concat(o," ").concat(n," ").concat(t)),h.stateCenter.reporter.loadScript(!1,o,n,t),g.setAttributes({lua_md5:_.lua_md5(t)})):h.stateCenter.reporter.loadScript(!1,"","",""),null==e?void 0:e[1]),n=(h.stateCenter.settingConfig.setSetting(null==o?void 0:o.setting),h.stateCenter.reporter.createSpan(i.H,{key:_.event},{key:""},J.kZMCloudSettingCache.event));n.setAttributes({files:J.kZMCloudSettingCache.files([{name:z,content:JSON.stringify(null==r?void 0:r.setting),versions:JSON.stringify(null==r?void 0:r.versions),code:0,message:""},{name:"room",content:JSON.stringify(null==o?void 0:o.setting),versions:JSON.stringify(null==o?void 0:o.versions),code:0,message:""}])}),n.end(),g.setAttributes({use_na:_.use_na(h.stateCenter.useNetAgent?1:0)}),g.end()})).catch((function(e){v&&clearTimeout(v),g.setAttributes({use_na:_.use_na(h.stateCenter.useNetAgent?1:0)}),g.end(),h.logger.warn("".concat(U.RTM_CONSTRUCTOR,"  initConfig ").concat(JSON.stringify(e)))})),"string"==typeof t?(this.stateCenter.server=t,this.stateCenter.serverBak=t):Array.isArray(t)&&0<t.length&&(this.stateCenter.server=t[0],this.stateCenter.serverBak=t[1]||t[0]),0==u||2==u)this.bindWindowListener(),this.logger.info("".concat(U.RTM_CONSTRUCTOR,"  ").concat(navigator.appVersion," ").concat(this.version)),this.stateCenter.networkState=!navigator||navigator.onLine?s.online:s.offline,l="Firefox"===x.getBrowser()?null===navigator||void 0===navigator?void 0:navigator.userAgent:null===navigator||void 0===navigator?void 0:navigator.appVersion,g.setAttribute("sys_info",l||""),this.initSpans();else if(1==u||3==u){this.bindWxListener();try{var y=wx.getSystemInfoSync(),b={brand:y.brand,model:y.model,system:y.system,platform:y.platform,version:y.version,SDKVersion:y.SDKVersion};this.logger.warn(U.RTM_CONSTRUCTOR+" "+JSON.stringify(b)),g.setAttribute("mini_sys_infos",b),g.end()}catch(e){this.logger.warn(U.RTM_CONSTRUCTOR+" get system info error")}}this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version)}else this.logger.error("".concat(U.RTM_CONSTRUCTOR," init sdk error")),this.stateCenter.reporter.setError(g,_.error.kInvalidParamError)}var Qe=r(14),Ke=(Je.prototype.setLog=function(e){this.zegoSetting.setLog(e)},Je.prototype.init=function(e){this.zegoSetting.init(e)},Je.prototype.setEnvVariable=function(e,t){this.zegoSetting.setEnvVariable(e,t)},Je.prototype.getEnvVariables=function(){return this.zegoSetting.getEnvVariables()},Je.prototype.fetchSetting=function(e,t,r){return this.zegoSetting.fetchSetting(e,t,r)},Je.prototype.fetchMultiSetting=function(e,t,r){return this.zegoSetting.fetchMultiSetting(e,t,r)},Je.prototype.setOptions=function(e){return this.zegoSetting.setOptions(e)},Je.prototype.getSettingCache=function(e){return this.zegoSetting.getSettingCache(e)},Je.prototype.setToken=function(e){this.zegoSetting.setToken(e)},Je.prototype.setUserID=function(e){this.zegoSetting.setUserID(e)},Je.prototype.activePolling=function(){this.zegoSetting.activePolling()},Je.prototype.uninit=function(){var e;null!=(e=this.zegoSetting)&&e.uninit()},Je.prototype.getEnvVariable=function(e){this.zegoSetting.getEnvVariable(e)},Je);function Je(){this.isLoad=!1,this.callBackList=[],this.zegoSetting=new Qe.ZegoSetting}var Xe=r(9),$e=function(){return($e=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},et=(tt.prototype.init=function(e,t,r){var o=this;this.tracer.init({product:this.product,version:"1.0.0",env:t,appID:e,deviceID:r,importantLevel:H.importLevel,levels:H.levels,bps:H.bps,spanStart:function(e){try{"function"==typeof scriptSpanStart&&scriptSpanStart(o.commonStates,o.tracer,e)}catch(e){o.logger.warn(U.TRACER_INIT+" dy span start ",JSON.stringify(e))}},spanBeforeEnd:function(e){e.setAttribute("ntype_end",x.getNetType())},spanEnd:function(e,t){try{"function"==typeof scriptSpanEnd&&scriptSpanEnd(o.commonStates,o.tracer,e)}catch(e){o.logger.warn(U.TRACER_INIT+" dy span end ",JSON.stringify(e))}},resources:{product:this.product,appid:e,device_id:r,console:0==t?"rtc":"xcx"}})},tt.prototype.setConfig=function(e){this.tracer.setConfig(e)},tt.prototype.loadScript=function(e,t,r,o){return function(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n;return function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,(c=n?[2&c[0],n.value]:c)[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],o=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.tracer.loadJs(e,t,r,o,"\nfunction scriptSpanStart(states, tracer, span) {\n    \n}\nfunction scriptSpanEnd(states, tracer, span) {\n    if (span['tags']['msg_content']) {\n        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;\n        delete span['tags']['msg_content'];\n    }\n    delete span['tags']['resp'];\n    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];\n    if (filterSpans.includes(span.name)) {\n        console.log(span.name + ' do not report');\n        span.droped = true;\n    }\n}\nfunction scriptInit(states, tracer) {\n\n}\n\n",{})];case 1:return i.sent(),"function"==typeof scriptInit&&scriptInit(this.commonStates,this.tracer),[3,3];case 2:return n=i.sent(),this.logger.warn(U.TRACER_LOAD_SCRIPT," load script fail "+JSON.stringify(n)),[3,3];case 3:return[2]}}))}))},tt.prototype.setReporterInfo=function(e,t){var r=new Map;r.set("userID",e),r.set("token",t),this.tracer.startReport(r)},tt.prototype.flush=function(e){this.tracer.flush(e)},tt.prototype.setCommonStates=function(e){this.commonStates=e},tt.prototype.setResource=function(e){this.tracer.setResource(e)},tt.prototype.setCommonAttributes=function(e){this.commonAttrs=Object.assign({},this.commonAttrs,e)},tt.prototype.createSpan=function(e,t,r){return(e=this.tracer.createSpan(e,t,{parent:r})).setAttributes($e({ntype:x.getNetType(),error:0,message:""},this.commonAttrs)),e},tt.prototype.spanEnd=function(e,t){e&&t&&e.setAttributes($e({},t)),e&&e.end()},tt.prototype.spanSetAttributes=function(e,t){e&&e.setAttributes(t)},tt.prototype.spanAppendAttribute=function(e,t,r){e&&e.appendAttribute(t,r)},tt.prototype.setError=function(e,t,r){e.setAttributes({error:t.code||t.errorCode,message:(t.msg||t.message||t.extendedData)+" "+(r=void 0===r?"":r)}),e.end()},tt.prototype.setLogger=function(e){this.tracer.setLogger(e)},tt);function tt(e){this.logger=e,this.product=H.product,this.commonAttrs={},this.commonStates={},new Xe.DynamicCode,this.tracer=new Xe.ZegoTracer,this.tracer.setSampleConfig({level:i.L})}var rt=["/sdk/start_publish","/publish/start","/publish/restart"],ot=["/sdk/start_play","/play/start","/play/restart"],nt=(it.prototype.init=function(e,t,r){this.tracerHandler.init(e,t,r)},it.prototype.setConfig=function(e){this.tracerHandler.setConfig(e)},it.prototype.loadScript=function(e,t,r,o){return this.tracerHandler.loadScript(e,t,r,o)},it.prototype.setReporterInfo=function(e,t){this.tracerHandler.setReporterInfo(e,t)},it.prototype.flush=function(e){this.tracerHandler.flush(e)},it.prototype.setCommonStates=function(e){this.tracerHandler.setCommonStates(e)},it.prototype.setResource=function(e){this.tracerHandler.setResource(e)},it.prototype.setCommonAttributes=function(e){this.tracerHandler.setCommonAttributes(e)},it.prototype.setPublicPros=function(e){this.publicPros=Object.assign({},this.publicPros,e)},it.prototype.createSpan=function(e,t,r,o,n){var i;t&&t.key&&t.par?(s=t.par1?"_"+t.par1:"",!(i=null==(i=this.reportList[t.key])?void 0:i[t.par+s])&&t.bak_key&&(i=null==(a=this.reportList[t.bak_key])?void 0:a[t.par+s])):t&&!(i=this.reportList[t.key])&&t.bak_key&&(i=this.reportList[t.bak_key]),i=i||this.reportList[J.kZMInitSetting.event];var s,a=this.tracerHandler.createSpan(e,o,i);return"/sdk/login"===t.key&&(a.setAttribute("room_id",t.par),this.publicPros[t.par]&&a.setAttributes(this.publicPros[t.par])),(rt.includes(t.key)||ot.includes(t.key))&&a.setAttribute("stream_id",t.par),rt.includes(t.key)&&this.publicPros["_publish_"+t.par]&&a.setAttributes(this.publicPros["_publish_"+t.par]),ot.includes(t.key)&&this.publicPros["_play_"+t.par]&&a.setAttributes(this.publicPros["_play_"+t.par]),n&&(r.par?(this.reportList[r.key]||(this.reportList[r.key]={}),s=r.par1?"_"+r.par1:"",this.reportList[r.key][r.par+s]=a):this.reportList[r.key]=a),a},it.prototype.setSpanInMap=function(e,t){var r;t.par?(this.reportList[t.key]||(this.reportList[t.key]={}),r=t.par2?"_"+t.par2:"",this.reportList[t.key][t.par+r]=e):this.reportList[t.key]=e},it.prototype.spanEnd=function(e,t,r){var o;e.par?(o=e.par1?"_"+e.par1:"",o=this.reportList[e.key]&&this.reportList[e.key][e.par+o],this.reportList[e.key]&&!r&&delete this.reportList[e.key][e.par]):(o=this.reportList[e.key],r||delete this.reportList[e.key]),this.tracerHandler.spanEnd(o,t)},it.prototype.spanSetAttributes=function(e,t){var r,o;e.par?(r=e.par1?"_"+e.par1:"",!(o=this.reportList[e.key]&&this.reportList[e.key][e.par+r])&&e.bak_key&&(o=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+r])):!(o=this.reportList[e.key])&&e.bak_key&&(o=this.reportList[e.key]),this.tracerHandler.spanSetAttributes(o,t)},it.prototype.spanAppendAttribute=function(e,t,r){var o,n;e.par?(o=e.par1?"_"+e.par1:"",!(n=this.reportList[e.key]&&this.reportList[e.key][e.par+o])&&e.bak_key&&(n=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+o])):!(n=this.reportList[e.key])&&e.bak_key&&(n=this.reportList[e.key]),this.tracerHandler.spanAppendAttribute(n,t,r)},it.prototype.setError=function(e,t,r){this.tracerHandler.setError(e,t,r)},it.prototype.setLogger=function(e){this.tracerHandler.setLogger(e)},it);function it(e){this.logger=e,this.reportList={},this.publicPros={},this.tracerHandler=new et(e)}at.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},at.prototype.loginRoom=function(e,t,r,o){return this.zegoWebRTM.loginRoom(e,t,r,o)},at.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},at.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},at.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},at.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},at.prototype.sendCustomCommand=function(e,t,r){return this.zegoWebRTM.sendCustomCommand(e,t,r)},at.prototype.setRoomExtraInfo=function(e,t,r){return this.zegoWebRTM.setRoomExtraInfo(e,t,r)},at.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},at.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},at.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},at.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},at.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},at.prototype.loginHall=function(e,t,r){return this.zegoWebRTM.loginHall(e,t,r)},at.prototype.logoutHall=function(){return this.zegoWebRTM.logoutHall()},at.prototype.enterRoom=function(e,t){return this.zegoWebRTM.enterRoom(e,t)},at.prototype.leaveRoom=function(){return this.zegoWebRTM.leaveRoom()},at.use=function(e){We.use(e)},at.version="1.20.0";var st=at;function at(e,t,r,o){this.logger=new d.ZegoLogger(r=void 0===r?0:r),this.dataReport=new d.ZegoDataReport(this.logger),this.cloudSetting=new Ke,this.reporter=new nt(this.logger),this.zegoWebRTM=new We(e,t,this.logger,this.dataReport,this.reporter,this.cloudSetting,at.version,r,o)}}],o={},t.m=r,t.c=o,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(t){return e[t]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22);function t(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return r[e].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r,o}(r(5459))},5459:function(e,t,r){"use strict";e.exports=r(259)},259:function(e,t,r){"use strict";var o=t;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=r(1513),o.BufferWriter=r(2601),o.Reader=r(8859),o.BufferReader=r(475),o.util=r(9131),o.rpc=r(7126),o.roots=r(8731),o.configure=n,n()},8859:function(e,t,r){"use strict";e.exports=c;var o,n=r(9131),i=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new o(e):u(e)})(e)}:u};function d(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new i(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){o=e,c.create=l(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},475:function(e,t,r){"use strict";e.exports=i;var o=r(8859);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(9131);function i(e){o.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},8731:function(e){"use strict";e.exports={}},7126:function(e,t,r){"use strict";t.Service=r(2925)},2925:function(e,t,r){"use strict";e.exports=n;var o=r(9131);function n(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return o.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(c){return a.emit("error",c,t),void setTimeout((function(){s(c)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},8685:function(e,t,r){"use strict";e.exports=n;var o=r(9131);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"===typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===s?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9131:function(e,t,r){"use strict";var o=t;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)void 0!==e[o[n]]&&r||(e[o[n]]=t[o[n]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(7214),o.base64=r(734),o.EventEmitter=r(7875),o.float=r(249),o.inquire=r(6858),o.utf8=r(248),o.pool=r(7423),o.LongBits=r(8685),o.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),o.global=o.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"===typeof e||e instanceof String},o.isObject=function(e){return e&&"object"===typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"===typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}},1513:function(e,t,r){"use strict";e.exports=d;var o,n=r(9131),i=n.LongBits,s=n.base64,a=n.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(d.create=function(){return new o})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function _(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(_,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=i.from(e);return this._push(_,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(_,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=i.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var m=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){o=e,d.create=h(),o._configure()}},2601:function(e,t,r){"use strict";e.exports=i;var o=r(1513);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(9131);function i(){o.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},6494:function(module){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=436)}([function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return d})),r.d(t,"c",(function(){return h})),r.d(t,"l",(function(){return p})),r.d(t,"m",(function(){return f}));var o,n,i,s,a,c,u,l,d,h,p,f,_=r(35);r.d(t,"i",(function(){return _.a})),r.d(t,"j",(function(){return _.b})),r.d(t,"k",(function(){return _.c})),r.d(t,"n",(function(){return _.d})),r.d(t,"o",(function(){return _.e})),r.d(t,"p",(function(){return _.f})),function(e){e[e.PPT=1]="PPT",e[e.DOC=2]="DOC",e[e.ELS=4]="ELS",e[e.PDF=8]="PDF",e[e.IMG=16]="IMG",e[e.TXT=32]="TXT",e[e.PPTH5=512]="PPTH5",e[e.CUSTOM_H5=4096]="CUSTOM_H5"}(o||(o={})),function(e){e[e.Single=1]="Single",e[e.Multi=2]="Multi",e[e.Other=4]="Other"}(n||(n={})),function(e){e[e.Append=1]="Append",e[e.Update=2]="Update",e[e.Delete=4]="Delete",e[e.Move=8]="Move",e[e.Create=32]="Create"}(i||(i={})),function(e){e[e.Local=0]="Local",e[e.Remote=1]="Remote",e[e.UnReDo=2]="UnReDo",e[e.Reload=3]="Reload"}(s||(s={})),function(e){e[e.Pencil=1]="Pencil",e[e.Text=2]="Text",e[e.Line=4]="Line",e[e.Rect=8]="Rect",e[e.Ellipse=16]="Ellipse",e[e.Laser=128]="Laser",e[e.Image=256]="Image",e[e.BgImage=512]="BgImage",e[e.RealTime=999]="RealTime",e[e.Cursor=1024]="Cursor"}(a||(a={})),function(e){e[e.Pc=1]="Pc",e[e.Mobile=2]="Mobile"}(c||(c={})),function(e){e[e.Init=1]="Init",e[e.Down=2]="Down",e[e.Move=3]="Move",e[e.DownMove=4]="DownMove",e[e.DownMoveUp=5]="DownMoveUp",e[e.DownNoMoveUp=6]="DownNoMoveUp",e[e.Leave=7]="Leave",e[e.DownLeave=8]="DownLeave"}(u||(u={})),function(e){e[e.success=1]="success",e[e.error=2]="error"}(l||(l={})),function(e){e[e.InProgress=1]="InProgress",e[e.Pending=2]="Pending"}(d||(d={})),function(e){e[e.BatchSelete=0]="BatchSelete",e[e.ClearPage=1]="ClearPage",e[e.EraserTool=2]="EraserTool"}(h||(h={})),function(e){e[e.None=0]="None",e[e.Scale=1]="Scale",e[e.Scroll=2]="Scroll"}(p||(p={})),function(e){e[e.None=0]="None",e[e.Append=1]="Append",e[e.Update=2]="Update",e[e.Delete=4]="Delete",e[e.Move=8]="Move",e[e.Clear=16]="Clear",e[e.Create=32]="Create"}(f||(f={}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return f})),r(39),r(25),r(47),r(67),r(37),r(69),r(202),r(55),r(56),r(36),r(344),r(46),r(350),r(352),r(353),r(354),r(355),r(356),r(358),r(359),r(360),r(361),r(362),r(363),r(364),r(53),r(218),r(151),r(105),r(85);var o,n=function(){return(n=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=function(){function e(e,t){this.appid="",this.roomid="",this.userid="",this.token="",this.version="",this.versionAll={},this.platform="",this.extra={},this.isProd=!1,this.isElectron=!1,this.logLevel=3,this.logCacheSend=[],this.logCacheMax=100,this.platform=e||"",this.isElectron=t,this.openLogServer()}return e.prototype.init=function(e){var t=e.appid,r=e.version,o=e.versionAll,n=e.isProd,i=e.liveroom;this.appid=(t||this.appid)+"",this.version=r||this.version,this.versionAll=o,this.isProd=n,i&&!this.platform.includes("liveroom")&&(this.platform+=",liveroom")},e.prototype.initRoom=function(e){var t=e.roomid,r=e.userid,o=e.token,n=e.logLevel;this.roomid=t||this.roomid,this.userid=r||this.userid,this.token=o||this.token,"number"==typeof n&&(this.logLevel=n)},e.prototype.setLogConfig=function(e){"number"==typeof e&&(this.logLevel=e)},e.prototype.setExtraConfig=function(e){Object.assign(this.extra,e)},e.prototype.getConfig=function(){return{appid:+this.appid,roomid:this.roomid,userid:this.userid,token:this.token}},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.log(0,e);if(this.logLevel<=0){var o=console.debug;o(r)}},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.log(1,e);if(this.logLevel<=1){var o=console.info;o(r)}},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.log(2,e);if(this.logLevel<=2){var o=console.warn;o(r)}},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.log(3,e);if(this.logLevel<=3){var o=console.error;o(r)}},e.prototype.writeLocalLog=function(e){},e.prototype.log=function(e,t){var r=this.isProd||this.isElectron?this.logParamList(e,t.join("")):t.join("");return this.isProd&&this.remoteWebSocketLog(e,r),this.isElectron&&this.writeLocalLog(r),r},e.prototype.openLogServer=function(){this.stopWebSocketServer(),this.websocket=new WebSocket("wss://weblogger-edu.zego.im/log")},e.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.close(),this.websocket=null)},e.prototype.remoteWebSocketLog=function(e,t){if(!("string"==typeof t&&t.length>4e3))if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState)this.openLogServer(),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(this.logCacheSend.length>0){for(var r="",o=0;o<this.logCacheSend.length;o++)(r+this.logCacheSend[o]).length>4e3&&(this.websocket.send(r),r=""),r=r+this.logCacheSend[o]+"\n";t=r+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},e.prototype.getVersion=function(e){var t="";return e.indexOf(".sb.")>0?t="SUPER_VER":e.indexOf(".wb.")>0?t="WhiteBoard_VER":e.indexOf(".docs.")>0&&(t="Docs_VER"),t in this.versionAll?this.versionAll[t]:this.version},e.prototype.logParamList=function(e,t){var r=new Date,o=r.toLocaleString()+"."+r.getMilliseconds(),i=t.indexOf(" "),s=t.substr(0,i)||t,a=t.substr(i+1,4500),c=n(n({time:o,level:e,action:s=""+u+s,content:a,appid:this.appid,userid:this.userid,roomid:this.roomid},this.extra),{version:this.getVersion(s),platform:this.platform,sdk_type:"wb"});return JSON.stringify(c)},e}(),s=function(e,t,r){var o=!(!e||!e.versions.electron);return{electron:o,platform:(o?e.platform:t)+","+r[r.length-2]+","+r[r.length-1]}}(window.process,navigator.platform,navigator.userAgent.split(" ")),a=s.electron,c=s.platform,u=a?"ec.":"web.",l=window.zegoLogger||(window.zegoLogger=new i(c,a)),d=function(){return(d=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};!function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(o||(o={}));var h=function(){function e(){}return e.prototype.setDebugVerbose=function(e){},e.prototype.upload=function(e){return Promise.resolve({code:0})},e.prototype.write=function(e,t,r,o){return!0},e.prototype.supportDrivers=function(){return{IndexedDB:!0,webSQL:!0,localStorage:!0}},e.prototype.setHeaderInfo=function(e){},e.prototype.setConfig=function(e){},e.prototype.setCommonField=function(e){return!0},e.prototype.setLogLevel=function(){return!0},e}(),p=function(){function e(t,r,o){if(this.uploadConfig={appID:0,userID:"",token:"",product:"",uploadURL:"",deviceID:""},this.header={version:{},appID:"",userID:"",device:""},this.appID="",this.roomID="",this.userID="",this.token="",this.isTestEnv=!0,this.logLevel=3,this.version="",this.platform="",this.extra={},this.doc_env="",this.wb_env="",this.domain="imzego.com",e.instance)return e.instance;e.env=t,this.product=r,this.logger=new h,this.logger.setDebugVerbose(!1),e.instance=this}return e.getInstance=function(){return window.zegoAddonLogger||(window.zegoAddonLogger=new e(e.env,e.product))},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.setDocEnv=function(e){this.doc_env=e},e.prototype.setWBEnv=function(e){this.wb_env=e},e.prototype.updateDocToken=function(e){this.token=e,this.uploadConfig.token=e},e.prototype.setDomain=function(e){this.domain=e},e.prototype.setLogConfig=function(e){switch(e.logLevel){case"debug":this.logLevel=0;break;case"info":this.logLevel=1;break;case"warn":this.logLevel=2;break;case"error":this.logLevel=3;break;case"report":this.logLevel=99;break;case"disable":this.logLevel=100}return l.setLogConfig(this.logLevel),this.logger.setLogLevel(e.logLevel||"info")},e.prototype.uploadLog=function(){return this.upload(this.uploadConfig,this.product)},e.prototype.generateUUID=function(){var e=localStorage.getItem("z_deviceID");if(e)return e;var t=(new Date).getTime(),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(36)}));return localStorage.setItem("z_deviceID",r),r},e.prototype.getConfig=function(){return{appID:+this.appID,roomID:this.roomID,userID:this.userID,token:this.token,docEnv:this.doc_env,wbEnv:this.wb_env}},e.prototype.upload=function(e,t){return this.logger.upload(d(d({},e),{appID:e.appID+"",product:t}))},e.prototype.report=function(e,t,r){this.logger.write(e,"report",t,this.formatContent(r))},e.prototype.debug=function(e,t,r){this.logger.write(e,"debug",t,this.formatContent(r)),l.debug(e+"_"+t+" ",r)},e.prototype.debug1=function(e,t){var r="string"==typeof t?t:JSON.stringify(t);this.logger.write([e],"debug",e,this.formatContent(r)),l.debug(e+" ",r)},e.prototype.info=function(e,t,r){this.logger.write(e,"info",t,this.formatContent(r)),l.info(e+"_"+t+" ",r)},e.prototype.info1=function(e,t){var r="string"==typeof t?t:JSON.stringify(t);this.logger.write([e],"info",e,this.formatContent(r)),l.info(e+" ",r)},e.prototype.warn=function(e,t,r){this.logger.write(e,"warn",t,this.formatContent(r)),l.warn(e+"_"+t+" ",r)},e.prototype.warn1=function(e,t){var r="string"==typeof t?t:JSON.stringify(t);this.logger.write([e],"warn",e,this.formatContent(r)),l.warn(e+" ",r)},e.prototype.error=function(e,t,r){this.logger.write(e,"error",t,this.formatContent(r)),l.error(e+"_"+t+" ",r),this.uploadLog()},e.prototype.error1=function(e,t){var r="string"==typeof t?t:JSON.stringify(t);this.logger.write([e],"error",e,this.formatContent(r)),l.error(e+" ",r),this.uploadLog()},e.prototype.supportDrivers=function(){return this.logger.supportDrivers()},e.prototype.setConfig=function(e){return this.logger.setConfig(e)},e.prototype.formatContent=function(e){return e?String(e).replace(/\"/g,"'"):""},e.prototype.updateLoggerHeader=function(e){Object.assign(this.header.version,e),this.logger.setHeaderInfo(this.formatContent(JSON.stringify(this.header)))},e.prototype.initInfo=function(e){var t=e.appID,r=e.version,o=e.isTestEnv,n=(e.isProd,e.liveroom);this.isTestEnv=o,this.appID=(t||this.appID)+"",this.version=r||this.version,n&&!this.platform.includes("liveroom")&&(this.platform+=",liveroom"),l.init({appid:t,version:r,versionAll:this.header.version,isProd:!0,liveroom:n})},e.prototype.initRoomInfo=function(e){var t=e.roomID,r=e.userID,o=e.token,n=e.logLevel;this.roomID=t||this.roomID,this.userID=r||this.userID,this.token=o||this.token,"number"==typeof n&&(this.logLevel=n),l.initRoom({roomid:this.roomID,userid:this.userID,token:this.token,logLevel:n})},e.prototype.setUploadConfig=function(e){var t=e.token,r=e.appID,o=e.userID;e.server,t&&(this.uploadConfig={appID:r,userID:o,token:t,product:this.product,uploadURL:this.isTestEnv?"https://detaillog-test."+this.domain+"/zglog/zip":"https://detaillog"+r+"-api."+this.domain+"/zglog/zip",deviceID:this.generateUUID()})},e.prototype.setLoggerHeader=function(e,t){var r=navigator.userAgent,o=e.appID,n=e.userID;this.header.appID=o,this.header.userID=n,this.header.device=r,Object.assign(this.header.version,t),this.logger.setHeaderInfo(this.formatContent(JSON.stringify(this.header))),this.logger.setCommonField(new Map([["userID",n]]))},e}(),f=function(e,t,r,o,n){if(void 0===n&&(n=!1),window.zegoAddonLogger){var i=localStorage.getItem("ZEGO_SDK_VER");if(i){var s=Object.assign(JSON.parse(i),o);p.getInstance().updateLoggerHeader(s)}}else window.zegoAddonLogger=new p(e,r+"_"+t.appID,n),p.getInstance().supportDrivers().IndexedDB||p.getInstance().setConfig({maxSize:1,maxFiles:3}),localStorage.setItem("ZEGO_SDK_VER",JSON.stringify(o)),p.getInstance().initInfo({appID:t.appID,version:Object.values(o)[0],isTestEnv:t.isTestEnv}),p.getInstance().setLoggerHeader(t,o)}},function(e,t,r){"use strict";var o,n,i,s,a;r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a})),function(e){e.Init="sb.v.l.init",e.SetCustomizedConfig="sb.v.l.set_conf",e.GetCustomizedConfig="sb.v.l.get_conf",e.OnError="sb.v.l.on_error",e.EnableSuperBoardView="sb.v.l.sb_enable",e.GetSuperBoardSubView="sb.v.l.sb_get",e.AttachSuperBoardSubView="sb.v.l.sb_attach",e.CreateWhiteboardView="sb.v.l.wb_create",e.API_CreateWhiteboardView="sb.v.l.wb_create",e.API_CreateFileView="sb.v.l.create_file",e.OnCreateView="sb.v.l.on_create",e.GetDocsViewFileInfo="sb.v.l.get_docs_file",e.API_DestroySuperBoardSubView="sb.v.l.sb_destroy",e.CurrentActivitedView="sb.v.l.cur_activited",e.API_querySuperBoardSubViewModelList="sb.v.l.sb_query_model",e.API_ClearCach="sb.v.l.clear_cach",e.API_ClearCasetDeferredRenderingTimech="sb.v.l.clear_cach_render",e.API_EnableSyncScale="sb.v.l.sync_scale",e.API_EnableResponseScale="sb.v.l.res_scale",e.API_EnableHandwriting="sb.v.l.handwriting",e.API_EnableCustomCursor="sb.v.l.custom_cursor",e.API_EnableRemoteCursorVisible="sb.v.r.cursor_visible",e.API_EnableCustomCursor_Param="sb.v.l.cursor_visible",e.API_SetToolType="sb.v.l.set_tool_type",e.API_GetToolType="sb.v.l.get_tool_type",e.API_GetToolType_FontBold="sb.v.l.toolType_FontBold",e.API_GetBrushSize="sb.v.l.get_brush_size",e.API_SetBrushSize="sb.v.l.set_brush_size",e.API_GetFontSize="sb.v.l.get_font_size",e.API_IsFontItalic="sb.v.l.font_italic",e.API_SetFontSize="sb.v.l.set_font_size",e.API_SetFontBold="sb.v.l.set_font_bold",e.API_SetFontItalic="sb.v.l.set_font_italic",e.API_SetBrushColor="sb.v.l.set_brush_color",e.API_GetBrushColor="sb.v.l.get_brush_color",e.API_SetWhiteboardBackgroundColor="sb.v.l.wb_set_bgc",e.API_IsHandwritingEnabled="sb.v.l.handwriting_enabled",e.API_GetBackgroundColor="sb.v.l.get_bgc",e.API_UploadFile="sb.v.l.up_load_file",e.API_CancelUploadFile="sb.v.l.cancel_up_load_file",e.API_UploadH5File="sb.v.l.up_load_file_h5",e.API_CacheFile="sb.v.l.cache_file",e.CreateAndAttachFileView="sb.v.l.create_file",e.CreateExcelRestFileView="sb.v.l.create_excel_file",e.StopVideo="sb.v.l.stop_video",e.RemoteSubViewAdd="sb.v.r.rem.add_view",e.OnSyncSwitchViewEvent="sb.v.l.on_switch_event",e.OnSyncSwitchViewEvent_Error="sb.v.l.on_switch_event.r",e.OnRemoteSwitchViewEvent="sb.v.r.on_switch_event",e.SwitchView="sb.v.l.switch_view",e.SwitchView_LoadFile="sb.v.l.switch_view_loadFile",e.OnRemoteModAddEvent="sb.v.r.on_add_event",e.RemoteSubViewRemoved="sb.v.r.removed_view",e.API_getSuperBoardView="sb.v.l.getSuperBoardView",e.API_getPageCount="sb.v.l.getPageCount",e.API_getCurrentPage="sb.v.l.getCurrentPage",e.API_getCurrentStep="sb.v.l.getCurrentStep",e.API_getVisibleSize="sb.v.l.getVisibleSize",e.API_flipToPage="sb.v.l.flipToPage",e.FlipToPage="sb.v.l.flipToPage",e.API_flipToPrePage="sb.v.l.flipToPrePage",e.API_flipToNextPage="sb.v.l.flipToNextPage",e.API_switchSpeaker="sb.v.l.switchSpeaker",e.API_preStep="sb.v.l.preStep",e.API_nextStep="sb.v.l.nextStep",e.API_addText="sb.v.l.addText",e.API_addImage="sb.v.l.addImage",e.API_setBackgroundImage="sb.v.l.setBackgroundImage",e.API_clearBackgroundImage="sb.v.l.clearBackgroundImage",e.API_clearAllPage="sb.v.l.clearAllPage",e.API_clearCurrentPage="sb.v.l.clearCurrentPage",e.API_clearSelected="sb.v.l.clearSelected",e.API_undo="sb.v.l.undo",e.API_redo="sb.v.l.redo",e.API_setScaleFactor="sb.v.l.setScaleFactor",e.API_getScaleFactor="sb.v.l.getScaleFactor",e.API_setOperationMode="sb.v.l.setOperationMode",e.API_snapshot="sb.v.l.snapshot",e.API_reloadView="sb.v.l.reloadView",e.API_getCurrentSheetName="sb.v.l.getCurrentSheetName",e.API_getExcelSheetNameList="sb.v.l.getExcelSheetNameList",e.API_getThumbnailUrlList="sb.v.l.getThumbnailUrlList",e.API_getPPTNotes="sb.v.l.getPPTNotes",e.API_stopPlayPPTVideo="sb.v.l.stopPlayPPTVideo",e.SetParentDomID="sb.v.l.SetParentDomID",e.GetParentDomID="sb.v.l.GetParentDomID",e.SetCurrentSuperBoardSubView="sb.v.l.GetParentDomID",e.API_getCurrentSuperBoardSubView="sb.v.l.getCurrentSuperBoardSubView",e.API_switchSuperBoardSubView="sb.v.l.switchSuperBoardSubView"}(o||(o={})),function(e){e.Update_File_Info="wb.v.l.update_file",e.Remote_Add="wb.v.r.add",e.Remote_Removed="wb.v.r.removed",e.Remote_Scroll="wb.v.r.scroll",e.Remote_Scale="wb.v.r.scale",e.Remote_Extra="wb.v.r.extra",e.Update_File_Info_Set="wb.v.l.update_file_set",e.API_Clear="wb.v.l.clear",e.API_GetViewList="wb.v.l.get_list",e.API_GetViewList_Catch="wb.v.l.get_list_catch",e.API_CreateView_Check="wb.v.l.create_check",e.API_CreateView="wb.v.l.create",e.API_CreateView_Success="wb.v.l.create_success",e.API_CreateView_Error="wb.v.l.create_error",e.API_DestroyView="wb.v.l.destroy",e.API_DestroyView_Success="wb.v.l.destroy_success",e.API_DestroyView_Error="wb.v.l.destroy_error",e.API_AttachView_Check_Parent="wb.v.l.attach_check",e.API_AttachView_Null="wb.v.l.attach_null",e.API_AttachView="wb.v.l.attach",e.API_AttachView_Success="wb.v.l.attach.success",e.API_AttachView_Error="wb.v.l.attach.error",e.API_EnableHandwriting="wb.v.l.handwriting",e.API_EnableHandwriting_Success="wb.v.l.handwriting.success",e.API_EnableCustomCursor="wb.v.l.custom_cursor",e.API_EnableRemoteCursorVisible="wb.v.r.custom_cursor",e.SetCursorImage="wb.v.l.cursor_image",e.API_SetCustomCursorAttribute="wb.v.l.cursor_attribute",e.API_SwitchView="wb.v.l.switch",e.LoginRoom="wb.v.l.login_room",e.API_logoutRoom="wb.v.l.login_room",e.API_renewToken="wb.v.l.renewToken",e.Cursor_MousemoveHandle="wb.v.l.cursor_move",e.Cursor_AddCursorHandle="wb.v.l.cursor_add",e.Cursor_DrawGraphicsHandle="wb.v.l.cursor_draw",e.Cursor_drawGraphicsHandle_hidden="wb.v.l.cursor_draw_hidden",e.Cursor_DrawGraphicsHandle_Create="wb.v.l.cursor_draw_create",e.Laser_MouseleaveHandle="wb.v.l.laser_leave",e.Laser_LaserHiddenHandle="wb.v.l.laser_hidden",e.Laser_DrawGraphicsHandle="wb.v.l.laser_draw",e.Laser_PushActualPlaceHandle="wb.v.l.laser_push_place",e.Selector_InitSelectBox="wb.v.l.selector_box",e.Selector_MousedownHandle="wb.v.l.selector_mousedown",e.Selector_MouseupHandle="wb.v.l.selector_mouseup",e.TextArea_UpdateToRemoteHandle="wb.v.r.textArea_update",e.TextArea_AddTextGraphics="wb.v.l.text_area_add",e.TextArea_FocusHandle="wb.v.l.text_area_focus",e.TextArea_BackUpdateGraphicsHandle="wb.v.l.textArea_backUpdate",e.Gra_remote_draw_realtime_timeout="wb.v.r.draw_timeout",e.Gra_remote_draw_realtime_deleted="wb.v.r.draw_deleted",e.Gra_remote_draw_realtime_end="wb.v.r.draw_end",e.Tool_bindEventsHandle="wb.v.l.tool_event",e.Gra_draw_local="wb.v.l.draw",e.Gra_Remote_draw="wb.v.r.draw",e.Gra_Remote_draw_realtime_end="wb.v.r.draw_end",e.Gra_DeleteSelectedGraphics="wb.v.l.del_select_graph",e.SetBackgroundImage="wb.v.l.set_bg_img",e.HandleDragStart="wb.v.l.dragStart",e.DragPage="wb.v.l.dragPage",e.Zegoeventdocs="wb.v.l.eventdocs",e.ReloadViewLayou="wb.v.l.reloadLayou",e.Init="wb.v.l.init",e.Destroy_dom="wb.v.l.destroy_dom",e.Clear_canvas="wb.v.l.clearCanvas",e.ClearEvent="wb.v.l.clearEvent",e.API_clear="wb.v.l.clear",e.Clear_cb="wb.v.l.clear_cb",e.Scroll="wb.v.l.scroll",e.API_getCurrentScrollPercent="wb.v.l.getCurrentScrollPercent",e.API_getHorizontalPercent="wb.v.l.getHorizontalPercent",e.API_getVerticalPercent="wb.v.l.getVerticalPercent",e.API_undo="wb.v.l.undo",e.API_redo="wb.v.l.redo",e.API_getAspectRatio="wb.v.l.getAspectRatio",e.API_getFileInfo="wb.v.l.getFileInfo",e.API_getCurrentPage="wb.v.l.get_cur_page",e.API_getPageCount="wb.v.l.get_bg_img",e.API_setBackgroundImage="wb.v.l.set_bg_img",e.API_clearBackgroundImage="wb.v.l.clear_bg_img",e.API_setToolType="wb.v.l.setToolType",e.API_getToolType="wb.v.l.getToolType",e.API_setBrushColor="wb.v.l.setBrushColor",e.API_getBrushColor="wb.v.l.getBrushColor",e.API_setBrushSize="wb.v.l.setBrushSize",e.API_getBrushSize="wb.v.l.getBrushSize",e.API_setFontSize="wb.v.l.setFontSize",e.API_getFontSize="wb.v.l.getFontSize",e.API_setTextSize="wb.v.l.setTextSize",e.API_setFontBold="wb.v.l.setFontBold",e.API_isFontBold="wb.v.l.isFontBold",e.API_setFontItalic="wb.v.l.setFontItalic",e.API_getFontItalic="wb.v.l.getFontItalic",e.API_setBackgroundColor="wb.v.l.set_bgc",e.API_getBackgroundColor="wb.v.l.get_bgc",e.API_setScaleFactor="wb.v.l.setScaleFactor",e.API_getScaleFactor="wb.v.l.getScaleFactor",e.API_getScaleOffsetX="wb.v.l.getScaleOffsetX",e.API_getScaleOffsetY="wb.v.l.getScaleOffsetY",e.API_clearCurrentPage="wb.v.l.clear_cur_page",e.API_deleteSelectedGraphics="wb.v.l.del_select_gra",e.API_addText="wb.v.l.addText",e.API_addImage="wb.v.l.addImage",e.API_setWhiteboardOperationMode="wb.v.l.set_operationMode",e.API_snapshot="wb.v.l.snapshot",e.API_reloadView="wb.v.l.reloadView",e.API_getVisibleSize="wb.v.l.getVisibleSize"}(n||(n={})),function(e){e.Graph_update_seq="wb.s.l.graph_update",e.Mod_clear_cb="wb.s.l.mod_clear_cb",e.Graph_update_seq_remote="wb.s.r.graph_update",e.Graph_draw_cb="wb.s.l.graph_draw_cb",e.Graph_draw_limit="wb.s.l.graph_draw_limit",e.RoomStateUpdate="wb.s.l.room_state_update",e.New="wb.s.l.new",e.Socket_Response="wb.s.l.scoket_res",e.SendPbMessage="wb.s.l.send_msg",e.Socket_Req="wb.s.l.scoket_req",e.SendSwitchMessage="wb.s.l.send_switch_msg",e.Socket_Req_Catch="wb.s.l.req_catch",e.Socket_Push="wb.s.l.scoket_push",e.Module_update_task_list="wb.s.l.update_task_list",e.Module_set_mod_cb="wb.s.l.set_mod_cb",e.Module_set_mod_cb_tasks="wb.s.l.set_mod_cb_tasks",e.Module_set_mod_cb_push_map="wb.s.l.set_mod_cb_push_map",e.Module_set_mod_cb_cache="wb.s.l.set_mod_cb_cache",e.Module_trans="wb.s.l.module_trans",e.Module_update_h_percent="wb.s.l.update_h_percent",e.Module_update_v_percent="wb.s.l.update_v_percent",e.Module_update_step="wb.s.l.update_step",e.Module_update_name="wb.s.l.update_name",e.Module_update_h5extra="wb.s.l.update_h5extra",e.Module_update_scale="wb.s.l.update_scale",e.Module_update_content="wb.s.l.update_content",e.Module_split_page="wb.s.l.split_page",e.Module_remote="wb.s.r.module_remote",e.Module_update_seq="wb.s.l.update_seq",e.Module_delete_graphic="wb.s.l.delete_graphic",e.Module_remote_draw="wb.s.r.draw",e.Module_remote_add="wb.s.r.add",e.Module_remote_modify="wb.s.r.modify",e.Module_clear_pull_mark="wb.s.l.clear_pull_mark",e.Module_compare="wb.s.l.compare",e.Module_destroy_cb="wb.s.l.destroy_cb",e.Module_create_cb="wb.s.l.create_cb",e.Module_get_info_cb="wb.s.l.get_info_cb",e.Module_get_list_cb="wb.s.l.get_list_cb",e.Get_room_auth_cb="wb.s.l.room_auth_cb",e.Get_user_auth_cb="wb.s.l.user_auth_cb",e.Module_get_list_sync="wb.s.l.get_list_sync",e.Module_sync_room_user_auth_cb="wb.s.l.sync_room_user_auth_cb",e.Module_get_list="wb.s.l.get_list",e.Module_append_extra_origin="wb.s.l.append_extra_origin",e.Module_append_extra_new="wb.s.l.append_extra_new",e.Module_scroll_origin="wb.s.l.scroll_origin",e.Module_scroll_new="wb.s.l.scroll_new",e.Module_scale_origin="wb.s.l.scale_origin",e.Module_scale_new="wb.s.l.scale_new",e.Module_load_by_percent="wb.s.l.load_by_percent",e.Reload_graphics="wb.s.l.reload_gra",e.Unload="wb.s.l.unload",e.Module_set_view_size="wb.s.l.set_view_size",e.Module_set_viewpoart_size="wb.s.l.set_viewpoart_size",e.Module_get_h5extra="wb.s.l.get_h5extra",e.Module_switch_view_origin="wb.s.l.switch_view_origin",e.Module_switch_view_new="wb.s.l.switch_view_new",e.Module_switch_view_remote="wb.s.r.switch_view"}(i||(i={})),function(e){e.Cloud_setting="docs.s.l.cloud_setting",e.GetAccesshubConfig="docs.s.l.getAccesshubConfig",e.Load_error="docs.s.l.load_error",e.CreateView="docs.s.l.createView",e.ResolveLoad="docs.s.l.resolveLoad",e.GetSpeakers="docs.s.l.getSpeakers",e.Preload_performance="docs.s.l.preload_performance",e.GetFileType="docs.s.l.getFileType",e.Preload_quest_changeCDN_error="docs.s.l.changeCDN_error",e.Preload_quest_changeCDN_timeout="docs.s.l.changeCDN_timeout",e.Preload_quest_changeCDN_loadend="docs.s.l.changeCDN_loadend",e.Preload_quest_changeCDN_readystate="docs.s.l.changeCDN_readystate",e.Preload_quest_error="docs.s.l.quest_error",e.Preload_quest_timeout="docs.s.l.quest_timeout",e.Preload_quest_loadend="docs.s.l.quest_loadend",e.Preload_quest_readystate="docs.s.l.quest_readystate",e.Preload_onreadystate_error="docs.s.l.onreadystate_error",e.SwitchOrigin="docs.s.l.switchOrigin",e.RequestProgress="docs.s.l.requestProgress",e.RequestBefore="docs.s.l.requestBefore",e.Request_Retry_RequestProgress="docs.s.l.retry_requestProgress",e.Disconnected="docs.s.l.disconnected",e.SetAccesshubConfig="docs.s.l.setAccesshubConfig",e.WaitHttpInit="docs.s.l.waitHttpInit",e.AccesshubInit="docs.s.l.accesshubInit",e.Accesshub_dispatchResultUpdate="docs.s.l.Accesshub_update",e.Accesshub_disconnected="docs.s.l.accesshub_disconnected",e.Accesshub_connected="docs.s.l.accesshub_connected",e.Accesshub_broken="docs.s.l.accesshub_broken",e.StartHttpRequest_start="docs.s.l.start_http",e.StartHttpRequest_end="docs.s.l.end_http",e.StartHttpRequest="docs.s.l.start_http",e.GetAppConfigByAgent="docs.s.l.getAppConfigByAgent",e.RenewToken="docs.s.l.renewToken",e.ResetTokenTimer="docs.s.l.resetTokenTimer",e.Init="docs.s.l.init",e.New="docs.s.l.new",e.GetDomain="docs.s.l.getDomain",e.IsInvalidDomain="docs.s.l.isInvalidDomain",e.UpdateOriginList="docs.s.l.updateOriginList",e.API_setConfig="docs.s.l.setConfig",e.API_getConfig="docs.s.l.getConfig",e.DecryptImage="docs.s.l.decryptImage",e.API_uploadH5File="docs.s.l.uploadH5File",e.UploadH5File="docs.s.l.uploadH5File",e.API_uploadFile="docs.s.l.uploadFile",e.UploadFile="docs.s.l.uploadFile",e.API_loadFile="docs.s.l.loadFile",e.LoadFile="docs.s.l.loadFile",e.API_cacheFile="docs.s.l.cacheFile",e.CacheFile="docs.s.l.cacheFile",e.API_cancelUploadFile="docs.s.l.cancelUploadFile",e.CancelUploadFile="docs.s.l.cancelUploadFile",e.Preload_iframe_retry="docs.s.l.preload_iframe_retry",e.UploadProgressInit="docs.s.l.uploadProgressInit",e.UploadProgressCvt="docs.s.l.uploadProgressCvt",e.CheckRenderTypeHandle="docs.s.l.checkRenderTypeHandle",e.CheckSizeHandle="docs.s.l.checkSizeHandle",e.UploadProgress="docs.s.l.UploadProgress",e.UploadProgress_query="docs.s.l.uploadProgress_query",e.UploadProgress_status="docs.s.l.uploadProgress_status",e.QueryStatus="docs.s.l.queryStatus",e.CreateCvtDoc="docs.s.l.createCvtDoc"}(s||(s={})),function(e){e.Preload_iframe_postMsg="docs.v.l.preload_iframe_postMsg",e.Preload_iframe_load_error="docs.v.l.preload_iframe_load_error",e.Preload_iframe_retry_cdn="docs.v.l.preload_iframe_retry_cdn",e.Preload_iframe_load="docs.v.l.preload_iframe_load",e.Preload_iframe_error="docs.v.l.preload_iframe_error",e.Preload_quest_error="docs.v.l.preload_quest_error",e.SetParentWidthHeight="docs.v.l.setParentWidthHeight",e.SetDocsViewDomOverflow="docs.v.l.setDocsViewDomOverflow",e.Draw_error="docs.v.l.draw_error",e.Draw_img_cdn="docs.v.l.draw_img_cdn",e.Draw_img_error="docs.v.l.draw_img_error",e.Draw_pdf_cdn="docs.v.l.draw_pdf_cdn",e.Draw_ppt_cdn="docs.v.l.draw_ppt_cdn",e.Draw_h5_cdn="docs.v.l.draw_h5_cdn",e.Draw_h5_cdn_retry="docs.v.l.draw_h5_cdn_retry",e.Draw_h5_error="docs.v.l.draw_h5_error",e.Draw_ppt="docs.v.l.draw_ppt",e.Draw_pdf="docs.v.l.Draw_pdf",e.Draw_pdf_cache_aspec="docs.v.l.draw_pdf_cache_aspec.o",e.Draw_pdf_no_cache_aspec="docs.v.l.draw_pdf_no_cache_aspec.o",e.ReloadView_safari="docs.v.l.reloadView_safari",e.ReleaseCanvas="docs.v.l.releaseCanvas",e.Draw_img_scale="docs.v.l.draw_img_scale",e.Draw_img_full="docs.v.l.draw_img_full",e.UpdateDocsViewLayout="docs.v.l.updateDocsViewLayout",e.Pdf_diff_canvas="docs.v.l.pdf_diff_canvas",e.Draw_cache="docs.v.l.draw_cache",e.Draw_scrolled="docs.v.l.draw_scrolled",e.LoadFileCallback="docs.v.l.loadFileCallback",e.ReloadViewCallback="docs.v.l.reloadViewCallback",e.ReloadViewLayou="docs.v.l.reloadViewLayou",e.PostStepChangeMessage="docs.v.l.postStepChangeMessage",e.Emit_StepChange="docs.v.l.emit_StepChange",e.Emit_Error="docs.v.l.emit_Error",e.Emit_Scroll="docs.v.l.emit_Scroll",e.Zegoeventwb="docs.v.l.zegoeventwb",e.Zegoeventwb_page="docs.v.l.zegoeventwb_page",e.H5_init_timeout="docs.v.l.h5_init_timeout",e.H5_iframe="docs.v.l.h5_iframe",e.DidLoadFinish="docs.v.l.didLoadFinish",e.H5_init_page="docs.v.l.h5_init_page",e.SetDynamicPPTH5Speaker="docs.v.l.setDynamicPPTH5Speaker",e.API_switchSpeaker="docs.v.l.switchSpeaker",e.H5_step="docs.v.l.h5_step",e.H5_queue_done="docs.v.l.h5_queue_done",e.RunGotoPageQueue="docs.v.l.runGotoPageQueue",e.H5_wbqueue_push="docs.v.l.h5_wbqueue_push",e.H5_wbqueue_init="docs.v.l.h5_wbqueue_init",e.H5_wbqueue_pop="docs.v.l.h5_wbqueue_pop",e.ExecMultiDocsQueue="docs.v.l.execMultiDocsQueue",e.H5_mdqueue_pop="docs.v.l.H5_mdqueue_pop",e.H5_queue_timeout="docs.v.l.h5_queue_timeout",e.GotoPage="docs.v.l.gotoPage",e.Addtional_draw="docs.v.l.addtional_draw",e.API_unloadFile="docs.v.l.unloadFile",e.API_getContentSize="docs.v.l.getContentSize",e.API_getVisibleSize="docs.v.l.getVisibleSize",e.API_getFileID="docs.v.l.getFileID",e.API_getFileType="docs.v.l.getFileType",e.API_getCurrentPage="docs.v.l.getCurrentPage",e.API_getCurrentStep="docs.v.l.getCurrentStep",e.API_getPageCount="docs.v.l.getPageCount",e.API_getPPTNotes="docs.v.l.getPPTNotes",e.API_getThumbnailUrlList="docs.v.l.getThumbnailUrlList",e.API_getVerticalPercent="docs.v.l.getVerticalPercent",e.API_scrollTo="docs.v.l.scrollTo",e.API_flipPage="docs.v.l.flipPage",e.H5_mdqueue_push="docs.v.l.h5_mdqueue_push",e.API_previousStep="docs.v.l.previousStep",e.API_nextStep="docs.v.l.nextStep",e.API_switchSheet="docs.v.l.switchSheet",e.API_setScaleFactor="docs.v.l.setScaleFactor",e.API_playAnimation="docs.v.l.playAnimation",e.API_stopPlay="docs.v.l.stopPlay",e.API_setVolume="docs.v.l.setVolume",e.API_reloadView="docs.v.l.reloadView"}(a||(a={}))},function(e,t,r){"use strict";var o,n,i,s,a,c,u,l;r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"h",(function(){return l})),function(e){e.UnloadVideoSrc="unloadVideoSrc",e.DisableH5ImageDrag="disableH5ImageDrag",e.PptStepMode="pptStepMode",e.ThumbnailMode="thumbnailMode",e.Domain="domain",e.DisableH5Mouse="disableH5Mouse"}(o||(o={})),function(e){e[e.ZegoDocsViewSuccess=0]="ZegoDocsViewSuccess",e[e.ZegoDocsViewErrorInternal=2000001]="ZegoDocsViewErrorInternal",e[e.ZegoDocsViewErrorParamInvalid=2000002]="ZegoDocsViewErrorParamInvalid",e[e.ZegoDocsViewErrorNetworkTimeout=2000003]="ZegoDocsViewErrorNetworkTimeout",e[e.ZegoDocsViewErrorRequestFailure=2000004]="ZegoDocsViewErrorRequestFailure",e[e.ZegoDocsViewErrorFileNotExist=2010001]="ZegoDocsViewErrorFileNotExist",e[e.ZegoDocsViewErrorUploadFailed=2010002]="ZegoDocsViewErrorUploadFailed",e[e.ZegoDocsViewErrorUnsupportRenderType=2010003]="ZegoDocsViewErrorUnsupportRenderType",e[e.ZegoDocsViewErrorFileEncrypt=2020001]="ZegoDocsViewErrorFileEncrypt",e[e.ZegoDocsViewErrorFileSizeLimit=2020002]="ZegoDocsViewErrorFileSizeLimit",e[e.ZegoDocsViewErrorFileSheetLimit=2020003]="ZegoDocsViewErrorFileSheetLimit",e[e.ZegoDocsViewErrorConvertFail=2020004]="ZegoDocsViewErrorConvertFail",e[e.ZegoDocsViewErrorConvertCancel=2020005]="ZegoDocsViewErrorConvertCancel",e[e.ZegoDocsViewErrorFileContentEmpty=2020006]="ZegoDocsViewErrorFileContentEmpty",e[e.ZegoDocsViewErrorFileReadOnly=2020007]="ZegoDocsViewErrorFileReadOnly",e[e.ZegoDocsViewErrorConvertElementNotSupported=2020008]="ZegoDocsViewErrorConvertElementNotSupported",e[e.ZegoDocsViewErrorConvertFileTypeInvalid=2020009]="ZegoDocsViewErrorConvertFileTypeInvalid",e[e.ZegoDocsViewErrorConvertFileUnsafe=2020010]="ZegoDocsViewErrorConvertFileUnsafe",e[e.ZegoDocsViewErrorConvertElementNotExported=2020011]="ZegoDocsViewErrorConvertElementNotExported",e[e.ZegoDocsViewErrorAuthParamInvalid=2030001]="ZegoDocsViewErrorAuthParamInvalid",e[e.ZegoDocsViewErrorFilePathNotAccess=2030002]="ZegoDocsViewErrorFilePathNotAccess",e[e.ZegoDocsViewErrorInitFailed=2030003]="ZegoDocsViewErrorInitFailed",e[e.ZegoDocsViewErrorSizeInvalid=2030004]="ZegoDocsViewErrorSizeInvalid",e[e.ZegoDocsViewErrorFreeSpaceLimit=2030005]="ZegoDocsViewErrorFreeSpaceLimit",e[e.ZegoDocsViewErrorUploadNotSupported=2030006]="ZegoDocsViewErrorUploadNotSupported",e[e.ZegoDocsViewErrorUploadDuplicated=2030007]="ZegoDocsViewErrorUploadDuplicated",e[e.ZegoDocsViewErrorEmptyDomain=2030008]="ZegoDocsViewErrorEmptyDomain",e[e.ZegoDocsViewErrorHaveInit=2030009]="ZegoDocsViewErrorHaveInit",e[e.ZegoDocsViewErrorServerFileNotExist=2030010]="ZegoDocsViewErrorServerFileNotExist",e[e.ZegoDocsViewErrorCacheNotSupported=2030014]="ZegoDocsViewErrorCacheNotSupported",e[e.ZegoDocsViewErrorCacheFailed=2030015]="ZegoDocsViewErrorCacheFailed",e[e.ZegoDocsViewErrorZipFileInvalid=2030016]="ZegoDocsViewErrorZipFileInvalid",e[e.ZegoDocsViewErrorH5FileInvalid=2030017]="ZegoDocsViewErrorH5FileInvalid",e[e.ZegoDocsViewErrorFileCorruption=2030018]="ZegoDocsViewErrorFileCorruption",e[e.ZegoDocsViewErrorFileContentIncomplete=2030019]="ZegoDocsViewErrorFileContentIncomplete",e[e.ZegoDocsViewErrorTokenInvalid=2030020]="ZegoDocsViewErrorTokenInvalid",e[e.ZegoDocsViewErrorGetContextFail=2030021]="ZegoDocsViewErrorGetContextFail",e[e.ZegoDocsViewErrorDrawImageFail=2030022]="ZegoDocsViewErrorDrawImageFail",e[e.ZegoDocsViewErrorSwitchSpeakerFail=2030023]="ZegoDocsViewErrorSwitchSpeakerFail"}(n||(n={})),function(e){e[e.ZegoDocsViewFileTypeUnknown=0]="ZegoDocsViewFileTypeUnknown",e[e.ZegoDocsViewFileTypePPT=1]="ZegoDocsViewFileTypePPT",e[e.ZegoDocsViewFileTypeDOC=2]="ZegoDocsViewFileTypeDOC",e[e.ZegoDocsViewFileTypeELS=4]="ZegoDocsViewFileTypeELS",e[e.ZegoDocsViewFileTypePDF=8]="ZegoDocsViewFileTypePDF",e[e.ZegoDocsViewFileTypeIMG=16]="ZegoDocsViewFileTypeIMG",e[e.ZegoDocsViewFileTypeTXT=32]="ZegoDocsViewFileTypeTXT",e[e.ZegoDocsViewFileTypeDynamicPPTH5=512]="ZegoDocsViewFileTypeDynamicPPTH5",e[e.ZegoDocsViewFileTypeAudio=1024]="ZegoDocsViewFileTypeAudio",e[e.ZegoDocsViewFileTypeVideo=2048]="ZegoDocsViewFileTypeVideo",e[e.ZegoDocsViewFileTypeCustomH5=4096]="ZegoDocsViewFileTypeCustomH5"}(i||(i={})),function(e){e[e.ZegoDocsViewRenderTypeVector=1]="ZegoDocsViewRenderTypeVector",e[e.ZegoDocsViewRenderTypeIMG=2]="ZegoDocsViewRenderTypeIMG",e[e.ZegoDocsViewRenderTypeVectorAndIMG=3]="ZegoDocsViewRenderTypeVectorAndIMG",e[e.ZegoDocsViewRenderTypeDynamicPPTH5=6]="ZegoDocsViewRenderTypeDynamicPPTH5"}(s||(s={})),function(e){e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.WAITING=4]="WAITING",e[e.CONVERTING=8]="CONVERTING",e[e.CONVERTED=16]="CONVERTED",e[e.CONVERT_FAIL=32]="CONVERT_FAIL",e[e.CONVERT_CANCEL=64]="CONVERT_CANCEL"}(a||(a={})),function(e){e[e.Caching=1]="Caching",e[e.Cached=2]="Cached"}(c||(c={})),function(e){e[e.PNG=1]="PNG",e[e.SVG=2]="SVG"}(u||(u={})),function(e){e[e.Current=1]="Current",e[e.All=2]="All"}(l||(l={}))},function(e,t,r){"use strict";var o,n,i,s,a;r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return a})),r(105),r(123),r(49),r(25),r(50),function(e){e.Upload="onUpload",e.LoadFile="onLoadFile",e.StepChange="onStepChange",e.Scroll="onScroll",e.PlayAnimation="onPlayAnimation",e.TokenWillExpire="onTokenWillExpire"}(o||(o={})),function(e){e.LoadFinish="loaFinish"}(n||(n={})),function(e){e.Error="error",e.ViewAdd="viewAdd",e.ViewRemoved="viewRemoved",e.ViewScroll="viewScroll",e.ViewScale="viewScale",e.WhiteboardAuthChange="whiteboardAuthChange",e.WhiteboardGraphicAuthChange="whiteboardGraphicAuthChange"}(i||(i={})),function(e){e.PushAddMod="pushAddMod",e.PushRemovedMod="pushRemovedMod",e.PushDrawPageGraphics="pushDrawPageGraphics",e.PushClearPageGraphics="pushClearPageGraphics",e.PushScroll="pushScroll",e.PushScale="pushScale",e.PushH5ExtraAppended="pushH5ExtraAppended",e.PushAuthChange="pushAuthChange",e.RemoteDelMod="remoteDelMod",e.GetPageGraphicsList="getPageGraphicsList",e.AppendH5Extra="appendH5Extra",e.Scroll="scroll",e.Scale="scale",e.RoomConnected="roomConnected",e.RoomDisConnected="roomDisConnected",e.AttachedView="attachedView",e.SuperRoomConnected="SuperRoomConnected",e.SuperRoomDisConnected="SuperRoomDisConnected",e.SuperDocsLogoutRoom="SuperDocsLogoutRoom",e.AccesshubConnected="accesshubConnected",e.DirectConnected="directConnected"}(s||(s={})),function(e){e.SubViewScrollChanged="superBoardSubViewScrollChanged",e.SubViewScaleChanged="superBoardSubViewScaleChanged",e.RemoteSubViewAdd="remoteSuperBoardSubViewAdded",e.RemoteSubViewRemoved="remoteSuperBoardSubViewRemoved",e.RemoteSubViewSwitched="remoteSuperBoardSubViewSwitched",e.RemoteSubViewExcelSwitched="remoteSuperBoardSubViewExcelSwitched",e.RemoteAuthChange="remoteSuperBoardAuthChanged",e.RemoteGraphicAuthChange="remoteSuperBoardGraphicAuthChanged",e.SyncSwitchMod="syncSwitchMod",e.RemoteSwitchMod="remoteSwitchMod",e.RemoteModAdd="remoteModAdd",e.RemoteModRemoved="remoteModRemoved",e.SyncSwitchModWithWhiteboardID="SyncSwitchModWithWhiteboardID"}(a||(a={}));var c=function(){function e(){var e;this.listeners=((e={})[i.Error]=[],e[o.LoadFile]=[],e[o.Upload]=[],e[o.Scroll]=[],e[o.StepChange]=[],e[o.PlayAnimation]=[],e[o.TokenWillExpire]=[],e[n.LoadFinish]=[],e[s.PushAddMod]=[],e[s.PushRemovedMod]=[],e[s.PushDrawPageGraphics]=[],e[s.PushClearPageGraphics]=[],e[s.PushScroll]=[],e[s.PushScale]=[],e[s.PushH5ExtraAppended]=[],e[s.PushAuthChange]=[],e[s.GetPageGraphicsList]=[],e[s.AppendH5Extra]=[],e[s.Scroll]=[],e[s.Scale]=[],e[s.RoomConnected]=[],e[s.RoomDisConnected]=[],e[s.AttachedView]=[],e[s.SuperRoomConnected]=[],e[s.SuperRoomDisConnected]=[],e[s.RemoteDelMod]=[],e[s.SuperDocsLogoutRoom]=[],e[i.ViewAdd]=[],e[i.ViewRemoved]=[],e[i.ViewScroll]=[],e[i.ViewScale]=[],e[i.WhiteboardAuthChange]=[],e[i.WhiteboardGraphicAuthChange]=[],e[a.RemoteSubViewAdd]=[],e[a.RemoteSubViewRemoved]=[],e[a.RemoteSubViewSwitched]=[],e[a.RemoteSubViewExcelSwitched]=[],e[a.RemoteAuthChange]=[],e[a.RemoteGraphicAuthChange]=[],e[a.SyncSwitchMod]=[],e[a.SyncSwitchModWithWhiteboardID]=[],e[a.RemoteSwitchMod]=[],e[a.RemoteModAdd]=[],e[a.RemoteModRemoved]=[],e[a.SubViewScrollChanged]=[],e[a.SubViewScaleChanged]=[],e[s.AccesshubConnected]=[],e[s.DirectConnected]=[],e)}return e.prototype.on=function(e,t){var r=[s.RoomDisConnected,s.DirectConnected,s.AccesshubConnected];return!!this.listeners[e]&&"function"==typeof t&&(-1!==r.indexOf(e)?-1==this.listeners[e].indexOf(t)&&this.listeners[e].push(t):this.listeners[e][0]=t,!0)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e];return t?r.splice(r.indexOf(t),1):this.listeners[e]=[],!0},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.listeners[e]&&this.listeners[e].forEach((function(e){e.apply(void 0,t)}))},e}();t.f=new c},function(e,t,r){"use strict";var o=r(0),n="ontouchstart"in window||navigator.maxTouchPoints>0;t.a={reservedPrefix:{whiteboardZoom:"zego-whiteboard-zoom",fileWhiteboardCon:"zego-docsview-con",whiteboardCon:"zego-whiteboard-con",whiteboard:"zego-whiteboard",laserContainer:"zego-other-container",graphicsBgContainer:"zego-graphics-bg-container",graphicsBgImageContainer:"zego-graphics-bgImage-container",graphicsContainer:"zego-graphics-container",graphicsSvg:"zego-svg",textareaCon:"zego-textarea",laserCon:"zego-laser",cursorCon:"zego-cursor",graphics:"zego-graphics",boxContainer:"zego-box-container",graphicsBox:"zego-graphics-box"},basicState:{type:o.k.ZegoWhiteboardViewToolPen,size:6,fontSize:24,color:"#f54326",bgColor:"rgb(241, 243, 244)",attributes:'{"bold": false, "italic": false, "stroke": false}'},basicExtraState:{drawSize:0,drawFontSize:0,customImage:{url:"",w:80,h:80},defaultFileBgColor:"rgb(255, 255, 255, 0)"},realTimeState:{localDrawCount:10,remoteDrawDelay:4,remoteDrawCount:2,remoteDrawEndDelay:1e4},customCursor:{enable:!1,remoteVisible:!0,type:o.i.pen,attributes:'{"url": "", "pox_x": 0, "pox_y": 0 }'},scaleModes:{sync:!1,response:!1},handWritingFactor:{step:.016,max_speed:1.2,min_speed:.05,max_width_factor:1.2,min_width_factor:.5,last_size:0,lastX:0,lastY:0},svgPath:{tops:[],bottoms:[]},isTouch:n,boxPadding:0,textareaBoxPadding:24,textareaHPadding:0,textareaVPadding:0,textareaConBorderWidth:1,lineHeight:1,boxBorderWidth:2,selectedBorderCss:"2px solid #b0b3b8",unSelectedBorderCss:"2px solid transparent",maxlength:200,scrollbarSize:20,initLaserX:0,initLaserY:0,hiddenLaserX:-100,hiddenLaserY:-100,hiddenLaserDelay:5e3,mouseEvents:{down:"mousedown",move:"mousemove",up:"mouseup",leave:"mouseleave",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",mouseleave:"touchcancel"},calStandard:{sizeWidth:1280,placeWidth:128e4,minFontSize:n?1:12,maxFontSize:100,minLineWidth:1,maxLineWidth:100}}},function(e,t,r){var o=r(11),n=r(76).f,i=r(51),s=r(24),a=r(158),c=r(192),u=r(125);e.exports=function(e,t){var r,l,d,h,p,f=e.target,_=e.global,g=e.stat;if(r=_?o:g?o[f]||a(f,{}):(o[f]||{}).prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(p=n(r,l))&&p.value:r[l],!u(_?l:f+(g?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&i(h,"sham",!0),s(r,l,h,e)}}},function(e,t,r){var o=r(98),n=Function.prototype,i=n.bind,s=n.call,a=o&&i.bind(s,s);e.exports=o?function(e){return e&&a(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";r.d(t,"l",(function(){return M})),r.d(t,"d",(function(){return m})),r.d(t,"o",(function(){return y})),r.d(t,"g",(function(){return b})),r.d(t,"c",(function(){return S})),r.d(t,"m",(function(){return T})),r.d(t,"p",(function(){return C})),r.d(t,"e",(function(){return I})),r.d(t,"q",(function(){return O})),r.d(t,"r",(function(){return k})),r.d(t,"a",(function(){return R})),r.d(t,"b",(function(){return A})),r.d(t,"h",(function(){return P})),r.d(t,"i",(function(){return L})),r.d(t,"u",(function(){return N})),r.d(t,"t",(function(){return D})),r.d(t,"s",(function(){return x})),r.d(t,"f",(function(){return v})),r.d(t,"n",(function(){return w})),r.d(t,"j",(function(){return B})),r.d(t,"k",(function(){return U})),r(94),r(105),r(151),r(208),r(49),r(25),r(50),r(37),r(85),r(121),r(408),r(69),r(410),r(67),r(202),r(412),r(210);var o,n=new Uint8Array(16);function i(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(n)}for(var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&s.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l=function(e,t,r){var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=o[n];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(r))throw TypeError("Stringified UUID is invalid");return r}(o)},d=r(398),h=r.n(d),p=r(378),f=r.n(p),_=r(5),g=r(0),m=function(){return""+f()(l())},v=function(){var e=Math.sqrt(Math.sqrt(+f()(l())))*Math.random()|0;return e>99?.3*e|0:e<3?e+10*Math.random()|0:e},y=function(e){if(e){var t=e.parentNode;t?t.removeChild(e):e.remove?e.remove():e.removeNode()}},b=function(e){return e.children||e.childNodes},S=function(e,t,r,o){var n,i=_.a.calStandard,s=i.sizeWidth,a=i.minFontSize,c=i.minLineWidth;return o?n=Math.round(e*s/r):(n=Math.round(r*e/s),g.f.Text===t?n<a&&(n=a):n<c&&(n=c)),n},E=function(e){var t=e[0],r=e[1],o=e[2],n=e[3];return[Math.min(t,o||t),Math.min(r,n||r)]},T=function(e,t){var r;switch(e){case g.f.Pencil:r=function(e){for(var t=e.length,r=.1,o=t-4,n="M"+e[0]+", "+e[1],i=0;i<t-2;i+=2){var s=i?e[i-2]:e[0],a=i?e[i-1]:e[1],c=e[i+0],u=e[i+1],l=e[i+2],d=e[i+3],h=i!==o?e[i+4]:l,p=i!==o?e[i+5]:d;n+=" C"+(Number(c)+(l-s)/6*r)+","+(Number(u)+(d-a)/6*r)+","+(Number(l)-(h-c)/6*r)+","+(Number(d)-(p-u)/6*r)+","+l+","+d}return n}(t);break;case g.f.Line:r={x1:t[0],y1:t[1],x2:t[2]||t[0],y2:t[3]||t[1]};break;case g.f.Rect:var o=Math.abs((t[2]||t[0])-t[0])||1,n=Math.abs((t[3]||t[1])-t[1])||1,i=E(t);r={x:i[0],y:i[1],width:o,height:n};break;case g.f.Ellipse:var s=Math.abs((t[2]||t[0])-t[0])/2||.5,a=Math.abs((t[3]||t[1])-t[1])/2||.5,c=E(t);r={cx:c[0]+s,cy:c[1]+a,rx:s,ry:a};break;default:r=""}return r},w=function(e,t,r){var o=1,n=_.a.handWritingFactor,i=n.step,s=n.max_width_factor,a=n.min_width_factor,c=n.max_speed,u=n.min_speed,l=_.a.handWritingFactor,d=l.lastX,h=l.lastY,p=e.data,f=p.length,g=!0;_.a.svgPath.tops=[],_.a.svgPath.bottoms=[];for(var m={tx1:0,ty1:0,tx2:0,ty2:0,bx1:0,by1:0,bx2:0,by2:0,mtx1:0,mty1:0,mbx1:0,mby1:0},v=2;v<f;v+=2){2===v&&(d=p[0],h=p[1]);var y=d,b=h,S=p[v]-y,E=p[v+1]-b,T=Math.sqrt(Math.pow(S,2)+Math.pow(E,2));if(!(T<r/1280*3*2.5)){if(o++,v===f-2&&2==o)return;var w=T*i;w>c&&(w=c),w<u&&(w=u);var C,I,O=s*t,k=a*t,R=(O-k)*(1-w/c)+k;if(R>O&&(R=O),R<k&&(R=k),C=R/2*E/T,I=R/2*S/T,m.tx1=d+C,m.ty1=h-I,m.tx2=p[v]+C,m.ty2=p[v+1]-I,m.bx1=d-C,m.by1=h+I,m.bx2=p[v]-C,m.by2=p[v+1]+I,g&&(m.tx1=d,m.ty1=h,m.bx1=d,m.by1=h),m.mtx1=(m.tx1+m.tx2)/2,m.mty1=(m.ty1+m.ty2)/2,m.mbx1=(m.bx1+m.bx2)/2,m.mby1=(m.by1+m.by2)/2,g)_.a.svgPath.tops.push("M"+d+" "+h+" L"+m.mtx1+" "+m.mty1),_.a.svgPath.bottoms.unshift("Q"+m.bx2+" "+m.by2+" "+m.mbx1+" "+m.mby1+" L"+d+" "+h);else if(_.a.svgPath.tops.join("").indexOf("M")<0&&_.a.svgPath.tops.push("M"+m.mtx1+" "+m.mty1),v===f-2){var A=p[f-2],P=p[f-1];w===u?_.a.svgPath.tops.push("Q"+A+" "+P+" "+A+" "+P):_.a.svgPath.tops.push("Q"+m.tx1+" "+m.ty1+" "+A+" "+P)}else _.a.svgPath.tops.push("Q"+m.tx1+" "+m.ty1+" "+m.mtx1+" "+m.mty1),_.a.svgPath.bottoms.unshift("Q"+m.bx2+" "+m.by2+" "+m.mbx1+" "+m.mby1);d=p[v],h=p[v+1],g=!1}}return _.a.svgPath.tops.concat(_.a.svgPath.bottoms).join(" ")},C=function(e,t){t.forEach((function(t){e.setAttribute(t.attr,t.value)}))},I=function(e,t,r,o){var n,i=document.querySelector("#"+e);if(i)return o&&i.setAttribute("data-z",o+""),[n=i.querySelector("#"+t)];i=document.createElementNS("http://www.w3.org/2000/svg","svg");var s=document.createElementNS("http://www.w3.org/2000/svg","g");return n=document.createElementNS("http://www.w3.org/2000/svg",r),i.id=e,i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("version","1.1"),o&&i.setAttribute("data-z",o+""),n.id=t,s.appendChild(n),i.appendChild(s),[n,i]},O=function(e,t){void 0===t&&(t=1);var r=[],o=[];return e.forEach((function(e,t,r){t%2==0&&o.push({x:e,y:r[t+1]})})),h()(o,t).forEach((function(e){r=r.concat([e.x,e.y])})),r},k=function(e){var t=e.split(",");return{beginX:t[0],beginY:t[1],text:t.slice(2).join(",")}},R=function(e,t,r){return parseInt(t)+","+parseInt(r)+","+e},A=function(e,t){t.forEach((function(t){e.addEventListener(t,(function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}))}))},P=function(e){var t=0,r=0;if(e)for(t+=e.offsetTop,r+=e.offsetLeft;e.offsetParent;)t+=e.offsetParent.offsetTop,r+=e.offsetParent.offsetLeft,e=e.offsetParent;return{offsetTop:t,offsetLeft:r}},L=function(e){var t=0,r=0;if(e)for(t+=e.scrollTop,r+=e.scrollLeft;e.parentNode;)t+=e.parentNode.scrollTop||0,r+=e.parentNode.scrollLeft||0,e=e.parentNode;return{scrollTop:t,scrollLeft:r}},N=function(e,t){var r=e.length>1?g.b.Multi:g.b.Single,o=JSON.parse(JSON.stringify(e));return o.forEach((function(e){e.action_type=r,t&&(e.action=t),delete e.selected,delete e.fontSize,delete e.bgColor})),o},D=function(e,t){return t?e?"#"+(e=e.toString(16)).slice(2).padStart(6,"0"):_.a.basicState.color:(e=function(e){if(0===e.indexOf("#"))return e;var t=e.replace(/rgba?/,"").replace(/\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),r=parseFloat(t[3]||"1"),o=Math.floor(r*parseInt(t[0])+255*(1-r)),n=Math.floor(r*parseInt(t[1])+255*(1-r)),i=Math.floor(r*parseInt(t[2])+255*(1-r));return"#"+("0"+o.toString(16)).slice(-2)+("0"+n.toString(16)).slice(-2)+("0"+i.toString(16)).slice(-2)}(e),parseInt("0xFF"+e.split("#")[1]))},M=function(e){return"number"==typeof e&&!isNaN(e)},x=function(e){for(var t=e.length,r=.1,o=t-4,n=[e[0],e[1]],i=[],s=0;s<t-2;s+=2){var a=s?e[s-2]:e[0],c=s?e[s-1]:e[1],u=e[s+0],l=e[s+1],d=e[s+2],h=e[s+3],p=s!==o?e[s+4]:d,f=s!==o?e[s+5]:h,_=Number(u)+(d-a)/6*r,g=Number(l)+(h-c)/6*r,m=Number(d)-(p-u)/6*r,v=Number(h)-(f-l)/6*r;i.push([_,g,m,v,d,h])}return{moveTo:n,path:i}},B=function(e){var t=e.type,r=e.attributes;return(t==g.f.Pencil||t==g.f.RealTime)&&JSON.parse(r||_.a.basicState.attributes).stroke},U=function(){return!!window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return u})),r(55);var o,n=r(4),i=r(0),s=((o={})[i.j.ZegoWhiteboardViewErrorInternal]="\u5185\u90e8\u9519\u8bef",o[i.j.ZegoWhiteboardViewErrorParamInvalid]="\u53c2\u6570\u9519\u8bef",o[i.j.ZegoWhiteboardViewErrorNetworkTimeout]="\u7f51\u7edc\u8d85\u65f6",o[i.j.ZegoWhiteboardViewErrorNetworkDisconnect]="\u7f51\u7edc\u65ad\u5f00",o[i.j.ZegoWhiteboardViewErrorInvalidRsp]="\u7f51\u7edc\u56de\u5305\u9519\u8bef",o[i.j.ZegoWhiteboardViewErrorRequestTooMany]="\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41",o[i.j.ZegoWhiteboardViewErrorNoLoginRoom]="\u672a\u767b\u5f55\u623f\u95f4",o[i.j.ZegoWhiteboardViewErrorUserNotExist]="\u7528\u6237\u4e0d\u5b58\u5728",o[i.j.ZegoWhiteboardViewErrorTokenInvalid]="Token authentication failed",o[i.j.ZegoWhiteboardViewErrorViewNotExist]="\u767d\u677fview\u4e0d\u5b58\u5728",o[i.j.ZegoWhiteboardViewErrorViewCreateFail]="\u521b\u5efa\u767d\u677fview\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorViewModifyFail]="\u4fee\u6539\u767d\u677fview\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorViewNameLimit]="\u767d\u677fview\u540d\u79f0\u6216\u8005content\u8fc7\u957f",o[i.j.ZegoWhiteboardViewErrorViewParentNotExist]="\u767d\u677fview\u7684parent\u4e0d\u5b58\u5728",o[i.j.ZegoWhiteboardViewErrorViewNumLimit]="\u8d85\u8fc7\u767d\u677f\u6700\u5927\u6570\u91cf\u9650\u5236",o[i.j.ZegoWhiteboardViewErrorGraphicNotExist]="\u56fe\u5143\u4e0d\u5b58\u5728",o[i.j.ZegoWhiteboardViewErrorGraphicCreateFail]="\u521b\u5efa\u56fe\u5143\u9519\u8bef",o[i.j.ZegoWhiteboardViewErrorGraphicModifyFail]="\u4fee\u6539\u56fe\u5143\u9519\u8bef",o[i.j.ZegoWhiteboardViewErrorGraphicUnableDraw]="\u672a\u5f00\u542f\u7ed8\u5236",o[i.j.ZegoWhiteboardViewErrorGraphicDataLimit]="\u56fe\u5143\u6570\u636e\u5927\u5c0f\u8d85\u8fc7\u9650\u5236",o[i.j.ZegoWhiteboardViewErrorGraphicNumLimit]="\u8d85\u8fc7\u56fe\u5143\u6700\u5927\u6570\u91cf\u9650\u5236",o[i.j.ZegoWhiteboardViewErrorGraphicTextLimit]="\u6587\u672c\u5b57\u6570\u8d85\u8fc7\u4e0a\u9650",o[i.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit]="\u56fe\u7247\u56fe\u5143\u5927\u5c0f\u8d85\u9650\u5236",o[i.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport]="\u4e0d\u652f\u6301\u7684\u56fe\u7247\u7c7b\u578b",o[i.j.ZegoWhiteboardViewErrorGraphicIllegalUrl]="\u65e0\u6548\u56fe\u7247\u5730\u5740",o[i.j.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit]="\u5149\u6807\u8bbe\u7f6e\u504f\u79fb\u503c\u8d85\u51fa\u9650\u5236",o[i.j.ZegoWhiteboardViewErrorInitFail]="\u521d\u59cb\u5316\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorGetListFail]="\u62c9\u53d6\u767d\u677fview\u5217\u8868\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorCreateFail]="\u521b\u5efa\u767d\u677fview\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorDestroyFail]="\u9500\u6bc1\u767d\u677fview\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorAttachFail]="attach\u767d\u677fview\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorClearFail]="\u6e05\u7a7a\u767d\u677fview\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorScrollFail]="\u6eda\u52a8\u767d\u677fview\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorUndoFail]="\u64a4\u9500\u64cd\u4f5c\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorRedoFail]="\u91cd\u505a\u64cd\u4f5c\u5931\u8d25",o[i.j.ZegoWhiteboardViewErrorLogFolderNotAccess]="\u65e5\u5fd7\u76ee\u5f55\u65e0\u6cd5\u521b\u5efa\u6216\u5199\u5165",o[i.j.ZegoWhiteboardViewErrorCacheFolderNotAccess]="\u7f13\u76ee\u5f55\u5f84\u65e0\u6cd5\u521b\u5efa\u6216\u5199\u5165",o[i.j.ZegoWhiteboardViewErrorNoAuthScale]="\u65e0\u767d\u677f\u7f29\u653e\u6743\u9650",o[i.j.ZegoWhiteboardViewErrorNoAuthScroll]="\u65e0\u767d\u677f\u6eda\u52a8\u6743\u9650",o[i.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic]="\u65e0\u56fe\u5143\u521b\u5efa\u6743\u9650",o[i.j.ZegoWhiteboardViewErrorNoAuthUpdateGraphic]="\u65e0\u56fe\u5143\u7f16\u8f91\u6743\u9650",o[i.j.ZegoWhiteboardViewErrorNoAuthMoveGraphic]="\u65e0\u56fe\u5143\u79fb\u52a8\u6743\u9650",o[i.j.ZegoWhiteboardViewErrorNoAuthDeleteGraphic]="\u65e0\u56fe\u5143\u5220\u9664\u6743\u9650",o[i.j.ZegoWhiteboardViewErrorNoAuthClearGraphic]="\u65e0\u767d\u677f\u6e05\u7a7a\u6743\u9650",o),a={1003:i.j.ZegoWhiteboardViewErrorNoLoginRoom,1014:i.j.ZegoWhiteboardViewErrorUserNotExist,1101:i.j.ZegoWhiteboardViewErrorViewNotExist,1102:i.j.ZegoWhiteboardViewErrorViewCreateFail,1104:i.j.ZegoWhiteboardViewErrorViewModifyFail,1114:i.j.ZegoWhiteboardViewErrorViewNumLimit,1201:i.j.ZegoWhiteboardViewErrorGraphicModifyFail,1202:i.j.ZegoWhiteboardViewErrorGraphicModifyFail,1212:i.j.ZegoWhiteboardViewErrorGraphicCreateFail,1217:i.j.ZegoWhiteboardViewErrorGraphicDataLimit,1219:i.j.ZegoWhiteboardViewErrorGraphicModifyFail,1222:i.j.ZegoWhiteboardViewErrorGraphicDataLimit,1223:i.j.ZegoWhiteboardViewErrorGraphicNumLimit,60003001:i.j.ZegoWhiteboardViewErrorInvalidRsp,10001e3:i.j.ZegoWhiteboardViewErrorInternal,10001001:i.j.ZegoWhiteboardViewErrorParamInvalid,110000001:i.j.ZegoWhiteboardViewErrorGraphicIllegalUrl,110000003:i.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport,110000004:i.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit,110000005:i.j.ZegoWhiteboardViewErrorGraphicIllegalUrl,110000007:i.j.ZegoWhiteboardViewErrorLogFolderNotAccess,110000008:i.j.ZegoWhiteboardViewErrorCacheFolderNotAccess,110000009:i.j.ZegoWhiteboardViewErrorViewNameLimit,111001001:i.j.ZegoWhiteboardViewErrorNetworkDisconnect,111001002:i.j.ZegoWhiteboardViewErrorNetworkTimeout,111101001:i.j.ZegoWhiteboardViewErrorRequestTooMany,112001003:i.j.ZegoWhiteboardViewErrorNoLoginRoom,112001014:i.j.ZegoWhiteboardViewErrorUserNotExist,112001101:i.j.ZegoWhiteboardViewErrorViewNotExist,112001102:i.j.ZegoWhiteboardViewErrorViewCreateFail,112001104:i.j.ZegoWhiteboardViewErrorViewModifyFail,112001114:i.j.ZegoWhiteboardViewErrorViewNumLimit,112001201:i.j.ZegoWhiteboardViewErrorGraphicModifyFail,112001202:i.j.ZegoWhiteboardViewErrorGraphicModifyFail,112001212:i.j.ZegoWhiteboardViewErrorGraphicCreateFail,112001217:i.j.ZegoWhiteboardViewErrorGraphicDataLimit,112001219:i.j.ZegoWhiteboardViewErrorGraphicModifyFail,112001222:i.j.ZegoWhiteboardViewErrorGraphicDataLimit,112001223:i.j.ZegoWhiteboardViewErrorGraphicNumLimit},c=function(e,t,r){return[1201,1202,1219,1212].includes(e),{code:e=a[e]||e,msg:t=s[e]&&r&&t?t:s[e]||t||s[i.j.ZegoWhiteboardViewErrorInternal]}},u=function(e,t,r){var o=c(e,t,r);return n.f.emit(n.c.Error,o),o}},function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,r(153))},function(e,t,r){"use strict";e.exports=r(414)},function(e,t,r){var o=r(98),n=Function.prototype.call;e.exports=o?n.bind(n):function(){return n.apply(n,arguments)}},function(e,t,r){var o=r(20),n=String,i=TypeError;e.exports=function(e){if(o(e))return e;throw i(n(e)+" is not an object")}},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,r){"use strict";var o,n,i,s=r(175),a=r(19),c=r(11),u=r(15),l=r(20),d=r(18),h=r(66),p=r(70),f=r(51),_=r(24),g=r(22).f,m=r(52),v=r(113),y=r(75),b=r(17),S=r(95),E=r(40),T=E.enforce,w=E.get,C=c.Int8Array,I=C&&C.prototype,O=c.Uint8ClampedArray,k=O&&O.prototype,R=C&&v(C),A=I&&v(I),P=Object.prototype,L=c.TypeError,N=b("toStringTag"),D=S("TYPED_ARRAY_TAG"),M=s&&!!y&&"Opera"!==h(c.opera),x=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},j=function(e){if(!l(e))return!1;var t=h(e);return d(B,t)||d(U,t)};for(o in B)(i=(n=c[o])&&n.prototype)?T(i).TypedArrayConstructor=n:M=!1;for(o in U)(i=(n=c[o])&&n.prototype)&&(T(i).TypedArrayConstructor=n);if((!M||!u(R)||R===Function.prototype)&&(R=function(){throw L("Incorrect invocation")},M))for(o in B)c[o]&&y(c[o],R);if((!M||!A||A===P)&&(A=R.prototype,M))for(o in B)c[o]&&y(c[o].prototype,A);if(M&&v(k)!==A&&y(k,A),a&&!d(A,N))for(o in x=!0,g(A,N,{get:function(){return l(this)?this[D]:void 0}}),B)c[o]&&f(c[o],D,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:x&&D,aTypedArray:function(e){if(j(e))return e;throw L("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!y||m(R,e)))return e;throw L(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,o){if(a){if(r)for(var n in B){var i=c[n];if(i&&d(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}A[e]&&!r||_(A,e,r?t:M&&I[e]||t,o)}},exportTypedArrayStaticMethod:function(e,t,r){var o,n;if(a){if(y){if(r)for(o in B)if((n=c[o])&&d(n,e))try{delete n[e]}catch(e){}if(R[e]&&!r)return;try{return _(R,e,r?t:M&&R[e]||t)}catch(e){}}for(o in B)!(n=c[o])||n[e]&&!r||_(n,e,t)}},getTypedArrayConstructor:function e(t){var r=v(t);if(l(r)){var o=w(r);return o&&d(o,"TypedArrayConstructor")?o.TypedArrayConstructor:e(r)}},isView:function(e){if(!l(e))return!1;var t=h(e);return"DataView"===t||d(B,t)||d(U,t)},isTypedArray:j,TypedArray:R,TypedArrayPrototype:A}},function(e,t,r){var o=r(11),n=r(80),i=r(18),s=r(95),a=r(79),c=r(189),u=n("wks"),l=o.Symbol,d=l&&l.for,h=c?l:l&&l.withoutSetter||s;e.exports=function(e){if(!i(u,e)||!a&&"string"!=typeof u[e]){var t="Symbol."+e;a&&i(l,e)?u[e]=l[e]:u[e]=c&&d?d(t):h(t)}return u[e]}},function(e,t,r){var o=r(7),n=r(29),i=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(n(e),t)}},function(e,t,r){var o=r(8);e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,r){var o=r(15);e.exports=function(e){return"object"==typeof e?null!==e:o(e)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return n}));var o,n,i=r(3),s=((o={30001:"\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41",60011:"token\u65e0\u6548",60012:"token\u5df2\u8fc7\u671f",60013:"\u6587\u6863\u8f6c\u6362\u8bf7\u6c42\u5df2\u5904\u7406",60014:"\u4e0d\u5b58\u5728\u7684\u4efb\u52a1ID"})[i.d.ZegoDocsViewSuccess]="\u6267\u884c\u6210\u529f",o[i.d.ZegoDocsViewErrorInternal]="\u5185\u90e8\u9519\u8bef",o[i.d.ZegoDocsViewErrorParamInvalid]="\u53c2\u6570\u9519\u8bef",o[i.d.ZegoDocsViewErrorNetworkTimeout]="\u7f51\u7edc\u8d85\u65f6",o[i.d.ZegoDocsViewErrorRequestFailure]="\u8bf7\u6c42\u5931\u8d25",o[i.d.ZegoDocsViewErrorTokenInvalid]="The token has expired",o[i.d.ZegoDocsViewErrorGetContextFail]="Get canvas context Fail",o[i.d.ZegoDocsViewErrorDrawImageFail]="Cavnas DrawImage Fail",o[i.d.ZegoDocsViewErrorFileNotExist]="\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u672c\u5730\u6587\u4ef6",o[i.d.ZegoDocsViewErrorUploadFailed]="\u4e0a\u4f20\u5931\u8d25",o[i.d.ZegoDocsViewErrorUnsupportRenderType]="\u4e0d\u652f\u6301\u6e32\u67d3\u6a21\u5f0f",o[i.d.ZegoDocsViewErrorFileEncrypt]="\u6587\u4ef6\u88ab\u52a0\u5bc6",o[i.d.ZegoDocsViewErrorFileSizeLimit]="\u6587\u4ef6\u5185\u5bb9\u8fc7\u5927",o[i.d.ZegoDocsViewErrorFileSheetLimit]="\u6587\u4ef6\u9875\u6570\u8fc7\u591a",o[i.d.ZegoDocsViewErrorConvertFail]="\u683c\u5f0f\u8f6c\u6362\u5931\u8d25",o[i.d.ZegoDocsViewErrorConvertCancel]="\u683c\u5f0f\u8f6c\u6362\u88ab\u53d6\u6d88",o[i.d.ZegoDocsViewErrorFileContentEmpty]="\u6587\u4ef6\u5185\u5bb9\u4e3a\u7a7a",o[i.d.ZegoDocsViewErrorFileReadOnly]="\u6587\u4ef6\u4e3a\u53ea\u8bfb\u6a21\u5f0f",o[i.d.ZegoDocsViewErrorConvertElementNotSupported]="\u6e90\u6587\u4ef6\u4e2d\u5b58\u5728\u4e0d\u652f\u6301\u8f6c\u7801\u7684\u5143\u7d20",o[i.d.ZegoDocsViewErrorConvertFileTypeInvalid]="\u6587\u4ef6\u540e\u7f00\u540d\u4e0d\u5339\u914d",o[i.d.ZegoDocsViewErrorConvertFileUnsafe]="\u6e90\u6587\u4ef6\u4e2d\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff0c\u65e0\u6cd5\u6b63\u5e38\u6253\u5f00",o[i.d.ZegoDocsViewErrorConvertElementNotExported]="\u8f6c\u7801\u7ed3\u675f\u540e\u5b58\u5728\u56fe\u7247\u3001\u97f3\u89c6\u9891\u6587\u4ef6\u672a\u6b63\u5e38\u5bfc\u51fa",o[i.d.ZegoDocsViewErrorFileCorruption]="\u6587\u4ef6\u635f\u574f",o[i.d.ZegoDocsViewErrorFileContentIncomplete]="\u6587\u4ef6\u5185\u5bb9\u4e0d\u5b8c\u6574",o[i.d.ZegoDocsViewErrorAuthParamInvalid]="\u8ba4\u8bc1\u53c2\u6570\u9519\u8bef",o[i.d.ZegoDocsViewErrorFilePathNotAccess]="\u8def\u5f84\u6743\u9650\u4e0d\u8db3",o[i.d.ZegoDocsViewErrorInitFailed]="\u521d\u59cb\u5316\u5931\u8d25",o[i.d.ZegoDocsViewErrorSizeInvalid]="\u65e0\u6cd5\u83b7\u53d6\u5f53\u524d view \u5bbd\u9ad8",o[i.d.ZegoDocsViewErrorFreeSpaceLimit]="\u672c\u5730\u7a7a\u95f4\u4e0d\u8db3",o[i.d.ZegoDocsViewErrorUploadNotSupported]="\u4e0d\u652f\u6301\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd",o[i.d.ZegoDocsViewErrorUploadDuplicated]="\u6b63\u5728\u4e0a\u4f20\u76f8\u540c\u6587\u4ef6",o[i.d.ZegoDocsViewErrorEmptyDomain]="\u7a7a\u57df\u540d",o[i.d.ZegoDocsViewErrorHaveInit]="\u5df2\u521d\u59cb\u5316",o[i.d.ZegoDocsViewErrorServerFileNotExist]="\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u8f6c\u7801\u540e\u6587\u4ef6",o[i.d.ZegoDocsViewErrorCacheNotSupported]="\u5f53\u524d AppID \u4e0d\u652f\u6301\u52a8\u6001 PPT \u9884\u52a0\u8f7d",o[i.d.ZegoDocsViewErrorCacheFailed]="\u9884\u52a0\u8f7d\u5931\u8d25",o[i.d.ZegoDocsViewErrorZipFileInvalid]="\u65e0\u6548\u7684 ZIP \u6587\u4ef6",o[i.d.ZegoDocsViewErrorH5FileInvalid]="\u65e0\u6548\u7684 H5 \u6587\u4ef6\uff0c\u4e0d\u7b26\u5408 ZEGO \u5b9a\u4e49\u7684 H5 \u6587\u4ef6\u89c4\u8303",o[i.d.ZegoDocsViewErrorSwitchSpeakerFail]="Switching speakers is not supported",o),a={4:i.d.ZegoDocsViewErrorParamInvalid,32:i.d.ZegoDocsViewErrorConvertFail,64:i.d.ZegoDocsViewErrorConvertCancel,128:i.d.ZegoDocsViewErrorFileEncrypt,256:i.d.ZegoDocsViewErrorFileSizeLimit,512:i.d.ZegoDocsViewErrorFileSheetLimit,1024:i.d.ZegoDocsViewErrorFileContentEmpty,8192:i.d.ZegoDocsViewErrorFileReadOnly,32768:i.d.ZegoDocsViewErrorConvertElementNotSupported,32769:i.d.ZegoDocsViewErrorConvertFileTypeInvalid,32773:i.d.ZegoDocsViewErrorFileCorruption,32774:i.d.ZegoDocsViewErrorFileContentIncomplete,60002:i.d.ZegoDocsViewErrorFileNotExist,60011:i.d.ZegoDocsViewErrorAuthParamInvalid,60013:i.d.ZegoDocsViewErrorConvertCancel,60015:i.d.ZegoDocsViewErrorUnsupportRenderType,60016:i.d.ZegoDocsViewErrorFileSizeLimit,60018:i.d.ZegoDocsViewErrorServerFileNotExist,60021:i.d.ZegoDocsViewErrorUnsupportRenderType,60036:i.d.ZegoDocsViewErrorZipFileInvalid,60037:i.d.ZegoDocsViewErrorFileEncrypt,60038:i.d.ZegoDocsViewErrorH5FileInvalid,"-102":i.d.ZegoDocsViewErrorNetworkTimeout,"-105":i.d.ZegoDocsViewErrorFileNotExist,"-108":i.d.ZegoDocsViewErrorUnsupportRenderType,"-109":i.d.ZegoDocsViewErrorUploadFailed,"-110":i.d.ZegoDocsViewErrorFilePathNotAccess,"-114":i.d.ZegoDocsViewErrorCacheFailed,"-115":i.d.ZegoDocsViewErrorFreeSpaceLimit,"-116":i.d.ZegoDocsViewErrorInitFailed,"-117":i.d.ZegoDocsViewErrorFileSizeLimit,"-118":i.d.ZegoDocsViewErrorUploadNotSupported,"-119":i.d.ZegoDocsViewErrorUploadDuplicated,"-120":i.d.ZegoDocsViewErrorUnsupportRenderType,"-121":i.d.ZegoDocsViewErrorEmptyDomain,"-123":i.d.ZegoDocsViewErrorFileContentEmpty,"-124":i.d.ZegoDocsViewErrorFilePathNotAccess,"-125":i.d.ZegoDocsViewErrorCacheNotSupported,"-126":i.d.ZegoDocsViewErrorFileEncrypt,"-127":i.d.ZegoDocsViewErrorZipFileInvalid,"-128":i.d.ZegoDocsViewErrorFileEncrypt,"-129":i.d.ZegoDocsViewErrorH5FileInvalid,"-130":i.d.ZegoDocsViewErrorConvertElementNotSupported,"-131":i.d.ZegoDocsViewErrorConvertFileTypeInvalid,"-132":i.d.ZegoDocsViewErrorConvertFileTypeInvalid,"-133":i.d.ZegoDocsViewErrorSwitchSpeakerFail,"-999998":i.d.ZegoDocsViewErrorSizeInvalid,"-999999":i.d.ZegoDocsViewErrorParamInvalid},c=function(e,t){return{code:e=a[e]||e,message:t=s[e]||t||s[i.d.ZegoDocsViewErrorInternal]}};!function(e){e[e.ZegoWhiteboardViewErrorNoAuthScroll=3050002]="ZegoWhiteboardViewErrorNoAuthScroll"}(n||(n={}))},function(e,t,r){var o=r(19),n=r(190),i=r(191),s=r(14),a=r(92),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor;t.f=o?i?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var o=l(e,t);o&&o.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:o.configurable,enumerable:"enumerable"in r?r.enumerable:o.enumerable,writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),n)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var o=r(66),n=String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},function(e,t,r){var o=r(15),n=r(22),i=r(219),s=r(158);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(o(r)&&i(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:n.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},function(e,t,r){var o=r(160),n=r(24),i=r(273);o||n(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,r){"use strict";r.d(t,"h",(function(){return _})),r.d(t,"i",(function(){return g})),r.d(t,"f",(function(){return p})),r.d(t,"d",(function(){return f})),r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return y})),r.d(t,"g",(function(){return b})),r.d(t,"c",(function(){return d})),r.d(t,"e",(function(){return S})),r(77),r(37),r(85),r(36),r(126),r(25),r(127),r(128),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(136),r(137),r(138),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(227),r(46),r(225),r(394),r(151),r(121);var o=r(5),n=r(9),i=r(0),s=o.a.calStandard.placeWidth,a=function(e,t,r){var o=e[t];e[t]=e[r],e[r]=o},c=function(e,t,r,o){var n=o.charCodeAt(t);e[t]=o.charCodeAt(r),e[r]=n},u=function(e){return btoa(String.fromCharCode.apply(null,e))},l=function(e){var t=unescape(encodeURIComponent(e)).split("").map((function(e){return e.charCodeAt(0)}));return new Uint8Array(t)},d=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},h=function(e){for(var t=e.split(","),r=new Uint8Array(Int32Array.from([+t[0],+t[1]]).buffer),o=0;o<r.length;o+=4)a(r,o,o+3),a(r,o+1,o+2);var n=l(t.slice(2).join(",")),i=new Uint8Array(r.length+n.length);return i.set(r),i.set(n,r.length),i},p=function(e){return u(l(e))},f=function(e){for(var t=atob(e),r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return d(r)},_=function(e,t){var r=e.type,o=e.action,n=e.is_end_draw,s=e.data;if("[object Uint8Array]"==Object.prototype.toString.call(s)&&(s=btoa(Array.prototype.map.call(s,(function(e){return String.fromCharCode(e)})).join(""))),r===i.f.Text)e.data=t?function(e){for(var t=atob(e),r=new Uint8Array(t.length),o=0;o<8;o+=4)c(r,o,o+3,t),c(r,o+1,o+2,t);for(;o<t.length;o++)r[o]=t.charCodeAt(o);var n=new Int32Array(r.slice(0,8).buffer);return n[0]+","+n[1]+","+d(r.slice(8))}(s):u(h(s));else if(r===i.f.Image||r===i.f.BgImage)e.data=t?JSON.parse(f(s)):u(l(JSON.stringify(s)));else if(t)if("[object Array]"==Object.prototype.toString.call(s))e.data=s;else{for(var p=atob(s||""),_=new Uint8Array(p.length),g=0;g<p.length;g+=4)c(_,g,g+3,p),c(_,g+1,g+2,p);e.data=Array.from(new Int32Array(_.buffer)),e.data=e.data.slice(r!==i.f.RealTime&&e.data.length%2?1:0)}else{var m=s.slice();for((r!==i.f.Pencil||n||o!==i.a.Create&&o!==i.a.Append)&&m.unshift(m.length/2),_=new Uint8Array(Int32Array.from(m).buffer),g=0;g<_.length;g+=4)a(_,g,g+3),a(_,g+1,g+2);e.data=u(_)}},g=function(e,t,r){var o=e.type,n=e.data,s=e.action,c=e.is_end_draw,u=e.attributes;if(o===i.f.Text)e.data=t?function(e){for(var t=0;t<8;t+=4)a(e,t,t+3),a(e,t+1,t+2);var r=new Int32Array(e.slice(0,8).buffer);return r[0]+","+r[1]+","+d(e.slice(8))}(n):h(n);else if(o===i.f.Image||o===i.f.BgImage)e.data=t?JSON.parse(d(n)):l(JSON.stringify(n));else if(t){for(var p=n,f=0;f<p.length;f+=4)a(p,f,f+3),a(p,f+1,f+2);e.data=Array.from(new Int32Array(p.slice().buffer)),e.data=e.data.slice(o!==i.f.RealTime&&e.data.length%2?1:0),r&&u&&(e.attributes=S(u))}else{var _=n.slice();for((o!==i.f.Pencil||c||s!==i.a.Create&&s!==i.a.Append)&&_.unshift(_.length/2),p=new Uint8Array(Int32Array.from(_).buffer),f=0;f<p.length;f+=4)a(p,f,f+3),a(p,f+1,f+2);e.data=p}},m=function(e,t,r,o,n,i,s){var a;return void 0===i&&(i=0),void 0===s&&(s=1),a=o?e*t/r+e*t/r*i/s:(e+(i=e*i/s))*r/t,o&&n?a:Math.round(a)},v=function(e,t,r,o,a){void 0===o&&(o=0),void 0===a&&(a=1);var c=e.type,u=e.px,l=e.py,d=e.x,h=e.y,p=Object(n.j)(e);if(u&&(e.px=m(u,t,s,r,!1)),l&&(e.py=m(l,t,s,r,!1,o,a)),e.x=m(d||0,t,s,r,!1),e.y=m(h||0,t,s,r,!1,o,a),c!==i.f.BgImage)if(c===i.f.Text){var f=e.data.split(",");f[0]=m(+f[0],t,s,r,p)+"",f[1]=m(+f[1],t,s,r,p,o,a)+"",e.data=f.join(",")}else if(c===i.f.Image){var _=e.data;_.x=m(_.x,t,s,r,p),_.y=m(_.y,t,s,r,p,o,a),_.ex=m(_.ex,t,s,r,p),_.ey=m(_.ey,t,s,r,p,o,a),r?(e.initX=_.x,e.initY=_.y,_.x+=e.x,_.y+=e.y,_.ex+=e.x,_.ey+=e.y):e.data=_}else i.f.Cursor,e.data=e.data.map((function(e,n){return n%2==0?m(e,t,s,r,p,0):m(e,t,s,r,p,o,a)}))},y=function(e,t,r,o){var n=o.filePageSize,i=o.pageCount,s=(null==n?void 0:n.fillPPT)?t:r*i;return n&&s-n.height*e*i/n.width||0},b=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},S=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))}},function(e,t,r){var o=r(15),n=r(70),i=TypeError;e.exports=function(e){if(o(e))return e;throw i(n(e)+" is not a function")}},function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return h})),r.d(t,"a",(function(){return u}));var o,n,i,s,a,c,u,l=15e3,d=6e3,h=36e5;!function(e){e[e.TXT=0]="TXT",e[e.MD=1]="MD",e[e.C=2]="C",e[e.CPP=3]="CPP",e[e.H=4]="H",e[e.HPP=5]="HPP",e[e.PY=6]="PY",e[e.JS=7]="JS",e[e.XML=8]="XML"}(o||(o={})),function(e){e[e.JPG=0]="JPG",e[e.JPEG=1]="JPEG",e[e.PNG=2]="PNG",e[e.BMP=3]="BMP",e[e.SVG=4]="SVG",e[e.HEIC=5]="HEIC"}(n||(n={})),function(e){e[e.PDF=0]="PDF"}(i||(i={})),function(e){e[e.XLSX=0]="XLSX",e[e.XLS=1]="XLS"}(s||(s={})),function(e){e[e.DOC=0]="DOC",e[e.DOCX=1]="DOCX"}(a||(a={})),function(e){e[e.PPT=0]="PPT",e[e.PPTX=1]="PPTX"}(c||(c={})),function(e){e[e.PPT=1]="PPT",e[e.DOC=2]="DOC",e[e.ELS=4]="ELS",e[e.PDF=8]="PDF",e[e.IMG=16]="IMG",e[e.TXT=32]="TXT",e[e.H5=64]="H5",e[e.H5PDF=128]="H5PDF",e[e.IMGAndPDF=256]="IMGAndPDF",e[e.PPTH5=512]="PPTH5",e[e.H5ZIP=4096]="H5ZIP"}(u||(u={}))},function(e,t,r){var o=r(48),n=Object;e.exports=function(e){return n(o(e))}},function(e,t,r){var o=r(45);e.exports=function(e){return o(e.length)}},function(e,t,r){var o=r(34),n=r(7),i=r(91),s=r(29),a=r(30),c=r(164),u=n([].push),l=function(e){var t=1==e,r=2==e,n=3==e,l=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,_,g,m){for(var v,y,b=s(f),S=i(b),E=o(_,g),T=a(S),w=0,C=m||c,I=t?C(f,T):r||h?C(f,0):void 0;T>w;w++)if((p||w in S)&&(y=E(v=S[w],w,b),e))if(t)I[w]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:u(I,v)}else switch(e){case 4:return!1;case 7:u(I,v)}return d?-1:n||l?l:I}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},function(e,t,r){var o=r(11),n=r(15),i=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(o[e]):o[e]&&o[e][t]}},function(e,t,r){"use strict";var o,n;r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n})),function(e){e.Docs="zegoeventdocs",e.Whiteboard="zegoeventwb"}(o||(o={})),function(e){e.WbInit="wbinit",e.WbDragTool="wbdragtool",e.WbScale="wbscale",e.WbDestroy="wbdestroy",e.WbSwitch="wbSwitch",e.WbError="wberror",e.Snapshot="snapshot",e.Page="page",e.Step="step",e.SyncDrag="syncDrag",e.Animation="targetclick",e.H5Snapshot="getH5SnapshotResult",e.DocsAspect="getAspectCache",e.ReloadView="reloadview",e.ClearEvent="clearEvent"}(n||(n={}))},function(e,t,r){var o=r(7),n=r(27),i=r(98),s=o(o.bind);e.exports=function(e,t){return n(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},function(e,t,r){"use strict";var o,n,i,s,a,c,u,l;r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"f",(function(){return c})),r.d(t,"a",(function(){return u})),function(e){e[e.ZegoWhiteboardViewSuccess=0]="ZegoWhiteboardViewSuccess",e[e.ZegoWhiteboardViewErrorInternal=3000001]="ZegoWhiteboardViewErrorInternal",e[e.ZegoWhiteboardViewErrorParamInvalid=3000002]="ZegoWhiteboardViewErrorParamInvalid",e[e.ZegoWhiteboardViewErrorNetworkTimeout=3000003]="ZegoWhiteboardViewErrorNetworkTimeout",e[e.ZegoWhiteboardViewErrorNetworkDisconnect=3000004]="ZegoWhiteboardViewErrorNetworkDisconnect",e[e.ZegoWhiteboardViewErrorInvalidRsp=3000005]="ZegoWhiteboardViewErrorInvalidRsp",e[e.ZegoWhiteboardViewErrorRequestTooMany=3000006]="ZegoWhiteboardViewErrorRequestTooMany",e[e.ZegoWhiteboardViewErrorVersionMismatch=3000007]="ZegoWhiteboardViewErrorVersionMismatch",e[e.ZegoWhiteboardViewErrorTokenInvalid=3000009]="ZegoWhiteboardViewErrorTokenInvalid",e[e.ZegoWhiteboardViewErrorNoLoginRoom=3010001]="ZegoWhiteboardViewErrorNoLoginRoom",e[e.ZegoWhiteboardViewErrorUserNotExist=3010002]="ZegoWhiteboardViewErrorUserNotExist",e[e.ZegoWhiteboardViewErrorViewNotExist=3020001]="ZegoWhiteboardViewErrorViewNotExist",e[e.ZegoWhiteboardViewErrorViewCreateFail=3020002]="ZegoWhiteboardViewErrorViewCreateFail",e[e.ZegoWhiteboardViewErrorViewModifyFail=3020003]="ZegoWhiteboardViewErrorViewModifyFail",e[e.ZegoWhiteboardViewErrorViewNameLimit=3020004]="ZegoWhiteboardViewErrorViewNameLimit",e[e.ZegoWhiteboardViewErrorViewParentNotExist=3020005]="ZegoWhiteboardViewErrorViewParentNotExist",e[e.ZegoWhiteboardViewErrorViewNumLimit=3020006]="ZegoWhiteboardViewErrorViewNumLimit",e[e.ZegoWhiteboardViewErrorAnimationInfoLimit=3020007]="ZegoWhiteboardViewErrorAnimationInfoLimit",e[e.ZegoWhiteboardViewErrorGraphicNotExist=3030001]="ZegoWhiteboardViewErrorGraphicNotExist",e[e.ZegoWhiteboardViewErrorGraphicCreateFail=3030002]="ZegoWhiteboardViewErrorGraphicCreateFail",e[e.ZegoWhiteboardViewErrorGraphicModifyFail=3030003]="ZegoWhiteboardViewErrorGraphicModifyFail",e[e.ZegoWhiteboardViewErrorGraphicUnableDraw=3030004]="ZegoWhiteboardViewErrorGraphicUnableDraw",e[e.ZegoWhiteboardViewErrorGraphicDataLimit=3030005]="ZegoWhiteboardViewErrorGraphicDataLimit",e[e.ZegoWhiteboardViewErrorGraphicNumLimit=3030006]="ZegoWhiteboardViewErrorGraphicNumLimit",e[e.ZegoWhiteboardViewErrorGraphicTextLimit=3030007]="ZegoWhiteboardViewErrorGraphicTextLimit",e[e.ZegoWhiteboardViewErrorGraphicImageSizeLimit=3030008]="ZegoWhiteboardViewErrorGraphicImageSizeLimit",e[e.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport=3030009]="ZegoWhiteboardViewErrorGraphicImageTypeNotSupport",e[e.ZegoWhiteboardViewErrorGraphicIllegalUrl=3030010]="ZegoWhiteboardViewErrorGraphicIllegalUrl",e[e.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit=3030011]="ZegoWhiteboardViewErrorGraphicCursorOffsetLimit",e[e.ZegoWhiteboardViewErrorInitFail=3040001]="ZegoWhiteboardViewErrorInitFail",e[e.ZegoWhiteboardViewErrorGetListFail=3040002]="ZegoWhiteboardViewErrorGetListFail",e[e.ZegoWhiteboardViewErrorCreateFail=3040003]="ZegoWhiteboardViewErrorCreateFail",e[e.ZegoWhiteboardViewErrorDestroyFail=3040004]="ZegoWhiteboardViewErrorDestroyFail",e[e.ZegoWhiteboardViewErrorAttachFail=3040005]="ZegoWhiteboardViewErrorAttachFail",e[e.ZegoWhiteboardViewErrorClearFail=3040006]="ZegoWhiteboardViewErrorClearFail",e[e.ZegoWhiteboardViewErrorScrollFail=3040007]="ZegoWhiteboardViewErrorScrollFail",e[e.ZegoWhiteboardViewErrorUndoFail=3040008]="ZegoWhiteboardViewErrorUndoFail",e[e.ZegoWhiteboardViewErrorRedoFail=3040009]="ZegoWhiteboardViewErrorRedoFail",e[e.ZegoWhiteboardViewErrorLogFolderNotAccess=3040010]="ZegoWhiteboardViewErrorLogFolderNotAccess",e[e.ZegoWhiteboardViewErrorCacheFolderNotAccess=3040011]="ZegoWhiteboardViewErrorCacheFolderNotAccess",e[e.ZegoWhiteboardViewErrorNoAuthScale=3050001]="ZegoWhiteboardViewErrorNoAuthScale",e[e.ZegoWhiteboardViewErrorNoAuthScroll=3050002]="ZegoWhiteboardViewErrorNoAuthScroll",e[e.ZegoWhiteboardViewErrorNoAuthCreateGraphic=3050003]="ZegoWhiteboardViewErrorNoAuthCreateGraphic",e[e.ZegoWhiteboardViewErrorNoAuthUpdateGraphic=3050004]="ZegoWhiteboardViewErrorNoAuthUpdateGraphic",e[e.ZegoWhiteboardViewErrorNoAuthMoveGraphic=3050005]="ZegoWhiteboardViewErrorNoAuthMoveGraphic",e[e.ZegoWhiteboardViewErrorNoAuthDeleteGraphic=3050006]="ZegoWhiteboardViewErrorNoAuthDeleteGraphic",e[e.ZegoWhiteboardViewErrorNoAuthClearGraphic=3050007]="ZegoWhiteboardViewErrorNoAuthClearGraphic"}(o||(o={})),function(e){e[e.ZegoWhiteboardViewToolPen=1]="ZegoWhiteboardViewToolPen",e[e.ZegoWhiteboardViewToolText=2]="ZegoWhiteboardViewToolText",e[e.ZegoWhiteboardViewToolLine=4]="ZegoWhiteboardViewToolLine",e[e.ZegoWhiteboardViewToolRect=8]="ZegoWhiteboardViewToolRect",e[e.ZegoWhiteboardViewToolEllipse=16]="ZegoWhiteboardViewToolEllipse",e[e.ZegoWhiteboardViewToolSelector=32]="ZegoWhiteboardViewToolSelector",e[e.ZegoWhiteboardViewToolEraser=64]="ZegoWhiteboardViewToolEraser",e[e.ZegoWhiteboardViewToolLaser=128]="ZegoWhiteboardViewToolLaser",e[e.ZegoWhiteboardViewToolClick=256]="ZegoWhiteboardViewToolClick",e[e.ZegoWhitebaordViewToolCustomImage=512]="ZegoWhitebaordViewToolCustomImage"}(n||(n={})),function(e){e[e.ZegoWhiteboardOperationModeNone=1]="ZegoWhiteboardOperationModeNone",e[e.ZegoWhiteboardOperationModeScroll=2]="ZegoWhiteboardOperationModeScroll",e[e.ZegoWhiteboardOperationModeDraw=4]="ZegoWhiteboardOperationModeDraw",e[e.ZegoWhiteboardOperationModeZoom=8]="ZegoWhiteboardOperationModeZoom"}(i||(i={})),function(e){e[e.ZegoWhiteboardViewImageGraphic=0]="ZegoWhiteboardViewImageGraphic",e[e.ZegoWhiteboardViewImageCustom=1]="ZegoWhiteboardViewImageCustom"}(s||(s={})),function(e){e[e.ZegoWhiteboardViewImageFitModeLeft=0]="ZegoWhiteboardViewImageFitModeLeft",e[e.ZegoWhiteboardViewImageFitModeRight=1]="ZegoWhiteboardViewImageFitModeRight",e[e.ZegoWhiteboardViewImageFitModeBottom=2]="ZegoWhiteboardViewImageFitModeBottom",e[e.ZegoWhiteboardViewImageFitModeTop=3]="ZegoWhiteboardViewImageFitModeTop",e[e.ZegoWhiteboardViewImageFitModeCenter=4]="ZegoWhiteboardViewImageFitModeCenter"}(a||(a={})),function(e){e[e.Center=0]="Center",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(c||(c={})),function(e){e[e.pen=1]="pen"}(u||(u={})),function(e){e[e.CURRENT=1]="CURRENT",e[e.ALL=2]="ALL"}(l||(l={}))},function(e,t,r){"use strict";var o=r(41),n=r(108),i=r(93),s=r(40),a=r(22).f,c=r(165),u=r(44),l=r(19),d=s.set,h=s.getterFor("Array Iterator");e.exports=c(Array,"Array",(function(e,t){d(this,{type:"Array Iterator",target:o(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,r=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:o,done:!1}:"values"==r?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}}),"values");var p=i.Arguments=i.Array;if(n("keys"),n("values"),n("entries"),!u&&l&&"values"!==p.name)try{a(p,"name",{value:"values"})}catch(e){}},function(e,t,r){"use strict";var o=r(6),n=r(112);o({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},function(e,t,r){var o=r(34),n=r(13),i=r(14),s=r(70),a=r(176),c=r(30),u=r(52),l=r(155),d=r(109),h=r(235),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},_=f.prototype;e.exports=function(e,t,r){var g,m,v,y,b,S,E,T=r&&r.that,w=!(!r||!r.AS_ENTRIES),C=!(!r||!r.IS_RECORD),I=!(!r||!r.IS_ITERATOR),O=!(!r||!r.INTERRUPTED),k=o(t,T),R=function(e){return g&&h(g,"normal",e),new f(!0,e)},A=function(e){return w?(i(e),O?k(e[0],e[1],R):k(e[0],e[1])):O?k(e,R):k(e)};if(C)g=e.iterator;else if(I)g=e;else{if(!(m=d(e)))throw p(s(e)+" is not iterable");if(a(m)){for(v=0,y=c(e);y>v;v++)if((b=A(e[v]))&&u(_,b))return b;return new f(!1)}g=l(e,m)}for(S=C?e.next:g.next;!(E=n(S,g)).done;){try{b=A(E.value)}catch(e){h(g,"throw",e)}if("object"==typeof b&&b&&u(_,b))return b}return new f(!1)}},function(e,t,r){var o=r(6),n=r(220);o({target:"Object",stat:!0,arity:2,forced:Object.assign!==n},{assign:n})},function(e,t,r){var o,n,i,s=r(264),a=r(11),c=r(7),u=r(20),l=r(51),d=r(18),h=r(157),p=r(110),f=r(97),_=a.TypeError,g=a.WeakMap;if(s||h.state){var m=h.state||(h.state=new g),v=c(m.get),y=c(m.has),b=c(m.set);o=function(e,t){if(y(m,e))throw new _("Object already initialized");return t.facade=e,b(m,e,t),t},n=function(e){return v(m,e)||{}},i=function(e){return y(m,e)}}else{var S=p("state");f[S]=!0,o=function(e,t){if(d(e,S))throw new _("Object already initialized");return t.facade=e,l(e,S,t),t},n=function(e){return d(e,S)?e[S]:{}},i=function(e){return d(e,S)}}e.exports={set:o,get:n,has:i,enforce:function(e){return i(e)?n(e):o(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=n(t)).type!==e)throw _("Incompatible receiver, "+e+" required");return r}}}},function(e,t,r){var o=r(91),n=r(48);e.exports=function(e){return o(n(e))}},function(e,t,r){var o=r(266);e.exports=function(e){var t=+e;return t!=t||0===t?0:o(t)}},function(e,t,r){"use strict";var o=r(238),n=Object.prototype.toString;function i(e){return"[object Array]"===n.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===n.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function r(r,o){"object"==typeof t[o]&&"object"==typeof r?t[o]=e(t[o],r):t[o]=r}for(var o=0,n=arguments.length;o<n;o++)u(arguments[o],r);return t},deepMerge:function e(){var t={};function r(r,o){"object"==typeof t[o]&&"object"==typeof r?t[o]=e(t[o],r):t[o]="object"==typeof r?e({},r):r}for(var o=0,n=arguments.length;o<n;o++)u(arguments[o],r);return t},extend:function(e,t,r){return u(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=!1},function(e,t,r){var o=r(42),n=Math.min;e.exports=function(e){return e>0?n(o(e),9007199254740991):0}},function(e,t,r){"use strict";var o=r(172).charAt,n=r(23),i=r(40),s=r(165),a=i.set,c=i.getterFor("String Iterator");s(String,"String",(function(e){a(this,{type:"String Iterator",string:n(e),index:0})}),(function(){var e,t=c(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=o(r,n),t.index+=e.length,{value:e,done:!1})}))},function(e,t,r){r(308),r(315),r(316),r(317),r(318),r(319)},function(e,t){var r=TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},function(e,t,r){"use strict";var o=r(6),n=r(201);o({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},function(e,t,r){var o=r(11),n=r(203),i=r(204),s=r(201),a=r(51),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in n)n[u]&&c(o[u]&&o[u].prototype);c(i)},function(e,t,r){var o=r(19),n=r(22),i=r(73);e.exports=o?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var o=r(7);e.exports=o({}.isPrototypeOf)},function(e,t,r){var o=r(11),n=r(203),i=r(204),s=r(36),a=r(51),c=r(17),u=c("iterator"),l=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[u]!==d)try{a(e,u,d)}catch(t){e[u]=d}if(e[l]||a(e,l,t),n[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var p in n)h(o[p]&&o[p].prototype,p);h(i,"DOMTokenList")},function(e,t,r){"use strict";r.d(t,"e",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return h})),r.d(t,"a",(function(){return p})),r.d(t,"h",(function(){return f})),r.d(t,"o",(function(){return _})),r.d(t,"j",(function(){return g})),r.d(t,"k",(function(){return m})),r.d(t,"n",(function(){return v})),r.d(t,"l",(function(){return y})),r.d(t,"m",(function(){return b})),r.d(t,"i",(function(){return S})),r(37),r(376),r(377),r(55),r(56),r(124);var o=r(5),n=r(10),i=r(0),s=function(e){return/^#[0-9a-fA-F]{6}|rgba?\(*.+\d\)$/.test(e)};function a(){return o.a.basicState.type||null}function c(){return o.a.basicState.color}function u(){return o.a.basicState.size}function l(){return o.a.basicState.fontSize}function d(){return JSON.parse(o.a.basicState.attributes).bold}function h(){return JSON.parse(o.a.basicState.attributes).italic}function p(){return o.a.basicState.bgColor}function f(){return JSON.parse(o.a.basicState.attributes).stroke}function _(e){return!e||Object.keys(i.k).includes(String(e))?(o.a.basicState.type=e||0,!0):(Object(n.a)(i.j.ZegoWhiteboardViewErrorParamInvalid),!1)}function g(e){return s(e)?(o.a.basicState.color=e,!0):(Object(n.a)(i.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef\uff1acolor\u4ec5\u652f\u630116\u8fdb\u5236\u3001rgba",!0),!1)}function m(e){return/^([1-9]|[1-9]\d|100)$/.test(""+(t=e))&&"number"==typeof t?(o.a.basicState.size=e,!0):(Object(n.a)(i.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef: \u753b\u7b14\u7c97\u7ec6\u4e3a100\u5185\u7684\u6b63\u6574\u6570",!0),!1);var t}function v(e){return/^([1-9]|[1-9]\d|100)$/.test(""+(t=e))&&"number"==typeof t?(o.a.basicState.fontSize=e,!0):(Object(n.a)(i.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef: \u6587\u672c\u5927\u5c0f\u4e3a100\u5185\u7684\u6b63\u6574\u6570",!0),!1);var t}function y(e){if("boolean"!=typeof e)return Object(n.a)(i.j.ZegoWhiteboardViewErrorParamInvalid),!1;var t=o.a.basicState.attributes,r=JSON.parse(t);return r.bold=e,o.a.basicState.attributes=JSON.stringify(r),!0}function b(e){if("boolean"!=typeof e)return Object(n.a)(i.j.ZegoWhiteboardViewErrorParamInvalid),!1;var t=o.a.basicState.attributes,r=JSON.parse(t);return r.italic=e,o.a.basicState.attributes=JSON.stringify(r),!0}function S(e){return s(e)?(o.a.basicState.bgColor=e,!0):(Object(n.a)(i.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef: color\u4ec5\u652f\u630116\u8fdb\u5236\u3001rgba",!0),!1)}},function(e,t,r){"use strict";var o=r(6),n=r(99).includes,i=r(8),s=r(108);o({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},function(e,t,r){"use strict";var o=r(6),n=r(7),i=r(256),s=r(48),a=r(23),c=r(257),u=n("".indexOf);o({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(i(e)),arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var o;e.exports=(o=o||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},n=o.lib={},i=n.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(i=0;i<n;i+=4)t[o+i>>>2]=r[i>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,o=[],n=function(t){var r=987654321,o=4294967295;return function(){var n=((r=36969*(65535&r)+(r>>16)&o)<<16)+(t=18e3*(65535&t)+(t>>16)&o)&o;return n/=4294967296,(n+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var a=n(4294967296*(r||e.random()));r=987654071*a(),o.push(4294967296*a()|0)}return new s.init(o,t)}}),a=o.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new s.init(r,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new s.init(r,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,o=r.words,n=r.sigBytes,i=this.blockSize,a=n/(4*i),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*i,u=e.min(4*c,n);if(c){for(var l=0;l<c;l+=i)this._doProcessBlock(o,l);var d=o.splice(0,c);r.sigBytes-=u}return new s.init(d,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(n.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}}),o.algo={});return o}(Math),o)},function(e,t,r){var o,n=r(14),i=r(196),s=r(159),a=r(97),c=r(211),u=r(117),l=r(110)("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{o=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&o?p(o):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):p(o);for(var r=s.length;r--;)delete f.prototype[s[r]];return f()};a[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(d.prototype=n(e),r=new d,d.prototype=null,r[l]=e):r=f(),void 0===t?r:i.f(r,t)}},function(e,t,r){var o=r(42),n=Math.max,i=Math.min;e.exports=function(e,t){var r=o(e);return r<0?n(r+t,0):i(r,t)}},function(e,t,r){r(280),r(283),r(284),r(285),r(286)},function(e,t,r){"use strict";var o=r(6),n=r(19),i=r(11),s=r(7),a=r(18),c=r(15),u=r(52),l=r(23),d=r(22).f,h=r(192),p=i.Symbol,f=p&&p.prototype;if(n&&c(p)&&(!("description"in f)||void 0!==p().description)){var _={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(_[t]=!0),t};h(g,p),g.prototype=f,f.constructor=g;var m="Symbol(test)"==String(p("test")),v=s(f.toString),y=s(f.valueOf),b=/^Symbol\((.*)\)[^)]+$/,S=s("".replace),E=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=y(this),t=v(e);if(a(_,e))return"";var r=m?E(t,7,-1):S(t,b,"$1");return""===r?void 0:r}}),o({global:!0,constructor:!0,forced:!0},{Symbol:g})}},function(e,t,r){r(206)("iterator")},function(e,t,r){var o=r(13);e.exports=function(e){return o(Map.prototype.entries,e)}},function(e,t,r){var o=r(7),n=o({}.toString),i=o("".slice);e.exports=function(e){return i(n(e),8,-1)}},function(e,t,r){var o=r(32);e.exports=o("navigator","userAgent")||""},function(e,t,r){var o=r(160),n=r(15),i=r(64),s=r(17)("toStringTag"),a=Object,c="Arguments"==i(function(){return arguments}());e.exports=o?i:function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?i(t):"Object"==(o=i(t))&&n(t.callee)?"Arguments":o}},function(e,t,r){var o=r(7),n=r(24),i=Date.prototype,s=o(i.toString),a=o(i.getTime);"Invalid Date"!=String(new Date(NaN))&&n(i,"toString",(function(){var e=a(this);return e==e?s(this):"Invalid Date"}))},function(e,t,r){var o=r(98),n=Function.prototype,i=n.apply,s=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?s.bind(i):function(){return s.apply(i,arguments)})},function(e,t,r){"use strict";var o=r(68),n=r(13),i=r(7),s=r(170),a=r(8),c=r(14),u=r(15),l=r(42),d=r(45),h=r(23),p=r(48),f=r(171),_=r(89),g=r(322),m=r(173),v=r(17)("replace"),y=Math.max,b=Math.min,S=i([].concat),E=i([].push),T=i("".indexOf),w=i("".slice),C="$0"==="a".replace(/./,"$0"),I=!!/./[v]&&""===/./[v]("a","$0");s("replace",(function(e,t,r){var i=I?"$":"$0";return[function(e,r){var o=p(this),i=null==e?void 0:_(e,v);return i?n(i,e,o,r):n(t,h(o),e,r)},function(e,n){var s=c(this),a=h(e);if("string"==typeof n&&-1===T(n,i)&&-1===T(n,"$<")){var p=r(t,s,a,n);if(p.done)return p.value}var _=u(n);_||(n=h(n));var v=s.global;if(v){var C=s.unicode;s.lastIndex=0}for(var I=[];;){var O=m(s,a);if(null===O)break;if(E(I,O),!v)break;""===h(O[0])&&(s.lastIndex=f(a,d(s.lastIndex),C))}for(var k,R="",A=0,P=0;P<I.length;P++){for(var L=h((O=I[P])[0]),N=y(b(l(O.index),a.length),0),D=[],M=1;M<O.length;M++)E(D,void 0===(k=O[M])?k:String(k));var x=O.groups;if(_){var B=S([L],D,N,a);void 0!==x&&E(B,x);var U=h(o(n,void 0,B))}else U=g(L,a,N,D,x,n);N>=A&&(R+=w(a,A,N)+U,A=N+L.length)}return R+w(a,A)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||I)},function(e,t){var r=String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},function(e,t,r){var o=r(14),n=r(197),i=r(17)("species");e.exports=function(e,t){var r,s=o(e).constructor;return void 0===s||null==(r=o(s)[i])?t:n(r)}},function(e,t,r){var o=r(22).f,n=r(18),i=r(17)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!n(e,i)&&o(e,i,{configurable:!0,value:t})}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var o=r(193),n=r(159).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,n)}},function(e,t,r){var o=r(7),n=r(14),i=r(271);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e(r,o):r.__proto__=o,r}}():void 0)},function(e,t,r){var o=r(19),n=r(13),i=r(116),s=r(73),a=r(41),c=r(92),u=r(18),l=r(190),d=Object.getOwnPropertyDescriptor;t.f=o?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!n(i.f,e,t),e[t])}},function(e,t,r){"use strict";var o=r(6),n=r(31).map;o({target:"Array",proto:!0,forced:!r(107)("map")},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){e.exports=r(326)},function(e,t,r){var o=r(84),n=r(8);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},function(e,t,r){var o=r(44),n=r(157);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.1",mode:o?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,r){var o=r(7);e.exports=o([].slice)},function(e,t,r){var o=r(32),n=r(15),i=r(52),s=r(189),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return n(t)&&i(t.prototype,a(e))}},function(e,t,r){"use strict";var o=r(8);e.exports=function(e,t){var r=[][e];return!!r&&o((function(){r.call(null,t||function(){return 1},1)}))}},function(e,t,r){var o,n,i=r(11),s=r(65),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(n=(o=l.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!n&&s&&(!(o=s.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=s.match(/Chrome\/(\d+)/))&&(n=+o[1]),e.exports=n},function(e,t,r){"use strict";var o=r(68),n=r(13),i=r(7),s=r(170),a=r(212),c=r(14),u=r(48),l=r(71),d=r(171),h=r(45),p=r(23),f=r(89),_=r(102),g=r(173),m=r(112),v=r(195),y=r(8),b=v.UNSUPPORTED_Y,S=Math.min,E=[].push,T=i(/./.exec),w=i(E),C=i("".slice);s("split",(function(e,t,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var i=p(u(this)),s=void 0===r?4294967295:r>>>0;if(0===s)return[];if(void 0===e)return[i];if(!a(e))return n(t,i,e,s);for(var c,l,d,h=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,f+"g");(c=n(m,v,i))&&!((l=v.lastIndex)>g&&(w(h,C(i,g,c.index)),c.length>1&&c.index<i.length&&o(E,h,_(c,1)),d=c[0].length,g=l,h.length>=s));)v.lastIndex===c.index&&v.lastIndex++;return g===i.length?!d&&T(v,"")||w(h,""):w(h,C(i,g)),h.length>s?_(h,0,s):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:n(t,this,e,r)}:t,[function(t,r){var o=u(this),s=null==t?void 0:f(t,e);return s?n(s,t,o,r):n(i,p(o),t,r)},function(e,o){var n=c(this),s=p(e),a=r(i,n,s,o,i!==t);if(a.done)return a.value;var u=l(n,RegExp),f=n.unicode,_=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(b?"g":"y"),m=new u(b?"^(?:"+n.source+")":n,_),v=void 0===o?4294967295:o>>>0;if(0===v)return[];if(0===s.length)return null===g(m,s)?[s]:[];for(var y=0,E=0,T=[];E<s.length;){m.lastIndex=b?0:E;var I,O=g(m,b?C(s,E):s);if(null===O||(I=S(h(m.lastIndex+(b?E:0)),s.length))===y)E=d(s,E,f);else{if(w(T,C(s,y,E)),T.length===v)return T;for(var k=1;k<=O.length-1;k++)if(w(T,O[k]),T.length===v)return T;E=y=I}}return w(T,C(s,y)),T}]}),!!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),b)},function(e,t,r){var o=r(52),n=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw n("Incorrect invocation")}},function(e,t,r){r(320),r(321)},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var o={host:{main:"zego.im"},ca_root:"http://flexible.zego.im/root/cert.2017",save_local:1,max_virtual_page_size:31457280,virtual_page_count:3,file_type_size_limit:[[1,524288e3],[2,104857600],[4,10485760],[8,104857600],[16,104857600],[32,2097152],[4096,52428800]],dynamicPPT_config:{retry_time:1,timeout:60}}},function(e,t,r){var o=r(27);e.exports=function(e,t){var r=e[t];return null==r?void 0:o(r)}},function(e,t,r){"use strict";(function(e){var o=t;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)void 0!==e[o[n]]&&r||(e[o[n]]=t[o[n]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(288),o.base64=r(289),o.EventEmitter=r(290),o.float=r(291),o.inquire=r(292),o.utf8=r(293),o.pool=r(294),o.LongBits=r(368),o.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),o.global=o.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}}).call(this,r(153))},function(e,t,r){var o=r(7),n=r(8),i=r(64),s=Object,a=o("".split);e.exports=n((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?a(e,""):s(e)}:s},function(e,t,r){var o=r(163),n=r(82);e.exports=function(e){var t=o(e,"string");return n(t)?t:t+""}},function(e,t){e.exports={}},function(e,t,r){"use strict";var o=r(19),n=r(11),i=r(7),s=r(125),a=r(24),c=r(18),u=r(178),l=r(52),d=r(82),h=r(163),p=r(8),f=r(74).f,_=r(76).f,g=r(22).f,m=r(259),v=r(248).trim,y=n.Number,b=y.prototype,S=n.TypeError,E=i("".slice),T=i("".charCodeAt),w=function(e){var t=h(e,"number");return"bigint"==typeof t?t:C(t)},C=function(e){var t,r,o,n,i,s,a,c,u=h(e,"number");if(d(u))throw S("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=v(u),43===(t=T(u,0))||45===t){if(88===(r=T(u,2))||120===r)return NaN}else if(48===t){switch(T(u,1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+u}for(s=(i=E(u,2)).length,a=0;a<s;a++)if((c=T(i,a))<48||c>n)return NaN;return parseInt(i,o)}return+u};if(s("Number",!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var I,O=function e(t){var r=arguments.length<1?0:y(w(t)),o=this;return l(b,o)&&p((function(){m(o)}))?u(Object(r),o,e):r},k=o?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),R=0;k.length>R;R++)c(y,I=k[R])&&!c(O,I)&&g(O,I,_(y,I));O.prototype=b,b.constructor=O,a(n,"Number",O,{constructor:!0})}},function(e,t,r){var o=r(7),n=0,i=Math.random(),s=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++n+i,36)}},function(e,t,r){var o=r(19),n=r(18),i=Function.prototype,s=o&&Object.getOwnPropertyDescriptor,a=n(i,"name"),c=a&&"something"===function(){}.name,u=a&&(!o||o&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},function(e,t){e.exports={}},function(e,t,r){var o=r(8);e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},function(e,t,r){var o=r(41),n=r(59),i=r(30),s=function(e){return function(t,r,s){var a,c=o(t),u=i(c),l=n(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,r){var o=r(193),n=r(159);e.exports=Object.keys||function(e){return o(e,n)}},function(e,t,r){var o=r(64);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,r){var o=r(59),n=r(30),i=r(103),s=Array,a=Math.max;e.exports=function(e,t,r){for(var c=n(e),u=o(t,c),l=o(void 0===r?c:r,c),d=s(a(l-u,0)),h=0;u<l;u++,h++)i(d,h,e[u]);return d.length=h,d}},function(e,t,r){"use strict";var o=r(92),n=r(22),i=r(73);e.exports=function(e,t,r){var s=o(t);s in e?n.f(e,s,i(0,r)):e[s]=r}},function(e,t,r){var o=r(11);e.exports=o.Promise},function(e,t,r){"use strict";var o=r(6),n=r(7),i=r(99).indexOf,s=r(83),a=n([].indexOf),c=!!a&&1/a([1],1,-0)<0,u=s("indexOf");o({target:"Array",proto:!0,forced:c||!u},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?a(this,e,t)||0:i(this,e,t)}})},function(e,t,r){var o=r(19),n=r(96).EXISTS,i=r(7),s=r(22).f,a=Function.prototype,c=i(a.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(u.exec);o&&!n&&s(a,"name",{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(e){return""}}})},function(e,t,r){var o=r(8),n=r(17),i=r(84),s=n("species");e.exports=function(e){return i>=51||!o((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,r){var o=r(17),n=r(58),i=r(22).f,s=o("unscopables"),a=Array.prototype;null==a[s]&&i(a,s,{configurable:!0,value:n(null)}),e.exports=function(e){a[s][e]=!0}},function(e,t,r){var o=r(66),n=r(89),i=r(93),s=r(17)("iterator");e.exports=function(e){if(null!=e)return n(e,s)||n(e,"@@iterator")||i[o(e)]}},function(e,t,r){var o=r(80),n=r(95),i=o("keys");e.exports=function(e){return i[e]||(i[e]=n(e))}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){"use strict";var o,n,i=r(13),s=r(7),a=r(23),c=r(194),u=r(195),l=r(80),d=r(58),h=r(40).get,p=r(267),f=r(268),_=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,m=g,v=s("".charAt),y=s("".indexOf),b=s("".replace),S=s("".slice),E=(n=/b*/g,i(g,o=/a/,"a"),i(g,n,"a"),0!==o.lastIndex||0!==n.lastIndex),T=u.BROKEN_CARET,w=void 0!==/()??/.exec("")[1];(E||w||T||p||f)&&(m=function(e){var t,r,o,n,s,u,l,p=this,f=h(p),C=a(e),I=f.raw;if(I)return I.lastIndex=p.lastIndex,t=i(m,I,C),p.lastIndex=I.lastIndex,t;var O=f.groups,k=T&&p.sticky,R=i(c,p),A=p.source,P=0,L=C;if(k&&(R=b(R,"y",""),-1===y(R,"g")&&(R+="g"),L=S(C,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==v(C,p.lastIndex-1))&&(A="(?: "+A+")",L=" "+L,P++),r=new RegExp("^(?:"+A+")",R)),w&&(r=new RegExp("^"+A+"$(?!\\s)",R)),E&&(o=p.lastIndex),n=i(g,k?r:p,L),k?n?(n.input=S(n.input,P),n[0]=S(n[0],P),n.index=p.lastIndex,p.lastIndex+=n[0].length):p.lastIndex=0:E&&n&&(p.lastIndex=p.global?n.index+n[0].length:o),w&&n&&n.length>1&&i(_,n[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n&&O)for(n.groups=u=d(null),s=0;s<O.length;s++)u[(l=O[s])[0]]=n[l[1]];return n}),e.exports=m},function(e,t,r){var o=r(18),n=r(15),i=r(29),s=r(110),a=r(270),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=i(e);if(o(t,c))return t[c];var r=t.constructor;return n(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},function(e,t,r){var o=r(16),n=r(71),i=o.aTypedArrayConstructor,s=o.getTypedArrayConstructor;e.exports=function(e){return i(n(e,s(e)))}},function(e,t,r){"use strict";var o=r(6),n=r(31).filter;o({target:"Array",proto:!0,forced:!r(107)("filter")},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){"use strict";var o={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!o.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:o},function(e,t,r){var o=r(11),n=r(20),i=o.document,s=n(i)&&n(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},function(e,t,r){var o=r(7),n=r(15),i=r(157),s=o(Function.toString);n(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},function(e,t,r){var o=r(11),n=r(104),i=r(15),s=r(125),a=r(118),c=r(17),u=r(314),l=r(234),d=r(44),h=r(84),p=n&&n.prototype,f=c("species"),_=!1,g=i(o.PromiseRejectionEvent),m=s("Promise",(function(){var e=a(n),t=e!==String(n);if(!t&&66===h)return!0;if(d&&(!p.catch||!p.finally))return!0;if(!h||h<51||!/native code/.test(e)){var r=new n((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))};if((r.constructor={})[f]=o,!(_=r.then((function(){}))instanceof o))return!0}return!t&&(u||l)&&!g}));e.exports={CONSTRUCTOR:m,REJECTION_EVENT:g,SUBCLASSING:_}},function(e,t,r){"use strict";var o=r(27),n=function(e){var t,r;this.promise=new e((function(e,o){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=o})),this.resolve=o(t),this.reject=o(r)};e.exports.f=function(e){return new n(e)}},function(e,t,r){"use strict";var o=r(6),n=r(101),i=r(122),s=r(20),a=r(59),c=r(30),u=r(41),l=r(103),d=r(17),h=r(107),p=r(81),f=h("slice"),_=d("species"),g=Array,m=Math.max;o({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var r,o,d,h=u(this),f=c(h),v=a(e,f),y=a(void 0===t?f:t,f);if(n(h)&&(r=h.constructor,(i(r)&&(r===g||n(r.prototype))||s(r)&&null===(r=r[_]))&&(r=void 0),r===g||void 0===r))return p(h,v,y);for(o=new(void 0===r?g:r)(m(y-v,0)),d=0;v<y;v++,d++)v in h&&l(o,d,h[v]);return o.length=d,o}})},function(e,t,r){var o=r(7),n=r(8),i=r(15),s=r(66),a=r(32),c=r(118),u=function(){},l=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=o(h.exec),f=!h.exec(u),_=function(e){if(!i(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},g=function(e){if(!i(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};g.sham=!0,e.exports=!d||n((function(){var e;return _(_.call)||!_(Object)||!_((function(){e=!0}))||e}))?g:_},function(e,t,r){"use strict";var o=r(6),n=r(29),i=r(59),s=r(42),a=r(30),c=r(216),u=r(164),l=r(103),d=r(179),h=r(107)("splice"),p=Math.max,f=Math.min;o({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var r,o,h,_,g,m,v=n(this),y=a(v),b=i(e,y),S=arguments.length;for(0===S?r=o=0:1===S?(r=0,o=y-b):(r=S-2,o=f(p(s(t),0),y-b)),c(y+r-o),h=u(v,o),_=0;_<o;_++)(g=b+_)in v&&l(h,_,v[g]);if(h.length=o,r<o){for(_=b;_<y-o;_++)m=_+r,(g=_+o)in v?v[m]=v[g]:d(v,m);for(_=y;_>y-o+r;_--)d(v,_-1)}else if(r>o)for(_=y-o;_>b;_--)m=_+r-1,(g=_+o-1)in v?v[m]=v[g]:d(v,m);for(_=0;_<r;_++)v[_+b]=arguments[_+2];return v.length=y-o+r,h}})},function(e,t,r){var o=r(6),n=r(29),i=r(100);o({target:"Object",stat:!0,forced:r(8)((function(){i(1)}))},{keys:function(e){return i(n(e))}})},function(e,t,r){var o=r(8),n=r(15),i=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r==l||r!=u&&(n(t)?o(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},function(e,t,r){"use strict";var o=r(6),n=r(7),i=r(8),s=r(174),a=r(14),c=r(59),u=r(45),l=r(71),d=s.ArrayBuffer,h=s.DataView,p=h.prototype,f=n(d.prototype.slice),_=n(p.getUint8),g=n(p.setUint8);o({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new d(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(a(this),e);for(var r=a(this).byteLength,o=c(e,r),n=c(void 0===t?r:t,r),i=new(l(this,d))(u(n-o)),s=new h(this),p=new h(i),m=0;o<n;)g(p,m++,_(s,o++));return i}})},function(e,t,r){r(230)("Uint8",(function(e){return function(t,r,o){return e(this,t,r,o)}}))},function(e,t,r){"use strict";var o=r(7),n=r(16),i=o(r(275)),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",(function(e,t){return i(s(this),e,t,arguments.length>2?arguments[2]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=r(31).every,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",(function(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=r(166),i=r(276),s=r(66),a=r(13),c=r(7),u=r(8),l=o.aTypedArray,d=o.exportTypedArrayMethod,h=c("".slice);d("fill",(function(e){var t=arguments.length;l(this);var r="Big"===h(s(this),0,3)?i(e):+e;return a(n,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),u((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},function(e,t,r){"use strict";var o=r(16),n=r(31).filter,i=r(277),s=o.aTypedArray;(0,o.exportTypedArrayMethod)("filter",(function(e){var t=n(s(this),e,arguments.length>1?arguments[1]:void 0);return i(this,t)}))},function(e,t,r){"use strict";var o=r(16),n=r(31).find,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",(function(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=r(31).findIndex,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",(function(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=r(31).forEach,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",(function(e){n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=r(99).includes,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",(function(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=r(99).indexOf,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",(function(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(11),n=r(8),i=r(7),s=r(16),a=r(36),c=r(17)("iterator"),u=o.Uint8Array,l=i(a.values),d=i(a.keys),h=i(a.entries),p=s.aTypedArray,f=s.exportTypedArrayMethod,_=u&&u.prototype,g=!n((function(){_[c].call([1])})),m=!!_&&_.values&&_[c]===_.values&&"values"===_.values.name,v=function(){return l(p(this))};f("entries",(function(){return h(p(this))}),g),f("keys",(function(){return d(p(this))}),g),f("values",v,g||!m,{name:"values"}),f(c,v,g||!m,{name:"values"})},function(e,t,r){"use strict";var o=r(16),n=r(7),i=o.aTypedArray,s=o.exportTypedArrayMethod,a=n([].join);s("join",(function(e){return a(i(this),e)}))},function(e,t,r){"use strict";var o=r(16),n=r(68),i=r(231),s=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return n(i,s(this),t>1?[e,arguments[1]]:[e])}))},function(e,t,r){"use strict";var o=r(16),n=r(31).map,i=r(114),s=o.aTypedArray;(0,o.exportTypedArrayMethod)("map",(function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(i(e))(t)}))}))},function(e,t,r){"use strict";var o=r(16),n=r(183).left,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return n(i(this),e,t,t>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=r(183).right,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return n(i(this),e,t,t>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(16),n=o.aTypedArray,i=o.exportTypedArrayMethod,s=Math.floor;i("reverse",(function(){for(var e,t=n(this).length,r=s(t/2),o=0;o<r;)e=this[o],this[o++]=this[--t],this[t]=e;return this}))},function(e,t,r){"use strict";var o=r(11),n=r(13),i=r(16),s=r(30),a=r(200),c=r(29),u=r(8),l=o.RangeError,d=o.Int8Array,h=d&&d.prototype,p=h&&h.set,f=i.aTypedArray,_=i.exportTypedArrayMethod,g=!u((function(){var e=new Uint8ClampedArray(2);return n(p,e,{length:1,0:3},1),3!==e[1]})),m=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));_("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(g)return n(p,this,r,t);var o=this.length,i=s(r),u=0;if(i+t>o)throw l("Wrong length");for(;u<i;)this[t+u]=r[u++]}),!g||m)},function(e,t,r){"use strict";var o=r(16),n=r(114),i=r(8),s=r(81),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("slice",(function(e,t){for(var r=s(a(this),e,t),o=n(this),i=0,c=r.length,u=new o(c);c>i;)u[i]=r[i++];return u}),i((function(){new Int8Array(1).slice()})))},function(e,t,r){"use strict";var o=r(16),n=r(31).some,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",(function(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,r){"use strict";var o=r(11),n=r(7),i=r(8),s=r(27),a=r(185),c=r(16),u=r(222),l=r(223),d=r(84),h=r(224),p=c.aTypedArray,f=c.exportTypedArrayMethod,_=o.Uint16Array,g=_&&n(_.prototype.sort),m=!(!g||i((function(){g(new _(2),null)}))&&i((function(){g(new _(2),{})}))),v=!!g&&!i((function(){if(d)return d<74;if(u)return u<67;if(l)return!0;if(h)return h<602;var e,t,r=new _(516),o=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,o[e]=e-2*t+3;for(g(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==o[e])return!0}));f("sort",(function(e){return void 0!==e&&s(e),v?g(this,e):a(p(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!v||m)},function(e,t,r){"use strict";var o=r(16),n=r(45),i=r(59),s=r(114),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",(function(e,t){var r=a(this),o=r.length,c=i(e,o);return new(s(r))(r.buffer,r.byteOffset+c*r.BYTES_PER_ELEMENT,n((void 0===t?o:i(t,o))-c))}))},function(e,t,r){"use strict";var o=r(11),n=r(68),i=r(16),s=r(8),a=r(81),c=o.Int8Array,u=i.aTypedArray,l=i.exportTypedArrayMethod,d=[].toLocaleString,h=!!c&&s((function(){d.call(new c(1))}));l("toLocaleString",(function(){return n(d,h?a(u(this)):u(this),a(arguments))}),s((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])})))},function(e,t,r){"use strict";var o=r(16).exportTypedArrayMethod,n=r(8),i=r(11),s=r(7),a=i.Uint8Array,c=a&&a.prototype||{},u=[].toString,l=s([].join);n((function(){u.call({})}))&&(u=function(){return l(this)});var d=c.toString!=u;o("toString",u,d)},function(e,t,r){"use strict";var o=r(6),n=r(7),i=r(91),s=r(41),a=r(83),c=n([].join),u=i!=Object,l=a("join",",");o({target:"Array",proto:!0,forced:u||!l},{join:function(e){return c(s(this),void 0===e?",":e)}})},function(e,t,r){var o=r(64),n=r(11);e.exports="process"==o(n.process)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var o=r(17)("iterator"),n=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){n=!0}};s[o]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var i={};i[o]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},function(e,t,r){var o=r(13),n=r(27),i=r(14),s=r(70),a=r(109),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(n(r))return i(o(r,e));throw c(s(e)+" is not iterable")}},function(e,t,r){var o,n,i;e.exports=(i=r(57),n=(o=i).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,o=this._map;e.clamp();for(var n=[],i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)n.push(o.charAt(s>>>6*(3-a)&63));var c=o.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var s=r.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,r){for(var o=[],i=0,s=0;s<t;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2,c=r[e.charCodeAt(s)]>>>6-s%4*2;o[i>>>2]|=(a|c)<<24-i%4*8,i++}return n.create(o,i)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64)},function(e,t,r){var o=r(11),n=r(158),i=o["__core-js_shared__"]||n("__core-js_shared__",{});e.exports=i},function(e,t,r){var o=r(11),n=Object.defineProperty;e.exports=function(e,t){try{n(o,e,{value:t,configurable:!0,writable:!0})}catch(r){o[e]=t}return t}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,r){var o={};o[r(17)("toStringTag")]="z",e.exports="[object z]"===String(o)},function(e,t,r){var o,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function o(e){return!0===(e&&e.__isLong__)}function n(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var i={},s={};function a(e,t){var r,o,n;return t?(n=0<=(e>>>=0)&&e<256)&&(o=s[e])?o:(r=u(e,0,!0),n&&(s[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(o=i[e])?o:(r=u(e,e<0?-1:0,!1),n&&(i[e]=r),r)}function c(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=f)return T}else{if(e<=-_)return w;if(e+1>=_)return E}return e<0?c(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,o){return new r(e,t,o)}r.fromInt=a,r.fromNumber=c,r.fromBits=u;var l=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:m;if((r=r||10)<2||36<r)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return d(e.substring(1),t,r).neg();for(var n=c(l(r,8)),i=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);if(a<8){var h=c(l(r,a));i=i.mul(h).add(c(u))}else i=(i=i.mul(n)).add(c(u))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,_=f/2,g=a(1<<24),m=a(0);r.ZERO=m;var v=a(0,!0);r.UZERO=v;var y=a(1);r.ONE=y;var b=a(1,!0);r.UONE=b;var S=a(-1);r.NEG_ONE=S;var E=u(-1,2147483647,!1);r.MAX_VALUE=E;var T=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=T;var w=u(0,-2147483648,!1);r.MIN_VALUE=w;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=c(e),r=this.div(t),o=r.mul(t).sub(this);return r.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=c(l(e,6),this.unsigned),i=this,s="";;){var a=i.div(n),u=(i.sub(a.mul(n)).toInt()>>>0).toString(e);if((i=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return o(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(o(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(y)},C.neg=C.negate,C.add=function(e){o(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,d=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,d+=(p+=n+c)>>>16,l+=(d+=r+a)>>>16,l+=t+s,u((p&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},C.subtract=function(e){return o(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return this;if(o(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:m;if(this.eq(w))return e.isOdd()?w:m;if(e.eq(w))return this.isOdd()?w:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,_=0,y=0,b=0;return y+=(b+=s*p)>>>16,_+=(y+=i*p)>>>16,y&=65535,_+=(y+=s*d)>>>16,f+=(_+=n*p)>>>16,_&=65535,f+=(_+=i*d)>>>16,_&=65535,f+=(_+=s*l)>>>16,f+=r*p+n*d+i*l+s*a,u((y&=65535)<<16|(b&=65535),(f&=65535)<<16|(_&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(o(e)||(e=h(e)),e.isZero())throw Error("division by zero");var r,n,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return b;i=v}else{if(this.eq(w))return e.eq(y)||e.eq(S)?w:e.eq(w)?y:(r=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:S:(n=this.sub(e.mul(r)),i=r.add(n.div(e)));if(e.eq(w))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),a=s<=48?1:l(2,s-48),d=c(r),p=d.mul(e);p.isNegative()||p.gt(n);)p=(d=c(r-=a,this.unsigned)).mul(e);d.isZero()&&(d=y),i=i.add(d),n=n.sub(p)}return i},C.div=C.divide,C.modulo=function(e){return o(e)||(e=h(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?n(this.low):n(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(e){return o(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return o(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return o(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(e){var t;return o(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},C.rotl=C.rotateLeft,C.rotateRight=function(e){var t;return o(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,o){return o?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var I=r;return e.default=I,"default"in e?e.default:e}({});void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)},function(e,t,r){var o,n;"undefined"!=typeof self&&self,e.exports=(o=r(366),n=r(161),function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.typeMap=t.BrokenType=t.ConnectedType=t.DisconnectedType=t.Method=t.ConnectionClosedAction=t.NetWorkState=t.externalErrorList=t.Stick=t.PcConnectState=t.ENUM_CONNECT_STATE=t.StreamType=t.Mode=t.ZegoconnRunEnv=t.BusinessService=t.AccessHub_Error_Code=t.AccessHubMessageType=t.ENUM_NETWORK_STATE=void 0,function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={})),function(e){e[e.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",e[e.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",e[e.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",e[e.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",e[e.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",e[e.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",e[e.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",e[e.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",e[e.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",e[e.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",e[e.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",e[e.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",e[e.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",e[e.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",e[e.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",e[e.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",e[e.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",e[e.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",e[e.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",e[e.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",e[e.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION"}(t.AccessHubMessageType||(t.AccessHubMessageType={})),function(e){e[e.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",e[e.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",e[e.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",e[e.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",e[e.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",e[e.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",e[e.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",e[e.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",e[e.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",e[e.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",e[e.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",e[e.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",e[e.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",e[e.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",e[e.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE"}(o=t.AccessHub_Error_Code||(t.AccessHub_Error_Code={})),function(e){e[e.SERVICE_UNSET=0]="SERVICE_UNSET",e[e.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",e[e.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",e[e.SERVICE_MIX=3]="SERVICE_MIX",e[e.SERVICE_ZEUS=4]="SERVICE_ZEUS",e[e.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",e[e.SERVICE_L3=6]="SERVICE_L3",e[e.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",e[e.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",e[e.SERVICE_ZIM=9]="SERVICE_ZIM",e[e.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",e[e.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",e[e.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",e[e.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",e[e.SERVICE_QUALITY=14]="SERVICE_QUALITY",e[e.SERVICE_SECURITY=15]="SERVICE_SECURITY",e[e.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",e[e.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",e[e.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",e[e.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",e[e.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",e[e.SERVICE_CDN=21]="SERVICE_CDN",e[e.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",e[e.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",e[e.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",e[e.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",e[e.SERVICE_ECHO=26]="SERVICE_ECHO",e[e.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",e[e.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR"}(t.BusinessService||(t.BusinessService={})),function(e){e[e.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",e[e.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",e[e.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET"}(t.ZegoconnRunEnv||(t.ZegoconnRunEnv={})),function(e){e[e.Mode_UNSET=0]="Mode_UNSET",e[e.MODE_ONLINE=1]="MODE_ONLINE",e[e.MODE_TEST=2]="MODE_TEST",e[e.MODE_ALPHA=3]="MODE_ALPHA"}(t.Mode||(t.Mode={})),function(e){e[e.HTTP=0]="HTTP",e[e.PC=1]="PC",e[e.OTHER=2]="OTHER"}(t.StreamType||(t.StreamType={})),t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},function(e){e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECT=1]="DISCONNECT",e[e.BROKEN=2]="BROKEN"}(t.PcConnectState||(t.PcConnectState={})),t.Stick={DISPATCH:"zego-action-dispatch",RETRY:"zego-action-retry",ABORT:"zego-action-abort",NEXT_GROUP:"zego-action-next-group",PUSH_APP_CONFIG:"push-app-config:"},t.externalErrorList=[o.ACCESSHUB_INVALID_APPID,o.ACCESSHUB_INVALID_SIGNATURE],function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.NetWorkState||(t.NetWorkState={})),function(e){e[e.ACTION_RESERVED=0]="ACTION_RESERVED",e[e.ACTION_DISPATCH=1]="ACTION_DISPATCH",e[e.ACTION_RETRY=2]="ACTION_RETRY",e[e.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",e[e.ACTION_ABORT=4]="ACTION_ABORT",e[e.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP"}(t.ConnectionClosedAction||(t.ConnectionClosedAction={})),function(e){e[e.METHOD_UNSET=0]="METHOD_UNSET",e[e.METHOD_GET=1]="METHOD_GET",e[e.METHOD_POST=2]="METHOD_POST"}(t.Method||(t.Method={})),function(e){e[e.CLOSE=0]="CLOSE",e[e.TEMP=1]="TEMP",e[e.TIMEOUT=2]="TIMEOUT"}(t.DisconnectedType||(t.DisconnectedType={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(t.ConnectedType||(t.ConnectedType={})),function(e){e[e.EMPTY=0]="EMPTY",e[e.CLOSE=1]="CLOSE"}(t.BrokenType||(t.BrokenType={})),t.typeMap={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_CONFIG_KEY=t.NET_ACCESS_SERVERS=t.NET_ACCESS_CONFIG=void 0;var o=r(0);t.NET_ACCESS_CONFIG={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:o.Mode.MODE_ONLINE,sdkType:3,connectVer:2,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},t.NET_ACCESS_SERVERS="z_net_access_servers",t.APP_CONFIG_KEY="z_appconfig"},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidNum=t.decodeString=t.encodeString=void 0,t.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},t.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},t.uuidNum=function(e,t){var r,o="0123456789".split(""),n=[];if(t=o.length,e)for(r=0;r<e;r++)n[r]=o[0|Math.random()*t];else{var i=void 0;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",r=0;r<36;r++)n[r]||(i=0|16*Math.random(),n[r]=o[19==r?3&i|8:i])}return n.join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequest=void 0;var o=r(0),n=r(1),i=r(6),s=r(4),a=[o.BusinessService.SERVICE_WEBRTC_SIGNAL,o.BusinessService.SERVICE_L3_WEBRTC_SIGNAL],c=function(){function e(e,t,r,n,s){this.logger=e,this.service=t,this.streamManager=r,this.pcEstablishTimeout=n,this.option=s,this.connectState=o.PcConnectState.DISCONNECT,this.lastConnectState=o.PcConnectState.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(o.StreamType.PC),this.eventManager=new i.EventManager,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}return e.prototype.sendRequest=function(e,t,r){var i,c,u,l=this,d=e.payload;(a.includes(this.service)||(null===(i=this.option)||void 0===i?void 0:i.encode))&&(d=(0,s.encodeString)(e.payload));var h={service_no:this.service,ack:e.ack,payload:d,wss_message_type:n.NET_ACCESS_CONFIG.wssMessageType,wss_path:null===(c=this.option)||void 0===c?void 0:c.path,wss_raw_query:null===(u=this.option)||void 0===u?void 0:u.query,zegoconn_version:n.NET_ACCESS_CONFIG.connectVer};this.netPcStream.isConnect()||this.eventManager.emit("connectStart"),this.netPcStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE,h,(function(){l.logger.info("zn.napr.sr suc"),r&&r()}),(function(e){l.logger.error("zn.napr.sr fail"),t&&t(e)}),null,{isInSendMap:"boolean"==typeof e.isInSendMap&&e.isInSendMap}),this.netPcStream.isFirst=!1},e.prototype.onPushEvent=function(e,t){var r;switch(this.logger.info("zn.napr.ope"+" msgType: ".concat(e)),e){case o.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:this.pcEstablished(t);break;case o.AccessHubMessageType.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case o.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:var n=t.payload;(a.includes(this.service)||(null===(r=this.option)||void 0===r?void 0:r.encode))&&(n=(0,s.decodeString)(t.payload)),this.eventManager.emit("downLoadMessage",n)}},e.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){this.eventManager.removeEventHandler(e,t)},e.prototype.pcEstablished=function(e){this.logger.info("zn.napr.pe call "+JSON.stringify(e)),this.setConnectState(o.PcConnectState.CONNECTED);var t=o.ConnectedType.MANUAL;this.lastConnectState===o.PcConnectState.BROKEN&&this.connectState===o.PcConnectState.CONNECTED&&(t=o.ConnectedType.AUTO),this.eventManager.emit("connected",t),this.eventManager.emit("pcConnectedEvent",{proxy_link_sources:null==e?void 0:e.from}),this.brokenTimer&&clearTimeout(this.brokenTimer)},e.prototype.pcBroken=function(){var e=this;this.logger.info("zn.napr.pb call"),this.setConnectState(o.PcConnectState.BROKEN),this.eventManager.emit("broken"),this.brokenTimer=setTimeout((function(){e.eventManager.emit("disconnected",o.DisconnectedType.TEMP)}),1e3*this.pcEstablishTimeout)},e.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},e.prototype._close=function(e,t){if(this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==o.PcConnectState.DISCONNECT){this.netPcStream.closeStream(0,""),this.resetBrokenTimer();var r=this.streamManager.getStreamID();this.netPcStream.refresh(r),this.eventManager.emit(e,t)}this.setConnectState(o.PcConnectState.DISCONNECT)},e.prototype.closePc=function(){this._close("broken")},e.prototype.closeRequest=function(){this._close("disconnected",o.DisconnectedType.CLOSE)},e.prototype.setConnectState=function(e){this.connectState!==e&&(this.lastConnectState=this.connectState,this.connectState=e)},e}();t.NetAgentPCRequest=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0;var o=function(){function e(){this.handlerListMap={}}return e.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return this.handlerListMap[e]&&-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},e.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(e){try{setTimeout((function(){e.apply(void 0,t)}),0)}catch(e){}}))},e}();t.EventManager=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentHttpRequest=void 0;var o=r(0),n=r(4),i=r(1),s=function(){function e(e,t,r){this.logger=e,this.service=t,this.streamManager=r,this.netHttpStream=this.streamManager.createStream(o.StreamType.HTTP)}return e.prototype.sendRequest=function(e,t,r,s,a){var c=this,u={service_no:this.service,ack:e.ack,headers:e.headers,body:(0,n.encodeString)(JSON.stringify(e.body)),id_name:e.idName,method_no:e.method_no,stick:e.stick,location:e.location,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer};this.netHttpStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST,u,(function(e){var r=(null==e?void 0:e.headers).find((function(e){return"Content-Encoding"===(null==e?void 0:e.name)}));if("gzip"===(null==r?void 0:r.val))c.logger.info("zn.nahr.sr gzip");else if(e.body){var o=(0,n.decodeString)(e.body);e.body=o}c.logger.info("zn.nahr.sr suc "+JSON.stringify(e)),t&&t(e)}),(function(e,t,o){c.logger.error("zn.nahr.sr fail"),r&&r(o||e)}),(function(e){c.logger.error("zn.nahr.sr ack"),s&&s(e)}),a),this.netHttpStream.isFirst=!1},e}();t.NetAgentHttpRequest=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Method=t.Mode=t.DisconnectedType=t.ConnectedType=t.NET_ACCESS_CONFIG=t.BrokenType=t.BusinessService=t.NetAgentHttpRequest=t.NetAgentPCRequest=t.ZegoConnectionAgent=void 0;var o=r(0);Object.defineProperty(t,"BrokenType",{enumerable:!0,get:function(){return o.BrokenType}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return o.BusinessService}}),Object.defineProperty(t,"ConnectedType",{enumerable:!0,get:function(){return o.ConnectedType}}),Object.defineProperty(t,"DisconnectedType",{enumerable:!0,get:function(){return o.DisconnectedType}}),Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return o.Mode}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return o.Method}});var n=r(9);Object.defineProperty(t,"ZegoConnectionAgent",{enumerable:!0,get:function(){return n.ZegoConnectionAgent}});var i=r(7);Object.defineProperty(t,"NetAgentHttpRequest",{enumerable:!0,get:function(){return i.NetAgentHttpRequest}});var s=r(1);Object.defineProperty(t,"NET_ACCESS_CONFIG",{enumerable:!0,get:function(){return s.NET_ACCESS_CONFIG}});var a=r(5);Object.defineProperty(t,"NetAgentPCRequest",{enumerable:!0,get:function(){return a.NetAgentPCRequest}})},function(e,t,r){"use strict";var o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoConnectionAgent=void 0;var n=r(0),i=r(10),s=r(13),a=r(18),c=r(19),u=r(20),l=r(1),d=r(6),h=r(21),p=r(3),f=r(22),_=r(4),g=r(23),m=r(7),v=r(24),y=function(){function e(){var e=this;this.linkCheckTimer=null,this.connectServers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.primaryDomains=[],this.onConnectedEvent=function(t){if(e.getConfig(),!e.stateCenter.specified){var r=e.reportSeq++;e.eventManager.emit("dispatchEvent",r,"start"),e.dispatch().then((function(t){var o=t.servers,n=t.domains;e.eventManager.emit("dispatchEvent",r,"end",{domains:n}),o.length>0&&e.eventManager.emit("dispatchResultUpdate",{servers:o})})).catch((function(e){}))}e.eventManager.emit("connected"),e.connectedTime=(new Date).getTime(),e.connectid=(0,_.uuidNum)(16),e.eventManager.emit("connectedEvent",e.connectSeq,"end",{servers:t,count:t.length,connectid:e.connectid})},this.onConnectingEvent=function(){e.logger.info("zn.zca.oce call")},this.onDisConnectedEvent=function(t){e.disConnect(),e.netAgentPCRequestMgr.updateConnectState(n.PcConnectState.BROKEN)},this.onPushEvent=function(t,r,o){switch(r){case n.AccessHubMessageType.MSG_TYPE_REDIRECT:e.redirect(o);break;case n.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION:e.connectClosed(o);break;case n.AccessHubMessageType.MSG_TYPE_PC_BROKEN:case n.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:case n.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:e.streamManager.onPushEvent(t,r,o);break;case n.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG:e.businessRequestMgr.decodeConfigMessage(o.data)}}}return e.prototype.init=function(){this.logger=new g.ZegoLogger,this.protobuf=new i.AccessHubProtoBuf,this.stateCenter=new f.StateCenter,this.eventManager=new d.EventManager,this.checkLinkMsg(),this.inited=!0},e.prototype.unInit=function(){this.inited=!1},e.prototype.setAppInfo=function(e){this.stateCenter.appInfo=e,this.stateCenter.networkState=navigator?navigator.onLine?n.ENUM_NETWORK_STATE.online:n.ENUM_NETWORK_STATE.offline:n.ENUM_NETWORK_STATE.online,0===e.env?this.bindWindowListener():1===e.env&&this.bindWxListener(),this.zegoLink=new s.ZegoWssLink(e.appID,e.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new v.StreamManager(this.zegoLink),this.businessRequestMgr=new a.NetAgentBusinessRequestMgr(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new c.NetHeartBeatHandler(this.streamManager,this.logger),this.netAgentPCRequestMgr=new u.NetAgentPCRequestMgr(this.streamManager,this.logger),this.heartBeatHandler()},e.prototype.setUserInfo=function(e){this.stateCenter.userId=e},e.prototype.setNetAgentDefaultServers=function(e){this.connectServers=o([],e,!0)},e.prototype.setNetAgentSpecifiedServers=function(e){this.logger.info("zn.sss.0 "+JSON.stringify(e)),this.stateCenter.specified=!0,this.specifiedServers=o([],e,!0)},e.prototype.setBackupDomains=function(e){this.primaryDomains=e},e.prototype.setDispatchConnectServers=function(e){this.connect(e)},e.prototype.startHttpRequest=function(e,t,r,o,n){var i=this,s=this.reportSeq++;this.eventManager.emit("requestEvent",s,"start"),this.isConnect()||this.connectUa(),new m.NetAgentHttpRequest(this.logger,e.service,this.streamManager).sendRequest(e,(function(r){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,status_code:r.status_code,err_code:0}),t&&t(r)}),(function(t){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,err_code:t.code||0}),r&&r(t)}),o,n)},e.prototype.getAppConfigByAgent=function(e,t,r){return this.isConnect()||this.connectUa(),this.getAppConfig(e,this.stateCenter.userId,t,r)},e.prototype.getPCRequest=function(e,t){var r=this,o=this.netAgentPCRequestMgr.getRequest(e,t);return o.on("disconnected",(function(t){r.logger.warn("zn.zca.gpr "+e+" disconnect "+t),t===n.DisconnectedType.TEMP&&(r.disConnect(),r.connectStart())})),o.on("connectStart",(function(){r.connectUa()})),o},e.prototype.connectUa=function(){this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0))},e.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},e.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},e.prototype.on=function(e,t){return this.logger.info("zn.zca.o.0 "+e),this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){this.logger.info("zn.zca.o.1 "+e),this.eventManager.removeEventHandler(e,t)},e.prototype.setLogger=function(e){this.logger=e},e.prototype.setAccess=function(e){this.stateCenter.useNetAgent=e},e.prototype.heartBeatHandler=function(){var e=this;this.netHeartBeatHandler.netHbLogout=function(t){e.retryLinkHandler&&([p.errorCodeList.NET_HB_TIMEOUT.code].includes(t.code)?(e.retryLinkHandler.startMaxTime(),e.disConnect(),e.connectStart()):(e.retryLinkHandler.stopMaxTime(),e.retryLinkHandler.invalid(),e.eventManager.emit("disconnected")))}},e.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},e.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},e.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=n.ENUM_NETWORK_STATE.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},e.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=n.ENUM_NETWORK_STATE.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},e.prototype.checkLinkMsg=function(){var e=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var t=Date.now()-this.zegoLink.updatedMsgTime;if(t>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+t),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout((function(){e.checkLinkMsg()}),1e3*this.linkMsgCheckInterval)}},e.prototype.connect=function(e){var t=this;e.length>0&&(this.connectServers=o([],e,!0)),this.stateCenter.specified&&this.specifiedServers.length>0&&(this.connectServers=this.specifiedServers),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new h.NetRetryLinkHandler(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(e,r){r===p.errorCodeList.NET_SOCKET_TIMEOUT&&(t.eventManager.emit("disconnected",r),t.netAgentPCRequestMgr.updateConnectState(n.PcConnectState.DISCONNECT,n.DisconnectedType.TIMEOUT,r))},this.connectStart(!1,!0)},e.prototype.resetNetAgent=function(){this.netHeartBeatHandler.reset(),this.zegoLink.destroySocket()},e.prototype.getConfig=function(){var e=this,t=function(t,r,o){o?e.logger.info("zn.zca.gc fail "+JSON.stringify(o)):0===t.code?(e.logger.info("zn.zca.gc suc "+JSON.stringify(t)),e.getConfigSuccess(t)):e.logger.info("zn.zca.gc fail")};this.businessRequestMgr.getConfig(t,t)},e.prototype.getConfigSuccess=function(e){this.netHeartBeatHandler.init(e),this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout)},e.prototype.dispatch=function(){var e=this;return new Promise((function(t,r){e.businessRequestMgr.dispatchURL((function(r){var o=r.data.wss_groups;e.logger.info("zn.nab.du wss_groups: "+JSON.stringify(o));var n=e.getConnectionDomains(o,e.primaryDomains),i=e.handleWssGroups(n);t({servers:i,domains:o})}),(function(e){r(e)}))}))},e.prototype.handleWssGroups=function(e){return Array.isArray(e)&&e.length>0?e.map((function(e){return l.NET_ACCESS_CONFIG.scheme+"://"+e.host+"/"+l.NET_ACCESS_CONFIG.location})):[]},e.prototype.getConnectionDomains=function(e,t){var r=o([],e,!0);return t.forEach((function(t){e.forEach((function(e){var o;if(e.main_domain)o=e.main_domain;else{var n=e.host.split(".");o=n[n.length-2]+"."+n[n.length-1]}if(o!==t){var i=e.host.replace(o,t);r.push({group:e.group,host:i})}}))})),r},e.prototype.getAppConfig=function(e,t,r,o){var i=this;return new Promise((function(s,a){"string"==typeof t&&"string"==typeof r?i.businessRequestMgr.getAppConfig(e,t,r,o).then((function(e){s(e)})).catch((function(o){if(i.logger.error("zn.zca.gac "+JSON.stringify(o)),n.externalErrorList.indexOf(o.code)>-1)return i.getAppConfigFailCount=0,void a(o);i.getAppConfigFailCount++,20008===o.code&&i.getAppConfigFailCount<3?i.getAppConfig(e,t,r).then((function(e){return s(e)})).catch((function(e){return a(e)})):(i.getAppConfigFailCount=0,a(o))})):i.logger.error("zn.zca.gac userID or token must be string")}))},e.prototype.reportDisConnectEvent=function(){var e=(new Date).getTime()-this.connectedTime;this.eventManager.emit("disConnectedEvent",{duration:e,server:this.zegoLink.connectServer})},e.prototype.redirect=function(e){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(e.wss_groups)));var t=this.handleWssGroups(e.wss_groups);t&&Array.isArray(t)&&t.length>0?(this.disConnect(),this.stateCenter.specified&&(this.logger.info("zn.zca.rd specified"),t=this.specifiedServers),this.zegoLink.createSocket(t),this.connectStart(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},e.prototype.connectClosed=function(e){var t=this;switch(this.logger.info("zn.zca.cc"+" ".concat(e.reason," ").concat(e.msg," ").concat(e.action)),e.action){case n.ConnectionClosedAction.ACTION_DISPATCH:var r=this.reportSeq++;this.eventManager.emit("dispatchEvent",r,"start"),this.dispatch().then((function(e){var o=e.servers,n=e.domains;if(t.eventManager.emit("dispatchEvent",r,"end",{domains:n,reason:"ConnectClosed"}),Array.isArray(o)&&o.length>0){t.eventManager.emit("dispatchResultUpdate",{servers:o});var i=t.stateCenter.specified?t.specifiedServers:o;t.disConnect(),t.zegoLink.createSocket(i),t.connectStart(!1,!0)}})).catch((function(e){t.logger.info("zn.zca.cc dispatch fail")}));break;case n.ConnectionClosedAction.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case n.ConnectionClosedAction.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",n.BrokenType.CLOSE),this.connectStart();case n.ConnectionClosedAction.ACTION_ABORT:case n.ConnectionClosedAction.ACTION_RESERVED:}},e.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},e.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(n.ENUM_CONNECT_STATE.disconnect))},e.prototype.connectStart=function(e,t){this.retryLinkHandler.active(e,t)&&this.reportConnectEvent()},e.prototype.reportConnectEvent=function(){var e=this.reportSeq++;this.connectSeq=e,this.eventManager.emit("connectedEvent",e,"start")},e.prototype.disConnect=function(){this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.reportDisConnectEvent()},e.prototype.testConnect=function(){this.startHttpRequest({service:n.BusinessService.SERVICE_ClOUD_SETTING,headers:[],body:{appid:3349318446,biztype:0,deviceid:"27a315ae-ff78-4ded-8581-8b7b7afe6f2e",files:["init","room"],id_name:"sample1647345322471",mode:"online",param:{},product:"Web_SDK",timestamp:1647345362932,token:"eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ=="},idName:"sample1647345322471",ack:!0,stick:"zego-action-dispatch",method_no:n.Method.METHOD_POST,location:"/cloud-setting/get"},(function(e){}),(function(e){}),(function(e){}))},e}();t.ZegoConnectionAgent=y},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessHubProtoBuf=void 0;var c=a(r(11)),u=s(r(2)),l=r(0),d=a(r(12));u.util.Long=c.default,u.configure();var h=function(){function e(){var e;this.protoInstance=d.default,this.protoMap=((e={})[l.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],e[l.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],e[l.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],e[l.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],e[l.AccessHubMessageType.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],e[l.AccessHubMessageType.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],e[l.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],e[l.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],e[l.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HBResponse"],e[l.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],e[l.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],e[l.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],e[l.AccessHubMessageType.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],e[l.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],e[l.AccessHubMessageType.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],e[l.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],e[l.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],e[l.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],e[l.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],e[l.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],e[l.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],e)}return e.prototype.encodeRequest=function(e,t,r){var o=this.protoMap[e],n=o[0],i=o[1],s=this.encode(this.protoInstance[n][i],t),a=s.length,c=new Uint8Array(13+a);return c[0]=175,c[1]=0,c[2]=e>>8,c[3]=e-(c[2]<<8),c.set(new Uint8Array(Int32Array.from([a]).buffer).reverse(),4),c.set(new Uint8Array(Int32Array.from([r]).buffer).reverse(),8),c[12]=0,c.set(s,13),c},e.prototype.decodeResponse=function(e){var t=(e[2]<<8)+e[3],r=new DataView(e.buffer).getUint32(8),o=e.slice(13);try{var n=this.protoMap[t],i=n[0],s=n[1];return[r,t,this.decode(this.protoInstance[i][s],o)]}catch(e){return[r,t,{code:1}]}},e.prototype.decodeConfigMessage=function(e){return this.decode(this.protoInstance.proto_initconfig.InitConfig,e)},e.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},e.prototype.decode=function(e,t){return o({},e.decode(t))},e}();t.AccessHubProtoBuf=h},function(e,t){e.exports=n},function(e,t,r){"use strict";r.r(t),r.d(t,"proto_accesshub",(function(){return c})),r.d(t,"proto_initconfig",(function(){return u})),r.d(t,"default",(function(){return a}));var o=r(2),n=o.Reader,i=o.Writer,s=o.util,a=o.roots.default||(o.roots.default={}),c=a.proto_accesshub=function(){var e={};return e.MessageType=function(){var e={},t=Object.create(e);return t[e[0]="MSG_TYPE_EMPTY"]=0,t[e[1]="MSG_TYPE_CONNECTION_CLOSED"]=1,t[e[2]="MSG_TYPE_STREAM_CLOSED"]=2,t[e[3]="MSG_TYPE_CLOSE_CONNECTION"]=3,t[e[4]="MSG_TYPE_HTTP_REQUEST"]=4,t[e[5]="MSG_TYPE_HTTP_RESPONSE"]=5,t[e[6]="MSG_TYPE_HTTP_REQUEST_DROPED"]=6,t[e[7]="MSG_TYPE_PROXY_CONNECT"]=7,t[e[8]="MSG_TYPE_PROXY_CONNECTED"]=8,t[e[9]="MSG_TYPE_PROXY_CONNECTION_CLOSED"]=9,t[e[10]="MSG_TYPE_PROXY_SEND_DATA"]=10,t[e[11]="MSG_TYPE_PROXY_RECV_DATA"]=11,t[e[12]="MSG_TYPE_HB_REQUEST"]=12,t[e[13]="MSG_TYPE_HB_RESPONSE"]=13,t[e[14]="MSG_TYPE_GET_CONFIG_REQUEST"]=14,t[e[15]="MSG_TYPE_GET_CONFIG_RESPONSE"]=15,t[e[16]="MSG_TYPE_HTTP_REQUEST_ACK"]=16,t[e[17]="MSG_TYPE_PC_UPWARD_MESSAGE"]=17,t[e[18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK"]=18,t[e[19]="MSG_TYPE_PC_ESTABLISHED"]=19,t[e[20]="MSG_TYPE_PC_BROKEN"]=20,t[e[21]="MSG_TYPE_PC_DOWNWARD_MESSAGE"]=21,t[e[22]="MSG_TYPE_REDIRECT"]=22,t[e[23]="MSG_TYPE_GET_APPCONFIG_REQUEST"]=23,t[e[24]="MSG_TYPE_GET_APPCONFIG_RESPONSE"]=24,t[e[25]="MSG_TYPE_PUSH_APPCONFIG"]=25,t[e[26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"]=26,t[e[27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"]=27,t[e[28]="MSG_TYPE_GET_IM_CONFIG_REQUEST"]=28,t[e[29]="MSG_TYPE_GET_IM_CONFIG_RESPONSE"]=29,t[e[30]="MSG_TYPE_PUSH_EXCEPTION"]=30,t[e[50]="MSG_TYPE_UA_DISPATCH_REQUEST"]=50,t[e[51]="MSG_TYPE_UA_DISPATCH_RESPONSE"]=51,t[e[52]="MSG_TYPE_UA_ECHO_REQUEST"]=52,t[e[53]="MSG_TYPE_UA_ECHO_RESPONSE"]=53,t[e[100]="MSG_TYPE_NODE_REGISTER_REQUEST"]=100,t[e[101]="MSG_TYPE_NODE_REGISTER_RESPONSE"]=101,t[e[102]="MSG_TYPE_NODE_HB_REQUEST"]=102,t[e[103]="MSG_TYPE_NODE_HB_RESPONSE"]=103,t}(),e.ErrorCode=function(){var e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1e4]="DISPATCH_NO_AVAILABLE_NODE"]=1e4,t[e[10001]="DISPATCH_INTERNAL_ERROR"]=10001,t[e[10002]="DISPATCH_INVALID_FRAME"]=10002,t[e[10003]="DISPATCH_UNMARSHAL"]=10003,t[e[10004]="DISPATCH_MSGTYPE"]=10004,t[e[10005]="DISPATCH_MARSHAL"]=10005,t[e[10006]="DISPATCH_TOO_FREQUENTLY"]=10006,t[e[2e4]="ACCESSHUB_INVALID_FRAME"]=2e4,t[e[20001]="ACCESSHUB_NEED_ENCRYPT"]=20001,t[e[20002]="ACCESSHUB_DECRYPT"]=20002,t[e[20003]="ACCESSHUB_MSGTYPE"]=20003,t[e[20004]="ACCESSHUB_UNMARSHAL"]=20004,t[e[20005]="ACCESSHUB_TIMEOUT"]=20005,t[e[20006]="ACCESSHUB_CONNECT"]=20006,t[e[20007]="ACCESSHUB_BROKEN"]=20007,t[e[20008]="ACCESSHUB_INTERNAL_ERROR"]=20008,t[e[20009]="ACCESSHUB_MARSHAL"]=20009,t[e[20010]="ACCESSHUB_UNSUPPORTED_SERVICE"]=20010,t[e[20011]="ACCESSHUB_TOO_FREQUENTLY"]=20011,t[e[20012]="ACCESSHUB_INVALID_APPID"]=20012,t[e[20013]="ACCESSHUB_HB_TIMEOUT"]=20013,t[e[20014]="ACCESSHUB_INVALID_SIGNATURE"]=20014,t[e[20015]="ACCESSHUB_AUTH_FAILED"]=20015,t[e[3e4]="ACCESSHUB_GET_STREAM_FAILED"]=3e4,t[e[30001]="ACCESSHUB_GET_CONN_FAILED"]=30001,t[e[30002]="ACCESSHUB_DO_HTTP_REQUEST_FAILED"]=30002,t[e[30003]="ACCESSHUB_UNMARSHAL_HB_FAILED"]=30003,t[e[30004]="ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"]=30004,t}(),e.Mode=function(){var e={},t=Object.create(e);return t[e[0]="Mode_UNSET"]=0,t[e[1]="MODE_ONLINE"]=1,t[e[2]="MODE_TEST"]=2,t[e[3]="MODE_ALPHA"]=3,t}(),e.Service=function(){var e={},t=Object.create(e);return t[e[0]="SERVICE_UNSET"]=0,t[e[1]="SERVICE_MEDIAGW"]=1,t[e[2]="SERVICE_LIVEROOM"]=2,t[e[3]="SERVICE_MIX"]=3,t[e[4]="SERVICE_ZEUS"]=4,t[e[5]="SERVICE_ZPUSH"]=5,t[e[6]="SERVICE_L3"]=6,t[e[7]="SERVICE_TALKLINE"]=7,t[e[8]="SERVICE_EDUSUITE"]=8,t[e[9]="SERVICE_ZIM"]=9,t[e[10]="SERVICE_ClOUD_SETTING"]=10,t[e[11]="SERVICE_ZEUSHB"]=11,t[e[12]="SERVICE_USER_LOGIC"]=12,t[e[13]="SERVICE_UNIFYDISPATCH"]=13,t[e[14]="SERVICE_QUALITY"]=14,t[e[15]="SERVICE_SECURITY"]=15,t[e[16]="SERVICE_KTVCPR"]=16,t[e[17]="SERVICE_SWITCH4LIVEROOM"]=17,t[e[18]="SERVICE_WEBRTC_SIGNAL"]=18,t[e[19]="SERVICE_L3_WEBRTC_SIGNAL"]=19,t[e[20]="SERVICE_VIDEOCPR"]=20,t[e[21]="SERVICE_CDN"]=21,t[e[22]="SERVICE_CLOUDRECORD"]=22,t[e[23]="SERVICE_INNER_ECHO"]=23,t[e[24]="SERVICE_OUTER_ECHO"]=24,t[e[25]="SERVICE_LOCALHOST_ECHO"]=25,t[e[26]="SERVICE_ECHO"]=26,t[e[27]="SERVICE_DOCSERVICE"]=27,t[e[28]="SERVICE_AUTHSVR"]=28,t[e[29]="SERVICE_WEBLIVEROOM"]=29,t[e[30]="SERVICE_WHITEBOARD"]=30,t[e[31]="SERVICE_METAWORLD"]=31,t}(),e.Method=function(){var e={},t=Object.create(e);return t[e[0]="METHOD_UNSET"]=0,t[e[1]="METHOD_GET"]=1,t[e[2]="METHOD_POST"]=2,t}(),e.SdkType=function(){var e={},t=Object.create(e);return t[e[0]="SDK_TYPE_UNSET"]=0,t[e[1]="SDK_TYPE_QUIC_MTCP_NATIVE"]=1,t[e[2]="SDK_TYPE_WSS_NATIVE"]=2,t[e[3]="SDK_TYPE_WSS_WEB"]=3,t}(),e.ZegoconnRunEnv=function(){var e={},t=Object.create(e);return t[e[0]="ZEGOCONN_RUN_ENV_UNSET"]=0,t[e[1]="ZEGOCONN_RUN_ENV_BROWSER"]=1,t[e[2]="ZEGOCONN_RUN_ENV_APPLET"]=2,t}(),e.BackendConnType=function(){var e={},t=Object.create(e);return t[e[0]="BACKEND_CONN_TYPE_UNSET"]=0,t[e[1]="BACKEND_CONN_TYPE_TCP"]=1,t[e[2]="BACKEND_CONN_TYPE_WSS"]=2,t}(),e.ConnectionClosed=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.msg="",e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.ConnectionClosed;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&i)}}return o},e}(),e.StreamClosed=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.msg="",e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.StreamClosed;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&i)}}return o},e}(),e.CloseConnection=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.reason=0,e.prototype.msg="",e.prototype.action=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(24).int32(e.action),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.CloseConnection;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.action=e.int32();break;default:e.skipType(7&i)}}return o},e.Action=function(){var e={},t=Object.create(e);return t[e[0]="ACTION_RESERVED"]=0,t[e[1]="ACTION_DISPATCH"]=1,t[e[2]="ACTION_RETRY"]=2,t[e[3]="ACTION_NEXT_NODE"]=3,t[e[4]="ACTION_ABORT"]=4,t[e[5]="ACTION_NEXT_GROUP"]=5,t}(),e}(),e.HTTPRequest=function(){function e(e){if(this.headers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.appid=0,e.prototype.biz_type=0,e.prototype.mode="",e.prototype.id_name="",e.prototype.reqid="",e.prototype.stick="",e.prototype.service="",e.prototype.location="",e.prototype.method="",e.prototype.headers=s.emptyArray,e.prototype.body=s.newBuffer([]),e.prototype.ack=!1,e.prototype.mode_no=0,e.prototype.service_no=0,e.prototype.method_no=0,e.prototype.sdk_type=0,e.prototype.zegoconn_run_env=0,e.prototype.zegoconn_version=0,e.encode=function(e,t){if(t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.stick&&Object.hasOwnProperty.call(e,"stick")&&t.uint32(58).string(e.stick),null!=e.service&&Object.hasOwnProperty.call(e,"service")&&t.uint32(66).string(e.service),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(74).string(e.location),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(82).string(e.method),null!=e.headers&&e.headers.length)for(var r=0;r<e.headers.length;++r)a.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(90).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(98).bytes(e.body),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(104).bool(e.ack),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(112).int32(e.mode_no),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(120).int32(e.service_no),null!=e.method_no&&Object.hasOwnProperty.call(e,"method_no")&&t.uint32(128).int32(e.method_no),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(136).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(144).int32(e.zegoconn_run_env),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(152).uint32(e.zegoconn_version),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.HTTPRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.stick=e.string();break;case 8:o.service=e.string();break;case 9:o.location=e.string();break;case 10:o.method=e.string();break;case 11:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(a.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 12:o.body=e.bytes();break;case 13:o.ack=e.bool();break;case 14:o.mode_no=e.int32();break;case 15:o.service_no=e.int32();break;case 16:o.method_no=e.int32();break;case 17:o.sdk_type=e.int32();break;case 18:o.zegoconn_run_env=e.int32();break;case 19:o.zegoconn_version=e.uint32();break;default:e.skipType(7&i)}}return o},e.HTTPHeader=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.val="",e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&t.uint32(18).string(e.val),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.HTTPRequest.HTTPHeader;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.name=e.string();break;case 2:o.val=e.string();break;default:e.skipType(7&i)}}return o},e}(),e}(),e.HTTPResponse=function(){function e(e){if(this.headers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.headers=s.emptyArray,e.prototype.status_code=0,e.prototype.body=s.newBuffer([]),e.encode=function(e,t){if(t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.headers&&e.headers.length)for(var r=0;r<e.headers.length;++r)a.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(18).fork()).ldelim();return null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(34).bytes(e.body),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.HTTPResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(a.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 3:o.status_code=e.int32();break;case 4:o.body=e.bytes();break;default:e.skipType(7&i)}}return o},e}(),e.HTTPRequestAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.HTTPRequestAck;e.pos<r;){var i=e.uint32();i>>>3===1?o.txid=e.uint64():e.skipType(7&i)}return o},e}(),e.HTTPRequestDroped=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.reason=0,e.prototype.msg="",e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(16).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(26).string(e.msg),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.HTTPRequestDroped;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.reason=e.int32();break;case 3:o.msg=e.string();break;default:e.skipType(7&i)}}return o},e}(),e.ProxyConnectionClosed=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.msg="",e.prototype.connected=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.connected&&Object.hasOwnProperty.call(e,"connected")&&t.uint32(24).int32(e.connected),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.ProxyConnectionClosed;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;case 3:o.connected=e.int32();break;default:e.skipType(7&i)}}return o},e}(),e.HBRequest=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.ts=s.Long?s.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.HBRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;default:e.skipType(7&i)}}return o},e}(),e.HBResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.ts=s.Long?s.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.HBResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;default:e.skipType(7&i)}}return o},e}(),e.GetConfigRequest=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.appid=0,e.prototype.biz_type=0,e.prototype.mode="",e.prototype.id_name="",e.prototype.reqid="",e.prototype.zegoconn_version=0,e.prototype.sdk_type=0,e.prototype.zegoconn_run_env=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(64).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(72).int32(e.zegoconn_run_env),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.GetConfigRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.sdk_type=e.int32();break;case 9:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},e}(),e.GetConfigResponseData=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.quic_hb_interval=0,e.prototype.quic_hb_timeout=0,e.prototype.logic_hb_interval=0,e.prototype.logic_hb_timeout=0,e.prototype.pc_establish_timeout=0,e.prototype.sdk_link_detect_interval=0,e.prototype.sdk_link_detect_duration=0,e.prototype.client_outer_ip="",e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.quic_hb_interval&&Object.hasOwnProperty.call(e,"quic_hb_interval")&&t.uint32(16).uint32(e.quic_hb_interval),null!=e.quic_hb_timeout&&Object.hasOwnProperty.call(e,"quic_hb_timeout")&&t.uint32(24).uint32(e.quic_hb_timeout),null!=e.logic_hb_interval&&Object.hasOwnProperty.call(e,"logic_hb_interval")&&t.uint32(32).uint32(e.logic_hb_interval),null!=e.logic_hb_timeout&&Object.hasOwnProperty.call(e,"logic_hb_timeout")&&t.uint32(40).uint32(e.logic_hb_timeout),null!=e.pc_establish_timeout&&Object.hasOwnProperty.call(e,"pc_establish_timeout")&&t.uint32(48).uint32(e.pc_establish_timeout),null!=e.sdk_link_detect_interval&&Object.hasOwnProperty.call(e,"sdk_link_detect_interval")&&t.uint32(56).uint32(e.sdk_link_detect_interval),null!=e.sdk_link_detect_duration&&Object.hasOwnProperty.call(e,"sdk_link_detect_duration")&&t.uint32(64).uint32(e.sdk_link_detect_duration),null!=e.client_outer_ip&&Object.hasOwnProperty.call(e,"client_outer_ip")&&t.uint32(74).string(e.client_outer_ip),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.GetConfigResponseData;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.quic_hb_interval=e.uint32();break;case 3:o.quic_hb_timeout=e.uint32();break;case 4:o.logic_hb_interval=e.uint32();break;case 5:o.logic_hb_timeout=e.uint32();break;case 6:o.pc_establish_timeout=e.uint32();break;case 7:o.sdk_link_detect_interval=e.uint32();break;case 8:o.sdk_link_detect_duration=e.uint32();break;case 9:o.client_outer_ip=e.string();break;default:e.skipType(7&i)}}return o},e}(),e.GetConfigResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.message="",e.prototype.data=null,e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&a.proto_accesshub.GetConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.GetConfigResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=a.proto_accesshub.GetConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e}(),e.PCUpwardMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.appid=0,e.prototype.biz_type=0,e.prototype.mode_no=0,e.prototype.id_name="",e.prototype.service_no=0,e.prototype.ack=!1,e.prototype.payload=s.newBuffer([]),e.prototype.sdk_type=0,e.prototype.wss_message_type=0,e.prototype.wss_path="",e.prototype.wss_raw_query="",e.prototype.zegoconn_version=0,e.prototype.zegoconn_run_env=0,e.prototype.backend_conn_type=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(48).int32(e.service_no),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(56).bool(e.ack),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(72).int32(e.sdk_type),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(80).uint32(e.wss_message_type),null!=e.wss_path&&Object.hasOwnProperty.call(e,"wss_path")&&t.uint32(90).string(e.wss_path),null!=e.wss_raw_query&&Object.hasOwnProperty.call(e,"wss_raw_query")&&t.uint32(98).string(e.wss_raw_query),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(104).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(112).int32(e.zegoconn_run_env),null!=e.backend_conn_type&&Object.hasOwnProperty.call(e,"backend_conn_type")&&t.uint32(120).int32(e.backend_conn_type),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.PCUpwardMessage;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.service_no=e.int32();break;case 7:o.ack=e.bool();break;case 8:o.payload=e.bytes();break;case 9:o.sdk_type=e.int32();break;case 10:o.wss_message_type=e.uint32();break;case 11:o.wss_path=e.string();break;case 12:o.wss_raw_query=e.string();break;case 13:o.zegoconn_version=e.uint32();break;case 14:o.zegoconn_run_env=e.int32();break;case 15:o.backend_conn_type=e.int32();break;default:e.skipType(7&i)}}return o},e}(),e.PCUpwardMessageAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.PCUpwardMessageAck;e.pos<r;){var i=e.uint32();i>>>3===1?o.txid=e.uint64():e.skipType(7&i)}return o},e}(),e.PCEstablished=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.elapse=0,e.prototype.from=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(8).uint32(e.elapse),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(16).uint32(e.from),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.PCEstablished;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.elapse=e.uint32();break;case 2:o.from=e.uint32();break;default:e.skipType(7&i)}}return o},e}(),e.PCBroken=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.encode=function(e,t){return t||(t=i.create()),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.PCBroken;e.pos<r;){var i=e.uint32();e.skipType(7&i)}return o},e}(),e.PCDownwardMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.payload=s.newBuffer([]),e.prototype.wss_message_type=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(10).bytes(e.payload),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(16).uint32(e.wss_message_type),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.PCDownwardMessage;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.payload=e.bytes();break;case 2:o.wss_message_type=e.uint32();break;default:e.skipType(7&i)}}return o},e}(),e.Redirect=function(){function e(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rand="",e.prototype.secret="",e.prototype.groups=s.emptyArray,e.prototype.opt_ports=s.emptyArray,e.prototype.wss_groups=s.emptyArray,e.encode=function(e,t){if(t||(t=i.create()),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(10).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(18).string(e.secret),null!=e.groups&&e.groups.length)for(var r=0;r<e.groups.length;++r)a.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(26).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(var o=0;o<e.opt_ports.length;++o)t.uint32(32).uint32(e.opt_ports[o]);if(null!=e.wss_groups&&e.wss_groups.length)for(var n=0;n<e.wss_groups.length;++n)a.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[n],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.Redirect;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.rand=e.string();break;case 2:o.secret=e.string();break;case 3:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(a.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 4:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 5:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(a.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},e}(),e.GetAppConfigRequest=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.appid=0,e.prototype.biz_type=0,e.prototype.mode_no=0,e.prototype.id_name="",e.prototype.config_key="",e.prototype.ts=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.signature=s.newBuffer([]),e.prototype.lite_sign="",e.prototype.token="",e.prototype.sdk_type=0,e.prototype.zegoconn_version=0,e.prototype.zegoconn_run_env=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(50).string(e.config_key),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(56).uint64(e.ts),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(66).bytes(e.signature),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).string(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).string(e.token),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(88).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(96).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(104).int32(e.zegoconn_run_env),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.GetAppConfigRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.config_key=e.string();break;case 7:o.ts=e.uint64();break;case 8:o.signature=e.bytes();break;case 9:o.lite_sign=e.string();break;case 10:o.token=e.string();break;case 11:o.sdk_type=e.int32();break;case 12:o.zegoconn_version=e.uint32();break;case 13:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},e}(),e.GetAppConfigResponseData=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.data=s.newBuffer([]),e.prototype.ts=s.Long?s.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.GetAppConfigResponseData;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.data=e.bytes();break;case 3:o.ts=e.uint64();break;default:e.skipType(7&i)}}return o},e}(),e.GetAppConfigResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.message="",e.prototype.data=null,e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&a.proto_accesshub.GetAppConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.GetAppConfigResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=a.proto_accesshub.GetAppConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e}(),e.PushAppConfig=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.config_key="",e.prototype.data=s.newBuffer([]),e.encode=function(e,t){return t||(t=i.create()),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(10).string(e.config_key),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.PushAppConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.config_key=e.string();break;case 2:o.data=e.bytes();break;default:e.skipType(7&i)}}return o},e}(),e.AccesshubDispatchRequest=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.appid=0,e.prototype.biz_type=0,e.prototype.mode_no=0,e.prototype.id_name="",e.prototype.sdk_type=0,e.prototype.zegoconn_version=0,e.prototype.zegoconn_run_env=0,e.encode=function(e,t){return t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(48).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(64).int32(e.zegoconn_run_env),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.AccesshubDispatchRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.sdk_type=e.int32();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},e}(),e.AccesshubDispatchGroup=function(){function e(e){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.group="",e.prototype.quic_nodes=s.emptyArray,e.prototype.mtcp_nodes=s.emptyArray,e.prototype.wss_nodes=s.emptyArray,e.encode=function(e,t){if(t||(t=i.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.quic_nodes&&e.quic_nodes.length)for(var r=0;r<e.quic_nodes.length;++r)t.uint32(18).string(e.quic_nodes[r]);if(null!=e.mtcp_nodes&&e.mtcp_nodes.length)for(var o=0;o<e.mtcp_nodes.length;++o)t.uint32(26).string(e.mtcp_nodes[o]);if(null!=e.wss_nodes&&e.wss_nodes.length)for(var n=0;n<e.wss_nodes.length;++n)t.uint32(34).string(e.wss_nodes[n]);return t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.AccesshubDispatchGroup;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.group=e.string();break;case 2:o.quic_nodes&&o.quic_nodes.length||(o.quic_nodes=[]),o.quic_nodes.push(e.string());break;case 3:o.mtcp_nodes&&o.mtcp_nodes.length||(o.mtcp_nodes=[]),o.mtcp_nodes.push(e.string());break;case 4:o.wss_nodes&&o.wss_nodes.length||(o.wss_nodes=[]),o.wss_nodes.push(e.string());break;default:e.skipType(7&i)}}return o},e}(),e.WssAccesshubDispatchGroup=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.group="",e.prototype.host="",e.prototype.main_domain="",e.encode=function(e,t){return t||(t=i.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.host&&Object.hasOwnProperty.call(e,"host")&&t.uint32(18).string(e.host),null!=e.main_domain&&Object.hasOwnProperty.call(e,"main_domain")&&t.uint32(26).string(e.main_domain),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.WssAccesshubDispatchGroup;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.group=e.string();break;case 2:o.host=e.string();break;case 3:o.main_domain=e.string();break;default:e.skipType(7&i)}}return o},e}(),e.AccesshubDispatchResponseData=function(){function e(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.rand="",e.prototype.secret="",e.prototype.groups=s.emptyArray,e.prototype.opt_ports=s.emptyArray,e.prototype.wss_groups=s.emptyArray,e.encode=function(e,t){if(t||(t=i.create()),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(18).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(26).string(e.secret),null!=e.groups&&e.groups.length)for(var r=0;r<e.groups.length;++r)a.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(34).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(var o=0;o<e.opt_ports.length;++o)t.uint32(40).uint32(e.opt_ports[o]);if(null!=e.wss_groups&&e.wss_groups.length)for(var n=0;n<e.wss_groups.length;++n)a.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.AccesshubDispatchResponseData;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.rand=e.string();break;case 3:o.secret=e.string();break;case 4:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(a.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 5:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 6:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(a.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},e}(),e.AccesshubDispatchResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.message="",e.prototype.data=null,e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&a.proto_accesshub.AccesshubDispatchResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.AccesshubDispatchResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=a.proto_accesshub.AccesshubDispatchResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e}(),e.PushException=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.reason=0,e.prototype.msg="",e.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=i.create()),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(24).uint64(e.txid),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_accesshub.PushException;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.txid=e.uint64();break;default:e.skipType(7&i)}}return o},e}(),e}(),u=a.proto_initconfig=function(){var e={};return e.ResourceType=function(){var e={},t=Object.create(e);return t[e[0]="CDN"]=0,t[e[1]="RTC"]=1,t[e[2]="L3"]=2,t}(),e.ProtocolType=function(){var e={},t=Object.create(e);return t[e[0]="UDP"]=0,t[e[1]="RTMP"]=1,t[e[2]="FLV"]=2,t[e[3]="HLS"]=3,t[e[4]="WEBRTC"]=4,t}(),e.ResolveType=function(){var e={},t=Object.create(e);return t[e[0]="LOCAL_DNS"]=0,t[e[1]="DISPATCH"]=1,t}(),e.AppConfig=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.test_id=null,e.prototype.domain=null,e.prototype.flexible_domain=null,e.prototype.replace_flexible_domain=null,Object.defineProperty(e.prototype,"_test_id",{get:s.oneOfGetter(t=["test_id"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_domain",{get:s.oneOfGetter(t=["domain"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_flexible_domain",{get:s.oneOfGetter(t=["flexible_domain"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_replace_flexible_domain",{get:s.oneOfGetter(t=["replace_flexible_domain"]),set:s.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=i.create()),null!=e.test_id&&Object.hasOwnProperty.call(e,"test_id")&&t.uint32(8).int32(e.test_id),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(18).string(e.domain),null!=e.flexible_domain&&Object.hasOwnProperty.call(e,"flexible_domain")&&t.uint32(26).string(e.flexible_domain),null!=e.replace_flexible_domain&&Object.hasOwnProperty.call(e,"replace_flexible_domain")&&t.uint32(34).string(e.replace_flexible_domain),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_initconfig.AppConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.test_id=e.int32();break;case 2:o.domain=e.string();break;case 3:o.flexible_domain=e.string();break;case 4:o.replace_flexible_domain=e.string();break;default:e.skipType(7&i)}}return o},e}(),e.MediaServiceProtocolInfo=function(){function e(e){if(this.cdn_quic_version=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.config_id=null,e.prototype.protocol=null,e.prototype.url_template=null,e.prototype.resolve_type=null,e.prototype.push_cdn_authentication=null,e.prototype.cdn_quic_version=s.emptyArray,Object.defineProperty(e.prototype,"_config_id",{get:s.oneOfGetter(t=["config_id"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_protocol",{get:s.oneOfGetter(t=["protocol"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_url_template",{get:s.oneOfGetter(t=["url_template"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_resolve_type",{get:s.oneOfGetter(t=["resolve_type"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_push_cdn_authentication",{get:s.oneOfGetter(t=["push_cdn_authentication"]),set:s.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=i.create()),null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(10).string(e.config_id),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).int32(e.protocol),null!=e.url_template&&Object.hasOwnProperty.call(e,"url_template")&&t.uint32(26).string(e.url_template),null!=e.resolve_type&&Object.hasOwnProperty.call(e,"resolve_type")&&t.uint32(32).int32(e.resolve_type),null!=e.push_cdn_authentication&&Object.hasOwnProperty.call(e,"push_cdn_authentication")&&t.uint32(40).int32(e.push_cdn_authentication),null!=e.cdn_quic_version&&e.cdn_quic_version.length){t.uint32(50).fork();for(var r=0;r<e.cdn_quic_version.length;++r)t.int32(e.cdn_quic_version[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_initconfig.MediaServiceProtocolInfo;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.config_id=e.string();break;case 2:o.protocol=e.int32();break;case 3:o.url_template=e.string();break;case 4:o.resolve_type=e.int32();break;case 5:o.push_cdn_authentication=e.int32();break;case 6:if(o.cdn_quic_version&&o.cdn_quic_version.length||(o.cdn_quic_version=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)o.cdn_quic_version.push(e.int32());else o.cdn_quic_version.push(e.int32());break;default:e.skipType(7&i)}}return o},e}(),e.MediaResourceInfo=function(){function e(e){if(this.service_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.resource_type=null,e.prototype.service_info=s.emptyArray,Object.defineProperty(e.prototype,"_resource_type",{get:s.oneOfGetter(t=["resource_type"]),set:s.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=i.create()),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(8).int32(e.resource_type),null!=e.service_info&&e.service_info.length)for(var r=0;r<e.service_info.length;++r)a.proto_initconfig.MediaServiceProtocolInfo.encode(e.service_info[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_initconfig.MediaResourceInfo;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.resource_type=e.int32();break;case 2:o.service_info&&o.service_info.length||(o.service_info=[]),o.service_info.push(a.proto_initconfig.MediaServiceProtocolInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},e}(),e.MediaPublishConfig=function(){function e(e){if(this.resource_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource_info=s.emptyArray,e.encode=function(e,t){if(t||(t=i.create()),null!=e.resource_info&&e.resource_info.length)for(var r=0;r<e.resource_info.length;++r)a.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_initconfig.MediaPublishConfig;e.pos<r;){var i=e.uint32();i>>>3===2?(o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(a.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return o},e}(),e.MediaPlayConfig=function(){function e(e){if(this.resource_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource_info=s.emptyArray,e.encode=function(e,t){if(t||(t=i.create()),null!=e.resource_info&&e.resource_info.length)for(var r=0;r<e.resource_info.length;++r)a.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_initconfig.MediaPlayConfig;e.pos<r;){var i=e.uint32();i>>>3===5?(o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(a.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return o},e}(),e.MediaConfig=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.play_config=null,e.prototype.publish_config=null,Object.defineProperty(e.prototype,"_play_config",{get:s.oneOfGetter(t=["play_config"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_publish_config",{get:s.oneOfGetter(t=["publish_config"]),set:s.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=i.create()),null!=e.play_config&&Object.hasOwnProperty.call(e,"play_config")&&a.proto_initconfig.MediaPlayConfig.encode(e.play_config,t.uint32(10).fork()).ldelim(),null!=e.publish_config&&Object.hasOwnProperty.call(e,"publish_config")&&a.proto_initconfig.MediaPublishConfig.encode(e.publish_config,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_initconfig.MediaConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.play_config=a.proto_initconfig.MediaPlayConfig.decode(e,e.uint32());break;case 2:o.publish_config=a.proto_initconfig.MediaPublishConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e}(),e.InitConfig=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.app_config=null,e.prototype.media_config=null,Object.defineProperty(e.prototype,"_app_config",{get:s.oneOfGetter(t=["app_config"]),set:s.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_media_config",{get:s.oneOfGetter(t=["media_config"]),set:s.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=i.create()),null!=e.app_config&&Object.hasOwnProperty.call(e,"app_config")&&a.proto_initconfig.AppConfig.encode(e.app_config,t.uint32(10).fork()).ldelim(),null!=e.media_config&&Object.hasOwnProperty.call(e,"media_config")&&a.proto_initconfig.MediaConfig.encode(e.media_config,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new a.proto_initconfig.InitConfig;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.app_config=a.proto_initconfig.AppConfig.decode(e,e.uint32());break;case 5:o.media_config=a.proto_initconfig.MediaConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e}(),e}()},function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWssLink=void 0;var a=r(14),c=r(0),u=r(15),l=r(16),d=r(3),h=r(1),p=function(e){function t(t,r,o,n,i){var s=e.call(this)||this;return s.appID=t,s.env=r,s.protobuf=o,s.logger=n,s.stateCenter=i,s.socketService=new l.NetSocketService(s.env),s.urlIndex=0,s.updatedMsgTime=0,s.unUpdateMsgTimeTypes=[c.AccessHubMessageType.MSG_TYPE_HB_REQUEST,c.AccessHubMessageType.MSG_TYPE_HB_RESPONSE,c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE],s.netLinkState=c.ENUM_CONNECT_STATE.disconnect,s.sendCommandList=new a.LinkedList,s.unSendCommandList=new a.LinkedList,s.sendCommandMap={},s.unSendCommandMap={},s.sendDataCheckOnceCount=100,s.sendDataDropTimeout=1e4,s.sendDataCheckInterval=2e3,s.timeout=5e3,s.connectInterval=1e4,s.connectTimer=null,s.connectRsp={},s.unlogTypes=[12,13],s.tryServers=[],s.updatedMsgTime=Date.now(),s}return n(t,e),t.prototype.initEvent=function(e,t,r,o){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onConnectingEvent=r,this.onPushEvent=o},t.prototype.createSocket=function(e){this.servers=e,this.urlIndex=0},t.prototype.destroySocket=function(){this.logger.info("zn.wl.ds.0 call"),this.socketService.closeSocket(),this.netLinkState=c.ENUM_CONNECT_STATE.disconnect,this.resetConnect()},t.prototype.refreshServers=function(e){this.servers=s(s([],e,!0),this.servers,!0)},t.prototype.connectSocket=function(e,t,r){var o=this;if(void 0===e&&(e=!0),this.logger.info("zn.wl.cs.0 call"),this.connectRsp.suc=t,this.connectRsp.fail=r,this.stateCenter.networkState!==c.ENUM_NETWORK_STATE.online)return!1;e&&(this.urlIndex=(this.urlIndex+1)%this.servers.length);var n=this.servers[this.urlIndex];return this.connectServer=n,this.logger.info("zn.wl.cs.0 server "+n),this.tryServers.push(n),this.closeSocket(),this.netLinkState=c.ENUM_CONNECT_STATE.connecting,this.socketService.createSocket(n),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout((function(){o.logger.info("zn.wl.cs.0 timeout"),o.connectRsp.fail&&o.connectRsp.fail()}),this.connectInterval),!0},t.prototype.bindSocketEvent=function(){var e=this;this.openHandler((function(){e.logger.info("zn.wl.bse open"),e.resetConnect(),e.connectRsp.suc&&e.connectRsp.suc(),e.netLinkState=c.ENUM_CONNECT_STATE.connected,e.onConnectedEvent&&e.onConnectedEvent(e.tryServers),e.checkUnSendMsgs(e.unSendCommandList),e.startCheck()})),this.closeHandler((function(t){e.logger.warn("zn.wl.bse close "+JSON.stringify(t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=c.ENUM_CONNECT_STATE.disconnect})),this.errorHandler((function(t){e.logger.warn("zn.wl.bse error "+JSON.stringify(t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=c.ENUM_CONNECT_STATE.disconnect})),this.onMessage()},t.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=c.ENUM_CONNECT_STATE.disconnect},t.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},t.prototype.isConnect=function(){return this.netLinkState===c.ENUM_CONNECT_STATE.connected},t.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},t.prototype.isConnecting=function(){return this.netLinkState===c.ENUM_CONNECT_STATE.connecting},t.prototype.setState=function(e){this.netLinkState=e},t.prototype.closeHandler=function(e){this.socketService.closeHandler(e)},t.prototype.openHandler=function(e){this.socketService.openHandler(e)},t.prototype.errorHandler=function(e){this.socketService.errorHandler(e)},t.prototype.updateMsgTime=function(){this.updatedMsgTime=Date.now()},t.prototype.sendMessage=function(e,t,r,o,n,s,a,u){var l;void 0===o&&(o=!0),void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===u&&(u={}),void 0===u.timeout&&(u.timeout=5e3),void 0===u.isInSendMap&&(u.isInSendMap=!0),this.txid++;var d={appid:this.appID,biz_type:0,mode_no:(null===(l=this.stateCenter.appInfo)||void 0===l?void 0:l.mode)||h.NET_ACCESS_CONFIG.modeNo,id_name:this.stateCenter.userId,sdk_type:h.NET_ACCESS_CONFIG.sdkType,zegoconn_run_env:0===this.env?c.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER:c.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET},p=i(i({txid:this.txid},d),r),f={data:p,txid:this.txid,sendTime:Date.now(),streamID:t,type:e,timeOut:u.timeout||this.timeout,ack:r.ack,success:n,error:s,ackFunc:a,isSend:!0,isCheck:e!==c.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE};if(u.isInSendMap){var _=this.sendCommandList.push(f);this.sendCommandMap[this.txid]=_}if(this.unUpdateMsgTimeTypes.includes(e)||(this.updatedMsgTime=Date.now()),-1===this.unlogTypes.indexOf(e)&&this.logger.info("zn.wl.sm type: "+e+"-"+c.typeMap[e]+" streamID: "+t+" txid: "+this.txid),this.isConnect())this.sendUint8Data(e,p,t);else{f.isSend=!1;var g=this.unSendCommandList.push(f);this.unSendCommandMap[this.txid]=g}},t.prototype.checkUnSendMsgs=function(e){for(var t,r=e.getFirst();null!=r;)e.remove(r),r._data&&!1===(null===(t=r._data)||void 0===t?void 0:t.isSend)&&r._data.type&&r._data.streamID&&r._data.data&&(this.sendUint8Data(r._data.type,r._data.data,r._data.streamID),r._data.isSend=!0),r=e.getFirst()},t.prototype.sendUint8Data=function(e,t,r){var o=this.protobuf.encodeRequest(e,t,r);this.socketService.sendMessage(o)},t.prototype.onMessage=function(){var e=this;this.socketService.onMessage=function(t){var r,o,n,i=new Uint8Array(t),s=e.protobuf.decodeResponse(i),a=s[0],u=s[1],l=s[2];e.unUpdateMsgTimeTypes.includes(u)||(e.updatedMsgTime=Date.now()),-1===e.unlogTypes.indexOf(u)&&e.logger.info("zn.wl.om"+" streamID: ".concat(a,", msgType: ").concat(u,"-").concat(c.typeMap[u])),((null==l?void 0:l.txid)||(null===(r=null==l?void 0:l.data)||void 0===r?void 0:r.txid))&&e.isRspMsg((null==l?void 0:l.txid)||(null===(o=null==l?void 0:l.data)||void 0===o?void 0:o.txid))?e.handleSendCommandMsgRsp(a,u,(null==l?void 0:l.txid)||(null===(n=null==l?void 0:l.data)||void 0===n?void 0:n.txid),l):e.onPushEvent(a,u,l)}},t.prototype.isRspMsg=function(e){return void 0!==this.sendCommandMap[e]},t.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},t.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},t.prototype.checkMessageListTimeout=function(e,t){for(var r,o=e.getFirst(),n=Date.now(),i=0,s=function(){if(o._data&&o._data.sendTime+o._data.timeOut>n)return"break";if(o._data&&delete t[o._data.data.txid],e.remove(o),o._data&&null==o._data.error||o._data&&o._data.sendTime+a.sendDataDropTimeout<n);else{var s=o&&o._data&&o._data.error,c=o&&o._data&&o._data.txid,u=o&&o._data&&(null===(r=o._data)||void 0===r?void 0:r.isCheck);setTimeout((function(){u&&s&&s({},c,d.errorCodeList.TIMEOUT)}),0)}if(++i>=a.sendDataCheckOnceCount)return"break";o=e.getFirst()},a=this;null!=o&&"break"!==s(););},t.prototype.checkSendMessageList=function(e){for(var t,r=e.getFirst(),o=function(){if(e.remove(r),r._data.isSend&&r._data.error){var o=r&&r._data&&r._data.error,n=r&&r._data&&r._data.txid,i=r&&r._data&&(null===(t=r._data)||void 0===t?void 0:t.isCheck);setTimeout((function(){i&&o&&o({},n,d.errorCodeList.TIMEOUT)}),0)}r=e.getFirst()};null!=r&&r._data;)o()},t.prototype.handleSendCommandMsgRsp=function(e,t,r,o){var n=this.sendCommandMap[r];if(null!=n){var i=n._data;(null==i?void 0:i.ack)||(delete this.sendCommandMap[r],this.sendCommandList.remove(n)),o.code&&0!==o.code?i&&null!=i.error&&i.error(o,r):t===c.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION?(o.code=o.reason,o.message=o.msg,i&&null!=i.error&&i.error(o,r)):t===c.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK?i&&null!=i.ackFunc&&i.ackFunc(o,r):i&&null!=i.success&&i.success(o,r)}},t}(u.ZegoLink);t.ZegoWssLink=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=void 0;var o=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=o;var n=function(){function e(){this.start=new o,this.end=new o,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var r=new o(this._idCounter,t);return r.next=e,r.prev=e.prev,e.prev&&(e.prev.next=r),e.prev=r,++this._idCounter,++this._numNodes,r},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(e>=0)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,r=!1,o=null;t.hasNext()&&!r;)e(t=t.next)&&(o=t,r=!0);return o},e.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this._numNodes>0?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLink=void 0;var o=function(){function e(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}return e.prototype.createSocket=function(e){},e.prototype.setState=function(e){},e.prototype.initEvent=function(e,t,r,o){},e.prototype.sendMessage=function(e,t,r,o,n,i,s,a){void 0===o&&(o=!0),void 0===n&&(n=null),void 0===i&&(i=null),void 0===s&&(s=null),void 0===a&&(a={timeout:5e3,isInSendMap:!0})},e}();t.ZegoLink=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetSocketService=void 0;var o=r(17),n=function(){function e(e){this.socket=null,this.ENV=e}return e.prototype.createSocket=function(e){this.socket=(0,o.createZegoWebSocket)(e,this.ENV%2)},e.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.socket.binaryType="arraybuffer",t.responseHandler(),e(r)})},e.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){var r="string"==typeof t.data?JSON.parse(t.data):t.data;e.onMessage(r)})},e.prototype.onMessage=function(e){},e.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},e.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},e.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},e.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},e.prototype.sendMessage=function(e){this.isDisConnect()||this.socket&&(this.ENV%2==1||this.socket.send(e))},e}();t.NetSocketService=n},function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=t.ZEGO_ENV=void 0,function(e){e[e.BROWSER=0]="BROWSER",e[e.WEIXINMINI=1]="WEIXINMINI"}(o=t.ZEGO_ENV||(t.ZEGO_ENV={}));var n=function(){function e(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}return e.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},e.prototype.onopen=function(e){},e.prototype.onerror=function(e){},e.prototype.onclose=function(e){},e.prototype.onmessage=function(e){},e.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},e.prototype.close=function(){this._websocket&&this._websocket.close()},e}();t.ZegoWeiXinMiniWebSocket=n,t.createZegoWebSocket=function(e,t){return t%2===o.BROWSER?new WebSocket(e):new n(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentBusinessRequestMgr=void 0;var o=r(0),n=r(1),i=function(){function e(e,t,r,o){this.streamManager=e,this.protobuf=t,this.logger=r,this.stateCenter=o}return e.prototype.getConfig=function(e,t){this.logger.info("zn.nab.gc call"),this.streamManager.createStream(o.StreamType.OTHER).sendMessage(o.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,{zegoconn_version:n.NET_ACCESS_CONFIG.connectVer},e,t)},e.prototype.dispatchURL=function(e,t){var r=this;this.logger.info("zn.nab.du call"),this.streamManager.createStream(o.StreamType.OTHER).sendMessage(o.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST,{},(function(t){r.logger.info("zn.nab.du suc "),e&&e(t)}),(function(e,o,n){r.logger.info("zn.nab.du fail"),t&&t(n||e)}))},e.prototype.getAppConfig=function(e,t,r,i){var s=this;return new Promise((function(a,c){var u;s.logger.info("zn.nab.gac call");var l={id_name:t,config_key:e,token:r,mode_no:(null===(u=s.stateCenter.appInfo)||void 0===u?void 0:u.mode)||n.NET_ACCESS_CONFIG.modeNo},d=function(e,t,r){if(r)return s.logger.error("zn.nab.gac fail "+JSON.stringify(r)),void c(r);if(0===e.code){s.logger.info("zn.nab.gac suc");var o=s.decodeConfigMessage(e.data.data);a({code:0,data:o})}else s.logger.error("zn.nab.gac fail "+e.code),c({code:e.code})};s.streamManager.createStream(o.StreamType.OTHER).sendMessage(o.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST,l,d,d,null,{timeout:i})}))},e.prototype.decodeConfigMessage=function(e){return this.protobuf.decodeConfigMessage(e)},e}();t.NetAgentBusinessRequestMgr=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetHeartBeatHandler=void 0;var o=r(3),n=r(0),i=function(){function e(e,t){this.streamManager=e,this.logger=t,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}return e.prototype.init=function(e){var t=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(n.StreamType.OTHER)),e.data.logic_hb_interval>=1&&e.data.logic_hb_interval<=10&&(this.hbInterval=e.data.logic_hb_interval),e.data.logic_hb_timeout>=3&&e.data.logic_hb_timeout<=30&&(this.hbTimeout=e.data.logic_hb_timeout),this.tryHbCount=0,this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){t.start()}),1e3*this.hbInterval)},e.prototype.start=function(){var e=this;if(this.logger.debug("zn.nhb.s call "),this.tryHbCount++>this.hbTimeoutMaxCount)return this.logger.error("zn.nhb.s come to try limit"),this.reset(),void this.netHbLogout(o.errorCodeList.NET_HB_TIMEOUT);var t=(new Date).getTime(),r=function(r,o,n){e.logger.debug("zn.nhb.s hb callback "+((new Date).getTime()-t)),n&&0!==(null==n?void 0:n.code)?e.logger.info("zn.nhb.s fail "+JSON.stringify(n)):e.tryHbCount=0},i={ts:Date.now()};this.hbStream.sendMessage(n.AccessHubMessageType.MSG_TYPE_HB_REQUEST,i,r,r,null),this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){e.start()}),1e3*this.hbInterval)},e.prototype.netHbLogout=function(e){},e.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},e}();t.NetHeartBeatHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequestMgr=void 0;var o=r(0),n=r(1),i=r(5),s=function(){function e(e,t){this.streamManager=e,this.logger=t,this.pcStreamRequests=[],this.pcEstablishTimeout=n.NET_ACCESS_CONFIG.pcEstablishTimeout}return e.prototype.getRequest=function(e,t){var r=new i.NetAgentPCRequest(this.logger,e,this.streamManager,this.pcEstablishTimeout,t);return this.pcStreamRequests.push(r),r},e.prototype.updateConnectState=function(e,t,r){this.pcStreamRequests.forEach((function(n){e===o.PcConnectState.BROKEN?n.eventManager.emit("broken"):e===o.PcConnectState.DISCONNECT&&n.eventManager.emit("disconnected",t,r)}))},e.prototype.closePCs=function(){this.pcStreamRequests.forEach((function(e){e.closePc()}))},e.prototype.setEstablishTimeout=function(e){this.pcEstablishTimeout=e},e}();t.NetAgentPCRequestMgr=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetRetryLinkHandler=void 0;var o=r(3),n=r(0),i=function(){function e(e,t){this.logger=e,this.stateCenter=t,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1,this.RETRY_MAX_TIME=90}return e.prototype.initLink=function(e){this.link=e},e.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.warn("zn.rlh.sm"+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.link.destroySocket(),e.stopMaxTime(),e.invalid(),e.onactive(!1,o.errorCodeList.NET_SOCKET_TIMEOUT)}),1e3*this.RETRY_MAX_TIME))},e.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},e.prototype.active=function(e,t){var r=this;if(this.logger.info("zn.rlh.at call "+e+" "+t),this.stateCenter.networkState==n.ENUM_NETWORK_STATE.offline)return this.logger.info("zn.rlh.at network is broken, stop retry"),!1;if(this.retryTimer)return this.logger.info("zn.rlh.at has actived, ignore"),!1;if(this.isOverTime)return this.logger.info("zn.rlh.at retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var o=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=o>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:o}return this.logger.info("zn.rlh.at interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){r.link.destroySocket(),r.link.connectSocket(e,(function(){r.logger.info("zn.rlh.at suc"),r.stopMaxTime(),r.invalid(),r.onactive(!0)}),(function(){r.logger.info("zn.rlh.at fail"),!r.maxTimer&&r.startMaxTime(),r.active(!0)})),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,r.retryActiveCount++}),t?0:1e3*this.retryActiveInterval),!0},e.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.init=function(e,t,r,o){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof o&&(this.RETRY_MAX_TIME_INTERVAL=o)},e.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},e}();t.NetRetryLinkHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var o=r(0);t.StateCenter=function(){this.networkState=o.ENUM_NETWORK_STATE.offline,this.useNetAgent=!0,this.specified=!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0;var o=function(){function e(){}return e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},e}();t.ZegoLogger=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var o=r(0),n=r(25),i=function(){function e(e){this.zegoLink=e,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}return e.prototype.createStream=function(e){if(e===o.StreamType.HTTP)return this.getStream(e,this.httpStreams);if(e===o.StreamType.PC){var t=new n.ZegoLinkStream(e,this.streamID++,this.zegoLink);return this.pcStreams.push(t),t}return this.getStream(e,this.httpStreams)},e.prototype.getStream=function(e,t){var r=t.find((function(e){return!0===e.isFree}));if(r)return r.isFree=!1,r.isFirst=!1,r;var o=new n.ZegoLinkStream(e,this.streamID++,this.zegoLink);return this.httpStreams.push(o),o},e.prototype.onPushEvent=function(e,t,r){var o=this.pcStreams.find((function(t){return t.StreamID===e}));o&&o.onPushEvent(t,r)},e.prototype.getStreamID=function(){return this.streamID++},e}();t.StreamManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLinkStream=void 0;var o=r(0),n=function(){function e(e,t,r){this.type=e,this.streamID=t,this.zegoLink=r,this.isFree=!1,this.isFirst=!0}return Object.defineProperty(e.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),e.prototype.refresh=function(e){this.streamID=e},e.prototype.sendMessage=function(e,t,r,n,i,s){var a=this;void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===s&&(s={timeout:5e3,isInSendMap:!0}),this.zegoLink.sendMessage(e,this.streamID,t,this.isFirst,(function(e){a.type!==o.StreamType.PC&&(a.isFree=!0),r&&r(e)}),(function(e,t,r){a.type!==o.StreamType.PC&&(a.isFree=!0),n&&n(e,t,r)}),i,s)},e.prototype.onPushEvent=function(e,t){},e.prototype.closeStream=function(e,t){this.zegoLink.sendMessage(o.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:e,msg:t})},e.prototype.isConnect=function(){return this.zegoLink.isConnect()},e}();t.ZegoLinkStream=n}]))},function(e,t,r){var o=r(13),n=r(20),i=r(82),s=r(89),a=r(263),c=r(17),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=o(c,e,t),!n(r)||i(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},function(e,t,r){var o=r(269);e.exports=function(e,t){return new(o(e))(0===t?0:t)}},function(e,t,r){"use strict";var o=r(6),n=r(13),i=r(44),s=r(96),a=r(15),c=r(221),u=r(113),l=r(75),d=r(72),h=r(51),p=r(24),f=r(17),_=r(93),g=r(198),m=s.PROPER,v=s.CONFIGURABLE,y=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,S=f("iterator"),E=function(){return this};e.exports=function(e,t,r,s,f,g,T){c(r,t,s);var w,C,I,O=function(e){if(e===f&&L)return L;if(!b&&e in A)return A[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},k=t+" Iterator",R=!1,A=e.prototype,P=A[S]||A["@@iterator"]||f&&A[f],L=!b&&P||O(f),N="Array"==t&&A.entries||P;if(N&&(w=u(N.call(new e)))!==Object.prototype&&w.next&&(i||u(w)===y||(l?l(w,y):a(w[S])||p(w,S,E)),d(w,k,!0,!0),i&&(_[k]=E)),m&&"values"==f&&P&&"values"!==P.name&&(!i&&v?h(A,"name","values"):(R=!0,L=function(){return n(P,this)})),f)if(C={values:O("values"),keys:g?L:O("keys"),entries:O("entries")},T)for(I in C)(b||R||!(I in A))&&p(A,I,C[I]);else o({target:t,proto:!0,forced:b||R},C);return i&&!T||A[S]===L||p(A,S,L,{name:f}),_[t]=L,C}},function(e,t,r){"use strict";var o=r(29),n=r(59),i=r(30);e.exports=function(e){for(var t=o(this),r=i(t),s=arguments.length,a=n(s>1?arguments[1]:void 0,r),c=s>2?arguments[2]:void 0,u=void 0===c?r:n(c,r);u>a;)t[a++]=e;return t}},function(e,t,r){"use strict";var o=r(6),n=r(31).find,i=r(108),s=!0;"find"in[]&&Array(1).find((function(){s=!1})),o({target:"Array",proto:!0,forced:s},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(e,t,r){"use strict";var o=r(6),n=r(31).findIndex,i=r(108),s=!0;"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),o({target:"Array",proto:!0,forced:s},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return f})),r(67),r(374),r(77),r(25),r(47);var o=r(251),n=r.n(o),i=r(156),s=r.n(i),a=r(252),c=r.n(a),u=r(253),l=r.n(u),d=r(88),h=function(e,t){return s.a.stringify(c()(t,e))},p=function(e){var t=Math.max.apply(Math,d.a.file_type_size_limit.map((function(e){return e[1]})))/1024/1024,r=e.access_key_id,o=e.access_key_secret,i=e.bucket_name,s=e.security_token,a=e.endpoint,c=e.object_name,u=e.timeout,l=void 0===u?1:u,p=e.maxSize,f=function(e,t){var r=new Date;r.setHours(r.getHours()+e);var o={expiration:r.toISOString(),conditions:[["content-length-range",0,1024*t*1024]]};return n.a.Base64.encode(JSON.stringify(o))}(l,void 0===p?t:p);return{url:"https://"+i+"."+a,signature:h(o,f),securityToken:s,policy:f,key:c,OSSAccessKeyId:r,successActionStatus:"200",objectName:c}},f=function(e){return new Promise((function(t,r){try{var o=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,n=Math.ceil(e.size/1048576),i=new l.a.ArrayBuffer,s=0,a=new FileReader;a.onload=function(){var e=a.result||a.content;e?(i.append(e),++s<n?c():t(i.end())):r({code:2020006,message:"\u6587\u4ef6\u5185\u5bb9\u4e3a\u7a7a"})},a.onerror=function(){r({code:2010001,message:"\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u672c\u5730\u6587\u4ef6"})};var c=function(){var t=1048576*s,r=t+1048576>=e.size?e.size:t+1048576,n=o.call(e,t,r);a.readAsArrayBuffer(n)};c()}catch(e){r(e)}}))}},function(e,t,r){"use strict";r(37);var o=r(7),n=r(24),i=r(112),s=r(8),a=r(17),c=r(51),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!p||!f||r){var _=o(/./[h]),g=t(h,""[e],(function(e,t,r,n,s){var a=o(e),c=t.exec;return c===i||c===l.exec?p&&!s?{done:!0,value:_(t,r,n)}:{done:!0,value:a(r,t,n)}:{done:!1}}));n(String.prototype,e,g[0]),n(l,h,g[1])}d&&c(l[h],"sham",!0)}},function(e,t,r){"use strict";var o=r(172).charAt;e.exports=function(e,t,r){return t+(r?o(e,t).length:1)}},function(e,t,r){var o=r(7),n=r(42),i=r(23),s=r(48),a=o("".charAt),c=o("".charCodeAt),u=o("".slice),l=function(e){return function(t,r){var o,l,d=i(s(t)),h=n(r),p=d.length;return h<0||h>=p?e?"":void 0:(o=c(d,h))<55296||o>56319||h+1===p||(l=c(d,h+1))<56320||l>57343?e?a(d,h):o:e?u(d,h,h+2):l-56320+(o-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},function(e,t,r){var o=r(13),n=r(14),i=r(15),s=r(64),a=r(112),c=TypeError;e.exports=function(e,t){var r=e.exec;if(i(r)){var u=o(r,e,t);return null!==u&&n(u),u}if("RegExp"===s(e))return o(a,e,t);throw c("RegExp#exec called on incompatible receiver")}},function(e,t,r){"use strict";var o=r(11),n=r(7),i=r(19),s=r(175),a=r(96),c=r(51),u=r(182),l=r(8),d=r(86),h=r(42),p=r(45),f=r(199),_=r(272),g=r(113),m=r(75),v=r(74).f,y=r(22).f,b=r(166),S=r(102),E=r(72),T=r(40),w=a.PROPER,C=a.CONFIGURABLE,I=T.get,O=T.set,k=o.ArrayBuffer,R=k,A=R&&R.prototype,P=o.DataView,L=P&&P.prototype,N=Object.prototype,D=o.Array,M=o.RangeError,x=n(b),B=n([].reverse),U=_.pack,j=_.unpack,H=function(e){return[255&e]},z=function(e){return[255&e,e>>8&255]},V=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},q=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},G=function(e){return U(e,23,4)},Z=function(e){return U(e,52,8)},F=function(e,t){y(e.prototype,t,{get:function(){return I(this)[t]}})},W=function(e,t,r,o){var n=f(r),i=I(e);if(n+t>i.byteLength)throw M("Wrong index");var s=I(i.buffer).bytes,a=n+i.byteOffset,c=S(s,a,a+t);return o?c:B(c)},Y=function(e,t,r,o,n,i){var s=f(r),a=I(e);if(s+t>a.byteLength)throw M("Wrong index");for(var c=I(a.buffer).bytes,u=s+a.byteOffset,l=o(+n),d=0;d<t;d++)c[u+d]=l[i?d:t-d-1]};if(s){var Q=w&&"ArrayBuffer"!==k.name;if(l((function(){k(1)}))&&l((function(){new k(-1)}))&&!l((function(){return new k,new k(1.5),new k(NaN),Q&&!C})))Q&&C&&c(k,"name","ArrayBuffer");else{(R=function(e){return d(this,A),new k(f(e))}).prototype=A;for(var K,J=v(k),X=0;J.length>X;)(K=J[X++])in R||c(R,K,k[K]);A.constructor=R}m&&g(L)!==N&&m(L,N);var $=new P(new R(2)),ee=n(L.setInt8);$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||u(L,{setInt8:function(e,t){ee(this,e,t<<24>>24)},setUint8:function(e,t){ee(this,e,t<<24>>24)}},{unsafe:!0})}else A=(R=function(e){d(this,A);var t=f(e);O(this,{bytes:x(D(t),0),byteLength:t}),i||(this.byteLength=t)}).prototype,L=(P=function(e,t,r){d(this,L),d(e,A);var o=I(e).byteLength,n=h(t);if(n<0||n>o)throw M("Wrong offset");if(n+(r=void 0===r?o-n:p(r))>o)throw M("Wrong length");O(this,{buffer:e,byteLength:r,byteOffset:n}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=n)}).prototype,i&&(F(R,"byteLength"),F(P,"buffer"),F(P,"byteLength"),F(P,"byteOffset")),u(L,{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return q(W(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return q(W(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return j(W(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return j(W(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Y(this,1,e,H,t)},setUint8:function(e,t){Y(this,1,e,H,t)},setInt16:function(e,t){Y(this,2,e,z,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Y(this,2,e,z,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Y(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Y(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Y(this,4,e,G,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Y(this,8,e,Z,t,arguments.length>2?arguments[2]:void 0)}});E(R,"ArrayBuffer"),E(P,"DataView"),e.exports={ArrayBuffer:R,DataView:P}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,r){var o=r(17),n=r(93),i=o("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||s[i]===e)}},function(e,t,r){"use strict";var o=r(32),n=r(22),i=r(17),s=r(19),a=i("species");e.exports=function(e){var t=o(e),r=n.f;s&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,r){var o=r(15),n=r(20),i=r(75);e.exports=function(e,t,r){var s,a;return i&&o(s=t.constructor)&&s!==r&&n(a=s.prototype)&&a!==r.prototype&&i(e,a),e}},function(e,t,r){"use strict";var o=r(70),n=TypeError;e.exports=function(e,t){if(!delete e[t])throw n("Cannot delete property "+o(t)+" of "+o(e))}},function(e,t){var r=TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r(25),r(47),r(60),r(61),r(62),r(36),r(46),r(53),r(124),r(87),r(37),r(67),r(85),r(167),r(106),r(126),r(127),r(128),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(136),r(137),r(138),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150);var o,n,i=r(28),s=r(162),a=r(4),c=r(1),u=r(2),l=r(343);!function(e){e[e.prod=1]="prod",e[e.test=2]="test"}(o||(o={})),function(e){e[e.BROWSER=0]="BROWSER",e[e.WEIXINMINI=1]="WEIXINMINI"}(n||(n={}));var d=function(){function e(){this.accesshub=new s.ZegoConnectionAgent,this.updateDispatchServers=[],this.accesshubInit()}return e.getInstance=function(){return 0===Object.keys(this.instance).length&&e.accesshubConfig.appID&&(this.instance=new e),this.instance},e.destroyInstance=function(){this.instance={}},e.prototype.accesshubInit=function(){c.a.getInstance().info1(u.a.AccesshubInit,"start call"),this.accesshub.init(),this.bindDispatchResultUpdate(),this.bindDisconnected(),this.bindConnected(),this.bindBroken();var t="alpha"===e.accesshubConfig.env,r="prod"===e.accesshubConfig.env;this.accesshub.setAppInfo({appID:e.accesshubConfig.appID,env:0,mode:t||r?1:2}),this.accesshub.setUserInfo(e.accesshubConfig.userID),this.accesshubDefaultServers=["wss://accesshub-wss.zego.im/accesshub"],this.accesshub.setNetAgentDefaultServers(this.accesshubDefaultServers);var o=this.getDispatchServers();this.accesshub.setDispatchConnectServers(o),this.accesshub.getAppConfigByAgent("init",e.accesshubConfig.token).then((function(t){0===t.code?(c.a.getInstance().setDomain(t.data.app_config.domain),c.a.getInstance().setUploadConfig(e.accesshubConfig)):c.a.getInstance().error1(u.a.GetAppConfigByAgent,t.code)})).catch((function(e){throw c.a.getInstance().error1(u.a.GetAppConfigByAgent,e),e})),c.a.getInstance().info1(u.a.AccesshubInit,{appID:e.accesshubConfig.appID,env:0,mode:t||r?1:2,userID:e.accesshubConfig.userID,DefaultServers:this.accesshubDefaultServers,dispatchServers:o})},e.prototype.bindDispatchResultUpdate=function(){this.accesshub.on("dispatchResultUpdate",(function(e){c.a.getInstance().info1(u.a.Accesshub_dispatchResultUpdate,e.serversp),e&&e.servers&&localStorage.setItem("accesshubDispatchServers",JSON.stringify(e.servers))}))},e.prototype.bindDisconnected=function(){this.accesshub.on("disconnected",(function(e){c.a.getInstance().warn1(u.a.Accesshub_disconnected,e)}))},e.prototype.bindConnected=function(){this.accesshub.on("connected",(function(e){c.a.getInstance().info1(u.a.Accesshub_connected,"accesshub connected"),a.f.emit(a.d.AccesshubConnected,{})}))},e.prototype.bindBroken=function(){this.accesshub.on("broken",(function(e){c.a.getInstance().warn1(u.a.Accesshub_broken,"accesshub broken")}))},e.prototype.getDispatchServers=function(){var e=localStorage.getItem("accesshubDispatchServers"),t=[];return e&&(t=JSON.parse(e)),t},e.prototype.destroyAccesshub=function(){this.accesshub.destroyConnect()},e.prototype.unInit=function(){this.accesshub.unInit()},e.prototype.isConnected=function(){return this.accesshub.isConnect()},e.setAccesshubConfig=function(t){e.accesshubConfig=t},e.prototype.axios=function(e){return this.request(e)},e.prototype.request=function(t){var r=this;return c.a.getInstance().info1(u.a.StartHttpRequest_start,{fileid:t.data.file_id,time:(new Date).toLocaleString()}),new Promise((function(o,n){return function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}(r,void 0,void 0,(function(){var r,a,d,h,p,f,_,g;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(m){return r=t.url.split("/"),a="/"+r[3]+"/"+r[4],d=t.data,h=s.BusinessService.SERVICE_DOCSERVICE,p=d,f=e.accesshubConfig.userID,_=s.Method.METHOD_POST,g={service:h,body:p,ack:!1,idName:f,method_no:_,location:a,headers:[{name:"Accept-Encoding",val:"gzip"}]},this.accesshub.startHttpRequest(g,(function(e){var r;if(200===e.status_code){var i=e.headers.find((function(e){return"Content-Encoding"==e.name}));if(i&&"gzip"===i.val){var s=new Uint8Array(e.body);r=l.inflate(s,{to:"string"})}else r=e.body;var a={data:JSON.parse(r)};o(a),c.a.getInstance().info1(u.a.StartHttpRequest_end,{fileid:t.data.file_id,time:(new Date).toLocaleString()})}else{var d={code:e.status_code,msg:e.body};c.a.getInstance().error1(u.a.StartHttpRequest,{rej:d}),n(e)}}),(function(e){c.a.getInstance().warn1(u.a.StartHttpRequest,{err:e}),n(e)}),(function(e){}),{timeout:i.d}),[2]}))}))}))},e.instance={},e}(),h=r(78),p=r.n(h),f=function(){function e(){p.a.defaults.timeout=i.b}return e.getInstance=function(){return 0===Object.keys(this.instance).length&&(this.instance=new e),this.instance},e.prototype.axios=function(e){return p()(e)},e.setAccesshubConfig=function(e){},e.instance={},e}(),_=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},g=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},m=function(){function e(){this.api={},a.f.on("disconnected",(function(){c.a.getInstance().warn1(u.a.Disconnected,"\u7edf\u4e00\u63a5\u5165\u8fde\u63a5\u5df2\u65ad\u5f00")}))}return e.getInstance=function(){return 0===Object.keys(this.instance).length&&(this.instance=new e),this.instance},e.prototype.axios=function(t){return e.instance.api.axios(t)},e.setAccesshubConfig=function(t){return _(this,void 0,void 0,(function(){var r=this;return g(this,(function(o){return c.a.getInstance().info1(u.a.SetAccesshubConfig,{isAccesshub:t.isAccesshub}),[2,new Promise((function(o){return _(r,void 0,void 0,(function(){var r;return g(this,(function(n){switch(n.label){case 0:return r=!0,e.instance.api.unInit&&(e.instance.api.unInit(),e.instance.api.destroyAccesshub(),d.destroyInstance()),e.accesshubConfig=t,t.isAccesshub?(d.setAccesshubConfig(t),e.instance.api=d.getInstance(),[4,this.waitHttpInit()]):[3,2];case 1:return r=n.sent(),c.a.getInstance().info1(u.a.WaitHttpInit,r),r||(e.instance.api=f.getInstance(),a.f.emit(a.d.DirectConnected),c.a.getInstance().setUploadConfig(t)),[3,3];case 2:e.instance.api=f.getInstance(),a.f.emit(a.d.DirectConnected),c.a.getInstance().setUploadConfig(t),n.label=3;case 3:return o(r),[2]}}))}))}))]}))}))},e.waitHttpInit=function(){return new Promise((function(t){var r=setTimeout((function(){e.instance.api.unInit(),e.instance.api.destroyAccesshub(),d.destroyInstance(),t(!1)}),12e3);a.f.on(a.d.AccesshubConnected,(function(){t(!0),clearTimeout(r)}))}))},e.instance={},e.accesshubConnected=!0,e}()},function(e,t,r){var o=r(24);e.exports=function(e,t,r){for(var n in t)o(e,n,t[n],r);return e}},function(e,t,r){var o=r(27),n=r(29),i=r(91),s=r(30),a=TypeError,c=function(e){return function(t,r,c,u){o(r);var l=n(t),d=i(l),h=s(l),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in d){u=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw a("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(u=r(u,d[p],p,l));return u}};e.exports={left:c(!1),right:c(!0)}},function(e,t,r){"use strict";var o=r(6),n=r(7),i=r(101),s=n([].reverse),a=[1,2];o({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),s(this)}})},function(e,t,r){var o=r(102),n=Math.floor,i=function(e,t){for(var r,o,n=e.length,i=1;i<n;){for(o=i,r=e[i];o&&t(e[o-1],r)>0;)e[o]=e[--o];o!==i++&&(e[o]=r)}return e},s=function(e,t,r,o){for(var n=t.length,i=r.length,s=0,a=0;s<n||a<i;)e[s+a]=s<n&&a<i?o(t[s],r[a])<=0?t[s++]:r[a++]:s<n?t[s++]:r[a++];return e};e.exports=function e(t,r){var a=t.length,c=n(a/2);return a<8?i(t,r):s(t,e(o(t,0,c),r),e(o(t,c),r),r)}},function(e,t,r){"use strict";var o=r(6),n=r(31).some;o({target:"Array",proto:!0,forced:!r(83)("some")},{some:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,r){"use strict";(function(e){var o=t;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)void 0!==e[o[n]]&&r||(e[o[n]]=t[o[n]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(288),o.base64=r(289),o.EventEmitter=r(290),o.float=r(291),o.inquire=r(292),o.utf8=r(293),o.pool=r(294),o.LongBits=r(415),o.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),o.global=o.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}}).call(this,r(153))},function(e,t,r){var o=r(79);e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,r){var o=r(19),n=r(8),i=r(117);e.exports=!o&&!n((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var o=r(19),n=r(8);e.exports=o&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(e,t,r){var o=r(18),n=r(265),i=r(76),s=r(22);e.exports=function(e,t,r){for(var a=n(t),c=s.f,u=i.f,l=0;l<a.length;l++){var d=a[l];o(e,d)||r&&o(r,d)||c(e,d,u(t,d))}}},function(e,t,r){var o=r(7),n=r(18),i=r(41),s=r(99).indexOf,a=r(97),c=o([].push);e.exports=function(e,t){var r,o=i(e),u=0,l=[];for(r in o)!n(a,r)&&n(o,r)&&c(l,r);for(;t.length>u;)n(o,r=t[u++])&&(~s(l,r)||c(l,r));return l}},function(e,t,r){"use strict";var o=r(14);e.exports=function(){var e=o(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},function(e,t,r){var o=r(8),n=r(11).RegExp,i=o((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=i||o((function(){return!n("a","y").sticky})),a=i||o((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},function(e,t,r){var o=r(19),n=r(191),i=r(22),s=r(14),a=r(41),c=r(100);t.f=o&&!n?Object.defineProperties:function(e,t){s(e);for(var r,o=a(t),n=c(t),u=n.length,l=0;u>l;)i.f(e,r=n[l++],o[r]);return e}},function(e,t,r){var o=r(122),n=r(70),i=TypeError;e.exports=function(e){if(o(e))return e;throw i(n(e)+" is not a constructor")}},function(e,t,r){"use strict";var o,n,i,s=r(8),a=r(15),c=r(58),u=r(113),l=r(24),d=r(17),h=r(44),p=d("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(n=u(u(i)))!==Object.prototype&&(o=n):f=!0),null==o||s((function(){var e={};return o[p].call(e)!==e}))?o={}:h&&(o=c(o)),a(o[p])||l(o,p,(function(){return this})),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:f}},function(e,t,r){var o=r(42),n=r(45),i=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=o(e),r=n(t);if(t!==r)throw i("Wrong length or index");return r}},function(e,t,r){var o=r(274),n=RangeError;e.exports=function(e,t){var r=o(e);if(r%t)throw n("Wrong offset");return r}},function(e,t,r){"use strict";var o=r(31).forEach,n=r(83)("forEach");e.exports=n?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,r){"use strict";var o=r(96).PROPER,n=r(24),i=r(14),s=r(23),a=r(8),c=r(279),u=RegExp.prototype.toString,l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=o&&"toString"!=u.name;(l||d)&&n(RegExp.prototype,"toString",(function(){var e=i(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,r){var o=r(117)("span").classList,n=o&&o.constructor&&o.constructor.prototype;e.exports=n===Object.prototype?void 0:n},function(e,t,r){var o=r(17);t.f=o},function(e,t,r){var o=r(281),n=r(18),i=r(205),s=r(22).f;e.exports=function(e){var t=o.Symbol||(o.Symbol={});n(t,e)||s(t,e,{value:i.f(e)})}},function(e,t,r){var o=r(79);e.exports=o&&!!Symbol.for&&!!Symbol.keyFor},function(e,t,r){"use strict";var o=r(6),n=r(8),i=r(101),s=r(20),a=r(29),c=r(30),u=r(216),l=r(103),d=r(164),h=r(107),p=r(17),f=r(84),_=p("isConcatSpreadable"),g=f>=51||!n((function(){var e=[];return e[_]=!1,e.concat()[0]!==e})),m=h("concat"),v=function(e){if(!s(e))return!1;var t=e[_];return void 0!==t?!!t:i(e)};o({target:"Array",proto:!0,arity:1,forced:!g||!m},{concat:function(e){var t,r,o,n,i,s=a(this),h=d(s,0),p=0;for(t=-1,o=arguments.length;t<o;t++)if(v(i=-1===t?s:arguments[t]))for(n=c(i),u(p+n),r=0;r<n;r++,p++)r in i&&l(h,p,i[r]);else u(p+1),l(h,p++,i);return h.length=p,h}})},function(e,t,r){var o=r(6),n=r(7),i=r(97),s=r(20),a=r(18),c=r(22).f,u=r(74),l=r(217),d=r(347),h=r(95),p=r(258),f=!1,_=h("meta"),g=0,m=function(e){c(e,_,{value:{objectID:"O"+g++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},f=!0;var e=u.f,t=n([].splice),r={};r[_]=1,e(r).length&&(u.f=function(r){for(var o=e(r),n=0,i=o.length;n<i;n++)if(o[n]===_){t(o,n,1);break}return o},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,_)){if(!d(e))return"F";if(!t)return"E";m(e)}return e[_].objectID},getWeakData:function(e,t){if(!a(e,_)){if(!d(e))return!0;if(!t)return!1;m(e)}return e[_].weakData},onFreeze:function(e){return p&&f&&d(e)&&!a(e,_)&&m(e),e}};i[_]=!0},function(e,t,r){"use strict";var o=r(13),n=r(170),i=r(14),s=r(45),a=r(23),c=r(48),u=r(89),l=r(171),d=r(173);n("match",(function(e,t,r){return[function(t){var r=c(this),n=null==t?void 0:u(t,e);return n?o(n,t,r):new RegExp(t)[e](a(r))},function(e){var o=i(this),n=a(e),c=r(t,o,n);if(c.done)return c.value;if(!o.global)return d(o,n);var u=o.unicode;o.lastIndex=0;for(var h,p=[],f=0;null!==(h=d(o,n));){var _=a(h[0]);p[f]=_,""===_&&(o.lastIndex=l(n,s(o.lastIndex),u)),f++}return 0===f?null:p}]}))},function(e,t,r){var o=r(32);e.exports=o("document","documentElement")},function(e,t,r){var o=r(20),n=r(64),i=r(17)("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},function(e,t,r){var o=r(11),n=r(8),i=r(154),s=r(16).NATIVE_ARRAY_BUFFER_VIEWS,a=o.ArrayBuffer,c=o.Int8Array;e.exports=!s||!n((function(){c(1)}))||!n((function(){new c(-1)}))||!i((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||n((function(){return 1!==new c(new a(2),1,void 0).length}))},function(e,t,r){var o=r(20),n=Math.floor;e.exports=Number.isInteger||function(e){return!o(e)&&isFinite(e)&&n(e)===e}},function(e,t,r){var o=r(34),n=r(13),i=r(197),s=r(29),a=r(30),c=r(155),u=r(109),l=r(176),d=r(16).aTypedArrayConstructor;e.exports=function(e){var t,r,h,p,f,_,g=i(this),m=s(e),v=arguments.length,y=v>1?arguments[1]:void 0,b=void 0!==y,S=u(m);if(S&&!l(S))for(_=(f=c(m,S)).next,m=[];!(p=n(_,f)).done;)m.push(p.value);for(b&&v>2&&(y=o(y,arguments[2])),r=a(m),h=new(d(g))(r),t=0;r>t;t++)h[t]=b?y(m[t],t):m[t];return h}},function(e,t){var r=TypeError;e.exports=function(e){if(e>9007199254740991)throw r("Maximum allowed index exceeded");return e}},function(e,t,r){var o=r(64),n=r(41),i=r(74).f,s=r(102),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==o(e)?function(e){try{return i(e)}catch(e){return s(a)}}(e):i(n(e))}},function(e,t,r){var o=r(6),n=r(365).values;o({target:"Object",stat:!0},{values:function(e){return n(e)}})},function(e,t,r){var o=r(8),n=r(15),i=r(18),s=r(19),a=r(96).CONFIGURABLE,c=r(118),u=r(40),l=u.enforce,d=u.get,h=Object.defineProperty,p=s&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),f=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!i(e,"name")||a&&e.name!==t)&&(s?h(e,"name",{value:t,configurable:!0}):e.name=t),p&&r&&i(r,"arity")&&e.length!==r.arity&&h(e,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?s&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var o=l(e);return i(o,"source")||(o.source=f.join("string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return n(this)&&d(this).source||c(this)}),"toString")},function(e,t,r){"use strict";var o=r(19),n=r(7),i=r(13),s=r(8),a=r(100),c=r(111),u=r(116),l=r(29),d=r(91),h=Object.assign,p=Object.defineProperty,f=n([].concat);e.exports=!h||s((function(){if(o&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=h({},e)[r]||"abcdefghijklmnopqrst"!=a(h({},t)).join("")}))?function(e,t){for(var r=l(e),n=arguments.length,s=1,h=c.f,p=u.f;n>s;)for(var _,g=d(arguments[s++]),m=h?f(a(g),h(g)):a(g),v=m.length,y=0;v>y;)_=m[y++],o&&!i(p,g,_)||(r[_]=g[_]);return r}:h},function(e,t,r){"use strict";var o=r(198).IteratorPrototype,n=r(58),i=r(73),s=r(72),a=r(93),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=n(o,{next:i(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},function(e,t,r){var o=r(65).match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},function(e,t,r){var o=r(65);e.exports=/MSIE|Trident/.test(o)},function(e,t,r){var o=r(65).match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},function(e,t,r){"use strict";var o=r(213);(0,r(16).exportTypedArrayStaticMethod)("from",r(215),o)},function(e,t,r){var o=r(6),n=r(7),i=Date,s=n(i.prototype.getTime);o({target:"Date",stat:!0},{now:function(){return s(new i)}})},function(e,t,r){var o=r(6),n=r(287);o({target:"Array",stat:!0,forced:!r(154)((function(e){Array.from(e)}))},{from:n})},function(e,t,r){"use strict";var o=r(6),n=r(7),i=r(42),s=r(259),a=r(262),c=r(8),u=RangeError,l=String,d=Math.floor,h=n(a),p=n("".slice),f=n(1..toFixed),_=function e(t,r,o){return 0===r?o:r%2==1?e(t,r-1,o*t):e(t*t,r/2,o)},g=function(e,t,r){for(var o=-1,n=r;++o<6;)n+=t*e[o],e[o]=n%1e7,n=d(n/1e7)},m=function(e,t){for(var r=6,o=0;--r>=0;)o+=e[r],e[r]=d(o/t),o=o%t*1e7},v=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var o=l(e[t]);r=""===r?o:r+h("0",7-o.length)+o}return r};o({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,o,n,a=s(this),c=i(e),d=[0,0,0,0,0,0],f="",y="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(f="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*_(2,69,1))-69)<0?a*_(2,-t,1):a/_(2,t,1),r*=4503599627370496,(t=52-t)>0){for(g(d,0,r),o=c;o>=7;)g(d,1e7,0),o-=7;for(g(d,_(10,o,1),0),o=t-1;o>=23;)m(d,1<<23),o-=23;m(d,1<<o),g(d,1,1),m(d,2),y=v(d)}else g(d,0,r),g(d,1<<-t,0),y=v(d)+h("0",c);return c>0?f+((n=y.length)<=c?"0."+h("0",c-n)+y:p(y,0,n-c)+"."+p(y,n-c)):f+y}})},function(e,t,r){"use strict";var o=r(6),n=r(7),i=r(27),s=r(29),a=r(30),c=r(179),u=r(23),l=r(8),d=r(185),h=r(83),p=r(222),f=r(223),_=r(84),g=r(224),m=[],v=n(m.sort),y=n(m.push),b=l((function(){m.sort(void 0)})),S=l((function(){m.sort(null)})),E=h("sort"),T=!l((function(){if(_)return _<70;if(!(p&&p>3)){if(f)return!0;if(g)return g<603;var e,t,r,o,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(o=0;o<47;o++)m.push({k:t+o,v:r})}for(m.sort((function(e,t){return t.v-e.v})),o=0;o<m.length;o++)t=m[o].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));o({target:"Array",proto:!0,forced:b||!S||!E||!T},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(T)return void 0===e?v(t):v(t,e);var r,o,n=[],l=a(t);for(o=0;o<l;o++)o in t&&y(n,t[o]);for(d(n,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:u(t)>u(r)?1:-1}}(e)),r=n.length,o=0;o<r;)t[o]=n[o++];for(;o<l;)c(t,o++);return t}})},function(e,t,r){"use strict";var o=r(6),n=r(11),i=r(13),s=r(19),a=r(213),c=r(16),u=r(174),l=r(86),d=r(73),h=r(51),p=r(214),f=r(45),_=r(199),g=r(200),m=r(92),v=r(18),y=r(66),b=r(20),S=r(82),E=r(58),T=r(52),w=r(75),C=r(74).f,I=r(215),O=r(31).forEach,k=r(177),R=r(22),A=r(76),P=r(40),L=r(178),N=P.get,D=P.set,M=P.enforce,x=R.f,B=A.f,U=Math.round,j=n.RangeError,H=u.ArrayBuffer,z=H.prototype,V=u.DataView,q=c.NATIVE_ARRAY_BUFFER_VIEWS,G=c.TYPED_ARRAY_TAG,Z=c.TypedArray,F=c.TypedArrayPrototype,W=c.aTypedArrayConstructor,Y=c.isTypedArray,Q=function(e,t){W(e);for(var r=0,o=t.length,n=new e(o);o>r;)n[r]=t[r++];return n},K=function(e,t){x(e,t,{get:function(){return N(this)[t]}})},J=function(e){var t;return T(z,e)||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},X=function(e,t){return Y(e)&&!S(t)&&t in e&&p(+t)&&t>=0},$=function(e,t){return t=m(t),X(e,t)?d(2,e[t]):B(e,t)},ee=function(e,t,r){return t=m(t),!(X(e,t)&&b(r)&&v(r,"value"))||v(r,"get")||v(r,"set")||r.configurable||v(r,"writable")&&!r.writable||v(r,"enumerable")&&!r.enumerable?x(e,t,r):(e[t]=r.value,e)};s?(q||(A.f=$,R.f=ee,K(F,"buffer"),K(F,"byteOffset"),K(F,"byteLength"),K(F,"length")),o({target:"Object",stat:!0,forced:!q},{getOwnPropertyDescriptor:$,defineProperty:ee}),e.exports=function(e,t,r){var s=e.match(/\d+$/)[0]/8,c=e+(r?"Clamped":"")+"Array",u="get"+e,d="set"+e,p=n[c],m=p,v=m&&m.prototype,y={},S=function(e,t){x(e,t,{get:function(){return function(e,t){var r=N(e);return r.view[u](t*s+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,o){var n=N(e);r&&(o=(o=U(o))<0?0:o>255?255:255&o),n.view[d](t*s+n.byteOffset,o,!0)}(this,t,e)},enumerable:!0})};q?a&&(m=t((function(e,t,r,o){return l(e,v),L(b(t)?J(t)?void 0!==o?new p(t,g(r,s),o):void 0!==r?new p(t,g(r,s)):new p(t):Y(t)?Q(m,t):i(I,m,t):new p(_(t)),e,m)})),w&&w(m,Z),O(C(p),(function(e){e in m||h(m,e,p[e])})),m.prototype=v):(m=t((function(e,t,r,o){l(e,v);var n,a,c,u=0,d=0;if(b(t)){if(!J(t))return Y(t)?Q(m,t):i(I,m,t);n=t,d=g(r,s);var h=t.byteLength;if(void 0===o){if(h%s)throw j("Wrong length");if((a=h-d)<0)throw j("Wrong length")}else if((a=f(o)*s)+d>h)throw j("Wrong length");c=a/s}else c=_(t),n=new H(a=c*s);for(D(e,{buffer:n,byteOffset:d,byteLength:a,length:c,view:new V(n)});u<c;)S(e,u++)})),w&&w(m,Z),v=m.prototype=E(F)),v.constructor!==m&&h(v,"constructor",m),M(v).TypedArrayConstructor=m,G&&h(v,G,c);var T=m!=p;y[c]=m,o({global:!0,constructor:!0,forced:T,sham:!q},y),"BYTES_PER_ELEMENT"in m||h(m,"BYTES_PER_ELEMENT",s),"BYTES_PER_ELEMENT"in v||h(v,"BYTES_PER_ELEMENT",s),k(c)}):e.exports=function(){}},function(e,t,r){"use strict";var o=r(68),n=r(41),i=r(42),s=r(30),a=r(83),c=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),h=l||!d;e.exports=h?function(e){if(l)return o(u,this,arguments)||0;var t=n(this),r=s(t),a=r-1;for(arguments.length>1&&(a=c(a,i(arguments[1]))),a<0&&(a=r+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:u},function(e,t,r){var o,n,i,s,a=r(11),c=r(68),u=r(34),l=r(15),d=r(18),h=r(8),p=r(211),f=r(81),_=r(117),g=r(180),m=r(233),v=r(152),y=a.setImmediate,b=a.clearImmediate,S=a.process,E=a.Dispatch,T=a.Function,w=a.MessageChannel,C=a.String,I=0,O={};try{o=a.location}catch(e){}var k=function(e){if(d(O,e)){var t=O[e];delete O[e],t()}},R=function(e){return function(){k(e)}},A=function(e){k(e.data)},P=function(e){a.postMessage(C(e),o.protocol+"//"+o.host)};y&&b||(y=function(e){g(arguments.length,1);var t=l(e)?e:T(e),r=f(arguments,1);return O[++I]=function(){c(t,void 0,r)},n(I),I},b=function(e){delete O[e]},v?n=function(e){S.nextTick(R(e))}:E&&E.now?n=function(e){E.now(R(e))}:w&&!m?(s=(i=new w).port2,i.port1.onmessage=A,n=u(s.postMessage,s)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&o&&"file:"!==o.protocol&&!h(P)?(n=P,a.addEventListener("message",A,!1)):n="onreadystatechange"in _("script")?function(e){p.appendChild(_("script")).onreadystatechange=function(){p.removeChild(this),k(e)}}:function(e){setTimeout(R(e),0)}),e.exports={set:y,clear:b}},function(e,t,r){var o=r(65);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},function(e,t){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(e,t,r){var o=r(13),n=r(14),i=r(89);e.exports=function(e,t,r){var s,a;n(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw r;return r}s=o(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return n(s),r}},function(e,t,r){var o=r(104),n=r(154),i=r(119).CONSTRUCTOR;e.exports=i||!n((function(e){o.all(e).then(void 0,(function(){}))}))},function(e,t,r){var o=r(11),n=r(68),i=r(15),s=r(65),a=r(81),c=r(180),u=/MSIE .\./.test(s),l=o.Function,d=function(e){return u?function(t,r){var o=c(arguments.length,1)>2,s=i(t)?t:l(t),u=o?a(arguments,2):void 0;return e(o?function(){n(s,this,u)}:s,r)}:e};e.exports={setTimeout:d(o.setTimeout),setInterval:d(o.setInterval)}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}}},function(e,t,r){"use strict";var o=r(43);function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(o.isURLSearchParams(t))i=t.toString();else{var s=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+"="+n(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var o=r(43),n=r(332),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=r(242)),a),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){c.headers[e]=o.merge(i)})),e.exports=c}).call(this,r(331))},function(e,t,r){"use strict";var o=r(43),n=r(333),i=r(239),s=r(335),a=r(338),c=r(339),u=r(243);e.exports=function(e){return new Promise((function(t,l){var d=e.data,h=e.headers;o.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",_=e.auth.password||"";h.Authorization="Basic "+btoa(f+":"+_)}var g=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),i(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};n(t,l,o),p=null}},p.onabort=function(){p&&(l(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){l(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(u(t,e,"ECONNABORTED",p)),p=null},o.isStandardBrowserEnv()){var m=r(340),v=(e.withCredentials||c(g))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}if("setRequestHeader"in p&&o.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),l(e),p=null)})),void 0===d&&(d=null),p.send(d)}))}},function(e,t,r){"use strict";var o=r(334);e.exports=function(e,t,r,n,i){var s=new Error(e);return o(s,t,r,n,i)}},function(e,t,r){"use strict";var o=r(43);e.exports=function(e,t){t=t||{};var r={},n=["url","method","params","data"],i=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];o.forEach(n,(function(e){void 0!==t[e]&&(r[e]=t[e])})),o.forEach(i,(function(n){o.isObject(t[n])?r[n]=o.deepMerge(e[n],t[n]):void 0!==t[n]?r[n]=t[n]:o.isObject(e[n])?r[n]=o.deepMerge(e[n]):void 0!==e[n]&&(r[n]=e[n])})),o.forEach(s,(function(o){void 0!==t[o]?r[o]=t[o]:void 0!==e[o]&&(r[o]=e[o])}));var a=n.concat(i).concat(s),c=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return o.forEach(c,(function(o){void 0!==t[o]?r[o]=t[o]:void 0!==e[o]&&(r[o]=e[o])})),r}},function(e,t,r){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},function(e,t,r){"use strict";e.exports=d;var o,n=r(90),i=n.LongBits,s=n.base64,a=n.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(d.create=function(){return new o})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function _(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(_,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=i.from(e);return this._push(_,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(_,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=i.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var m=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){o=e,d.create=h(),o._configure()}},function(e,t,r){"use strict";e.exports=c;var o,n=r(90),i=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){o=e,c.create=d(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},function(e,t,r){var o=r(7),n=r(48),i=r(23),s=r(249),a=o("".replace),c="["+s+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),d=function(e){return function(t){var r=i(n(t));return 1&e&&(r=a(r,u,"")),2&e&&(r=a(r,l,"")),r}};e.exports={start:d(1),end:d(2),trim:d(3)}},function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(e,t,r){"use strict";var o,n=r(6),i=r(7),s=r(76).f,a=r(45),c=r(23),u=r(256),l=r(48),d=r(257),h=r(44),p=i("".startsWith),f=i("".slice),_=Math.min,g=d("startsWith");n({target:"String",proto:!0,forced:!(!h&&!g&&(o=s(String.prototype,"startsWith"),o&&!o.writable))&&!g},{startsWith:function(e){var t=c(l(this));u(e);var r=a(_(arguments.length>1?arguments[1]:void 0,t.length)),o=c(e);return p?p(t,o,r):f(t,r,r+o.length)===o}})},function(e,t,r){(function(r){var o;!function(r,n){e.exports=function(r){"use strict";var n,i=(r=r||{}).Base64,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(e){for(var t={},r=0,o=e.length;r<o;r++)t[e.charAt(r)]=r;return t}(s),c=String.fromCharCode,u=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(l,u)},h=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[s.charAt(r>>>18),s.charAt(r>>>12&63),t>=2?"=":s.charAt(r>>>6&63),t>=1?"=":s.charAt(63&r)].join("")},p=r.btoa&&"function"==typeof r.btoa?function(e){return r.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,h)},f=function(e){return p(d(String(e)))},_=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?_(f(e)):f(e)};r.Uint8Array&&(n=function(e,t){for(var r="",o=0,n=e.length;o<n;o+=3){var i=e[o],a=e[o+1],c=e[o+2],u=i<<16|a<<8|c;r+=s.charAt(u>>>18)+s.charAt(u>>>12&63)+(void 0!==a?s.charAt(u>>>6&63):"=")+(void 0!==c?s.charAt(63&u):"=")}return t?_(r):r});var m,v=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,y=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c(55296+(t>>>10))+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(v,y)},S=function(e){var t=e.length,r=t%4,o=(t>0?a[e.charAt(0)]<<18:0)|(t>1?a[e.charAt(1)]<<12:0)|(t>2?a[e.charAt(2)]<<6:0)|(t>3?a[e.charAt(3)]:0),n=[c(o>>>16),c(o>>>8&255),c(255&o)];return n.length-=[0,0,2,1][r],n.join("")},E=r.atob&&"function"==typeof r.atob?function(e){return r.atob(e)}:function(e){return e.replace(/\S{1,4}/g,S)},T=function(e){return E(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},C=function(e){return function(e){return b(E(e))}(w(e))};if(r.Uint8Array&&(m=function(e){return Uint8Array.from(T(w(e)),(function(e){return e.charCodeAt(0)}))}),r.Base64={VERSION:"2.6.4",atob:T,btoa:p,fromBase64:C,toBase64:g,utob:d,encode:g,encodeURI:function(e){return g(e,!0)},btou:b,decode:C,noConflict:function(){var e=r.Base64;return r.Base64=i,e},fromUint8Array:n,toUint8Array:m},"function"==typeof Object.defineProperty){var I=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",I((function(){return C(this)}))),Object.defineProperty(String.prototype,"toBase64",I((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",I((function(){return g(this,!0)})))}}return r.Meteor&&(Base64=r.Base64),e.exports?e.exports.Base64=r.Base64:void 0===(o=function(){return r.Base64}.apply(t,[]))||(e.exports=o),{Base64:r.Base64}}(r)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:this)}).call(this,r(153))},function(e,t,r){var o;e.exports=(o=r(57),r(260),r(261),o.HmacSHA1)},function(e,t,r){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],o=e[1],n=e[2],i=e[3];o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[0]-680876936|0)<<7|r>>>25)+o|0)&o|~r&n)+t[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&o)+t[2]+606105819|0)<<17|n>>>15)+i|0)&i|~n&r)+t[3]-1044525330|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[4]-176418897|0)<<7|r>>>25)+o|0)&o|~r&n)+t[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&o)+t[6]-1473231341|0)<<17|n>>>15)+i|0)&i|~n&r)+t[7]-45705983|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[8]+1770035416|0)<<7|r>>>25)+o|0)&o|~r&n)+t[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&o)+t[10]-42063|0)<<17|n>>>15)+i|0)&i|~n&r)+t[11]-1990404162|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[12]+1804603682|0)<<7|r>>>25)+o|0)&o|~r&n)+t[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&o)+t[14]-1502002290|0)<<17|n>>>15)+i|0)&i|~n&r)+t[15]+1236535329|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[1]-165796510|0)<<5|r>>>27)+o|0)&n|o&~n)+t[6]-1069501632|0)<<9|i>>>23)+r|0)&o|r&~o)+t[11]+643717713|0)<<14|n>>>18)+i|0)&r|i&~r)+t[0]-373897302|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[5]-701558691|0)<<5|r>>>27)+o|0)&n|o&~n)+t[10]+38016083|0)<<9|i>>>23)+r|0)&o|r&~o)+t[15]-660478335|0)<<14|n>>>18)+i|0)&r|i&~r)+t[4]-405537848|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[9]+568446438|0)<<5|r>>>27)+o|0)&n|o&~n)+t[14]-1019803690|0)<<9|i>>>23)+r|0)&o|r&~o)+t[3]-187363961|0)<<14|n>>>18)+i|0)&r|i&~r)+t[8]+1163531501|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[13]-1444681467|0)<<5|r>>>27)+o|0)&n|o&~n)+t[2]-51403784|0)<<9|i>>>23)+r|0)&o|r&~o)+t[7]+1735328473|0)<<14|n>>>18)+i|0)&r|i&~r)+t[12]-1926607734|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[5]-378558|0)<<4|r>>>28)+o|0)^o^n)+t[8]-2022574463|0)<<11|i>>>21)+r|0)^r^o)+t[11]+1839030562|0)<<16|n>>>16)+i|0)^i^r)+t[14]-35309556|0)<<23|o>>>9)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[1]-1530992060|0)<<4|r>>>28)+o|0)^o^n)+t[4]+1272893353|0)<<11|i>>>21)+r|0)^r^o)+t[7]-155497632|0)<<16|n>>>16)+i|0)^i^r)+t[10]-1094730640|0)<<23|o>>>9)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[13]+681279174|0)<<4|r>>>28)+o|0)^o^n)+t[0]-358537222|0)<<11|i>>>21)+r|0)^r^o)+t[3]-722521979|0)<<16|n>>>16)+i|0)^i^r)+t[6]+76029189|0)<<23|o>>>9)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[9]-640364487|0)<<4|r>>>28)+o|0)^o^n)+t[12]-421815835|0)<<11|i>>>21)+r|0)^r^o)+t[15]+530742520|0)<<16|n>>>16)+i|0)^i^r)+t[2]-995338651|0)<<23|o>>>9)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[0]-198630844|0)<<6|r>>>26)+o|0)|~n))+t[7]+1126891415|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[14]-1416354905|0)<<15|n>>>17)+i|0)|~r))+t[5]-57434055|0)<<21|o>>>11)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[12]+1700485571|0)<<6|r>>>26)+o|0)|~n))+t[3]-1894986606|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[10]-1051523|0)<<15|n>>>17)+i|0)|~r))+t[1]-2054922799|0)<<21|o>>>11)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[8]+1873313359|0)<<6|r>>>26)+o|0)|~n))+t[15]-30611744|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[6]-1560198380|0)<<15|n>>>17)+i|0)|~r))+t[13]+1309151649|0)<<21|o>>>11)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[4]-145523070|0)<<6|r>>>26)+o|0)|~n))+t[11]-1120210379|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[2]+718787259|0)<<15|n>>>17)+i|0)|~r))+t[9]-343485551|0)<<21|o>>>11)+n|0,e[0]=r+e[0]|0,e[1]=o+e[1]|0,e[2]=n+e[2]|0,e[3]=i+e[3]|0}function o(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function i(e){var t,n,i,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)r(l,o(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,i[14]=a,i[15]=c,r(l,i),l}function s(e){var r,o="";for(r=0;r<4;r+=1)o+=t[e>>8*r+4&15]+t[e>>8*r&15];return o}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,r=[],o=e.length;for(t=0;t<o-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function l(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,r){var o,n,i,s,a=this.byteLength,c=e(t,a),u=a;return void 0!==r&&(u=e(r,a)),c>u?new ArrayBuffer(0):(o=u-c,n=new ArrayBuffer(o),i=new Uint8Array(n),s=new Uint8Array(this,c,o),i.set(s),n)}}(),l.prototype.append=function(e){return this.appendBinary(c(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)r(this._hash,o(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,r,o=this._buff,n=o.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n;t+=1)i[t>>2]|=o.charCodeAt(t)<<(t%4<<3);return this._finish(i,n),r=a(this._hash),e&&(r=u(r)),this.reset(),r},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var o,n,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(r(this._hash,e),s=0;s<16;s+=1)e[s]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),i=parseInt(o[1],16)||0,e[14]=n,e[15]=i,r(this._hash,e)},l.hash=function(e,t){return l.hashBinary(c(e),t)},l.hashBinary=function(e,t){var r=a(i(e));return t?u(r):r},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var t,o,i,s,a=(o=this._buff.buffer,i=e,(s=new Uint8Array(o.byteLength+i.byteLength)).set(new Uint8Array(o)),s.set(new Uint8Array(i),o.byteLength),s),c=a.length;for(this._length+=e.byteLength,t=64;t<=c;t+=64)r(this._hash,n(a.subarray(t-64,t)));return this._buff=t-64<c?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,r,o=this._buff,n=o.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n;t+=1)i[t>>2]|=o[t]<<(t%4<<3);return this._finish(i,n),r=a(this._hash),e&&(r=u(r)),this.reset(),r},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,o=e.length,n=new ArrayBuffer(o),i=new Uint8Array(n);for(r=0;r<o;r+=1)i[r]=e.charCodeAt(r);return i}(e.buff),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var o=a(function(e){var t,o,i,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)r(l,n(e.subarray(t-64,t)));for(o=(e=t-64<u?e.subarray(t-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,i[14]=a,i[15]=c,r(l,i),l}(new Uint8Array(e)));return t?u(o):o},l}()},function(e,t,r){e.exports=r(57).enc.Hex},function(e,t,r){var o=r(14),n=r(20),i=r(120);e.exports=function(e,t){if(o(e),n(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){var o=r(212),n=TypeError;e.exports=function(e){if(o(e))throw n("The method doesn't accept regular expressions");return e}},function(e,t,r){var o=r(17)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[o]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,r){var o=r(8);e.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,r){var o=r(7);e.exports=o(1..valueOf)},function(e,t,r){var o,n,i,s,a,c,u,l;e.exports=(n=(o=l=r(57)).lib,i=n.WordArray,s=n.Hasher,a=o.algo,c=[],u=a.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],i=r[2],s=r[3],a=r[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var d=(o<<5|o>>>27)+a+c[u];d+=u<20?1518500249+(n&i|~n&s):u<40?1859775393+(n^i^s):u<60?(n&i|n&s|i&s)-1894007588:(n^i^s)-899497514,a=s,s=i,i=n<<30|n>>>2,n=o,o=d}r[0]=r[0]+o|0,r[1]=r[1]+n|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(o+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),o.SHA1=s._createHelper(u),o.HmacSHA1=s._createHmacHelper(u),l.SHA1)},function(e,t,r){var o,n,i;e.exports=(n=(o=r(57)).lib.Base,i=o.enc.Utf8,void(o.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),s=this._iKey=t.clone(),a=n.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;n.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))},function(e,t,r){"use strict";var o=r(42),n=r(23),i=r(48),s=RangeError;e.exports=function(e){var t=n(i(this)),r="",a=o(e);if(a<0||a==1/0)throw s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},function(e,t,r){var o=r(13),n=r(15),i=r(20),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&n(r=e.toString)&&!i(a=o(r,e)))return a;if(n(r=e.valueOf)&&!i(a=o(r,e)))return a;if("string"!==t&&n(r=e.toString)&&!i(a=o(r,e)))return a;throw s("Can't convert object to primitive value")}},function(e,t,r){var o=r(11),n=r(15),i=r(118),s=o.WeakMap;e.exports=n(s)&&/native code/.test(i(s))},function(e,t,r){var o=r(32),n=r(7),i=r(74),s=r(111),a=r(14),c=n([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=s.f;return r?c(t,r(e)):t}},function(e,t){var r=Math.ceil,o=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?o:r)(t)}},function(e,t,r){var o=r(8),n=r(11).RegExp;e.exports=o((function(){var e=n(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},function(e,t,r){var o=r(8),n=r(11).RegExp;e.exports=o((function(){var e=n("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},function(e,t,r){var o=r(101),n=r(122),i=r(20),s=r(17)("species"),a=Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,(n(t)&&(t===a||o(t.prototype))||i(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},function(e,t,r){var o=r(8);e.exports=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,r){var o=r(15),n=String,i=TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw i("Can't set "+n(e)+" as a prototype")}},function(e,t){var r=Array,o=Math.abs,n=Math.pow,i=Math.floor,s=Math.log,a=Math.LN2;e.exports={pack:function(e,t,c){var u,l,d,h=r(c),p=8*c-t-1,f=(1<<p)-1,_=f>>1,g=23===t?n(2,-24)-n(2,-77):0,m=e<0||0===e&&1/e<0?1:0,v=0;for((e=o(e))!=e||e===1/0?(l=e!=e?1:0,u=f):(u=i(s(e)/a),e*(d=n(2,-u))<1&&(u--,d*=2),(e+=u+_>=1?g/d:g*n(2,1-_))*d>=2&&(u++,d/=2),u+_>=f?(l=0,u=f):u+_>=1?(l=(e*d-1)*n(2,t),u+=_):(l=e*n(2,_-1)*n(2,t),u=0));t>=8;)h[v++]=255&l,l/=256,t-=8;for(u=u<<t|l,p+=t;p>0;)h[v++]=255&u,u/=256,p-=8;return h[--v]|=128*m,h},unpack:function(e,t){var r,o=e.length,i=8*o-t-1,s=(1<<i)-1,a=s>>1,c=i-7,u=o-1,l=e[u--],d=127&l;for(l>>=7;c>0;)d=256*d+e[u--],c-=8;for(r=d&(1<<-c)-1,d>>=-c,c+=t;c>0;)r=256*r+e[u--],c-=8;if(0===d)d=1-a;else{if(d===s)return r?NaN:l?-1/0:1/0;r+=n(2,t),d-=a}return(l?-1:1)*r*n(2,d-t)}}},function(e,t,r){"use strict";var o=r(160),n=r(66);e.exports=o?{}.toString:function(){return"[object "+n(this)+"]"}},function(e,t,r){var o=r(42),n=RangeError;e.exports=function(e){var t=o(e);if(t<0)throw n("The argument can't be less than 0");return t}},function(e,t,r){"use strict";var o=r(29),n=r(59),i=r(30),s=r(179),a=Math.min;e.exports=[].copyWithin||function(e,t){var r=o(this),c=i(r),u=n(e,c),l=n(t,c),d=arguments.length>2?arguments[2]:void 0,h=a((void 0===d?c:n(d,c))-l,c-u),p=1;for(l<u&&u<l+h&&(p=-1,l+=h-1,u+=h-1);h-- >0;)l in r?r[u]=r[l]:s(r,u),u+=p,l+=p;return r}},function(e,t,r){var o=r(163),n=TypeError;e.exports=function(e){var t=o(e,"number");if("number"==typeof t)throw n("Can't convert number to bigint");return BigInt(t)}},function(e,t,r){var o=r(278),n=r(114);e.exports=function(e,t){return o(n(e),t)}},function(e,t,r){var o=r(30);e.exports=function(e,t){for(var r=0,n=o(t),i=new e(n);n>r;)i[r]=t[r++];return i}},function(e,t,r){var o=r(13),n=r(18),i=r(52),s=r(194),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||n(e,"flags")||!i(a,e)?t:o(s,e)}},function(e,t,r){"use strict";var o=r(6),n=r(11),i=r(13),s=r(7),a=r(44),c=r(19),u=r(79),l=r(8),d=r(18),h=r(52),p=r(14),f=r(41),_=r(92),g=r(23),m=r(73),v=r(58),y=r(100),b=r(74),S=r(217),E=r(111),T=r(76),w=r(22),C=r(196),I=r(116),O=r(24),k=r(80),R=r(110),A=r(97),P=r(95),L=r(17),N=r(205),D=r(206),M=r(282),x=r(72),B=r(40),U=r(31).forEach,j=R("hidden"),H=B.set,z=B.getterFor("Symbol"),V=Object.prototype,q=n.Symbol,G=q&&q.prototype,Z=n.TypeError,F=n.QObject,W=T.f,Y=w.f,Q=S.f,K=I.f,J=s([].push),X=k("symbols"),$=k("op-symbols"),ee=k("wks"),te=!F||!F.prototype||!F.prototype.findChild,re=c&&l((function(){return 7!=v(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(e,t,r){var o=W(V,t);o&&delete V[t],Y(e,t,r),o&&e!==V&&Y(V,t,o)}:Y,oe=function(e,t){var r=X[e]=v(G);return H(r,{type:"Symbol",tag:e,description:t}),c||(r.description=t),r},ne=function e(t,r,o){t===V&&e($,r,o),p(t);var n=_(r);return p(o),d(X,n)?(o.enumerable?(d(t,j)&&t[j][n]&&(t[j][n]=!1),o=v(o,{enumerable:m(0,!1)})):(d(t,j)||Y(t,j,m(1,{})),t[j][n]=!0),re(t,n,o)):Y(t,n,o)},ie=function(e,t){p(e);var r=f(t),o=y(r).concat(ue(r));return U(o,(function(t){c&&!i(se,r,t)||ne(e,t,r[t])})),e},se=function(e){var t=_(e),r=i(K,this,t);return!(this===V&&d(X,t)&&!d($,t))&&(!(r||!d(this,t)||!d(X,t)||d(this,j)&&this[j][t])||r)},ae=function(e,t){var r=f(e),o=_(t);if(r!==V||!d(X,o)||d($,o)){var n=W(r,o);return!n||!d(X,o)||d(r,j)&&r[j][o]||(n.enumerable=!0),n}},ce=function(e){var t=Q(f(e)),r=[];return U(t,(function(e){d(X,e)||d(A,e)||J(r,e)})),r},ue=function(e){var t=e===V,r=Q(t?$:f(e)),o=[];return U(r,(function(e){!d(X,e)||t&&!d(V,e)||J(o,X[e])})),o};u||(O(G=(q=function(){if(h(G,this))throw Z("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=P(e),r=function e(r){this===V&&i(e,$,r),d(this,j)&&d(this[j],t)&&(this[j][t]=!1),re(this,t,m(1,r))};return c&&te&&re(V,t,{configurable:!0,set:r}),oe(t,e)}).prototype,"toString",(function(){return z(this).tag})),O(q,"withoutSetter",(function(e){return oe(P(e),e)})),I.f=se,w.f=ne,C.f=ie,T.f=ae,b.f=S.f=ce,E.f=ue,N.f=function(e){return oe(L(e),e)},c&&(Y(G,"description",{configurable:!0,get:function(){return z(this).description}}),a||O(V,"propertyIsEnumerable",se,{unsafe:!0}))),o({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),U(y(ee),(function(e){D(e)})),o({target:"Symbol",stat:!0,forced:!u},{useSetter:function(){te=!0},useSimple:function(){te=!1}}),o({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(e,t){return void 0===t?v(e):ie(v(e),t)},defineProperty:ne,defineProperties:ie,getOwnPropertyDescriptor:ae}),o({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ce}),M(),x(q,"Symbol"),A[j]=!0},function(e,t,r){var o=r(11);e.exports=o},function(e,t,r){var o=r(13),n=r(32),i=r(17),s=r(24);e.exports=function(){var e=n("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,a=i("toPrimitive");t&&!t[a]&&s(t,a,(function(e){return o(r,this)}),{arity:1})}},function(e,t,r){var o=r(6),n=r(32),i=r(18),s=r(23),a=r(80),c=r(207),u=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=s(e);if(i(u,t))return u[t];var r=n("Symbol")(t);return u[t]=r,l[r]=t,r}})},function(e,t,r){var o=r(6),n=r(18),i=r(82),s=r(70),a=r(80),c=r(207),u=a("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!i(e))throw TypeError(s(e)+" is not a symbol");if(n(u,e))return u[e]}})},function(e,t,r){var o=r(6),n=r(32),i=r(68),s=r(13),a=r(7),c=r(8),u=r(101),l=r(15),d=r(20),h=r(82),p=r(81),f=r(79),_=n("JSON","stringify"),g=a(/./.exec),m=a("".charAt),v=a("".charCodeAt),y=a("".replace),b=a(1..toString),S=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,T=/^[\uDC00-\uDFFF]$/,w=!f||c((function(){var e=n("Symbol")();return"[null]"!=_([e])||"{}"!=_({a:e})||"{}"!=_(Object(e))})),C=c((function(){return'"\\udf06\\ud834"'!==_("\udf06\ud834")||'"\\udead"'!==_("\udead")})),I=function(e,t){var r=p(arguments),o=t;if((d(t)||void 0!==e)&&!h(e))return u(t)||(t=function(e,t){if(l(o)&&(t=s(o,this,e,t)),!h(t))return t}),r[1]=t,i(_,null,r)},O=function(e,t,r){var o=m(r,t-1),n=m(r,t+1);return g(E,e)&&!g(T,n)||g(T,e)&&!g(E,o)?"\\u"+b(v(e,0),16):e};_&&o({target:"JSON",stat:!0,arity:3,forced:w||C},{stringify:function(e,t,r){var o=p(arguments),n=i(w?I:_,null,o);return C&&"string"==typeof n?y(n,S,O):n}})},function(e,t,r){var o=r(6),n=r(79),i=r(8),s=r(111),a=r(29);o({target:"Object",stat:!0,forced:!n||i((function(){s.f(1)}))},{getOwnPropertySymbols:function(e){var t=s.f;return t?t(a(e)):[]}})},function(e,t,r){"use strict";var o=r(34),n=r(13),i=r(29),s=r(324),a=r(176),c=r(122),u=r(30),l=r(103),d=r(155),h=r(109),p=Array;e.exports=function(e){var t=i(e),r=c(this),f=arguments.length,_=f>1?arguments[1]:void 0,g=void 0!==_;g&&(_=o(_,f>2?arguments[2]:void 0));var m,v,y,b,S,E,T=h(t),w=0;if(!T||this===p&&a(T))for(m=u(t),v=r?new this(m):p(m);m>w;w++)E=g?_(t[w],w):t[w],l(v,w,E);else for(S=(b=d(t,T)).next,v=r?new this:[];!(y=n(S,b)).done;w++)E=g?s(b,_,[y.value,w],!0):y.value,l(v,w,E);return v.length=w,v}},function(e,t,r){"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),o=0,n=2,i=!0;n<arguments.length;)r[o++]=arguments[n++];return new Promise((function(n,s){r[o]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},function(e,t,r){"use strict";var o=t;o.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;o.encode=function(e,t,r){for(var o,i=null,s=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:s[a++]=n[u>>2],o=(3&u)<<4,c=1;break;case 1:s[a++]=n[o|u>>4],o=(15&u)<<2,c=2;break;case 2:s[a++]=n[o|u>>6],s[a++]=n[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=n[o],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))},o.decode=function(e,t,r){for(var o,n=r,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(s){case 0:o=c,s=1;break;case 1:t[r++]=o<<2|(48&c)>>4,o=c,s=2;break;case 2:t[r++]=(15&o)<<4|(60&c)>>2,o=c,s=3;break;case 3:t[r++]=(3&o)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return r-n},o.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function o(){this._listeners={}}e.exports=o,o.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},o.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},o.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},function(e,t,r){"use strict";function o(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),o=128===r[3];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3]}function i(e,o,n){t[0]=e,o[n]=r[3],o[n+1]=r[2],o[n+2]=r[1],o[n+3]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],t[0]}function a(e,o){return r[3]=e[o],r[2]=e[o+1],r[1]=e[o+2],r[0]=e[o+3],t[0]}e.writeFloatLE=o?n:i,e.writeFloatBE=o?i:n,e.readFloatLE=o?s:a,e.readFloatBE=o?a:s}():function(){function t(e,t,r,o){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,o);else if(isNaN(t))e(2143289344,r,o);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,o);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,o);else{var i=Math.floor(Math.log(t)/Math.LN2);e((n<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,o)}}function r(e,t,r){var o=e(t,r),n=2*(o>>31)+1,i=o>>>23&255,s=8388607&o;return 255===i?s?NaN:n*(1/0):0===i?1401298464324817e-60*n*s:n*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,s),e.readFloatBE=r.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),o=128===r[7];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3],o[n+4]=r[4],o[n+5]=r[5],o[n+6]=r[6],o[n+7]=r[7]}function i(e,o,n){t[0]=e,o[n]=r[7],o[n+1]=r[6],o[n+2]=r[5],o[n+3]=r[4],o[n+4]=r[3],o[n+5]=r[2],o[n+6]=r[1],o[n+7]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],r[4]=e[o+4],r[5]=e[o+5],r[6]=e[o+6],r[7]=e[o+7],t[0]}function a(e,o){return r[7]=e[o],r[6]=e[o+1],r[5]=e[o+2],r[4]=e[o+3],r[3]=e[o+4],r[2]=e[o+5],r[1]=e[o+6],r[0]=e[o+7],t[0]}e.writeDoubleLE=o?n:i,e.writeDoubleBE=o?i:n,e.readDoubleLE=o?s:a,e.readDoubleBE=o?a:s}():function(){function t(e,t,r,o,n,i){var s=o<0?1:0;if(s&&(o=-o),0===o)e(0,n,i+t),e(1/o>0?0:2147483648,n,i+r);else if(isNaN(o))e(0,n,i+t),e(2146959360,n,i+r);else if(o>17976931348623157e292)e(0,n,i+t),e((s<<31|2146435072)>>>0,n,i+r);else{var a;if(o<22250738585072014e-324)e((a=o/5e-324)>>>0,n,i+t),e((s<<31|a/4294967296)>>>0,n,i+r);else{var c=Math.floor(Math.log(o)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=o*Math.pow(2,-c))>>>0,n,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,n,i+r)}}}function r(e,t,r,o,n){var i=e(o,n+t),s=e(o,n+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,s,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=o(o)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";var o=t;o.length=function(e){for(var t=0,r=0,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},o.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,i=[],s=0;t<r;)(o=e[t++])<128?i[s++]=o:o>191&&o<224?i[s++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(o>>10),i[s++]=56320+(1023&o)):i[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,i.slice(0,s))),n.join("")):String.fromCharCode.apply(String,i.slice(0,s))},o.write=function(e,t,r){for(var o,n,i=r,s=0;s<e.length;++s)(o=e.charCodeAt(s))<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&56320==(64512&(n=e.charCodeAt(s+1)))?(o=65536+((1023&o)<<10)+(1023&n),++s,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128);return r-i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var o=r||8192,n=o>>>1,i=null,s=o;return function(r){if(r<1||r>n)return e(r);s+r>o&&(i=e(o),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},function(e,t,r){var o=r(7),n=r(45),i=r(23),s=r(262),a=r(48),c=o(s),u=o("".slice),l=Math.ceil,d=function(e){return function(t,r,o){var s,d,h=i(a(t)),p=n(r),f=h.length,_=void 0===o?" ":i(o);return p<=f||""==_?h:((d=c(_,l((s=p-f)/_.length))).length>s&&(d=u(d,0,s)),e?h+d:d+h)}};e.exports={start:d(!1),end:d(!0)}},function(e,t,r){var o=r(6),n=r(258),i=r(8),s=r(20),a=r(209).onFreeze,c=Object.freeze;o({target:"Object",stat:!0,forced:i((function(){c(1)})),sham:!n},{freeze:function(e){return c&&s(e)?c(a(e)):e}})},function(e,t,r){var o=r(6),n=r(166),i=r(108);o({target:"Array",proto:!0},{fill:n}),i("fill")},function(e,t,r){var o=r(8),n=r(17),i=r(44),s=n("iterator");e.exports=!o((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,o){t.delete("b"),r+=o+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},function(e,t,r){"use strict";r(36);var o=r(6),n=r(11),i=r(13),s=r(7),a=r(19),c=r(298),u=r(24),l=r(182),d=r(72),h=r(221),p=r(40),f=r(86),_=r(15),g=r(18),m=r(34),v=r(66),y=r(14),b=r(20),S=r(23),E=r(58),T=r(73),w=r(155),C=r(109),I=r(180),O=r(17),k=r(185),R=O("iterator"),A=p.set,P=p.getterFor("URLSearchParams"),L=p.getterFor("URLSearchParamsIterator"),N=Object.getOwnPropertyDescriptor,D=function(e){if(!a)return n[e];var t=N(n,e);return t&&t.value},M=D("fetch"),x=D("Request"),B=D("Headers"),U=x&&x.prototype,j=B&&B.prototype,H=n.RegExp,z=n.TypeError,V=n.decodeURIComponent,q=n.encodeURIComponent,G=s("".charAt),Z=s([].join),F=s([].push),W=s("".replace),Y=s([].shift),Q=s([].splice),K=s("".split),J=s("".slice),X=/\+/g,$=Array(4),ee=function(e){return $[e-1]||($[e-1]=H("((?:%[\\da-f]{2}){"+e+"})","gi"))},te=function(e){try{return V(e)}catch(t){return e}},re=function(e){var t=W(e,X," "),r=4;try{return V(t)}catch(e){for(;r;)t=W(t,ee(r--),te);return t}},oe=/[!'()~]|%20/g,ne={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ie=function(e){return ne[e]},se=function(e){return W(q(e),oe,ie)},ae=h((function(e,t){A(this,{type:"URLSearchParamsIterator",iterator:w(P(e).entries),kind:t})}),"Iterator",(function(){var e=L(this),t=e.kind,r=e.iterator.next(),o=r.value;return r.done||(r.value="keys"===t?o.key:"values"===t?o.value:[o.key,o.value]),r}),!0),ce=function(e){this.entries=[],this.url=null,void 0!==e&&(b(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===G(e,0)?J(e,1):e:S(e)))};ce.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,o,n,s,a,c,u=C(e);if(u)for(r=(t=w(e,u)).next;!(o=i(r,t)).done;){if(s=(n=w(y(o.value))).next,(a=i(s,n)).done||(c=i(s,n)).done||!i(s,n).done)throw z("Expected sequence with length 2");F(this.entries,{key:S(a.value),value:S(c.value)})}else for(var l in e)g(e,l)&&F(this.entries,{key:l,value:S(e[l])})},parseQuery:function(e){if(e)for(var t,r,o=K(e,"&"),n=0;n<o.length;)(t=o[n++]).length&&(r=K(t,"="),F(this.entries,{key:re(Y(r)),value:re(Z(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],o=0;o<t.length;)e=t[o++],F(r,se(e.key)+"="+se(e.value));return Z(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ue=function(){f(this,le);var e=arguments.length>0?arguments[0]:void 0;A(this,new ce(e))},le=ue.prototype;if(l(le,{append:function(e,t){I(arguments.length,2);var r=P(this);F(r.entries,{key:S(e),value:S(t)}),r.updateURL()},delete:function(e){I(arguments.length,1);for(var t=P(this),r=t.entries,o=S(e),n=0;n<r.length;)r[n].key===o?Q(r,n,1):n++;t.updateURL()},get:function(e){I(arguments.length,1);for(var t=P(this).entries,r=S(e),o=0;o<t.length;o++)if(t[o].key===r)return t[o].value;return null},getAll:function(e){I(arguments.length,1);for(var t=P(this).entries,r=S(e),o=[],n=0;n<t.length;n++)t[n].key===r&&F(o,t[n].value);return o},has:function(e){I(arguments.length,1);for(var t=P(this).entries,r=S(e),o=0;o<t.length;)if(t[o++].key===r)return!0;return!1},set:function(e,t){I(arguments.length,1);for(var r,o=P(this),n=o.entries,i=!1,s=S(e),a=S(t),c=0;c<n.length;c++)(r=n[c]).key===s&&(i?Q(n,c--,1):(i=!0,r.value=a));i||F(n,{key:s,value:a}),o.updateURL()},sort:function(){var e=P(this);k(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=P(this).entries,o=m(e,arguments.length>1?arguments[1]:void 0),n=0;n<r.length;)o((t=r[n++]).value,t.key,this)},keys:function(){return new ae(this,"keys")},values:function(){return new ae(this,"values")},entries:function(){return new ae(this,"entries")}},{enumerable:!0}),u(le,R,le.entries,{name:"entries"}),u(le,"toString",(function(){return P(this).serialize()}),{enumerable:!0}),d(ue,"URLSearchParams"),o({global:!0,constructor:!0,forced:!c},{URLSearchParams:ue}),!c&&_(B)){var de=s(j.has),he=s(j.set),pe=function(e){if(b(e)){var t,r=e.body;if("URLSearchParams"===v(r))return t=e.headers?new B(e.headers):new B,de(t,"content-type")||he(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),E(e,{body:T(0,S(r)),headers:T(0,t)})}return e};if(_(M)&&o({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return M(e,arguments.length>1?pe(arguments[1]):{})}}),_(x)){var fe=function(e){return f(this,U),new x(e,arguments.length>1?pe(arguments[1]):{})};U.constructor=fe,fe.prototype=U,o({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:fe})}}e.exports={URLSearchParams:ue,getState:P}},function(e,t,r){var o,n,i,s,a,c,u,l;e.exports=(l=r(57),r(260),r(261),i=(n=(o=l).lib).Base,s=n.WordArray,c=(a=o.algo).MD5,u=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,o=r.hasher.create(),n=s.create(),i=n.words,a=r.keySize,c=r.iterations;i.length<a;){u&&o.update(u);var u=o.update(e).finalize(t);o.reset();for(var l=1;l<c;l++)u=o.finalize(u),o.reset();n.concat(u)}return n.sigBytes=4*a,n}}),o.EvpKDF=function(e,t,r){return u.create(r).compute(e,t)},l.EvpKDF)},function(e,t,r){var o;e.exports=(o=r(57),r(300),void(o.lib.Cipher||function(e){var t=o,r=t.lib,n=r.Base,i=r.WordArray,s=r.BufferedBlockAlgorithm,a=t.enc,c=(a.Utf8,a.Base64),u=t.algo.EvpKDF,l=r.Cipher=s.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?y:m}return function(t){return{encrypt:function(r,o,n){return e(o).encrypt(t,r,o,n)},decrypt:function(r,o,n){return e(o).decrypt(t,r,o,n)}}}}()}),d=(r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),h=r.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=d.CBC=function(){var e=h.extend();function t(e,t,r){var o=this._iv;if(o){var n=o;this._iv=void 0}else n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize;t.call(this,e,r,n),o.encryptBlock(e,r),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize,i=e.slice(r,r+n);o.decryptBlock(e,r),t.call(this,e,r,n),this._prevBlock=i}}),e}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,o=r-e.sigBytes%r,n=o<<24|o<<16|o<<8|o,s=[],a=0;a<o;a+=4)s.push(n);var c=i.create(s,o);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},_=(r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:f}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=r.createEncryptor;else o=r.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==o?this._mode.init(this,t&&t.words):(this._mode=o.call(r,this,t&&t.words),this._mode.__creator=o)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),r.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var o=i.create([1398893684,1701076831]).concat(r).concat(t);else o=t;return o.toString(c)},parse:function(e){var t=c.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var o=i.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return _.create({ciphertext:t,salt:o})}},m=r.SerializableCipher=n.extend({cfg:n.extend({format:g}),encrypt:function(e,t,r,o){o=this.cfg.extend(o);var n=e.createEncryptor(r,o),i=n.finalize(t),s=n.cfg;return _.create({ciphertext:i,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(r,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(t.kdf={}).OpenSSL={execute:function(e,t,r,o){o||(o=i.random(8));var n=u.create({keySize:t+r}).compute(e,o),s=i.create(n.words.slice(t),4*r);return n.sigBytes=4*t,_.create({key:n,iv:s,salt:o})}},y=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:v}),encrypt:function(e,t,r,o){var n=(o=this.cfg.extend(o)).kdf.execute(r,e.keySize,e.ivSize);o.iv=n.iv;var i=m.encrypt.call(this,e,t,n.key,o);return i.mixIn(n),i},decrypt:function(e,t,r,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var n=o.kdf.execute(r,e.keySize,e.ivSize,t.salt);return o.iv=n.iv,m.decrypt.call(this,e,t,n.key,o)}})}()))},function(e,t,r){r(6)({target:"Object",stat:!0},{setPrototypeOf:r(75)})},function(e,t,r){r(6)({target:"Object",stat:!0,sham:!r(19)},{create:r(58)})},function(e,t,r){var o;e.exports=(o=r(57),r(156),r(391),r(300),r(301),function(){var e=o,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],s=[],a=[],c=[],u=[],l=[],d=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,o=0;for(t=0;t<256;t++){var f=o^o<<1^o<<2^o<<3^o<<4;f=f>>>8^255&f^99,n[r]=f,i[f]=r;var _=e[r],g=e[_],m=e[g],v=257*e[f]^16843008*f;s[r]=v<<24|v>>>8,a[r]=v<<16|v>>>16,c[r]=v<<8|v>>>24,u[r]=v,v=16843009*m^65537*g^257*_^16843008*r,l[f]=v<<24|v>>>8,d[f]=v<<16|v>>>16,h[f]=v<<8|v>>>24,p[f]=v,r?(r=_^e[e[e[m^_]]],o^=e[e[o]]):r=o=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],_=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,o=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],s=0;s<o;s++)if(s<r)i[s]=t[s];else{var a=i[s-1];s%r?r>6&&s%r==4&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=f[s/r|0]<<24),i[s]=i[s-r]^a}for(var c=this._invKeySchedule=[],u=0;u<o;u++)s=o-u,a=u%4?i[s]:i[s-4],c[u]=u<4||s<=4?a:l[n[a>>>24]]^d[n[a>>>16&255]]^h[n[a>>>8&255]]^p[n[255&a]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,d,h,p,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,o,n,i,s,a){for(var c=this._nRounds,u=e[t]^r[0],l=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<c;f++){var _=o[u>>>24]^n[l>>>16&255]^i[d>>>8&255]^s[255&h]^r[p++],g=o[l>>>24]^n[d>>>16&255]^i[h>>>8&255]^s[255&u]^r[p++],m=o[d>>>24]^n[h>>>16&255]^i[u>>>8&255]^s[255&l]^r[p++],v=o[h>>>24]^n[u>>>16&255]^i[l>>>8&255]^s[255&d]^r[p++];u=_,l=g,d=m,h=v}_=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[p++],g=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^r[p++],m=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^r[p++],v=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^r[p++],e[t]=_,e[t+1]=g,e[t+2]=m,e[t+3]=v},keySize:8});e.AES=t._createHelper(_)}(),o.AES)},function(e,t,r){var o;e.exports=(o=r(57),r(301),o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding)},function(e,t,r){"use strict";r.d(t,"a",(function(){return J})),r(39),r(25),r(47),r(60),r(61),r(62),r(36),r(46),r(53),r(105),r(67),r(55),r(87),r(56),r(37),r(69),r(85),r(184),r(49),r(50),r(121),r(384);var o=r(21),n=(r(106),r(77),r(297),r(208),r(126),r(127),r(128),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(136),r(137),r(138),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(323),r(325),r(78)),i=r.n(n),s=r(181),a=(r(210),r(202),r(168),r(388),r(94),r(225),r(389),r(304)),c=r.n(a),u=r(254),l=r.n(u),d=r(156),h=r.n(d),p=r(305),f=r.n(p),_=r(57),g=r.n(_),m=r(28),v=r(3),y=function(){function e(){}return e.base64encode=function(t){var r,o,n,i,s,a;for(n=t.length,o=0,r="";o<n;){if(i=255&t.charCodeAt(o++),o==n){r+=e.base64EncodeChars.charAt(i>>2),r+=e.base64EncodeChars.charAt((3&i)<<4),r+="==";break}if(s=t.charCodeAt(o++),o==n){r+=e.base64EncodeChars.charAt(i>>2),r+=e.base64EncodeChars.charAt((3&i)<<4|(240&s)>>4),r+=e.base64EncodeChars.charAt((15&s)<<2),r+="=";break}a=t.charCodeAt(o++),r+=e.base64EncodeChars.charAt(i>>2),r+=e.base64EncodeChars.charAt((3&i)<<4|(240&s)>>4),r+=e.base64EncodeChars.charAt((15&s)<<2|(192&a)>>6),r+=e.base64EncodeChars.charAt(63&a)}return r},e.base64decode=function(t){var r,o,n,i,s,a,c;for(a=t.length,s=0,c="";s<a;){do{r=e.base64DecodeChars[255&t.charCodeAt(s++)]}while(s<a&&-1==r);if(-1==r)break;do{o=e.base64DecodeChars[255&t.charCodeAt(s++)]}while(s<a&&-1==o);if(-1==o)break;c+=String.fromCharCode(r<<2|(48&o)>>4);do{if(61==(n=255&t.charCodeAt(s++)))return c;n=e.base64DecodeChars[n]}while(s<a&&-1==n);if(-1==n)break;c+=String.fromCharCode((15&o)<<4|(60&n)>>2);do{if(61==(i=255&t.charCodeAt(s++)))return c;i=e.base64DecodeChars[i]}while(s<a&&-1==i);if(-1==i)break;c+=String.fromCharCode((3&n)<<6|i)}return c},e.utf16to8=function(e){var t,r,o,n;for(t="",o=e.length,r=0;r<o;r++)(n=e.charCodeAt(r))>=1&&n<=127?t+=e.charAt(r):n>2047?(t+=String.fromCharCode(224|n>>12&15),t+=String.fromCharCode(128|n>>6&63),t+=String.fromCharCode(128|n>>0&63)):(t+=String.fromCharCode(192|n>>6&31),t+=String.fromCharCode(128|n>>0&63));return t},e.utf8to16=function(e){var t,r,o,n,i,s;for(t="",o=e.length,r=0;r<o;)switch((n=e.charCodeAt(r++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(r-1);break;case 12:case 13:i=e.charCodeAt(r++),t+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e.charCodeAt(r++),s=e.charCodeAt(r++),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&s)<<0)}return t},e.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],e}(),b=r(1),S=r(2),E=l.a.parse("89c78c018ed563571a3024342073c002"),T=l.a.parse("0d9d89c53bd0a086834b411fe8387946"),w={},C=function(e){return e&&!isNaN(e)&&/^[1-9]\d*$/.test(String(e))},I=function(e){var t=v.e.ZegoDocsViewFileTypeUnknown,r=("string"==typeof e?e:e.name).split(".").pop();switch(r?r.toUpperCase():r){case"XLSX":case"XLS":t=v.e.ZegoDocsViewFileTypeELS;break;case"DOC":case"DOCX":t=v.e.ZegoDocsViewFileTypeDOC;break;case"PPT":case"PPTX":t=v.e.ZegoDocsViewFileTypePPT;break;case"TXT":case"MD":case"C":case"CPP":case"H":case"HPP":case"PY":case"JS":case"XML":t=v.e.ZegoDocsViewFileTypeTXT;break;case"PDF":t=v.e.ZegoDocsViewFileTypePDF;break;case"JPG":case"JPEG":case"PNG":case"BMP":case"SVG":case"HEIC":t=v.e.ZegoDocsViewFileTypeIMG;break;case"ZIP":t=v.e.ZegoDocsViewFileTypeCustomH5}return b.a.getInstance().info1(S.a.GetFileType,{result:t}),t},O=function(e,t){var r=v.e.ZegoDocsViewFileTypeDynamicPPTH5,o=t.file_type,n=t.expect_file_type,i=t.file_name,s=t.width,a=t.height,c=t.split_file_list,u=t.file_urls,l=n===r?r:o,d=l===v.e.ZegoDocsViewFileTypeELS,h={file_id:e,file_name:i,file_type:l,width:s,height:a,file_size:t.file_size,file_hash:t.file_hash,expect_file_type:n,file_urls:u,notes:t.notes||[],thumbnails:t.thumbnails||[],cdn_hosts:t.cdn_hosts||[],preload:t.preload||[]};if(c){var p=1;h.file_list=c.map((function(e){var r={};if(d){var o=Math.floor(e.width),n=Math.floor(e.height);r.name=i,r.file_name=e.file_name.replace(/\.[a-zA-Z]+$/,""),r.page_count=e.file_urls.length,r.page_list=e.file_urls.map((function(e,t){return{width:o,height:n,src:e,virtual_page_list:[{width:o,height:n,virtual_page_number:t+p}]}})),p+=e.file_urls.length}else{var s=0,a=[];e.split_data.forEach((function(e){e.page_data.forEach((function(e){for(var t=Math.floor(e[0]),r=Math.floor(e[1]),o=e[3],n=0;n<o;n++)a.push({width:t,height:r,src:u[s++],virtual_page_list:[{width:t,height:r,virtual_page_number:s}]})}))})),r.file_name=i,r.page_count=t.page_count,r.page_list=a}return r}))}else h.file_list=[{file_name:i,page_count:t.page_count,page_list:u.map((function(e,t){return{width:s,height:a,src:e,virtual_page_list:[{width:s,height:a,virtual_page_number:t+1}]}}))}];return h};function k(e,t,r,o,n){var i,s=w;if(e&&t.length){s[e]=1;var a=(t.findIndex((function(t){return t===e}))+1)%t.length;if(!s[t[a]]){var c=t[a],u=new XMLHttpRequest;if(u.timeout=6e4,r.includes("player.js")||r.includes("ppt.js")?u.open("GET",c+"/"+r):u.open("GET",c+o+r),u.onerror=function(e){A(S.a.Preload_quest_changeCDN_error,r,c,e)},u.ontimeout=function(e){A(S.a.Preload_quest_changeCDN_timeout,r,c,"\u8d44\u6e90\u8bf7\u6c42\u8d85\u65f6")},u.onloadend=function(){var e=r.includes("player.js")||r.includes("ppt.js");if(200!==u.status&&e){var t={status:u.status,src:c+"/"+r,msg:u.responseText};A(S.a.Preload_quest_changeCDN_loadend,r,c,t)}e&&R(c+"/"+r,n)},u.onreadystatechange=function(){if(4==u.readyState)if(200!=u.status){i=!1;var e={status:u.status,src:c+r};A(S.a.Preload_quest_changeCDN_readystate,r,c,e)}else i=!0},u.send(null),!i)return!1}return!0}return!1}var R=function(e,t){window.performance||window.performance.getEntries?window.performance.getEntries().forEach((function(r){if(r.name.includes(e)){var o={event:t,name:r.name,duration:r.duration,redirectTime:r.redirectEnd-r.redirectStart,DNSTime:r.domainLookupEnd-r.domainLookupStart,appacche:r.domainLookupStart-r.fetchStart,HTTPQuest:r.responseEnd-r.requestStart,TCP:r.connectEnd-r.connectStart,origin:r};b.a.getInstance().info1(S.a.Preload_performance,{data:o})}})):b.a.getInstance().error1(S.a.Preload_performance,{result:"\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u76d1\u6d4b performance"})},A=function(e,t,r,o){if(t.includes("player.js")||t.includes("ppt.js")){var n={message:o,src:r+t};b.a.getInstance().error1(e,{result:n})}},P=r(169),L=r(88),N="docservice",D="docservice-base",M="/doc/query_status",x="/doc/cvt_doc",B="/doc/cancel_cvt",U="/doc/access",j="/doc/upload_file",H="/doc/access",z=["https://"+N+"."+L.a.host.main,"https://"+D+"."+L.a.host.main],V={queryStatusUrl:""+z[0]+M,createCvtUrl:""+z[0]+x,cancelCvtUrl:""+z[0]+B,queryUrl:""+z[0]+U,uploadH5Url:""+z[0]+j,accessUrl:""+z[0]+H},q={API_Label:"/doc/",Try_Time:6,updateFullURL:function(){return V={queryStatusUrl:""+z[0]+M,createCvtUrl:""+z[0]+x,cancelCvtUrl:""+z[0]+B,queryUrl:""+z[0]+U,uploadH5Url:""+z[0]+j,accessUrl:""+z[0]+H}},updateOriginList:function(e,t,r){return z="-alpha"===e||"-test"===e?["https://docservice"+e+"."+L.a.host.main]:t?[r]:["https://"+N+"."+L.a.host.main,"https://"+D+"."+L.a.host.main],q.updateFullURL(),z},switchOrigin:function(){return z.reverse(),q.updateFullURL(),z},getOriginList:function(){return z},getFileLimit:function(){return L.a.file_type_size_limit},getFullURL:function(){return V}},G=r(4),Z=s.a.getInstance(),F=function(){function e(){var e=this;this.axios=i.a.create({timeout:m.b}),this.accessInstance=Z.axios,this.requestStatus=1,this.getFileName=function(e){return e.name},G.f.on(G.d.AccesshubConnected,(function(){e.requestStatus=2})),G.f.on(G.d.DirectConnected,(function(){e.requestStatus=3}))}return e.prototype.getMd5=function(e){return Object(P.a)(e)},e.prototype.getFileSize=function(e){return Promise.resolve(e.size)},e.prototype.requestProgress=function(e,t,r,n){return function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var i,s,a,c,u,l,d;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(h){switch(h.label){case 0:i=0,s=e.length,h.label=1;case 1:if(!(i<s))return[3,9];i&&i!==s-1&&(a=q.switchOrigin(),b.a.getInstance().info1(S.a.SwitchOrigin,a)),c=e[i],t.url=c,h.label=2;case 2:return h.trys.push([2,7,,8]),b.a.getInstance().info1(S.a.RequestProgress,{tryTime:i+1,status:"start",params:t}),2!=this.requestStatus?[3,4]:[4,this.accessInstance(t)];case 3:return l=h.sent(),[3,6];case 4:return[4,this.axios(t)];case 5:l=h.sent(),h.label=6;case 6:return u=l,b.a.getInstance().info1(S.a.Request_Retry_RequestProgress,{tryTime:i+1,status:"end",params:t,result:u.data}),r(u),[3,9];case 7:return d=h.sent(),b.a.getInstance().error1(S.a.RequestProgress,{tryTime:i+1,status:"end",params:t,result:d}),i===s-1&&n(Object(o.b)(v.d.ZegoDocsViewErrorRequestFailure)),[3,8];case 8:return i++,[3,1];case 9:return[2]}}))}))},e.prototype.requestBefore=function(e){var t=q.getOriginList(),r=e.url,o=q.API_Label+r.split(q.API_Label)[1],n=[];return t=t.map((function(e){return e+o})),new Array(q.Try_Time).fill("").forEach((function(){n=n.concat.apply(n,t)})),b.a.getInstance().info1(S.a.RequestBefore,n),n},e.prototype.request=function(e){return this.post(e)},e.prototype.post=function(e){var t=this;return"arraybuffer"===e.responseType?2===this.requestStatus?this.accessInstance(e):this.axios(e):new Promise((function(r,o){var n=t.requestBefore(e);t.requestProgress(n,e,r,o)}))},e.prototype.requestAxios=function(e){var t=this;return"arraybuffer"===e.responseType?this.axios(e):new Promise((function(r,o){var n=t.requestBefore(e);t.requestProgress(n,e,r,o)}))},e.prototype.decryptImage=function(e){return this.requestAxios({url:e,method:"get",timeout:m.b,responseType:"arraybuffer"}).then((function(e){var t=new Uint8Array(e.data),r=function(e){var t=function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e[o])<<24-o%4*8;return g.a.lib.WordArray.create(r,t)}(e).toString(h.a);return function(e){for(var t=e.words,r=e.sigBytes,o=new Uint8Array(r),n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o[n]=i}return o}(c.a.decrypt(t,E,{iv:T,mode:g.a.mode.CBC,padding:f.a}))}(t.slice(0,1024));return URL.createObjectURL(new Blob([r,t.slice(1024)],{type:"image/jpg"}))})).catch((function(e){throw e}))},e.prototype.uploadDoc=function(e,t,r){var n=e.fileServerProvider;return"oss"===n?this.uploadDocToOss(e,t):"sfs"===n?this.uploadDocToSfs(e,r):Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorParamInvalid))},e.prototype.uploadH5File=function(e,t,r,o){var n=e.name,i={app_id:o.app_id,user_id:o.id_name,platform:o.platform,web_token:o.web_token,file_name:n,file_type:v.e.ZegoDocsViewFileTypeCustomH5,width:t.width,height:t.height,page_count:t.pageCount};t.thumbnailList&&t.thumbnailList.length&&(i.thumbnails=t.thumbnailList);var s=new FormData;return s.append("req",new Blob([JSON.stringify(i)],{type:"application/json"})),s.append("document",e),this.axios({method:"post",url:o.url,data:s,timeout:m.c,onUploadProgress:function(e){if(r){var t=e.total,o=e.loaded;r({fileName:n,uploadPercent:Math.floor(o/t*100),total:t,loaded:o})}}})},e.prototype.uploadDocToOss=function(e,t){var r=e.oss,o=e.file,n=e.onProgress,i=e.fileName,s=e.fileHash,a=Object(P.b)(r),c=new FormData;return c.append("OSSAccessKeyId",a.OSSAccessKeyId),c.append("x-oss-security-token",a.securityToken),c.append("signature",a.signature),c.append("policy",a.policy),c.append("successActionStatus",a.successActionStatus),c.append("key",a.objectName),c.append("file",o),c.append("name",o.name),this.axios({method:"post",url:a.url,data:c,timeout:m.c,onUploadProgress:function(e){if(n&&!t){var r=e.total,o=e.loaded;n({status:v.g.UPLOADING,fileName:i,fileHash:s,uploadPercent:Math.floor(o/r*100),total:r,loaded:o})}}})},e.prototype.uploadDocToSfs=function(e,t){var r=e.sfs,o=e.fileHash,n=e.file,i=e.onProgress,s=e.fileName,a=r,c=a.token,u=a.expired_timestamp,l=a.api,d=a.object_name,h={app_id:t.app_id,user_id:t.id_name,platform:t.platform,expired_timestamp:u,sfs_token:c,file_name:d,file_hash:o},p=new FormData;return p.append("req",new Blob([JSON.stringify(h)],{type:"application/json"})),p.append("document",n),this.axios({method:"post",url:l,data:p,timeout:m.c,onUploadProgress:function(e){if(i){var t=e.total,r=e.loaded;i({status:v.g.UPLOADING,fileName:s,fileHash:o,uploadPercent:Math.floor(r/t*100),total:t,loaded:r})}}})},e}(),W=function(){return(W=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Y=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},Q=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},K=-1!=="".indexOf("private"),J=function(){function e(e){if(this.commonParams={platform:32,app_id:0,web_token:"",id_name:""},this.stateCenter={env:"",cancelMap:{},preloadPPTH5CDNUsedMap:{}},this.preloadFileArr=[],this.cacheFileSeq=0,this.cacheFileMap={},this.tokenTimer=null,this.timerArr=[],!e||!e.appID||isNaN(e.appID)||!e.token)throw new Error("constructor parameter error.");this.renewLocalToken(e.token),e.isTestEnv&&b.a.getInstance().setDocEnv("test"),this.init(e),this.platformAPI=new F}return e.prototype.renewToken=function(e){return e?(this.commonParams.web_token=e,this.renewLocalToken(e),b.a.getInstance().updateDocToken(e),!0):(b.a.getInstance().error1(S.a.RenewToken,"token is null"),!1)},e.prototype.renewLocalToken=function(e,t){this.token=e;var r=(new Date).getTime(),o=void 0;if(t&&"number"==typeof t)o=1e3*t;else{if(!["03","04"].includes(e.substring(0,2)))return;o=1e3*function(e){try{var t,r=Uint8Array.from(y.base64decode(e),(function(e){return e.charCodeAt(0)})),o=new DataView(r.buffer);return t="function"==typeof o.getBigInt64?o.getBigUint64(0):function(e,t,r){var o=r.getUint32(0,t),n=r.getUint32(4,t),i=Math.pow(2,32)*o+n;return Number.isSafeInteger(i),i}(0,!1,o),Number(t>0?t:o.getBigUint64(0,!0))}catch(e){}return-1}(e.substring(2))-r}o&&this.resetTokenTimer(o)},e.prototype.resetTokenTimer=function(e){var t=this;e=(e=(e-=3e4)<0?0:e)>2147483648?2147483648:e,b.a.getInstance().info1(S.a.ResetTokenTimer,{interval:e}),this.tokenTimer&&(this.timerArr[this.tokenTimer]&&this.timerArr[this.tokenTimer](),clearTimeout(this.tokenTimer)),this.tokenTimer=setTimeout((function(){G.f.emit(G.a.TokenWillExpire),delete t.timerArr[t.tokenTimer]}),e),this.timerArr[this.tokenTimer]=this.startTimer},e.prototype.startTimer=function(){G.f.emit(G.a.TokenWillExpire)},e.prototype.init=function(e){b.a.getInstance().info1(S.a.Init,{config:e});var t=e.token,r=e.appID,o=e.userID,n=e.isTestEnv;this.commonParams.app_id=r,this.commonParams.web_token=t,this.commonParams.id_name=o||"",this.config={domain:K?"":this.getDomain("")},this.setTestEnv(!!n),b.a.getInstance().info1(S.a.New,{isProd:n})},e.prototype.getDomain=function(e){return b.a.getInstance().info1(S.a.GetDomain,"https://docservice"+e+".zego.im"),"https://docservice"+e+".zego.im"},e.prototype.isInvalidDomain=function(){var e=!this.stateCenter.env&&!this.config.domain;return b.a.getInstance().info1(S.a.IsInvalidDomain,{isInvalid:e}),e},e.prototype.getVersion=function(){return"2.9.0"},e.prototype.setTestEnv=function(e){"boolean"==typeof e&&(this.stateCenter.env=e?"-test":"");var t=q.updateOriginList(this.stateCenter.env,K,this.config.domain);b.a.getInstance().info1(S.a.UpdateOriginList,t)},e.prototype.setConfig=function(e,t){return b.a.getInstance().info1(S.a.API_setConfig,{key:e,value:t}),!(!e||null==t)&&(["dynamicPPT_HD","dynamicPPT_AutomaticPage",v.c.Domain,v.c.ThumbnailMode].includes(e)?(this.config[e]=t,e===v.c.Domain&&this.setTestEnv()):(this.stateCenter.env="true"===t||!0===t?"-alpha":"-test",b.a.getInstance().setDocEnv(this.stateCenter.env.replace("-","")),this.setTestEnv()),!0)},e.prototype.getConfig=function(e){return b.a.getInstance().info1(S.a.API_getConfig,{key:e,value:this.config[e]}),this.config[e]},e.prototype.decryptImage=function(e){return b.a.getInstance().info1(S.a.DecryptImage,{url:e}),this.platformAPI.decryptImage(e)},e.prototype.uploadH5File=function(e,t,r){return Y(this,void 0,void 0,(function(){var n,i,s,a,c,u,l,d=this;return Q(this,(function(h){switch(h.label){case 0:if(b.a.getInstance().info1(S.a.API_uploadH5File,{file:e,config:t}),!e||!t||!C(t.width)||!C(t.height)||!C(t.pageCount)||t.thumbnailList&&t.thumbnailList.length&&t.thumbnailList.length!==t.pageCount)return[2,Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorParamInvalid))];h.label=1;case 1:return h.trys.push([1,5,,6]),(n=I(e))!=v.e.ZegoDocsViewFileTypeCustomH5?[2,Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorZipFileInvalid))]:[4,this.platformAPI.getFileSize(e)];case 2:return i=h.sent(),this.checkSizeHandle(n,i)?[4,this.platformAPI.getMd5(e)]:[2,Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorFileSizeLimit))];case 3:return s=h.sent(),[4,this.queryStatus({fileHash:s,fileType:n,expectFileType:m.a.H5ZIP})];case 4:return a=h.sent(),c=a.fileID,b.a.getInstance().info1(S.a.UploadH5File,{fileType:n,fileSize:i,fileHash:s,statusInfo:a,fileID:c}),c?[2,Promise.resolve(c)]:[3,6];case 5:return u=h.sent(),l=Object(o.b)(u.code||v.d.ZegoDocsViewErrorUploadFailed),[2,Promise.reject(W(W({},l),{error:u}))];case 6:return[2,this.platformAPI.uploadH5File(e,t,r,W(W({},this.commonParams),{url:q.getFullURL().uploadH5Url})).then((function(r){var n,i=r.data;b.a.getInstance().info1(S.a.UploadH5File,{params:t,file:d.platformAPI.getFileName(e),result:i});var s=null===(n=i.ret)||void 0===n?void 0:n.code;return 0===s?i.file_id:Promise.reject(Object(o.b)(s))})).catch((function(e){var t;throw 413===(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.status)?Object(o.b)(v.d.ZegoDocsViewErrorFileSizeLimit):e}))]}}))}))},e.prototype.uploadFile=function(e){return b.a.getInstance().info1(S.a.API_uploadFile,{uploadParams:e}),!e.file||"number"!=typeof e.renderType||isNaN(e.renderType)?Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorParamInvalid)):e.file instanceof File&&0===e.file.size?Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorFileContentEmpty)):this.isInvalidDomain()?Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorEmptyDomain)):this.uploadProgress(e).then((function(t){return b.a.getInstance().info1(S.a.UploadFile,{params:e,result:t}),t}))},e.prototype.loadFile=function(e){var t=this;return b.a.getInstance().info1(S.a.API_loadFile,{fileID:e}),this.isInvalidDomain()?Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorEmptyDomain)):e?new Promise((function(r,n){return Y(t,void 0,void 0,(function(){var t,i,s,a,c;return Q(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),t=W(W({},this.commonParams),{file_id:e}),[4,this.platformAPI.request({url:q.getFullURL().queryUrl,method:"post",timeout:m.b,data:t})];case 1:return i=u.sent(),s=i.data,b.a.getInstance().info1(S.a.LoadFile,{data:s}),0===s.ret.code?(s.file_urls=s.file_urls||[],s.page_count=s.page_count||s.file_urls.length||1,(a=document.getElementById("preload_iframe"+s.file_hash))&&document.body.removeChild(a),r(O(e,s))):n(Object(o.b)(s.ret.code,s.ret.message)),[3,3];case 2:return c=u.sent(),n(c),[3,3];case 3:return[2]}}))}))})):Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorParamInvalid))},e.prototype.cacheFile=function(e,t){var r=this;return b.a.getInstance().info1(S.a.API_cacheFile,{fileID:e}),this.isInvalidDomain()?Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorEmptyDomain)):e?new Promise((function(n,i){return Y(r,void 0,void 0,(function(){var r,s,a,c,u;return Q(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),r=W(W({},this.commonParams),{file_id:e}),[4,this.platformAPI.request({url:q.getFullURL().queryUrl,method:"post",timeout:m.b,data:r})];case 1:return s=l.sent(),a=s.data,b.a.getInstance().info1(S.a.CacheFile,{data:a}),0!==a.ret.code?[3,3]:[4,this.preloadFile(a,this.cacheFileMap,++this.cacheFileSeq,e,t)];case 2:return c=l.sent(),n(c),[3,4];case 3:i(Object(o.b)(a.ret.code,a.ret.message)),l.label=4;case 4:return[3,6];case 5:return u=l.sent(),i(u),[3,6];case 6:return[2]}}))}))})):Promise.reject(Object(o.b)(v.d.ZegoDocsViewErrorParamInvalid))},e.prototype.cancelCacheFile=function(e){if(this.cacheFileMap[e]){var t=this.cacheFileMap[e].hasCancel=!0,r=this.cacheFileMap[e].result,o=this.cacheFileMap[e].listener,n=this.cacheFileMap[e].cbTimer;return r.state=v.a.Cached,o instanceof Function&&o(r),n&&clearInterval(n),delete this.cacheFileMap[e],t}return!1},e.prototype.cancelUploadFile=function(e){var t=this,r=e.fileHash,n=e.taskID;return b.a.getInstance().info1(S.a.API_cancelUploadFile,{fileHash:r,taskID:n}),new Promise(n?function(i,s){return Y(t,void 0,void 0,(function(){var t,a,c,u;return Q(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t=W(W({},this.commonParams),{task_id:n}),[4,this.platformAPI.request({url:q.getFullURL().cancelCvtUrl,method:"post",timeout:m.b,data:t})];case 1:return a=l.sent(),0===(c=a.data).ret.code?(this.stateCenter.cancelMap[r]=n,b.a.getInstance().info1(S.a.CancelUploadFile,{result:e}),i(!0)):s(Object(o.b)(c.ret.code,c.ret.message)),[3,3];case 2:return u=l.sent(),s(u),[3,3];case 3:return[2]}}))}))}:function(e,o){t.stateCenter.cancelMap[r]=!0,e(!0)})},e.prototype.preloadFile=function(e,t,r,n,i){var s=this;return new Promise((function(a,c){return Y(s,void 0,void 0,(function(){var s,u,l,d,h,p,f,_,g,m,y,E,T,w,C,I,P=this;return Q(this,(function(L){if((s=e.expect_file_type===v.e.ZegoDocsViewFileTypeDynamicPPTH5||e.expect_file_type===v.e.ZegoDocsViewFileTypeCustomH5)&&!e.preload&&c(Object(o.b)(v.d.ZegoDocsViewErrorCacheNotSupported)),s&&e.preload){if((null===(I=this.preloadFileArr)||void 0===I?void 0:I.length)>0&&this.preloadFileArr.includes(n))return b.a.getInstance().info1(S.a.API_cacheFile,{preloadFileArr:this.preloadFileArr}),[2,a({totalFileNum:0,failedFileNum:0})];this.preloadFileArr.push(n),e.preload.slide_files||a({totalFileNum:0,failedFileNum:0}),u=0,l=0,d=e.file_urls[0].replace("index.html",""),h=e.cdn_hosts[0],p=d.split("zego.im")[1],f=e.cdn_hosts.reverse(),_=!1,g=!1;try{(m=document.createElement("iframe")).id="preload_iframe"+e.file_hash,m.width="0",m.height="0",m.style.display="none",m.src=e.file_urls[0],document.body.appendChild(m),window.addEventListener("message",(function(e){var t=e.data;t&&"zegodocsview"===t.source&&"syncCurrentStep"==t.action&&(g=!0,b.a.getInstance().info1(S.b.Preload_iframe_postMsg,"\u9884\u52a0\u8f7d\u65f6 player.js \u6267\u884c\u4e86\u5185\u90e8\u65b9\u6cd5"))})),m.onerror=function(e){b.a.getInstance().error1(S.b.Preload_iframe_load_error,{result:e})},setTimeout((function(){if(!_){var e=m.src;g?(document.body.removeChild(m),b.a.getInstance().info1(S.b.Preload_iframe_load,{result:"suc"})):(b.a.getInstance().warn1(S.a.Preload_iframe_retry,{result:"60s \u5185\u672a\u6267\u884c start \u5185\u90e8\u65b9\u6cd5\u8ba4\u4e3a\u52a0\u8f7d\u5931\u8d25\uff0ciframe \u5f00\u59cb\u91cd\u8bd5"}),_=!0,f.length>1?m.src=e.replace(f[1],f[0]):(document.body.removeChild(m),m.src=e,document.body.appendChild(m)),g=!1,b.a.getInstance().warn1(S.b.Preload_iframe_retry_cdn,{src:m.src}))}}),6e4),setTimeout((function(){_&&(document.body.removeChild(m),b.a.getInstance().info1(S.b.Preload_iframe_load,{result:"\u91cd\u8bd5\u5b8c\u6bd5",iframePlayerLoaded:g}))}),12e4)}catch(e){b.a.getInstance().info1(S.b.Preload_iframe_error,{result:e})}e.preload.preload_js||b.a.getInstance().error1(S.b.Preload_quest_error,"preload_js \u4e0d\u5b58\u5728"),e.preload.preload_js&&e.preload.preload_js.forEach((function(e){try{var t=new XMLHttpRequest;t.timeout=6e4,t.open("GET",h+"/"+e.rel),t.onerror=function(t){k(d,f,e.rel,p,"onerror"),A(S.a.Preload_quest_error,e.rel,d,t),c(t)},t.ontimeout=function(t){k(d,f,e.rel,p,"ontimeout"),A(S.a.Preload_quest_timeout,e.rel,d,"\u8d44\u6e90\u8bf7\u6c42\u8d85\u65f6"),c(t)},t.onloadend=function(){if(200!==t.status){var r={status:t.status,src:d+e.rel,msg:t.responseText};A(S.a.Preload_quest_loadend,e.rel,d,r)}R(e.rel)},t.onreadystatechange=function(){if(4==t.readyState){if(u++,200!=t.status){var r={status:t.status,src:d+e.rel};A(S.a.Preload_quest_readystate,e.rel,d,r),!k(d,f,e.rel,p,"onreadystatechange")&&l++}}else 200!=t.status&&(r={status:t.status,src:d+e.rel,msg:t.statusText},A(S.a.Preload_onreadystate_error,e.rel,d,r))},t.send(null)}catch(t){k(d,f,e.rel,p,"trycatch"),A(S.a.Preload_quest_error,e.rel,d,t)}})),e.preload.slide_files.forEach((function(e){for(var t in e)e[t].forEach((function(e){try{var t=new XMLHttpRequest;t.timeout=6e4,t.open("GET",d+e.rel),t.onreadystatechange=function(){4==t.readyState&&(u++,200!=t.status)&&(t.status,e.rel,!k(d,f,e.rel,p)&&l++)},t.send(null)}catch(e){}}))})),a({totalFileNum:u,failedFileNum:l})}else t[r]={result:{seq:r,totalFileNum:0,failedFileNum:0,loadedFileNum:0,state:v.a.Caching},hasCancel:!1,listener:i,cbTimer:null},y=t[r].result,e.enable_preload&&(E=e.file_urls,y.totalFileNum=E.length,i instanceof Function&&(t[r].cbTimer=setInterval((function(){i(y)}),2e3)),T=O(n,e),w=[],T.file_list.forEach((function(e){var t=!!e.page_count;e.page_list.forEach((function(e,r){w.push(e.src+(t?"?p="+(r+1):""))}))})),C=function(){if(t[r]){var e=t[r].cbTimer;y.state=v.a.Cached,i instanceof Function&&i(y),e&&clearInterval(e),delete t[r]}},this.queueRequest(w,t[r]).then((function(e){var o=0===e.length,n=!t[r]||t[r].hasCancel;if(o)return C();n?(y.failedFileNum=e.length,C()):P.queueRequest(e,t[r]).then((function(e){y.failedFileNum=e.length,C()}))})),a(y));return[2]}))}))}))},e.prototype.queueRequest=function(e,t){var r=e.length+1,o=0,n=e.length>5?5:e.length,s=[];return t.requestPromise=new Promise((function(a,c){!function c(u){if(!(n>=r)){if(t.hasCancel)return a(s);var l=u?0:n-1;e.slice(l,n).forEach((function(u){i.a.get(u,{timeout:6e4}).then((function(e){if(t.result.loadedFileNum+=1,n<=r)return++n,c()})).catch((function(e){if(s.push(u),n<=r)return++n,c()})).finally((function(){++o>=e.length&&a(s)}))}))}}(!0)})),t.requestPromise},e.prototype.uploadSucceedAfter=function(e){var t=e.result,r=e.onProgress,o=e.resolve;r&&r(t),o&&o(t.fileID)},e.prototype.uploadFailedAfter=function(e,t){e&&e(t)},e.prototype.uploadProgressInit=function(e){return Y(this,void 0,void 0,(function(){var t,r,o,n,i,s,a,c,u,l;return Q(this,(function(d){switch(d.label){case 0:return t=e.statusInitSub,r=e.file,o=e.fileName,n=e.onProgress,s=(i=t).oss,a=i.fileServerProvider,c=i.fileHash,u=i.sfs,l=this.stateCenter.cancelMap[c],b.a.getInstance().info1(S.a.UploadProgressInit,{progressCvtParams:e,statusInitSub:t,isCancel:l}),l?(n&&n({status:v.g.CONVERT_CANCEL,fileName:o,fileHash:c}),this.stateCenter.cancelMap[c]=!1,[2,!1]):[4,this.platformAPI.uploadDoc({file:r,fileServerProvider:a,oss:s,sfs:u,fileHash:c,fileName:o,onProgress:n},this.stateCenter.cancelMap[c],this.commonParams)];case 1:return d.sent(),n&&n({status:v.g.UPLOADED,fileName:o,fileHash:c}),[4,this.uploadProgressCvt(e)];case 2:return d.sent(),[2,!0]}}))}))},e.prototype.uploadProgressCvt=function(e){return Y(this,void 0,void 0,(function(){var t,r,o,n,i,s,a,c,u,l,d,h,p,f,_,g;return Q(this,(function(m){switch(m.label){case 0:return t=e.file,r=e.onProgress,o=e.fileType,n=e.fileHash,i=e.fileName,s=e.originReslove,a=e.resolve,c=e.expectFileType,u=e.originReject,l=e.reject,d=e.uploadOptions,h=this.stateCenter.cancelMap[n],r&&r({status:h?v.g.CONVERT_CANCEL:v.g.UPLOADED,fileName:i,fileHash:n}),h?(this.stateCenter.cancelMap[n]=!1,[2,!1]):(f=this.createCvtDoc,_={},[4,this.platformAPI.getFileSize(t)]);case 1:return[4,f.apply(this,[(_.fileSize=m.sent(),_.fileName=this.platformAPI.getFileName(t),_.fileType=o,_.fileHash=n,_.expectFileType=c,_.uploadOptions=d,_)])];case 2:return p=m.sent(),g={fileName:i,fileHash:n,taskID:p.taskID,onProgress:r},b.a.getInstance().info1(S.a.UploadProgressCvt,{uploadProgressParams:g}),[4,this.uploadProgress(g,s||a,u||l)];case 3:return m.sent(),[2,!0]}}))}))},e.prototype.checkTypeHandle=function(e){return e!==v.e.ZegoDocsViewFileTypeUnknown},e.prototype.checkRenderTypeHandle=function(e,t){return t!=v.f.ZegoDocsViewRenderTypeVectorAndIMG&&t!=v.f.ZegoDocsViewRenderTypeIMG||e!=v.e.ZegoDocsViewFileTypeCustomH5?t==v.f.ZegoDocsViewRenderTypeDynamicPPTH5&&e!==v.e.ZegoDocsViewFileTypePPT?(b.a.getInstance().info1(S.a.CheckRenderTypeHandle,"false"),!1):(b.a.getInstance().info1(S.a.CheckRenderTypeHandle,"true"),!0):(b.a.getInstance().info1(S.a.CheckRenderTypeHandle,"false"),!1)},e.prototype.checkSizeHandle=function(e,t){var r=q.getFileLimit(),o=r[0][1],n=r[1][1],i=r[2][1],s=r[3][1],a=r[4][1],c=r[5][1],u=r[6][1],l=!0;switch(e){case v.e.ZegoDocsViewFileTypePPT:t>o&&(l=!1);break;case v.e.ZegoDocsViewFileTypeDOC:t>n&&(l=!1);break;case v.e.ZegoDocsViewFileTypePDF:t>s&&(l=!1);break;case v.e.ZegoDocsViewFileTypeIMG:t>a&&(l=!1);break;case v.e.ZegoDocsViewFileTypeELS:t>i&&(l=!1);break;case v.e.ZegoDocsViewFileTypeTXT:t>c&&(l=!1);break;case v.e.ZegoDocsViewFileTypeCustomH5:t>u&&(l=!1)}return b.a.getInstance().info1(S.a.CheckSizeHandle,{result:l}),l},e.prototype.uploadProgress=function(e,t,r){var n=this;return b.a.getInstance().info1(S.a.UploadProgress,{uploadParams:e}),new Promise((function(i,s){return Y(n,void 0,void 0,(function(){var n,a,c,u,l,d,h,p,f,_,g,y,E,T,w,C=this;return Q(this,(function(O){switch(O.label){case 0:n="",a="",c=0,u=v.e.ZegoDocsViewFileTypeUnknown,O.label=1;case 1:return O.trys.push([1,19,,20]),d=(l=e).file,h=l.renderType,p=l.uploadOptions,f=void 0,_=m.a.PDF,d?v.f[h]?(u=I(d),this.checkTypeHandle(u)?this.checkRenderTypeHandle(u,h)?[4,this.platformAPI.getFileSize(d)]:[2,s(Object(o.b)(v.d.ZegoDocsViewErrorUnsupportRenderType))]:[2,s(Object(o.b)(v.d.ZegoDocsViewErrorConvertFileTypeInvalid))]):[2,s(Object(o.b)(v.d.ZegoDocsViewErrorUnsupportRenderType))]:[3,5];case 2:return c=O.sent(),this.checkSizeHandle(u,c)?(a=this.platformAPI.getFileName(d),_=function(e,t){var r;switch(e){case v.f.ZegoDocsViewRenderTypeVector:r=m.a.PDF;break;case v.f.ZegoDocsViewRenderTypeIMG:case v.f.ZegoDocsViewRenderTypeVectorAndIMG:r=t===v.e.ZegoDocsViewFileTypeIMG?m.a.IMG:m.a.IMGAndPDF;break;case v.f.ZegoDocsViewRenderTypeDynamicPPTH5:r=m.a.PPTH5;break;default:r=m.a.IMGAndPDF}return r}(h,u),[4,this.platformAPI.getMd5(d)]):[2,s(Object(o.b)(v.d.ZegoDocsViewErrorFileSizeLimit))];case 3:return n=O.sent(),[4,this.queryStatus({fileHash:n,fileType:u,expectFileType:_})];case 4:return f=O.sent(),b.a.getInstance().info1(S.a.UploadProgress_query,{fileName:a,expectFileType:_,fileHash:n,statusInfo:f}),[3,7];case 5:return a=(g=e).fileName,n=g.fileHash,[4,this.queryStatus({taskID:g.taskID})];case 6:f=O.sent(),b.a.getInstance().info1(S.a.UploadProgress_query,{params:g,statusInfo:f}),O.label=7;case 7:switch(y=f.status,b.a.getInstance().info1(S.a.UploadProgress_status,{status:y}),y){case v.g.UPLOADING:return[3,8];case v.g.UPLOADED:return[3,10];case v.g.WAITING:case v.g.CONVERTING:return[3,12];case v.g.CONVERTED:return[3,16]}return[3,17];case 8:return[4,this.uploadProgressInit({file:d,expectFileType:_,fileType:u,fileHash:n,fileName:a,statusInitSub:f,onProgress:e.onProgress,originReslove:t,resolve:i,originReject:r,reject:s,uploadOptions:p})];case 9:return O.sent(),[3,18];case 10:return[4,this.uploadProgressCvt({file:d,expectFileType:_,fileType:u,fileHash:n,fileName:a,onProgress:e.onProgress,originReslove:t,resolve:i,originReject:r,reject:s,uploadOptions:p})];case 11:return O.sent(),[3,18];case 12:return E=this.stateCenter.cancelMap[n],T=f.taskID,e.onProgress&&e.onProgress({status:E?v.g.CONVERT_CANCEL:y,fileName:a,fileHash:n,taskID:T}),E?(this.stateCenter.cancelMap[n]=!1,[4,this.cancelUploadFile({fileHash:n,taskID:T})]):[3,14];case 13:return O.sent(),[3,15];case 14:setTimeout((function(){return Y(C,void 0,void 0,(function(){return Q(this,(function(o){switch(o.label){case 0:return[4,this.uploadProgress({taskID:T,fileName:a,fileHash:n,onProgress:e.onProgress},t||i,r||s)];case 1:return o.sent(),[2]}}))}))}),2e3),O.label=15;case 15:return[3,18];case 16:return this.uploadSucceedAfter({result:{status:f.status,fileID:f.fileID,fileName:a,fileHash:n},onProgress:e.onProgress,resolve:t||i}),[3,18];case 17:return this.uploadFailedAfter(r||s,W({status:y,taskID:T},Object(o.b)(v.d.ZegoDocsViewErrorConvertFail))),[3,18];case 18:return[3,20];case 19:return w=O.sent(),this.uploadFailedAfter(r||s,W(W({status:v.g.CONVERT_FAIL},Object(o.b)(w&&w.code||v.d.ZegoDocsViewErrorConvertFail)),{error:w})),[3,20];case 20:return[2]}}))}))}))},e.prototype.queryStatus=function(e){var t=this,r=W({},this.commonParams);if(e.taskID)r.task_id=e.taskID;else{var n=e,i=n.fileHash,s=n.fileType,a=n.expectFileType;r.file_hash=i,r.file_type=s,r.expect_file_type=a}return new Promise((function(n,i){return Y(t,void 0,void 0,(function(){var t,s,a,c,u,l,d,h,p,f,_,g,y;return Q(this,(function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,this.platformAPI.request({url:q.getFullURL().queryStatusUrl,method:"post",timeout:e.timeout||m.b,data:r})];case 1:if(t=E.sent(),s=t.data,a=s.ret,c=s.file_type,u=s.status,l=s.file_hash,d=s.file_server_provider,h=s.oss,p=s.sfs,f=s.task_id,_=s.query_interval,g=s.file_id,b.a.getInstance().info1(S.a.QueryStatus,{data:s}),0===a.code)switch(u){case 32:case 64:case 128:case 256:case 512:case 1024:case 8192:case 32768:case 32769:case 32773:case 32774:i(Object(o.b)(u));break;case 1:n({fileType:c,status:u,fileHash:l,fileServerProvider:d,oss:h,sfs:p});break;case 2:n({fileType:c,status:u,fileHash:l});break;case 4:n({fileType:c,status:u,taskID:f,queryInterval:_||1e3});break;case 8:n({fileType:c,status:u,taskID:f});break;case 16:n({fileID:g,status:u});break;default:i(Object(o.b)(v.d.ZegoDocsViewErrorConvertFail))}else i(Object(o.b)(s.ret.code,s.ret.message));return[3,3];case 2:return y=E.sent(),i(y),[3,3];case 3:return[2]}}))}))}))},e.prototype.getCvtH5HighQualityMode=function(){return"true"===String(this.config.dynamicPPT_HD)},e.prototype.getCvtThumbnailMode=function(){return+this.config.thumbnailMode||1},e.prototype.getCvtH5AutomaticPageMode=function(){var e=this.config.dynamicPPT_AutomaticPage;return null==e||"true"===String(e)?2:1},e.prototype.createCvtDoc=function(e){var t=this,r=e.timeout,n=e.srcFileUrl,i=e.fileName,s=e.fileHash,a=e.fileSize,c=e.fileType,u=e.expectFileType,l=e.uploadOptions,d=(null==l?void 0:l.renderImgType)||v.b.SVG,h=W(W({},this.commonParams),{file_name:i,file_hash:s,file_size:a,file_type:c,expect_file_type:u,enable_vector_image:d}),p=this.getCvtThumbnailMode();1!=p&&(h.thumbnail_height_type=p);var f=this.getCvtH5HighQualityMode();f&&(h.export_high_quality_images=f);var _=this.getCvtH5AutomaticPageMode();return 2!=_&&(h.h5_automatic_page_turning=_),n&&(h.src_file_url=n),b.a.getInstance().info1(S.a.CreateCvtDoc,{createCvtDocParams:e,sendData:h}),new Promise((function(e,n){return Y(t,void 0,void 0,(function(){var t,i,s;return Q(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.platformAPI.request({url:q.getFullURL().createCvtUrl,method:"post",timeout:r||m.b,data:h})];case 1:return t=a.sent(),i=t.data,b.a.getInstance().info1(S.a.CreateCvtDoc,{data:i}),0===i.ret.code?e({status:i.status,taskID:i.task_id}):n(Object(o.b)(i.ret.code,i.ret.message)),[3,3];case 2:return s=a.sent(),n(s),[3,3];case 3:return[2]}}))}))}))},e}()},function(e,t,r){var o=r(6),n=r(383);o({target:"Function",proto:!0,forced:Function.bind!==n},{bind:n})},function(e,t,r){"use strict";var o,n,i,s=r(6),a=r(44),c=r(152),u=r(11),l=r(13),d=r(24),h=r(75),p=r(72),f=r(177),_=r(27),g=r(15),m=r(20),v=r(86),y=r(71),b=r(232).set,S=r(309),E=r(312),T=r(187),w=r(313),C=r(40),I=r(104),O=r(119),k=r(120),R=O.CONSTRUCTOR,A=O.REJECTION_EVENT,P=O.SUBCLASSING,L=C.getterFor("Promise"),N=C.set,D=I&&I.prototype,M=I,x=D,B=u.TypeError,U=u.document,j=u.process,H=k.f,z=H,V=!!(U&&U.createEvent&&u.dispatchEvent),q=function(e){var t;return!(!m(e)||!g(t=e.then))&&t},G=function(e,t){var r,o,n,i=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,u=e.reject,d=e.domain;try{a?(s||(2===t.rejection&&Q(t),t.rejection=1),!0===a?r=i:(d&&d.enter(),r=a(i),d&&(d.exit(),n=!0)),r===e.promise?u(B("Promise-chain cycle")):(o=q(r))?l(o,r,c,u):c(r)):u(i)}catch(e){d&&!n&&d.exit(),u(e)}},Z=function(e,t){e.notified||(e.notified=!0,S((function(){for(var r,o=e.reactions;r=o.get();)G(r,e);e.notified=!1,t&&!e.rejection&&W(e)})))},F=function(e,t,r){var o,n;V?((o=U.createEvent("Event")).promise=t,o.reason=r,o.initEvent(e,!1,!0),u.dispatchEvent(o)):o={promise:t,reason:r},!A&&(n=u["on"+e])?n(o):"unhandledrejection"===e&&E("Unhandled promise rejection",r)},W=function(e){l(b,u,(function(){var t,r=e.facade,o=e.value;if(Y(e)&&(t=T((function(){c?j.emit("unhandledRejection",o,r):F("unhandledrejection",r,o)})),e.rejection=c||Y(e)?2:1,t.error))throw t.value}))},Y=function(e){return 1!==e.rejection&&!e.parent},Q=function(e){l(b,u,(function(){var t=e.facade;c?j.emit("rejectionHandled",t):F("rejectionhandled",t,e.value)}))},K=function(e,t,r){return function(o){e(t,o,r)}},J=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,Z(e,!0))},X=function e(t,r,o){if(!t.done){t.done=!0,o&&(t=o);try{if(t.facade===r)throw B("Promise can't be resolved itself");var n=q(r);n?S((function(){var o={done:!1};try{l(n,r,K(e,o,t),K(J,o,t))}catch(r){J(o,r,t)}})):(t.value=r,t.state=1,Z(t,!1))}catch(r){J({done:!1},r,t)}}};if(R&&(x=(M=function(e){v(this,x),_(e),l(o,this);var t=L(this);try{e(K(X,t),K(J,t))}catch(e){J(t,e)}}).prototype,(o=function(e){N(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new w,rejection:!1,state:0,value:void 0})}).prototype=d(x,"then",(function(e,t){var r=L(this),o=H(y(this,M));return r.parent=!0,o.ok=!g(e)||e,o.fail=g(t)&&t,o.domain=c?j.domain:void 0,0==r.state?r.reactions.add(o):S((function(){G(o,r)})),o.promise})),n=function(){var e=new o,t=L(e);this.promise=e,this.resolve=K(X,t),this.reject=K(J,t)},k.f=H=function(e){return e===M||void 0===e?new n(e):z(e)},!a&&g(I)&&D!==Object.prototype)){i=D.then,P||d(D,"then",(function(e,t){var r=this;return new M((function(e,t){l(i,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete D.constructor}catch(e){}h&&h(D,x)}s({global:!0,constructor:!0,wrap:!0,forced:R},{Promise:M}),p(M,"Promise",!1,!0),f("Promise")},function(e,t,r){var o,n,i,s,a,c,u,l,d=r(11),h=r(34),p=r(76).f,f=r(232).set,_=r(233),g=r(310),m=r(311),v=r(152),y=d.MutationObserver||d.WebKitMutationObserver,b=d.document,S=d.process,E=d.Promise,T=p(d,"queueMicrotask"),w=T&&T.value;w||(o=function(){var e,t;for(v&&(e=S.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?s():i=void 0,e}}i=void 0,e&&e.enter()},_||v||m||!y||!b?!g&&E&&E.resolve?((u=E.resolve(void 0)).constructor=E,l=h(u.then,u),s=function(){l(o)}):v?s=function(){S.nextTick(o)}:(f=h(f,d),s=function(){f(o)}):(a=!0,c=b.createTextNode(""),new y(o).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),e.exports=w||function(e){var t={fn:e,next:void 0};i&&(i.next=t),n||(n=t,s()),i=t}},function(e,t,r){var o=r(65),n=r(11);e.exports=/ipad|iphone|ipod/i.test(o)&&void 0!==n.Pebble},function(e,t,r){var o=r(65);e.exports=/web0s(?!.*chrome)/i.test(o)},function(e,t,r){var o=r(11);e.exports=function(e,t){var r=o.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))}},function(e,t){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=r},function(e,t,r){var o=r(234),n=r(152);e.exports=!o&&!n&&"object"==typeof window&&"object"==typeof document},function(e,t,r){"use strict";var o=r(6),n=r(13),i=r(27),s=r(120),a=r(187),c=r(38);o({target:"Promise",stat:!0,forced:r(236)},{all:function(e){var t=this,r=s.f(t),o=r.resolve,u=r.reject,l=a((function(){var r=i(t.resolve),s=[],a=0,l=1;c(e,(function(e){var i=a++,c=!1;l++,n(r,t,e).then((function(e){c||(c=!0,s[i]=e,--l||o(s))}),u)})),--l||o(s)}));return l.error&&u(l.value),r.promise}})},function(e,t,r){"use strict";var o=r(6),n=r(44),i=r(119).CONSTRUCTOR,s=r(104),a=r(32),c=r(15),u=r(24),l=s&&s.prototype;if(o({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!n&&c(s)){var d=a("Promise").prototype.catch;l.catch!==d&&u(l,"catch",d,{unsafe:!0})}},function(e,t,r){"use strict";var o=r(6),n=r(13),i=r(27),s=r(120),a=r(187),c=r(38);o({target:"Promise",stat:!0,forced:r(236)},{race:function(e){var t=this,r=s.f(t),o=r.reject,u=a((function(){var s=i(t.resolve);c(e,(function(e){n(s,t,e).then(r.resolve,o)}))}));return u.error&&o(u.value),r.promise}})},function(e,t,r){"use strict";var o=r(6),n=r(13),i=r(120);o({target:"Promise",stat:!0,forced:r(119).CONSTRUCTOR},{reject:function(e){var t=i.f(this);return n(t.reject,void 0,e),t.promise}})},function(e,t,r){"use strict";var o=r(6),n=r(32),i=r(44),s=r(104),a=r(119).CONSTRUCTOR,c=r(255),u=n("Promise"),l=i&&!a;o({target:"Promise",stat:!0,forced:i||a},{resolve:function(e){return c(l&&this===u?s:this,e)}})},function(e,t,r){var o=r(6),n=r(11),i=r(237).setInterval;o({global:!0,bind:!0,forced:n.setInterval!==i},{setInterval:i})},function(e,t,r){var o=r(6),n=r(11),i=r(237).setTimeout;o({global:!0,bind:!0,forced:n.setTimeout!==i},{setTimeout:i})},function(e,t,r){var o=r(7),n=r(29),i=Math.floor,s=o("".charAt),a=o("".replace),c=o("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,o,d,h){var p=r+e.length,f=o.length,_=l;return void 0!==d&&(d=n(d),_=u),a(h,_,(function(n,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,p);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return n;if(l>f){var h=i(l/10);return 0===h?n:h<=f?void 0===o[h-1]?s(a,1):o[h-1]+s(a,1):n}u=o[l-1]}return void 0===u?"":u}))}},function(e,t,r){r(385)},function(e,t,r){var o=r(14),n=r(235);e.exports=function(e,t,r,i){try{return i?t(o(r)[0],r[1]):t(r)}catch(t){n(e,"throw",t)}}},function(e,t,r){r(299)},function(e,t,r){"use strict";var o=r(43),n=r(238),i=r(327),s=r(244);function a(e){var t=new i(e),r=n(i.prototype.request,t);return o.extend(r,i.prototype,t),o.extend(r,t),r}var c=a(r(241));c.Axios=i,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=r(245),c.CancelToken=r(341),c.isCancel=r(240),c.all=function(e){return Promise.all(e)},c.spread=r(342),e.exports=c,e.exports.default=c},function(e,t,r){"use strict";var o=r(43),n=r(239),i=r(328),s=r(329),a=r(244);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},c.prototype.getUri=function(e){return e=a(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,r){return this.request(o.merge(r||{},{method:e,url:t}))}})),o.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,r,n){return this.request(o.merge(n||{},{method:e,url:t,data:r}))}})),e.exports=c},function(e,t,r){"use strict";var o=r(43);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,r){"use strict";var o=r(43),n=r(330),i=r(240),s=r(241);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(a(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var o=r(43);e.exports=function(e,t,r){return o.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t){var r,o,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,u=[],l=!1,d=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=a(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function _(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.prependListener=_,n.prependOnceListener=_,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";var o=r(43);e.exports=function(e,t){o.forEach(e,(function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])}))}},function(e,t,r){"use strict";var o=r(243);e.exports=function(e,t,r){var n=r.config.validateStatus;!n||n(r.status)?e(r):t(o("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,o,n){return e.config=t,r&&(e.code=r),e.request=o,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var o=r(336),n=r(337);e.exports=function(e,t){return e&&!o(t)?n(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var o=r(43),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,s={};return e?(o.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=o.trim(e.substr(0,i)).toLowerCase(),r=o.trim(e.substr(i+1)),t){if(s[t]&&n.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}})),s):s}},function(e,t,r){"use strict";var o=r(43);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=o.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var o=r(43);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,r,n,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),o.isString(n)&&a.push("path="+n),o.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var o=r(245);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new o(e),t(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){!function(e){"use strict";var t=function(e,t,r,o){for(var n=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{i=i+(n=n+t[o++]|0)|0}while(--s);n%=65521,i%=65521}return n|i<<16|0},r=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),o=function(e,t,o,n){var i=r,s=n+o;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},n=function(e,t){var r,o,n,i,s,a,c,u,l,d,h,p,f,_,g,m,v,y,b,S,E,T,w,C,I=e.state;r=e.next_in,w=e.input,o=r+(e.avail_in-5),n=e.next_out,C=e.output,i=n-(t-e.avail_out),s=n+(e.avail_out-257),a=I.dmax,c=I.wsize,u=I.whave,l=I.wnext,d=I.window,h=I.hold,p=I.bits,f=I.lencode,_=I.distcode,g=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;e:do{p<15&&(h+=w[r++]<<p,p+=8,h+=w[r++]<<p,p+=8),v=f[h&g];t:for(;;){if(h>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))C[n++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=f[(65535&v)+(h&(1<<y)-1)];continue t}if(32&y){I.mode=12;break e}e.msg="invalid literal/length code",I.mode=30;break e}b=65535&v,(y&=15)&&(p<y&&(h+=w[r++]<<p,p+=8),b+=h&(1<<y)-1,h>>>=y,p-=y),p<15&&(h+=w[r++]<<p,p+=8,h+=w[r++]<<p,p+=8),v=_[h&m];r:for(;;){if(h>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=_[(65535&v)+(h&(1<<y)-1)];continue r}e.msg="invalid distance code",I.mode=30;break e}if(S=65535&v,p<(y&=15)&&(h+=w[r++]<<p,(p+=8)<y&&(h+=w[r++]<<p,p+=8)),(S+=h&(1<<y)-1)>a){e.msg="invalid distance too far back",I.mode=30;break e}if(h>>>=y,p-=y,S>(y=n-i)){if((y=S-y)>u&&I.sane){e.msg="invalid distance too far back",I.mode=30;break e}if(E=0,T=d,0===l){if(E+=c-y,y<b){b-=y;do{C[n++]=d[E++]}while(--y);E=n-S,T=C}}else if(l<y){if(E+=c+l-y,(y-=l)<b){b-=y;do{C[n++]=d[E++]}while(--y);if(E=0,l<b){b-=y=l;do{C[n++]=d[E++]}while(--y);E=n-S,T=C}}}else if(E+=l-y,y<b){b-=y;do{C[n++]=d[E++]}while(--y);E=n-S,T=C}for(;b>2;)C[n++]=T[E++],C[n++]=T[E++],C[n++]=T[E++],b-=3;b&&(C[n++]=T[E++],b>1&&(C[n++]=T[E++]))}else{E=n-S;do{C[n++]=C[E++],C[n++]=C[E++],C[n++]=C[E++],b-=3}while(b>2);b&&(C[n++]=C[E++],b>1&&(C[n++]=C[E++]))}break}}break}}while(r<o&&n<s);r-=b=p>>3,h&=(1<<(p-=b<<3))-1,e.next_in=r,e.next_out=n,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=n<s?s-n+257:257-(n-s),I.hold=h,I.bits=p},i=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),a=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),c=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),u=function(e,t,r,o,n,u,l,d){var h,p,f,_,g,m,v,y,b,S=d.bits,E=0,T=0,w=0,C=0,I=0,O=0,k=0,R=0,A=0,P=0,L=null,N=0,D=new Uint16Array(16),M=new Uint16Array(16),x=null,B=0;for(E=0;E<=15;E++)D[E]=0;for(T=0;T<o;T++)D[t[r+T]]++;for(I=S,C=15;C>=1&&0===D[C];C--);if(I>C&&(I=C),0===C)return n[u++]=20971520,n[u++]=20971520,d.bits=1,0;for(w=1;w<C&&0===D[w];w++);for(I<w&&(I=w),R=1,E=1;E<=15;E++)if(R<<=1,(R-=D[E])<0)return-1;if(R>0&&(0===e||1!==C))return-1;for(M[1]=0,E=1;E<15;E++)M[E+1]=M[E]+D[E];for(T=0;T<o;T++)0!==t[r+T]&&(l[M[t[r+T]]++]=T);if(0===e?(L=x=l,m=19):1===e?(L=i,N-=257,x=s,B-=257,m=256):(L=a,x=c,m=-1),P=0,T=0,E=w,g=u,O=I,k=0,f=-1,_=(A=1<<I)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){v=E-k,l[T]<m?(y=0,b=l[T]):l[T]>m?(y=x[B+l[T]],b=L[N+l[T]]):(y=96,b=0),h=1<<E-k,w=p=1<<O;do{n[g+(P>>k)+(p-=h)]=v<<24|y<<16|b|0}while(0!==p);for(h=1<<E-1;P&h;)h>>=1;if(0!==h?(P&=h-1,P+=h):P=0,T++,0==--D[E]){if(E===C)break;E=t[r+l[T]]}if(E>I&&(P&_)!==f){for(0===k&&(k=I),g+=w,R=1<<(O=E-k);O+k<C&&!((R-=D[O+k])<=0);)O++,R<<=1;if(A+=1<<O,1===e&&A>852||2===e&&A>592)return 1;n[f=P&_]=I<<24|O<<16|g-u|0}}return 0!==P&&(n[g+P]=E-k<<24|64<<16|0),d.bits=I,0},l={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},d=l.Z_FINISH,h=l.Z_BLOCK,p=l.Z_TREES,f=l.Z_OK,_=l.Z_STREAM_END,g=l.Z_NEED_DICT,m=l.Z_STREAM_ERROR,v=l.Z_DATA_ERROR,y=l.Z_MEM_ERROR,b=l.Z_BUF_ERROR,S=l.Z_DEFLATED,E=12,T=30,w=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var I,O,k=function(e){if(!e||!e.state)return m;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,function(e){if(!e||!e.state)return m;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,f}(e)},R=!0,A=function(e){if(R){I=new Int32Array(512),O=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(u(1,e.lens,0,288,I,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;u(2,e.lens,0,32,O,0,e.work,{bits:5}),R=!1}e.lencode=I,e.lenbits=9,e.distcode=O,e.distbits=5},P=function(e,t,r,o){var n,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),o>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((n=i.wsize-i.wnext)>o&&(n=o),i.window.set(t.subarray(r-o,r-o+n),i.wnext),(o-=n)?(i.window.set(t.subarray(r-o,r),0),i.wnext=o,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0},L=k,N=function(e,t){if(!e)return m;var r=new C;e.state=r,r.window=null;var o=function(e,t){var r;if(!e||!e.state)return m;var o=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?m:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=r,o.wbits=t,k(e))}(e,t);return o!==f&&(e.state=null),o},D=function(e,r){var i,s,a,c,l,C,I,O,k,R,L,N,D,M,x,B,U,j,H,z,V,q,G,Z,F=0,W=new Uint8Array(4),Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return m;(i=e.state).mode===E&&(i.mode=13),l=e.next_out,a=e.output,I=e.avail_out,c=e.next_in,s=e.input,C=e.avail_in,O=i.hold,k=i.bits,R=C,L=I,q=f;e:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;k<16;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(2&i.wrap&&35615===O){i.check=0,W[0]=255&O,W[1]=O>>>8&255,i.check=o(i.check,W,2,0),O=0,k=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&O)<<8)+(O>>8))%31){e.msg="incorrect header check",i.mode=T;break}if((15&O)!==S){e.msg="unknown compression method",i.mode=T;break}if(k-=4,V=8+(15&(O>>>=4)),0===i.wbits)i.wbits=V;else if(V>i.wbits){e.msg="invalid window size",i.mode=T;break}i.dmax=1<<i.wbits,e.adler=i.check=1,i.mode=512&O?10:E,O=0,k=0;break;case 2:for(;k<16;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(i.flags=O,(255&i.flags)!==S){e.msg="unknown compression method",i.mode=T;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=T;break}i.head&&(i.head.text=O>>8&1),512&i.flags&&(W[0]=255&O,W[1]=O>>>8&255,i.check=o(i.check,W,2,0)),O=0,k=0,i.mode=3;case 3:for(;k<32;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}i.head&&(i.head.time=O),512&i.flags&&(W[0]=255&O,W[1]=O>>>8&255,W[2]=O>>>16&255,W[3]=O>>>24&255,i.check=o(i.check,W,4,0)),O=0,k=0,i.mode=4;case 4:for(;k<16;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}i.head&&(i.head.xflags=255&O,i.head.os=O>>8),512&i.flags&&(W[0]=255&O,W[1]=O>>>8&255,i.check=o(i.check,W,2,0)),O=0,k=0,i.mode=5;case 5:if(1024&i.flags){for(;k<16;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}i.length=O,i.head&&(i.head.extra_len=O),512&i.flags&&(W[0]=255&O,W[1]=O>>>8&255,i.check=o(i.check,W,2,0)),O=0,k=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((N=i.length)>C&&(N=C),N&&(i.head&&(V=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(s.subarray(c,c+N),V)),512&i.flags&&(i.check=o(i.check,s,N,c)),C-=N,c+=N,i.length-=N),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===C)break e;N=0;do{V=s[c+N++],i.head&&V&&i.length<65536&&(i.head.name+=String.fromCharCode(V))}while(V&&N<C);if(512&i.flags&&(i.check=o(i.check,s,N,c)),C-=N,c+=N,V)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===C)break e;N=0;do{V=s[c+N++],i.head&&V&&i.length<65536&&(i.head.comment+=String.fromCharCode(V))}while(V&&N<C);if(512&i.flags&&(i.check=o(i.check,s,N,c)),C-=N,c+=N,V)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;k<16;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(O!==(65535&i.check)){e.msg="header crc mismatch",i.mode=T;break}O=0,k=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=E;break;case 10:for(;k<32;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}e.adler=i.check=w(O),O=0,k=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=l,e.avail_out=I,e.next_in=c,e.avail_in=C,i.hold=O,i.bits=k,g;e.adler=i.check=1,i.mode=E;case E:if(r===h||r===p)break e;case 13:if(i.last){O>>>=7&k,k-=7&k,i.mode=27;break}for(;k<3;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}switch(i.last=1&O,k-=1,3&(O>>>=1)){case 0:i.mode=14;break;case 1:if(A(i),i.mode=20,r===p){O>>>=2,k-=2;break e}break;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=T}O>>>=2,k-=2;break;case 14:for(O>>>=7&k,k-=7&k;k<32;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if((65535&O)!=(O>>>16^65535)){e.msg="invalid stored block lengths",i.mode=T;break}if(i.length=65535&O,O=0,k=0,i.mode=15,r===p)break e;case 15:i.mode=16;case 16:if(N=i.length){if(N>C&&(N=C),N>I&&(N=I),0===N)break e;a.set(s.subarray(c,c+N),l),C-=N,c+=N,I-=N,l+=N,i.length-=N;break}i.mode=E;break;case 17:for(;k<14;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(i.nlen=257+(31&O),O>>>=5,k-=5,i.ndist=1+(31&O),O>>>=5,k-=5,i.ncode=4+(15&O),O>>>=4,k-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=T;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;k<3;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}i.lens[Y[i.have++]]=7&O,O>>>=3,k-=3}for(;i.have<19;)i.lens[Y[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,G={bits:i.lenbits},q=u(0,i.lens,0,19,i.lencode,0,i.work,G),i.lenbits=G.bits,q){e.msg="invalid code lengths set",i.mode=T;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;B=(F=i.lencode[O&(1<<i.lenbits)-1])>>>16&255,U=65535&F,!((x=F>>>24)<=k);){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(U<16)O>>>=x,k-=x,i.lens[i.have++]=U;else{if(16===U){for(Z=x+2;k<Z;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(O>>>=x,k-=x,0===i.have){e.msg="invalid bit length repeat",i.mode=T;break}V=i.lens[i.have-1],N=3+(3&O),O>>>=2,k-=2}else if(17===U){for(Z=x+3;k<Z;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}k-=x,V=0,N=3+(7&(O>>>=x)),O>>>=3,k-=3}else{for(Z=x+7;k<Z;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}k-=x,V=0,N=11+(127&(O>>>=x)),O>>>=7,k-=7}if(i.have+N>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=T;break}for(;N--;)i.lens[i.have++]=V}}if(i.mode===T)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=T;break}if(i.lenbits=9,G={bits:i.lenbits},q=u(1,i.lens,0,i.nlen,i.lencode,0,i.work,G),i.lenbits=G.bits,q){e.msg="invalid literal/lengths set",i.mode=T;break}if(i.distbits=6,i.distcode=i.distdyn,G={bits:i.distbits},q=u(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,G),i.distbits=G.bits,q){e.msg="invalid distances set",i.mode=T;break}if(i.mode=20,r===p)break e;case 20:i.mode=21;case 21:if(C>=6&&I>=258){e.next_out=l,e.avail_out=I,e.next_in=c,e.avail_in=C,i.hold=O,i.bits=k,n(e,L),l=e.next_out,a=e.output,I=e.avail_out,c=e.next_in,s=e.input,C=e.avail_in,O=i.hold,k=i.bits,i.mode===E&&(i.back=-1);break}for(i.back=0;B=(F=i.lencode[O&(1<<i.lenbits)-1])>>>16&255,U=65535&F,!((x=F>>>24)<=k);){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(B&&0==(240&B)){for(j=x,H=B,z=U;B=(F=i.lencode[z+((O&(1<<j+H)-1)>>j)])>>>16&255,U=65535&F,!(j+(x=F>>>24)<=k);){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}O>>>=j,k-=j,i.back+=j}if(O>>>=x,k-=x,i.back+=x,i.length=U,0===B){i.mode=26;break}if(32&B){i.back=-1,i.mode=E;break}if(64&B){e.msg="invalid literal/length code",i.mode=T;break}i.extra=15&B,i.mode=22;case 22:if(i.extra){for(Z=i.extra;k<Z;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}i.length+=O&(1<<i.extra)-1,O>>>=i.extra,k-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;B=(F=i.distcode[O&(1<<i.distbits)-1])>>>16&255,U=65535&F,!((x=F>>>24)<=k);){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(0==(240&B)){for(j=x,H=B,z=U;B=(F=i.distcode[z+((O&(1<<j+H)-1)>>j)])>>>16&255,U=65535&F,!(j+(x=F>>>24)<=k);){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}O>>>=j,k-=j,i.back+=j}if(O>>>=x,k-=x,i.back+=x,64&B){e.msg="invalid distance code",i.mode=T;break}i.offset=U,i.extra=15&B,i.mode=24;case 24:if(i.extra){for(Z=i.extra;k<Z;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}i.offset+=O&(1<<i.extra)-1,O>>>=i.extra,k-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=T;break}i.mode=25;case 25:if(0===I)break e;if(N=L-I,i.offset>N){if((N=i.offset-N)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=T;break}N>i.wnext?(N-=i.wnext,D=i.wsize-N):D=i.wnext-N,N>i.length&&(N=i.length),M=i.window}else M=a,D=l-i.offset,N=i.length;N>I&&(N=I),I-=N,i.length-=N;do{a[l++]=M[D++]}while(--N);0===i.length&&(i.mode=21);break;case 26:if(0===I)break e;a[l++]=i.length,I--,i.mode=21;break;case 27:if(i.wrap){for(;k<32;){if(0===C)break e;C--,O|=s[c++]<<k,k+=8}if(L-=I,e.total_out+=L,i.total+=L,L&&(e.adler=i.check=i.flags?o(i.check,a,L,l-L):t(i.check,a,L,l-L)),L=I,(i.flags?O:w(O))!==i.check){e.msg="incorrect data check",i.mode=T;break}O=0,k=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;k<32;){if(0===C)break e;C--,O+=s[c++]<<k,k+=8}if(O!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=T;break}O=0,k=0}i.mode=29;case 29:q=_;break e;case T:q=v;break e;case 31:return y;default:return m}return e.next_out=l,e.avail_out=I,e.next_in=c,e.avail_in=C,i.hold=O,i.bits=k,(i.wsize||L!==e.avail_out&&i.mode<T&&(i.mode<27||r!==d))&&P(e,e.output,e.next_out,L-e.avail_out),R-=e.avail_in,L-=e.avail_out,e.total_in+=R,e.total_out+=L,i.total+=L,i.wrap&&L&&(e.adler=i.check=i.flags?o(i.check,a,L,e.next_out-L):t(i.check,a,L,e.next_out-L)),e.data_type=i.bits+(i.last?64:0)+(i.mode===E?128:0)+(20===i.mode||15===i.mode?256:0),(0===R&&0===L||r===d)&&q===f&&(q=b),q},M=function(e){if(!e||!e.state)return m;var t=e.state;return t.window&&(t.window=null),e.state=null,f},x=function(e,r){var o,n=r.length;return e&&e.state?0!==(o=e.state).wrap&&11!==o.mode?m:11===o.mode&&t(1,r,n,0)!==o.check?v:P(e,r,n,n)?(o.mode=31,y):(o.havedict=1,f):m},B=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){U=!1}for(var j=new Uint8Array(256),H=0;H<256;H++)j[H]=H>=252?6:H>=248?5:H>=240?4:H>=224?3:H>=192?2:1;j[254]=j[254]=1;var z=function(e,t){var r,o,n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*n);for(o=0,r=0;r<n;){var s=e[r++];if(s<128)i[o++]=s;else{var a=j[s];if(a>4)i[o++]=65533,r+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&r<n;)s=s<<6|63&e[r++],a--;a>1?i[o++]=65533:s<65536?i[o++]=s:(s-=65536,i[o++]=55296|s>>10&1023,i[o++]=56320|1023&s)}}}return function(e,t){if(t<65534&&e.subarray&&U)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}(i,o)},V=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+j[e[r]]>t?r:t},q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Z=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},F=Object.prototype.toString,W=l.Z_NO_FLUSH,Y=l.Z_FINISH,Q=l.Z_OK,K=l.Z_STREAM_END,J=l.Z_NEED_DICT,X=l.Z_STREAM_ERROR,$=l.Z_DATA_ERROR,ee=l.Z_MEM_ERROR;function te(e){this.options=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)B(r,o)&&(e[o]=r[o])}}return e}({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new G,this.strm.avail_out=0;var r=N(this.strm,t.windowBits);if(r!==Q)throw new Error(q[r]);if(this.header=new Z,function(e,t){if(!e||!e.state)return m;var r=e.state;0==(2&r.wrap)||(r.head=t,t.done=!1)}(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,o,n,i,s=e.length,a=0;for(n=0;n<s;n++)55296==(64512&(r=e.charCodeAt(n)))&&n+1<s&&56320==(64512&(o=e.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(o-56320),n++),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),i=0,n=0;i<a;n++)55296==(64512&(r=e.charCodeAt(n)))&&n+1<s&&56320==(64512&(o=e.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(o-56320),n++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t}(t.dictionary):"[object ArrayBuffer]"===F.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=x(this.strm,t.dictionary))!==Q))throw new Error(q[r])}function re(e,t){var r=new te(t);if(r.push(e),r.err)throw r.msg||q[r.err];return r.result}te.prototype.push=function(e,t){var r,o,n,i=this.strm,s=this.options.chunkSize,a=this.options.dictionary;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Y:W,"[object ArrayBuffer]"===F.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(r=D(i,o))===J&&a&&((r=x(i,a))===Q?r=D(i,o):r===$&&(r=J));i.avail_in>0&&r===K&&i.state.wrap>0&&0!==e[i.next_in];)L(i),r=D(i,o);switch(r){case X:case $:case J:case ee:return this.onEnd(r),this.ended=!0,!1}if(n=i.avail_out,i.next_out&&(0===i.avail_out||r===K))if("string"===this.options.to){var c=V(i.output,i.next_out),u=i.next_out-c,l=z(i.output,c);i.next_out=u,i.avail_out=s-u,u&&i.output.set(i.output.subarray(c,c+u),0),this.onData(l)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==Q||0!==n){if(r===K)return r=M(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},te.prototype.onData=function(e){this.chunks.push(e)},te.prototype.onEnd=function(e){e===Q&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=function(e){for(var t=0,r=0,o=e.length;r<o;r++)t+=e[r].length;for(var n=new Uint8Array(t),i=0,s=0,a=e.length;i<a;i++){var c=e[i];n.set(c,s),s+=c.length}return n}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var oe=te,ne=re,ie=function(e,t){return(t=t||{}).raw=!0,re(e,t)},se=re,ae=l,ce={Inflate:oe,inflate:ne,inflateRaw:ie,ungzip:se,constants:ae};e.Inflate=oe,e.constants=ae,e.default=ce,e.inflate=ne,e.inflateRaw=ie,e.ungzip=se,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){r(345)},function(e,t,r){"use strict";r(346)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(349))},function(e,t,r){"use strict";var o=r(6),n=r(11),i=r(7),s=r(125),a=r(24),c=r(209),u=r(38),l=r(86),d=r(15),h=r(20),p=r(8),f=r(154),_=r(72),g=r(178);e.exports=function(e,t,r){var m=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),y=m?"set":"add",b=n[e],S=b&&b.prototype,E=b,T={},w=function(e){var t=i(S[e]);a(S,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!h(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return v&&!h(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!h(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(s(e,!d(b)||!(v||S.forEach&&!p((function(){(new b).entries().next()})))))E=r.getConstructor(t,e,m,y),c.enable();else if(s(e,!0)){var C=new E,I=C[y](v?{}:-0,1)!=C,O=p((function(){C.has(1)})),k=f((function(e){new b(e)})),R=!v&&p((function(){for(var e=new b,t=5;t--;)e[y](t,t);return!e.has(-0)}));k||((E=t((function(e,t){l(e,S);var r=g(new b,e,E);return null!=t&&u(t,r[y],{that:r,AS_ENTRIES:m}),r}))).prototype=S,S.constructor=E),(O||R)&&(w("delete"),w("has"),m&&w("get")),(R||I)&&w(y),v&&S.clear&&delete S.clear}return T[e]=E,o({global:!0,constructor:!0,forced:E!=b},T),_(E,e),v||r.setStrong(E,e,m),E}},function(e,t,r){var o=r(8),n=r(20),i=r(64),s=r(348),a=Object.isExtensible,c=o((function(){a(1)}));e.exports=c||s?function(e){return!!n(e)&&(!s||"ArrayBuffer"!=i(e))&&(!a||a(e))}:a},function(e,t,r){var o=r(8);e.exports=o((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},function(e,t,r){"use strict";var o=r(22).f,n=r(58),i=r(182),s=r(34),a=r(86),c=r(38),u=r(165),l=r(177),d=r(19),h=r(209).fastKey,p=r(40),f=p.set,_=p.getterFor;e.exports={getConstructor:function(e,t,r,u){var l=e((function(e,o){a(e,p),f(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=o&&c(o,e[u],{that:e,AS_ENTRIES:r})})),p=l.prototype,g=_(t),m=function(e,t,r){var o,n,i=g(e),s=v(e,t);return s?s.value=r:(i.last=s={index:n=h(t,!0),key:t,value:r,previous:o=i.last,next:void 0,removed:!1},i.first||(i.first=s),o&&(o.next=s),d?i.size++:e.size++,"F"!==n&&(i.index[n]=s)),e},v=function(e,t){var r,o=g(e),n=h(t);if("F"!==n)return o.index[n];for(r=o.first;r;r=r.next)if(r.key==t)return r};return i(p,{clear:function(){for(var e=g(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=g(this),r=v(this,e);if(r){var o=r.next,n=r.previous;delete t.index[r.index],r.removed=!0,n&&(n.next=o),o&&(o.previous=n),t.first==r&&(t.first=o),t.last==r&&(t.last=n),d?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=g(this),o=s(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(o(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),i(p,r?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),d&&o(p,"size",{get:function(){return g(this).size}}),l},setStrong:function(e,t,r){var o=t+" Iterator",n=_(t),i=_(o);u(e,t,(function(e,t){f(this,{type:o,target:e,state:n(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},function(e,t,r){"use strict";r(6)({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:r(351)})},function(e,t,r){"use strict";var o=r(13),n=r(27),i=r(14);e.exports=function(){for(var e,t=i(this),r=n(t.delete),s=!0,a=0,c=arguments.length;a<c;a++)e=o(r,t,arguments[a]),s=s&&e;return!!s}},function(e,t,r){"use strict";var o=r(6),n=r(14),i=r(34),s=r(63),a=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=n(this),r=s(t),o=i(e,arguments.length>1?arguments[1]:void 0);return!a(r,(function(e,r,n){if(!o(r,e,t))return n()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(e,t,r){"use strict";var o=r(6),n=r(32),i=r(34),s=r(13),a=r(27),c=r(14),u=r(71),l=r(63),d=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=c(this),r=l(t),o=i(e,arguments.length>1?arguments[1]:void 0),h=new(u(t,n("Map"))),p=a(h.set);return d(r,(function(e,r){o(r,e,t)&&s(p,h,e,r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),h}})},function(e,t,r){"use strict";var o=r(6),n=r(14),i=r(34),s=r(63),a=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=n(this),r=s(t),o=i(e,arguments.length>1?arguments[1]:void 0);return a(r,(function(e,r,n){if(o(r,e,t))return n(r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(e,t,r){"use strict";var o=r(6),n=r(14),i=r(34),s=r(63),a=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=n(this),r=s(t),o=i(e,arguments.length>1?arguments[1]:void 0);return a(r,(function(e,r,n){if(o(r,e,t))return n(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(e,t,r){"use strict";var o=r(6),n=r(14),i=r(63),s=r(357),a=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return a(i(n(this)),(function(t,r,o){if(s(r,e))return o()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){"use strict";var o=r(6),n=r(14),i=r(63),s=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){return s(i(n(this)),(function(t,r,o){if(r===e)return o(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(e,t,r){"use strict";var o=r(6),n=r(32),i=r(34),s=r(13),a=r(27),c=r(14),u=r(71),l=r(63),d=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=c(this),r=l(t),o=i(e,arguments.length>1?arguments[1]:void 0),h=new(u(t,n("Map"))),p=a(h.set);return d(r,(function(e,r){s(p,h,o(r,e,t),r)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),h}})},function(e,t,r){"use strict";var o=r(6),n=r(32),i=r(34),s=r(13),a=r(27),c=r(14),u=r(71),l=r(63),d=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=c(this),r=l(t),o=i(e,arguments.length>1?arguments[1]:void 0),h=new(u(t,n("Map"))),p=a(h.set);return d(r,(function(e,r){s(p,h,e,o(r,e,t))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),h}})},function(e,t,r){"use strict";var o=r(6),n=r(27),i=r(14),s=r(38);o({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=i(this),r=n(t.set),o=arguments.length,a=0;a<o;)s(arguments[a++],r,{that:t,AS_ENTRIES:!0});return t}})},function(e,t,r){"use strict";var o=r(6),n=r(14),i=r(27),s=r(63),a=r(38),c=TypeError;o({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=n(this),r=s(t),o=arguments.length<2,u=o?void 0:arguments[1];if(i(e),a(r,(function(r,n){o?(o=!1,u=n):u=e(u,n,r,t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),o)throw c("Reduce of empty map with no initial value");return u}})},function(e,t,r){"use strict";var o=r(6),n=r(14),i=r(34),s=r(63),a=r(38);o({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=n(this),r=s(t),o=i(e,arguments.length>1?arguments[1]:void 0);return a(r,(function(e,r,n){if(o(r,e,t))return n()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(e,t,r){"use strict";var o=r(6),n=r(13),i=r(14),s=r(27),a=TypeError;o({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var r=i(this),o=s(r.get),c=s(r.has),u=s(r.set),l=arguments.length;s(t);var d=n(c,r,e);if(!d&&l<3)throw a("Updating absent value");var h=d?n(o,r,e):s(l>2?arguments[2]:void 0)(e,r);return n(u,r,e,t(h,e,r)),r}})},function(e,t,r){var o=r(19),n=r(7),i=r(100),s=r(41),a=n(r(116).f),c=n([].push),u=function(e){return function(t){for(var r,n=s(t),u=i(n),l=u.length,d=0,h=[];l>d;)r=u[d++],o&&!a(n,r)||c(h,e?[r,n[r]]:n[r]);return h}};e.exports={entries:u(!0),values:u(!1)}},function(e,t,r){"use strict";e.exports=r(367)},function(e,t,r){"use strict";var o=t;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=r(246),o.BufferWriter=r(369),o.Reader=r(247),o.BufferReader=r(370),o.util=r(90),o.rpc=r(371),o.roots=r(373),o.configure=n,n()},function(e,t,r){"use strict";e.exports=n;var o=r(90);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===s?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=i;var o=r(246);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(90);function i(){o.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,r){"use strict";e.exports=i;var o=r(247);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(90);function i(e){o.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,r){"use strict";t.Service=r(372)},function(e,t,r){"use strict";e.exports=n;var o=r(90);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return o.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){var o=r(6),n=r(375);o({target:"Date",proto:!0,forced:Date.prototype.toISOString!==n},{toISOString:n})},function(e,t,r){"use strict";var o=r(7),n=r(8),i=r(295).start,s=RangeError,a=Math.abs,c=Date.prototype,u=c.toISOString,l=o(c.getTime),d=o(c.getUTCDate),h=o(c.getUTCFullYear),p=o(c.getUTCHours),f=o(c.getUTCMilliseconds),_=o(c.getUTCMinutes),g=o(c.getUTCMonth),m=o(c.getUTCSeconds);e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!n((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(l(this)))throw s("Invalid time value");var e=h(this),t=f(this),r=e<0?"-":e>9999?"+":"";return r+i(a(e),r?6:4,0)+"-"+i(g(this)+1,2,0)+"-"+i(d(this),2,0)+"T"+i(p(this),2,0)+":"+i(_(this),2,0)+":"+i(m(this),2,0)+"."+i(t,3,0)+"Z"}:u},function(e,t,r){"use strict";var o=r(6),n=r(392);o({target:"String",proto:!0,forced:r(393)("bold")},{bold:function(){return n(this,"b","","")}})},function(e,t,r){"use strict";var o=r(6),n=r(392);o({target:"String",proto:!0,forced:r(393)("italics")},{italics:function(){return n(this,"i","","")}})},function(e,t,r){e.exports=function(e,t){var r,o,n,i,s,a,c,u;for(r=3&e.length,o=e.length-r,n=t,s=3432918353,a=461845907,u=0;u<o;)c=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,n=27492+(65535&(i=5*(65535&(n=(n^=c=(65535&(c=(c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(c=0,r){case 3:c^=(255&e.charCodeAt(u+2))<<16;case 2:c^=(255&e.charCodeAt(u+1))<<8;case 1:n^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(u)))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}},function(e,t){!function(){if(-1!==window.navigator.userAgent.indexOf("Trident")){var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r};e.prototype=window.Event.prototype,window.CustomEvent=e,document.body.scrollTo||(Element.prototype.scrollTo=function(e,t){this.scrollLeft=e,this.scrollTop=t}),document.body.scrollBy||(Element.prototype.scrollBy=function(e,t){this.scrollLeft+=e,this.scrollTop+=t}),FileReader.prototype.readAsBinaryString||(FileReader.prototype.readAsBinaryString=function(e){var t=this,r=new FileReader;r.onload=function(e){for(var o="",n=new Uint8Array(r.result),i=n.byteLength,s=0;s<i;s++)o+=String.fromCharCode(n[s]);t.content=o,t.result=o,t.onload()},r.readAsArrayBuffer(e)})}}()},function(e,t,r){"use strict";var o,n=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),i=[];function s(e){for(var t=-1,r=0;r<i.length;r++)if(i[r].identifier===e){t=r;break}return t}function a(e,t){for(var r={},o=[],n=0;n<e.length;n++){var a=e[n],c=t.base?a[0]+t.base:a[0],u=r[c]||0,l="".concat(c," ").concat(u);r[c]=u+1;var d=s(l),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(i[d].references++,i[d].updater(h)):i.push({identifier:l,updater:_(h,t),references:1}),o.push(l)}return o}function c(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var i=r.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=n(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,r,o){var n=r?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=l(t,n);else{var i=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function h(e,t,r){var o=r.css,n=r.media,i=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var p=null,f=0;function _(e,t){var r,o,n;if(t.singleton){var i=f++;r=p||(p=c(t)),o=d.bind(null,r,i,!1),n=d.bind(null,r,i,!0)}else r=c(t),o=h.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var r=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<r.length;o++){var n=s(r[o]);i[n].references--}for(var c=a(e,t),u=0;u<r.length;u++){var l=s(r[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}r=c}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,o,n,i=e[1]||"",s=e[3];if(!s)return i;if(t&&"function"==typeof btoa){var a=(r=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(n," */")),c=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[i].concat(c).concat([a]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,o){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(n[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);o&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){r(6)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){"use strict";var o=r(7),n=r(27),i=r(20),s=r(18),a=r(81),c=r(98),u=Function,l=o([].concat),d=o([].join),h={},p=function(e,t,r){if(!s(h,t)){for(var o=[],n=0;n<t;n++)o[n]="a["+n+"]";h[t]=u("C,a","return new C("+d(o,",")+")")}return h[t](e,r)};e.exports=c?u.bind:function(e){var t=n(this),r=t.prototype,o=a(arguments,1),s=function r(){var n=l(o,a(arguments));return this instanceof r?p(t,n.length,n):t.apply(e,n)};return i(r)&&(s.prototype=r),s}},function(e,t,r){"use strict";var o=r(6),n=r(44),i=r(104),s=r(8),a=r(32),c=r(15),u=r(71),l=r(255),d=r(24),h=i&&i.prototype;if(o({target:"Promise",proto:!0,real:!0,forced:!!i&&s((function(){h.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,a("Promise")),r=c(e);return this.then(r?function(r){return l(t,e()).then((function(){return r}))}:e,r?function(r){return l(t,e()).then((function(){throw r}))}:e)}}),!n&&c(i)){var p=a("Promise").prototype.finally;h.finally!==p&&d(h,"finally",p,{unsafe:!0})}},function(e,t,r){"use strict";r(46);var o,n=r(6),i=r(19),s=r(298),a=r(11),c=r(34),u=r(7),l=r(24),d=r(386),h=r(86),p=r(18),f=r(220),_=r(287),g=r(102),m=r(172).codeAt,v=r(387),y=r(23),b=r(72),S=r(180),E=r(299),T=r(40),w=T.set,C=T.getterFor("URL"),I=E.URLSearchParams,O=E.getState,k=a.URL,R=a.TypeError,A=a.parseInt,P=Math.floor,L=Math.pow,N=u("".charAt),D=u(/./.exec),M=u([].join),x=u(1..toString),B=u([].pop),U=u([].push),j=u("".replace),H=u([].shift),z=u("".split),V=u("".slice),q=u("".toLowerCase),G=u([].unshift),Z=/[a-z]/i,F=/[\d+-.a-z]/i,W=/\d/,Y=/^0x/i,Q=/^[0-7]+$/,K=/^\d+$/,J=/^[\da-f]+$/i,X=/[\0\t\n\r #%/:<>?@[\\\]^|]/,$=/[\0\t\n\r #/:<>?@[\\\]^|]/,ee=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,te=/[\t\n\r]/g,re=function(e){var t,r,o,n;if("number"==typeof e){for(t=[],r=0;r<4;r++)G(t,e%256),e=P(e/256);return M(t,".")}if("object"==typeof e){for(t="",o=function(e){for(var t=null,r=1,o=null,n=0,i=0;i<8;i++)0!==e[i]?(n>r&&(t=o,r=n),o=null,n=0):(null===o&&(o=i),++n);return n>r&&(t=o,r=n),t}(e),r=0;r<8;r++)n&&0===e[r]||(n&&(n=!1),o===r?(t+=r?":":"::",n=!0):(t+=x(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},oe={},ne=f({},oe,{" ":1,'"':1,"<":1,">":1,"`":1}),ie=f({},ne,{"#":1,"?":1,"{":1,"}":1}),se=f({},ie,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ae=function(e,t){var r=m(e,0);return r>32&&r<127&&!p(t,e)?e:encodeURIComponent(e)},ce={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ue=function(e,t){var r;return 2==e.length&&D(Z,N(e,0))&&(":"==(r=N(e,1))||!t&&"|"==r)},le=function(e){var t;return e.length>1&&ue(V(e,0,2))&&(2==e.length||"/"===(t=N(e,2))||"\\"===t||"?"===t||"#"===t)},de=function(e){return"."===e||"%2e"===q(e)},he={},pe={},fe={},_e={},ge={},me={},ve={},ye={},be={},Se={},Ee={},Te={},we={},Ce={},Ie={},Oe={},ke={},Re={},Ae={},Pe={},Le={},Ne=function e(t,r,o){var n,i,s,a=y(t);if(r){if(i=this.parse(a))throw R(i);this.searchParams=null}else{if(void 0!==o&&(n=new e(o,!0)),i=this.parse(a,null,n))throw R(i);(s=O(new I)).bindURL(this),this.searchParams=s}};Ne.prototype={type:"URL",parse:function(e,t,r){var n,i,s,a,c,u=this,l=t||he,d=0,h="",f=!1,m=!1,v=!1;for(e=y(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=j(e,ee,"")),e=j(e,te,""),n=_(e);d<=n.length;){switch(i=n[d],l){case he:if(!i||!D(Z,i)){if(t)return"Invalid scheme";l=fe;continue}h+=q(i),l=pe;break;case pe:if(i&&(D(F,i)||"+"==i||"-"==i||"."==i))h+=q(i);else{if(":"!=i){if(t)return"Invalid scheme";h="",l=fe,d=0;continue}if(t&&(u.isSpecial()!=p(ce,h)||"file"==h&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=h,t)return void(u.isSpecial()&&ce[u.scheme]==u.port&&(u.port=null));h="","file"==u.scheme?l=Ce:u.isSpecial()&&r&&r.scheme==u.scheme?l=_e:u.isSpecial()?l=ye:"/"==n[d+1]?(l=ge,d++):(u.cannotBeABaseURL=!0,U(u.path,""),l=Ae)}break;case fe:if(!r||r.cannotBeABaseURL&&"#"!=i)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==i){u.scheme=r.scheme,u.path=g(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,l=Le;break}l="file"==r.scheme?Ce:me;continue;case _e:if("/"!=i||"/"!=n[d+1]){l=me;continue}l=be,d++;break;case ge:if("/"==i){l=Se;break}l=Re;continue;case me:if(u.scheme=r.scheme,i==o)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.query=r.query;else if("/"==i||"\\"==i&&u.isSpecial())l=ve;else if("?"==i)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.query="",l=Pe;else{if("#"!=i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.path.length--,l=Re;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.query=r.query,u.fragment="",l=Le}break;case ve:if(!u.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,l=Re;continue}l=Se}else l=be;break;case ye:if(l=be,"/"!=i||"/"!=N(h,d+1))continue;d++;break;case be:if("/"!=i&&"\\"!=i){l=Se;continue}break;case Se:if("@"==i){f&&(h="%40"+h),f=!0,s=_(h);for(var b=0;b<s.length;b++){var S=s[b];if(":"!=S||v){var E=ae(S,se);v?u.password+=E:u.username+=E}else v=!0}h=""}else if(i==o||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(f&&""==h)return"Invalid authority";d-=_(h).length+1,h="",l=Ee}else h+=i;break;case Ee:case Te:if(t&&"file"==u.scheme){l=Oe;continue}if(":"!=i||m){if(i==o||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(u.isSpecial()&&""==h)return"Invalid host";if(t&&""==h&&(u.includesCredentials()||null!==u.port))return;if(a=u.parseHost(h))return a;if(h="",l=ke,t)return;continue}"["==i?m=!0:"]"==i&&(m=!1),h+=i}else{if(""==h)return"Invalid host";if(a=u.parseHost(h))return a;if(h="",l=we,t==Te)return}break;case we:if(!D(W,i)){if(i==o||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()||t){if(""!=h){var T=A(h,10);if(T>65535)return"Invalid port";u.port=u.isSpecial()&&T===ce[u.scheme]?null:T,h=""}if(t)return;l=ke;continue}return"Invalid port"}h+=i;break;case Ce:if(u.scheme="file","/"==i||"\\"==i)l=Ie;else{if(!r||"file"!=r.scheme){l=Re;continue}if(i==o)u.host=r.host,u.path=g(r.path),u.query=r.query;else if("?"==i)u.host=r.host,u.path=g(r.path),u.query="",l=Pe;else{if("#"!=i){le(M(g(n,d),""))||(u.host=r.host,u.path=g(r.path),u.shortenPath()),l=Re;continue}u.host=r.host,u.path=g(r.path),u.query=r.query,u.fragment="",l=Le}}break;case Ie:if("/"==i||"\\"==i){l=Oe;break}r&&"file"==r.scheme&&!le(M(g(n,d),""))&&(ue(r.path[0],!0)?U(u.path,r.path[0]):u.host=r.host),l=Re;continue;case Oe:if(i==o||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&ue(h))l=Re;else if(""==h){if(u.host="",t)return;l=ke}else{if(a=u.parseHost(h))return a;if("localhost"==u.host&&(u.host=""),t)return;h="",l=ke}continue}h+=i;break;case ke:if(u.isSpecial()){if(l=Re,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=o&&(l=Re,"/"!=i))continue}else u.fragment="",l=Le;else u.query="",l=Pe;break;case Re:if(i==o||"/"==i||"\\"==i&&u.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(c=q(c=h))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"==i||"\\"==i&&u.isSpecial()||U(u.path,"")):de(h)?"/"==i||"\\"==i&&u.isSpecial()||U(u.path,""):("file"==u.scheme&&!u.path.length&&ue(h)&&(u.host&&(u.host=""),h=N(h,0)+":"),U(u.path,h)),h="","file"==u.scheme&&(i==o||"?"==i||"#"==i))for(;u.path.length>1&&""===u.path[0];)H(u.path);"?"==i?(u.query="",l=Pe):"#"==i&&(u.fragment="",l=Le)}else h+=ae(i,ie);break;case Ae:"?"==i?(u.query="",l=Pe):"#"==i?(u.fragment="",l=Le):i!=o&&(u.path[0]+=ae(i,oe));break;case Pe:t||"#"!=i?i!=o&&("'"==i&&u.isSpecial()?u.query+="%27":u.query+="#"==i?"%23":ae(i,oe)):(u.fragment="",l=Le);break;case Le:i!=o&&(u.fragment+=ae(i,ne))}d++}},parseHost:function(e){var t,r,o;if("["==N(e,0)){if("]"!=N(e,e.length-1))return"Invalid host";if(!(t=function(e){var t,r,o,n,i,s,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,h=function(){return N(e,d)};if(":"==h()){if(":"!=N(e,1))return;d+=2,l=++u}for(;h();){if(8==u)return;if(":"!=h()){for(t=r=0;r<4&&D(J,h());)t=16*t+A(h(),16),d++,r++;if("."==h()){if(0==r)return;if(d-=r,u>6)return;for(o=0;h();){if(n=null,o>0){if(!("."==h()&&o<4))return;d++}if(!D(W,h()))return;for(;D(W,h());){if(i=A(h(),10),null===n)n=i;else{if(0==n)return;n=10*n+i}if(n>255)return;d++}c[u]=256*c[u]+n,2!=++o&&4!=o||u++}if(4!=o)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(s=u-l,u=7;0!=u&&s>0;)a=c[u],c[u--]=c[l+s-1],c[l+--s]=a;else if(8!=u)return;return c}(V(e,1,-1))))return"Invalid host";this.host=t}else if(this.isSpecial()){if(e=v(e),D(X,e))return"Invalid host";if(null===(t=function(e){var t,r,o,n,i,s,a,c=z(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(r=[],o=0;o<t;o++){if(""==(n=c[o]))return e;if(i=10,n.length>1&&"0"==N(n,0)&&(i=D(Y,n)?16:8,n=V(n,8==i?1:2)),""===n)s=0;else{if(!D(10==i?K:8==i?Q:J,n))return e;s=A(n,i)}U(r,s)}for(o=0;o<t;o++)if(s=r[o],o==t-1){if(s>=L(256,5-t))return null}else if(s>255)return null;for(a=B(r),o=0;o<r.length;o++)a+=r[o]*L(256,3-o);return a}(e)))return"Invalid host";this.host=t}else{if(D($,e))return"Invalid host";for(t="",r=_(e),o=0;o<r.length;o++)t+=ae(r[o],oe);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(ce,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&ue(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,o=e.password,n=e.host,i=e.port,s=e.path,a=e.query,c=e.fragment,u=t+":";return null!==n?(u+="//",e.includesCredentials()&&(u+=r+(o?":"+o:"")+"@"),u+=re(n),null!==i&&(u+=":"+i)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+M(s,"/"):"",null!==a&&(u+="?"+a),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw R(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new De(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+re(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",he)},getUsername:function(){return this.username},setUsername:function(e){var t=_(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=ae(t[r],se)}},getPassword:function(){return this.password},setPassword:function(e){var t=_(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=ae(t[r],se)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?re(e):re(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ee)},getHostname:function(){var e=this.host;return null===e?"":re(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Te)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=y(e))?this.port=null:this.parse(e,we))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+M(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,ke))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=y(e))?this.query=null:("?"==N(e,0)&&(e=V(e,1)),this.query="",this.parse(e,Pe)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=y(e))?("#"==N(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,Le)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var De=function(e){var t=h(this,Me),r=S(arguments.length,1)>1?arguments[1]:void 0,o=w(t,new Ne(e,!1,r));i||(t.href=o.serialize(),t.origin=o.getOrigin(),t.protocol=o.getProtocol(),t.username=o.getUsername(),t.password=o.getPassword(),t.host=o.getHost(),t.hostname=o.getHostname(),t.port=o.getPort(),t.pathname=o.getPathname(),t.search=o.getSearch(),t.searchParams=o.getSearchParams(),t.hash=o.getHash())},Me=De.prototype,xe=function(e,t){return{get:function(){return C(this)[e]()},set:t&&function(e){return C(this)[t](e)},configurable:!0,enumerable:!0}};if(i&&(d(Me,"href",xe("serialize","setHref")),d(Me,"origin",xe("getOrigin")),d(Me,"protocol",xe("getProtocol","setProtocol")),d(Me,"username",xe("getUsername","setUsername")),d(Me,"password",xe("getPassword","setPassword")),d(Me,"host",xe("getHost","setHost")),d(Me,"hostname",xe("getHostname","setHostname")),d(Me,"port",xe("getPort","setPort")),d(Me,"pathname",xe("getPathname","setPathname")),d(Me,"search",xe("getSearch","setSearch")),d(Me,"searchParams",xe("getSearchParams")),d(Me,"hash",xe("getHash","setHash"))),l(Me,"toJSON",(function(){return C(this).serialize()}),{enumerable:!0}),l(Me,"toString",(function(){return C(this).serialize()}),{enumerable:!0}),k){var Be=k.createObjectURL,Ue=k.revokeObjectURL;Be&&l(De,"createObjectURL",c(Be,k)),Ue&&l(De,"revokeObjectURL",c(Ue,k))}b(De,"URL"),n({global:!0,constructor:!0,forced:!s,sham:!i},{URL:De})},function(e,t,r){var o=r(219),n=r(22);e.exports=function(e,t,r){return r.get&&o(r.get,t,{getter:!0}),r.set&&o(r.set,t,{setter:!0}),n.f(e,t,r)}},function(e,t,r){"use strict";var o=r(7),n=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",a=RangeError,c=o(i.exec),u=Math.floor,l=String.fromCharCode,d=o("".charCodeAt),h=o([].join),p=o([].push),f=o("".replace),_=o("".split),g=o("".toLowerCase),m=function(e){return e+22+75*(e<26)},v=function(e,t,r){var o=0;for(e=r?u(e/700):e>>1,e+=u(e/t);e>455;)e=u(e/35),o+=36;return u(o+36*e/(e+38))},y=function(e){var t,r,o=[],n=(e=function(e){for(var t=[],r=0,o=e.length;r<o;){var n=d(e,r++);if(n>=55296&&n<=56319&&r<o){var i=d(e,r++);56320==(64512&i)?p(t,((1023&n)<<10)+(1023&i)+65536):(p(t,n),r--)}else p(t,n)}return t}(e)).length,i=128,c=0,f=72;for(t=0;t<e.length;t++)(r=e[t])<128&&p(o,l(r));var _=o.length,g=_;for(_&&p(o,"-");g<n;){var y=2147483647;for(t=0;t<e.length;t++)(r=e[t])>=i&&r<y&&(y=r);var b=g+1;if(y-i>u((2147483647-c)/b))throw a(s);for(c+=(y-i)*b,i=y,t=0;t<e.length;t++){if((r=e[t])<i&&++c>2147483647)throw a(s);if(r==i){for(var S=c,E=36;;){var T=E<=f?1:E>=f+26?26:E-f;if(S<T)break;var w=S-T,C=36-T;p(o,l(m(T+w%C))),S=u(w/C),E+=36}p(o,l(m(S))),f=v(c,b,g==_),c=0,g++}}c++,i++}return h(o,"")};e.exports=function(e){var t,r,o=[],s=_(f(g(e),i,"."),".");for(t=0;t<s.length;t++)r=s[t],p(o,c(n,r)?"xn--"+y(r):r);return h(o,".")}},function(e,t,r){var o=r(6),n=r(214),i=Math.abs;o({target:"Number",stat:!0},{isSafeInteger:function(e){return n(e)&&i(e)<=9007199254740991}})},function(e,t,r){r(390)},function(e,t,r){var o=r(6),n=r(174);o({global:!0,constructor:!0,forced:!r(175)},{DataView:n.DataView})},function(e,t,r){var o;e.exports=(o=r(57),function(e){var t=o,r=t.lib,n=r.WordArray,i=r.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var o=t+r,n=e[o];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],_=e[t+4],g=e[t+5],m=e[t+6],v=e[t+7],y=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],T=e[t+12],w=e[t+13],C=e[t+14],I=e[t+15],O=i[0],k=i[1],R=i[2],A=i[3];O=u(O,k,R,A,s,7,a[0]),A=u(A,O,k,R,c,12,a[1]),R=u(R,A,O,k,p,17,a[2]),k=u(k,R,A,O,f,22,a[3]),O=u(O,k,R,A,_,7,a[4]),A=u(A,O,k,R,g,12,a[5]),R=u(R,A,O,k,m,17,a[6]),k=u(k,R,A,O,v,22,a[7]),O=u(O,k,R,A,y,7,a[8]),A=u(A,O,k,R,b,12,a[9]),R=u(R,A,O,k,S,17,a[10]),k=u(k,R,A,O,E,22,a[11]),O=u(O,k,R,A,T,7,a[12]),A=u(A,O,k,R,w,12,a[13]),R=u(R,A,O,k,C,17,a[14]),O=l(O,k=u(k,R,A,O,I,22,a[15]),R,A,c,5,a[16]),A=l(A,O,k,R,m,9,a[17]),R=l(R,A,O,k,E,14,a[18]),k=l(k,R,A,O,s,20,a[19]),O=l(O,k,R,A,g,5,a[20]),A=l(A,O,k,R,S,9,a[21]),R=l(R,A,O,k,I,14,a[22]),k=l(k,R,A,O,_,20,a[23]),O=l(O,k,R,A,b,5,a[24]),A=l(A,O,k,R,C,9,a[25]),R=l(R,A,O,k,f,14,a[26]),k=l(k,R,A,O,y,20,a[27]),O=l(O,k,R,A,w,5,a[28]),A=l(A,O,k,R,p,9,a[29]),R=l(R,A,O,k,v,14,a[30]),O=d(O,k=l(k,R,A,O,T,20,a[31]),R,A,g,4,a[32]),A=d(A,O,k,R,y,11,a[33]),R=d(R,A,O,k,E,16,a[34]),k=d(k,R,A,O,C,23,a[35]),O=d(O,k,R,A,c,4,a[36]),A=d(A,O,k,R,_,11,a[37]),R=d(R,A,O,k,v,16,a[38]),k=d(k,R,A,O,S,23,a[39]),O=d(O,k,R,A,w,4,a[40]),A=d(A,O,k,R,s,11,a[41]),R=d(R,A,O,k,f,16,a[42]),k=d(k,R,A,O,m,23,a[43]),O=d(O,k,R,A,b,4,a[44]),A=d(A,O,k,R,T,11,a[45]),R=d(R,A,O,k,I,16,a[46]),O=h(O,k=d(k,R,A,O,p,23,a[47]),R,A,s,6,a[48]),A=h(A,O,k,R,v,10,a[49]),R=h(R,A,O,k,C,15,a[50]),k=h(k,R,A,O,g,21,a[51]),O=h(O,k,R,A,T,6,a[52]),A=h(A,O,k,R,f,10,a[53]),R=h(R,A,O,k,S,15,a[54]),k=h(k,R,A,O,c,21,a[55]),O=h(O,k,R,A,y,6,a[56]),A=h(A,O,k,R,I,10,a[57]),R=h(R,A,O,k,m,15,a[58]),k=h(k,R,A,O,w,21,a[59]),O=h(O,k,R,A,_,6,a[60]),A=h(A,O,k,R,E,10,a[61]),R=h(R,A,O,k,p,15,a[62]),k=h(k,R,A,O,b,21,a[63]),i[0]=i[0]+O|0,i[1]=i[1]+k|0,i[2]=i[2]+R|0,i[3]=i[3]+A|0},_doFinalize:function(){var t=this._data,r=t.words,o=8*this._nDataBytes,n=8*t.sigBytes;r[n>>>5]|=128<<24-n%32;var i=e.floor(o/4294967296),s=o;r[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,o,n,i,s){var a=e+(t&r|~t&o)+n+s;return(a<<i|a>>>32-i)+t}function l(e,t,r,o,n,i,s){var a=e+(t&o|r&~o)+n+s;return(a<<i|a>>>32-i)+t}function d(e,t,r,o,n,i,s){var a=e+(t^r^o)+n+s;return(a<<i|a>>>32-i)+t}function h(e,t,r,o,n,i,s){var a=e+(r^(t|~o))+n+s;return(a<<i|a>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),o.MD5)},function(e,t,r){var o=r(7),n=r(48),i=r(23),s=/"/g,a=o("".replace);e.exports=function(e,t,r,o){var c=i(n(e)),u="<"+t;return""!==r&&(u+=" "+r+'="'+a(i(o),s,"&quot;")+'"'),u+">"+c+"</"+t+">"}},function(e,t,r){var o=r(8);e.exports=function(e){return o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},function(e,t,r){r(230)("Int32",(function(e){return function(t,r,o){return e(this,t,r,o)}}))},function(e,t,r){var o=r(6),n=r(231);o({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},function(e,t,r){"use strict";e.exports=d;var o,n=r(188),i=n.LongBits,s=n.base64,a=n.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(d.create=function(){return new o})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function _(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(_,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=i.from(e);return this._push(_,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(_,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=i.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var m=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){o=e,d.create=h(),o._configure()}},function(e,t,r){"use strict";e.exports=c;var o,n=r(188),i=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){o=e,c.create=d(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},function(e,t,r){var o;!function(){"use strict";function n(e,t,r){var o=t.x,n=t.y,i=r.x-o,s=r.y-n;if(0!==i||0!==s){var a=((e.x-o)*i+(e.y-n)*s)/(i*i+s*s);a>1?(o=r.x,n=r.y):a>0&&(o+=i*a,n+=s*a)}return(i=e.x-o)*i+(s=e.y-n)*s}function i(e,t,r){if(e.length<=2)return e;var o=void 0!==t?t*t:1;return function(e,t){var r=e.length-1,o=[e[0]];return function e(t,r,o,i,s){for(var a,c=i,u=r+1;u<o;u++){var l=n(t[u],t[r],t[o]);l>c&&(a=u,c=l)}c>i&&(a-r>1&&e(t,r,a,i,s),s.push(t[a]),o-a>1&&e(t,a,o,i,s))}(e,0,r,t,o),o.push(e[r]),o}(e=r?e:function(e,t){for(var r,o,n,i,s,a=e[0],c=[a],u=1,l=e.length;u<l;u++)n=a,(i=(o=r=e[u]).x-n.x)*i+(s=o.y-n.y)*s>t&&(c.push(r),a=r);return a!==r&&c.push(r),c}(e,o),o)}void 0===(o=function(){return i}.call(t,r,t,e))||(e.exports=o)}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return oe})),r(302),r(303),r(39),r(25),r(47),r(60),r(61),r(62),r(36),r(46),r(53),r(49),r(50),r(94),r(55),r(208),r(67),r(106),r(395),r(87);var o,n,i,s,a,c,u=r(78),l=r.n(u),d=r(169),h=r(181),p=function(){return(p=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},f=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},_=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},g=(h.a.getInstance(),function(){function e(){this.axiosInstance2=l.a.create(),this.config=null,this.domains={},this.fileDomain=""}return e.prototype.setConfig=function(e){var t="";"alpha"===e.docEnv||"alpha"===e.wbEnv?(t="https://docservice-alpha.zego.im",this.fileDomain="https://docservice-storage-alpha.zego.im/"):(t="test"===e.docEnv||"test"===e.wbEnv?"https://docservice-test.zego.im":"https://docservice.zego.im",this.fileDomain="test"===e.docEnv||"test"===e.wbEnv?"https://docservice-storage-test.zego.im/":"https://docservice-storage.zego.im/"),this.domains={cvt:t+"/doc/cvt_doc",query:t+"/doc/query_status",access:t+"/doc/access"},this.config={platform:32,app_id:e.appID,web_token:e.token,id_name:e.userID}},e.prototype.isConfiged=function(){return!!this.config},e.prototype.uploadImage=function(e,t){return f(this,void 0,void 0,(function(){var r=this;return _(this,(function(o){return[2,new Promise((function(o,n){return f(r,void 0,void 0,(function(){var r,i,s,a,c,u,l,h,p,f,g;return _(this,(function(_){switch(_.label){case 0:return _.trys.push([0,11,,12]),r=e.name,i=e.size,s=r.substr(r.lastIndexOf(".")+1).toLowerCase(),[4,Object(d.a)(e)];case 1:return a=_.sent(),[4,this.queryStatus(a)];case 2:return c=_.sent(),u=c.ret,l=c.status,h=c.oss,p=c.file_id,0!==u.code?[3,9]:1!==l?[3,4]:[4,this.upload(h,e,r,a,s,t,o)];case 3:return _.sent(),[3,8];case 4:return 16!==l?[3,6]:(f=o,[4,this.load(p)]);case 5:return f.apply(void 0,[_.sent()]),[3,8];case 6:return[4,this.repeatQuery(r,a,i,"",o)];case 7:_.sent(),_.label=8;case 8:return[3,10];case 9:u&&60011==u.code&&(u.code=2030001,u.msg=u.message),o(u),_.label=10;case 10:return[3,12];case 11:return!(g=_.sent())||2010001!=g.code&&2020006!=g.code||(g.code=3030010,g.msg=g.message),n(g),[3,12];case 12:return[2]}}))}))}))]}))}))},e.prototype.repeatQuery=function(e,t,r,o,n){return f(this,void 0,void 0,(function(){var i,s,a,c,u=this;return _(this,(function(l){switch(l.label){case 0:return[4,this.queryStatus(t,o)];case 1:return i=l.sent(),s=i.status,a=i.file_id,16===s&&n?(c=n,[4,this.load(a)]):[3,3];case 2:return c.apply(void 0,[l.sent()]),[3,6];case 3:return 2!==s?[3,5]:[4,this.cvt(e,t,r,n)];case 4:return l.sent(),[3,6];case 5:4!==s&&8!==s||setTimeout((function(){return f(u,void 0,void 0,(function(){return _(this,(function(i){switch(i.label){case 0:return[4,this.repeatQuery(e,t,r,o,n)];case 1:return i.sent(),[2]}}))}))}),2e3),l.label=6;case 6:return[2]}}))}))},e.prototype.queryStatus=function(e,t){return f(this,void 0,void 0,(function(){var r,o,n,i,s,a;return _(this,(function(c){switch(c.label){case 0:return r=p(p({},this.config),t?{task_id:t}:{file_hash:e,file_type:16,expect_file_type:16}),[4,this.axiosInstance2({method:"post",url:this.domains.query,timeout:3e4,data:r})];case 1:return o=c.sent().data,n=o.ret,i=o.status,s=o.file_id,a=o.oss,[2,{status:i,file_id:s,oss:a,ret:n}]}}))}))},e.prototype.upload=function(e,t,r,o,n,i,s){return f(this,void 0,void 0,(function(){var a,c,u;return _(this,(function(l){switch(l.label){case 0:return a=e.host?e.host+"/"+e.object_name+"?."+n:this.fileDomain+"/"+e.object_name+"?."+n,c=Object(d.b)(e),(u=new FormData).append("OSSAccessKeyId",c.OSSAccessKeyId),u.append("x-oss-security-token",c.securityToken),u.append("signature",c.signature),u.append("policy",c.policy),u.append("successActionStatus",c.successActionStatus),u.append("key",c.objectName),u.append("file",t),u.append("name",r),[4,this.axiosInstance2({method:"post",url:c.url,data:u,timeout:6e5,onUploadProgress:function(e){if(i){var t=e.total,n=e.loaded;i({fileName:r,fileHash:o,uploadPercent:Math.floor(n/t*100)})}}})];case 1:return l.sent(),this.cvt(r,o,t.size,void 0),s(a),[2]}}))}))},e.prototype.cvt=function(e,t,r,o){return f(this,void 0,void 0,(function(){var n;return _(this,(function(i){switch(i.label){case 0:return[4,this.axiosInstance2({method:"post",url:this.domains.cvt,timeout:3e4,data:p(p({},this.config),{file_name:e,file_hash:t,file_size:r,file_type:16,expect_file_type:16,export_high_quality_images:!1})})];case 1:return 0===(n=i.sent().data).ret.code&&o?[4,this.repeatQuery(e,t,r,n.task_id,o)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},e.prototype.load=function(e){return f(this,void 0,void 0,(function(){var t,r;return _(this,(function(o){switch(o.label){case 0:return[4,this.axiosInstance2({method:"post",url:this.domains.access,timeout:3e4,data:p(p({},this.config),{file_id:e})})];case 1:if(0===(t=o.sent().data).ret.code)return r=t.file_name.substr(t.file_name.lastIndexOf(".")+1).toLowerCase(),[2,t.original_file_urls[0]+"?."+r];throw{code:t.ret.code,msg:t.ret.message,message:t.ret.message}}}))}))},e}()),m={Exprsss:{ModifyMod:"/eduv1/modify_mod",DestroyMod:"/eduv1/destroy_mod",CreateMod:"/eduv1/create_mod",GetMod:"/eduv1/get_mod",GetModList:"/eduv1/get_mod_list",GetPageGraphics:"/eduv1/get_page_graphics",ClearPageGraphics:"/eduv1/clear_page_graphics",DrawPageGraphics:"/eduv1/draw_page_graphics",Sync:"/eduv1/sync",GetRoomAuth:"/eduv1/get_room_auth",GetUserAuth:"/eduv1/get_user_auth"},Liveroom:{ModifyMod:""},Private:{ModifyMod:""}},v=r(26),y=r(10),b=r(0),S=r(9),E=r(1),T=r(2),w=function(){return(w=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},C=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},I=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},O=function(){function e(e,t){this.isSendPB=!1,this.isSwitch=!1,this.socket=e,this.module=t,this.docsService=new g,this.isSendPB=this.socket.isSendPB,this.isSwitch=this.socket.isSwitch}return e.prototype.updateRemoteImageGraphicData=function(e,t){return(e=JSON.parse(JSON.stringify(e))).forEach((function(e){var r=e.type,o=e.action,n=e.x,i=e.y;if(r==b.f.Image&&(!t&&(o==b.a.Update||o==b.a.Create)||t&&o==b.a.Move)){var s=e.data;s.x-=n,s.y-=i,s.ex-=n,s.ey-=i}})),e},e.prototype.posToPageNum=function(e,t,r,o,n,i,s){var a=r.cx,c=r.cy,u=0;return a&&c&&(o+=i,n+=s,u=(u=(u=e===b.p.Horizontal?o<=0?0:Math.floor(o/a):n<=0?0:Math.floor(n/c))>t-1?t-1:u)>99?99:u),u},e.prototype.mapPageNumList=function(e){for(var t=[],r=Math.min.apply(Math,e),o=Math.max.apply(Math,e),n=r;n<=o;n++)t.push(n);return t},e.prototype.judgeGraphicPage=function(e,t){var r=this,o=this.module.getMap(e),n=o.innerDirection,i=o.innerPageSize,s=o.innerPageCount,a=t.type,c=t.x,u=t.y,l=[];switch(a){case b.f.Text:var d=Object(S.r)(t.data),h=d.beginX,p=d.beginY,f=this.posToPageNum(n,s,i,Number(h),Number(p),c,u);l=this.mapPageNumList([f]);break;case b.f.Pencil:case b.f.Line:case b.f.Rect:case b.f.Ellipse:case b.f.Laser:case b.f.Cursor:var _=[];t.data.forEach((function(e,t,o){t%2||_.push(r.posToPageNum(n,s,i,o[t],o[t+1],c,u))})),l=this.mapPageNumList(_);break;case b.f.Image:var g=t.data,m=g.x,v=g.y,y=g.ex,E=g.ey,T=this.posToPageNum(n,s,i,m,v,0,0),w=this.posToPageNum(n,s,i,y,E,0,0);l=this.mapPageNumList([T,w]);break;case b.f.BgImage:l.push(0)}return l},e.prototype.checkProtoGraphic=function(e){var t=e.action,r=e.action_type,o=e.graphic_id,n=e.type,i=e.data,s=e.color,a=e.size,c=e.x,u=e.y,l=e.zorder,d=e.attributes,h=e.operate_id,p=e.is_end_draw,f={graphic_id:o,action:t,action_type:r,type:n,is_end_draw:!!p,layer:e.layer||0,zorder:l,creator_id:e.creator_id,operate_id:h};return t===b.a.Create||t===b.a.Append?(f.x=c,f.y=u,f.data=i,f.color=s,f.size=a,n!==b.f.Text&&n!==b.f.Pencil&&n!==b.f.Cursor||(f.attributes=d)):t===b.a.Update?(f.x=c,f.y=u,f.data=i,n===b.f.Image&&n===b.f.Cursor||(f.color=s,f.size=a),n!==b.f.Text&&n!==b.f.Pencil&&n!==b.f.Cursor||(f.attributes=d)):t===b.a.Move&&(f.x=c,f.y=u),n!==b.f.Pencil||p||t!==b.a.Create&&t!==b.a.Append||(f.type=b.f.RealTime),f},e.prototype.mapDrawPages=function(e,t){var r=this,o=this.module.getMap(e);if(!o)return[];var n=o.width,i=o.height,s=o.viewHeight,a=[],c=[];null==t||t.forEach((function(t){var u=r.judgeGraphicPage(e,t);t.color=Object(S.t)(t.color,!1);var l=Object(v.b)(n,i,s,r.module.fileInfo);Object(v.a)(t,n,!1,-l,i),r.isSwitch?Object(v.i)(t,!1,!0):r.isSendPB?Object(v.i)(t,!1):Object(v.h)(t,!1);var d=!1,h=r.checkProtoGraphic(t);u.forEach((function(e){c.includes(e)||c.push(e);var r=o.graphicListSeqs[e],n=w({},h);d&&t.type===b.f.RealTime&&t.action===b.a.Append&&(n.data=""),a.push({page:e,graphic_list_seq:r,draw_list:[n]}),d=!0}))}));var u=[];return c.forEach((function(e){var t={page:e,draw_list:[]};a.forEach((function(r){r.page===e&&(t.draw_list=t.draw_list.concat(r.draw_list),t.graphic_list_seq=r.graphic_list_seq)})),u.push(t)})),u},e.prototype.handleClearRsp=function(e,t,r,o,n){var i=r.header,s=r.body,a=i.code,c=i.message;if(0===a){var u=s.pages,l=s.graphic_list_seqs,d={};u&&u.forEach((function(e,t){return d[e]=l[t]})),E.a.getInstance().info1(T.d.Graph_update_seq,{whiteboardID:e,graphicListSeqs:d,body:s,actionMsg:"clear cb success"}),this.module.updateMapByGraphicListSeqs(s.mod_id,d),this.module.updateMap({whiteboardID:e,operateTimes:0}),this.module.clearGraphicMap(),o(e)}else{var h=this.module.getMap(e);if(h&&++h.operateTimes<5)this.clearViewHandle(e,t,o,n);else{var p=Object(y.b)(a,c);E.a.getInstance().error1(T.d.Mod_clear_cb,{errorData:p}),n(p)}}},e.prototype.handleUpdateToRemoteRsp=function(e,t,r,o,n){var i=r.header,s=r.body,a=r.seq,c=i.code,u=i.message;if(0===c){var l=s.pages,d=s.graphic_list_seqs,h={};l&&l.forEach((function(e,t){return h[e]=d[t]})),E.a.getInstance().info1(T.d.Graph_update_seq_remote,{whiteboardID:e,graphicListSeqs:h,actionMsg:"draw cb success"}),this.module.updateMapByGraphicListSeqs(s.mod_id,h),this.module.updateGraphicMap(e,t),o()}else{var p=Object(y.b)(c,u);E.a.getInstance().error1(T.d.Graph_draw_cb,{errorData:p,seq:a}),n(p)}},e.prototype.clearViewHandle=function(e,t,r,o){return C(this,void 0,void 0,(function(){var n;return I(this,(function(i){switch(i.label){case 0:return[4,this.socket.queueWSCmdHandler(m.Exprsss.ClearPageGraphics,{mod_id:e,layers:t})];case 1:return n=i.sent(),this.handleClearRsp(e,t,n,r,o),[2]}}))}))},e.prototype.updateToRemoteHandle=function(e,t,r,o){return C(this,void 0,void 0,(function(){var n,i,s,a,c,u,l;return I(this,(function(d){switch(d.label){case 0:return t=this.updateRemoteImageGraphicData(t),n=this.updateRemoteImageGraphicData(t,!0),(i={mod_id:e,draw_pages:this.mapDrawPages(e,JSON.parse(JSON.stringify(t)))}).draw_pages.length?[4,this.socket.checkSendLength(i,t[0].action)]:(o(Object(y.b)(b.j.ZegoWhiteboardViewErrorGraphicModifyFail)),[2]);case 1:return s=d.sent(),t.length>1&&s?(a=b.j.ZegoWhiteboardViewErrorGraphicNumLimit,c=Object(y.b)(a),o(c),E.a.getInstance().error1(T.d.Graph_draw_cb,{errorData:c,size:s}),[2]):(u={mod_id:e,draw_pages:this.mapDrawPages(e,t)},[4,this.socket.queueWSCmdHandler(m.Exprsss.DrawPageGraphics,u)]);case 2:return l=d.sent(),this.handleUpdateToRemoteRsp(e,n,l,r,o),[2]}}))}))},e.prototype.clearView=function(e,t){var r=this;return new Promise((function(o,n){r.clearViewHandle(e,t,o,n)}))},e.prototype.uploadImage=function(e,t){var r=E.a.getInstance().getConfig();return this.docsService.setConfig(r),this.docsService.uploadImage(e,t)},e.prototype.getGraphicIsEndDraw=function(e){try{var t=this.module.getGraphicItem(e),r=t.is_end_draw,o=1e3*t.server_timestamp-this.socket.getServerTimeOffset();return!!(r||(new Date).getTime()<o)}catch(e){return!0}},e.prototype.isAppendPathLimit=function(e,t){(t=JSON.parse(JSON.stringify(t))).action=b.a.Update,t.action_type=b.b.Single,t.is_end_draw=!0,t.data=t.oldData;var r=t.data.length;return this.socket.checkSendLength({mod_id:e,draw_pages:this.mapDrawPages(e,[t])},t.action).then((function(e){return e&&E.a.getInstance().warn1(T.d.Graph_draw_limit,{size:e,length:r}),!!e}))},e}(),k=(r(296),r(123),r(184),r(168),r(124),r(56),r(115),r(186),r(121),r(218),r(226),r(105),r(229),r(77),r(4)),R=r(35);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e[e.Initiative=1]="Initiative",e[e.Inner=2]="Inner"}(o||(o={})),function(e){e[e.InProgress=1]="InProgress",e[e.Pending=2]="Pending",e[e.Resolve=3]="Resolve",e[e.Reject=4]="Reject"}(n||(n={})),function(e){e[e.success=0]="success",e[e.error=1]="error"}(i||(i={})),function(e){e[e.SetMod=1]="SetMod",e[e.ClearPageGraphics=2]="ClearPageGraphics",e[e.DrawPageGraphics=3]="DrawPageGraphics",e[e.SetRoomAuth=4]="SetRoomAuth",e[e.SetUserAuth=5]="SetUserAuth"}(s||(s={})),function(e){e[e.Add=1]="Add",e[e.Removed=2]="Removed",e[e.Modify=3]="Modify"}(a||(a={})),function(e){e[e.Scroll=1]="Scroll",e[e.AppendH5Extra=2]="AppendH5Extra",e[e.Scale=3]="Scale",e[e.Other=4]="Other"}(c||(c={}));var P=function(){return(P=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},L=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},N=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},D=function(){function e(e){this.modListSeq=0,this.modIdMapData={},this.zorderSeq=1,this.zorderStep=Object(S.f)(),this.modLimit=50,this.defaultModListSeq=0,this.marker="",this.defaultModType=1,this.defaultModSubtype=1,this.defaultModDeleteFlag=0,this.defaultHPercent=0,this.defaultVPercent=0,this.defaultModReserve=1,this.graphicLimit=30,this.graphicMap={},this.fileInfo={},this.userAuthMap={roomSeq:0,userSeq:0,syncTaskId:0,model:Object.freeze({scale:1,scroll:1,update:1,delete:1,move:1,clear:1,create:1})},this.isSwitch=!1,this.isSendPB=!1,this.socket=e,this.isSwitch=this.socket.isSwitch,this.isSendPB=this.socket.isSendPB}return e.prototype.updateModifyModTaskList=function(e){var t=e.status,r=e.push,o=e.setModAction,i=e.data,s=this.getMap(i.mod_id);if(t===n.InProgress)s.modifyModTaskList.splice(0,s.modifyModTaskList.length,e);else if(t===n.Pending)if(r)s.modifyModTaskList.push(e);else{s.modifyModTaskList.reverse();var a=s.modifyModTaskList.findIndex((function(e){return!e.push&&e.status===n.Pending}));if(-1!==a&&(a=s.modifyModTaskList.length-a-1,s.modifyModTaskList.reverse()),-1===a)s.modifyModTaskList.push(e);else{var u=s.modifyModTaskList[a];u.setModAction===c.AppendH5Extra?(c.Other,Object.assign(u.data,e.data)):u.setModAction===c.Scroll?o===c.Other||o===c.Scroll?Object.assign(u.data,e.data):s.modifyModTaskList.splice(a+1,0,e):u.setModAction===c.Scale?o===c.Scale?Object.assign(u.data,e.data):s.modifyModTaskList.splice(a+1,0,e):(Object.assign(u.data,e.data),u.setModAction=e.setModAction)}}E.a.getInstance().info1(T.d.Module_update_task_list,s.modifyModTaskList)},e.prototype.getOldModInfoByModifyModOption=function(e){var t=this.getMap(e.mod_id),r={};return Object.keys(e).forEach((function(e){"mod_title"===e?r[e]=t.name:"mod_extra"===e?r[e]=t.modExtra:"mod_reserve"===e?r[e]=t.pptStep:"mod_horizontal_percent"===e?r[e]=t.horizontalPercent:"mod_vertical_percent"===e?r[e]=t.verticalPercent:"mod_scale"===e&&(r[e]=t.modScale)})),r},e.prototype.setModBefore=function(e,t){var r=t.mod_id,o=this.getModSendSwitch(r),i={setModAction:e,data:t,push:!1,status:o?n.InProgress:n.Pending};return this.updateModifyModTaskList(i),o},e.prototype.cachePushModifyModTaskHandle=function(e){var t,r=this;return e.forEach((function(e){var o=e.pushModSeq,n=e.data,i=n.mod_id;o>r.getMap(i).modSeq&&r.updateMap({modSeq:o,whiteboardID:i});var s=r.updateMapByModifyModOption(n,o,!0);s&&(t=t||{},Object.assign(t,s))})),t},e.prototype.setModRspAfter=function(e){var t=e.setModOption,r=e.sendResultType,o=e.setModAction,s=t.mod_id,a=this.getMap(s),u=e.errorData;if(r===i.success)E.a.getInstance().info1(T.d.Module_set_mod_cb,"success");else{var l=this.getOldModInfoByModifyModOption(t);if(o===c.Scroll){var d=P(P({},u),{whiteboardID:s,horizontalPercent:l.mod_horizontal_percent,verticalPercent:l.mod_vertical_percent,step:l.mod_reserve});k.f.emit(k.d.Scroll,d),E.a.getInstance().info1(T.d.Module_set_mod_cb,d)}else if(o===c.AppendH5Extra){3===(null==u?void 0:u.code)&&(u=Object(y.b)(R.b.ZegoWhiteboardViewErrorAnimationInfoLimit));var h=l.mod_extra.includes("H5_record");h&&(l.mod_extra=JSON.parse(l.mod_extra),l.mod_extra.H5_record.t=102,l.mod_extra=JSON.stringify(l.mod_extra)),d=P(P({},u),{modExtra:l.mod_extra,whiteboardID:s,isH5:h}),k.f.emit(k.d.AppendH5Extra,d),E.a.getInstance().info1(T.d.Module_set_mod_cb,d)}else o===c.Scale&&(d=P(P({},u),{whiteboardID:s,mod_scale:l.mod_scale}),k.f.emit(k.d.Scale,d),E.a.getInstance().warn1(T.d.Module_set_mod_cb,d))}E.a.getInstance().info1(T.d.Module_set_mod_cb_tasks,a.modifyModTaskList),a.modifyModTaskList.splice(0,1);var p=a.modifyModTaskList.filter((function(e){return e.push})),f=this.cachePushModifyModTaskHandle(p);E.a.getInstance().info1(T.d.Module_set_mod_cb_push_map,f||""),a.modifyModTaskList=a.modifyModTaskList.filter((function(e){return!e.push}));var _=a.modifyModTaskList[0];_&&(f?this.cacheCallback(f):(_.status=n.InProgress,this.setModHandle(_.setModAction,_.data)))},e.prototype.cacheCallback=function(e){var t=e.is_modify_mod_scale,r=e.is_modify_mod_extra,o=e.is_modify_mod_horizontal_percent,i=e.is_modify_mod_vertical_percent,s=e.is_modify_mod_reserve,a=e.mod_extra,u=e.mod_id,l=this.getMap(u),d=l.modifyModTaskList[0];if(d){var h=d.setModAction,p=!1;if(h===c.Scroll)if(o||i||s)p=!0;else{var f={code:1112,msg:"",whiteboardID:u,horizontalPercent:l.horizontalPercent,verticalPercent:l.verticalPercent,step:l.pptStep};k.f.emit(k.d.Scroll,f),E.a.getInstance().info1(T.d.Module_set_mod_cb_cache,f),l.modifyModTaskList.splice(0,1),this.cacheCallback(e)}else if(h===c.AppendH5Extra)if(r&&a){var _=l.modExtra.includes("H5_record");f={code:1112,msg:"",modExtra:l.modExtra,whiteboardID:u,isH5:_},k.f.emit(k.d.AppendH5Extra,f),E.a.getInstance().info1(T.d.Module_set_mod_cb_cache,f),l.modifyModTaskList.splice(0,1),this.cacheCallback(e)}else p=!0;else h===c.Scale&&t?(f={code:1112,msg:"",whiteboardID:u,mod_scale:l.modScale},k.f.emit(k.d.Scale,f),E.a.getInstance().info1(T.d.Module_set_mod_cb_cache,f),l.modifyModTaskList.splice(0,1),this.cacheCallback(e)):p=!0;p&&(E.a.getInstance().info1(T.d.Module_set_mod_cb_cache,"next set mod"),d.status=n.InProgress,this.setModHandle(d.setModAction,d.data))}},e.prototype.getModSendSwitch=function(e){var t=this.modIdMapData[e];return!t||!t.modifyModTaskList.some((function(e){return!e.push}))},e.prototype.transModInfo=function(e,t,r,o){var n={room_id:"",zorder:0},i={x:0,y:0,z:0,w:0,h:0,ar_w:1,ar_h:1},s={scale:1,ofs_x:0,ofs_y:0};if(e)try{var a=e.buffer?JSON.parse(Object(v.c)(e)):JSON.parse(e),c=a.file_info;c&&(a.file_info={fileID:c.file_id,fileName:c.file_name,fileType:+c.file_type}),a.unique_id||(a.unique_id=4===(null==c?void 0:c.file_type)?c.file_id:o),n=a}catch(t){E.a.getInstance().error1(T.d.Module_trans,{error:t.message,modContentStr:e})}if(t)try{i=t.buffer?JSON.parse(Object(v.c)(t)):JSON.parse(t)}catch(e){E.a.getInstance().error1(T.d.Module_trans,{error:e.message,modPosStr:t})}if(r)try{(s=r.buffer?JSON.parse(Object(v.c)(r)):JSON.parse(r)).scale=Math.max(s.scale,1)}catch(e){E.a.getInstance().error1(T.d.Module_trans,{error:e.message,modScaleStr:r})}return{modContent:n,modPos:i,modScale:s}},e.prototype.checkModInfo=function(e){var t=this.getMap(e);return!!(t&&t.width&&t.height)&&t},e.prototype.deleteMap=function(e){delete this.modIdMapData[e]},e.prototype.getModPropSeq=function(e){return this.modIdMapData[e].modPropSeq},e.prototype.decodeH5Extra=function(e){return(e=e||"").includes("H5_")?e:e.buffer?Object(v.e)(e):Object(v.d)(e)},e.prototype.checkH5Extra=function(e,t,r){try{var o="",n=this.getH5Extra(e,!0);if(n){var i=JSON.parse(n);if(i.H5_target)if(t){var s=JSON.parse(t),a=i.H5_target,c=a.s,u=a.p,l=a.e,d=s.H5_target,h=d.s,p=d.p,f=d.e;if(h===c&&p===u)if(r)if(f.length<l.length)o=t;else if(f.length>l.length)s.H5_target.e=f.slice(l.length),o=JSON.stringify(s);else{var _=[];f.forEach((function(e,t){l.findIndex((function(t){return e.id===t.id}))!==t&&_.push(e)}));var g=f[f.length-1];o=_.length?(s.H5_target.e=_,JSON.stringify(s)):g.s?(s.H5_target.e=[g],JSON.stringify(s)):""}else{var m=l.findIndex((function(e){return e.s&&f[0].id===e.id}));-1!==m&&l.splice(m,1),i.H5_target.e=l.concat(f),o=JSON.stringify(i)}else o=t}else o="";else o=t}else o=t;return o}catch(e){return""}},e.prototype.updateMapByModifyModOption=function(e,t,r){var o,n=e.mod_id,i=e.mod_title,s=e.mod_horizontal_percent,a=e.mod_vertical_percent,c=e.mod_reserve,u=e.mod_scale,l=e.mod_content,d=e.is_modify_mod_horizontal_percent,h=e.is_modify_mod_vertical_percent,p=e.is_modify_mod_reserve,f=e.is_modify_mod_title,_=e.is_modify_mod_extra,g=e.is_modify_mod_scale,m=e.is_modify_mod_content,y=this.decodeH5Extra(e.mod_extra),b=this.getModPropSeq(n),S=b.mod_horizontal_percent,w=b.mod_vertical_percent,C=b.mod_reserve,I=b.mod_title,O=b.mod_extra,k=b.mod_scale,R=b.mod_content,A=this.getMap(n),P={isPushScroll:!1,horizontalPercent:A.horizontalPercent,verticalPercent:A.verticalPercent,pptStep:A.pptStep};if(d&&t>S){P.isPushScroll=!0,P.horizontalPercent=+s||0;var L={whiteboardID:n,horizontalPercent:P.horizontalPercent,modPropSeq:{mod_horizontal_percent:t}};E.a.getInstance().info1(T.d.Module_update_h_percent,{temp1:L}),this.updateMap(L)}if(h&&t>w){P.isPushScroll=!0,P.verticalPercent=+a||0,P.pptStep=+c||1;var N={whiteboardID:n,verticalPercent:P.verticalPercent,pptStep:P.pptStep,modPropSeq:{mod_vertical_percent:t}};E.a.getInstance().info1(T.d.Module_update_v_percent,{temp2:N}),this.updateMap(N)}if(p&&t>C){P.isPushScroll=!0,P.pptStep=+c||1;var D={whiteboardID:n,pptStep:P.pptStep,modPropSeq:{mod_reserve:t}};E.a.getInstance().info1(T.d.Module_update_step,{temp3:D}),this.updateMap(D)}if(P.isPushScroll&&r&&(this.pushScrollHandle(n,P.horizontalPercent,P.verticalPercent,P.pptStep),this.updateMap({whiteboardID:n,modExtra:""}),o=e),f&&t>I){var M={whiteboardID:n,name:i,modPropSeq:{mod_title:t}};E.a.getInstance().info1(T.d.Module_update_name,{temp4:M}),this.updateMap(M)}if(_&&t>O){var x={whiteboardID:n,modExtra:y,modPropSeq:{mod_extra:t}};if(r){var B=this.checkH5Extra(n,y,!0);B&&(this.pushExtraHandle(n,B),o=e)}E.a.getInstance().info1(T.d.Module_update_h5extra,{temp5:x}),this.updateMap(x)}if(g&&t>k){var U=this.isSwitch&&(null==u?void 0:u.buffer)?JSON.parse(Object(v.e)(u)):JSON.parse(u);x={whiteboardID:n,modScale:U,modPropSeq:{mod_scale:t}},r&&this.pushScaleHandle(n,U.scale,U.ofs_x,U.ofs_y),E.a.getInstance().info1(T.d.Module_update_scale,{temp5:x}),this.updateMap(x)}return m&&t>R&&(x={whiteboardID:n,zorder:(this.isSwitch&&(null==l?void 0:l.buffer)?JSON.parse(Object(v.e)(l)):JSON.parse(l)).zorder,modPropSeq:{mod_content:t}},E.a.getInstance().info1(T.d.Module_update_content,{temp5:x}),this.updateMap(x),r&&this.pushSwitchViewHandle()),o},e.prototype.updateMapByMod=function(e){var t,r=this.transModInfo(e.mod_content,e.mod_pos,e.mod_scale,e.mod_id),o=r.modContent,n=r.modPos,i=r.modScale;this.updateMap({whiteboardID:e.mod_id,name:this.isSwitch&&(null===(t=e.mod_title)||void 0===t?void 0:t.buffer)?Object(v.e)(e.mod_title):e.mod_title,aspectWidth:n.ar_w,aspectHeight:n.ar_h,roomID:o.room_id,uniqueID:o.unique_id,zorder:o.zorder,fileInfo:Object.freeze(o.file_info),createTime:e.mod_create_time?+e.mod_create_time:0,horizontalPercent:e.mod_horizontal_percent||0,verticalPercent:e.mod_vertical_percent||0,pptStep:e.mod_reserve||1,modScale:i,modType:e.mod_type,modSubtype:e.mod_subtype,modSeq:e.mod_seq,modExtra:e.mod_extra.buffer?this.decodeH5Extra(Object(v.e)(e.mod_extra)):this.decodeH5Extra(e.mod_extra),outPageCount:o.whiteboard_page_count,outZorder:o.zorder,modPropSeq:{mod_title:e.mod_seq,mod_type:e.mod_seq,mod_subtype:e.mod_seq,mod_pos:e.mod_seq,mod_status:e.mod_seq,mod_content:e.mod_seq,mod_extra:e.mod_seq,mod_reserve:e.mod_seq,mod_delete_flag:e.mod_seq,mod_horizontal_percent:e.mod_seq,mod_vertical_percent:e.mod_seq,mod_scale:e.mod_seq}})},e.prototype.updateModListSeq=function(e){e&&(this.modListSeq=e)},e.prototype.splitPage=function(e,t,r){var o=this.getMap(e);if(o&&t&&r){var n=1,i=0,s=0;t>=r?(i=s=r,(n=Math.ceil(t/r))>100&&(i=Math.ceil(t/99),n=100),o.innerDirection=R.f.Horizontal):(s=i=t,(n=Math.ceil(r/t))>100&&(s=Math.ceil(r/99),n=100),o.innerDirection=R.f.Vertical),o.innerPageCount=n;for(var a=0;a<n;a++)o.graphicListSeqs[a]||(o.graphicListSeqs[a]=0),o.pullMarks[a]=!1;o.innerPageSize.cx=i,o.innerPageSize.cy=s,E.a.getInstance().info1(T.d.Module_split_page,{whiteboardID:e,width:t,height:r,innerPageCx:i,innerPageCy:s,innerPageCount:n})}},e.prototype.setFileInfo=function(e){this.fileInfo=e},e.prototype.transGraphicList=function(e,t,r,o,n){var i=this;if(t&&t.length){var s=Object(v.b)(r,o,n,this.fileInfo);t.forEach((function(t){e.some((function(e){return e.graphic_id===t.graphic_id}))||(t.zorder>i.zorderSeq&&(i.zorderSeq=t.zorder),i.isSwitch?Object(v.i)(t,!0,!0):i.isSendPB?Object(v.i)(t,!0):Object(v.h)(t,!0),i.setGraphicItem(t),Object(v.a)(t,r,!0,s,o),t.color=Object(S.t)(t.color,!0),e.push(t))}))}},e.prototype.pushScrollHandle=function(e,t,r,o){k.f.emit(k.d.PushScroll,e,t,r,o)},e.prototype.pushScaleHandle=function(e,t,r,o){k.f.emit(k.d.PushScale,e,t,r,o)},e.prototype.pushExtraHandle=function(e,t){k.f.emit(k.d.PushH5ExtraAppended,e,t)},e.prototype.pushSwitchViewHandle=function(){var e=this.getCurrentActivitedView(),t=e[0],r=e[1];k.f.emit(k.e.RemoteSwitchMod,t,r)},e.prototype.pushSetModHandle=function(e){var t=e.mod_list_seq,r=e.action_list[0],o=r.action;o===a.Removed?this.pushRemovedMod(r.mod_id):o===a.Add&&this.pushAddMod(r),t>=this.modListSeq?(this.updateModListSeq(t),o===a.Modify&&this.pushModifyMod(r)):E.a.getInstance().warn1(T.d.Module_remote,{localModListSeq:this.modListSeq,remoteModListSeq:t,msg:"throw away"})},e.prototype.pushClearPageGraphicsHandle=function(e){var t=e.action_seqs,r=e.pages,o=e.layers,n=e.mod_id;if(this.checkModInfo(n)){var i={};r&&r.forEach((function(e,r){return i[e]=t[r]})),E.a.getInstance().info1(T.d.Module_update_seq,{whiteboardID:n,graphicListSeqs:i,layers:o,actionMsg:"remote clear"}),k.f.emit(k.d.PushClearPageGraphics,n,o),this.updateMapByGraphicListSeqs(n,i),this.updateMap({whiteboardID:n,operateTimes:0})}},e.prototype.pushClearUserGraphicListHandle=function(e){var t=e.id_name,r=e.mods;t!=this.socket.getUserID()&&(r.forEach((function(e){var t=e.mod_id,r=e.graphic_ids;k.f.emit(k.d.PushDrawPageGraphics,t,[],r)})),E.a.getInstance().info1(T.d.Module_delete_graphic,{id_name:t,mods:r,actionMsg:"remote delete graphic"}))},e.prototype.pushDrawPageGraphicsHandle=function(e){var t=this,r=e.page_graphics,o=e.mod_id,n=this.checkModInfo(o);if(n){E.a.getInstance().info1(T.d.Module_remote_draw,{drawPages:r});var i=n.width,s=n.height,a=n.viewHeight,c={},u=[],l=[];r.forEach((function(e){var r=e.del_graphic_id_list,o=e.graphic_list,d=e.action_seq,h=e.page;(!n.graphicListSeqs[h]||d>n.graphicListSeqs[h])&&(t.transGraphicList(u,o,i,s,a),r&&l.push.apply(l,r),c[h]=d)})),E.a.getInstance().info1(T.d.Module_update_seq,{whiteboardID:o,graphicListSeqs:c,actionMsg:"remote_draw"}),this.updateMapByGraphicListSeqs(o,c),k.f.emit(k.d.PushDrawPageGraphics,o,u,l)}},e.prototype.pushAddMod=function(e){var t=e.mod_id;E.a.getInstance().info1(T.d.Module_remote_add,{whiteboardID:t}),this.updateMapByMod(e),k.f.emit(k.d.PushAddMod,t,this.getMap(t).uniqueID)},e.prototype.pushRemovedMod=function(e){var t=this.getMap(e).uniqueID;this.deleteMap(e),k.f.emit(k.d.PushRemovedMod,e,t),k.f.emit(k.d.RemoteDelMod)},e.prototype.pushModifyMod=function(e){e.mod_horizontal_percent||(e.mod_horizontal_percent=0),e.mod_vertical_percent||(e.mod_vertical_percent=0);var t=e.mod_id,r=e.mod_seq,o=e.mod_title,i=e.mod_horizontal_percent,s=e.mod_vertical_percent,a=e.mod_reserve,c=e.mod_extra,u=e.mod_scale,l=e.mod_content,d=e.is_modify_mod_vertical_percent,h=e.is_modify_mod_horizontal_percent,p=e.is_modify_mod_reserve,f=e.is_modify_mod_title,_=e.is_modify_mod_extra,g=e.is_modify_mod_scale,m=e.is_modify_mod_content,v=this.getMap(t);if(v)if(this.getModSendSwitch(t)){if(E.a.getInstance().info1(T.d.Module_remote_modify,"immediate update"),r>v.modSeq){var y={whiteboardID:t,modSeq:r};this.updateMap(y)}this.updateMapByModifyModOption(e,r,!0)}else{E.a.getInstance().info1(T.d.Module_remote_modify,"cache");var b={mod_id:t};f&&Object.assign(b,{mod_title:o,is_modify_mod_title:f}),_&&Object.assign(b,{mod_extra:c,is_modify_mod_extra:_}),h&&Object.assign(b,{mod_horizontal_percent:i,is_modify_mod_horizontal_percent:h}),d&&Object.assign(b,{mod_vertical_percent:s,is_modify_mod_vertical_percent:d,mod_reserve:a,is_modify_mod_reserve:p}),p&&Object.assign(b,{mod_reserve:a,is_modify_mod_reserve:p}),g&&Object.assign(b,{mod_scale:u,is_modify_mod_scale:g}),m&&Object.assign(b,{mod_content:l,is_modify_mod_content:m}),this.updateModifyModTaskList({status:n.Pending,data:b,push:!0,pushModSeq:r})}},e.prototype.clearPullMarks=function(e){var t=this;E.a.getInstance().info1(T.d.Module_clear_pull_mark,"init pull mark");var r=e?[e]:Object.keys(this.modIdMapData);Object.values(r).forEach((function(e){var r=t.modIdMapData[e];r&&Object.keys(r.pullMarks).forEach((function(e){r.pullMarks[+e]=!1}))}))},e.prototype.createModInfo=function(e){var t={};if(e.fileInfo){var r=e.fileInfo,o=r.fileID,n=r.fileName,i=r.fileType;t.file_info={file_id:o,file_name:n,file_type:i}}e.pageCount&&(t.whiteboard_page_count=e.pageCount);var s=e.uniqueID;return s&&(t.unique_id=s,t.zorder=Date.now()+this.socket.getServerTimeOffset()),{modContent:t,modPos:{x:0,y:0,z:0,w:0,h:0,ar_w:e.aspectWidth,ar_h:e.aspectHeight},modScale:{scale:1,ofs_x:0,ofs_y:0}}},e.prototype.compareHandle=function(e,t){var r=this;E.a.getInstance().info1(T.d.Module_compare,"compare local with server");var n=Object.keys(this.modIdMapData);t.forEach((function(t){var i=t.mod_id,s=t.mod_horizontal_percent,a=t.mod_vertical_percent,c=t.mod_reserve;if(i+="",s=s||0,a=a||0,c=c||1,Object.assign(t,{mod_horizontal_percent:s,mod_vertical_percent:a,mod_reserve:c}),-1===n.indexOf(i))e===o.Inner?r.pushAddMod(t):r.updateMapByMod(t);else{var u=r.getMap(i),l=u.horizontalPercent,d=u.verticalPercent,h=u.pptStep;r.updateMapByMod(t),l===s&&d===a&&c===h||r.pushScrollHandle(i,s,a,c)}})),n.forEach((function(n){-1===t.findIndex((function(e){return e.mod_id===n}))&&(e===o.Inner?r.pushRemovedMod(n):r.deleteMap(n))}))},e.prototype.handleGetModListDetailsRsp=function(e,t){var r=e.header,o=e.body,n=r.code,i=r.message;if(0===n){var s=o.mod_list_seq,a=o.mod_list;return s&&this.updateModListSeq(s),E.a.getInstance().info1(T.d.Module_update_seq,{modListSeq:s,actionMsg:"get list cb success"}),(a=a||[]).sort((function(e,t){return+t.mod_create_time-+e.mod_create_time})),this.compareHandle(t,a),Promise.resolve(a)}var c=Object(y.b)(n,i);return E.a.getInstance().error1(T.d.Module_get_list_cb,{errorData:c}),Promise.reject(c)},e.prototype.handleDestroyModRsp=function(e){var t=e.header,r=e.body,o=t.code,n=t.message;if(0===o){var i=r.mod_list_seq,s=r.mod_id;return this.updateModListSeq(i),E.a.getInstance().info1(T.d.Module_update_seq,{modListSeq:i,actionMsg:"destroy cb success"}),this.deleteMap(s),Promise.resolve()}var a=Object(y.b)(o,n);return E.a.getInstance().error1(T.d.Module_destroy_cb,{errorData:a}),Promise.reject(a)},e.prototype.handleCreateModRsp=function(e){return L(this,void 0,void 0,(function(){var t,r,o,n,i,s,a,c,u,l,d;return N(this,(function(h){switch(h.label){case 0:if(t=e.header,r=e.body,o=t.code,n=t.message,0!==o)return[3,5];i=r.mod_list_seq,s=r.mod_id,this.updateModListSeq(i),E.a.getInstance().info1(T.d.Module_update_seq,{modListSeq:i,actionMsg:"create cb success"}),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.getModInfo([s])];case 2:return a=h.sent(),c=a[0],this.updateMapByMod(c),[2,c.mod_id];case 3:return u=h.sent(),[2,Promise.reject(u)];case 4:return[3,6];case 5:return l=3===o?R.b.ZegoWhiteboardViewErrorViewNameLimit:o,d=Object(y.b)(l,n),E.a.getInstance().error1(T.d.Module_create_cb,{errorData:d}),[2,Promise.reject(d)];case 6:return[2]}}))}))},e.prototype.handleGetModInfoRsp=function(e){var t=e.header,r=e.body,o=t.code,n=t.message;if(0===o){var i=r.mod_list;return E.a.getInstance().info1(T.d.Module_get_info_cb,i||[]),Promise.resolve(i||[])}var s=Object(y.b)(o,n);return E.a.getInstance().error1(T.d.Module_get_info_cb,s),Promise.reject(s)},e.prototype.handleSetModRsp=function(e,t,r){var o=r.header,n=r.body,s=o.code,a=o.message;if(0===s){var c=n.mod_list_seq,u=n.mod_seq,l=n.mod_id;this.modListSeq=c,this.updateMap({whiteboardID:l,modSeq:u}),this.updateMapByModifyModOption(t,u,!1),this.setModRspAfter({setModAction:e,setModOption:t,sendResultType:i.success})}else this.setModRspAfter({setModAction:e,setModOption:t,sendResultType:i.error,errorData:3===s?{code:s,msg:a}:Object(y.b)(s,a)})},e.prototype.handleGetPageGraphicsListRsp=function(e,t){var r=this,o=t.header,n=t.body,i=o.code,s=o.message;if(0===i){var a=this.checkModInfo(e);if(!a)return;var c=a.width,u=a.height,l=a.viewHeight,d=n.pages,h=[],p=[],f={},_=[],g=[];d.forEach((function(t){var o=t.page,n=t.ret_graphic_list_seq,i=t.svr_graphic_list_seq,s=t.graphic_list,a=t.del_graphic_id_list;r.transGraphicList(_,s,c,u,l),a&&g.push.apply(g,a),f[o]=i,i!==n&&0!==n?(h.push(o),p.push(n)):r.getMap(e).pullMarks[o]=!0})),E.a.getInstance().info1(T.d.Module_update_seq,{whiteboardID:e,graphicListSeqs:f,actionMsg:"get list cb success"}),this.updateMapByGraphicListSeqs(e,f),k.f.emit(k.d.GetPageGraphicsList,e,_,g),h.length&&(E.a.getInstance().info1(T.d.Module_get_list_cb,"increment get"),this.getPageGraphicsList(e,h,p))}else{var m=Object(y.b)(i,s);E.a.getInstance().error1(T.d.Module_get_list_cb,m)}},e.prototype.getModInfo=function(e){return L(this,void 0,void 0,(function(){var t;return N(this,(function(r){switch(r.label){case 0:return[4,this.socket.queueWSCmdHandler(m.Exprsss.GetMod,{mod_id_list:e})];case 1:return t=r.sent(),[2,this.handleGetModInfoRsp(t)]}}))}))},e.prototype.getModListDetails=function(e,t){return void 0===e&&(e=o.Initiative),void 0===t&&(t=this.defaultModListSeq),L(this,void 0,void 0,(function(){var r;return N(this,(function(o){switch(o.label){case 0:return[4,this.socket.queueWSCmdHandler(m.Exprsss.GetModList,{mod_list_seq:t,limit:this.modLimit,marker:this.marker,mod_type:this.defaultModType})];case 1:return r=o.sent(),[2,this.handleGetModListDetailsRsp(r,e)]}}))}))},e.prototype.setModHandle=function(e,t){return L(this,void 0,void 0,(function(){var r,o;return N(this,(function(n){switch(n.label){case 0:return r=t.mod_id,[4,this.socket.queueWSCmdHandler(m.Exprsss.ModifyMod,P({mod_seq:this.getMap(r).modSeq},t))];case 1:return o=n.sent(),this.handleSetModRsp(e,t,o),[2]}}))}))},e.prototype.setMod=function(e,t){this.setModBefore(e,t)&&this.setModHandle(e,t)},e.prototype.checkScroll=function(e,t,r,o){var n=this.getMap(e);if(n){var i=n.horizontalPercent,s=n.verticalPercent,a=n.pptStep,c=!1,u={mod_id:e};return t!==i&&(u.mod_horizontal_percent=t,u.is_modify_mod_horizontal_percent=!0,c=u),r===s&&o===a||(u.mod_vertical_percent=r,u.is_modify_mod_vertical_percent=r!==s,u.mod_reserve=o,u.is_modify_mod_reserve=!0,c=u),c}return!1},e.prototype.checkScale=function(e,t,r,o){return!!this.getMap(e)&&{mod_id:e,mod_scale:this.isSwitch?Object(v.g)(JSON.stringify({scale:t,ofs_x:r,ofs_y:o})):JSON.stringify({scale:t,ofs_x:r,ofs_y:o}),is_modify_mod_scale:!0}},e.prototype.checkSwitchView=function(e){var t=this.getMap(e);if(t){var r={unique_id:t.uniqueID,whiteboard_page_count:t.outPageCount,zorder:Date.now()+this.socket.getServerTimeOffset()};if(t.fileInfo){var o=t.fileInfo,n=o.fileID,i=o.fileName,s=o.fileType;r.file_info={file_id:n,file_name:i,file_type:s}}return{mod_id:e,mod_content:this.isSwitch?Object(v.g)(JSON.stringify(r)):JSON.stringify(r),is_modify_mod_content:!0}}return!1},e.prototype.getCurrentPages=function(e,t,r){var o,n,i=this.getMap(e),s=i.width,a=i.height,c=i.innerPageSize,u=i.viewWidth,l=i.viewHeight;i.innerDirection===R.f.Horizontal?(o=Math.floor(s*t/c.cx),n=Math.floor((u+s*t)/c.cx)):(o=Math.floor(a*r/c.cy),n=Math.floor((l+a*r)/c.cy));var d=n-o+1;return{minPage:o=Math.max(0,o-d),maxPage:n=(n+=d)>99?99:Math.min(n,i.innerPageCount-1)}},e.prototype.initUserAuthMap=function(){this.userAuthMap.syncTaskId&&window.clearInterval(this.userAuthMap.syncTaskId),this.userAuthMap.roomSeq=0,this.userAuthMap.userSeq=0,this.userAuthMap.syncTaskId=0,this.userAuthMap.model=Object.freeze({scale:1,scroll:1,update:1,delete:1,move:1,clear:1,create:1}),k.f.emit(k.d.PushAuthChange,{scale:1,scroll:1},{update:1,delete:1,move:1,clear:1,create:1})},e.prototype.getRemoteRoomUserAuth=function(e){return L(this,void 0,void 0,(function(){var t,r,o,n,i,s;return N(this,(function(a){switch(a.label){case 0:return t="room"==e?m.Exprsss.GetRoomAuth:m.Exprsss.GetUserAuth,[4,this.socket.queueWSCmdHandler(t,{})];case 1:return r=a.sent(),o=r.header,n=o.code,i=o.message,0===n?(E.a.getInstance().info1("room"===e?T.d.Get_room_auth_cb:T.d.Get_user_auth_cb,"success"),[2,r.body]):(s=Object(y.b)(n,i),E.a.getInstance().error1("room"===e?T.d.Get_room_auth_cb:T.d.Get_user_auth_cb,s),[2,Promise.reject(s)])}}))}))},e.prototype.setUserAuthMap=function(e){if(e.auth_seq=e.auth_seq||0,!(e.auth_seq<=0)&&(e.id_name?this.userAuthMap.userSeq=e.auth_seq:this.userAuthMap.roomSeq=e.auth_seq,e.id_name||0==this.userAuthMap.userSeq)){var t=JSON.parse(JSON.stringify(this.userAuthMap.model)),r={scale:1,scroll:1,update:1,delete:1,move:1,clear:1,create:1},o=e.module_auth||[];r.scale=+o.includes(b.l.Scale),r.scroll=+o.includes(b.l.Scroll),o=e.graphic_auth||[],r.update=+o.includes(b.m.Update),r.delete=+o.includes(b.m.Delete),r.move=+o.includes(b.m.Move),r.clear=+o.includes(b.m.Clear),r.create=+o.includes(b.m.Create),this.userAuthMap.model=Object.freeze(r),this.onPushAuthChange(this.userAuthMap.model,t)}},e.prototype.onPushAuthChange=function(e,t){var r,o;e.scale==t.scale&&e.scroll==t.scroll||(r={scale:e.scale,scroll:e.scroll}),e.update==t.update&&e.delete==t.delete&&e.move==t.move&&e.clear==t.clear&&e.create==t.create||(o={update:e.update,delete:e.delete,move:e.move,clear:e.clear,create:e.create}),k.f.emit(k.d.PushAuthChange,r,o)},e.prototype.pushUserAuthHandle=function(e){var t=this,r=this.socket.getUserID(),o=this.userAuthMap.userSeq;e.user_auth.some((function(e){return e.id_name===r&&e.auth_seq>o&&(t.setUserAuthMap(e),!0)}))},e.prototype.syncRemoteSeq=function(){return L(this,void 0,void 0,(function(){var e,t,r,o,n,i,s=this;return N(this,(function(a){switch(a.label){case 0:return[4,this.socket.queueWSCmdHandler(m.Exprsss.Sync,{})];case 1:return 0===(e=a.sent()).header.code&&(t=e.body,r=t.sync_interval,o=t.room_auth_seq,n=t.user_auth_seq,i=t.mod_list_seq,this.userAuthMap.syncTaskId||(this.userAuthMap.syncTaskId=window.setInterval((function(){s.syncRemoteSeq()}),1e3*(r||30))),this.syncRoomUserAuth(o,n),this.syncModuleHandle(i)),[2]}}))}))},e.prototype.getPageGraphicsList=function(e,t,r){return L(this,void 0,void 0,(function(){var o,n,i;return N(this,(function(s){switch(s.label){case 0:return o=this.getMap(e),n=o.graphicListSeqs,!t.includes(0)&&t.unshift(0),r||(r=t.map((function(e){return o.pullMarks[e]&&n[e]||0}))),r.length<t.length&&r.unshift(n[0]||0),[4,this.socket.queueWSCmdHandler(m.Exprsss.GetPageGraphics,{mod_id:e,pages:t,graphic_list_seqs:r,limit:this.graphicLimit})];case 1:return i=s.sent(),this.handleGetPageGraphicsListRsp(e,i),[2]}}))}))},e.prototype.syncModuleHandle=function(e){E.a.getInstance().info1(T.d.Module_get_list_sync,{localModListSeq:this.modListSeq,svrModListSeq:e}),e>this.modListSeq&&this.getModListDetails(o.Inner,this.modListSeq?this.modListSeq:this.defaultModListSeq)},e.prototype.syncRoomUserAuth=function(e,t){var r=this;E.a.getInstance().info1(T.d.Module_sync_room_user_auth_cb,{localRoom:this.userAuthMap.roomSeq,serverRoom:e,localUser:this.userAuthMap.userSeq,serverUser:t}),t=t||0,(e=e||0)>this.userAuthMap.roomSeq&&(this.userAuthMap.roomSeq=e,this.getRemoteRoomUserAuth("room").then((function(e){return r.setUserAuthMap(e)}))),t>this.userAuthMap.userSeq&&(this.userAuthMap.userSeq=t,this.getRemoteRoomUserAuth("user").then((function(e){return r.setUserAuthMap(e)})))},e.prototype.checkLogin=function(){return"CONNECTED"===this.socket.getRoomState()||Promise.reject(Object(y.b)(R.b.ZegoWhiteboardViewErrorNoLoginRoom))},e.prototype.getModList=function(){return L(this,void 0,void 0,(function(){var e,t,r;return N(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),!0!==(e=this.checkLogin())?[2,e]:(E.a.getInstance().info1(T.d.Module_get_list,{localModListSeq:this.modListSeq}),[4,this.getModListDetails(o.Initiative)]);case 1:return t=n.sent(),[2,Promise.resolve(t.map((function(e){return e.mod_id})))];case 2:return r=n.sent(),[2,Promise.reject(r)];case 3:return[2]}}))}))},e.prototype.destroyMod=function(e){return L(this,void 0,void 0,(function(){var t,r;return N(this,(function(o){switch(o.label){case 0:return!0!==(t=this.checkLogin())?[2,t]:[4,this.socket.queueWSCmdHandler(m.Exprsss.DestroyMod,{mod_id:e})];case 1:return r=o.sent(),[2,this.handleDestroyModRsp(r)]}}))}))},e.prototype.createMod=function(e,t){return L(this,void 0,void 0,(function(){var r,o,n,i,s,a,c,u;return N(this,(function(l){switch(l.label){case 0:return r=this.checkLogin(),o=this.isSwitch,!0!==r?[2,r]:(n=this.createModInfo(e),i=n.modContent,s=n.modPos,a=n.modScale,c={mod_id:t||Object(S.d)(),mod_title:o?Object(v.g)(e.name):e.name,mod_type:this.defaultModType,mod_subtype:this.defaultModSubtype,mod_delete_flag:this.defaultModDeleteFlag,mod_content:o?Object(v.g)(JSON.stringify(i)):JSON.stringify(i),mod_horizontal_percent:this.defaultHPercent,mod_vertical_percent:this.defaultVPercent,mod_reserve:this.defaultModReserve,mod_pos:o?Object(v.g)(JSON.stringify(s)):JSON.stringify(s),mod_scale:o?Object(v.g)(JSON.stringify(a)):JSON.stringify(a)},[4,this.socket.queueWSCmdHandler(m.Exprsss.CreateMod,c)]);case 1:return u=l.sent(),[2,this.handleCreateModRsp(u)]}}))}))},e.prototype.getUserAuth=function(){return this.userAuthMap.model},e.prototype.updateMapByGraphicListSeqs=function(e,t){var r=this.getMap(e).graphicListSeqs;Object.keys(t).forEach((function(e){r[+e]=t[+e]}))},e.prototype.setGraphicItem=function(e){var t=e.operate_id,r=e.data;this.graphicMap[e.graphic_id]={is_end_draw:!t||e.is_end_draw,server_timestamp:+e.server_timestamp||0,operate_id:t,type:e.type,pointData:{x:e.x||0,y:e.y||0,px:e.px||0,py:e.py||0,data:"object"==A(r)?JSON.parse(JSON.stringify(r)):r}}},e.prototype.getGraphicItem=function(e){return this.graphicMap[e]},e.prototype.clearGraphicMap=function(){this.graphicMap={}},e.prototype.updateGraphicMap=function(e,t){var r=this,o=this.getMap(e).width,n=this.getMap(e).height,i=this.getMap(e).viewHeight,s=Object(v.b)(o,n,i,this.fileInfo);t.forEach((function(e){Object(v.a)(e,o,!1,-s,n),r.setGraphicItem(e)}))},e.prototype.reloadViewGraphics=function(e,t){var r=this,o=this.getMap(e).width,n=this.getMap(e).height,i=this.getMap(e).viewHeight,s=Object(v.b)(o,n,i,this.fileInfo);t.forEach((function(e){if(e.type===b.f.Cursor){var t=r.getGraphicItem(e.graphic_id);if(t){var i=t.pointData.data;e.data="object"==A(i)?JSON.parse(JSON.stringify(i)):i,Object(v.a)(e,o,!0,s,n)}}else{var a=r.getGraphicItem(e.graphic_id).pointData,c=a.x,u=a.y,l=a.px,d=a.py;i=a.data,e.x=c,e.y=u,e.px=l,e.py=d,e.data="object"==A(i)?JSON.parse(JSON.stringify(i)):i,Object(v.a)(e,o,!0,s,n)}}))},e.prototype.updateMap=function(e){var t=this.getMap(e.whiteboardID);if(t){var r=e.modPropSeq;r&&Object.assign(t.modPropSeq||{},r),delete e.modPropSeq,Object.assign(t,e)}else this.modIdMapData[e.whiteboardID]=P({graphicListSeqs:{0:0},pullMarks:{0:!1},modSeq:0,width:0,height:0,viewWidth:0,viewHeight:0,innerPageCount:1,innerDirection:R.f.Horizontal,innerPageSize:{cx:0,cy:0},modType:this.defaultModType,modSubtype:this.defaultModSubtype,operateTimes:0,inProgress:!1,graphicSendSwitch:!0,modifyModTaskList:[],moveTaskList:[]},e)},e.prototype.getMap=function(e){return this.modIdMapData[e]},e.prototype.appendH5Extra=function(e,t){E.a.getInstance().info1(T.d.Module_append_extra_origin,t);var r=this.checkH5Extra(e,t,!1);if(r){E.a.getInstance().info1(T.d.Module_append_extra_new,r);var o=r.includes("H5_record"),n={mod_id:e,mod_extra:this.isSwitch?Object(v.g)(r):o?Object(v.f)(r):r,is_modify_mod_extra:!0};this.setMod(c.AppendH5Extra,n)}},e.prototype.scroll=function(e,t,r,o,n){E.a.getInstance().info1(T.d.Module_scroll_origin,{hPercent:t,vPercent:r,pptStep:o});var i=this.checkScroll(e,t,r,o);if(i){if(i.mod_extra="",i.is_modify_mod_extra=!0,n){var s=this.getMap(e).modScale,a=s.scale,u=s.ofs_x,l=n.scaleFactor,d=n.scaleOffsetX,h=n.scaleOffsetY?{scale:l,ofs_x:d,ofs_y:0}:{scale:a,ofs_x:u,ofs_y:0};i.mod_scale=this.isSwitch?Object(v.g)(JSON.stringify(h)):JSON.stringify(h),i.is_modify_mod_scale=!0}E.a.getInstance().info1(T.d.Module_scroll_new,{setModOption:i}),this.setMod(c.Scroll,i)}},e.prototype.scale=function(e,t,r,o){E.a.getInstance().info1(T.d.Module_scale_origin,{scale:t,ofs_x:r,ofs_y:o});var n=this.checkScale(e,t,r,o);n&&(E.a.getInstance().info1(T.d.Module_scale_new,{setModOption:n}),this.setMod(c.Scale,n))},e.prototype.getAspectRatio=function(e){var t=this.getMap(e);return t.aspectWidth+":"+t.aspectHeight},e.prototype.getFileInfo=function(e){var t=this.getMap(e);return t&&t.fileInfo||null},e.prototype.getScrollPercent=function(e){var t=this.getMap(e);return{horizontalPercent:t.horizontalPercent,verticalPercent:t.verticalPercent,pptStep:t.pptStep,direction:t.innerDirection}},e.prototype.getScale=function(e){var t=this.getMap(e);return{scaleFactor:t.modScale.scale,scaleOffsetX:t.modScale.ofs_x,scaleOffsetY:t.modScale.ofs_y}},e.prototype.loadCurrentGraphics=function(e,t,r){for(var o=this.getMap(e),n=this.getCurrentPages(e,t,r),i=n.minPage,s=n.maxPage,a=[],c=i;c<=s;c++)!o.pullMarks[c]&&a.push(c);E.a.getInstance().info1(T.d.Module_load_by_percent,{horizontalPercent:t,verticalPercent:r,minPage:i,maxPage:s,pageNumList:a}),a.length&&this.getPageGraphicsList(e,a)},e.prototype.reload=function(){var e=this;this.syncRemoteSeq(),this.clearPullMarks(),this.getModListDetails(o.Inner),this.onRemotePush(),this.getRemoteAuth();try{Object.values(this.modIdMapData).forEach((function(t){e.loadCurrentGraphics(t.whiteboardID,t.horizontalPercent,t.verticalPercent)}))}catch(e){E.a.getInstance().error1(T.d.Reload_graphics,{error:e})}E.a.getInstance().info1(T.d.Reload_graphics,"reload whiteboard")},e.prototype.unload=function(){this.userAuthMap.syncTaskId&&window.clearInterval(this.userAuthMap.syncTaskId),E.a.getInstance().info1(T.d.Unload,"unload whiteboard")},e.prototype.onRemotePush=function(){var e=this;this.socket.registerWbMessage((function(t){var r=t.sub_cmd,o=t.msg_body;switch(r){case 291101:e.pushSetModHandle(o);break;case 291203:e.pushDrawPageGraphicsHandle(o);break;case 291204:e.pushClearPageGraphicsHandle(o);break;case 291501:e.pushUserAuthHandle(o);break;case 291502:e.setUserAuthMap(o);break;case 291205:e.pushClearUserGraphicListHandle(o)}}))},e.prototype.getRemoteAuth=function(){var e=this;this.initUserAuthMap(),this.getRemoteRoomUserAuth("room").then((function(t){e.setUserAuthMap(t),e.syncRemoteSeq()})),this.getRemoteRoomUserAuth("user").then((function(t){e.setUserAuthMap(t)}))},e.prototype.getModName=function(e){var t=this.getMap(e);return(null==t?void 0:t.name)||""},e.prototype.getCreateTime=function(e){var t=this.getMap(e);return(null==t?void 0:t.createTime)||0},e.prototype.getRoomID=function(e){var t=this.getMap(e);return(null==t?void 0:t.roomID)||""},e.prototype.getUniqueID=function(e){var t=this.getMap(e);return(null==t?void 0:t.uniqueID)||""},e.prototype.getPageCount=function(e){var t=this.getMap(e);return(null==t?void 0:t.outPageCount)||1},e.prototype.setSize=function(e,t,r){var o=this.getMap(e);return!!(o&&t&&r)&&(o.width=t,o.height=r,E.a.getInstance().info1(T.d.Module_set_view_size,{whiteboardID:e,width:t,height:r}),this.splitPage(e,t,r),!0)},e.prototype.setViewSize=function(e,t,r){var o=this.getMap(e);return!!(o&&t&&r)&&(E.a.getInstance().info1(T.d.Module_set_viewpoart_size,{whiteboardID:e,viewWidth:t,viewHeight:r}),o.viewHeight=r,o.viewWidth=t,!0)},e.prototype.setRenderStatus=function(e,t){return void 0!==t&&(Object.values(this.modIdMapData).forEach((function(r){t?r.whiteboardID===e?r.renderStatus=1:r.renderStatus=0:r.whiteboardID===e&&(r.renderStatus=0)})),!0)},e.prototype.getH5Extra=function(e,t){var r=this.getMap(e),o=r?r.modExtra:"";if(E.a.getInstance().info1(T.d.Module_get_h5extra,{whiteboardID:e,modExtra:o}),o&&!t){var n=JSON.parse(o);n.H5_record&&(n.H5_record.t=101,o=JSON.stringify(n))}return o},e.prototype.createZorder=function(){return this.zorderSeq+=this.zorderStep},e.prototype.switchView=function(e){E.a.getInstance().info1(T.d.Module_switch_view_origin,e);var t=this.checkSwitchView(e);return t?(E.a.getInstance().info1(T.d.Module_switch_view_new,t),this.setModHandle(c.Other,t)):Promise.reject()},e.prototype.getCurrentActivitedView=function(){var e=0,t="";Object.values(this.modIdMapData).forEach((function(r){r.zorder&&r.zorder>e&&(e=r.zorder,t=r.whiteboardID)}));var r=t?[this.modIdMapData[t].uniqueID,t]:[];return E.a.getInstance().info1(T.d.Module_switch_view_remote,r),r},e}(),M=(r(37),r(69),r(126),r(127),r(128),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(136),r(137),r(138),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(225),r(394),r(161)),x=r.n(M),B=r(12),U=B.Reader,j=B.Writer,H=B.util,z=B.roots.default||(B.roots.default={});z.proto_access_pb=function(){var e={};return e.proto_req_header=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocol="",e.prototype.cmd="",e.prototype.appid=0,e.prototype.seq=0,e.prototype.user_id="",e.prototype.session_id="",e.prototype.room_id="",e.prototype.room_session_id="",e.prototype.biz_version="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(10).string(e.protocol),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(18).string(e.cmd),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(24).uint32(e.appid),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(32).uint32(e.seq),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(42).string(e.user_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(50).string(e.session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(58).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(66).string(e.room_session_id),null!=e.biz_version&&Object.hasOwnProperty.call(e,"biz_version")&&t.uint32(74).string(e.biz_version),t},e}(),e.proto_biz_channel=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.channel="",e.prototype.cmd="",e.prototype.req_body=H.newBuffer([]),e.prototype.is_retry_req=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.channel&&Object.hasOwnProperty.call(e,"channel")&&t.uint32(10).string(e.channel),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(18).string(e.cmd),null!=e.req_body&&Object.hasOwnProperty.call(e,"req_body")&&t.uint32(26).bytes(e.req_body),null!=e.is_retry_req&&Object.hasOwnProperty.call(e,"is_retry_req")&&t.uint32(32).uint32(e.is_retry_req),t},e}(),e.proto_rsp_header=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocol="",e.prototype.cmd="",e.prototype.appid=0,e.prototype.seq=0,e.prototype.user_id="",e.prototype.session_id="",e.prototype.room_id="",e.prototype.room_session_id="",e.prototype.biz_version="",e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_access_pb.proto_rsp_header;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.protocol=e.string();break;case 2:o.cmd=e.string();break;case 3:o.appid=e.uint32();break;case 4:o.seq=e.uint32();break;case 5:o.user_id=e.string();break;case 6:o.session_id=e.string();break;case 7:o.room_id=e.string();break;case 8:o.room_session_id=e.string();break;case 9:o.biz_version=e.string();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_access_pb.proto_rsp_header)return e;var t=new z.proto_access_pb.proto_rsp_header;return null!=e.protocol&&(t.protocol=String(e.protocol)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.appid&&(t.appid=e.appid>>>0),null!=e.seq&&(t.seq=e.seq>>>0),null!=e.user_id&&(t.user_id=String(e.user_id)),null!=e.session_id&&(t.session_id=String(e.session_id)),null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.room_session_id&&(t.room_session_id=String(e.room_session_id)),null!=e.biz_version&&(t.biz_version=String(e.biz_version)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.protocol="",r.cmd="",r.appid=0,r.seq=0,r.user_id="",r.session_id="",r.room_id="",r.room_session_id="",r.biz_version=""),null!=e.protocol&&e.hasOwnProperty("protocol")&&(r.protocol=e.protocol),null!=e.cmd&&e.hasOwnProperty("cmd")&&(r.cmd=e.cmd),null!=e.appid&&e.hasOwnProperty("appid")&&(r.appid=e.appid),null!=e.seq&&e.hasOwnProperty("seq")&&(r.seq=e.seq),null!=e.user_id&&e.hasOwnProperty("user_id")&&(r.user_id=e.user_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(r.session_id=e.session_id),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&(r.room_session_id=e.room_session_id),null!=e.biz_version&&e.hasOwnProperty("biz_version")&&(r.biz_version=e.biz_version),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_biz_channel_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.err_code=0,e.prototype.err_message="",e.prototype.channel="",e.prototype.cmd="",e.prototype.rsp_body=H.newBuffer([]),e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_access_pb.proto_biz_channel_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.err_code=e.int32();break;case 2:o.err_message=e.string();break;case 3:o.channel=e.string();break;case 4:o.cmd=e.string();break;case 5:o.rsp_body=e.bytes();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_access_pb.proto_biz_channel_rsp)return e;var t=new z.proto_access_pb.proto_biz_channel_rsp;return null!=e.err_code&&(t.err_code=0|e.err_code),null!=e.err_message&&(t.err_message=String(e.err_message)),null!=e.channel&&(t.channel=String(e.channel)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.rsp_body&&("string"==typeof e.rsp_body?H.base64.decode(e.rsp_body,t.rsp_body=H.newBuffer(H.base64.length(e.rsp_body)),0):e.rsp_body.length&&(t.rsp_body=e.rsp_body)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.err_code=0,r.err_message="",r.channel="",r.cmd="",t.bytes===String?r.rsp_body="":(r.rsp_body=[],t.bytes!==Array&&(r.rsp_body=H.newBuffer(r.rsp_body)))),null!=e.err_code&&e.hasOwnProperty("err_code")&&(r.err_code=e.err_code),null!=e.err_message&&e.hasOwnProperty("err_message")&&(r.err_message=e.err_message),null!=e.channel&&e.hasOwnProperty("channel")&&(r.channel=e.channel),null!=e.cmd&&e.hasOwnProperty("cmd")&&(r.cmd=e.cmd),null!=e.rsp_body&&e.hasOwnProperty("rsp_body")&&(r.rsp_body=t.bytes===String?H.base64.encode(e.rsp_body,0,e.rsp_body.length):t.bytes===Array?Array.prototype.slice.call(e.rsp_body):e.rsp_body),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_push_header=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocol="",e.prototype.cmd="",e.prototype.appid=0,e.prototype.user_id="",e.prototype.session_id="",e.prototype.room_id="",e.prototype.push_seq=0,e.prototype.from_user_id="",e.prototype.qos_flag=0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_access_pb.proto_push_header;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.protocol=e.string();break;case 2:o.cmd=e.string();break;case 3:o.appid=e.uint32();break;case 4:o.user_id=e.string();break;case 5:o.session_id=e.string();break;case 6:o.room_id=e.string();break;case 7:o.push_seq=e.uint32();break;case 8:o.from_user_id=e.string();break;case 9:o.qos_flag=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_access_pb.proto_push_header)return e;var t=new z.proto_access_pb.proto_push_header;return null!=e.protocol&&(t.protocol=String(e.protocol)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.appid&&(t.appid=e.appid>>>0),null!=e.user_id&&(t.user_id=String(e.user_id)),null!=e.session_id&&(t.session_id=String(e.session_id)),null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.push_seq&&(t.push_seq=e.push_seq>>>0),null!=e.from_user_id&&(t.from_user_id=String(e.from_user_id)),null!=e.qos_flag&&(t.qos_flag=e.qos_flag>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.protocol="",r.cmd="",r.appid=0,r.user_id="",r.session_id="",r.room_id="",r.push_seq=0,r.from_user_id="",r.qos_flag=0),null!=e.protocol&&e.hasOwnProperty("protocol")&&(r.protocol=e.protocol),null!=e.cmd&&e.hasOwnProperty("cmd")&&(r.cmd=e.cmd),null!=e.appid&&e.hasOwnProperty("appid")&&(r.appid=e.appid),null!=e.user_id&&e.hasOwnProperty("user_id")&&(r.user_id=e.user_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(r.session_id=e.session_id),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.push_seq&&e.hasOwnProperty("push_seq")&&(r.push_seq=e.push_seq),null!=e.from_user_id&&e.hasOwnProperty("from_user_id")&&(r.from_user_id=e.from_user_id),null!=e.qos_flag&&e.hasOwnProperty("qos_flag")&&(r.qos_flag=e.qos_flag),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_push_biz_channel=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.channel="",e.prototype.cmd="",e.prototype.req_body=H.newBuffer([]),e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_access_pb.proto_push_biz_channel;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.channel=e.string();break;case 2:o.cmd=e.string();break;case 3:o.req_body=e.bytes();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_access_pb.proto_push_biz_channel)return e;var t=new z.proto_access_pb.proto_push_biz_channel;return null!=e.channel&&(t.channel=String(e.channel)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.req_body&&("string"==typeof e.req_body?H.base64.decode(e.req_body,t.req_body=H.newBuffer(H.base64.length(e.req_body)),0):e.req_body.length&&(t.req_body=e.req_body)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channel="",r.cmd="",t.bytes===String?r.req_body="":(r.req_body=[],t.bytes!==Array&&(r.req_body=H.newBuffer(r.req_body)))),null!=e.channel&&e.hasOwnProperty("channel")&&(r.channel=e.channel),null!=e.cmd&&e.hasOwnProperty("cmd")&&(r.cmd=e.cmd),null!=e.req_body&&e.hasOwnProperty("req_body")&&(r.req_body=t.bytes===String?H.base64.encode(e.req_body,0,e.req_body.length):t.bytes===Array?Array.prototype.slice.call(e.req_body):e.req_body),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_push_biz_hannel_req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sub_cmd=0,e.prototype.sub_seq=0,e.prototype.qos_flag=0,e.prototype.msg_id="",e.prototype.sender_id="",e.prototype.msg_body=H.newBuffer([]),e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_access_pb.proto_push_biz_hannel_req;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.sub_cmd=e.uint32();break;case 2:o.sub_seq=e.uint32();break;case 3:o.qos_flag=e.uint32();break;case 4:o.msg_id=e.string();break;case 5:o.sender_id=e.string();break;case 6:o.msg_body=e.bytes();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_access_pb.proto_push_biz_hannel_req)return e;var t=new z.proto_access_pb.proto_push_biz_hannel_req;return null!=e.sub_cmd&&(t.sub_cmd=e.sub_cmd>>>0),null!=e.sub_seq&&(t.sub_seq=e.sub_seq>>>0),null!=e.qos_flag&&(t.qos_flag=e.qos_flag>>>0),null!=e.msg_id&&(t.msg_id=String(e.msg_id)),null!=e.sender_id&&(t.sender_id=String(e.sender_id)),null!=e.msg_body&&("string"==typeof e.msg_body?H.base64.decode(e.msg_body,t.msg_body=H.newBuffer(H.base64.length(e.msg_body)),0):e.msg_body.length&&(t.msg_body=e.msg_body)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.sub_cmd=0,r.sub_seq=0,r.qos_flag=0,r.msg_id="",r.sender_id="",t.bytes===String?r.msg_body="":(r.msg_body=[],t.bytes!==Array&&(r.msg_body=H.newBuffer(r.msg_body)))),null!=e.sub_cmd&&e.hasOwnProperty("sub_cmd")&&(r.sub_cmd=e.sub_cmd),null!=e.sub_seq&&e.hasOwnProperty("sub_seq")&&(r.sub_seq=e.sub_seq),null!=e.qos_flag&&e.hasOwnProperty("qos_flag")&&(r.qos_flag=e.qos_flag),null!=e.msg_id&&e.hasOwnProperty("msg_id")&&(r.msg_id=e.msg_id),null!=e.sender_id&&e.hasOwnProperty("sender_id")&&(r.sender_id=e.sender_id),null!=e.msg_body&&e.hasOwnProperty("msg_body")&&(r.msg_body=t.bytes===String?H.base64.encode(e.msg_body,0,e.msg_body.length):t.bytes===Array?Array.prototype.slice.call(e.msg_body):e.msg_body),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e}(),z.proto_biz_channel=function(){var e={};return e.req_header=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sdk_version=0,e.prototype.id_name="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.sdk_version&&Object.hasOwnProperty.call(e,"sdk_version")&&t.uint32(8).uint32(e.sdk_version),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).string(e.id_name),t},e}(),e.req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_header=null,e.prototype.body=H.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.req_header&&Object.hasOwnProperty.call(e,"req_header")&&z.proto_biz_channel.req_header.encode(e.req_header,t.uint32(10).fork()).ldelim(),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(18).bytes(e.body),t},e}(),e.rsp_header=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.seq=0,e.prototype.timestamp=H.Long?H.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_biz_channel.rsp_header;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.int32();break;case 2:o.seq=e.uint32();break;case 3:o.timestamp=e.int64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_biz_channel.rsp_header)return e;var t=new z.proto_biz_channel.rsp_header;return null!=e.code&&(t.code=0|e.code),null!=e.seq&&(t.seq=e.seq>>>0),null!=e.timestamp&&(H.Long?(t.timestamp=H.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.code=0,r.seq=0,H.Long){var o=new H.Long(0,0,!1);r.timestamp=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.timestamp=t.longs===String?"0":0;return null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),null!=e.seq&&e.hasOwnProperty("seq")&&(r.seq=e.seq),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?H.Long.prototype.toString.call(e.timestamp):t.longs===Number?new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.body=H.newBuffer([]),e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_biz_channel.rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.header=z.proto_biz_channel.rsp_header.decode(e,e.uint32());break;case 2:o.body=e.bytes();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_biz_channel.rsp)return e;var t=new z.proto_biz_channel.rsp;if(null!=e.header){if("object"!=typeof e.header)throw TypeError(".proto_biz_channel.rsp.header: object expected");t.header=z.proto_biz_channel.rsp_header.fromObject(e.header)}return null!=e.body&&("string"==typeof e.body?H.base64.decode(e.body,t.body=H.newBuffer(H.base64.length(e.body)),0):e.body.length&&(t.body=e.body)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.header=null,t.bytes===String?r.body="":(r.body=[],t.bytes!==Array&&(r.body=H.newBuffer(r.body)))),null!=e.header&&e.hasOwnProperty("header")&&(r.header=z.proto_biz_channel.rsp_header.toObject(e.header,t)),null!=e.body&&e.hasOwnProperty("body")&&(r.body=t.bytes===String?H.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e}(),z.proto_edu_v1_web=function(){var e={};return e.proto_sync=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),t},e}(),e.proto_create_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_title="",e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos="",e.prototype.mod_status=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_delete_flag=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.mod_scale="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(18).string(e.mod_title),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(24).uint32(e.mod_type),null!=e.mod_subtype&&Object.hasOwnProperty.call(e,"mod_subtype")&&t.uint32(32).uint32(e.mod_subtype),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(42).string(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(48).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(58).string(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(66).string(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(72).uint32(e.mod_reserve),null!=e.mod_delete_flag&&Object.hasOwnProperty.call(e,"mod_delete_flag")&&t.uint32(80).int32(e.mod_delete_flag),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(93).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(101).float(e.mod_vertical_percent),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(106).string(e.mod_scale),t},e}(),e.proto_destroy_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),t},e}(),e.proto_modify_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_seq=0,e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_title="",e.prototype.mod_pos="",e.prototype.mod_status=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.prototype.is_modify_mod_scale=!1,e.prototype.mod_scale="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.mod_seq&&Object.hasOwnProperty.call(e,"mod_seq")&&t.uint32(8).uint32(e.mod_seq),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(26).string(e.mod_title),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(34).string(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(40).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(50).string(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(58).string(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(64).uint32(e.mod_reserve),null!=e.is_modify_mod_title&&Object.hasOwnProperty.call(e,"is_modify_mod_title")&&t.uint32(72).bool(e.is_modify_mod_title),null!=e.is_modify_mod_pos&&Object.hasOwnProperty.call(e,"is_modify_mod_pos")&&t.uint32(80).bool(e.is_modify_mod_pos),null!=e.is_modify_mod_status&&Object.hasOwnProperty.call(e,"is_modify_mod_status")&&t.uint32(88).bool(e.is_modify_mod_status),null!=e.is_modify_mod_content&&Object.hasOwnProperty.call(e,"is_modify_mod_content")&&t.uint32(96).bool(e.is_modify_mod_content),null!=e.is_modify_mod_extra&&Object.hasOwnProperty.call(e,"is_modify_mod_extra")&&t.uint32(104).bool(e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&Object.hasOwnProperty.call(e,"is_modify_mod_reserve")&&t.uint32(112).bool(e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(125).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(133).float(e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_horizontal_percent")&&t.uint32(136).bool(e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_vertical_percent")&&t.uint32(144).bool(e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&Object.hasOwnProperty.call(e,"is_modify_mod_scale")&&t.uint32(152).bool(e.is_modify_mod_scale),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(162).string(e.mod_scale),t},e}(),e.proto_get_mod=function(){function e(e){if(this.mod_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id_list=H.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=j.create()),null!=e.mod_id_list&&e.mod_id_list.length)for(var r=0;r<e.mod_id_list.length;++r)t.uint32(10).string(e.mod_id_list[r]);return t},e}(),e.proto_get_mod_list=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_list_seq=0,e.prototype.limit=0,e.prototype.marker="",e.prototype.mod_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(8).uint32(e.mod_list_seq),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).uint32(e.limit),null!=e.marker&&Object.hasOwnProperty.call(e,"marker")&&t.uint32(26).string(e.marker),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(32).uint32(e.mod_type),t},e}(),e.proto_draw_page_graphics=function(){function e(e){if(this.draw_pages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.draw_pages=H.emptyArray,e.prototype.timestamp=H.Long?H.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=j.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.draw_pages&&e.draw_pages.length)for(var r=0;r<e.draw_pages.length;++r)z.proto_edu_v1_web.proto_draw_page.encode(e.draw_pages[r],t.uint32(18).fork()).ldelim();return null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint64(e.timestamp),t},e}(),e.proto_draw_page=function(){function e(e){if(this.draw_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.graphic_list_seq=0,e.prototype.draw_list=H.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=j.create()),null!=e.page&&Object.hasOwnProperty.call(e,"page")&&t.uint32(8).uint32(e.page),null!=e.graphic_list_seq&&Object.hasOwnProperty.call(e,"graphic_list_seq")&&t.uint32(16).uint32(e.graphic_list_seq),null!=e.draw_list&&e.draw_list.length)for(var r=0;r<e.draw_list.length;++r)z.proto_edu_v1_web.proto_draw.encode(e.draw_list[r],t.uint32(26).fork()).ldelim();return t},e}(),e.proto_draw=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.graphic_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.action=0,e.prototype.action_type=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.px=0,e.prototype.py=0,e.prototype.data=H.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes="",e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.layer=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),null!=e.graphic_id&&Object.hasOwnProperty.call(e,"graphic_id")&&t.uint32(8).uint64(e.graphic_id),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(16).int32(e.action),null!=e.action_type&&Object.hasOwnProperty.call(e,"action_type")&&t.uint32(24).int32(e.action_type),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(32).int32(e.type),null!=e.zorder&&Object.hasOwnProperty.call(e,"zorder")&&t.uint32(40).int32(e.zorder),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(48).int32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(56).int32(e.y),null!=e.px&&Object.hasOwnProperty.call(e,"px")&&t.uint32(64).int32(e.px),null!=e.py&&Object.hasOwnProperty.call(e,"py")&&t.uint32(72).int32(e.py),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(82).bytes(e.data),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(88).int32(e.size),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(96).uint32(e.color),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(104).int32(e.width),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(112).int32(e.height),null!=e.attributes&&Object.hasOwnProperty.call(e,"attributes")&&t.uint32(122).string(e.attributes),null!=e.operate_id&&Object.hasOwnProperty.call(e,"operate_id")&&t.uint32(130).string(e.operate_id),null!=e.is_end_draw&&Object.hasOwnProperty.call(e,"is_end_draw")&&t.uint32(136).bool(e.is_end_draw),null!=e.layer&&Object.hasOwnProperty.call(e,"layer")&&t.uint32(144).uint32(e.layer),t},e}(),e.proto_clear_page_graphics=function(){function e(e){if(this.layers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.timestamp=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.layers=H.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=j.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(16).uint64(e.timestamp),null!=e.layers&&e.layers.length){t.uint32(26).fork();for(var r=0;r<e.layers.length;++r)t.uint32(e.layers[r]);t.ldelim()}return t},e}(),e.proto_get_page_graphics=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.pages=H.emptyArray,e.prototype.graphic_list_seqs=H.emptyArray,e.prototype.limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=j.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.pages&&e.pages.length){t.uint32(18).fork();for(var r=0;r<e.pages.length;++r)t.uint32(e.pages[r]);t.ldelim()}if(null!=e.graphic_list_seqs&&e.graphic_list_seqs.length){t.uint32(26).fork();for(var o=0;o<e.graphic_list_seqs.length;++o)t.uint32(e.graphic_list_seqs[o]);t.ldelim()}return null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(32).uint32(e.limit),t},e}(),e.proto_get_user_auth_req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),t},e}(),e.proto_get_room_auth_req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=j.create()),t},e}(),e.proto_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_title="",e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos="",e.prototype.mod_status=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_create_time=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.graphic_list_seq=0,e.prototype.sync_interval=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.mod_scale="",e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.mod_seq=e.uint32();break;case 3:o.mod_title=e.string();break;case 4:o.mod_type=e.uint32();break;case 5:o.mod_subtype=e.uint32();break;case 6:o.mod_pos=e.string();break;case 7:o.mod_status=e.uint64();break;case 8:o.mod_content=e.string();break;case 9:o.mod_extra=e.string();break;case 10:o.mod_reserve=e.uint32();break;case 11:o.mod_create_time=e.int64();break;case 12:o.graphic_list_seq=e.uint32();break;case 13:o.sync_interval=e.uint32();break;case 14:o.mod_horizontal_percent=e.float();break;case 15:o.mod_vertical_percent=e.float();break;case 16:o.mod_scale=e.string();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_mod)return e;var t=new z.proto_edu_v1_web.proto_mod;return null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_title&&(t.mod_title=String(e.mod_title)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),null!=e.mod_subtype&&(t.mod_subtype=e.mod_subtype>>>0),null!=e.mod_pos&&(t.mod_pos=String(e.mod_pos)),null!=e.mod_status&&(H.Long?(t.mod_status=H.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new H.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&(t.mod_content=String(e.mod_content)),null!=e.mod_extra&&(t.mod_extra=String(e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.mod_create_time&&(H.Long?(t.mod_create_time=H.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new H.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),null!=e.graphic_list_seq&&(t.graphic_list_seq=e.graphic_list_seq>>>0),null!=e.sync_interval&&(t.sync_interval=e.sync_interval>>>0),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.mod_scale&&(t.mod_scale=String(e.mod_scale)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.mod_seq=0,r.mod_title="",r.mod_type=0,r.mod_subtype=0,r.mod_pos="",H.Long){var n=new H.Long(0,0,!0);r.mod_status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_status=t.longs===String?"0":0;if(r.mod_content="",r.mod_extra="",r.mod_reserve=0,H.Long){var i=new H.Long(0,0,!1);r.mod_create_time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.mod_create_time=t.longs===String?"0":0;r.graphic_list_seq=0,r.sync_interval=0,r.mod_horizontal_percent=0,r.mod_vertical_percent=0,r.mod_scale=""}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(r.mod_title=e.mod_title),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),null!=e.mod_subtype&&e.hasOwnProperty("mod_subtype")&&(r.mod_subtype=e.mod_subtype),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(r.mod_pos=e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?r.mod_status=t.longs===String?String(e.mod_status):e.mod_status:r.mod_status=t.longs===String?H.Long.prototype.toString.call(e.mod_status):t.longs===Number?new H.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(r.mod_content=e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(r.mod_extra=e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(r.mod_reserve=e.mod_reserve),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?r.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:r.mod_create_time=t.longs===String?H.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new H.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),null!=e.graphic_list_seq&&e.hasOwnProperty("graphic_list_seq")&&(r.graphic_list_seq=e.graphic_list_seq),null!=e.sync_interval&&e.hasOwnProperty("sync_interval")&&(r.sync_interval=e.sync_interval),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(r.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(r.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(r.mod_scale=e.mod_scale),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_graphic=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.nick_name="",e.prototype.graphic_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.data=H.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.timestamp=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes="",e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.server_timestamp=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.creator_id="",e.prototype.layer=0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_graphic;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.string();break;case 2:o.nick_name=e.string();break;case 3:o.graphic_id=e.uint64();break;case 4:o.action_seq=e.uint32();break;case 5:o.type=e.int32();break;case 7:o.zorder=e.int32();break;case 8:o.x=e.int32();break;case 9:o.y=e.int32();break;case 10:o.data=e.bytes();break;case 11:o.size=e.int32();break;case 12:o.color=e.uint32();break;case 13:o.timestamp=e.uint64();break;case 14:o.width=e.int32();break;case 15:o.height=e.int32();break;case 16:o.attributes=e.string();break;case 17:o.operate_id=e.string();break;case 18:o.is_end_draw=e.bool();break;case 19:o.server_timestamp=e.uint64();break;case 20:o.creator_id=e.string();break;case 21:o.layer=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_graphic)return e;var t=new z.proto_edu_v1_web.proto_graphic;return null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.graphic_id&&(H.Long?(t.graphic_id=H.Long.fromValue(e.graphic_id)).unsigned=!0:"string"==typeof e.graphic_id?t.graphic_id=parseInt(e.graphic_id,10):"number"==typeof e.graphic_id?t.graphic_id=e.graphic_id:"object"==typeof e.graphic_id&&(t.graphic_id=new H.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0))),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),null!=e.type&&(t.type=0|e.type),null!=e.zorder&&(t.zorder=0|e.zorder),null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.data&&("string"==typeof e.data?H.base64.decode(e.data,t.data=H.newBuffer(H.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.size&&(t.size=0|e.size),null!=e.color&&(t.color=e.color>>>0),null!=e.timestamp&&(H.Long?(t.timestamp=H.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),null!=e.width&&(t.width=0|e.width),null!=e.height&&(t.height=0|e.height),null!=e.attributes&&(t.attributes=String(e.attributes)),null!=e.operate_id&&(t.operate_id=String(e.operate_id)),null!=e.is_end_draw&&(t.is_end_draw=Boolean(e.is_end_draw)),null!=e.server_timestamp&&(H.Long?(t.server_timestamp=H.Long.fromValue(e.server_timestamp)).unsigned=!0:"string"==typeof e.server_timestamp?t.server_timestamp=parseInt(e.server_timestamp,10):"number"==typeof e.server_timestamp?t.server_timestamp=e.server_timestamp:"object"==typeof e.server_timestamp&&(t.server_timestamp=new H.LongBits(e.server_timestamp.low>>>0,e.server_timestamp.high>>>0).toNumber(!0))),null!=e.creator_id&&(t.creator_id=String(e.creator_id)),null!=e.layer&&(t.layer=e.layer>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.id_name="",r.nick_name="",H.Long){var o=new H.Long(0,0,!0);r.graphic_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.graphic_id=t.longs===String?"0":0;if(r.action_seq=0,r.type=0,r.zorder=0,r.x=0,r.y=0,t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=H.newBuffer(r.data))),r.size=0,r.color=0,H.Long){var n=new H.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0;if(r.width=0,r.height=0,r.attributes="",r.operate_id="",r.is_end_draw=!1,H.Long){var i=new H.Long(0,0,!0);r.server_timestamp=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.server_timestamp=t.longs===String?"0":0;r.creator_id="",r.layer=0}return null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=e.nick_name),null!=e.graphic_id&&e.hasOwnProperty("graphic_id")&&("number"==typeof e.graphic_id?r.graphic_id=t.longs===String?String(e.graphic_id):e.graphic_id:r.graphic_id=t.longs===String?H.Long.prototype.toString.call(e.graphic_id):t.longs===Number?new H.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0):e.graphic_id),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(r.action_seq=e.action_seq),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.zorder&&e.hasOwnProperty("zorder")&&(r.zorder=e.zorder),null!=e.x&&e.hasOwnProperty("x")&&(r.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(r.y=e.y),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?H.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.size&&e.hasOwnProperty("size")&&(r.size=e.size),null!=e.color&&e.hasOwnProperty("color")&&(r.color=e.color),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?H.Long.prototype.toString.call(e.timestamp):t.longs===Number?new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),null!=e.width&&e.hasOwnProperty("width")&&(r.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(r.height=e.height),null!=e.attributes&&e.hasOwnProperty("attributes")&&(r.attributes=e.attributes),null!=e.operate_id&&e.hasOwnProperty("operate_id")&&(r.operate_id=e.operate_id),null!=e.is_end_draw&&e.hasOwnProperty("is_end_draw")&&(r.is_end_draw=e.is_end_draw),null!=e.server_timestamp&&e.hasOwnProperty("server_timestamp")&&("number"==typeof e.server_timestamp?r.server_timestamp=t.longs===String?String(e.server_timestamp):e.server_timestamp:r.server_timestamp=t.longs===String?H.Long.prototype.toString.call(e.server_timestamp):t.longs===Number?new H.LongBits(e.server_timestamp.low>>>0,e.server_timestamp.high>>>0).toNumber(!0):e.server_timestamp),null!=e.creator_id&&e.hasOwnProperty("creator_id")&&(r.creator_id=e.creator_id),null!=e.layer&&e.hasOwnProperty("layer")&&(r.layer=e.layer),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_sync_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sync_interval=0,e.prototype.room_extra_info_seq=0,e.prototype.user_list_seq=0,e.prototype.user_extra_info_seq=0,e.prototype.joinlive_seq=0,e.prototype.mod_list_seq=0,e.prototype.user_auth_seq=0,e.prototype.room_auth_seq=0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_sync_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.sync_interval=e.uint32();break;case 2:o.room_extra_info_seq=e.uint32();break;case 3:o.user_list_seq=e.uint32();break;case 4:o.user_extra_info_seq=e.uint32();break;case 5:o.joinlive_seq=e.uint32();break;case 6:o.mod_list_seq=e.uint32();break;case 7:o.user_auth_seq=e.uint32();break;case 8:o.room_auth_seq=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_sync_rsp)return e;var t=new z.proto_edu_v1_web.proto_sync_rsp;return null!=e.sync_interval&&(t.sync_interval=e.sync_interval>>>0),null!=e.room_extra_info_seq&&(t.room_extra_info_seq=e.room_extra_info_seq>>>0),null!=e.user_list_seq&&(t.user_list_seq=e.user_list_seq>>>0),null!=e.user_extra_info_seq&&(t.user_extra_info_seq=e.user_extra_info_seq>>>0),null!=e.joinlive_seq&&(t.joinlive_seq=e.joinlive_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.user_auth_seq&&(t.user_auth_seq=e.user_auth_seq>>>0),null!=e.room_auth_seq&&(t.room_auth_seq=e.room_auth_seq>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.sync_interval=0,r.room_extra_info_seq=0,r.user_list_seq=0,r.user_extra_info_seq=0,r.joinlive_seq=0,r.mod_list_seq=0,r.user_auth_seq=0,r.room_auth_seq=0),null!=e.sync_interval&&e.hasOwnProperty("sync_interval")&&(r.sync_interval=e.sync_interval),null!=e.room_extra_info_seq&&e.hasOwnProperty("room_extra_info_seq")&&(r.room_extra_info_seq=e.room_extra_info_seq),null!=e.user_list_seq&&e.hasOwnProperty("user_list_seq")&&(r.user_list_seq=e.user_list_seq),null!=e.user_extra_info_seq&&e.hasOwnProperty("user_extra_info_seq")&&(r.user_extra_info_seq=e.user_extra_info_seq),null!=e.joinlive_seq&&e.hasOwnProperty("joinlive_seq")&&(r.joinlive_seq=e.joinlive_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),null!=e.user_auth_seq&&e.hasOwnProperty("user_auth_seq")&&(r.user_auth_seq=e.user_auth_seq),null!=e.room_auth_seq&&e.hasOwnProperty("room_auth_seq")&&(r.room_auth_seq=e.room_auth_seq),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_create_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.prototype.mod_create_time=H.Long?H.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_create_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.mod_seq=e.uint32();break;case 3:o.mod_list_seq=e.uint32();break;case 4:o.mod_create_time=e.int64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_create_mod_rsp)return e;var t=new z.proto_edu_v1_web.proto_create_mod_rsp;return null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.mod_create_time&&(H.Long?(t.mod_create_time=H.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new H.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.mod_seq=0,r.mod_list_seq=0,H.Long){var n=new H.Long(0,0,!1);r.mod_create_time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_create_time=t.longs===String?"0":0}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?r.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:r.mod_create_time=t.longs===String?H.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new H.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_destroy_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_list_seq=0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_destroy_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.mod_list_seq=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_destroy_mod_rsp)return e;var t=new z.proto_edu_v1_web.proto_destroy_mod_rsp;return null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;r.mod_list_seq=0}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_modify_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_modify_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.mod_seq=e.uint32();break;case 3:o.mod_list_seq=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_modify_mod_rsp)return e;var t=new z.proto_edu_v1_web.proto_modify_mod_rsp;return null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;r.mod_seq=0,r.mod_list_seq=0}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_mod_rsp=function(){function e(e){if(this.mod_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_list=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_get_mod_rsp;e.pos<r;){var n=e.uint32();n>>>3===1?(o.mod_list&&o.mod_list.length||(o.mod_list=[]),o.mod_list.push(z.proto_edu_v1_web.proto_mod.decode(e,e.uint32()))):e.skipType(7&n)}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_get_mod_rsp)return e;var t=new z.proto_edu_v1_web.proto_get_mod_rsp;if(e.mod_list){if(!Array.isArray(e.mod_list))throw TypeError(".proto_edu_v1_web.proto_get_mod_rsp.mod_list: array expected");t.mod_list=[];for(var r=0;r<e.mod_list.length;++r){if("object"!=typeof e.mod_list[r])throw TypeError(".proto_edu_v1_web.proto_get_mod_rsp.mod_list: object expected");t.mod_list[r]=z.proto_edu_v1_web.proto_mod.fromObject(e.mod_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.mod_list=[]),e.mod_list&&e.mod_list.length){r.mod_list=[];for(var o=0;o<e.mod_list.length;++o)r.mod_list[o]=z.proto_edu_v1_web.proto_mod.toObject(e.mod_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_mod_list_rsp=function(){function e(e){if(this.mod_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_list_seq=0,e.prototype.marker="",e.prototype.mod_type=0,e.prototype.mod_list=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_get_mod_list_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_list_seq=e.uint32();break;case 2:o.marker=e.string();break;case 3:o.mod_type=e.uint32();break;case 4:o.mod_list&&o.mod_list.length||(o.mod_list=[]),o.mod_list.push(z.proto_edu_v1_web.proto_mod.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_get_mod_list_rsp)return e;var t=new z.proto_edu_v1_web.proto_get_mod_list_rsp;if(null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.marker&&(t.marker=String(e.marker)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),e.mod_list){if(!Array.isArray(e.mod_list))throw TypeError(".proto_edu_v1_web.proto_get_mod_list_rsp.mod_list: array expected");t.mod_list=[];for(var r=0;r<e.mod_list.length;++r){if("object"!=typeof e.mod_list[r])throw TypeError(".proto_edu_v1_web.proto_get_mod_list_rsp.mod_list: object expected");t.mod_list[r]=z.proto_edu_v1_web.proto_mod.fromObject(e.mod_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.mod_list=[]),t.defaults&&(r.mod_list_seq=0,r.marker="",r.mod_type=0),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),null!=e.marker&&e.hasOwnProperty("marker")&&(r.marker=e.marker),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),e.mod_list&&e.mod_list.length){r.mod_list=[];for(var o=0;o<e.mod_list.length;++o)r.mod_list[o]=z.proto_edu_v1_web.proto_mod.toObject(e.mod_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_draw_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.pages=H.emptyArray,e.prototype.graphic_list_seqs=H.emptyArray,e.prototype.commit_time=H.Long?H.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_draw_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:if(o.pages&&o.pages.length||(o.pages=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.pages.push(e.uint32());else o.pages.push(e.uint32());break;case 3:if(o.graphic_list_seqs&&o.graphic_list_seqs.length||(o.graphic_list_seqs=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_list_seqs.push(e.uint32());else o.graphic_list_seqs.push(e.uint32());break;case 4:o.commit_time=e.int64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_draw_page_graphics_rsp)return e;var t=new z.proto_edu_v1_web.proto_draw_page_graphics_rsp;if(null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.proto_draw_page_graphics_rsp.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r)t.pages[r]=e.pages[r]>>>0}if(e.graphic_list_seqs){if(!Array.isArray(e.graphic_list_seqs))throw TypeError(".proto_edu_v1_web.proto_draw_page_graphics_rsp.graphic_list_seqs: array expected");t.graphic_list_seqs=[];for(var o=0;o<e.graphic_list_seqs.length;++o)t.graphic_list_seqs[o]=e.graphic_list_seqs[o]>>>0}return null!=e.commit_time&&(H.Long?(t.commit_time=H.Long.fromValue(e.commit_time)).unsigned=!1:"string"==typeof e.commit_time?t.commit_time=parseInt(e.commit_time,10):"number"==typeof e.commit_time?t.commit_time=e.commit_time:"object"==typeof e.commit_time&&(t.commit_time=new H.LongBits(e.commit_time.low>>>0,e.commit_time.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[],r.graphic_list_seqs=[]),t.defaults){if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(H.Long){var n=new H.Long(0,0,!1);r.commit_time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.commit_time=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){r.pages=[];for(var i=0;i<e.pages.length;++i)r.pages[i]=e.pages[i]}if(e.graphic_list_seqs&&e.graphic_list_seqs.length){r.graphic_list_seqs=[];for(var s=0;s<e.graphic_list_seqs.length;++s)r.graphic_list_seqs[s]=e.graphic_list_seqs[s]}return null!=e.commit_time&&e.hasOwnProperty("commit_time")&&("number"==typeof e.commit_time?r.commit_time=t.longs===String?String(e.commit_time):e.commit_time:r.commit_time=t.longs===String?H.Long.prototype.toString.call(e.commit_time):t.longs===Number?new H.LongBits(e.commit_time.low>>>0,e.commit_time.high>>>0).toNumber():e.commit_time),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_clear_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.pages=H.emptyArray,e.prototype.graphic_list_seqs=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_clear_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:if(o.pages&&o.pages.length||(o.pages=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.pages.push(e.uint32());else o.pages.push(e.uint32());break;case 3:if(o.graphic_list_seqs&&o.graphic_list_seqs.length||(o.graphic_list_seqs=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_list_seqs.push(e.uint32());else o.graphic_list_seqs.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_clear_page_graphics_rsp)return e;var t=new z.proto_edu_v1_web.proto_clear_page_graphics_rsp;if(null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.proto_clear_page_graphics_rsp.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r)t.pages[r]=e.pages[r]>>>0}if(e.graphic_list_seqs){if(!Array.isArray(e.graphic_list_seqs))throw TypeError(".proto_edu_v1_web.proto_clear_page_graphics_rsp.graphic_list_seqs: array expected");t.graphic_list_seqs=[];for(var o=0;o<e.graphic_list_seqs.length;++o)t.graphic_list_seqs[o]=e.graphic_list_seqs[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[],r.graphic_list_seqs=[]),t.defaults)if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){r.pages=[];for(var n=0;n<e.pages.length;++n)r.pages[n]=e.pages[n]}if(e.graphic_list_seqs&&e.graphic_list_seqs.length){r.graphic_list_seqs=[];for(var i=0;i<e.graphic_list_seqs.length;++i)r.graphic_list_seqs[i]=e.graphic_list_seqs[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_page_graphics_rsp=function(){function e(e){if(this.pages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.pages=H.emptyArray,e.prototype.operate_expire_time=H.Long?H.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_get_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.pages&&o.pages.length||(o.pages=[]),o.pages.push(z.proto_edu_v1_web.proto_get_page_graphics_info.decode(e,e.uint32()));break;case 2:o.operate_expire_time=e.uint64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_get_page_graphics_rsp)return e;var t=new z.proto_edu_v1_web.proto_get_page_graphics_rsp;if(e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_rsp.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r){if("object"!=typeof e.pages[r])throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_rsp.pages: object expected");t.pages[r]=z.proto_edu_v1_web.proto_get_page_graphics_info.fromObject(e.pages[r])}}return null!=e.operate_expire_time&&(H.Long?(t.operate_expire_time=H.Long.fromValue(e.operate_expire_time)).unsigned=!0:"string"==typeof e.operate_expire_time?t.operate_expire_time=parseInt(e.operate_expire_time,10):"number"==typeof e.operate_expire_time?t.operate_expire_time=e.operate_expire_time:"object"==typeof e.operate_expire_time&&(t.operate_expire_time=new H.LongBits(e.operate_expire_time.low>>>0,e.operate_expire_time.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[]),t.defaults)if(H.Long){var o=new H.Long(0,0,!0);r.operate_expire_time=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.operate_expire_time=t.longs===String?"0":0;if(e.pages&&e.pages.length){r.pages=[];for(var n=0;n<e.pages.length;++n)r.pages[n]=z.proto_edu_v1_web.proto_get_page_graphics_info.toObject(e.pages[n],t)}return null!=e.operate_expire_time&&e.hasOwnProperty("operate_expire_time")&&("number"==typeof e.operate_expire_time?r.operate_expire_time=t.longs===String?String(e.operate_expire_time):e.operate_expire_time:r.operate_expire_time=t.longs===String?H.Long.prototype.toString.call(e.operate_expire_time):t.longs===Number?new H.LongBits(e.operate_expire_time.low>>>0,e.operate_expire_time.high>>>0).toNumber(!0):e.operate_expire_time),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_page_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.ret_graphic_list_seq=0,e.prototype.svr_graphic_list_seq=0,e.prototype.graphic_list=H.emptyArray,e.prototype.del_graphic_id_list=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_get_page_graphics_info;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.page=e.uint32();break;case 2:o.ret_graphic_list_seq=e.uint32();break;case 3:o.svr_graphic_list_seq=e.uint32();break;case 4:o.graphic_list&&o.graphic_list.length||(o.graphic_list=[]),o.graphic_list.push(z.proto_edu_v1_web.proto_graphic.decode(e,e.uint32()));break;case 5:if(o.del_graphic_id_list&&o.del_graphic_id_list.length||(o.del_graphic_id_list=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.del_graphic_id_list.push(e.uint64());else o.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_get_page_graphics_info)return e;var t=new z.proto_edu_v1_web.proto_get_page_graphics_info;if(null!=e.page&&(t.page=e.page>>>0),null!=e.ret_graphic_list_seq&&(t.ret_graphic_list_seq=e.ret_graphic_list_seq>>>0),null!=e.svr_graphic_list_seq&&(t.svr_graphic_list_seq=e.svr_graphic_list_seq>>>0),e.graphic_list){if(!Array.isArray(e.graphic_list))throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.graphic_list: array expected");t.graphic_list=[];for(var r=0;r<e.graphic_list.length;++r){if("object"!=typeof e.graphic_list[r])throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.graphic_list: object expected");t.graphic_list[r]=z.proto_edu_v1_web.proto_graphic.fromObject(e.graphic_list[r])}}if(e.del_graphic_id_list){if(!Array.isArray(e.del_graphic_id_list))throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.del_graphic_id_list: array expected");t.del_graphic_id_list=[];for(var o=0;o<e.del_graphic_id_list.length;++o)H.Long?(t.del_graphic_id_list[o]=H.Long.fromValue(e.del_graphic_id_list[o])).unsigned=!0:"string"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=parseInt(e.del_graphic_id_list[o],10):"number"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=e.del_graphic_id_list[o]:"object"==typeof e.del_graphic_id_list[o]&&(t.del_graphic_id_list[o]=new H.LongBits(e.del_graphic_id_list[o].low>>>0,e.del_graphic_id_list[o].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.graphic_list=[],r.del_graphic_id_list=[]),t.defaults&&(r.page=0,r.ret_graphic_list_seq=0,r.svr_graphic_list_seq=0),null!=e.page&&e.hasOwnProperty("page")&&(r.page=e.page),null!=e.ret_graphic_list_seq&&e.hasOwnProperty("ret_graphic_list_seq")&&(r.ret_graphic_list_seq=e.ret_graphic_list_seq),null!=e.svr_graphic_list_seq&&e.hasOwnProperty("svr_graphic_list_seq")&&(r.svr_graphic_list_seq=e.svr_graphic_list_seq),e.graphic_list&&e.graphic_list.length){r.graphic_list=[];for(var o=0;o<e.graphic_list.length;++o)r.graphic_list[o]=z.proto_edu_v1_web.proto_graphic.toObject(e.graphic_list[o],t)}if(e.del_graphic_id_list&&e.del_graphic_id_list.length){r.del_graphic_id_list=[];for(var n=0;n<e.del_graphic_id_list.length;++n)"number"==typeof e.del_graphic_id_list[n]?r.del_graphic_id_list[n]=t.longs===String?String(e.del_graphic_id_list[n]):e.del_graphic_id_list[n]:r.del_graphic_id_list[n]=t.longs===String?H.Long.prototype.toString.call(e.del_graphic_id_list[n]):t.longs===Number?new H.LongBits(e.del_graphic_id_list[n].low>>>0,e.del_graphic_id_list[n].high>>>0).toNumber(!0):e.del_graphic_id_list[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_user_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.auth_seq=0,e.prototype.module_auth=H.emptyArray,e.prototype.graphic_auth=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_get_user_auth_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.string();break;case 2:o.auth_seq=e.uint32();break;case 3:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 4:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_get_user_auth_rsp)return e;var t=new z.proto_edu_v1_web.proto_get_user_auth_rsp;if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.proto_get_user_auth_rsp.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.proto_get_user_auth_rsp.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.id_name="",r.auth_seq=0),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_room_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.auth_seq=0,e.prototype.module_auth=H.emptyArray,e.prototype.graphic_auth=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.proto_get_room_auth_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.auth_seq=e.uint32();break;case 2:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 3:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.proto_get_room_auth_rsp)return e;var t=new z.proto_edu_v1_web.proto_get_room_auth_rsp;if(null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.proto_get_room_auth_rsp.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.proto_get_room_auth_rsp.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.auth_seq=0),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_set_mod=function(){function e(e){if(this.action_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.mod_list_seq=0,e.prototype.action_list=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_set_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.mod_list_seq=e.uint32();break;case 3:o.action_list&&o.action_list.length||(o.action_list=[]),o.action_list.push(z.proto_edu_v1_web.push_set_mod_action.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_set_mod)return e;var t=new z.proto_edu_v1_web.push_set_mod;if(null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),e.action_list){if(!Array.isArray(e.action_list))throw TypeError(".proto_edu_v1_web.push_set_mod.action_list: array expected");t.action_list=[];for(var r=0;r<e.action_list.length;++r){if("object"!=typeof e.action_list[r])throw TypeError(".proto_edu_v1_web.push_set_mod.action_list: object expected");t.action_list[r]=z.proto_edu_v1_web.push_set_mod_action.fromObject(e.action_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.action_list=[]),t.defaults&&(r.room_id="",r.mod_list_seq=0),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),e.action_list&&e.action_list.length){r.action_list=[];for(var o=0;o<e.action_list.length;++o)r.action_list[o]=z.proto_edu_v1_web.push_set_mod_action.toObject(e.action_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_set_mod_action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.action=0,e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_seq=0,e.prototype.mod_title="",e.prototype.mod_pos="",e.prototype.mod_status=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_create_time=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.prototype.is_modify_mod_scale=!1,e.prototype.mod_scale="",e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_set_mod_action;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.action=e.uint32();break;case 2:o.mod_id=e.uint64();break;case 3:o.mod_type=e.uint32();break;case 4:o.mod_subtype=e.uint32();break;case 5:o.mod_seq=e.uint32();break;case 6:o.mod_title=e.string();break;case 7:o.mod_pos=e.string();break;case 8:o.mod_status=e.uint64();break;case 9:o.mod_content=e.string();break;case 10:o.mod_extra=e.string();break;case 11:o.mod_reserve=e.uint32();break;case 12:o.mod_create_time=e.int64();break;case 13:o.is_modify_mod_title=e.bool();break;case 14:o.is_modify_mod_pos=e.bool();break;case 15:o.is_modify_mod_status=e.bool();break;case 16:o.is_modify_mod_content=e.bool();break;case 17:o.is_modify_mod_extra=e.bool();break;case 18:o.is_modify_mod_reserve=e.bool();break;case 19:o.mod_horizontal_percent=e.float();break;case 20:o.mod_vertical_percent=e.float();break;case 21:o.is_modify_mod_horizontal_percent=e.bool();break;case 22:o.is_modify_mod_vertical_percent=e.bool();break;case 23:o.is_modify_mod_scale=e.bool();break;case 24:o.mod_scale=e.string();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_set_mod_action)return e;var t=new z.proto_edu_v1_web.push_set_mod_action;return null!=e.action&&(t.action=e.action>>>0),null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),null!=e.mod_subtype&&(t.mod_subtype=e.mod_subtype>>>0),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_title&&(t.mod_title=String(e.mod_title)),null!=e.mod_pos&&(t.mod_pos=String(e.mod_pos)),null!=e.mod_status&&(H.Long?(t.mod_status=H.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new H.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&(t.mod_content=String(e.mod_content)),null!=e.mod_extra&&(t.mod_extra=String(e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.mod_create_time&&(H.Long?(t.mod_create_time=H.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new H.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),null!=e.is_modify_mod_title&&(t.is_modify_mod_title=Boolean(e.is_modify_mod_title)),null!=e.is_modify_mod_pos&&(t.is_modify_mod_pos=Boolean(e.is_modify_mod_pos)),null!=e.is_modify_mod_status&&(t.is_modify_mod_status=Boolean(e.is_modify_mod_status)),null!=e.is_modify_mod_content&&(t.is_modify_mod_content=Boolean(e.is_modify_mod_content)),null!=e.is_modify_mod_extra&&(t.is_modify_mod_extra=Boolean(e.is_modify_mod_extra)),null!=e.is_modify_mod_reserve&&(t.is_modify_mod_reserve=Boolean(e.is_modify_mod_reserve)),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.is_modify_mod_horizontal_percent&&(t.is_modify_mod_horizontal_percent=Boolean(e.is_modify_mod_horizontal_percent)),null!=e.is_modify_mod_vertical_percent&&(t.is_modify_mod_vertical_percent=Boolean(e.is_modify_mod_vertical_percent)),null!=e.is_modify_mod_scale&&(t.is_modify_mod_scale=Boolean(e.is_modify_mod_scale)),null!=e.mod_scale&&(t.mod_scale=String(e.mod_scale)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.action=0,H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.mod_type=0,r.mod_subtype=0,r.mod_seq=0,r.mod_title="",r.mod_pos="",H.Long){var n=new H.Long(0,0,!0);r.mod_status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_status=t.longs===String?"0":0;if(r.mod_content="",r.mod_extra="",r.mod_reserve=0,H.Long){var i=new H.Long(0,0,!1);r.mod_create_time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.mod_create_time=t.longs===String?"0":0;r.is_modify_mod_title=!1,r.is_modify_mod_pos=!1,r.is_modify_mod_status=!1,r.is_modify_mod_content=!1,r.is_modify_mod_extra=!1,r.is_modify_mod_reserve=!1,r.mod_horizontal_percent=0,r.mod_vertical_percent=0,r.is_modify_mod_horizontal_percent=!1,r.is_modify_mod_vertical_percent=!1,r.is_modify_mod_scale=!1,r.mod_scale=""}return null!=e.action&&e.hasOwnProperty("action")&&(r.action=e.action),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),null!=e.mod_subtype&&e.hasOwnProperty("mod_subtype")&&(r.mod_subtype=e.mod_subtype),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(r.mod_title=e.mod_title),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(r.mod_pos=e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?r.mod_status=t.longs===String?String(e.mod_status):e.mod_status:r.mod_status=t.longs===String?H.Long.prototype.toString.call(e.mod_status):t.longs===Number?new H.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(r.mod_content=e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(r.mod_extra=e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(r.mod_reserve=e.mod_reserve),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?r.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:r.mod_create_time=t.longs===String?H.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new H.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),null!=e.is_modify_mod_title&&e.hasOwnProperty("is_modify_mod_title")&&(r.is_modify_mod_title=e.is_modify_mod_title),null!=e.is_modify_mod_pos&&e.hasOwnProperty("is_modify_mod_pos")&&(r.is_modify_mod_pos=e.is_modify_mod_pos),null!=e.is_modify_mod_status&&e.hasOwnProperty("is_modify_mod_status")&&(r.is_modify_mod_status=e.is_modify_mod_status),null!=e.is_modify_mod_content&&e.hasOwnProperty("is_modify_mod_content")&&(r.is_modify_mod_content=e.is_modify_mod_content),null!=e.is_modify_mod_extra&&e.hasOwnProperty("is_modify_mod_extra")&&(r.is_modify_mod_extra=e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&e.hasOwnProperty("is_modify_mod_reserve")&&(r.is_modify_mod_reserve=e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(r.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(r.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&e.hasOwnProperty("is_modify_mod_horizontal_percent")&&(r.is_modify_mod_horizontal_percent=e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&e.hasOwnProperty("is_modify_mod_vertical_percent")&&(r.is_modify_mod_vertical_percent=e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&e.hasOwnProperty("is_modify_mod_scale")&&(r.is_modify_mod_scale=e.is_modify_mod_scale),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(r.mod_scale=e.mod_scale),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_draw_page_graphics=function(){function e(e){if(this.page_graphics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.page_graphics=H.emptyArray,e.prototype.timestamp=H.Long?H.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_draw_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.page_graphics&&o.page_graphics.length||(o.page_graphics=[]),o.page_graphics.push(z.proto_edu_v1_web.push_draw_graphics_info.decode(e,e.uint32()));break;case 3:o.timestamp=e.uint64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_draw_page_graphics)return e;var t=new z.proto_edu_v1_web.push_draw_page_graphics;if(null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.page_graphics){if(!Array.isArray(e.page_graphics))throw TypeError(".proto_edu_v1_web.push_draw_page_graphics.page_graphics: array expected");t.page_graphics=[];for(var r=0;r<e.page_graphics.length;++r){if("object"!=typeof e.page_graphics[r])throw TypeError(".proto_edu_v1_web.push_draw_page_graphics.page_graphics: object expected");t.page_graphics[r]=z.proto_edu_v1_web.push_draw_graphics_info.fromObject(e.page_graphics[r])}}return null!=e.timestamp&&(H.Long?(t.timestamp=H.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.page_graphics=[]),t.defaults){if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(H.Long){var n=new H.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.page_graphics&&e.page_graphics.length){r.page_graphics=[];for(var i=0;i<e.page_graphics.length;++i)r.page_graphics[i]=z.proto_edu_v1_web.push_draw_graphics_info.toObject(e.page_graphics[i],t)}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?H.Long.prototype.toString.call(e.timestamp):t.longs===Number?new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_draw_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.action_seq=0,e.prototype.graphic_list=H.emptyArray,e.prototype.del_graphic_id_list=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_draw_graphics_info;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.page=e.uint32();break;case 2:o.action_seq=e.uint32();break;case 3:o.graphic_list&&o.graphic_list.length||(o.graphic_list=[]),o.graphic_list.push(z.proto_edu_v1_web.proto_graphic.decode(e,e.uint32()));break;case 4:if(o.del_graphic_id_list&&o.del_graphic_id_list.length||(o.del_graphic_id_list=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.del_graphic_id_list.push(e.uint64());else o.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_draw_graphics_info)return e;var t=new z.proto_edu_v1_web.push_draw_graphics_info;if(null!=e.page&&(t.page=e.page>>>0),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),e.graphic_list){if(!Array.isArray(e.graphic_list))throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.graphic_list: array expected");t.graphic_list=[];for(var r=0;r<e.graphic_list.length;++r){if("object"!=typeof e.graphic_list[r])throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.graphic_list: object expected");t.graphic_list[r]=z.proto_edu_v1_web.proto_graphic.fromObject(e.graphic_list[r])}}if(e.del_graphic_id_list){if(!Array.isArray(e.del_graphic_id_list))throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.del_graphic_id_list: array expected");t.del_graphic_id_list=[];for(var o=0;o<e.del_graphic_id_list.length;++o)H.Long?(t.del_graphic_id_list[o]=H.Long.fromValue(e.del_graphic_id_list[o])).unsigned=!0:"string"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=parseInt(e.del_graphic_id_list[o],10):"number"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=e.del_graphic_id_list[o]:"object"==typeof e.del_graphic_id_list[o]&&(t.del_graphic_id_list[o]=new H.LongBits(e.del_graphic_id_list[o].low>>>0,e.del_graphic_id_list[o].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.graphic_list=[],r.del_graphic_id_list=[]),t.defaults&&(r.page=0,r.action_seq=0),null!=e.page&&e.hasOwnProperty("page")&&(r.page=e.page),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(r.action_seq=e.action_seq),e.graphic_list&&e.graphic_list.length){r.graphic_list=[];for(var o=0;o<e.graphic_list.length;++o)r.graphic_list[o]=z.proto_edu_v1_web.proto_graphic.toObject(e.graphic_list[o],t)}if(e.del_graphic_id_list&&e.del_graphic_id_list.length){r.del_graphic_id_list=[];for(var n=0;n<e.del_graphic_id_list.length;++n)"number"==typeof e.del_graphic_id_list[n]?r.del_graphic_id_list[n]=t.longs===String?String(e.del_graphic_id_list[n]):e.del_graphic_id_list[n]:r.del_graphic_id_list[n]=t.longs===String?H.Long.prototype.toString.call(e.del_graphic_id_list[n]):t.longs===Number?new H.LongBits(e.del_graphic_id_list[n].low>>>0,e.del_graphic_id_list[n].high>>>0).toNumber(!0):e.del_graphic_id_list[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_clear_page_graphics=function(){function e(e){if(this.pages=[],this.action_seqs=[],this.layers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.pages=H.emptyArray,e.prototype.action_seqs=H.emptyArray,e.prototype.id_name="",e.prototype.nick_name="",e.prototype.timestamp=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.layers=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_clear_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:if(o.pages&&o.pages.length||(o.pages=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.pages.push(e.uint32());else o.pages.push(e.uint32());break;case 3:if(o.action_seqs&&o.action_seqs.length||(o.action_seqs=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.action_seqs.push(e.uint32());else o.action_seqs.push(e.uint32());break;case 4:o.id_name=e.string();break;case 5:o.nick_name=e.string();break;case 6:o.timestamp=e.uint64();break;case 7:if(o.layers&&o.layers.length||(o.layers=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)o.layers.push(e.uint32());else o.layers.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_clear_page_graphics)return e;var t=new z.proto_edu_v1_web.push_clear_page_graphics;if(null!=e.mod_id&&(H.Long?(t.mod_id=H.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r)t.pages[r]=e.pages[r]>>>0}if(e.action_seqs){if(!Array.isArray(e.action_seqs))throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.action_seqs: array expected");t.action_seqs=[];for(var o=0;o<e.action_seqs.length;++o)t.action_seqs[o]=e.action_seqs[o]>>>0}if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.timestamp&&(H.Long?(t.timestamp=H.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),e.layers){if(!Array.isArray(e.layers))throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.layers: array expected");t.layers=[];for(var n=0;n<e.layers.length;++n)t.layers[n]=e.layers[n]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[],r.action_seqs=[],r.layers=[]),t.defaults){if(H.Long){var o=new H.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.id_name="",r.nick_name="",H.Long){var n=new H.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?H.Long.prototype.toString.call(e.mod_id):t.longs===Number?new H.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){r.pages=[];for(var i=0;i<e.pages.length;++i)r.pages[i]=e.pages[i]}if(e.action_seqs&&e.action_seqs.length){r.action_seqs=[];for(var s=0;s<e.action_seqs.length;++s)r.action_seqs[s]=e.action_seqs[s]}if(null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=e.nick_name),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?H.Long.prototype.toString.call(e.timestamp):t.longs===Number?new H.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),e.layers&&e.layers.length){r.layers=[];for(var a=0;a<e.layers.length;++a)r.layers[a]=e.layers[a]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_user_auth=function(){function e(e){if(this.user_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.user_auth=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_user_auth;e.pos<r;){var n=e.uint32();n>>>3===1?(o.user_auth&&o.user_auth.length||(o.user_auth=[]),o.user_auth.push(z.proto_edu_v1_web.push_user_auth_data.decode(e,e.uint32()))):e.skipType(7&n)}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_user_auth)return e;var t=new z.proto_edu_v1_web.push_user_auth;if(e.user_auth){if(!Array.isArray(e.user_auth))throw TypeError(".proto_edu_v1_web.push_user_auth.user_auth: array expected");t.user_auth=[];for(var r=0;r<e.user_auth.length;++r){if("object"!=typeof e.user_auth[r])throw TypeError(".proto_edu_v1_web.push_user_auth.user_auth: object expected");t.user_auth[r]=z.proto_edu_v1_web.push_user_auth_data.fromObject(e.user_auth[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.user_auth=[]),e.user_auth&&e.user_auth.length){r.user_auth=[];for(var o=0;o<e.user_auth.length;++o)r.user_auth[o]=z.proto_edu_v1_web.push_user_auth_data.toObject(e.user_auth[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_user_auth_data=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.auth_seq=0,e.prototype.module_auth=H.emptyArray,e.prototype.graphic_auth=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_user_auth_data;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.string();break;case 2:o.auth_seq=e.uint32();break;case 3:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 4:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_user_auth_data)return e;var t=new z.proto_edu_v1_web.push_user_auth_data;if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.push_user_auth_data.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.push_user_auth_data.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.id_name="",r.auth_seq=0),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_room_auth=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.auth_seq=0,e.prototype.module_auth=H.emptyArray,e.prototype.graphic_auth=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_room_auth;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.auth_seq=e.uint32();break;case 2:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 3:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_room_auth)return e;var t=new z.proto_edu_v1_web.push_room_auth;if(null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.push_room_auth.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.push_room_auth.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.auth_seq=0),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.mod=function(){function e(e){if(this.graphic_ids=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=0,e.prototype.graphic_ids=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint32();break;case 2:if(o.graphic_ids&&o.graphic_ids.length||(o.graphic_ids=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.graphic_ids.push(e.uint32());else o.graphic_ids.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.mod)return e;var t=new z.proto_edu_v1_web.mod;if(null!=e.mod_id&&(t.mod_id=e.mod_id>>>0),e.graphic_ids){if(!Array.isArray(e.graphic_ids))throw TypeError(".proto_edu_v1_web.mod.graphic_ids: array expected");t.graphic_ids=[];for(var r=0;r<e.graphic_ids.length;++r)t.graphic_ids[r]=e.graphic_ids[r]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.graphic_ids=[]),t.defaults&&(r.mod_id=0),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&(r.mod_id=e.mod_id),e.graphic_ids&&e.graphic_ids.length){r.graphic_ids=[];for(var o=0;o<e.graphic_ids.length;++o)r.graphic_ids[o]=e.graphic_ids[o]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_clear_user_graphic_list=function(){function e(e){if(this.mods=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.mods=H.emptyArray,e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new z.proto_edu_v1_web.push_clear_user_graphic_list;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.string();break;case 2:o.mods&&o.mods.length||(o.mods=[]),o.mods.push(z.proto_edu_v1_web.mod.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof z.proto_edu_v1_web.push_clear_user_graphic_list)return e;var t=new z.proto_edu_v1_web.push_clear_user_graphic_list;if(null!=e.id_name&&(t.id_name=String(e.id_name)),e.mods){if(!Array.isArray(e.mods))throw TypeError(".proto_edu_v1_web.push_clear_user_graphic_list.mods: array expected");t.mods=[];for(var r=0;r<e.mods.length;++r){if("object"!=typeof e.mods[r])throw TypeError(".proto_edu_v1_web.push_clear_user_graphic_list.mods: object expected");t.mods[r]=z.proto_edu_v1_web.mod.fromObject(e.mods[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.mods=[]),t.defaults&&(r.id_name=""),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),e.mods&&e.mods.length){r.mods=[];for(var o=0;o<e.mods.length;++o)r.mods[o]=z.proto_edu_v1_web.mod.toObject(e.mods[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e}();var V=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},q=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},G=function(){function e(){this.proto=z,this.protocol=new Uint8Array(["0".charCodeAt(0),"1".charCodeAt(0)]),this.cmdReqMap={"/eduv1/sync":"proto_sync","/eduv1/get_room_auth":"proto_get_room_auth_req","/eduv1/get_user_auth":"proto_get_user_auth_req","/eduv1/create_mod":"proto_create_mod","/eduv1/destroy_mod":"proto_destroy_mod","/eduv1/get_mod":"proto_get_mod","/eduv1/get_mod_list":"proto_get_mod_list","/eduv1/modify_mod":"proto_modify_mod","/eduv1/get_page_graphics":"proto_get_page_graphics","/eduv1/clear_page_graphics":"proto_clear_page_graphics","/eduv1/draw_page_graphics":"proto_draw_page_graphics"},this.cmdRspMap={"/eduv1/sync":"proto_sync_rsp","/eduv1/get_room_auth":"proto_get_room_auth_rsp","/eduv1/get_user_auth":"proto_get_user_auth_rsp","/eduv1/create_mod":"proto_create_mod_rsp","/eduv1/destroy_mod":"proto_destroy_mod_rsp","/eduv1/get_mod":"proto_get_mod_rsp","/eduv1/get_mod_list":"proto_get_mod_list_rsp","/eduv1/modify_mod":"proto_modify_mod_rsp","/eduv1/get_page_graphics":"proto_get_page_graphics_rsp","/eduv1/clear_page_graphics":"proto_clear_page_graphics_rsp","/eduv1/draw_page_graphics":"proto_draw_page_graphics_rsp"},this.cmdPushMap={291101:"push_set_mod",291203:"push_draw_page_graphics",291204:"push_clear_page_graphics",291501:"push_user_auth",291502:"push_room_auth",291205:"push_clear_user_graphic_list"},this.cmdMsg={reqHeader:"proto_req_header",reqBody:"proto_biz_channel",reqBodyBody:"req",rspHeader:"proto_rsp_header",rspBody:"proto_biz_channel_rsp",rspBodyBody:"rsp",pushHeader:"proto_push_header",pushBody:"proto_push_biz_channel",pushBodyBody:"proto_push_biz_hannel_req"}}return e.prototype.encodeMsg=function(e,t,r){return V(this,void 0,void 0,(function(){var o,n,i,s,a,c,u;return q(this,(function(l){switch(l.label){case 0:return this.formatEduBody(r.body),JSON.stringify(r),[4,this.encode(this.proto.proto_access_pb,this.cmdMsg.reqHeader,t)];case 1:return o=l.sent(),n=o.length,[4,this.encode(this.proto.proto_edu_v1_web,this.cmdReqMap[e],r.body)];case 2:return i=l.sent(),[4,this.encode(this.proto.proto_biz_channel,this.cmdMsg.reqBodyBody,{req_header:r.header,body:i})];case 3:return s=l.sent(),[4,this.encode(this.proto.proto_access_pb,this.cmdMsg.reqBody,{channel:"edu",cmd:e,req_body:s})];case 4:return a=l.sent(),c=a.length,(u=new Uint8Array(8+n+c)).set(this.protocol),u[2]=n>>8,u[3]=n-(u[2]<<8),u.set(new Uint8Array(Int32Array.from([c]).buffer).reverse(),4),u.set(o,8),u.set(a,8+n),[2,u]}}))}))},e.prototype.decodeMsg=function(e){return V(this,void 0,void 0,(function(){var t,r,o;return q(this,(function(n){switch(n.label){case 0:t=new Uint8Array(e),r=(t[2]<<8)+t[3],n.label=1;case 1:return n.trys.push([1,4,,7]),[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.rspHeader,t.slice(8,8+r))];case 2:return o=n.sent(),[4,this.decodeRspMsg(t.slice(8+r),o.seq)];case 3:return[2,n.sent()];case 4:return n.sent(),[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.pushHeader,t.slice(8,8+r))];case 5:return n.sent(),[4,this.decodePushMsg(t.slice(8+r))];case 6:return[2,n.sent()];case 7:return[2]}}))}))},e.prototype.checkSendLength=function(e,t){return V(this,void 0,void 0,(function(){var r,o,n,i;return q(this,(function(s){switch(s.label){case 0:return this.formatEduBody(t.body),[4,this.encode(this.proto.proto_edu_v1_web,this.cmdReqMap[e],t.body)];case 1:return r=s.sent(),[4,this.encode(this.proto.proto_biz_channel,this.cmdMsg.reqBodyBody,{req_header:t.header,body:r})];case 2:return o=s.sent(),[4,this.encode(this.proto.proto_access_pb,this.cmdMsg.reqBody,{channel:"edu",cmd:e,req_body:o})];case 3:return n=s.sent(),[2,(i=n.length)>5e3?i:0]}}))}))},e.prototype.createUnknownError=function(e,t){return{cmd:t,header:{seq:e,code:1,message:"unknown error"},body:{}}},e.prototype.formatEduBody=function(e){e.mod_id&&(e.mod_id=x.a.fromString(e.mod_id,!0)),e.draw_pages&&e.draw_pages.forEach((function(e){e.draw_list.forEach((function(e){var t=e.graphic_id;t&&"string"==typeof t&&(e.graphic_id=x.a.fromString(t,!0))}))}))},e.prototype.mergeModList=function(e){e&&e.forEach((function(t,r){e[r]=Object.assign({mod_seq:0,graphic_list_seq:0,sync_interval:0,mod_reserve:1,mod_horizontal_percent:0,mod_vertical_percent:0,mod_extra:"",mod_scale:JSON.stringify({scale:1,ofs_x:0,ofs_y:0})},t)}))},e.prototype.mergePageGraphics=function(e,t){e&&e.forEach((function(r,o){e[o]=r||0,t&&(t[o]=t[o]||0)}))},e.prototype.mergeGraphicList=function(e){e&&e.forEach((function(t,r){e[r]=Object.assign({action_seq:0,zorder:1,x:0,y:0,size:0,color:0,layer:0},t)}))},e.prototype.mergeRspBody=function(e,t){var r=this;switch(t){case"/eduv1/sync":return Object.assign({sync_interval:0,room_auth_seq:0,user_auth_seq:0,mod_list_seq:0},e);case"/eduv1/get_room_auth":case"/eduv1/get_user_auth":return e.auth_seq=e.auth_seq||0,e;case"/eduv1/create_mod":case"/eduv1/modify_mod":return e.mod_seq=e.mod_seq||0,e.mod_list_seq=e.mod_list_seq||0,e;case"/eduv1/destroy_mod":return e.mod_list_seq=e.mod_list_seq||0,e;case"/eduv1/get_mod":return this.mergeModList(e.mod_list),e;case"/eduv1/get_mod_list":return e.mod_list_seq=e.mod_list_seq||0,this.mergeModList(e.mod_list),e;case"/eduv1/get_page_graphics":return e.pages&&e.pages.forEach((function(e){e.page=e.page||0,e.ret_graphic_list_seq=e.ret_graphic_list_seq||0,e.svr_graphic_list_seq=e.svr_graphic_list_seq||0,r.mergeGraphicList(e.graphic_list)})),e;case"/eduv1/clear_page_graphics":case"/eduv1/draw_page_graphics":return this.mergePageGraphics(e.pages,e.graphic_list_seqs),e}},e.prototype.mergePushBody=function(e,t){var r=this;switch(t){case 291101:return e.mod_list_seq=e.mod_list_seq||0,e.action_list&&e.action_list.forEach((function(e){e.is_modify_mod_extra&&(e.mod_extra=e.mod_extra||""),e.is_modify_mod_reserve&&(e.mod_reserve=e.mod_reserve||1),e.is_modify_mod_horizontal_percent&&(e.mod_horizontal_percent=e.mod_horizontal_percent||0),e.is_modify_mod_vertical_percent&&(e.mod_vertical_percent=e.mod_vertical_percent||0),e.is_modify_mod_scale&&(e.mod_scale=e.mod_scale||JSON.stringify({scale:1,ofs_x:0,ofs_y:0}))})),e;case 291203:return e.page_graphics&&e.page_graphics.forEach((function(e){e.page=e.page||0,e.action_seq=e.action_seq||0,r.mergeGraphicList(e.graphic_list)})),e;case 291204:return e.pages&&e.pages.forEach((function(t,r){e.pages[r]=t||0,e.action_seqs&&(e.action_seqs[r]=e.action_seqs[r]||0)})),e;case 291501:case 291502:return e.auth_seq=e.auth_seq||0,e;default:return e}},e.prototype.encode=function(e,t,r){return V(this,void 0,void 0,(function(){var o;return q(this,(function(n){return[2,(o=e[t]).encode(o.create(r)).finish()]}))}))},e.prototype.decode=function(e,t,r){return V(this,void 0,void 0,(function(){var o;return q(this,(function(n){return[2,(o=e[t]).toObject(o.decode(r),{longs:String})]}))}))},e.prototype.decodeRspMsg=function(e,t){return V(this,void 0,void 0,(function(){var r,o,n,i;return q(this,(function(s){switch(s.label){case 0:return[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.rspBody,e)];case 1:return r=s.sent(),o=r.cmd,r.rsp_body?[4,this.decode(this.proto.proto_biz_channel,this.cmdMsg.rspBodyBody,r.rsp_body)]:[3,9];case 2:if(n=s.sent(),r.rsp_body=n,r.rsp_body.cmd=o,r.rsp_body.header.code||(r.rsp_body.header.code=r.err_code?+String(r.err_code).replace(/^10+/g,""):0),!r.rsp_body.body)return[3,7];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,this.decode(this.proto.proto_edu_v1_web,this.cmdRspMap[o],r.rsp_body.body)];case 4:return i=s.sent(),r.rsp_body.body=this.mergeRspBody(i,o),[3,6];case 5:return s.sent(),[3,6];case 6:return[3,8];case 7:r.rsp_body.body={},s.label=8;case 8:return[3,10];case 9:r.rsp_body=this.createUnknownError(t,o),s.label=10;case 10:return[2,r.rsp_body]}}))}))},e.prototype.decodePushMsg=function(e){return V(this,void 0,void 0,(function(){var t,r,o,n;return q(this,(function(i){switch(i.label){case 0:return[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.pushBody,e)];case 1:return(t=i.sent()).req_body?[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.pushBodyBody,t.req_body)]:[3,9];case 2:if(r=i.sent(),t.req_body=r,o=this.cmdPushMap[t.req_body.sub_cmd],!t.req_body.msg_body)return[3,7];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,this.decode(this.proto.proto_edu_v1_web,o,t.req_body.msg_body)];case 4:return n=i.sent(),t.req_body.msg_body=this.mergePushBody(n,t.req_body.sub_cmd),[3,6];case 5:return i.sent(),[3,6];case 6:return[3,8];case 7:t.req_body.msg_body={},i.label=8;case 8:return[3,10];case 9:t.req_body={msg_body:{},sub_cmd:0},i.label=10;case 10:return this.cmdPushMap[t.req_body.sub_cmd],[2,t.req_body]}}))}))},e}();r(227);var Z=B.Reader,F=B.Writer,W=B.util,Y=B.roots.default||(B.roots.default={});Y.proto_edu_tcpuplink=function(){var e={};return e.ReqHead=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.user_session_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.room_session_id=W.Long?W.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(16).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(24).uint64(e.room_session_id),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.ReqHead;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.user_session_id=e.uint64();break;case 3:o.room_session_id=e.uint64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.ReqHead)return e;var t=new Y.proto_edu_tcpuplink.ReqHead;return null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.user_session_id&&(W.Long?(t.user_session_id=W.Long.fromValue(e.user_session_id)).unsigned=!0:"string"==typeof e.user_session_id?t.user_session_id=parseInt(e.user_session_id,10):"number"==typeof e.user_session_id?t.user_session_id=e.user_session_id:"object"==typeof e.user_session_id&&(t.user_session_id=new W.LongBits(e.user_session_id.low>>>0,e.user_session_id.high>>>0).toNumber(!0))),null!=e.room_session_id&&(W.Long?(t.room_session_id=W.Long.fromValue(e.room_session_id)).unsigned=!0:"string"==typeof e.room_session_id?t.room_session_id=parseInt(e.room_session_id,10):"number"==typeof e.room_session_id?t.room_session_id=e.room_session_id:"object"==typeof e.room_session_id&&(t.room_session_id=new W.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.room_id="",W.Long){var o=new W.Long(0,0,!0);r.user_session_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.user_session_id=t.longs===String?"0":0;if(W.Long){var n=new W.Long(0,0,!0);r.room_session_id=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.room_session_id=t.longs===String?"0":0}return null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.user_session_id&&e.hasOwnProperty("user_session_id")&&("number"==typeof e.user_session_id?r.user_session_id=t.longs===String?String(e.user_session_id):e.user_session_id:r.user_session_id=t.longs===String?W.Long.prototype.toString.call(e.user_session_id):t.longs===Number?new W.LongBits(e.user_session_id.low>>>0,e.user_session_id.high>>>0).toNumber(!0):e.user_session_id),null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&("number"==typeof e.room_session_id?r.room_session_id=t.longs===String?String(e.room_session_id):e.room_session_id:r.room_session_id=t.longs===String?W.Long.prototype.toString.call(e.room_session_id):t.longs===Number?new W.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0):e.room_session_id),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.RspHead=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.RspHead;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.RspHead)return e;var t=new Y.proto_edu_tcpuplink.RspHead;return null!=e.code&&(t.code=e.code>>>0),null!=e.message&&(t.message=String(e.message)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.code=0,r.message=""),null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.CommonRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.CommonRsp;e.pos<r;){var n=e.uint32();n>>>3===1?o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32()):e.skipType(7&n)}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.CommonRsp)return e;var t=new Y.proto_edu_tcpuplink.CommonRsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.CommonRsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.rsp_head=null),null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_title=W.newBuffer([]),e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos=W.newBuffer([]),e.prototype.mod_status=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_content=W.newBuffer([]),e.prototype.mod_extra=W.newBuffer([]),e.prototype.mod_reserve=0,e.prototype.mod_create_time=W.Long?W.Long.fromBits(0,0,!1):0,e.prototype.graphic_list_seq=0,e.prototype.sync_interval=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.mod_scale=W.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.mod_seq&&Object.hasOwnProperty.call(e,"mod_seq")&&t.uint32(16).uint32(e.mod_seq),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(26).bytes(e.mod_title),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(32).uint32(e.mod_type),null!=e.mod_subtype&&Object.hasOwnProperty.call(e,"mod_subtype")&&t.uint32(40).uint32(e.mod_subtype),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(50).bytes(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(56).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(66).bytes(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(74).bytes(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(80).uint32(e.mod_reserve),null!=e.mod_create_time&&Object.hasOwnProperty.call(e,"mod_create_time")&&t.uint32(88).int64(e.mod_create_time),null!=e.graphic_list_seq&&Object.hasOwnProperty.call(e,"graphic_list_seq")&&t.uint32(96).uint32(e.graphic_list_seq),null!=e.sync_interval&&Object.hasOwnProperty.call(e,"sync_interval")&&t.uint32(104).uint32(e.sync_interval),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(117).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(125).float(e.mod_vertical_percent),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(130).bytes(e.mod_scale),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.mod_seq=e.uint32();break;case 3:o.mod_title=e.bytes();break;case 4:o.mod_type=e.uint32();break;case 5:o.mod_subtype=e.uint32();break;case 6:o.mod_pos=e.bytes();break;case 7:o.mod_status=e.uint64();break;case 8:o.mod_content=e.bytes();break;case 9:o.mod_extra=e.bytes();break;case 10:o.mod_reserve=e.uint32();break;case 11:o.mod_create_time=e.int64();break;case 12:o.graphic_list_seq=e.uint32();break;case 13:o.sync_interval=e.uint32();break;case 14:o.mod_horizontal_percent=e.float();break;case 15:o.mod_vertical_percent=e.float();break;case 16:o.mod_scale=e.bytes();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_mod)return e;var t=new Y.proto_edu_tcpuplink.proto_mod;return null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_title&&("string"==typeof e.mod_title?W.base64.decode(e.mod_title,t.mod_title=W.newBuffer(W.base64.length(e.mod_title)),0):e.mod_title.length&&(t.mod_title=e.mod_title)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),null!=e.mod_subtype&&(t.mod_subtype=e.mod_subtype>>>0),null!=e.mod_pos&&("string"==typeof e.mod_pos?W.base64.decode(e.mod_pos,t.mod_pos=W.newBuffer(W.base64.length(e.mod_pos)),0):e.mod_pos.length&&(t.mod_pos=e.mod_pos)),null!=e.mod_status&&(W.Long?(t.mod_status=W.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&("string"==typeof e.mod_content?W.base64.decode(e.mod_content,t.mod_content=W.newBuffer(W.base64.length(e.mod_content)),0):e.mod_content.length&&(t.mod_content=e.mod_content)),null!=e.mod_extra&&("string"==typeof e.mod_extra?W.base64.decode(e.mod_extra,t.mod_extra=W.newBuffer(W.base64.length(e.mod_extra)),0):e.mod_extra.length&&(t.mod_extra=e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.mod_create_time&&(W.Long?(t.mod_create_time=W.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new W.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),null!=e.graphic_list_seq&&(t.graphic_list_seq=e.graphic_list_seq>>>0),null!=e.sync_interval&&(t.sync_interval=e.sync_interval>>>0),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.mod_scale&&("string"==typeof e.mod_scale?W.base64.decode(e.mod_scale,t.mod_scale=W.newBuffer(W.base64.length(e.mod_scale)),0):e.mod_scale.length&&(t.mod_scale=e.mod_scale)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.mod_seq=0,t.bytes===String?r.mod_title="":(r.mod_title=[],t.bytes!==Array&&(r.mod_title=W.newBuffer(r.mod_title))),r.mod_type=0,r.mod_subtype=0,t.bytes===String?r.mod_pos="":(r.mod_pos=[],t.bytes!==Array&&(r.mod_pos=W.newBuffer(r.mod_pos))),W.Long){var n=new W.Long(0,0,!0);r.mod_status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_status=t.longs===String?"0":0;if(t.bytes===String?r.mod_content="":(r.mod_content=[],t.bytes!==Array&&(r.mod_content=W.newBuffer(r.mod_content))),t.bytes===String?r.mod_extra="":(r.mod_extra=[],t.bytes!==Array&&(r.mod_extra=W.newBuffer(r.mod_extra))),r.mod_reserve=0,W.Long){var i=new W.Long(0,0,!1);r.mod_create_time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.mod_create_time=t.longs===String?"0":0;r.graphic_list_seq=0,r.sync_interval=0,r.mod_horizontal_percent=0,r.mod_vertical_percent=0,t.bytes===String?r.mod_scale="":(r.mod_scale=[],t.bytes!==Array&&(r.mod_scale=W.newBuffer(r.mod_scale)))}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(r.mod_title=t.bytes===String?W.base64.encode(e.mod_title,0,e.mod_title.length):t.bytes===Array?Array.prototype.slice.call(e.mod_title):e.mod_title),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),null!=e.mod_subtype&&e.hasOwnProperty("mod_subtype")&&(r.mod_subtype=e.mod_subtype),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(r.mod_pos=t.bytes===String?W.base64.encode(e.mod_pos,0,e.mod_pos.length):t.bytes===Array?Array.prototype.slice.call(e.mod_pos):e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?r.mod_status=t.longs===String?String(e.mod_status):e.mod_status:r.mod_status=t.longs===String?W.Long.prototype.toString.call(e.mod_status):t.longs===Number?new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(r.mod_content=t.bytes===String?W.base64.encode(e.mod_content,0,e.mod_content.length):t.bytes===Array?Array.prototype.slice.call(e.mod_content):e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(r.mod_extra=t.bytes===String?W.base64.encode(e.mod_extra,0,e.mod_extra.length):t.bytes===Array?Array.prototype.slice.call(e.mod_extra):e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(r.mod_reserve=e.mod_reserve),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?r.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:r.mod_create_time=t.longs===String?W.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new W.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),null!=e.graphic_list_seq&&e.hasOwnProperty("graphic_list_seq")&&(r.graphic_list_seq=e.graphic_list_seq),null!=e.sync_interval&&e.hasOwnProperty("sync_interval")&&(r.sync_interval=e.sync_interval),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(r.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(r.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(r.mod_scale=t.bytes===String?W.base64.encode(e.mod_scale,0,e.mod_scale.length):t.bytes===Array?Array.prototype.slice.call(e.mod_scale):e.mod_scale),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_graphic=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name=W.newBuffer([]),e.prototype.nick_name=W.newBuffer([]),e.prototype.graphic_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.data=W.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.timestamp=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes=W.newBuffer([]),e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.server_timestamp=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.creator_id=W.newBuffer([]),e.prototype.layer=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.graphic_id&&Object.hasOwnProperty.call(e,"graphic_id")&&t.uint32(24).uint64(e.graphic_id),null!=e.action_seq&&Object.hasOwnProperty.call(e,"action_seq")&&t.uint32(32).uint32(e.action_seq),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(40).int32(e.type),null!=e.zorder&&Object.hasOwnProperty.call(e,"zorder")&&t.uint32(56).int32(e.zorder),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(64).int32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(72).int32(e.y),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(82).bytes(e.data),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(88).int32(e.size),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(96).uint32(e.color),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(104).uint64(e.timestamp),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(112).int32(e.width),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(120).int32(e.height),null!=e.attributes&&Object.hasOwnProperty.call(e,"attributes")&&t.uint32(130).bytes(e.attributes),null!=e.operate_id&&Object.hasOwnProperty.call(e,"operate_id")&&t.uint32(138).string(e.operate_id),null!=e.is_end_draw&&Object.hasOwnProperty.call(e,"is_end_draw")&&t.uint32(144).bool(e.is_end_draw),null!=e.server_timestamp&&Object.hasOwnProperty.call(e,"server_timestamp")&&t.uint32(152).uint64(e.server_timestamp),null!=e.creator_id&&Object.hasOwnProperty.call(e,"creator_id")&&t.uint32(162).bytes(e.creator_id),null!=e.layer&&Object.hasOwnProperty.call(e,"layer")&&t.uint32(168).uint32(e.layer),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_graphic;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.nick_name=e.bytes();break;case 3:o.graphic_id=e.uint64();break;case 4:o.action_seq=e.uint32();break;case 5:o.type=e.int32();break;case 7:o.zorder=e.int32();break;case 8:o.x=e.int32();break;case 9:o.y=e.int32();break;case 10:o.data=e.bytes();break;case 11:o.size=e.int32();break;case 12:o.color=e.uint32();break;case 13:o.timestamp=e.uint64();break;case 14:o.width=e.int32();break;case 15:o.height=e.int32();break;case 16:o.attributes=e.bytes();break;case 17:o.operate_id=e.string();break;case 18:o.is_end_draw=e.bool();break;case 19:o.server_timestamp=e.uint64();break;case 20:o.creator_id=e.bytes();break;case 21:o.layer=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_graphic)return e;var t=new Y.proto_edu_tcpuplink.proto_graphic;return null!=e.id_name&&("string"==typeof e.id_name?W.base64.decode(e.id_name,t.id_name=W.newBuffer(W.base64.length(e.id_name)),0):e.id_name.length&&(t.id_name=e.id_name)),null!=e.nick_name&&("string"==typeof e.nick_name?W.base64.decode(e.nick_name,t.nick_name=W.newBuffer(W.base64.length(e.nick_name)),0):e.nick_name.length&&(t.nick_name=e.nick_name)),null!=e.graphic_id&&(W.Long?(t.graphic_id=W.Long.fromValue(e.graphic_id)).unsigned=!0:"string"==typeof e.graphic_id?t.graphic_id=parseInt(e.graphic_id,10):"number"==typeof e.graphic_id?t.graphic_id=e.graphic_id:"object"==typeof e.graphic_id&&(t.graphic_id=new W.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0))),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),null!=e.type&&(t.type=0|e.type),null!=e.zorder&&(t.zorder=0|e.zorder),null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.data&&("string"==typeof e.data?W.base64.decode(e.data,t.data=W.newBuffer(W.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.size&&(t.size=0|e.size),null!=e.color&&(t.color=e.color>>>0),null!=e.timestamp&&(W.Long?(t.timestamp=W.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),null!=e.width&&(t.width=0|e.width),null!=e.height&&(t.height=0|e.height),null!=e.attributes&&("string"==typeof e.attributes?W.base64.decode(e.attributes,t.attributes=W.newBuffer(W.base64.length(e.attributes)),0):e.attributes.length&&(t.attributes=e.attributes)),null!=e.operate_id&&(t.operate_id=String(e.operate_id)),null!=e.is_end_draw&&(t.is_end_draw=Boolean(e.is_end_draw)),null!=e.server_timestamp&&(W.Long?(t.server_timestamp=W.Long.fromValue(e.server_timestamp)).unsigned=!0:"string"==typeof e.server_timestamp?t.server_timestamp=parseInt(e.server_timestamp,10):"number"==typeof e.server_timestamp?t.server_timestamp=e.server_timestamp:"object"==typeof e.server_timestamp&&(t.server_timestamp=new W.LongBits(e.server_timestamp.low>>>0,e.server_timestamp.high>>>0).toNumber(!0))),null!=e.creator_id&&("string"==typeof e.creator_id?W.base64.decode(e.creator_id,t.creator_id=W.newBuffer(W.base64.length(e.creator_id)),0):e.creator_id.length&&(t.creator_id=e.creator_id)),null!=e.layer&&(t.layer=e.layer>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(t.bytes===String?r.id_name="":(r.id_name=[],t.bytes!==Array&&(r.id_name=W.newBuffer(r.id_name))),t.bytes===String?r.nick_name="":(r.nick_name=[],t.bytes!==Array&&(r.nick_name=W.newBuffer(r.nick_name))),W.Long){var o=new W.Long(0,0,!0);r.graphic_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.graphic_id=t.longs===String?"0":0;if(r.action_seq=0,r.type=0,r.zorder=0,r.x=0,r.y=0,t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=W.newBuffer(r.data))),r.size=0,r.color=0,W.Long){var n=new W.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0;if(r.width=0,r.height=0,t.bytes===String?r.attributes="":(r.attributes=[],t.bytes!==Array&&(r.attributes=W.newBuffer(r.attributes))),r.operate_id="",r.is_end_draw=!1,W.Long){var i=new W.Long(0,0,!0);r.server_timestamp=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.server_timestamp=t.longs===String?"0":0;t.bytes===String?r.creator_id="":(r.creator_id=[],t.bytes!==Array&&(r.creator_id=W.newBuffer(r.creator_id))),r.layer=0}return null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=t.bytes===String?W.base64.encode(e.id_name,0,e.id_name.length):t.bytes===Array?Array.prototype.slice.call(e.id_name):e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=t.bytes===String?W.base64.encode(e.nick_name,0,e.nick_name.length):t.bytes===Array?Array.prototype.slice.call(e.nick_name):e.nick_name),null!=e.graphic_id&&e.hasOwnProperty("graphic_id")&&("number"==typeof e.graphic_id?r.graphic_id=t.longs===String?String(e.graphic_id):e.graphic_id:r.graphic_id=t.longs===String?W.Long.prototype.toString.call(e.graphic_id):t.longs===Number?new W.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0):e.graphic_id),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(r.action_seq=e.action_seq),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.zorder&&e.hasOwnProperty("zorder")&&(r.zorder=e.zorder),null!=e.x&&e.hasOwnProperty("x")&&(r.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(r.y=e.y),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?W.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.size&&e.hasOwnProperty("size")&&(r.size=e.size),null!=e.color&&e.hasOwnProperty("color")&&(r.color=e.color),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?W.Long.prototype.toString.call(e.timestamp):t.longs===Number?new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),null!=e.width&&e.hasOwnProperty("width")&&(r.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(r.height=e.height),null!=e.attributes&&e.hasOwnProperty("attributes")&&(r.attributes=t.bytes===String?W.base64.encode(e.attributes,0,e.attributes.length):t.bytes===Array?Array.prototype.slice.call(e.attributes):e.attributes),null!=e.operate_id&&e.hasOwnProperty("operate_id")&&(r.operate_id=e.operate_id),null!=e.is_end_draw&&e.hasOwnProperty("is_end_draw")&&(r.is_end_draw=e.is_end_draw),null!=e.server_timestamp&&e.hasOwnProperty("server_timestamp")&&("number"==typeof e.server_timestamp?r.server_timestamp=t.longs===String?String(e.server_timestamp):e.server_timestamp:r.server_timestamp=t.longs===String?W.Long.prototype.toString.call(e.server_timestamp):t.longs===Number?new W.LongBits(e.server_timestamp.low>>>0,e.server_timestamp.high>>>0).toNumber(!0):e.server_timestamp),null!=e.creator_id&&e.hasOwnProperty("creator_id")&&(r.creator_id=t.bytes===String?W.base64.encode(e.creator_id,0,e.creator_id.length):t.bytes===Array?Array.prototype.slice.call(e.creator_id):e.creator_id),null!=e.layer&&e.hasOwnProperty("layer")&&(r.layer=e.layer),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.user_auth=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name=W.newBuffer([]),e.prototype.action_seq=0,e.prototype.module_auth=W.emptyArray,e.prototype.graphic_auth=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.action_seq&&Object.hasOwnProperty.call(e,"action_seq")&&t.uint32(16).uint32(e.action_seq),null!=e.module_auth&&e.module_auth.length){t.uint32(26).fork();for(var r=0;r<e.module_auth.length;++r)t.uint32(e.module_auth[r]);t.ldelim()}if(null!=e.graphic_auth&&e.graphic_auth.length){t.uint32(34).fork();for(var o=0;o<e.graphic_auth.length;++o)t.uint32(e.graphic_auth[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.user_auth;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.bytes();break;case 2:o.action_seq=e.uint32();break;case 3:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 4:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.user_auth)return e;var t=new Y.proto_edu_tcpuplink.user_auth;if(null!=e.id_name&&("string"==typeof e.id_name?W.base64.decode(e.id_name,t.id_name=W.newBuffer(W.base64.length(e.id_name)),0):e.id_name.length&&(t.id_name=e.id_name)),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_tcpuplink.user_auth.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_tcpuplink.user_auth.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(t.bytes===String?r.id_name="":(r.id_name=[],t.bytes!==Array&&(r.id_name=W.newBuffer(r.id_name))),r.action_seq=0),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=t.bytes===String?W.base64.encode(e.id_name,0,e.id_name.length):t.bytes===Array?Array.prototype.slice.call(e.id_name):e.id_name),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(r.action_seq=e.action_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_sync=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_sync;e.pos<r;){var n=e.uint32();n>>>3===1?o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32()):e.skipType(7&n)}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_sync)return e;var t=new Y.proto_edu_tcpuplink.proto_sync;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_sync.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.req_head=null),null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_sync_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.sync_interval=0,e.prototype.room_extra_info_seq=0,e.prototype.user_list_seq=0,e.prototype.user_extra_info_seq=0,e.prototype.joinlive_seq=0,e.prototype.mod_list_seq=0,e.prototype.user_auth_seq=0,e.prototype.room_auth_seq=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.sync_interval&&Object.hasOwnProperty.call(e,"sync_interval")&&t.uint32(16).uint32(e.sync_interval),null!=e.room_extra_info_seq&&Object.hasOwnProperty.call(e,"room_extra_info_seq")&&t.uint32(24).uint32(e.room_extra_info_seq),null!=e.user_list_seq&&Object.hasOwnProperty.call(e,"user_list_seq")&&t.uint32(32).uint32(e.user_list_seq),null!=e.user_extra_info_seq&&Object.hasOwnProperty.call(e,"user_extra_info_seq")&&t.uint32(40).uint32(e.user_extra_info_seq),null!=e.joinlive_seq&&Object.hasOwnProperty.call(e,"joinlive_seq")&&t.uint32(48).uint32(e.joinlive_seq),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(56).uint32(e.mod_list_seq),null!=e.user_auth_seq&&Object.hasOwnProperty.call(e,"user_auth_seq")&&t.uint32(64).uint32(e.user_auth_seq),null!=e.room_auth_seq&&Object.hasOwnProperty.call(e,"room_auth_seq")&&t.uint32(72).uint32(e.room_auth_seq),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_sync_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.sync_interval=e.uint32();break;case 3:o.room_extra_info_seq=e.uint32();break;case 4:o.user_list_seq=e.uint32();break;case 5:o.user_extra_info_seq=e.uint32();break;case 6:o.joinlive_seq=e.uint32();break;case 7:o.mod_list_seq=e.uint32();break;case 8:o.user_auth_seq=e.uint32();break;case 9:o.room_auth_seq=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_sync_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_sync_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_sync_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}return null!=e.sync_interval&&(t.sync_interval=e.sync_interval>>>0),null!=e.room_extra_info_seq&&(t.room_extra_info_seq=e.room_extra_info_seq>>>0),null!=e.user_list_seq&&(t.user_list_seq=e.user_list_seq>>>0),null!=e.user_extra_info_seq&&(t.user_extra_info_seq=e.user_extra_info_seq>>>0),null!=e.joinlive_seq&&(t.joinlive_seq=e.joinlive_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.user_auth_seq&&(t.user_auth_seq=e.user_auth_seq>>>0),null!=e.room_auth_seq&&(t.room_auth_seq=e.room_auth_seq>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.rsp_head=null,r.sync_interval=0,r.room_extra_info_seq=0,r.user_list_seq=0,r.user_extra_info_seq=0,r.joinlive_seq=0,r.mod_list_seq=0,r.user_auth_seq=0,r.room_auth_seq=0),null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.sync_interval&&e.hasOwnProperty("sync_interval")&&(r.sync_interval=e.sync_interval),null!=e.room_extra_info_seq&&e.hasOwnProperty("room_extra_info_seq")&&(r.room_extra_info_seq=e.room_extra_info_seq),null!=e.user_list_seq&&e.hasOwnProperty("user_list_seq")&&(r.user_list_seq=e.user_list_seq),null!=e.user_extra_info_seq&&e.hasOwnProperty("user_extra_info_seq")&&(r.user_extra_info_seq=e.user_extra_info_seq),null!=e.joinlive_seq&&e.hasOwnProperty("joinlive_seq")&&(r.joinlive_seq=e.joinlive_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),null!=e.user_auth_seq&&e.hasOwnProperty("user_auth_seq")&&(r.user_auth_seq=e.user_auth_seq),null!=e.room_auth_seq&&e.hasOwnProperty("room_auth_seq")&&(r.room_auth_seq=e.room_auth_seq),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_create_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_title=W.newBuffer([]),e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos=W.newBuffer([]),e.prototype.mod_status=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_content=W.newBuffer([]),e.prototype.mod_extra=W.newBuffer([]),e.prototype.mod_reserve=0,e.prototype.mod_delete_flag=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.mod_scale=W.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(26).bytes(e.mod_title),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(32).uint32(e.mod_type),null!=e.mod_subtype&&Object.hasOwnProperty.call(e,"mod_subtype")&&t.uint32(40).uint32(e.mod_subtype),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(50).bytes(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(56).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(66).bytes(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(74).bytes(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(80).uint32(e.mod_reserve),null!=e.mod_delete_flag&&Object.hasOwnProperty.call(e,"mod_delete_flag")&&t.uint32(88).int32(e.mod_delete_flag),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(101).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(109).float(e.mod_vertical_percent),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(114).bytes(e.mod_scale),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_create_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:o.mod_title=e.bytes();break;case 4:o.mod_type=e.uint32();break;case 5:o.mod_subtype=e.uint32();break;case 6:o.mod_pos=e.bytes();break;case 7:o.mod_status=e.uint64();break;case 8:o.mod_content=e.bytes();break;case 9:o.mod_extra=e.bytes();break;case 10:o.mod_reserve=e.uint32();break;case 11:o.mod_delete_flag=e.int32();break;case 12:o.mod_horizontal_percent=e.float();break;case 13:o.mod_vertical_percent=e.float();break;case 14:o.mod_scale=e.bytes();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_create_mod)return e;var t=new Y.proto_edu_tcpuplink.proto_create_mod;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_create_mod.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}return null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_title&&("string"==typeof e.mod_title?W.base64.decode(e.mod_title,t.mod_title=W.newBuffer(W.base64.length(e.mod_title)),0):e.mod_title.length&&(t.mod_title=e.mod_title)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),null!=e.mod_subtype&&(t.mod_subtype=e.mod_subtype>>>0),null!=e.mod_pos&&("string"==typeof e.mod_pos?W.base64.decode(e.mod_pos,t.mod_pos=W.newBuffer(W.base64.length(e.mod_pos)),0):e.mod_pos.length&&(t.mod_pos=e.mod_pos)),null!=e.mod_status&&(W.Long?(t.mod_status=W.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&("string"==typeof e.mod_content?W.base64.decode(e.mod_content,t.mod_content=W.newBuffer(W.base64.length(e.mod_content)),0):e.mod_content.length&&(t.mod_content=e.mod_content)),null!=e.mod_extra&&("string"==typeof e.mod_extra?W.base64.decode(e.mod_extra,t.mod_extra=W.newBuffer(W.base64.length(e.mod_extra)),0):e.mod_extra.length&&(t.mod_extra=e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.mod_delete_flag&&(t.mod_delete_flag=0|e.mod_delete_flag),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.mod_scale&&("string"==typeof e.mod_scale?W.base64.decode(e.mod_scale,t.mod_scale=W.newBuffer(W.base64.length(e.mod_scale)),0):e.mod_scale.length&&(t.mod_scale=e.mod_scale)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.req_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(t.bytes===String?r.mod_title="":(r.mod_title=[],t.bytes!==Array&&(r.mod_title=W.newBuffer(r.mod_title))),r.mod_type=0,r.mod_subtype=0,t.bytes===String?r.mod_pos="":(r.mod_pos=[],t.bytes!==Array&&(r.mod_pos=W.newBuffer(r.mod_pos))),W.Long){var n=new W.Long(0,0,!0);r.mod_status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_status=t.longs===String?"0":0;t.bytes===String?r.mod_content="":(r.mod_content=[],t.bytes!==Array&&(r.mod_content=W.newBuffer(r.mod_content))),t.bytes===String?r.mod_extra="":(r.mod_extra=[],t.bytes!==Array&&(r.mod_extra=W.newBuffer(r.mod_extra))),r.mod_reserve=0,r.mod_delete_flag=0,r.mod_horizontal_percent=0,r.mod_vertical_percent=0,t.bytes===String?r.mod_scale="":(r.mod_scale=[],t.bytes!==Array&&(r.mod_scale=W.newBuffer(r.mod_scale)))}return null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(r.mod_title=t.bytes===String?W.base64.encode(e.mod_title,0,e.mod_title.length):t.bytes===Array?Array.prototype.slice.call(e.mod_title):e.mod_title),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),null!=e.mod_subtype&&e.hasOwnProperty("mod_subtype")&&(r.mod_subtype=e.mod_subtype),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(r.mod_pos=t.bytes===String?W.base64.encode(e.mod_pos,0,e.mod_pos.length):t.bytes===Array?Array.prototype.slice.call(e.mod_pos):e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?r.mod_status=t.longs===String?String(e.mod_status):e.mod_status:r.mod_status=t.longs===String?W.Long.prototype.toString.call(e.mod_status):t.longs===Number?new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(r.mod_content=t.bytes===String?W.base64.encode(e.mod_content,0,e.mod_content.length):t.bytes===Array?Array.prototype.slice.call(e.mod_content):e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(r.mod_extra=t.bytes===String?W.base64.encode(e.mod_extra,0,e.mod_extra.length):t.bytes===Array?Array.prototype.slice.call(e.mod_extra):e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(r.mod_reserve=e.mod_reserve),null!=e.mod_delete_flag&&e.hasOwnProperty("mod_delete_flag")&&(r.mod_delete_flag=e.mod_delete_flag),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(r.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(r.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(r.mod_scale=t.bytes===String?W.base64.encode(e.mod_scale,0,e.mod_scale.length):t.bytes===Array?Array.prototype.slice.call(e.mod_scale):e.mod_scale),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_create_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.prototype.mod_create_time=W.Long?W.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.mod_seq&&Object.hasOwnProperty.call(e,"mod_seq")&&t.uint32(24).uint32(e.mod_seq),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(32).uint32(e.mod_list_seq),null!=e.mod_create_time&&Object.hasOwnProperty.call(e,"mod_create_time")&&t.uint32(40).int64(e.mod_create_time),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_create_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:o.mod_seq=e.uint32();break;case 4:o.mod_list_seq=e.uint32();break;case 5:o.mod_create_time=e.int64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_create_mod_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_create_mod_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_create_mod_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}return null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.mod_create_time&&(W.Long?(t.mod_create_time=W.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new W.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.rsp_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.mod_seq=0,r.mod_list_seq=0,W.Long){var n=new W.Long(0,0,!1);r.mod_create_time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_create_time=t.longs===String?"0":0}return null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?r.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:r.mod_create_time=t.longs===String?W.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new W.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_destroy_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_destroy_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_destroy_mod)return e;var t=new Y.proto_edu_tcpuplink.proto_destroy_mod;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_destroy_mod.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}return null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.req_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;return null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_destroy_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_list_seq=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(24).uint32(e.mod_list_seq),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_destroy_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:o.mod_list_seq=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_destroy_mod_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_destroy_mod_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_destroy_mod_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}return null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.rsp_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;r.mod_list_seq=0}return null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_modify_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_seq=0,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_title=W.newBuffer([]),e.prototype.mod_pos=W.newBuffer([]),e.prototype.mod_status=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_content=W.newBuffer([]),e.prototype.mod_extra=W.newBuffer([]),e.prototype.mod_reserve=0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.prototype.is_modify_mod_scale=!1,e.prototype.mod_scale=W.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_seq&&Object.hasOwnProperty.call(e,"mod_seq")&&t.uint32(16).uint32(e.mod_seq),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(24).uint64(e.mod_id),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(34).bytes(e.mod_title),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(42).bytes(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(48).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(58).bytes(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(66).bytes(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(72).uint32(e.mod_reserve),null!=e.is_modify_mod_title&&Object.hasOwnProperty.call(e,"is_modify_mod_title")&&t.uint32(80).bool(e.is_modify_mod_title),null!=e.is_modify_mod_pos&&Object.hasOwnProperty.call(e,"is_modify_mod_pos")&&t.uint32(88).bool(e.is_modify_mod_pos),null!=e.is_modify_mod_status&&Object.hasOwnProperty.call(e,"is_modify_mod_status")&&t.uint32(96).bool(e.is_modify_mod_status),null!=e.is_modify_mod_content&&Object.hasOwnProperty.call(e,"is_modify_mod_content")&&t.uint32(104).bool(e.is_modify_mod_content),null!=e.is_modify_mod_extra&&Object.hasOwnProperty.call(e,"is_modify_mod_extra")&&t.uint32(112).bool(e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&Object.hasOwnProperty.call(e,"is_modify_mod_reserve")&&t.uint32(120).bool(e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(133).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(141).float(e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_horizontal_percent")&&t.uint32(144).bool(e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_vertical_percent")&&t.uint32(152).bool(e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&Object.hasOwnProperty.call(e,"is_modify_mod_scale")&&t.uint32(160).bool(e.is_modify_mod_scale),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(170).bytes(e.mod_scale),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_modify_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:o.mod_seq=e.uint32();break;case 3:o.mod_id=e.uint64();break;case 4:o.mod_title=e.bytes();break;case 5:o.mod_pos=e.bytes();break;case 6:o.mod_status=e.uint64();break;case 7:o.mod_content=e.bytes();break;case 8:o.mod_extra=e.bytes();break;case 9:o.mod_reserve=e.uint32();break;case 10:o.is_modify_mod_title=e.bool();break;case 11:o.is_modify_mod_pos=e.bool();break;case 12:o.is_modify_mod_status=e.bool();break;case 13:o.is_modify_mod_content=e.bool();break;case 14:o.is_modify_mod_extra=e.bool();break;case 15:o.is_modify_mod_reserve=e.bool();break;case 16:o.mod_horizontal_percent=e.float();break;case 17:o.mod_vertical_percent=e.float();break;case 18:o.is_modify_mod_horizontal_percent=e.bool();break;case 19:o.is_modify_mod_vertical_percent=e.bool();break;case 20:o.is_modify_mod_scale=e.bool();break;case 21:o.mod_scale=e.bytes();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_modify_mod)return e;var t=new Y.proto_edu_tcpuplink.proto_modify_mod;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_modify_mod.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}return null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_title&&("string"==typeof e.mod_title?W.base64.decode(e.mod_title,t.mod_title=W.newBuffer(W.base64.length(e.mod_title)),0):e.mod_title.length&&(t.mod_title=e.mod_title)),null!=e.mod_pos&&("string"==typeof e.mod_pos?W.base64.decode(e.mod_pos,t.mod_pos=W.newBuffer(W.base64.length(e.mod_pos)),0):e.mod_pos.length&&(t.mod_pos=e.mod_pos)),null!=e.mod_status&&(W.Long?(t.mod_status=W.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&("string"==typeof e.mod_content?W.base64.decode(e.mod_content,t.mod_content=W.newBuffer(W.base64.length(e.mod_content)),0):e.mod_content.length&&(t.mod_content=e.mod_content)),null!=e.mod_extra&&("string"==typeof e.mod_extra?W.base64.decode(e.mod_extra,t.mod_extra=W.newBuffer(W.base64.length(e.mod_extra)),0):e.mod_extra.length&&(t.mod_extra=e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.is_modify_mod_title&&(t.is_modify_mod_title=Boolean(e.is_modify_mod_title)),null!=e.is_modify_mod_pos&&(t.is_modify_mod_pos=Boolean(e.is_modify_mod_pos)),null!=e.is_modify_mod_status&&(t.is_modify_mod_status=Boolean(e.is_modify_mod_status)),null!=e.is_modify_mod_content&&(t.is_modify_mod_content=Boolean(e.is_modify_mod_content)),null!=e.is_modify_mod_extra&&(t.is_modify_mod_extra=Boolean(e.is_modify_mod_extra)),null!=e.is_modify_mod_reserve&&(t.is_modify_mod_reserve=Boolean(e.is_modify_mod_reserve)),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.is_modify_mod_horizontal_percent&&(t.is_modify_mod_horizontal_percent=Boolean(e.is_modify_mod_horizontal_percent)),null!=e.is_modify_mod_vertical_percent&&(t.is_modify_mod_vertical_percent=Boolean(e.is_modify_mod_vertical_percent)),null!=e.is_modify_mod_scale&&(t.is_modify_mod_scale=Boolean(e.is_modify_mod_scale)),null!=e.mod_scale&&("string"==typeof e.mod_scale?W.base64.decode(e.mod_scale,t.mod_scale=W.newBuffer(W.base64.length(e.mod_scale)),0):e.mod_scale.length&&(t.mod_scale=e.mod_scale)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.req_head=null,r.mod_seq=0,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(t.bytes===String?r.mod_title="":(r.mod_title=[],t.bytes!==Array&&(r.mod_title=W.newBuffer(r.mod_title))),t.bytes===String?r.mod_pos="":(r.mod_pos=[],t.bytes!==Array&&(r.mod_pos=W.newBuffer(r.mod_pos))),W.Long){var n=new W.Long(0,0,!0);r.mod_status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_status=t.longs===String?"0":0;t.bytes===String?r.mod_content="":(r.mod_content=[],t.bytes!==Array&&(r.mod_content=W.newBuffer(r.mod_content))),t.bytes===String?r.mod_extra="":(r.mod_extra=[],t.bytes!==Array&&(r.mod_extra=W.newBuffer(r.mod_extra))),r.mod_reserve=0,r.is_modify_mod_title=!1,r.is_modify_mod_pos=!1,r.is_modify_mod_status=!1,r.is_modify_mod_content=!1,r.is_modify_mod_extra=!1,r.is_modify_mod_reserve=!1,r.mod_horizontal_percent=0,r.mod_vertical_percent=0,r.is_modify_mod_horizontal_percent=!1,r.is_modify_mod_vertical_percent=!1,r.is_modify_mod_scale=!1,t.bytes===String?r.mod_scale="":(r.mod_scale=[],t.bytes!==Array&&(r.mod_scale=W.newBuffer(r.mod_scale)))}return null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(r.mod_title=t.bytes===String?W.base64.encode(e.mod_title,0,e.mod_title.length):t.bytes===Array?Array.prototype.slice.call(e.mod_title):e.mod_title),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(r.mod_pos=t.bytes===String?W.base64.encode(e.mod_pos,0,e.mod_pos.length):t.bytes===Array?Array.prototype.slice.call(e.mod_pos):e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?r.mod_status=t.longs===String?String(e.mod_status):e.mod_status:r.mod_status=t.longs===String?W.Long.prototype.toString.call(e.mod_status):t.longs===Number?new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(r.mod_content=t.bytes===String?W.base64.encode(e.mod_content,0,e.mod_content.length):t.bytes===Array?Array.prototype.slice.call(e.mod_content):e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(r.mod_extra=t.bytes===String?W.base64.encode(e.mod_extra,0,e.mod_extra.length):t.bytes===Array?Array.prototype.slice.call(e.mod_extra):e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(r.mod_reserve=e.mod_reserve),null!=e.is_modify_mod_title&&e.hasOwnProperty("is_modify_mod_title")&&(r.is_modify_mod_title=e.is_modify_mod_title),null!=e.is_modify_mod_pos&&e.hasOwnProperty("is_modify_mod_pos")&&(r.is_modify_mod_pos=e.is_modify_mod_pos),null!=e.is_modify_mod_status&&e.hasOwnProperty("is_modify_mod_status")&&(r.is_modify_mod_status=e.is_modify_mod_status),null!=e.is_modify_mod_content&&e.hasOwnProperty("is_modify_mod_content")&&(r.is_modify_mod_content=e.is_modify_mod_content),null!=e.is_modify_mod_extra&&e.hasOwnProperty("is_modify_mod_extra")&&(r.is_modify_mod_extra=e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&e.hasOwnProperty("is_modify_mod_reserve")&&(r.is_modify_mod_reserve=e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(r.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(r.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&e.hasOwnProperty("is_modify_mod_horizontal_percent")&&(r.is_modify_mod_horizontal_percent=e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&e.hasOwnProperty("is_modify_mod_vertical_percent")&&(r.is_modify_mod_vertical_percent=e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&e.hasOwnProperty("is_modify_mod_scale")&&(r.is_modify_mod_scale=e.is_modify_mod_scale),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(r.mod_scale=t.bytes===String?W.base64.encode(e.mod_scale,0,e.mod_scale.length):t.bytes===Array?Array.prototype.slice.call(e.mod_scale):e.mod_scale),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_modify_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.mod_seq&&Object.hasOwnProperty.call(e,"mod_seq")&&t.uint32(24).uint32(e.mod_seq),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(32).uint32(e.mod_list_seq),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_modify_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:o.mod_seq=e.uint32();break;case 4:o.mod_list_seq=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_modify_mod_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_modify_mod_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_modify_mod_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}return null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.rsp_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;r.mod_seq=0,r.mod_list_seq=0}return null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_mod=function(){function e(e){if(this.mod_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_id_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id_list&&e.mod_id_list.length){t.uint32(18).fork();for(var r=0;r<e.mod_id_list.length;++r)t.uint64(e.mod_id_list[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:if(o.mod_id_list&&o.mod_id_list.length||(o.mod_id_list=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.mod_id_list.push(e.uint64());else o.mod_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_mod)return e;var t=new Y.proto_edu_tcpuplink.proto_get_mod;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_get_mod.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}if(e.mod_id_list){if(!Array.isArray(e.mod_id_list))throw TypeError(".proto_edu_tcpuplink.proto_get_mod.mod_id_list: array expected");t.mod_id_list=[];for(var r=0;r<e.mod_id_list.length;++r)W.Long?(t.mod_id_list[r]=W.Long.fromValue(e.mod_id_list[r])).unsigned=!0:"string"==typeof e.mod_id_list[r]?t.mod_id_list[r]=parseInt(e.mod_id_list[r],10):"number"==typeof e.mod_id_list[r]?t.mod_id_list[r]=e.mod_id_list[r]:"object"==typeof e.mod_id_list[r]&&(t.mod_id_list[r]=new W.LongBits(e.mod_id_list[r].low>>>0,e.mod_id_list[r].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.mod_id_list=[]),t.defaults&&(r.req_head=null),null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),e.mod_id_list&&e.mod_id_list.length){r.mod_id_list=[];for(var o=0;o<e.mod_id_list.length;++o)"number"==typeof e.mod_id_list[o]?r.mod_id_list[o]=t.longs===String?String(e.mod_id_list[o]):e.mod_id_list[o]:r.mod_id_list[o]=t.longs===String?W.Long.prototype.toString.call(e.mod_id_list[o]):t.longs===Number?new W.LongBits(e.mod_id_list[o].low>>>0,e.mod_id_list[o].high>>>0).toNumber(!0):e.mod_id_list[o]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_mod_rsp=function(){function e(e){if(this.mod_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.mod_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.mod_list&&e.mod_list.length)for(var r=0;r<e.mod_list.length;++r)Y.proto_edu_tcpuplink.proto_mod.encode(e.mod_list[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.mod_list&&o.mod_list.length||(o.mod_list=[]),o.mod_list.push(Y.proto_edu_tcpuplink.proto_mod.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_mod_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_get_mod_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_get_mod_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}if(e.mod_list){if(!Array.isArray(e.mod_list))throw TypeError(".proto_edu_tcpuplink.proto_get_mod_rsp.mod_list: array expected");t.mod_list=[];for(var r=0;r<e.mod_list.length;++r){if("object"!=typeof e.mod_list[r])throw TypeError(".proto_edu_tcpuplink.proto_get_mod_rsp.mod_list: object expected");t.mod_list[r]=Y.proto_edu_tcpuplink.proto_mod.fromObject(e.mod_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.mod_list=[]),t.defaults&&(r.rsp_head=null),null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),e.mod_list&&e.mod_list.length){r.mod_list=[];for(var o=0;o<e.mod_list.length;++o)r.mod_list[o]=Y.proto_edu_tcpuplink.proto_mod.toObject(e.mod_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_mod_list=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_list_seq=0,e.prototype.limit=0,e.prototype.marker=W.newBuffer([]),e.prototype.mod_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(16).uint32(e.mod_list_seq),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(24).uint32(e.limit),null!=e.marker&&Object.hasOwnProperty.call(e,"marker")&&t.uint32(34).bytes(e.marker),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(40).uint32(e.mod_type),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_mod_list;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:o.mod_list_seq=e.uint32();break;case 3:o.limit=e.uint32();break;case 4:o.marker=e.bytes();break;case 5:o.mod_type=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_mod_list)return e;var t=new Y.proto_edu_tcpuplink.proto_get_mod_list;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_get_mod_list.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}return null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.limit&&(t.limit=e.limit>>>0),null!=e.marker&&("string"==typeof e.marker?W.base64.decode(e.marker,t.marker=W.newBuffer(W.base64.length(e.marker)),0):e.marker.length&&(t.marker=e.marker)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.req_head=null,r.mod_list_seq=0,r.limit=0,t.bytes===String?r.marker="":(r.marker=[],t.bytes!==Array&&(r.marker=W.newBuffer(r.marker))),r.mod_type=0),null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),null!=e.limit&&e.hasOwnProperty("limit")&&(r.limit=e.limit),null!=e.marker&&e.hasOwnProperty("marker")&&(r.marker=t.bytes===String?W.base64.encode(e.marker,0,e.marker.length):t.bytes===Array?Array.prototype.slice.call(e.marker):e.marker),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_mod_list_rsp=function(){function e(e){if(this.mod_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.mod_list_seq=0,e.prototype.marker=W.newBuffer([]),e.prototype.mod_type=0,e.prototype.mod_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(16).uint32(e.mod_list_seq),null!=e.marker&&Object.hasOwnProperty.call(e,"marker")&&t.uint32(26).bytes(e.marker),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(32).uint32(e.mod_type),null!=e.mod_list&&e.mod_list.length)for(var r=0;r<e.mod_list.length;++r)Y.proto_edu_tcpuplink.proto_mod.encode(e.mod_list[r],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_mod_list_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.mod_list_seq=e.uint32();break;case 3:o.marker=e.bytes();break;case 4:o.mod_type=e.uint32();break;case 5:o.mod_list&&o.mod_list.length||(o.mod_list=[]),o.mod_list.push(Y.proto_edu_tcpuplink.proto_mod.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_mod_list_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_get_mod_list_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_get_mod_list_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}if(null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.marker&&("string"==typeof e.marker?W.base64.decode(e.marker,t.marker=W.newBuffer(W.base64.length(e.marker)),0):e.marker.length&&(t.marker=e.marker)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),e.mod_list){if(!Array.isArray(e.mod_list))throw TypeError(".proto_edu_tcpuplink.proto_get_mod_list_rsp.mod_list: array expected");t.mod_list=[];for(var r=0;r<e.mod_list.length;++r){if("object"!=typeof e.mod_list[r])throw TypeError(".proto_edu_tcpuplink.proto_get_mod_list_rsp.mod_list: object expected");t.mod_list[r]=Y.proto_edu_tcpuplink.proto_mod.fromObject(e.mod_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.mod_list=[]),t.defaults&&(r.rsp_head=null,r.mod_list_seq=0,t.bytes===String?r.marker="":(r.marker=[],t.bytes!==Array&&(r.marker=W.newBuffer(r.marker))),r.mod_type=0),null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),null!=e.marker&&e.hasOwnProperty("marker")&&(r.marker=t.bytes===String?W.base64.encode(e.marker,0,e.marker.length):t.bytes===Array?Array.prototype.slice.call(e.marker):e.marker),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),e.mod_list&&e.mod_list.length){r.mod_list=[];for(var o=0;o<e.mod_list.length;++o)r.mod_list[o]=Y.proto_edu_tcpuplink.proto_mod.toObject(e.mod_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_draw_page_graphics=function(){function e(e){if(this.draw_pages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.draw_pages=W.emptyArray,e.prototype.timestamp=W.Long?W.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.draw_pages&&e.draw_pages.length)for(var r=0;r<e.draw_pages.length;++r)Y.proto_edu_tcpuplink.proto_draw_page.encode(e.draw_pages[r],t.uint32(26).fork()).ldelim();return null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(32).uint64(e.timestamp),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_draw_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:o.draw_pages&&o.draw_pages.length||(o.draw_pages=[]),o.draw_pages.push(Y.proto_edu_tcpuplink.proto_draw_page.decode(e,e.uint32()));break;case 4:o.timestamp=e.uint64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_draw_page_graphics)return e;var t=new Y.proto_edu_tcpuplink.proto_draw_page_graphics;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_draw_page_graphics.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.draw_pages){if(!Array.isArray(e.draw_pages))throw TypeError(".proto_edu_tcpuplink.proto_draw_page_graphics.draw_pages: array expected");t.draw_pages=[];for(var r=0;r<e.draw_pages.length;++r){if("object"!=typeof e.draw_pages[r])throw TypeError(".proto_edu_tcpuplink.proto_draw_page_graphics.draw_pages: object expected");t.draw_pages[r]=Y.proto_edu_tcpuplink.proto_draw_page.fromObject(e.draw_pages[r])}}return null!=e.timestamp&&(W.Long?(t.timestamp=W.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.draw_pages=[]),t.defaults){if(r.req_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(W.Long){var n=new W.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0}if(null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.draw_pages&&e.draw_pages.length){r.draw_pages=[];for(var i=0;i<e.draw_pages.length;++i)r.draw_pages[i]=Y.proto_edu_tcpuplink.proto_draw_page.toObject(e.draw_pages[i],t)}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?W.Long.prototype.toString.call(e.timestamp):t.longs===Number?new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_draw_page=function(){function e(e){if(this.draw_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.graphic_list_seq=0,e.prototype.draw_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.page&&Object.hasOwnProperty.call(e,"page")&&t.uint32(8).uint32(e.page),null!=e.graphic_list_seq&&Object.hasOwnProperty.call(e,"graphic_list_seq")&&t.uint32(16).uint32(e.graphic_list_seq),null!=e.draw_list&&e.draw_list.length)for(var r=0;r<e.draw_list.length;++r)Y.proto_edu_tcpuplink.proto_draw.encode(e.draw_list[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_draw_page;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.page=e.uint32();break;case 2:o.graphic_list_seq=e.uint32();break;case 3:o.draw_list&&o.draw_list.length||(o.draw_list=[]),o.draw_list.push(Y.proto_edu_tcpuplink.proto_draw.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_draw_page)return e;var t=new Y.proto_edu_tcpuplink.proto_draw_page;if(null!=e.page&&(t.page=e.page>>>0),null!=e.graphic_list_seq&&(t.graphic_list_seq=e.graphic_list_seq>>>0),e.draw_list){if(!Array.isArray(e.draw_list))throw TypeError(".proto_edu_tcpuplink.proto_draw_page.draw_list: array expected");t.draw_list=[];for(var r=0;r<e.draw_list.length;++r){if("object"!=typeof e.draw_list[r])throw TypeError(".proto_edu_tcpuplink.proto_draw_page.draw_list: object expected");t.draw_list[r]=Y.proto_edu_tcpuplink.proto_draw.fromObject(e.draw_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.draw_list=[]),t.defaults&&(r.page=0,r.graphic_list_seq=0),null!=e.page&&e.hasOwnProperty("page")&&(r.page=e.page),null!=e.graphic_list_seq&&e.hasOwnProperty("graphic_list_seq")&&(r.graphic_list_seq=e.graphic_list_seq),e.draw_list&&e.draw_list.length){r.draw_list=[];for(var o=0;o<e.draw_list.length;++o)r.draw_list[o]=Y.proto_edu_tcpuplink.proto_draw.toObject(e.draw_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_draw_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.pages=W.emptyArray,e.prototype.graphic_list_seqs=W.emptyArray,e.prototype.commit_time=W.Long?W.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.pages&&e.pages.length){t.uint32(26).fork();for(var r=0;r<e.pages.length;++r)t.uint32(e.pages[r]);t.ldelim()}if(null!=e.graphic_list_seqs&&e.graphic_list_seqs.length){t.uint32(34).fork();for(var o=0;o<e.graphic_list_seqs.length;++o)t.uint32(e.graphic_list_seqs[o]);t.ldelim()}return null!=e.commit_time&&Object.hasOwnProperty.call(e,"commit_time")&&t.uint32(40).int64(e.commit_time),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_draw_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:if(o.pages&&o.pages.length||(o.pages=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.pages.push(e.uint32());else o.pages.push(e.uint32());break;case 4:if(o.graphic_list_seqs&&o.graphic_list_seqs.length||(o.graphic_list_seqs=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_list_seqs.push(e.uint32());else o.graphic_list_seqs.push(e.uint32());break;case 5:o.commit_time=e.int64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_draw_page_graphics_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_draw_page_graphics_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_draw_page_graphics_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_tcpuplink.proto_draw_page_graphics_rsp.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r)t.pages[r]=e.pages[r]>>>0}if(e.graphic_list_seqs){if(!Array.isArray(e.graphic_list_seqs))throw TypeError(".proto_edu_tcpuplink.proto_draw_page_graphics_rsp.graphic_list_seqs: array expected");t.graphic_list_seqs=[];for(var o=0;o<e.graphic_list_seqs.length;++o)t.graphic_list_seqs[o]=e.graphic_list_seqs[o]>>>0}return null!=e.commit_time&&(W.Long?(t.commit_time=W.Long.fromValue(e.commit_time)).unsigned=!1:"string"==typeof e.commit_time?t.commit_time=parseInt(e.commit_time,10):"number"==typeof e.commit_time?t.commit_time=e.commit_time:"object"==typeof e.commit_time&&(t.commit_time=new W.LongBits(e.commit_time.low>>>0,e.commit_time.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[],r.graphic_list_seqs=[]),t.defaults){if(r.rsp_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(W.Long){var n=new W.Long(0,0,!1);r.commit_time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.commit_time=t.longs===String?"0":0}if(null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){r.pages=[];for(var i=0;i<e.pages.length;++i)r.pages[i]=e.pages[i]}if(e.graphic_list_seqs&&e.graphic_list_seqs.length){r.graphic_list_seqs=[];for(var s=0;s<e.graphic_list_seqs.length;++s)r.graphic_list_seqs[s]=e.graphic_list_seqs[s]}return null!=e.commit_time&&e.hasOwnProperty("commit_time")&&("number"==typeof e.commit_time?r.commit_time=t.longs===String?String(e.commit_time):e.commit_time:r.commit_time=t.longs===String?W.Long.prototype.toString.call(e.commit_time):t.longs===Number?new W.LongBits(e.commit_time.low>>>0,e.commit_time.high>>>0).toNumber():e.commit_time),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_draw=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.graphic_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.action=0,e.prototype.action_type=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.px=0,e.prototype.py=0,e.prototype.data=W.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes=W.newBuffer([]),e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.layer=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.graphic_id&&Object.hasOwnProperty.call(e,"graphic_id")&&t.uint32(8).uint64(e.graphic_id),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(16).int32(e.action),null!=e.action_type&&Object.hasOwnProperty.call(e,"action_type")&&t.uint32(24).int32(e.action_type),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(32).int32(e.type),null!=e.zorder&&Object.hasOwnProperty.call(e,"zorder")&&t.uint32(40).int32(e.zorder),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(48).int32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(56).int32(e.y),null!=e.px&&Object.hasOwnProperty.call(e,"px")&&t.uint32(64).int32(e.px),null!=e.py&&Object.hasOwnProperty.call(e,"py")&&t.uint32(72).int32(e.py),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(82).bytes(e.data),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(88).int32(e.size),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(96).uint32(e.color),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(104).int32(e.width),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(112).int32(e.height),null!=e.attributes&&Object.hasOwnProperty.call(e,"attributes")&&t.uint32(122).bytes(e.attributes),null!=e.operate_id&&Object.hasOwnProperty.call(e,"operate_id")&&t.uint32(130).string(e.operate_id),null!=e.is_end_draw&&Object.hasOwnProperty.call(e,"is_end_draw")&&t.uint32(136).bool(e.is_end_draw),null!=e.layer&&Object.hasOwnProperty.call(e,"layer")&&t.uint32(144).uint32(e.layer),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_draw;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.graphic_id=e.uint64();break;case 2:o.action=e.int32();break;case 3:o.action_type=e.int32();break;case 4:o.type=e.int32();break;case 5:o.zorder=e.int32();break;case 6:o.x=e.int32();break;case 7:o.y=e.int32();break;case 8:o.px=e.int32();break;case 9:o.py=e.int32();break;case 10:o.data=e.bytes();break;case 11:o.size=e.int32();break;case 12:o.color=e.uint32();break;case 13:o.width=e.int32();break;case 14:o.height=e.int32();break;case 15:o.attributes=e.bytes();break;case 16:o.operate_id=e.string();break;case 17:o.is_end_draw=e.bool();break;case 18:o.layer=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_draw)return e;var t=new Y.proto_edu_tcpuplink.proto_draw;return null!=e.graphic_id&&(W.Long?(t.graphic_id=W.Long.fromValue(e.graphic_id)).unsigned=!0:"string"==typeof e.graphic_id?t.graphic_id=parseInt(e.graphic_id,10):"number"==typeof e.graphic_id?t.graphic_id=e.graphic_id:"object"==typeof e.graphic_id&&(t.graphic_id=new W.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0))),null!=e.action&&(t.action=0|e.action),null!=e.action_type&&(t.action_type=0|e.action_type),null!=e.type&&(t.type=0|e.type),null!=e.zorder&&(t.zorder=0|e.zorder),null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.px&&(t.px=0|e.px),null!=e.py&&(t.py=0|e.py),null!=e.data&&("string"==typeof e.data?W.base64.decode(e.data,t.data=W.newBuffer(W.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.size&&(t.size=0|e.size),null!=e.color&&(t.color=e.color>>>0),null!=e.width&&(t.width=0|e.width),null!=e.height&&(t.height=0|e.height),null!=e.attributes&&("string"==typeof e.attributes?W.base64.decode(e.attributes,t.attributes=W.newBuffer(W.base64.length(e.attributes)),0):e.attributes.length&&(t.attributes=e.attributes)),null!=e.operate_id&&(t.operate_id=String(e.operate_id)),null!=e.is_end_draw&&(t.is_end_draw=Boolean(e.is_end_draw)),null!=e.layer&&(t.layer=e.layer>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(W.Long){var o=new W.Long(0,0,!0);r.graphic_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.graphic_id=t.longs===String?"0":0;r.action=0,r.action_type=0,r.type=0,r.zorder=0,r.x=0,r.y=0,r.px=0,r.py=0,t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=W.newBuffer(r.data))),r.size=0,r.color=0,r.width=0,r.height=0,t.bytes===String?r.attributes="":(r.attributes=[],t.bytes!==Array&&(r.attributes=W.newBuffer(r.attributes))),r.operate_id="",r.is_end_draw=!1,r.layer=0}return null!=e.graphic_id&&e.hasOwnProperty("graphic_id")&&("number"==typeof e.graphic_id?r.graphic_id=t.longs===String?String(e.graphic_id):e.graphic_id:r.graphic_id=t.longs===String?W.Long.prototype.toString.call(e.graphic_id):t.longs===Number?new W.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0):e.graphic_id),null!=e.action&&e.hasOwnProperty("action")&&(r.action=e.action),null!=e.action_type&&e.hasOwnProperty("action_type")&&(r.action_type=e.action_type),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.zorder&&e.hasOwnProperty("zorder")&&(r.zorder=e.zorder),null!=e.x&&e.hasOwnProperty("x")&&(r.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(r.y=e.y),null!=e.px&&e.hasOwnProperty("px")&&(r.px=e.px),null!=e.py&&e.hasOwnProperty("py")&&(r.py=e.py),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?W.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.size&&e.hasOwnProperty("size")&&(r.size=e.size),null!=e.color&&e.hasOwnProperty("color")&&(r.color=e.color),null!=e.width&&e.hasOwnProperty("width")&&(r.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(r.height=e.height),null!=e.attributes&&e.hasOwnProperty("attributes")&&(r.attributes=t.bytes===String?W.base64.encode(e.attributes,0,e.attributes.length):t.bytes===Array?Array.prototype.slice.call(e.attributes):e.attributes),null!=e.operate_id&&e.hasOwnProperty("operate_id")&&(r.operate_id=e.operate_id),null!=e.is_end_draw&&e.hasOwnProperty("is_end_draw")&&(r.is_end_draw=e.is_end_draw),null!=e.layer&&e.hasOwnProperty("layer")&&(r.layer=e.layer),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_clear_page_graphics=function(){function e(e){if(this.layers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.timestamp=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.layers=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint64(e.timestamp),null!=e.layers&&e.layers.length){t.uint32(34).fork();for(var r=0;r<e.layers.length;++r)t.uint32(e.layers[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_clear_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:o.timestamp=e.uint64();break;case 4:if(o.layers&&o.layers.length||(o.layers=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.layers.push(e.uint32());else o.layers.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_clear_page_graphics)return e;var t=new Y.proto_edu_tcpuplink.proto_clear_page_graphics;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_clear_page_graphics.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.timestamp&&(W.Long?(t.timestamp=W.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),e.layers){if(!Array.isArray(e.layers))throw TypeError(".proto_edu_tcpuplink.proto_clear_page_graphics.layers: array expected");t.layers=[];for(var r=0;r<e.layers.length;++r)t.layers[r]=e.layers[r]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.layers=[]),t.defaults){if(r.req_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(W.Long){var n=new W.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0}if(null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?W.Long.prototype.toString.call(e.timestamp):t.longs===Number?new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),e.layers&&e.layers.length){r.layers=[];for(var i=0;i<e.layers.length;++i)r.layers[i]=e.layers[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_clear_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.pages=W.emptyArray,e.prototype.graphic_list_seqs=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.pages&&e.pages.length){t.uint32(26).fork();for(var r=0;r<e.pages.length;++r)t.uint32(e.pages[r]);t.ldelim()}if(null!=e.graphic_list_seqs&&e.graphic_list_seqs.length){t.uint32(34).fork();for(var o=0;o<e.graphic_list_seqs.length;++o)t.uint32(e.graphic_list_seqs[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_clear_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:if(o.pages&&o.pages.length||(o.pages=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.pages.push(e.uint32());else o.pages.push(e.uint32());break;case 4:if(o.graphic_list_seqs&&o.graphic_list_seqs.length||(o.graphic_list_seqs=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_list_seqs.push(e.uint32());else o.graphic_list_seqs.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_clear_page_graphics_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_clear_page_graphics_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_clear_page_graphics_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_tcpuplink.proto_clear_page_graphics_rsp.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r)t.pages[r]=e.pages[r]>>>0}if(e.graphic_list_seqs){if(!Array.isArray(e.graphic_list_seqs))throw TypeError(".proto_edu_tcpuplink.proto_clear_page_graphics_rsp.graphic_list_seqs: array expected");t.graphic_list_seqs=[];for(var o=0;o<e.graphic_list_seqs.length;++o)t.graphic_list_seqs[o]=e.graphic_list_seqs[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[],r.graphic_list_seqs=[]),t.defaults)if(r.rsp_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){r.pages=[];for(var n=0;n<e.pages.length;++n)r.pages[n]=e.pages[n]}if(e.graphic_list_seqs&&e.graphic_list_seqs.length){r.graphic_list_seqs=[];for(var i=0;i<e.graphic_list_seqs.length;++i)r.graphic_list_seqs[i]=e.graphic_list_seqs[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_page_graphics=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.pages=W.emptyArray,e.prototype.graphic_list_seqs=W.emptyArray,e.prototype.limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.pages&&e.pages.length){t.uint32(26).fork();for(var r=0;r<e.pages.length;++r)t.uint32(e.pages[r]);t.ldelim()}if(null!=e.graphic_list_seqs&&e.graphic_list_seqs.length){t.uint32(34).fork();for(var o=0;o<e.graphic_list_seqs.length;++o)t.uint32(e.graphic_list_seqs[o]);t.ldelim()}return null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(40).uint32(e.limit),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32());break;case 2:o.mod_id=e.uint64();break;case 3:if(o.pages&&o.pages.length||(o.pages=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.pages.push(e.uint32());else o.pages.push(e.uint32());break;case 4:if(o.graphic_list_seqs&&o.graphic_list_seqs.length||(o.graphic_list_seqs=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_list_seqs.push(e.uint32());else o.graphic_list_seqs.push(e.uint32());break;case 5:o.limit=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_page_graphics)return e;var t=new Y.proto_edu_tcpuplink.proto_get_page_graphics;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r)t.pages[r]=e.pages[r]>>>0}if(e.graphic_list_seqs){if(!Array.isArray(e.graphic_list_seqs))throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics.graphic_list_seqs: array expected");t.graphic_list_seqs=[];for(var o=0;o<e.graphic_list_seqs.length;++o)t.graphic_list_seqs[o]=e.graphic_list_seqs[o]>>>0}return null!=e.limit&&(t.limit=e.limit>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[],r.graphic_list_seqs=[]),t.defaults){if(r.req_head=null,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;r.limit=0}if(null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){r.pages=[];for(var n=0;n<e.pages.length;++n)r.pages[n]=e.pages[n]}if(e.graphic_list_seqs&&e.graphic_list_seqs.length){r.graphic_list_seqs=[];for(var i=0;i<e.graphic_list_seqs.length;++i)r.graphic_list_seqs[i]=e.graphic_list_seqs[i]}return null!=e.limit&&e.hasOwnProperty("limit")&&(r.limit=e.limit),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_page_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.ret_graphic_list_seq=0,e.prototype.svr_graphic_list_seq=0,e.prototype.graphic_list=W.emptyArray,e.prototype.del_graphic_id_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.page&&Object.hasOwnProperty.call(e,"page")&&t.uint32(8).uint32(e.page),null!=e.ret_graphic_list_seq&&Object.hasOwnProperty.call(e,"ret_graphic_list_seq")&&t.uint32(16).uint32(e.ret_graphic_list_seq),null!=e.svr_graphic_list_seq&&Object.hasOwnProperty.call(e,"svr_graphic_list_seq")&&t.uint32(24).uint32(e.svr_graphic_list_seq),null!=e.graphic_list&&e.graphic_list.length)for(var r=0;r<e.graphic_list.length;++r)Y.proto_edu_tcpuplink.proto_graphic.encode(e.graphic_list[r],t.uint32(34).fork()).ldelim();if(null!=e.del_graphic_id_list&&e.del_graphic_id_list.length){t.uint32(42).fork();for(var o=0;o<e.del_graphic_id_list.length;++o)t.uint64(e.del_graphic_id_list[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_page_graphics_info;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.page=e.uint32();break;case 2:o.ret_graphic_list_seq=e.uint32();break;case 3:o.svr_graphic_list_seq=e.uint32();break;case 4:o.graphic_list&&o.graphic_list.length||(o.graphic_list=[]),o.graphic_list.push(Y.proto_edu_tcpuplink.proto_graphic.decode(e,e.uint32()));break;case 5:if(o.del_graphic_id_list&&o.del_graphic_id_list.length||(o.del_graphic_id_list=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.del_graphic_id_list.push(e.uint64());else o.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_page_graphics_info)return e;var t=new Y.proto_edu_tcpuplink.proto_get_page_graphics_info;if(null!=e.page&&(t.page=e.page>>>0),null!=e.ret_graphic_list_seq&&(t.ret_graphic_list_seq=e.ret_graphic_list_seq>>>0),null!=e.svr_graphic_list_seq&&(t.svr_graphic_list_seq=e.svr_graphic_list_seq>>>0),e.graphic_list){if(!Array.isArray(e.graphic_list))throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics_info.graphic_list: array expected");t.graphic_list=[];for(var r=0;r<e.graphic_list.length;++r){if("object"!=typeof e.graphic_list[r])throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics_info.graphic_list: object expected");t.graphic_list[r]=Y.proto_edu_tcpuplink.proto_graphic.fromObject(e.graphic_list[r])}}if(e.del_graphic_id_list){if(!Array.isArray(e.del_graphic_id_list))throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics_info.del_graphic_id_list: array expected");t.del_graphic_id_list=[];for(var o=0;o<e.del_graphic_id_list.length;++o)W.Long?(t.del_graphic_id_list[o]=W.Long.fromValue(e.del_graphic_id_list[o])).unsigned=!0:"string"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=parseInt(e.del_graphic_id_list[o],10):"number"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=e.del_graphic_id_list[o]:"object"==typeof e.del_graphic_id_list[o]&&(t.del_graphic_id_list[o]=new W.LongBits(e.del_graphic_id_list[o].low>>>0,e.del_graphic_id_list[o].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.graphic_list=[],r.del_graphic_id_list=[]),t.defaults&&(r.page=0,r.ret_graphic_list_seq=0,r.svr_graphic_list_seq=0),null!=e.page&&e.hasOwnProperty("page")&&(r.page=e.page),null!=e.ret_graphic_list_seq&&e.hasOwnProperty("ret_graphic_list_seq")&&(r.ret_graphic_list_seq=e.ret_graphic_list_seq),null!=e.svr_graphic_list_seq&&e.hasOwnProperty("svr_graphic_list_seq")&&(r.svr_graphic_list_seq=e.svr_graphic_list_seq),e.graphic_list&&e.graphic_list.length){r.graphic_list=[];for(var o=0;o<e.graphic_list.length;++o)r.graphic_list[o]=Y.proto_edu_tcpuplink.proto_graphic.toObject(e.graphic_list[o],t)}if(e.del_graphic_id_list&&e.del_graphic_id_list.length){r.del_graphic_id_list=[];for(var n=0;n<e.del_graphic_id_list.length;++n)"number"==typeof e.del_graphic_id_list[n]?r.del_graphic_id_list[n]=t.longs===String?String(e.del_graphic_id_list[n]):e.del_graphic_id_list[n]:r.del_graphic_id_list[n]=t.longs===String?W.Long.prototype.toString.call(e.del_graphic_id_list[n]):t.longs===Number?new W.LongBits(e.del_graphic_id_list[n].low>>>0,e.del_graphic_id_list[n].high>>>0).toNumber(!0):e.del_graphic_id_list[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_page_graphics_rsp=function(){function e(e){if(this.pages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.pages=W.emptyArray,e.prototype.operate_expire_time=W.Long?W.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.pages&&e.pages.length)for(var r=0;r<e.pages.length;++r)Y.proto_edu_tcpuplink.proto_get_page_graphics_info.encode(e.pages[r],t.uint32(18).fork()).ldelim();return null!=e.operate_expire_time&&Object.hasOwnProperty.call(e,"operate_expire_time")&&t.uint32(24).uint64(e.operate_expire_time),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.pages&&o.pages.length||(o.pages=[]),o.pages.push(Y.proto_edu_tcpuplink.proto_get_page_graphics_info.decode(e,e.uint32()));break;case 3:o.operate_expire_time=e.uint64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_page_graphics_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_get_page_graphics_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}if(e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics_rsp.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r){if("object"!=typeof e.pages[r])throw TypeError(".proto_edu_tcpuplink.proto_get_page_graphics_rsp.pages: object expected");t.pages[r]=Y.proto_edu_tcpuplink.proto_get_page_graphics_info.fromObject(e.pages[r])}}return null!=e.operate_expire_time&&(W.Long?(t.operate_expire_time=W.Long.fromValue(e.operate_expire_time)).unsigned=!0:"string"==typeof e.operate_expire_time?t.operate_expire_time=parseInt(e.operate_expire_time,10):"number"==typeof e.operate_expire_time?t.operate_expire_time=e.operate_expire_time:"object"==typeof e.operate_expire_time&&(t.operate_expire_time=new W.LongBits(e.operate_expire_time.low>>>0,e.operate_expire_time.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[]),t.defaults)if(r.rsp_head=null,W.Long){var o=new W.Long(0,0,!0);r.operate_expire_time=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.operate_expire_time=t.longs===String?"0":0;if(null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),e.pages&&e.pages.length){r.pages=[];for(var n=0;n<e.pages.length;++n)r.pages[n]=Y.proto_edu_tcpuplink.proto_get_page_graphics_info.toObject(e.pages[n],t)}return null!=e.operate_expire_time&&e.hasOwnProperty("operate_expire_time")&&("number"==typeof e.operate_expire_time?r.operate_expire_time=t.longs===String?String(e.operate_expire_time):e.operate_expire_time:r.operate_expire_time=t.longs===String?W.Long.prototype.toString.call(e.operate_expire_time):t.longs===Number?new W.LongBits(e.operate_expire_time.low>>>0,e.operate_expire_time.high>>>0).toNumber(!0):e.operate_expire_time),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_user_auth_req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_user_auth_req;e.pos<r;){var n=e.uint32();n>>>3===1?o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32()):e.skipType(7&n)}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_user_auth_req)return e;var t=new Y.proto_edu_tcpuplink.proto_get_user_auth_req;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_get_user_auth_req.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.req_head=null),null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_user_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.id_name=W.newBuffer([]),e.prototype.auth_seq=0,e.prototype.module_auth=W.emptyArray,e.prototype.graphic_auth=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.auth_seq&&Object.hasOwnProperty.call(e,"auth_seq")&&t.uint32(24).uint32(e.auth_seq),null!=e.module_auth&&e.module_auth.length){t.uint32(34).fork();for(var r=0;r<e.module_auth.length;++r)t.uint32(e.module_auth[r]);t.ldelim()}if(null!=e.graphic_auth&&e.graphic_auth.length){t.uint32(42).fork();for(var o=0;o<e.graphic_auth.length;++o)t.uint32(e.graphic_auth[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_user_auth_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.id_name=e.bytes();break;case 3:o.auth_seq=e.uint32();break;case 4:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 5:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_user_auth_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_get_user_auth_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_get_user_auth_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}if(null!=e.id_name&&("string"==typeof e.id_name?W.base64.decode(e.id_name,t.id_name=W.newBuffer(W.base64.length(e.id_name)),0):e.id_name.length&&(t.id_name=e.id_name)),null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_tcpuplink.proto_get_user_auth_rsp.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_tcpuplink.proto_get_user_auth_rsp.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.rsp_head=null,t.bytes===String?r.id_name="":(r.id_name=[],t.bytes!==Array&&(r.id_name=W.newBuffer(r.id_name))),r.auth_seq=0),null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=t.bytes===String?W.base64.encode(e.id_name,0,e.id_name.length):t.bytes===Array?Array.prototype.slice.call(e.id_name):e.id_name),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_room_auth_req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.req_head=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&Y.proto_edu_tcpuplink.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_room_auth_req;e.pos<r;){var n=e.uint32();n>>>3===1?o.req_head=Y.proto_edu_tcpuplink.ReqHead.decode(e,e.uint32()):e.skipType(7&n)}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_room_auth_req)return e;var t=new Y.proto_edu_tcpuplink.proto_get_room_auth_req;if(null!=e.req_head){if("object"!=typeof e.req_head)throw TypeError(".proto_edu_tcpuplink.proto_get_room_auth_req.req_head: object expected");t.req_head=Y.proto_edu_tcpuplink.ReqHead.fromObject(e.req_head)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.req_head=null),null!=e.req_head&&e.hasOwnProperty("req_head")&&(r.req_head=Y.proto_edu_tcpuplink.ReqHead.toObject(e.req_head,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.proto_get_room_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rsp_head=null,e.prototype.auth_seq=0,e.prototype.module_auth=W.emptyArray,e.prototype.graphic_auth=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&Y.proto_edu_tcpuplink.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.auth_seq&&Object.hasOwnProperty.call(e,"auth_seq")&&t.uint32(16).uint32(e.auth_seq),null!=e.module_auth&&e.module_auth.length){t.uint32(26).fork();for(var r=0;r<e.module_auth.length;++r)t.uint32(e.module_auth[r]);t.ldelim()}if(null!=e.graphic_auth&&e.graphic_auth.length){t.uint32(34).fork();for(var o=0;o<e.graphic_auth.length;++o)t.uint32(e.graphic_auth[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.proto_get_room_auth_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rsp_head=Y.proto_edu_tcpuplink.RspHead.decode(e,e.uint32());break;case 2:o.auth_seq=e.uint32();break;case 3:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 4:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.proto_get_room_auth_rsp)return e;var t=new Y.proto_edu_tcpuplink.proto_get_room_auth_rsp;if(null!=e.rsp_head){if("object"!=typeof e.rsp_head)throw TypeError(".proto_edu_tcpuplink.proto_get_room_auth_rsp.rsp_head: object expected");t.rsp_head=Y.proto_edu_tcpuplink.RspHead.fromObject(e.rsp_head)}if(null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_tcpuplink.proto_get_room_auth_rsp.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_tcpuplink.proto_get_room_auth_rsp.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.rsp_head=null,r.auth_seq=0),null!=e.rsp_head&&e.hasOwnProperty("rsp_head")&&(r.rsp_head=Y.proto_edu_tcpuplink.RspHead.toObject(e.rsp_head,t)),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.E_PUSH_CMD=function(){var e={},t=Object.create(e);return t[e[0]="push_cmd_none"]=0,t[e[291001]="push_cmd_set_room"]=291001,t[e[291002]="push_cmd_set_user"]=291002,t[e[291003]="push_cmd_joinlive"]=291003,t[e[291101]="push_cmd_set_mod"]=291101,t[e[291201]="push_cmd_draw_graphics"]=291201,t[e[291202]="push_cmd_clear_graphics"]=291202,t[e[291203]="push_cmd_draw_page_graphics"]=291203,t[e[291204]="push_cmd_clear_page_graphics"]=291204,t[e[291205]="push_cmd_clear_user_graphic_list"]=291205,t[e[291401]="push_cmd_qaa"]=291401,t[e[291501]="push_cmd_set_user_auth"]=291501,t[e[291502]="push_cmd_set_room_auth"]=291502,t}(),e.push_set_room=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.notice_info="",e.prototype.room_extra_info_seq=0,e.prototype.qaa_disable=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.mute&&Object.hasOwnProperty.call(e,"mute")&&t.uint32(16).bool(e.mute),null!=e.silenced&&Object.hasOwnProperty.call(e,"silenced")&&t.uint32(24).bool(e.silenced),null!=e.notice_info&&Object.hasOwnProperty.call(e,"notice_info")&&t.uint32(34).string(e.notice_info),null!=e.room_extra_info_seq&&Object.hasOwnProperty.call(e,"room_extra_info_seq")&&t.uint32(40).uint32(e.room_extra_info_seq),null!=e.qaa_disable&&Object.hasOwnProperty.call(e,"qaa_disable")&&t.uint32(48).bool(e.qaa_disable),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_set_room;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.mute=e.bool();break;case 3:o.silenced=e.bool();break;case 4:o.notice_info=e.string();break;case 5:o.room_extra_info_seq=e.uint32();break;case 6:o.qaa_disable=e.bool();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_set_room)return e;var t=new Y.proto_edu_tcpuplink.push_set_room;return null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.mute&&(t.mute=Boolean(e.mute)),null!=e.silenced&&(t.silenced=Boolean(e.silenced)),null!=e.notice_info&&(t.notice_info=String(e.notice_info)),null!=e.room_extra_info_seq&&(t.room_extra_info_seq=e.room_extra_info_seq>>>0),null!=e.qaa_disable&&(t.qaa_disable=Boolean(e.qaa_disable)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.room_id="",r.mute=!1,r.silenced=!1,r.notice_info="",r.room_extra_info_seq=0,r.qaa_disable=!1),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.mute&&e.hasOwnProperty("mute")&&(r.mute=e.mute),null!=e.silenced&&e.hasOwnProperty("silenced")&&(r.silenced=e.silenced),null!=e.notice_info&&e.hasOwnProperty("notice_info")&&(r.notice_info=e.notice_info),null!=e.room_extra_info_seq&&e.hasOwnProperty("room_extra_info_seq")&&(r.room_extra_info_seq=e.room_extra_info_seq),null!=e.qaa_disable&&e.hasOwnProperty("qaa_disable")&&(r.qaa_disable=e.qaa_disable),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_set_user=function(){function e(e){if(this.action_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.user_list_seq=0,e.prototype.user_edu_seq=0,e.prototype.action_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.user_list_seq&&Object.hasOwnProperty.call(e,"user_list_seq")&&t.uint32(16).uint32(e.user_list_seq),null!=e.user_edu_seq&&Object.hasOwnProperty.call(e,"user_edu_seq")&&t.uint32(24).uint32(e.user_edu_seq),null!=e.action_list&&e.action_list.length)for(var r=0;r<e.action_list.length;++r)Y.proto_edu_tcpuplink.push_set_user_action.encode(e.action_list[r],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_set_user;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.user_list_seq=e.uint32();break;case 3:o.user_edu_seq=e.uint32();break;case 4:o.action_list&&o.action_list.length||(o.action_list=[]),o.action_list.push(Y.proto_edu_tcpuplink.push_set_user_action.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_set_user)return e;var t=new Y.proto_edu_tcpuplink.push_set_user;if(null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.user_list_seq&&(t.user_list_seq=e.user_list_seq>>>0),null!=e.user_edu_seq&&(t.user_edu_seq=e.user_edu_seq>>>0),e.action_list){if(!Array.isArray(e.action_list))throw TypeError(".proto_edu_tcpuplink.push_set_user.action_list: array expected");t.action_list=[];for(var r=0;r<e.action_list.length;++r){if("object"!=typeof e.action_list[r])throw TypeError(".proto_edu_tcpuplink.push_set_user.action_list: object expected");t.action_list[r]=Y.proto_edu_tcpuplink.push_set_user_action.fromObject(e.action_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.action_list=[]),t.defaults&&(r.room_id="",r.user_list_seq=0,r.user_edu_seq=0),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.user_list_seq&&e.hasOwnProperty("user_list_seq")&&(r.user_list_seq=e.user_list_seq),null!=e.user_edu_seq&&e.hasOwnProperty("user_edu_seq")&&(r.user_edu_seq=e.user_edu_seq),e.action_list&&e.action_list.length){r.action_list=[];for(var o=0;o<e.action_list.length;++o)r.action_list[o]=Y.proto_edu_tcpuplink.push_set_user_action.toObject(e.action_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_set_user_action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.action=0,e.prototype.id_name="",e.prototype.id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.role=0,e.prototype.nick_name="",e.prototype.enter_time=W.Long?W.Long.fromBits(0,0,!1):0,e.prototype.avatar="",e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.raise_hand=!1,e.prototype.gift_count=0,e.prototype.permissions=0,e.prototype.group_code=0,e.prototype.group_name="",e.prototype.video=!1,e.prototype.is_modify_avatar=!1,e.prototype.is_modify_mute=!1,e.prototype.is_modify_silenced=!1,e.prototype.is_modify_raise_hand=!1,e.prototype.is_modify_gift_count=!1,e.prototype.is_modify_permissions=!1,e.prototype.is_modify_group_code=!1,e.prototype.is_modify_group_name=!1,e.prototype.is_modify_video=!1,e.prototype.wait=0,e.prototype.is_modify_role=!1,e.prototype.is_modify_nick_name=!1,e.prototype.is_modify_wait=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).uint32(e.action),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).string(e.id_name),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(24).uint64(e.id),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(42).string(e.nick_name),null!=e.enter_time&&Object.hasOwnProperty.call(e,"enter_time")&&t.uint32(48).int64(e.enter_time),null!=e.avatar&&Object.hasOwnProperty.call(e,"avatar")&&t.uint32(58).string(e.avatar),null!=e.mute&&Object.hasOwnProperty.call(e,"mute")&&t.uint32(64).bool(e.mute),null!=e.silenced&&Object.hasOwnProperty.call(e,"silenced")&&t.uint32(72).bool(e.silenced),null!=e.raise_hand&&Object.hasOwnProperty.call(e,"raise_hand")&&t.uint32(80).bool(e.raise_hand),null!=e.gift_count&&Object.hasOwnProperty.call(e,"gift_count")&&t.uint32(88).uint32(e.gift_count),null!=e.permissions&&Object.hasOwnProperty.call(e,"permissions")&&t.uint32(96).uint32(e.permissions),null!=e.group_code&&Object.hasOwnProperty.call(e,"group_code")&&t.uint32(104).uint32(e.group_code),null!=e.group_name&&Object.hasOwnProperty.call(e,"group_name")&&t.uint32(114).string(e.group_name),null!=e.video&&Object.hasOwnProperty.call(e,"video")&&t.uint32(120).bool(e.video),null!=e.is_modify_avatar&&Object.hasOwnProperty.call(e,"is_modify_avatar")&&t.uint32(128).bool(e.is_modify_avatar),null!=e.is_modify_mute&&Object.hasOwnProperty.call(e,"is_modify_mute")&&t.uint32(136).bool(e.is_modify_mute),null!=e.is_modify_silenced&&Object.hasOwnProperty.call(e,"is_modify_silenced")&&t.uint32(144).bool(e.is_modify_silenced),null!=e.is_modify_raise_hand&&Object.hasOwnProperty.call(e,"is_modify_raise_hand")&&t.uint32(152).bool(e.is_modify_raise_hand),null!=e.is_modify_gift_count&&Object.hasOwnProperty.call(e,"is_modify_gift_count")&&t.uint32(160).bool(e.is_modify_gift_count),null!=e.is_modify_permissions&&Object.hasOwnProperty.call(e,"is_modify_permissions")&&t.uint32(168).bool(e.is_modify_permissions),null!=e.is_modify_group_code&&Object.hasOwnProperty.call(e,"is_modify_group_code")&&t.uint32(176).bool(e.is_modify_group_code),null!=e.is_modify_group_name&&Object.hasOwnProperty.call(e,"is_modify_group_name")&&t.uint32(184).bool(e.is_modify_group_name),null!=e.is_modify_video&&Object.hasOwnProperty.call(e,"is_modify_video")&&t.uint32(192).bool(e.is_modify_video),null!=e.wait&&Object.hasOwnProperty.call(e,"wait")&&t.uint32(200).uint32(e.wait),null!=e.is_modify_role&&Object.hasOwnProperty.call(e,"is_modify_role")&&t.uint32(208).bool(e.is_modify_role),null!=e.is_modify_nick_name&&Object.hasOwnProperty.call(e,"is_modify_nick_name")&&t.uint32(216).bool(e.is_modify_nick_name),null!=e.is_modify_wait&&Object.hasOwnProperty.call(e,"is_modify_wait")&&t.uint32(224).bool(e.is_modify_wait),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_set_user_action;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.action=e.uint32();break;case 2:o.id_name=e.string();break;case 3:o.id=e.uint64();break;case 4:o.role=e.uint32();break;case 5:o.nick_name=e.string();break;case 6:o.enter_time=e.int64();break;case 7:o.avatar=e.string();break;case 8:o.mute=e.bool();break;case 9:o.silenced=e.bool();break;case 10:o.raise_hand=e.bool();break;case 11:o.gift_count=e.uint32();break;case 12:o.permissions=e.uint32();break;case 13:o.group_code=e.uint32();break;case 14:o.group_name=e.string();break;case 15:o.video=e.bool();break;case 16:o.is_modify_avatar=e.bool();break;case 17:o.is_modify_mute=e.bool();break;case 18:o.is_modify_silenced=e.bool();break;case 19:o.is_modify_raise_hand=e.bool();break;case 20:o.is_modify_gift_count=e.bool();break;case 21:o.is_modify_permissions=e.bool();break;case 22:o.is_modify_group_code=e.bool();break;case 23:o.is_modify_group_name=e.bool();break;case 24:o.is_modify_video=e.bool();break;case 25:o.wait=e.uint32();break;case 26:o.is_modify_role=e.bool();break;case 27:o.is_modify_nick_name=e.bool();break;case 28:o.is_modify_wait=e.bool();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_set_user_action)return e;var t=new Y.proto_edu_tcpuplink.push_set_user_action;return null!=e.action&&(t.action=e.action>>>0),null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.id&&(W.Long?(t.id=W.Long.fromValue(e.id)).unsigned=!0:"string"==typeof e.id?t.id=parseInt(e.id,10):"number"==typeof e.id?t.id=e.id:"object"==typeof e.id&&(t.id=new W.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber(!0))),null!=e.role&&(t.role=e.role>>>0),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.enter_time&&(W.Long?(t.enter_time=W.Long.fromValue(e.enter_time)).unsigned=!1:"string"==typeof e.enter_time?t.enter_time=parseInt(e.enter_time,10):"number"==typeof e.enter_time?t.enter_time=e.enter_time:"object"==typeof e.enter_time&&(t.enter_time=new W.LongBits(e.enter_time.low>>>0,e.enter_time.high>>>0).toNumber())),null!=e.avatar&&(t.avatar=String(e.avatar)),null!=e.mute&&(t.mute=Boolean(e.mute)),null!=e.silenced&&(t.silenced=Boolean(e.silenced)),null!=e.raise_hand&&(t.raise_hand=Boolean(e.raise_hand)),null!=e.gift_count&&(t.gift_count=e.gift_count>>>0),null!=e.permissions&&(t.permissions=e.permissions>>>0),null!=e.group_code&&(t.group_code=e.group_code>>>0),null!=e.group_name&&(t.group_name=String(e.group_name)),null!=e.video&&(t.video=Boolean(e.video)),null!=e.is_modify_avatar&&(t.is_modify_avatar=Boolean(e.is_modify_avatar)),null!=e.is_modify_mute&&(t.is_modify_mute=Boolean(e.is_modify_mute)),null!=e.is_modify_silenced&&(t.is_modify_silenced=Boolean(e.is_modify_silenced)),null!=e.is_modify_raise_hand&&(t.is_modify_raise_hand=Boolean(e.is_modify_raise_hand)),null!=e.is_modify_gift_count&&(t.is_modify_gift_count=Boolean(e.is_modify_gift_count)),null!=e.is_modify_permissions&&(t.is_modify_permissions=Boolean(e.is_modify_permissions)),null!=e.is_modify_group_code&&(t.is_modify_group_code=Boolean(e.is_modify_group_code)),null!=e.is_modify_group_name&&(t.is_modify_group_name=Boolean(e.is_modify_group_name)),null!=e.is_modify_video&&(t.is_modify_video=Boolean(e.is_modify_video)),null!=e.wait&&(t.wait=e.wait>>>0),null!=e.is_modify_role&&(t.is_modify_role=Boolean(e.is_modify_role)),null!=e.is_modify_nick_name&&(t.is_modify_nick_name=Boolean(e.is_modify_nick_name)),null!=e.is_modify_wait&&(t.is_modify_wait=Boolean(e.is_modify_wait)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.action=0,r.id_name="",W.Long){var o=new W.Long(0,0,!0);r.id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.id=t.longs===String?"0":0;if(r.role=0,r.nick_name="",W.Long){var n=new W.Long(0,0,!1);r.enter_time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.enter_time=t.longs===String?"0":0;r.avatar="",r.mute=!1,r.silenced=!1,r.raise_hand=!1,r.gift_count=0,r.permissions=0,r.group_code=0,r.group_name="",r.video=!1,r.is_modify_avatar=!1,r.is_modify_mute=!1,r.is_modify_silenced=!1,r.is_modify_raise_hand=!1,r.is_modify_gift_count=!1,r.is_modify_permissions=!1,r.is_modify_group_code=!1,r.is_modify_group_name=!1,r.is_modify_video=!1,r.wait=0,r.is_modify_role=!1,r.is_modify_nick_name=!1,r.is_modify_wait=!1}return null!=e.action&&e.hasOwnProperty("action")&&(r.action=e.action),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.id&&e.hasOwnProperty("id")&&("number"==typeof e.id?r.id=t.longs===String?String(e.id):e.id:r.id=t.longs===String?W.Long.prototype.toString.call(e.id):t.longs===Number?new W.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber(!0):e.id),null!=e.role&&e.hasOwnProperty("role")&&(r.role=e.role),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=e.nick_name),null!=e.enter_time&&e.hasOwnProperty("enter_time")&&("number"==typeof e.enter_time?r.enter_time=t.longs===String?String(e.enter_time):e.enter_time:r.enter_time=t.longs===String?W.Long.prototype.toString.call(e.enter_time):t.longs===Number?new W.LongBits(e.enter_time.low>>>0,e.enter_time.high>>>0).toNumber():e.enter_time),null!=e.avatar&&e.hasOwnProperty("avatar")&&(r.avatar=e.avatar),null!=e.mute&&e.hasOwnProperty("mute")&&(r.mute=e.mute),null!=e.silenced&&e.hasOwnProperty("silenced")&&(r.silenced=e.silenced),null!=e.raise_hand&&e.hasOwnProperty("raise_hand")&&(r.raise_hand=e.raise_hand),null!=e.gift_count&&e.hasOwnProperty("gift_count")&&(r.gift_count=e.gift_count),null!=e.permissions&&e.hasOwnProperty("permissions")&&(r.permissions=e.permissions),null!=e.group_code&&e.hasOwnProperty("group_code")&&(r.group_code=e.group_code),null!=e.group_name&&e.hasOwnProperty("group_name")&&(r.group_name=e.group_name),null!=e.video&&e.hasOwnProperty("video")&&(r.video=e.video),null!=e.is_modify_avatar&&e.hasOwnProperty("is_modify_avatar")&&(r.is_modify_avatar=e.is_modify_avatar),null!=e.is_modify_mute&&e.hasOwnProperty("is_modify_mute")&&(r.is_modify_mute=e.is_modify_mute),null!=e.is_modify_silenced&&e.hasOwnProperty("is_modify_silenced")&&(r.is_modify_silenced=e.is_modify_silenced),null!=e.is_modify_raise_hand&&e.hasOwnProperty("is_modify_raise_hand")&&(r.is_modify_raise_hand=e.is_modify_raise_hand),null!=e.is_modify_gift_count&&e.hasOwnProperty("is_modify_gift_count")&&(r.is_modify_gift_count=e.is_modify_gift_count),null!=e.is_modify_permissions&&e.hasOwnProperty("is_modify_permissions")&&(r.is_modify_permissions=e.is_modify_permissions),null!=e.is_modify_group_code&&e.hasOwnProperty("is_modify_group_code")&&(r.is_modify_group_code=e.is_modify_group_code),null!=e.is_modify_group_name&&e.hasOwnProperty("is_modify_group_name")&&(r.is_modify_group_name=e.is_modify_group_name),null!=e.is_modify_video&&e.hasOwnProperty("is_modify_video")&&(r.is_modify_video=e.is_modify_video),null!=e.wait&&e.hasOwnProperty("wait")&&(r.wait=e.wait),null!=e.is_modify_role&&e.hasOwnProperty("is_modify_role")&&(r.is_modify_role=e.is_modify_role),null!=e.is_modify_nick_name&&e.hasOwnProperty("is_modify_nick_name")&&(r.is_modify_nick_name=e.is_modify_nick_name),null!=e.is_modify_wait&&e.hasOwnProperty("is_modify_wait")&&(r.is_modify_wait=e.is_modify_wait),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_joinlive=function(){function e(e){if(this.action_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.last_seq=0,e.prototype.action_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.last_seq&&Object.hasOwnProperty.call(e,"last_seq")&&t.uint32(16).uint32(e.last_seq),null!=e.action_list&&e.action_list.length)for(var r=0;r<e.action_list.length;++r)Y.proto_edu_tcpuplink.push_joinlive_action.encode(e.action_list[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_joinlive;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.last_seq=e.uint32();break;case 3:o.action_list&&o.action_list.length||(o.action_list=[]),o.action_list.push(Y.proto_edu_tcpuplink.push_joinlive_action.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_joinlive)return e;var t=new Y.proto_edu_tcpuplink.push_joinlive;if(null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.last_seq&&(t.last_seq=e.last_seq>>>0),e.action_list){if(!Array.isArray(e.action_list))throw TypeError(".proto_edu_tcpuplink.push_joinlive.action_list: array expected");t.action_list=[];for(var r=0;r<e.action_list.length;++r){if("object"!=typeof e.action_list[r])throw TypeError(".proto_edu_tcpuplink.push_joinlive.action_list: object expected");t.action_list[r]=Y.proto_edu_tcpuplink.push_joinlive_action.fromObject(e.action_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.action_list=[]),t.defaults&&(r.room_id="",r.last_seq=0),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.last_seq&&e.hasOwnProperty("last_seq")&&(r.last_seq=e.last_seq),e.action_list&&e.action_list.length){r.action_list=[];for(var o=0;o<e.action_list.length;++o)r.action_list[o]=Y.proto_edu_tcpuplink.push_joinlive_action.toObject(e.action_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_joinlive_action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.action=0,e.prototype.id_name="",e.prototype.joinlive_req=0,e.prototype.old_pos=0,e.prototype.new_pos=0,e.prototype.nick_name="",e.prototype.role=0,e.prototype.join_type=0,e.prototype.state=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).uint32(e.action),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).string(e.id_name),null!=e.joinlive_req&&Object.hasOwnProperty.call(e,"joinlive_req")&&t.uint32(24).uint32(e.joinlive_req),null!=e.old_pos&&Object.hasOwnProperty.call(e,"old_pos")&&t.uint32(32).uint32(e.old_pos),null!=e.new_pos&&Object.hasOwnProperty.call(e,"new_pos")&&t.uint32(40).uint32(e.new_pos),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(50).string(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(56).uint32(e.role),null!=e.join_type&&Object.hasOwnProperty.call(e,"join_type")&&t.uint32(64).uint32(e.join_type),null!=e.state&&Object.hasOwnProperty.call(e,"state")&&t.uint32(72).uint32(e.state),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_joinlive_action;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.action=e.uint32();break;case 2:o.id_name=e.string();break;case 3:o.joinlive_req=e.uint32();break;case 4:o.old_pos=e.uint32();break;case 5:o.new_pos=e.uint32();break;case 6:o.nick_name=e.string();break;case 7:o.role=e.uint32();break;case 8:o.join_type=e.uint32();break;case 9:o.state=e.uint32();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_joinlive_action)return e;var t=new Y.proto_edu_tcpuplink.push_joinlive_action;return null!=e.action&&(t.action=e.action>>>0),null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.joinlive_req&&(t.joinlive_req=e.joinlive_req>>>0),null!=e.old_pos&&(t.old_pos=e.old_pos>>>0),null!=e.new_pos&&(t.new_pos=e.new_pos>>>0),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.role&&(t.role=e.role>>>0),null!=e.join_type&&(t.join_type=e.join_type>>>0),null!=e.state&&(t.state=e.state>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.action=0,r.id_name="",r.joinlive_req=0,r.old_pos=0,r.new_pos=0,r.nick_name="",r.role=0,r.join_type=0,r.state=0),null!=e.action&&e.hasOwnProperty("action")&&(r.action=e.action),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.joinlive_req&&e.hasOwnProperty("joinlive_req")&&(r.joinlive_req=e.joinlive_req),null!=e.old_pos&&e.hasOwnProperty("old_pos")&&(r.old_pos=e.old_pos),null!=e.new_pos&&e.hasOwnProperty("new_pos")&&(r.new_pos=e.new_pos),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=e.nick_name),null!=e.role&&e.hasOwnProperty("role")&&(r.role=e.role),null!=e.join_type&&e.hasOwnProperty("join_type")&&(r.join_type=e.join_type),null!=e.state&&e.hasOwnProperty("state")&&(r.state=e.state),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_set_mod=function(){function e(e){if(this.action_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.mod_list_seq=0,e.prototype.action_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(16).uint32(e.mod_list_seq),null!=e.action_list&&e.action_list.length)for(var r=0;r<e.action_list.length;++r)Y.proto_edu_tcpuplink.push_set_mod_action.encode(e.action_list[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_set_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.mod_list_seq=e.uint32();break;case 3:o.action_list&&o.action_list.length||(o.action_list=[]),o.action_list.push(Y.proto_edu_tcpuplink.push_set_mod_action.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_set_mod)return e;var t=new Y.proto_edu_tcpuplink.push_set_mod;if(null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),e.action_list){if(!Array.isArray(e.action_list))throw TypeError(".proto_edu_tcpuplink.push_set_mod.action_list: array expected");t.action_list=[];for(var r=0;r<e.action_list.length;++r){if("object"!=typeof e.action_list[r])throw TypeError(".proto_edu_tcpuplink.push_set_mod.action_list: object expected");t.action_list[r]=Y.proto_edu_tcpuplink.push_set_mod_action.fromObject(e.action_list[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.action_list=[]),t.defaults&&(r.room_id="",r.mod_list_seq=0),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(r.mod_list_seq=e.mod_list_seq),e.action_list&&e.action_list.length){r.action_list=[];for(var o=0;o<e.action_list.length;++o)r.action_list[o]=Y.proto_edu_tcpuplink.push_set_mod_action.toObject(e.action_list[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_set_mod_action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.action=0,e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_seq=0,e.prototype.mod_title="",e.prototype.mod_pos="",e.prototype.mod_status=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_create_time=W.Long?W.Long.fromBits(0,0,!1):0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.prototype.is_modify_mod_scale=!1,e.prototype.mod_scale="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).uint32(e.action),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(24).uint32(e.mod_type),null!=e.mod_subtype&&Object.hasOwnProperty.call(e,"mod_subtype")&&t.uint32(32).uint32(e.mod_subtype),null!=e.mod_seq&&Object.hasOwnProperty.call(e,"mod_seq")&&t.uint32(40).uint32(e.mod_seq),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(50).string(e.mod_title),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(58).string(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(64).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(74).string(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(82).string(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(88).uint32(e.mod_reserve),null!=e.mod_create_time&&Object.hasOwnProperty.call(e,"mod_create_time")&&t.uint32(96).int64(e.mod_create_time),null!=e.is_modify_mod_title&&Object.hasOwnProperty.call(e,"is_modify_mod_title")&&t.uint32(104).bool(e.is_modify_mod_title),null!=e.is_modify_mod_pos&&Object.hasOwnProperty.call(e,"is_modify_mod_pos")&&t.uint32(112).bool(e.is_modify_mod_pos),null!=e.is_modify_mod_status&&Object.hasOwnProperty.call(e,"is_modify_mod_status")&&t.uint32(120).bool(e.is_modify_mod_status),null!=e.is_modify_mod_content&&Object.hasOwnProperty.call(e,"is_modify_mod_content")&&t.uint32(128).bool(e.is_modify_mod_content),null!=e.is_modify_mod_extra&&Object.hasOwnProperty.call(e,"is_modify_mod_extra")&&t.uint32(136).bool(e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&Object.hasOwnProperty.call(e,"is_modify_mod_reserve")&&t.uint32(144).bool(e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(157).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(165).float(e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_horizontal_percent")&&t.uint32(168).bool(e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_vertical_percent")&&t.uint32(176).bool(e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&Object.hasOwnProperty.call(e,"is_modify_mod_scale")&&t.uint32(184).bool(e.is_modify_mod_scale),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(194).string(e.mod_scale),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_set_mod_action;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.action=e.uint32();break;case 2:o.mod_id=e.uint64();break;case 3:o.mod_type=e.uint32();break;case 4:o.mod_subtype=e.uint32();break;case 5:o.mod_seq=e.uint32();break;case 6:o.mod_title=e.string();break;case 7:o.mod_pos=e.string();break;case 8:o.mod_status=e.uint64();break;case 9:o.mod_content=e.string();break;case 10:o.mod_extra=e.string();break;case 11:o.mod_reserve=e.uint32();break;case 12:o.mod_create_time=e.int64();break;case 13:o.is_modify_mod_title=e.bool();break;case 14:o.is_modify_mod_pos=e.bool();break;case 15:o.is_modify_mod_status=e.bool();break;case 16:o.is_modify_mod_content=e.bool();break;case 17:o.is_modify_mod_extra=e.bool();break;case 18:o.is_modify_mod_reserve=e.bool();break;case 19:o.mod_horizontal_percent=e.float();break;case 20:o.mod_vertical_percent=e.float();break;case 21:o.is_modify_mod_horizontal_percent=e.bool();break;case 22:o.is_modify_mod_vertical_percent=e.bool();break;case 23:o.is_modify_mod_scale=e.bool();break;case 24:o.mod_scale=e.string();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_set_mod_action)return e;var t=new Y.proto_edu_tcpuplink.push_set_mod_action;return null!=e.action&&(t.action=e.action>>>0),null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),null!=e.mod_subtype&&(t.mod_subtype=e.mod_subtype>>>0),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_title&&(t.mod_title=String(e.mod_title)),null!=e.mod_pos&&(t.mod_pos=String(e.mod_pos)),null!=e.mod_status&&(W.Long?(t.mod_status=W.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&(t.mod_content=String(e.mod_content)),null!=e.mod_extra&&(t.mod_extra=String(e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.mod_create_time&&(W.Long?(t.mod_create_time=W.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new W.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),null!=e.is_modify_mod_title&&(t.is_modify_mod_title=Boolean(e.is_modify_mod_title)),null!=e.is_modify_mod_pos&&(t.is_modify_mod_pos=Boolean(e.is_modify_mod_pos)),null!=e.is_modify_mod_status&&(t.is_modify_mod_status=Boolean(e.is_modify_mod_status)),null!=e.is_modify_mod_content&&(t.is_modify_mod_content=Boolean(e.is_modify_mod_content)),null!=e.is_modify_mod_extra&&(t.is_modify_mod_extra=Boolean(e.is_modify_mod_extra)),null!=e.is_modify_mod_reserve&&(t.is_modify_mod_reserve=Boolean(e.is_modify_mod_reserve)),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.is_modify_mod_horizontal_percent&&(t.is_modify_mod_horizontal_percent=Boolean(e.is_modify_mod_horizontal_percent)),null!=e.is_modify_mod_vertical_percent&&(t.is_modify_mod_vertical_percent=Boolean(e.is_modify_mod_vertical_percent)),null!=e.is_modify_mod_scale&&(t.is_modify_mod_scale=Boolean(e.is_modify_mod_scale)),null!=e.mod_scale&&(t.mod_scale=String(e.mod_scale)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.action=0,W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.mod_type=0,r.mod_subtype=0,r.mod_seq=0,r.mod_title="",r.mod_pos="",W.Long){var n=new W.Long(0,0,!0);r.mod_status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.mod_status=t.longs===String?"0":0;if(r.mod_content="",r.mod_extra="",r.mod_reserve=0,W.Long){var i=new W.Long(0,0,!1);r.mod_create_time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.mod_create_time=t.longs===String?"0":0;r.is_modify_mod_title=!1,r.is_modify_mod_pos=!1,r.is_modify_mod_status=!1,r.is_modify_mod_content=!1,r.is_modify_mod_extra=!1,r.is_modify_mod_reserve=!1,r.mod_horizontal_percent=0,r.mod_vertical_percent=0,r.is_modify_mod_horizontal_percent=!1,r.is_modify_mod_vertical_percent=!1,r.is_modify_mod_scale=!1,r.mod_scale=""}return null!=e.action&&e.hasOwnProperty("action")&&(r.action=e.action),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(r.mod_type=e.mod_type),null!=e.mod_subtype&&e.hasOwnProperty("mod_subtype")&&(r.mod_subtype=e.mod_subtype),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(r.mod_seq=e.mod_seq),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(r.mod_title=e.mod_title),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(r.mod_pos=e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?r.mod_status=t.longs===String?String(e.mod_status):e.mod_status:r.mod_status=t.longs===String?W.Long.prototype.toString.call(e.mod_status):t.longs===Number?new W.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(r.mod_content=e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(r.mod_extra=e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(r.mod_reserve=e.mod_reserve),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?r.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:r.mod_create_time=t.longs===String?W.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new W.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),null!=e.is_modify_mod_title&&e.hasOwnProperty("is_modify_mod_title")&&(r.is_modify_mod_title=e.is_modify_mod_title),null!=e.is_modify_mod_pos&&e.hasOwnProperty("is_modify_mod_pos")&&(r.is_modify_mod_pos=e.is_modify_mod_pos),null!=e.is_modify_mod_status&&e.hasOwnProperty("is_modify_mod_status")&&(r.is_modify_mod_status=e.is_modify_mod_status),null!=e.is_modify_mod_content&&e.hasOwnProperty("is_modify_mod_content")&&(r.is_modify_mod_content=e.is_modify_mod_content),null!=e.is_modify_mod_extra&&e.hasOwnProperty("is_modify_mod_extra")&&(r.is_modify_mod_extra=e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&e.hasOwnProperty("is_modify_mod_reserve")&&(r.is_modify_mod_reserve=e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(r.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(r.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&e.hasOwnProperty("is_modify_mod_horizontal_percent")&&(r.is_modify_mod_horizontal_percent=e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&e.hasOwnProperty("is_modify_mod_vertical_percent")&&(r.is_modify_mod_vertical_percent=e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&e.hasOwnProperty("is_modify_mod_scale")&&(r.is_modify_mod_scale=e.is_modify_mod_scale),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(r.mod_scale=e.mod_scale),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_draw_graphics=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.graphic_list=W.emptyArray,e.prototype.del_graphic_id_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.action_seq&&Object.hasOwnProperty.call(e,"action_seq")&&t.uint32(16).uint32(e.action_seq),null!=e.graphic_list&&e.graphic_list.length)for(var r=0;r<e.graphic_list.length;++r)Y.proto_edu_tcpuplink.proto_graphic.encode(e.graphic_list[r],t.uint32(26).fork()).ldelim();if(null!=e.del_graphic_id_list&&e.del_graphic_id_list.length){t.uint32(34).fork();for(var o=0;o<e.del_graphic_id_list.length;++o)t.uint64(e.del_graphic_id_list[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_draw_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.action_seq=e.uint32();break;case 3:o.graphic_list&&o.graphic_list.length||(o.graphic_list=[]),o.graphic_list.push(Y.proto_edu_tcpuplink.proto_graphic.decode(e,e.uint32()));break;case 4:if(o.del_graphic_id_list&&o.del_graphic_id_list.length||(o.del_graphic_id_list=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.del_graphic_id_list.push(e.uint64());else o.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_draw_graphics)return e;var t=new Y.proto_edu_tcpuplink.push_draw_graphics;if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),e.graphic_list){if(!Array.isArray(e.graphic_list))throw TypeError(".proto_edu_tcpuplink.push_draw_graphics.graphic_list: array expected");t.graphic_list=[];for(var r=0;r<e.graphic_list.length;++r){if("object"!=typeof e.graphic_list[r])throw TypeError(".proto_edu_tcpuplink.push_draw_graphics.graphic_list: object expected");t.graphic_list[r]=Y.proto_edu_tcpuplink.proto_graphic.fromObject(e.graphic_list[r])}}if(e.del_graphic_id_list){if(!Array.isArray(e.del_graphic_id_list))throw TypeError(".proto_edu_tcpuplink.push_draw_graphics.del_graphic_id_list: array expected");t.del_graphic_id_list=[];for(var o=0;o<e.del_graphic_id_list.length;++o)W.Long?(t.del_graphic_id_list[o]=W.Long.fromValue(e.del_graphic_id_list[o])).unsigned=!0:"string"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=parseInt(e.del_graphic_id_list[o],10):"number"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=e.del_graphic_id_list[o]:"object"==typeof e.del_graphic_id_list[o]&&(t.del_graphic_id_list[o]=new W.LongBits(e.del_graphic_id_list[o].low>>>0,e.del_graphic_id_list[o].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.graphic_list=[],r.del_graphic_id_list=[]),t.defaults){if(W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;r.action_seq=0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(r.action_seq=e.action_seq),e.graphic_list&&e.graphic_list.length){r.graphic_list=[];for(var n=0;n<e.graphic_list.length;++n)r.graphic_list[n]=Y.proto_edu_tcpuplink.proto_graphic.toObject(e.graphic_list[n],t)}if(e.del_graphic_id_list&&e.del_graphic_id_list.length){r.del_graphic_id_list=[];for(var i=0;i<e.del_graphic_id_list.length;++i)"number"==typeof e.del_graphic_id_list[i]?r.del_graphic_id_list[i]=t.longs===String?String(e.del_graphic_id_list[i]):e.del_graphic_id_list[i]:r.del_graphic_id_list[i]=t.longs===String?W.Long.prototype.toString.call(e.del_graphic_id_list[i]):t.longs===Number?new W.LongBits(e.del_graphic_id_list[i].low>>>0,e.del_graphic_id_list[i].high>>>0).toNumber(!0):e.del_graphic_id_list[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_draw_page_graphics=function(){function e(e){if(this.page_graphics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.page_graphics=W.emptyArray,e.prototype.timestamp=W.Long?W.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.page_graphics&&e.page_graphics.length)for(var r=0;r<e.page_graphics.length;++r)Y.proto_edu_tcpuplink.push_draw_graphics_info.encode(e.page_graphics[r],t.uint32(18).fork()).ldelim();return null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint64(e.timestamp),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_draw_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.page_graphics&&o.page_graphics.length||(o.page_graphics=[]),o.page_graphics.push(Y.proto_edu_tcpuplink.push_draw_graphics_info.decode(e,e.uint32()));break;case 3:o.timestamp=e.uint64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_draw_page_graphics)return e;var t=new Y.proto_edu_tcpuplink.push_draw_page_graphics;if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.page_graphics){if(!Array.isArray(e.page_graphics))throw TypeError(".proto_edu_tcpuplink.push_draw_page_graphics.page_graphics: array expected");t.page_graphics=[];for(var r=0;r<e.page_graphics.length;++r){if("object"!=typeof e.page_graphics[r])throw TypeError(".proto_edu_tcpuplink.push_draw_page_graphics.page_graphics: object expected");t.page_graphics[r]=Y.proto_edu_tcpuplink.push_draw_graphics_info.fromObject(e.page_graphics[r])}}return null!=e.timestamp&&(W.Long?(t.timestamp=W.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.page_graphics=[]),t.defaults){if(W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(W.Long){var n=new W.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.page_graphics&&e.page_graphics.length){r.page_graphics=[];for(var i=0;i<e.page_graphics.length;++i)r.page_graphics[i]=Y.proto_edu_tcpuplink.push_draw_graphics_info.toObject(e.page_graphics[i],t)}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?W.Long.prototype.toString.call(e.timestamp):t.longs===Number?new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_draw_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.action_seq=0,e.prototype.graphic_list=W.emptyArray,e.prototype.del_graphic_id_list=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.page&&Object.hasOwnProperty.call(e,"page")&&t.uint32(8).uint32(e.page),null!=e.action_seq&&Object.hasOwnProperty.call(e,"action_seq")&&t.uint32(16).uint32(e.action_seq),null!=e.graphic_list&&e.graphic_list.length)for(var r=0;r<e.graphic_list.length;++r)Y.proto_edu_tcpuplink.proto_graphic.encode(e.graphic_list[r],t.uint32(26).fork()).ldelim();if(null!=e.del_graphic_id_list&&e.del_graphic_id_list.length){t.uint32(34).fork();for(var o=0;o<e.del_graphic_id_list.length;++o)t.uint64(e.del_graphic_id_list[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_draw_graphics_info;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.page=e.uint32();break;case 2:o.action_seq=e.uint32();break;case 3:o.graphic_list&&o.graphic_list.length||(o.graphic_list=[]),o.graphic_list.push(Y.proto_edu_tcpuplink.proto_graphic.decode(e,e.uint32()));break;case 4:if(o.del_graphic_id_list&&o.del_graphic_id_list.length||(o.del_graphic_id_list=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.del_graphic_id_list.push(e.uint64());else o.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_draw_graphics_info)return e;var t=new Y.proto_edu_tcpuplink.push_draw_graphics_info;if(null!=e.page&&(t.page=e.page>>>0),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),e.graphic_list){if(!Array.isArray(e.graphic_list))throw TypeError(".proto_edu_tcpuplink.push_draw_graphics_info.graphic_list: array expected");t.graphic_list=[];for(var r=0;r<e.graphic_list.length;++r){if("object"!=typeof e.graphic_list[r])throw TypeError(".proto_edu_tcpuplink.push_draw_graphics_info.graphic_list: object expected");t.graphic_list[r]=Y.proto_edu_tcpuplink.proto_graphic.fromObject(e.graphic_list[r])}}if(e.del_graphic_id_list){if(!Array.isArray(e.del_graphic_id_list))throw TypeError(".proto_edu_tcpuplink.push_draw_graphics_info.del_graphic_id_list: array expected");t.del_graphic_id_list=[];for(var o=0;o<e.del_graphic_id_list.length;++o)W.Long?(t.del_graphic_id_list[o]=W.Long.fromValue(e.del_graphic_id_list[o])).unsigned=!0:"string"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=parseInt(e.del_graphic_id_list[o],10):"number"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=e.del_graphic_id_list[o]:"object"==typeof e.del_graphic_id_list[o]&&(t.del_graphic_id_list[o]=new W.LongBits(e.del_graphic_id_list[o].low>>>0,e.del_graphic_id_list[o].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.graphic_list=[],r.del_graphic_id_list=[]),t.defaults&&(r.page=0,r.action_seq=0),null!=e.page&&e.hasOwnProperty("page")&&(r.page=e.page),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(r.action_seq=e.action_seq),e.graphic_list&&e.graphic_list.length){r.graphic_list=[];for(var o=0;o<e.graphic_list.length;++o)r.graphic_list[o]=Y.proto_edu_tcpuplink.proto_graphic.toObject(e.graphic_list[o],t)}if(e.del_graphic_id_list&&e.del_graphic_id_list.length){r.del_graphic_id_list=[];for(var n=0;n<e.del_graphic_id_list.length;++n)"number"==typeof e.del_graphic_id_list[n]?r.del_graphic_id_list[n]=t.longs===String?String(e.del_graphic_id_list[n]):e.del_graphic_id_list[n]:r.del_graphic_id_list[n]=t.longs===String?W.Long.prototype.toString.call(e.del_graphic_id_list[n]):t.longs===Number?new W.LongBits(e.del_graphic_id_list[n].low>>>0,e.del_graphic_id_list[n].high>>>0).toNumber(!0):e.del_graphic_id_list[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_clear_graphics=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.id_name="",e.prototype.nick_name="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.action_seq&&Object.hasOwnProperty.call(e,"action_seq")&&t.uint32(16).uint32(e.action_seq),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).string(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).string(e.nick_name),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_clear_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:o.action_seq=e.uint32();break;case 3:o.id_name=e.string();break;case 4:o.nick_name=e.string();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_clear_graphics)return e;var t=new Y.proto_edu_tcpuplink.push_clear_graphics;return null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;r.action_seq=0,r.id_name="",r.nick_name=""}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(r.action_seq=e.action_seq),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=e.nick_name),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_clear_page_graphics=function(){function e(e){if(this.pages=[],this.action_seqs=[],this.layers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.pages=W.emptyArray,e.prototype.action_seqs=W.emptyArray,e.prototype.id_name="",e.prototype.nick_name="",e.prototype.timestamp=W.Long?W.Long.fromBits(0,0,!0):0,e.prototype.layers=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.pages&&e.pages.length){t.uint32(18).fork();for(var r=0;r<e.pages.length;++r)t.uint32(e.pages[r]);t.ldelim()}if(null!=e.action_seqs&&e.action_seqs.length){t.uint32(26).fork();for(var o=0;o<e.action_seqs.length;++o)t.uint32(e.action_seqs[o]);t.ldelim()}if(null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(34).string(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(42).string(e.nick_name),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),null!=e.layers&&e.layers.length){t.uint32(58).fork();for(var n=0;n<e.layers.length;++n)t.uint32(e.layers[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_clear_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint64();break;case 2:if(o.pages&&o.pages.length||(o.pages=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.pages.push(e.uint32());else o.pages.push(e.uint32());break;case 3:if(o.action_seqs&&o.action_seqs.length||(o.action_seqs=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.action_seqs.push(e.uint32());else o.action_seqs.push(e.uint32());break;case 4:o.id_name=e.string();break;case 5:o.nick_name=e.string();break;case 6:o.timestamp=e.uint64();break;case 7:if(o.layers&&o.layers.length||(o.layers=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)o.layers.push(e.uint32());else o.layers.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_clear_page_graphics)return e;var t=new Y.proto_edu_tcpuplink.push_clear_page_graphics;if(null!=e.mod_id&&(W.Long?(t.mod_id=W.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_tcpuplink.push_clear_page_graphics.pages: array expected");t.pages=[];for(var r=0;r<e.pages.length;++r)t.pages[r]=e.pages[r]>>>0}if(e.action_seqs){if(!Array.isArray(e.action_seqs))throw TypeError(".proto_edu_tcpuplink.push_clear_page_graphics.action_seqs: array expected");t.action_seqs=[];for(var o=0;o<e.action_seqs.length;++o)t.action_seqs[o]=e.action_seqs[o]>>>0}if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.timestamp&&(W.Long?(t.timestamp=W.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),e.layers){if(!Array.isArray(e.layers))throw TypeError(".proto_edu_tcpuplink.push_clear_page_graphics.layers: array expected");t.layers=[];for(var n=0;n<e.layers.length;++n)t.layers[n]=e.layers[n]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.pages=[],r.action_seqs=[],r.layers=[]),t.defaults){if(W.Long){var o=new W.Long(0,0,!0);r.mod_id=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.mod_id=t.longs===String?"0":0;if(r.id_name="",r.nick_name="",W.Long){var n=new W.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?r.mod_id=t.longs===String?String(e.mod_id):e.mod_id:r.mod_id=t.longs===String?W.Long.prototype.toString.call(e.mod_id):t.longs===Number?new W.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){r.pages=[];for(var i=0;i<e.pages.length;++i)r.pages[i]=e.pages[i]}if(e.action_seqs&&e.action_seqs.length){r.action_seqs=[];for(var s=0;s<e.action_seqs.length;++s)r.action_seqs[s]=e.action_seqs[s]}if(null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=e.nick_name),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?W.Long.prototype.toString.call(e.timestamp):t.longs===Number?new W.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),e.layers&&e.layers.length){r.layers=[];for(var a=0;a<e.layers.length;++a)r.layers[a]=e.layers[a]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_qaa=function(){function e(e){if(this.qaa_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.qaa_data=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.qaa_data&&e.qaa_data.length)for(var r=0;r<e.qaa_data.length;++r)Y.proto_edu_tcpuplink.push_qaa_data.encode(e.qaa_data[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_qaa;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.qaa_data&&o.qaa_data.length||(o.qaa_data=[]),o.qaa_data.push(Y.proto_edu_tcpuplink.push_qaa_data.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_qaa)return e;var t=new Y.proto_edu_tcpuplink.push_qaa;if(null!=e.room_id&&(t.room_id=String(e.room_id)),e.qaa_data){if(!Array.isArray(e.qaa_data))throw TypeError(".proto_edu_tcpuplink.push_qaa.qaa_data: array expected");t.qaa_data=[];for(var r=0;r<e.qaa_data.length;++r){if("object"!=typeof e.qaa_data[r])throw TypeError(".proto_edu_tcpuplink.push_qaa.qaa_data: object expected");t.qaa_data[r]=Y.proto_edu_tcpuplink.push_qaa_data.fromObject(e.qaa_data[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.qaa_data=[]),t.defaults&&(r.room_id=""),null!=e.room_id&&e.hasOwnProperty("room_id")&&(r.room_id=e.room_id),e.qaa_data&&e.qaa_data.length){r.qaa_data=[];for(var o=0;o<e.qaa_data.length;++o)r.qaa_data[o]=Y.proto_edu_tcpuplink.push_qaa_data.toObject(e.qaa_data[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_qaa_data=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.nick_name="",e.prototype.role=0,e.prototype.qaa_id="",e.prototype.qaa_target_id="",e.prototype.qaa_category=0,e.prototype.qaa_content="",e.prototype.send_time=W.Long?W.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=F.create()),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).string(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).string(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.qaa_id&&Object.hasOwnProperty.call(e,"qaa_id")&&t.uint32(34).string(e.qaa_id),null!=e.qaa_target_id&&Object.hasOwnProperty.call(e,"qaa_target_id")&&t.uint32(42).string(e.qaa_target_id),null!=e.qaa_category&&Object.hasOwnProperty.call(e,"qaa_category")&&t.uint32(48).uint32(e.qaa_category),null!=e.qaa_content&&Object.hasOwnProperty.call(e,"qaa_content")&&t.uint32(58).string(e.qaa_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(64).int64(e.send_time),t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_qaa_data;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.string();break;case 2:o.nick_name=e.string();break;case 3:o.role=e.uint32();break;case 4:o.qaa_id=e.string();break;case 5:o.qaa_target_id=e.string();break;case 6:o.qaa_category=e.uint32();break;case 7:o.qaa_content=e.string();break;case 8:o.send_time=e.int64();break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_qaa_data)return e;var t=new Y.proto_edu_tcpuplink.push_qaa_data;return null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.role&&(t.role=e.role>>>0),null!=e.qaa_id&&(t.qaa_id=String(e.qaa_id)),null!=e.qaa_target_id&&(t.qaa_target_id=String(e.qaa_target_id)),null!=e.qaa_category&&(t.qaa_category=e.qaa_category>>>0),null!=e.qaa_content&&(t.qaa_content=String(e.qaa_content)),null!=e.send_time&&(W.Long?(t.send_time=W.Long.fromValue(e.send_time)).unsigned=!1:"string"==typeof e.send_time?t.send_time=parseInt(e.send_time,10):"number"==typeof e.send_time?t.send_time=e.send_time:"object"==typeof e.send_time&&(t.send_time=new W.LongBits(e.send_time.low>>>0,e.send_time.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.id_name="",r.nick_name="",r.role=0,r.qaa_id="",r.qaa_target_id="",r.qaa_category=0,r.qaa_content="",W.Long){var o=new W.Long(0,0,!1);r.send_time=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.send_time=t.longs===String?"0":0;return null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(r.nick_name=e.nick_name),null!=e.role&&e.hasOwnProperty("role")&&(r.role=e.role),null!=e.qaa_id&&e.hasOwnProperty("qaa_id")&&(r.qaa_id=e.qaa_id),null!=e.qaa_target_id&&e.hasOwnProperty("qaa_target_id")&&(r.qaa_target_id=e.qaa_target_id),null!=e.qaa_category&&e.hasOwnProperty("qaa_category")&&(r.qaa_category=e.qaa_category),null!=e.qaa_content&&e.hasOwnProperty("qaa_content")&&(r.qaa_content=e.qaa_content),null!=e.send_time&&e.hasOwnProperty("send_time")&&("number"==typeof e.send_time?r.send_time=t.longs===String?String(e.send_time):e.send_time:r.send_time=t.longs===String?W.Long.prototype.toString.call(e.send_time):t.longs===Number?new W.LongBits(e.send_time.low>>>0,e.send_time.high>>>0).toNumber():e.send_time),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_user_auth=function(){function e(e){if(this.user_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.user_auth=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.user_auth&&e.user_auth.length)for(var r=0;r<e.user_auth.length;++r)Y.proto_edu_tcpuplink.push_user_auth_data.encode(e.user_auth[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_user_auth;e.pos<r;){var n=e.uint32();n>>>3===1?(o.user_auth&&o.user_auth.length||(o.user_auth=[]),o.user_auth.push(Y.proto_edu_tcpuplink.push_user_auth_data.decode(e,e.uint32()))):e.skipType(7&n)}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_user_auth)return e;var t=new Y.proto_edu_tcpuplink.push_user_auth;if(e.user_auth){if(!Array.isArray(e.user_auth))throw TypeError(".proto_edu_tcpuplink.push_user_auth.user_auth: array expected");t.user_auth=[];for(var r=0;r<e.user_auth.length;++r){if("object"!=typeof e.user_auth[r])throw TypeError(".proto_edu_tcpuplink.push_user_auth.user_auth: object expected");t.user_auth[r]=Y.proto_edu_tcpuplink.push_user_auth_data.fromObject(e.user_auth[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.user_auth=[]),e.user_auth&&e.user_auth.length){r.user_auth=[];for(var o=0;o<e.user_auth.length;++o)r.user_auth[o]=Y.proto_edu_tcpuplink.push_user_auth_data.toObject(e.user_auth[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_user_auth_data=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.auth_seq=0,e.prototype.module_auth=W.emptyArray,e.prototype.graphic_auth=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).string(e.id_name),null!=e.auth_seq&&Object.hasOwnProperty.call(e,"auth_seq")&&t.uint32(16).uint32(e.auth_seq),null!=e.module_auth&&e.module_auth.length){t.uint32(26).fork();for(var r=0;r<e.module_auth.length;++r)t.uint32(e.module_auth[r]);t.ldelim()}if(null!=e.graphic_auth&&e.graphic_auth.length){t.uint32(34).fork();for(var o=0;o<e.graphic_auth.length;++o)t.uint32(e.graphic_auth[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_user_auth_data;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.string();break;case 2:o.auth_seq=e.uint32();break;case 3:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 4:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_user_auth_data)return e;var t=new Y.proto_edu_tcpuplink.push_user_auth_data;if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_tcpuplink.push_user_auth_data.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_tcpuplink.push_user_auth_data.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.id_name="",r.auth_seq=0),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_room_auth=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.auth_seq=0,e.prototype.module_auth=W.emptyArray,e.prototype.graphic_auth=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.auth_seq&&Object.hasOwnProperty.call(e,"auth_seq")&&t.uint32(8).uint32(e.auth_seq),null!=e.module_auth&&e.module_auth.length){t.uint32(18).fork();for(var r=0;r<e.module_auth.length;++r)t.uint32(e.module_auth[r]);t.ldelim()}if(null!=e.graphic_auth&&e.graphic_auth.length){t.uint32(26).fork();for(var o=0;o<e.graphic_auth.length;++o)t.uint32(e.graphic_auth[o]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_room_auth;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.auth_seq=e.uint32();break;case 2:if(o.module_auth&&o.module_auth.length||(o.module_auth=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.module_auth.push(e.uint32());else o.module_auth.push(e.uint32());break;case 3:if(o.graphic_auth&&o.graphic_auth.length||(o.graphic_auth=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)o.graphic_auth.push(e.uint32());else o.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_room_auth)return e;var t=new Y.proto_edu_tcpuplink.push_room_auth;if(null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_tcpuplink.push_room_auth.module_auth: array expected");t.module_auth=[];for(var r=0;r<e.module_auth.length;++r)t.module_auth[r]=e.module_auth[r]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_tcpuplink.push_room_auth.graphic_auth: array expected");t.graphic_auth=[];for(var o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.module_auth=[],r.graphic_auth=[]),t.defaults&&(r.auth_seq=0),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(r.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){r.module_auth=[];for(var o=0;o<e.module_auth.length;++o)r.module_auth[o]=e.module_auth[o]}if(e.graphic_auth&&e.graphic_auth.length){r.graphic_auth=[];for(var n=0;n<e.graphic_auth.length;++n)r.graphic_auth[n]=e.graphic_auth[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.mod=function(){function e(e){if(this.graphic_ids=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=0,e.prototype.graphic_ids=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint32(e.mod_id),null!=e.graphic_ids&&e.graphic_ids.length){t.uint32(18).fork();for(var r=0;r<e.graphic_ids.length;++r)t.uint32(e.graphic_ids[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.mod_id=e.uint32();break;case 2:if(o.graphic_ids&&o.graphic_ids.length||(o.graphic_ids=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.graphic_ids.push(e.uint32());else o.graphic_ids.push(e.uint32());break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.mod)return e;var t=new Y.proto_edu_tcpuplink.mod;if(null!=e.mod_id&&(t.mod_id=e.mod_id>>>0),e.graphic_ids){if(!Array.isArray(e.graphic_ids))throw TypeError(".proto_edu_tcpuplink.mod.graphic_ids: array expected");t.graphic_ids=[];for(var r=0;r<e.graphic_ids.length;++r)t.graphic_ids[r]=e.graphic_ids[r]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.graphic_ids=[]),t.defaults&&(r.mod_id=0),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&(r.mod_id=e.mod_id),e.graphic_ids&&e.graphic_ids.length){r.graphic_ids=[];for(var o=0;o<e.graphic_ids.length;++o)r.graphic_ids[o]=e.graphic_ids[o]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e.push_clear_user_graphic_list=function(){function e(e){if(this.mods=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.mods=W.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=F.create()),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).string(e.id_name),null!=e.mods&&e.mods.length)for(var r=0;r<e.mods.length;++r)Y.proto_edu_tcpuplink.mod.encode(e.mods[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Z||(e=Z.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new Y.proto_edu_tcpuplink.push_clear_user_graphic_list;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.id_name=e.string();break;case 2:o.mods&&o.mods.length||(o.mods=[]),o.mods.push(Y.proto_edu_tcpuplink.mod.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},e.fromObject=function(e){if(e instanceof Y.proto_edu_tcpuplink.push_clear_user_graphic_list)return e;var t=new Y.proto_edu_tcpuplink.push_clear_user_graphic_list;if(null!=e.id_name&&(t.id_name=String(e.id_name)),e.mods){if(!Array.isArray(e.mods))throw TypeError(".proto_edu_tcpuplink.push_clear_user_graphic_list.mods: array expected");t.mods=[];for(var r=0;r<e.mods.length;++r){if("object"!=typeof e.mods[r])throw TypeError(".proto_edu_tcpuplink.push_clear_user_graphic_list.mods: object expected");t.mods[r]=Y.proto_edu_tcpuplink.mod.fromObject(e.mods[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.mods=[]),t.defaults&&(r.id_name=""),null!=e.id_name&&e.hasOwnProperty("id_name")&&(r.id_name=e.id_name),e.mods&&e.mods.length){r.mods=[];for(var o=0;o<e.mods.length;++o)r.mods[o]=Y.proto_edu_tcpuplink.mod.toObject(e.mods[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,B.util.toJSONOptions)},e}(),e}();var Q,K=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},J=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},X=function(){function e(){this.proto=Y,this.cmdReqMap={"/edu/sync":"proto_sync","/edu/get_room_auth":"proto_get_room_auth_req","/edu/get_user_auth":"proto_get_user_auth_req","/edu/create_mod":"proto_create_mod","/edu/destroy_mod":"proto_destroy_mod","/edu/get_mod":"proto_get_mod","/edu/get_mod_list":"proto_get_mod_list","/edu/modify_mod":"proto_modify_mod","/edu/get_page_graphics":"proto_get_page_graphics","/edu/clear_page_graphics":"proto_clear_page_graphics","/edu/draw_page_graphics":"proto_draw_page_graphics"},this.cmdRspMap={"/edu/sync_rsp":"proto_sync_rsp","/edu/get_room_auth_rsp":"proto_get_room_auth_rsp","/edu/get_user_auth_rsp":"proto_get_user_auth_rsp","/edu/create_mod_rsp":"proto_create_mod_rsp","/edu/destroy_mod_rsp":"proto_destroy_mod_rsp","/edu/get_mod_rsp":"proto_get_mod_rsp","/edu/get_mod_list_rsp":"proto_get_mod_list_rsp","/edu/modify_mod_rsp":"proto_modify_mod_rsp","/edu/get_page_graphics_rsp":"proto_get_page_graphics_rsp","/edu/clear_page_graphics_rsp":"proto_clear_page_graphics_rsp","/edu/draw_page_graphics_rsp":"proto_draw_page_graphics_rsp"},this.cmdPushMap={"/edu/push/set_mod":"push_set_mod","/edu/push/draw_page_graphics":"push_draw_page_graphics","/edu/push/clear_page_graphics":"push_clear_page_graphics","/edu/push/set_user_auth":"push_user_auth","/edu/push/set_room_auth":"push_room_auth","/edu/push/clear_user_graphic_list":"push_clear_user_graphic_list"},this.cmdMsg={reqHeader:"req_header",reqBody:"proto_biz_channel",reqBodyBody:"req",rspHeader:"rsp_header",rspBody:"proto_biz_channel_rsp",rspBodyBody:"rsp",pushHeader:"proto_push_header",pushBody:"proto_push_biz_channel",pushBodyBody:"proto_push_biz_hannel_req"}}return e.prototype.encodeMsg=function(e,t){return K(this,void 0,void 0,(function(){return J(this,(function(r){switch(r.label){case 0:return this.formatEduBody(t),JSON.stringify(t),[4,this.encode(this.proto.proto_edu_tcpuplink,this.cmdReqMap[e],t)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeMsg=function(e,t){return K(this,void 0,void 0,(function(){var r,o,n,i,s;return J(this,(function(a){switch(a.label){case 0:if("/sw/push"!==e.cmd)return[3,5];r=t.head.sub_cmd,o=t.msg_body,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.decodePushMsg(r,o)];case 2:return i=a.sent(),(s={sub_cmd:"",msg_body:{}}).sub_cmd=r,s.msg_body=this.mergePushBody(r,i),[2,s];case 3:return a.sent(),[3,4];case 4:return[3,10];case 5:return this.cmdRspMap[e.cmd]?[3,6]:[2];case 6:n=new Uint8Array(t),a.label=7;case 7:return a.trys.push([7,9,,10]),[4,this.decodeRspMsg(e,n,e.seq)];case 8:return i=a.sent(),[2,s=this.mergeRspBody(i,e.cmd)];case 9:return a.sent(),[3,10];case 10:return[2]}}))}))},e.prototype.checkSendLength=function(e,t){return K(this,void 0,void 0,(function(){var r,o;return J(this,(function(n){switch(n.label){case 0:return this.formatEduBody(t),[4,this.encode(this.proto.proto_edu_tcpuplink,this.cmdReqMap[e],t)];case 1:return r=n.sent(),[2,(o=r.length)>5e3?o:0]}}))}))},e.prototype.createUnknownError=function(e,t){return{cmd:t,header:{seq:e,code:1,message:"unknown error"},body:{}}},e.prototype.formatEduBody=function(e){e.mod_id&&(e.mod_id=x.a.fromString(e.mod_id,!0)),e.draw_pages&&e.draw_pages.forEach((function(e){e.draw_list.forEach((function(e){var t=e.graphic_id,r=e.attributes;t&&"string"==typeof t&&(e.graphic_id=x.a.fromString(t,!0)),r&&"string"==typeof r&&(e.attributes=Uint8Array.from(Array.from(unescape(encodeURIComponent(r))).map((function(e){return e.charCodeAt(0)}))))}))}))},e.prototype.mergeModList=function(e){e&&e.forEach((function(t,r){e[r]=Object.assign({mod_seq:0,graphic_list_seq:0,sync_interval:0,mod_reserve:1,mod_horizontal_percent:0,mod_vertical_percent:0,mod_extra:"",mod_scale:JSON.stringify({scale:1,ofs_x:0,ofs_y:0})},t)}))},e.prototype.mergePageGraphics=function(e,t){e&&e.forEach((function(r,o){e[o]=r||0,t&&(t[o]=t[o]||0)}))},e.prototype.mergeGraphicList=function(e){e&&e.forEach((function(t,r){e[r]=Object.assign({action_seq:0,zorder:1,x:0,y:0,size:0,color:0,layer:0},t)}))},e.prototype.mergeRspBody=function(e,t){var r=this;switch(e.rsp_head.code=e.rsp_head.code||0,t){case"/edu/sync_rsp":return Object.assign({sync_interval:0,room_auth_seq:0,user_auth_seq:0,mod_list_seq:0},e);case"/edu/get_room_auth_rsp":case"/edu/get_user_auth_rsp":return e.auth_seq=e.auth_seq||0,e;case"/edu/create_mod_rsp":case"/edu/modify_mod_rsp":return e.mod_seq=e.mod_seq||0,e.mod_list_seq=e.mod_list_seq||0,e;case"/edu/destroy_mod_rsp":return e.mod_list_seq=e.mod_list_seq||0,e;case"/edu/get_mod_rsp":return this.mergeModList(e.mod_list),e;case"/edu/get_mod_list_rsp":return e.mod_list_seq=e.mod_list_seq||0,this.mergeModList(e.mod_list),e;case"/edu/get_page_graphics_rsp":return e.pages&&e.pages.forEach((function(e){e.page=e.page||0,e.ret_graphic_list_seq=e.ret_graphic_list_seq||0,e.svr_graphic_list_seq=e.svr_graphic_list_seq||0,r.mergeGraphicList(e.graphic_list)})),e;case"/edu/clear_page_graphics_rsp":case"/edu/draw_page_graphics_rsp":return this.mergePageGraphics(e.pages,e.graphic_list_seqs),e}},e.prototype.mergePushBody=function(e,t){var r=this;switch(e){case"/edu/push/set_mod":return t.mod_list_seq=t.mod_list_seq||0,t.action_list&&t.action_list.forEach((function(e){e.is_modify_mod_extra&&(e.mod_extra=e.mod_extra||""),e.is_modify_mod_reserve&&(e.mod_reserve=e.mod_reserve||1),e.is_modify_mod_horizontal_percent&&(e.mod_horizontal_percent=e.mod_horizontal_percent||0),e.is_modify_mod_vertical_percent&&(e.mod_vertical_percent=e.mod_vertical_percent||0),e.is_modify_mod_scale&&(e.mod_scale=e.mod_scale||JSON.stringify({scale:1,ofs_x:0,ofs_y:0}))})),t;case"/edu/push/draw_page_graphics":return t.page_graphics&&t.page_graphics.forEach((function(e){e.page=e.page||0,e.action_seq=e.action_seq||0,r.mergeGraphicList(e.graphic_list)})),t;case"/edu/push/clear_page_graphics":return t.pages&&t.pages.forEach((function(e,r){t.pages[r]=e||0,t.action_seqs&&(t.action_seqs[r]=t.action_seqs[r]||0)})),t;case"/edu/push/set_user_auth":case"/edu/push/set_room_auth":return t.auth_seq=t.auth_seq||0,t;default:return t}},e.prototype.encode=function(e,t,r){return K(this,void 0,void 0,(function(){var o;return J(this,(function(n){return[2,(o=e[t]).encode(o.create(r)).finish()]}))}))},e.prototype.decode=function(e,t,r){return K(this,void 0,void 0,(function(){var o;return J(this,(function(n){return[2,(o=e[t]).toObject(o.decode(r),{default:!0,longs:String})]}))}))},e.prototype.decodeRspMsg=function(e,t,r){return K(this,void 0,void 0,(function(){var o,n;return J(this,(function(i){switch(i.label){case 0:return n=e.cmd,[4,this.decode(this.proto.proto_edu_tcpuplink,this.cmdRspMap[n],t)];case 1:return(o=i.sent())||(o=this.createUnknownError(r,n)),[2,o]}}))}))},e.prototype.decodePushMsg=function(e,t){return K(this,void 0,void 0,(function(){var r;return J(this,(function(o){switch(o.label){case 0:return r=this.cmdPushMap[e]||"",[4,this.decode(this.proto.proto_edu_tcpuplink,r,t)];case 1:return[2,o.sent()]}}))}))},e}(),$=function(){return($=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ee=function(){function e(e){this.roomState="DISCONNECTED",this.pbReqCallbackMap={},this.isRegistedEvent=!1,this.REQ_TIMEOUT=6e3,this.isSendPB=!1,this.isSwitch=!1,this.timerMap={},this.cmdPushMap={"/edu/push/set_mod":291101,"/edu/push/push_set_mod":291101,"/edu/push/draw_page_graphics":291203,"/edu/push/push_clear_page_graphics":291204,"/edu/push/push_user_auth":291501,"/edu/push/push_room_auth":291502,"/edu/push/push_clear_user_graphic_list":291205,"/edu/push/clear_page_graphics":291204,"/edu/push/set_user_auth":291501,"/edu/push/set_room_auth":291502},this.zegoWebEngin=e.standarWebRTC,this.webrtcVersion=this.zegoWebEngin.getVersion(),this.zegoWebEngin.RTCType&&this.init()}return e.prototype.init=function(){this.isSwitch=this.zegoWebEngin.isUseNetAgent(),this.isSendPB=this.zegoWebEngin.isPB(),this.zegoWebEngin.setDebugVerbose(!1),this.isSwitch?(this.eduProtobuf=new X,this.zegoWebEngin.setProtoFormat("pb"),this.isSendPB=!1):this.isSendPB&&(this.eduProtobuf=new G,this.zegoWebEngin.setProtoFormat("pb"),this.isSwitch=!1),this.zegoWebEngin.setSdkLoginRelateService&&this.zegoWebEngin.setSdkLoginRelateService(["edusvr"]),this.bindRoomStateUpdate()},e.prototype.bindRoomStateUpdate=function(){var e=this,t=function(t,r){E.a.getInstance().info1(T.d.RoomStateUpdate,r),e.roomState=r;try{if("CONNECTED"===r){k.f.emit(k.d.RoomConnected);var o=e.getServer();o.includes("-test")?E.a.getInstance().setWBEnv("test"):o.includes("-alpha")&&E.a.getInstance().setWBEnv("alpha"),E.a.getInstance().initRoomInfo({roomID:t,userID:e.getUserID(),logLevel:E.a.getInstance().getLogLevel()}),E.a.getInstance().info1(T.d.New,"wb version:2.8.0,rtc:"+e.webrtcVersion)}else"DISCONNECTED"===r&&k.f.emit(k.d.RoomDisConnected)}catch(e){}};try{this.webrtcVersion<"2.0"?this.zegoWebEngin.bindListener("roomStateUpdate",t):this.zegoWebEngin._on("_roomStateUpdate",t)}catch(e){}},e.prototype.getSocket=function(){return this.zegoWebEngin.getSocket()},e.prototype.getState=function(){return this.zegoWebEngin.getState()},e.prototype.getServer=function(){return this.getState().server},e.prototype.getAppID=function(){return this.getState().appid},e.prototype.createJsonReqBody=function(e){return{header:{sdk_version:1,id_name:this.getUserID()},body:JSON.stringify(e)}},e.prototype.createPbReqBody=function(e){return{header:{sdk_version:1,id_name:this.getUserID()},body:e}},e.prototype.createSwitchReqBody=function(e){return e.req_head=this.zegoWebEngin.getReqHead(),e},e.prototype.sendJsonMessage=function(e,t,r){var o=this;this.getSocket().sendMessage("biz_channel",{channel:"edu",cmd:e,req_body:JSON.stringify(this.createJsonReqBody(t))},(function(t,n,i){try{var s;s=o.webrtcVersion<"2.0"?o.rspSuccessHandle(i):o.rspSuccessHandle(t.body.rsp_body),E.a.getInstance().info1(T.d.Socket_Response,"cmd="+e+",body="+JSON.stringify(s)),r(s)}catch(e){}}),(function(t,n,i,s){try{var a;a=o.webrtcVersion<"2.0"?"[object Object]"===Object.prototype.toString.call(t)?{header:{code:t.code,message:t.msg}}:o.rspErrorHandle(i):o.rspErrorHandle(t.body.rsp_body),E.a.getInstance().info1(T.d.Socket_Response,"cmd="+e+",body="+JSON.stringify(a)),r(a)}catch(e){}}))},e.prototype.sendPbMessage=function(e,t,r){var o=this;if("DISCONNECTED"!==this.getRoomState()){var n=this.zegoWebEngin.getHeader("biz_channel");(null==n?void 0:n.seq)&&!this.timerMap[n.seq]?this.timerMap[n.seq]=setTimeout((function(){r({header:{code:b.j.ZegoWhiteboardViewErrorNetworkTimeout},seq:n.seq})}),this.REQ_TIMEOUT):r({header:{code:b.j.ZegoWhiteboardViewErrorInternal}}),this.eduProtobuf.encodeMsg(e,n,this.createPbReqBody(t)).then((function(e){!1===o.zegoWebEngin.sendPB(e)?r({header:{code:b.j.ZegoWhiteboardViewErrorNetworkDisconnect}}):o.pbReqCallbackMap[n.seq]=r})).catch((function(e){E.a.getInstance().error1(T.d.Socket_Req,e)}))}else E.a.getInstance().warn1(T.d.SendPbMessage,"room state is DISCONNECTED")},e.prototype.sendSwitchMessage=function(e,t,r){var o=this;"DISCONNECTED"!==this.getRoomState()?this.eduProtobuf.encodeMsg(e,this.createSwitchReqBody(t)).then((function(t){var n=o.zegoWebEngin.sendSwitchMessage(e,t);n&&!o.timerMap[n]&&(o.timerMap[n]=setTimeout((function(){r({header:{code:b.j.ZegoWhiteboardViewErrorNetworkTimeout},seq:n})}),o.REQ_TIMEOUT)),n&&-1!==n?o.pbReqCallbackMap[n]=r:r({header:{code:b.j.ZegoWhiteboardViewErrorNetworkDisconnect}})})).catch((function(e){r({header:{code:b.j.ZegoWhiteboardViewErrorInternal}}),E.a.getInstance().error1(T.d.Socket_Req_Catch,e)})):E.a.getInstance().warn1(T.d.SendSwitchMessage,"room state is DISCONNECTED")},e.prototype.handleJsonResponse=function(e,t){try{var r=JSON.parse(e.body.req_body);r.msg_body=JSON.parse(r.msg_body),E.a.getInstance().info1(T.d.Socket_Push,r),t(r)}catch(e){}},e.prototype.handlePbResponse=function(e,t){var r=this;this.eduProtobuf.decodeMsg(e).then((function(e){var o,n;if(e.cmd&&e.header){E.a.getInstance().info1(T.d.Socket_Response,"cmd="+e.cmd+",body="+JSON.stringify(e));var i=null===(o=e.header)||void 0===o?void 0:o.seq;r.pbReqCallbackMap[i]&&r.pbReqCallbackMap[i](e),delete r.pbReqCallbackMap[i],(null===(n=r.timerMap)||void 0===n?void 0:n[i])&&(clearTimeout(r.timerMap[i]),r.timerMap[i]=null,delete r.timerMap[i])}else E.a.getInstance().info1(T.d.Socket_Push,e),t(e)})).catch((function(e){E.a.getInstance().error1(T.d.Socket_Response,e)}))},e.prototype.handleSwitchResponse=function(e,t,r){var o=this,n=e.cmd,i=e.seq,s="/sw/push"===n;this.eduProtobuf.decodeMsg(e,t).then((function(e){var t;0===(s?1:e.rsp_head.code)?(E.a.getInstance().info1(T.d.Socket_Response,"cmd="+n+",body="+JSON.stringify(e)),e.header=e.rsp_head,e.body=$({},e),e.seq=i,o.pbReqCallbackMap[i]&&o.pbReqCallbackMap[i](e),delete o.pbReqCallbackMap[i],(null===(t=o.timerMap)||void 0===t?void 0:t[i])&&(clearTimeout(o.timerMap[i]),o.timerMap[i]=null,delete o.timerMap[i])):(E.a.getInstance().info1(T.d.Socket_Push,e),e.header=e.rsp_head,e.sub_cmd=o.cmdPushMap[e.sub_cmd],e.body=$({},e),r(e))})).catch((function(e){E.a.getInstance().error1(T.d.Socket_Response,e)}))},e.prototype.rspSuccessHandle=function(e){var t=JSON.parse(e);return t.body=t.body?JSON.parse(t.body):{},t},e.prototype.rspErrorHandle=function(e){var t=JSON.parse(e).header;return{header:{code:t.code,message:t.message}}},e.prototype.loginRoom=function(e,t,r,o){return this.zegoWebEngin.loginRoom(e,t,r,o)},e.prototype.logoutRoom=function(e){k.f.emit(k.d.RoomDisConnected),this.zegoWebEngin.logoutRoom(e)},e.prototype.renewToken=function(e,t){return this.zegoWebEngin.renewToken(e,t)},e.prototype.setLogConfig=function(e){return E.a.getInstance().setLogConfig(e),this.zegoWebEngin.setLogConfig(e)},e.prototype.config=function(e){this.zegoWebEngin.config(e),this.init()},e.prototype.clearLog=function(){return E.a.getInstance().uploadLog()},e.prototype.checkSendLength=function(e,t){var r=this.isSwitch?m.Exprsss.DrawPageGraphics.replace("v1",""):m.Exprsss.DrawPageGraphics,o=JSON.stringify({body:{channel:"edu",cmd:r,req_body:JSON.stringify(this.createJsonReqBody(e))}}).length;if(o>(this.isSendPB||this.isSwitch?5e4:4800)&&t==b.a.Update)return Promise.resolve(o);if(!this.isSendPB&&!this.isSwitch&&o>4800)return Promise.resolve(o);try{if(this.isSwitch)return this.eduProtobuf.checkSendLength(r,this.createSwitchReqBody(e));if(this.isSendPB)return this.eduProtobuf.checkSendLength(r,this.createPbReqBody(e))}catch(e){}return Promise.resolve(0)},e.prototype.registerWbMessage=function(e){var t=this;this.isSwitch?this.zegoWebEngin.onSwitchMessage((function(r,o){return t.handleSwitchResponse(r,o,e)})):(this.isRegistedEvent&&this.zegoWebEngin.off("_protobufResponse"),this.zegoWebEngin.on("_protobufResponse",(function(r){return t.handlePbResponse(r,e)})),this.isRegistedEvent=!0);var r=this.webrtcVersion<"2.0"?"registerRouter":"on";this.getSocket()[r]("push_biz_channel",(function(r){return t.handleJsonResponse(r,e)}))},e.prototype.queueWSCmdHandler=function(e,t){var r=this;return new Promise((function(o){E.a.getInstance().info1(T.d.Socket_Req,"cmd="+e+",body="+JSON.stringify(t)),r.isSwitch?r.sendSwitchMessage(e.replace("v1",""),t,o):r.isSendPB?r.sendPbMessage(e,t,o):r.sendJsonMessage(e,t,o)}))},e.prototype.getUserID=function(){return this.getState().idName},e.prototype.getRoomID=function(){return this.getState().roomid},e.prototype.getServerTimeOffset=function(){return this.getState().serverTimeOffset||0},e.prototype.getRoomState=function(){return this.roomState},e}(),te=function(){function e(e){this.module=e}return e.prototype.actionListener=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];k.f.emit(e,t)},e.prototype.bindListener=function(e,t){k.f.on(e,t)},e.prototype.pushRemovedMod=function(e){this.module.pushRemovedMod(e)},e.prototype.pushAddMod=function(e){this.module.pushAddMod(e)},e.prototype.pushModifyMod=function(e){if(e){var t=e.mod_id,r=e.mod_seq,o=e.mod_title,i=e.mod_horizontal_percent,s=e.mod_vertical_percent,a=e.mod_reserve,c=e.mod_extra,u=e.mod_scale,l=e.is_modify_mod_vertical_percent,d=e.is_modify_mod_horizontal_percent,h=e.is_modify_mod_reserve,p=e.is_modify_mod_title,f=e.is_modify_mod_extra,_=e.is_modify_mod_scale;if(this.module.getMap(t))if(this.module.getModSendSwitch(t)){var g={whiteboardID:t,modSeq:r};this.module.updateMap(g),this.updateMapByModifyModOption(e,r,!0)}else{var m={mod_id:t};p&&Object.assign(m,{mod_title:o,is_modify_mod_title:p}),f&&Object.assign(m,{mod_extra:c,is_modify_mod_extra:f}),d&&Object.assign(m,{mod_horizontal_percent:i,is_modify_mod_horizontal_percent:d}),l&&Object.assign(m,{mod_vertical_percent:s,is_modify_mod_vertical_percent:l,mod_reserve:a,is_modify_mod_reserve:h}),h&&Object.assign(m,{mod_reserve:a,is_modify_mod_reserve:h}),_&&Object.assign(m,{mod_scale:u,is_modify_mod_scale:_}),this.module.updateModifyModTaskList({status:n.Pending,data:m,push:!0,pushModSeq:r})}}},e.prototype.updateMapByModifyModOption=function(e,t,r){var o,n=e.mod_id,i=e.mod_title,s=e.mod_horizontal_percent,a=e.mod_vertical_percent,c=e.mod_reserve,u=e.mod_scale,l=e.is_modify_mod_horizontal_percent,d=e.is_modify_mod_vertical_percent,h=e.is_modify_mod_reserve,p=e.is_modify_mod_title,f=e.is_modify_mod_extra,_=e.is_modify_mod_scale,g=this.module.decodeH5Extra(e.mod_extra),m=this.module.getMap(n),v={isPushScroll:!1,horizontalPercent:m.horizontalPercent,verticalPercent:m.verticalPercent,pptStep:m.pptStep};if(l){v.isPushScroll=!0,v.horizontalPercent=+s||0;var y={whiteboardID:n,horizontalPercent:v.horizontalPercent,modPropSeq:{mod_horizontal_percent:t}};this.module.updateMap(y)}if(d){v.isPushScroll=!0,v.verticalPercent=+a||0,v.pptStep=+c;var b={whiteboardID:n,verticalPercent:v.verticalPercent,pptStep:v.pptStep,modPropSeq:{mod_vertical_percent:t}};this.module.updateMap(b)}if(h){v.isPushScroll=!0,v.pptStep=+c;var S={whiteboardID:n,pptStep:v.pptStep,modPropSeq:{mod_reserve:t}};this.module.updateMap(S)}if(v.isPushScroll&&r&&(this.module.pushScrollHandle(n,v.horizontalPercent,v.verticalPercent,v.pptStep),this.module.updateMap({whiteboardID:n,modExtra:""}),o=e),p){var E={whiteboardID:n,name:i,modPropSeq:{mod_title:t}};this.module.updateMap(E)}if(f){var T={whiteboardID:n,modExtra:g,modPropSeq:{mod_extra:t}};if(r){var w=this.module.checkH5Extra(n,g,!0);w&&(this.module.pushExtraHandle(n,w),o=e)}this.module.updateMap(T)}if(_){var C=JSON.parse(u);T={whiteboardID:n,modScale:C,modPropSeq:{mod_scale:t}},r&&this.module.pushScaleHandle(n,C.scale,C.ofs_x,C.ofs_y),this.module.updateMap(T)}return o},e.prototype.parseGraphicsHandle=function(e){var t=this,r=e.page_graphics,o=e.mod_id,n=this.module.checkModInfo(o);if(n){var i=n.width,s={},a=[],c=[];return r.forEach((function(e){var r=e.del_graphic_id_list,o=e.graphic_list,n=e.action_seq,u=e.page;t.transGraphicList(c,o,i),r&&a.push.apply(a,r),s[u]=n})),{whiteboardID:o,graphicList:c=JSON.parse(JSON.stringify(c)),delGraphicIdList:a,graphicListSeqs:s}}},e.prototype.pushDrawPageGraphicsHandle=function(e){var t=e.whiteboardID,r=e.graphicListSeqs,o=e.graphicList,n=e.delGraphicIdList;this.module.updateMapByGraphicListSeqs(t,r),k.f.emit(k.d.PushDrawPageGraphics,t,o,n)},e.prototype.transGraphicList=function(e,t,r){var o=this;t&&t.length&&t.forEach((function(t){e.some((function(e){return e.graphic_id===t.graphic_id}))||(t.zorder>o.module.zorderSeq&&(o.module.zorderSeq=t.zorder),Object(v.h)(t,!0),o.module.setGraphicItem(t),Object(v.a)(t,r,!0),t.color=Object(S.t)(t.color,!0),e.push(t))}))},e.prototype.pushClearPageGraphicsHandle=function(e){this.module.pushClearPageGraphicsHandle(e)},e}(),re=(Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),oe=function(e){function t(t){var r=e.call(this,"web")||this;return r.socket=new ee(t),r.module=new D(r.socket),r.graphic=new O(r.socket,r.module),r.logConfig={appID:r.socket.getAppID(),userID:"1",token:"1",isTestEnv:!1},Object(E.b)(0,r.logConfig,"WhiteBoard",{WhiteBoard_VER:"2.8.0"}),r.init(),r}return re(t,e),t.prototype.init=function(){var e=this;k.f.on(k.d.RoomConnected,(function(){e.isPlayback||(e.logConfig.userID=e.socket.getUserID()+"",E.a.getInstance().setLoggerHeader(e.logConfig,{WhiteBoard_VER:"2.8.0"}),e.module.reload(),k.f.emit(k.d.SuperRoomConnected))})),k.f.on(k.d.RoomDisConnected,(function(){k.f.emit(k.d.SuperDocsLogoutRoom),k.f.emit(k.d.SuperRoomDisConnected),e.isPlayback||e.module.unload()}))},t.prototype.setFileInfo=function(e){this.module.setFileInfo(e)},t.prototype.enablePlayback=function(){this.isPlayback=!0,this.socket.isSendPB=!1,this.execute=new te(this.module)},t.prototype.loginRoom=function(e,t,r,o){return E.a.getInstance().info1(T.e.LoginRoom,{roomID:e,user:r,config:o}),E.a.getInstance().updateDocToken(t),this.socket.loginRoom(e,t,r,o)},t.prototype.logoutRoom=function(e){return E.a.getInstance().info1(T.e.API_logoutRoom,{roomID:e}),this.socket.logoutRoom(e)},t.prototype.config=function(e){return this.socket.config(e)},t.prototype.renewToken=function(e,t){return E.a.getInstance().info1(T.e.API_renewToken,{token:e}),E.a.getInstance().updateDocToken(e),this.socket.renewToken(e,t)},t.prototype.setLogConfig=function(e){return this.socket.setLogConfig(e)},t.prototype.getGraphicIsEndDraw=function(e){return this.graphic.getGraphicIsEndDraw(e)},t.prototype.updateToRemoteHandle=function(e,t,r,o){this.isPlayback?null==r||r():this.graphic.updateToRemoteHandle(e,t,r,o)},t.prototype.getModName=function(e){return this.module.getModName(e)},t.prototype.getCreateTime=function(e){return this.module.getCreateTime(e)},t.prototype.getRoomID=function(e){return this.module.getRoomID(e)},t.prototype.getUniqueID=function(e){return this.module.getUniqueID(e)},t.prototype.getUserID=function(){return this.socket.getUserID()},t.prototype.getRoomState=function(){return this.socket.getRoomState()},t.prototype.getPageCount=function(e){return this.module.getPageCount(e)},t.prototype.setSize=function(e,t,r){return this.module.setSize(e,t,r)},t.prototype.setViewSize=function(e,t,r){return this.module.setViewSize(e,t,r)},t.prototype.undo=function(e){},t.prototype.redo=function(e){},t.prototype.createMod=function(e,t){return this.module.createMod(e,t)},t.prototype.clearView=function(e,t){return this.graphic.clearView(e,t)},t.prototype.scroll=function(e,t,r,o,n){this.isPlayback||this.module.scroll(e,t,r,o,n)},t.prototype.scale=function(e,t,r,o){this.isPlayback||this.module.scale(e,t,r,o)},t.prototype.loadCurrentGraphics=function(e,t,r){this.isPlayback||this.module.loadCurrentGraphics(e,t,r)},t.prototype.getScrollPercent=function(e){return this.module.getScrollPercent(e)},t.prototype.getScale=function(e){return this.module.getScale(e)},t.prototype.getAspectRatio=function(e){return this.module.getAspectRatio(e)},t.prototype.getFileInfo=function(e){return this.module.getFileInfo(e)},t.prototype.uploadImage=function(e,t){return this.graphic.uploadImage(e,t)},t.prototype.createZorder=function(){return this.module.createZorder()},t.prototype.destroyMod=function(e){return this.module.destroyMod(e)},t.prototype.getModList=function(){return this.module.getModList()},t.prototype.getH5Extra=function(e){return this.module.getH5Extra(e)},t.prototype.appendH5Extra=function(e,t){this.isPlayback||this.module.appendH5Extra(e,t)},t.prototype.getUserAuth=function(){return this.module.getUserAuth()},t.prototype.enableHandwriting=function(){},t.prototype.isAppendPathLimit=function(e,t){return this.graphic.isAppendPathLimit(e,t)},t.prototype.reloadViewGraphics=function(e,t){this.module.reloadViewGraphics(e,t)},t.prototype.switchView=function(e){return this.module.switchView(e)},t.prototype.getCurrentActivitedView=function(){return this.module.getCurrentActivitedView()},t.prototype.isSwitch=function(){return this.socket.isSwitch},t}((function(e){this.isElectron=!1,this.isPlayback=!1,this.isElectron="electron"===e}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r(39),r(25),r(47),r(60),r(61),r(62),r(36),r(46),r(53),r(87),r(49),r(50),r(218),r(115),r(106),r(124),r(105),r(229),r(250),r(37),r(69),r(56),r(406),r(379),r(296),r(94),r(77),r(85),r(227),r(228),r(55),r(186);var o=r(5),n=r(4),i=r(10),s=(r(210),r(167),r(226),r(67),r(121),r(168),r(184),r(123),r(208),r(151),r(297),r(9)),a=r(0),c=r(1),u=r(2),l=function(){return(l=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},d=function(){function e(e){var t=this;this.bindFlag=!1,this.authFlag=!0,this.laserInfo={hiddenX:-100,hiddenY:-100,initX:0,initY:0,touchLeaveRect:{left:0,top:0,right:0,bottom:0}},this.mousemoveHandle=function(e){if(t.toolInstance.enableDraw){if(!t.toolInstance.getUserAuth().create)return t.authFlag&&Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic),void(t.authFlag=!1);if(window.TouchEvent&&e instanceof TouchEvent&&e.preventDefault(),t.laserInfo.touchLeaveRect.right||(t.laserInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect()),t.toolInstance.isTouchLeaveWhenMove(e,t.laserInfo.touchLeaveRect))t.mouseleaveHandle();else{t.toolInstance.updateOffsetAndScrollHandle();var r=t.getMouseChangedPoint(e),o=t.addLaserHandle(void 0,r);o.x=r.clientX,o.y=r.clientY,o.is_end_draw=!0,o.operate_id=Object(s.d)(),t.drawGraphicsHandle(o,!0),t.toolInstance.updateToRemoteNewHandle([t.calLaserActualPlaceHandle(o)],a.a.Move)}}},this.mouseleaveHandle=function(){t.authFlag=!0,t.laserHiddenHandle(),c.a.getInstance().info1(u.e.Laser_MouseleaveHandle)},this.wheelHandle=function(e){var r;e.preventDefault();var n=t.toolInstance.whiteboardID,i=o.a.reservedPrefix.whiteboard,s=null===(r=document.querySelector("#"+i+n))||void 0===r?void 0:r.parentNode,a=s.getBoundingClientRect(),c=a.width;a.height!==s.scrollHeight&&(s.scrollTop+=Number(e.deltaY.toFixed(7))),c!==s.scrollWidth&&(s.scrollLeft+=Number(e.deltaX.toFixed(7)))},this.toolInstance=e,this.laserContainerNode=this.addLaserConDomHandle(),this.updateZIndexHandle(-1)}return e.prototype.transLocationHandle=function(e){var t=e.clientX,r=e.clientY,o=this.toolInstance,n=o.offsetData,i=o.scrollData,s=n.offsetLeft,a=n.offsetTop,c=i.scrollTop,u=i.scrollLeft,l=this.toolInstance.conNode,d=l.scrollLeft,h=l.scrollTop;return{clientX:Math.round(t-s+u-d),clientY:Math.round(r-a+c-h)}},e.prototype.getMouseChangedPoint=function(e){var t;if(e instanceof MouseEvent){var r=e,o=r.clientX,n=r.clientY;t=this.transLocationHandle({clientX:o,clientY:n})}else{var i=e.changedTouches[0];o=i.clientX,n=i.clientY,t=this.transLocationHandle({clientX:o,clientY:n})}return t},e.prototype.laserHiddenHandle=function(e){var t=this.findLaserHandle(e);if(t){var r=this.laserInfo,o=r.hiddenX,n=r.hiddenY;Object.assign(t,{x:o,y:n,px:0,py:0}),this.toolInstance.moveGraphicsHandle(t.graphic_id,o,n),e||(t.is_end_draw=!0,t.operate_id=Object(s.d)(),this.toolInstance.updateToRemoteNewHandle([t],a.a.Move)),c.a.getInstance().info1(u.e.Laser_LaserHiddenHandle,e)}},e.prototype.addLaserHandle=function(e,t){var r=this.toolInstance.graphicList;if(!e){var n=this.findLaserHandle();if(n)return n;var i=this.laserInfo,c=i.initX,u=i.initY,d=i.hiddenX,h=i.hiddenY;e=l(l({graphic_id:Object(s.d)(),creator_id:this.toolInstance.getUserID()},o.a.basicState),{type:a.f.Laser,x:d,y:h,px:0,py:0,data:[c,u],zorder:this.toolInstance.serviceHandle.createZorder()})}return e.operate_id=Object(s.d)(),e.is_end_draw=!0,r.push(e),this.drawGraphicsHandle(e,!0),this.toolInstance.updateToRemoteNewHandle([this.calLaserActualPlaceHandle(e)],a.a.Create),e},e.prototype.findLaserHandle=function(e){var t=this.toolInstance.getUserID();return this.toolInstance.graphicList.find((function(r){return e?r.graphic_id===e:r.type===a.f.Laser&&r.creator_id===t}))},e.prototype.addLaserConDomHandle=function(){var e=this.toolInstance.whiteboardID,t=""+o.a.reservedPrefix.laserContainer+e,r=this.toolInstance.userNode.querySelector("#"+t);return r||((r=document.createElement("div")).id=t,this.toolInstance.zoomNode.appendChild(r),this.updateLaserConSize(r),r)},e.prototype.updateZIndexHandle=function(e){this.laserContainerNode.style.zIndex=""+e,this.laserContainerNode.style.visibility=-1===e?"hidden":"visible"},e.prototype.drawGraphicsHandle=function(e,t){var r=this.toolInstance.getUserID(),n=e.graphic_id,i=e.data,s=e.creator_id,l=e.x,d=e.y;if(s===r&&!t){t=!0;var h=this.calLaserPlaceHandle(l,d),p=h.x,f=h.y;e.x=p,e.y=f,l=p,d=f}var _=o.a.reservedPrefix,g=""+_.graphics+n,m=""+_.laserCon+n,v=this.toolInstance.userNode.querySelector("#"+g);if(!v){v=document.createElement("div");var y=document.createElement("div");v.id=g,y.id=m,y.appendChild(v),t?this.laserContainerNode.appendChild(y):this.toolInstance.appendGraphicsDomHandle(y,a.f.Laser)}var b="transform:translate("+(l||0)+"px, "+(d||0)+"px)"+(t?";":"scale("+1/this.toolInstance.viewInfo.zoom+");")+"left:"+i[0]+"px;top:"+i[1]+"px;";v.parentNode.style.cssText=b,c.a.getInstance().info1(u.e.Laser_DrawGraphicsHandle,{protoGraphic:e,local:t,x:l,y:d})},e.prototype.bindEventsHandle=function(){if(this.updateZIndexHandle("initial"),!this.bindFlag){this.bindFlag=!0;var e=o.a.mouseEvents;this.toolInstance.toolAddEL(this.laserContainerNode,e.move,this.mousemoveHandle),this.toolInstance.toolAddEL(this.laserContainerNode,e.leave,this.mouseleaveHandle),this.toolInstance.viewInfo.isScroll&&this.laserContainerNode.addEventListener("wheel",this.wheelHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1,this.updateZIndexHandle(-1);var e=o.a.mouseEvents;this.toolInstance.toolRmEl(this.laserContainerNode,e.move,this.mousemoveHandle),this.toolInstance.toolRmEl(this.laserContainerNode,e.leave,this.mouseleaveHandle),this.laserContainerNode.removeEventListener("wheel",this.wheelHandle)}},e.prototype.calLaserActualPlaceHandle=function(e){var t=(e=JSON.parse(JSON.stringify(e))).x,r=e.y,o=this.toolInstance.viewInfo,n=o.zoom,i=o.zoomTX,s=o.zoomTY,a=o.offsetPageX,c=o.offsetPageY,u=this.toolInstance.conNode,l=u.scrollLeft,d=u.scrollTop;return e.x=Math.round((t+8+l-i)/n+a),e.y=Math.round((r+8+d-s)/n+c),e},e.prototype.calLaserPlaceHandle=function(e,t){var r=this.toolInstance.viewInfo,o=r.zoom,n=r.zoomTX,i=r.zoomTY,s=r.offsetPageX,a=r.offsetPageY,c=this.toolInstance.conNode,u=c.scrollLeft,l=c.scrollTop;return{x:e=Math.round((e-s)*o+n-u),y:t=Math.round((t-a)*o+i-l)}},e.prototype.pushActualPlaceHandle=function(){var e=this.findLaserHandle();e&&(this.toolInstance.updateOffsetAndScrollHandle(),e.is_end_draw=!0,e.operate_id=Object(s.d)(),c.a.getInstance().info1(u.e.Laser_PushActualPlaceHandle,{laserData:[this.calLaserActualPlaceHandle(e)],Action:"Move"}),this.toolInstance.updateToRemoteNewHandle([this.calLaserActualPlaceHandle(e)],a.a.Move))},e.prototype.clearLaserHandle=function(e){var t;(t=e?this.toolInstance.graphicList.filter((function(t){return t.creator_id===e}))[0]:this.findLaserHandle())&&(t.is_end_draw=!0,t.operate_id=Object(s.d)(),this.toolInstance.deleteHandle(t.graphic_id),this.toolInstance.updateToRemoteNewHandle([t],a.a.Delete))},e.prototype.updateLaserConSize=function(e){var t,r="z-index:"+((e=e||this.laserContainerNode).style.zIndex||"initial")+";",n=this.toolInstance.whiteboardID,i=o.a.reservedPrefix.whiteboard,s=null===(t=document.querySelector("#"+i+n))||void 0===t?void 0:t.parentNode;if(this.toolInstance.viewInfo.isScroll){var a=s.getBoundingClientRect(),c=a.width;(u=a.height)!==s.scrollHeight&&(r+="width:"+(c-18)+"px;"),c!==s.scrollWidth&&(r+="height:"+(u-18)+"px;")}else{var u,l=s.getBoundingClientRect();r+="width:"+(c=l.width)+"px;",r+="height:"+(u=l.height)+"px;",r+="top:"+s.style.top+";left:"+s.style.left}e.style.cssText=r},e}(),h=function(){return(h=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},p=function(){function e(e){var t=this;this.bindFlag=!1,this.tolerance=1,this.isIos11=navigator.userAgent.includes("iPhone")&&navigator.userAgent.includes("11_4_1"),this.upSwitch=!1,this.mouseInfo={moveCount:0,moveTaskId:0,touchLeaveRect:{left:0,top:0,right:0,bottom:0},isHandWriting:!1,handWritingTimer:0,handWritingLastPoint:null,handWritingLastSize:null},this.mousedownHandle=function(e){if(t.toolInstance.enableDraw)if(t.toolInstance.getUserAuth().create){if(t.toolInstance.downCommonHandle(e)){t.upSwitch=!0,o.a.svgPath.tops.length=0,o.a.svgPath.bottoms.length=0,t.mouseInfo.isHandWriting=JSON.parse(o.a.basicState.attributes).stroke;var r=t.mouseInfo.isHandWriting&&o.a.basicState.type==a.k.ZegoWhiteboardViewToolPen,n=t.toolInstance.getMouseStartPoint(e,r),c=n.clientX,u=n.clientY,l=t.toolInstance.whiteboardNode;t.mouseInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect();var d=o.a.basicExtraState.customImage.url,p=o.a.basicState.type===a.k.ZegoWhitebaordViewToolCustomImage&&d?a.f.Image:o.a.basicState.type,f=p===a.f.Image?{x:c,y:u,ex:0,ey:0,url:d,hash:""}:[c,u],_=Object(s.d)();t.toolInstance.updateMousePointsHandle(c,u),t.toolInstance.updateProtoGraphic(h(h({creator_id:t.toolInstance.getUserID(),graphic_id:_,operate_id:_,is_end_draw:!1},o.a.basicState),{type:p,x:0,y:0,px:0,py:0,data:f,zorder:t.toolInstance.serviceHandle.createZorder()})),p===a.k.ZegoWhiteboardViewToolPen&&(t.toolInstance.protoGraphic.oldData=[c,u]),t.realTimeStartHandle(),t.mouseInfo.moveCount=0,t.mouseInfo.moveTaskId=0,t.toolInstance.toolAddEL(l,o.a.mouseEvents.move,t.mousemoveHandle)}}else Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic)},this.mousemoveHandle=function(e){if(!(window.TouchEvent&&e instanceof TouchEvent)||t.toolInstance.downCommonHandle(e))if(t.toolInstance.isTouchLeaveWhenMove(e,t.mouseInfo.touchLeaveRect))t.mouseupHandle();else{var r=t.toolInstance.protoGraphic;t.mouseInfo.isHandWriting?t.drawGraphicsHandWritingHandle(r,e):t.drawGraphicsPathHandle(r,e)}},this.mouseupHandle=function(){t.mouseInfo.handWritingTimer&&(clearTimeout(t.mouseInfo.handWritingTimer),t.mouseInfo.handWritingTimer=0);var e=t.toolInstance,r=e.protoGraphic,n=e.graphicList,c=e.whiteboardNode;if(r&&r.graphic_id&&t.upSwitch){t.toolInstance.toolRmEl(c,o.a.mouseEvents.move,t.mousemoveHandle),t.upSwitch=!1,t.mouseInfo.moveCount=0,t.mouseInfo.moveTaskId=0,t.drawGraphicsExceptionHandle(r);var u=r.graphic_id,l=r.type;if(t.toolInstance.updateBoxHandle(r)){if(l===a.f.Pencil){var d=t.toolInstance.getGraphicsHandle(u);if(!d)return;var p=r.oldData;r.data=p.slice(),t.mouseInfo.isHandWriting?t.drawGraphicsPencilSegment(r,a.e.Local):Object(s.g)(d)[0].setAttribute("d",Object(s.m)(a.f.Pencil,r.data))}else if(l===a.f.Image){var f=(p=r.data).x,_=p.y,g=p.ex,m=p.ey,v=t.toolInstance.getUserAuth().create;if(f===g||_===m||!v){t.toolInstance.deleteHandle(r.graphic_id),t.toolInstance.initDrawHandle();var y=a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic;return void(!v&&Object(i.a)(y))}t.checkImageRect(p),r.initX=p.x,r.initY=p.y,r.oldData=h({},p)}r.is_end_draw=!0;var b=JSON.parse(JSON.stringify(r)),S=r.data;if(t.mouseInfo.isHandWriting&&4===S.length&&l===a.f.Pencil&&r.is_end_draw)return t.toolInstance.deleteHandle(r.graphic_id),void t.toolInstance.updateToRemoteNewHandle([r],a.a.Delete);if(l===a.f.Pencil&&2===S.length||4===S.length&&S[0]==S[2]&&S[1]==S[3])return t.toolInstance.deleteHandle(r.graphic_id),void t.toolInstance.updateToRemoteNewHandle([r],a.a.Delete);t.toolInstance.setGraphicsDomZorder(b),n.push(b),t.realTimeEndHandle()}else l!==a.f.Image&&(r.is_end_draw=!0,t.realTimeEndHandle());t.toolInstance.initDrawHandle()}},this.toolInstance=e,this.tolerance=this.toolInstance.serviceHandle.isElectron?.3:1}return e.prototype.drawGraphicsExceptionHandle=function(e){var t=e.type,r=e.data;t!==a.f.Image&&r.length<4&&(r[2]=r[0]+1,r[3]=r[1]+1,this.drawGraphicsHandle(e,a.e.Local))},e.prototype.isMouseMoveWithNoKeydown=function(e,t){return t instanceof MouseEvent&&!t.buttons&&(this.toolInstance.toolRmEl(this.toolInstance.whiteboardNode,o.a.mouseEvents.move,this.mousemoveHandle),this.toolInstance.deleteHandle(e),this.toolInstance.initDrawHandle(),!0)},e.prototype.catchMouseMoveException=function(){var e=this;this.mouseInfo.moveTaskId||(this.mouseInfo.moveTaskId=window.setTimeout((function(){if(e.mouseInfo.moveCount<5){var t=e.toolInstance.userNode.querySelector("#zego-whiteboard-input");t||((t=document.createElement("input")).id="zego-whiteboard-input",t.tabIndex=-1,e.toolInstance.userNode.insertBefore(t,e.toolInstance.userNode.firstChild)),t.focus()}}),200)),this.mouseInfo.moveCount++},e.prototype.realTimeStartHandle=function(){var e=this.toolInstance.protoGraphic;e.type!==a.f.Image&&this.toolInstance.updateToRemoteNewHandle([e],a.a.Create)},e.prototype.realTimeDrawHandle=function(){var e=this.toolInstance.protoGraphic;e.type!==a.f.Image&&(e.type===a.f.Pencil?this.mouseInfo.isHandWriting?this.realTimeHandWrittingSend(e):this.readlTimeNormalSend(e):this.toolInstance.updateToRemoteNewHandle([e],a.a.Update))},e.prototype.realTimeEndHandle=function(){var e=this.toolInstance.protoGraphic,t=e.type===a.f.Image?a.a.Create:a.a.Update;this.toolInstance.updateToRemoteNewHandle([e],t)},e.prototype.appendPath=function(e,t){var r,o=this;if(t.length){var n=JSON.parse(JSON.stringify(e));n.data=t,(r=e.oldData).push.apply(r,t),this.toolInstance.serviceHandle.isAppendPathLimit(this.toolInstance.whiteboardID,e).then((function(r){r?(e.oldData.splice(n.oldData.length,t.length),o.mouseupHandle()):o.upSwitch&&o.toolInstance.updateToRemoteNewHandle([n],a.a.Append)}))}},e.prototype.readlTimeNormalSend=function(e){var t=o.a.realTimeState.localDrawCount,r=e.data;if(r.length%t==2){var n=Object(s.q)(r.slice(r.length-t),this.tolerance);this.appendPath(e,n)}},e.prototype.realTimeHandWrittingSend=function(e){var t=e.data,r=t.slice(e.oldData.length,t.length);this.appendPath(e,r)},e.prototype.drawGraphicsHandWritingHandle=function(e,t){var r=this;this.mouseInfo.handWritingTimer||(this.mouseInfo.handWritingTimer=window.setTimeout((function(){r.drawGraphicsPathHandle(e,t),clearTimeout(r.mouseInfo.handWritingTimer),r.mouseInfo.handWritingTimer=0}),o.a.handWritingFactor.step))},e.prototype.drawGraphicsPathHandle=function(e,t){var r=this.mouseInfo.isHandWriting&&e.type==a.f.Pencil,o=this.toolInstance.getMouseChangedPoint(t,r);this.toolInstance.updateGraphicsDataHandle(o);var n=e.type===a.f.Image?a.o.ZegoWhiteboardViewImageCustom:void 0;this.realTimeDrawHandle(),this.drawGraphicsHandle(e,a.e.Local,n)},e.prototype.isHandWriting=function(e,t){return t==a.e.Local?this.mouseInfo.isHandWriting:!!e.attributes&&JSON.parse(e.attributes).stroke},e.prototype.bindEventsHandle=function(){var e=this;if(!this.bindFlag){this.bindFlag=!0;var t=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(t,o.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolAddEL(t,o.a.mouseEvents.up,(function(){o.a.basicState.type!=a.k.ZegoWhiteboardViewToolSelector&&(o.a.basicState.type==a.k.ZegoWhiteboardViewToolPen?window.setTimeout((function(){e.mouseupHandle()}),20):e.mouseupHandle())})),this.toolInstance.toolAddEL(t,o.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,o.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolRmEl(e,o.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolRmEl(e,o.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.drawGraphicsHandle=function(e,t,r){switch(e.type){case a.f.Pencil:case a.f.RealTime:this.isHandWriting(e,t)?this.drawGraphicsPencilSegment(e,t):this.drawGraphicsPath(e,t);break;case a.f.Line:this.drawGraphicsLine(e,t);break;case a.f.Ellipse:this.drawGraphicsEllipse(e,t);break;case a.f.Rect:this.drawGraphicsRect(e,t);break;case a.f.Image:r===a.o.ZegoWhiteboardViewImageCustom?this.drawLocalCustomImage(e):this.drawReomteGraphicImage(e)}},e.prototype.updateGraphicsHandle=function(e){switch(e.type){case a.f.Pencil:this.isHandWriting(e,a.e.Remote)?this.drawGraphicsPencilSegment(e,a.e.Remote):this.drawGraphicsPath(e,a.e.Remote);break;case a.f.Line:this.drawGraphicsLine(e,a.e.Remote);break;case a.f.Ellipse:this.drawGraphicsEllipse(e,a.e.Remote);break;case a.f.Rect:this.drawGraphicsRect(e,a.e.Remote);break;case a.f.Image:this.updateGraphicsImage(e)}},e.prototype.drawGraphicsLine=function(e,t,r,n,i,c){void 0===r&&(r="none"),void 0===n&&(n=1),void 0===i&&(i="round"),void 0===c&&(c="round");var u=e.data,l=e.graphic_id,d=e.color,h=e.x,p=e.y,f=Object(s.m)(a.f.Line,u),_=f.x1,g=f.y1,m=f.x2,v=f.y2,y=""+o.a.reservedPrefix.graphicsSvg+l,b=""+o.a.reservedPrefix.graphics+l,S=Object(s.e)(y,b,"line",e.zorder);S[1]&&this.toolInstance.appendGraphicsDomHandle(S[1],a.f.Line),this.toolInstance.triggerAnimateHandle(S[0],t),Object(s.p)(S[0],[{attr:"fill",value:r},{attr:"opacity",value:n},{attr:"stroke",value:d},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:i},{attr:"stroke-linecap",value:c},{attr:"x1",value:_},{attr:"y1",value:g},{attr:"x2",value:m},{attr:"y2",value:v},{attr:"transform",value:"translate("+(h||0)+", "+(p||0)+")"}])},e.prototype.drawGraphicsRect=function(e,t,r,n,i,c){void 0===r&&(r="none"),void 0===n&&(n=1),void 0===i&&(i="round"),void 0===c&&(c="round");var u=e.data,l=e.graphic_id,d=e.color,h=e.x,p=e.y,f=Object(s.m)(a.f.Rect,u),_=f.width,g=f.height,m=f.x,v=f.y,y=""+o.a.reservedPrefix.graphicsSvg+l,b=""+o.a.reservedPrefix.graphics+l,S=Object(s.e)(y,b,"rect",e.zorder);S[1]&&this.toolInstance.appendGraphicsDomHandle(S[1],a.f.Rect),this.toolInstance.triggerAnimateHandle(S[0],t),Object(s.p)(S[0],[{attr:"fill",value:r},{attr:"opacity",value:n},{attr:"stroke",value:d},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:i},{attr:"stroke-linecap",value:c},{attr:"width",value:_},{attr:"height",value:g},{attr:"x",value:m},{attr:"y",value:v},{attr:"transform",value:"translate("+(h||0)+", "+(p||0)+")"}])},e.prototype.drawGraphicsPath=function(e,t,r,n,i){void 0===r&&(r="none"),void 0===n&&(n="round"),void 0===i&&(i="round");var c=t===a.e.Local?e.oldData:e.data;if(c&&c.length){var u=e.color,l=e.graphic_id,d=e.x,h=e.y,p=(e.is_end_draw,Object(s.m)(a.f.Pencil,c)),f=""+o.a.reservedPrefix.graphicsSvg+l,_=""+o.a.reservedPrefix.graphics+l,g=Object(s.e)(f,_,"path",e.zorder);g[1]&&this.toolInstance.appendGraphicsDomHandle(g[1],a.f.Pencil),this.toolInstance.triggerAnimateHandle(g[0],t),Object(s.p)(g[0],[{attr:"fill",value:r},{attr:"d",value:p},{attr:"stroke",value:u},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:n},{attr:"stroke-linecap",value:i},{attr:"transform",value:"translate("+(d||0)+", "+(h||0)+")"}])}},e.prototype.drawGraphicsPencilSegment=function(e,t){var r=e.color,n=e.graphic_id,i=e.x,c=e.y,u=e.is_end_draw,l=this.toolInstance.viewInfo.viewWidth,d=Object(s.n)(e,this.getSize(e,t),l),h=""+o.a.reservedPrefix.graphicsSvg+n,p=""+o.a.reservedPrefix.graphics+n,f=Object(s.e)(h,p,"path",e.zorder);f[1]&&this.toolInstance.appendGraphicsDomHandle(f[1],a.f.Pencil),this.toolInstance.triggerAnimateHandle(f[0],t),(null==d?void 0:d.includes("M"))&&Object(s.p)(f[0],[{attr:"fill",value:r},{attr:"d",value:d},{attr:"stroke-width",value:0},{attr:"transform",value:"translate("+(i||0)+", "+(c||0)+")"}]),u&&(o.a.svgPath.tops.length=0,o.a.svgPath.bottoms.length=0)},e.prototype.drawGraphicsEllipse=function(e,t,r,n,i,c){void 0===r&&(r="none"),void 0===n&&(n=1),void 0===i&&(i="round"),void 0===c&&(c="round");var u=e.color,l=e.data,d=e.graphic_id,h=e.x,p=e.y,f=Object(s.m)(a.f.Ellipse,l),_=f.cx,g=f.cy,m=f.rx,v=f.ry,y=""+o.a.reservedPrefix.graphicsSvg+d,b=""+o.a.reservedPrefix.graphics+d,S=Object(s.e)(y,b,"ellipse",e.zorder);S[1]&&this.toolInstance.appendGraphicsDomHandle(S[1],a.f.Ellipse),this.toolInstance.triggerAnimateHandle(S[0],t),Object(s.p)(S[0],[{attr:"fill",value:r},{attr:"opacity",value:n},{attr:"stroke",value:u},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:i},{attr:"stroke-linecap",value:c},{attr:"cx",value:_},{attr:"cy",value:g},{attr:"rx",value:m},{attr:"ry",value:v},{attr:"transform",value:"translate("+(h||0)+", "+(p||0)+")"}])},e.prototype.drawLocalGraphicImage=function(e,t,r){var n=this;return new Promise((function(c,u){if(!n.toolInstance.getUserAuth().create)return u(Object(i.b)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic));var l=new Image;l.setAttribute("crossOrigin","anonymous"),l.onload=function(){var i=n.toolInstance.graphicList,u=n.getScaleRect(l.width,l.height),d=u.width,p=u.height,f={x:t,y:r,ex:t+d,ey:r+p,url:e,hash:""},_=Object(s.d)(),g=n.toolInstance.serviceHandle.createZorder(),m=""+o.a.reservedPrefix.graphicsSvg+_,v=""+o.a.reservedPrefix.graphics+_,y=Object(s.e)(m,v,"image",g);if(y[1]&&n.toolInstance.appendGraphicsDomHandle(y[1],a.f.Image),Object(s.p)(y[0],[{attr:"width",value:d},{attr:"height",value:p},{attr:"crossorigin",value:"anonymous"},{attr:"href",value:e},{attr:"transform",value:"translate("+t+", "+r+")"}]),n.isIos11&&y[0].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),n.toolInstance.updateProtoGraphic(h(h({creator_id:n.toolInstance.getUserID(),graphic_id:_,operate_id:_,is_end_draw:!0},o.a.basicState),{type:a.f.Image,x:0,y:0,px:0,py:0,initX:t,initY:r,data:f,oldData:h({},f),zorder:g})),n.toolInstance.updateOffsetAndScrollHandle(),n.toolInstance.updateBoxHandle(n.toolInstance.protoGraphic)){var b=JSON.parse(JSON.stringify(n.toolInstance.protoGraphic));b.is_end_draw=!0,i.push(b),n.toolInstance.updateToRemoteNewHandle([b],a.a.Create)}n.toolInstance.initDrawHandle(),c(e)},l.onerror=u,l.src=e}))},e.prototype.drawLocalCustomImage=function(e){var t=e.graphic_id,r=o.a.basicExtraState.customImage,n=r.w,i=r.h,c=e.data,u=c.x,l=c.y,d=c.ex,h=c.ey,p=c.url,f=""+o.a.reservedPrefix.graphicsSvg+t,_=""+o.a.reservedPrefix.graphics+t,g=Object(s.e)(f,_,"image",e.zorder);g[1]&&this.toolInstance.appendGraphicsDomHandle(g[1],a.f.Image);var m=Number((Math.abs(d-u)/n).toFixed(7)),v=Number((Math.abs(h-l)/i).toFixed(7));Object(s.p)(g[0],[{attr:"width",value:n},{attr:"height",value:i},{attr:"crossorigin",value:"anonymous"},{attr:"href",value:p},{attr:"transform",value:"translate("+Math.min(u,d)+", "+Math.min(l,h)+") scale("+m+", "+v+")"}]),this.isIos11&&g[0].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p)},e.prototype.drawReomteGraphicImage=function(e){var t=this,r=e.graphic_id,o=e.zorder,n=e.data;this.checkImageRect(n);var i=n.x,a=n.y,c=n.ex,u=n.ey,l=n.url;this.toolInstance.appendImageDomHandle(r,o);var d=new Image;d.setAttribute("crossOrigin","anonymous"),d.onload=function(){var o=t.toolInstance.getImageDomHandle(r),n=o[0],h=o[1];if(n&&h){var p=t.getScaleRect(d.width,d.height),f=p.width,_=p.height,g=Number(((c-i)/f).toFixed(7)),m=Number(((u-a)/_).toFixed(7));Object(s.p)(n,[{attr:"width",value:f},{attr:"height",value:_},{attr:"crossorigin",value:"anonymous"},{attr:"href",value:l},{attr:"transform",value:"translate("+i+", "+a+") scale("+g+", "+m+")"}]),t.isIos11&&n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);var v=t.toolInstance.getBoxInfoByGraphic(e);if(v){var y=v.x,b=v.y,S=v.width,E=v.height;h.style.cssText+="width:"+S+"px;height:"+E+"px;left:"+y+"px;top:"+b+"px;"}}},d.src=l},e.prototype.updateGraphicsImage=function(e){var t=e.graphic_id,r=e.data;this.checkImageRect(r);var n=r.x,i=r.y,a=r.ex,c=r.ey,u=""+o.a.reservedPrefix.graphicsSvg+t,l=""+o.a.reservedPrefix.graphics+t,d=Object(s.e)(u,l,"image",e.zorder)[0];if(d){var h=+d.getAttribute("width"),p=+d.getAttribute("height"),f=Number(((a-n)/h).toFixed(7)),_=Number(((c-i)/p).toFixed(7));d.setAttribute("transform","translate("+n+", "+i+") scale("+f+", "+_+")")}},e.prototype.checkImageRect=function(e){var t=e.x,r=e.y,o=e.ex,n=e.ey;t>o&&(e.x=o,e.ex=t),r>n&&(e.y=n,e.ey=r)},e.prototype.getScaleRect=function(e,t){var r=this.toolInstance.viewInfo,o=r.viewWidth,n=r.viewHeight;if(e>o||t>n){var i=Math.min(o/e,n/t);e=e*i|0,t=t*i|0}return{width:e,height:t}},e.prototype.getSize=function(e,t){return t===a.e.Local?o.a.basicExtraState.drawSize:Object(s.c)(e.size,e.type,this.toolInstance.viewInfo.viewWidth,!1)},e}(),f=(r(376),r(377),r(26)),_=function(){return(_=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},g=function(){function e(e){var t=this;this.bindFlag=!1,this.canCreate=!0,this.chInput=!1,this.allowTouchEnd=!0,this.isSwitch=!1,this.mouseupHandle=function(e){e instanceof MouseEvent?t.upEventHandle(e):t.allowTouchEnd&&(t.upEventHandle(e),t.allowTouchEnd=!1)},this.upEventHandle=function(e){if(t.toolInstance.enableDraw)if(t.toolInstance.getUserAuth().create){if(t.toolInstance.downCommonHandle(e))if(t.canCreate){var r=t.toolInstance.getMouseChangedPoint(e),o=r.clientX,n=r.clientY;if(!t.checkAddHandle(o,n))return;t.addTextGraphics("",o,n)}else t.canCreate=!0}else Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic)},this.toolInstance=e,this.isSwitch=this.toolInstance.serviceHandle.isSwitch()}return e.prototype.updateContentHandle=function(e){var t=o.a.textareaHPadding,r=e.value,n=e.previousSibling,i=Number(n.style.maxWidth.split("px")[0])-2*t,s=n.parentNode,a=document.createElement("span");a.style.cssText="position: absolute; z-index: -100; font-size: inherit; font-family: inherit; visibility: hidden; display: inline-block;line-height: 1;",s.appendChild(a);for(var c="",u=0,l=0,d=r;l<d.length;l++){var h=d[l];if("\n"===h)c+="\n",u=0;else{var p=this.textSizeHandle(a,h).width;(u+=p)>i?(c+="\n"+h,u=p):c+=h}}s.removeChild(a),n.innerHTML=c,e.value=c},e.prototype.addTextareaDomHandle=function(e){var t=e.graphic_id,r=e.data,n=document.createElement("textarea"),i=""+o.a.reservedPrefix.graphics+t;n.setAttribute("id",i),n.setAttribute("tabindex","-1"),n.setAttribute("spellcheck","false"),n.setAttribute("maxlength",""+o.a.maxlength),navigator.userAgent.includes("iPhone")&&navigator.userAgent.includes("11_4_1")&&(n.style.padding="0 "+Math.max(o.a.textareaHPadding-3,0)+"px");var a=Object(s.r)(r).text;return n.value=a,n},e.prototype.addPreDomHandle=function(e){var t=e.size,r=e.data,n=e.type,i=Object(s.r)(r).text,a=document.createElement("pre");a.innerHTML=i;var c=Object(s.c)(t,n,this.toolInstance.viewInfo.viewWidth,!1),u=o.a.textareaHPadding,l=o.a.textareaVPadding;return u*=2,l*=2,a.style.cssText="min-height:"+(c*o.a.lineHeight+l)+"px;min-width:"+(c+u)+"px;",a},e.prototype.addTextareaConDomHandle=function(e){var t=e.size,r=e.color,n=e.data,i=e.graphic_id,a=e.type,c=e.attributes,u=e.zorder,l=JSON.parse(this.isSwitch&&c.buffer&&Object(f.e)(c)||c||o.a.basicState.attributes),d=l.bold,h=l.italic,p=Object(s.c)(t,a,this.toolInstance.viewInfo.viewWidth,!1),_=Object(s.r)(n),g=_.beginX,m=_.beginY,v=document.createElement("div"),y=""+o.a.reservedPrefix.textareaCon+i;return v.setAttribute("id",y),u&&v.setAttribute("data-z",u+""),v.style.cssText="font-size:"+p+"px;font-style:"+(h?"italic":"normal")+";font-weight:"+(d?"bold":"normal")+";left:"+g+"px;top:"+m+"px;color:"+r+";caret-color:"+r+";",v},e.prototype.textSizeHandle=function(e,t){return" "===t&&(t=t.replace(/ /g,"&nbsp")),e.innerHTML=t,{width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}},e.prototype.checkValueHandle=function(e){var t=o.a.maxlength;return e.length>t&&(e=e.slice(0,t)),e},e.prototype.initHeightHandle=function(e){var t=e.previousSibling;e.scrollTop=0,e.style.height="initial",t.style.height="initial",t.style.maxHeight="initial"},e.prototype.updateHeightHandle=function(e){var t=o.a.textareaHPadding,r=o.a.lineHeight,n=this.toolInstance.viewInfo.zoom,i=e.previousSibling,s=i.style.height,a=Number(i.style.maxHeight.split("px")[0]),c=(Number(i.style.maxWidth.split("px")[0])+2*t)/n,u=e.parentNode.style.fontSize,l=Number(u.split("px")[0]);e.style.maxWidth=c+"px",e.style.height=l*r+"px";var d=e.scrollHeight+"px";e.scrollHeight*n>a&&(d=s),i.style.height=d,e.style.height=d},e.prototype.inputCallbackHandle=function(e){var t=e.target,r=t.previousSibling,o=this.checkValueHandle(t.value);t.value=o,r.innerHTML=o,this.updateHeightHandle(t),!this.chInput&&this.updateToRemoteHandle(e)},e.prototype.chInputCallbackHandle=function(e){this.chInput=!1,this.updateToRemoteHandle(e)},e.prototype.updateToRemoteHandle=function(e){var t=e.target,r=t.parentNode,n=this.toolInstance.graphicList,i=t.id.split(o.a.reservedPrefix.graphics)[1],l=t.value,d=this.toolInstance.getDataFromGraphicList(i,"data").data,h=Object(s.r)(d),p=h.beginX,f=h.beginY,_=n.findIndex((function(e){return e.graphic_id===i})),g=n[_];g&&("blur"===e.type?(g.is_end_draw=!0,l?(this.updateContentHandle(t),this.toolInstance.updateBoxHandle(g,"blur"),g.data=Object(s.a)(t.value,p,f),c.a.getInstance().info1(u.e.TextArea_UpdateToRemoteHandle,{protoGraphic:[g],type:e.type,Action:"Update"}),this.toolInstance.updateToRemoteNewHandle([g],a.a.Update)):(Object(s.o)(r),Object(s.o)(this.toolInstance.getBoxHandle(i)),n.splice(_,1),c.a.getInstance().info1(u.e.TextArea_UpdateToRemoteHandle,{protoGraphic:[g],type:e.type,Action:"Delete"}),this.toolInstance.updateToRemoteNewHandle([g],a.a.Delete)),this.toolInstance.initDrawHandle()):this.toolInstance.getUserAuth().update||g.creator_id===this.toolInstance.getUserID()?(this.updateContentHandle(t),g.data=Object(s.a)(t.value,p,f),g.is_end_draw=!1,g.data=Object(s.a)(t.value,p,f),c.a.getInstance().info1(u.e.TextArea_UpdateToRemoteHandle,{protoGraphic:[g],type:e.type,Action:"Update"}),this.toolInstance.updateToRemoteNewHandle([g],a.a.Update)):t.blur())},e.prototype.bindTextareaInputEventHandle=function(e){var t=this;e.addEventListener("input",(function(e){t.inputCallbackHandle(e)})),e.addEventListener("compositionstart",(function(e){t.chInput=!0})),e.addEventListener("compositionend",(function(e){t.chInputCallbackHandle(e)})),e.addEventListener("keydown",(function(e){9===e.keyCode&&e.preventDefault()}))},e.prototype.bindTextareaFocusEvent=function(e,t){var r=this,n=t.data,i=Object(s.r)(n),a=i.beginX,c=i.beginY;e.addEventListener("focus",(function(e){var t=e.target;t.parentNode.style.borderColor="red";var n=t.id.split(o.a.reservedPrefix.graphics)[1];r.toolInstance.setDataToGraphicList(n,{oldData:Object(s.a)(t.value,a,c)})}))},e.prototype.bindTextareaBlurEvents=function(e){var t=this;e.addEventListener("blur",(function(e){var r=t.toolInstance.graphicsBoxConNode,n=e.target,i=n.parentNode,s=n.id.split(o.a.reservedPrefix.graphics)[1];t.initHeightHandle(n),t.updatePointerEvents(2,r.querySelector(t.toolInstance.getBoxSelHandle(s))),i.style.borderColor="transparent",t.canCreate=!1,t.updateToRemoteHandle(e),t.allowTouchEnd||(t.allowTouchEnd=!0)}))},e.prototype.updatePointerEvents=function(e,t){var r=this,n=this.toolInstance.graphicsBoxConNode;1===e?(Array.prototype.slice.call(Object(s.g)(n),0).forEach((function(e){var t=r.toolInstance.getGraphicsHandle(e.id.split(o.a.reservedPrefix.graphicsBox)[1]);t&&"DIV"===t.nodeName&&(e.style.pointerEvents="initial")})),n.style.pointerEvents="none",t&&(t.style.pointerEvents="none")):(n.style.pointerEvents="initial",t&&(t.style.pointerEvents="initial"))},e.prototype.checkAddHandle=function(e,t){var r=this.calMaxSizeHandle(e,t),n=r.maxWidth,i=r.maxHeight,c=this.toolInstance.viewInfo.viewWidth,u=o.a.textareaHPadding,l=o.a.basicState,d=o.a.lineHeight,h=o.a.textareaVPadding,p=Object(s.c)(l.fontSize,a.f.Text,c,!1);return 2*u+p+12<n&&2*h+p*d+12<i},e.prototype.bindEventsHandle=function(){if(!this.bindFlag){this.bindFlag=!0;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(e,o.a.mouseEvents.up,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,o.a.mouseEvents.up,this.mouseupHandle)}},e.prototype.addTextGraphics=function(e,t,r){var n=this.toolInstance,i=n.protoGraphic,l=n.graphicList,d=Object(s.d)();this.toolInstance.updateProtoGraphic(_(_({creator_id:this.toolInstance.getUserID(),graphic_id:d,operate_id:d,is_end_draw:!!e,x:0,y:0,px:0,py:0,zorder:this.toolInstance.serviceHandle.createZorder(),data:Object(s.a)(e,t+"",r+"")},o.a.basicState),{size:o.a.basicState.fontSize}));var h=_({},i);l.push(h),this.drawGraphicsHandle(h,!e),this.toolInstance.setGraphicsDomZorder(h);var p=this.toolInstance.updateBoxHandle(h);!e&&this.updatePointerEvents(1,p),c.a.getInstance().info1(u.e.TextArea_AddTextGraphics,{text:[h],action:"Create"}),this.toolInstance.updateToRemoteNewHandle([h],a.a.Create)},e.prototype.drawGraphicsHandle=function(e,t){var r=e.x,n=e.y,i=this.addTextareaDomHandle(e),c=this.addPreDomHandle(e),u=this.addTextareaConDomHandle(e);u.appendChild(c),u.appendChild(i),u.style.transform="translate("+(r||0)+"px, "+(n||0)+"px)",this.toolInstance.appendGraphicsDomHandle(u,a.f.Text),this.bindTextareaInputEventHandle(i),this.bindTextareaFocusEvent(i,e);var l=o.a.mouseEvents;Object(s.b)(i,[l.down,l.move,l.up]),t&&(this.initMaxSizeHandle(i),i.focus(),this.updatePointerEvents(1,null)),this.bindTextareaBlurEvents(i)},e.prototype.updateGraphicsHandle=function(e){var t=e.graphic_id,r=e.data,n=e.size,i=e.color,a=e.x,c=e.y,u=e.type,l=e.attributes,d=JSON.parse(this.isSwitch&&l.buffer&&Object(f.e)(l)||l||o.a.basicState.attributes),h=d.bold,p=d.italic,_=Object(s.c)(n,u,this.toolInstance.viewInfo.viewWidth,!1),g=Object(s.r)(r),m=g.beginX,v=g.beginY,y=g.text,b=this.toolInstance.getGraphicsHandle(t);if(b){var S=Object(s.g)(b),E=S[0],T=S[1];T.value=y,b.style.cssText="font-size: "+_+"px;font-style:"+(p?"italic":"normal")+";font-weight:"+(h?"bold":"normal")+";left: "+m+"px;top: "+v+"px;color: "+i+";transform: translate("+a+"px, "+c+"px);caret-color:"+i+";";var w=y.split("\n").length*_*o.a.lineHeight+2*o.a.textareaVPadding;E.innerHTML=y,E.style.height=w+"px",E.style.maxWidth="initial",E.style.maxHeight="initial",T.value=y,T.style.height=w+"px"}},e.prototype.focusHandle=function(e){this.toolInstance.setDataToGraphicList(e,{selected:!1});var t=this.toolInstance.getBoxHandle(e);t&&(t.style.borderColor="transparent"),this.updatePointerEvents(1,t);var r=this.toolInstance.getGraphicsHandle(e);if(r){var o=Object(s.g)(r)[1];this.initMaxSizeHandle(o),r.style.borderColor="red",o.style.height="100%",o.focus();var n=this.toolInstance.graphicList.filter((function(t){return t.graphic_id===e}))[0];n.operate_id=Object(s.d)(),n.is_end_draw=!1,c.a.getInstance().info1(u.e.TextArea_FocusHandle,{graphic:[n],action:"Update"}),this.toolInstance.updateToRemoteNewHandle([n],a.a.Update)}},e.prototype.backUpdateGraphicsHandle=function(e){var t=e.graphic_id,r=e.data,o=Object(s.r)(r).text,n=this.toolInstance.getGraphicsHandle(t);if(n){var i=Object(s.g)(n),a=i[0];i[1].value=o,a.innerHTML=o;var l=n.getBoundingClientRect(),d=l.width,h=l.height,p=this.toolInstance.getBoxHandle(t);p&&(p.style.cssText+="width:"+d+"px;height:"+h+"px;"),c.a.getInstance().info1(u.e.TextArea_BackUpdateGraphicsHandle,{graphic_id:t,data:r}),this.toolInstance.setDataToGraphicList(t,{data:r})}},e.prototype.initMaxSizeHandle=function(e){var t=e.getBoundingClientRect(),r=t.left,o=t.top,n=this.toolInstance.transLocationHandle({clientX:r,clientY:o}),i=n.clientX,s=n.clientY,a=this.calMaxSizeHandle(i,s),c=a.maxWidth,u=a.maxHeight,l=e.previousSibling;l.style.maxHeight=u+"px",l.style.maxWidth=c+"px"},e.prototype.calMaxSizeHandle=function(e,t){var r,n=this.toolInstance.viewInfo,i=n.isScroll,s=n.isOriginScroll,a=n.width,c=n.height,u=n.viewWidth,l=n.viewHeight,d=n.zoom,h=n.zoomTX,p=n.zoomTY,f=n.offsetPageX,_=n.offsetPageY,g=0;return i?(r=Math.floor(a-e),g=Math.floor(c-t),s&&(r-=o.a.scrollbarSize,g-=o.a.scrollbarSize)):(r=Math.floor(u-e*d+f*d-h),g=Math.floor(l-t*d+_*d-p)),{maxWidth:r-=2*o.a.boxBorderWidth*d,maxHeight:g-=2*o.a.boxBorderWidth*d}},e}(),m=function(){function e(e){var t=this;this.bindFlag=!1,this.mouseInfo={touchLeaveRect:{left:0,top:0,right:0,bottom:0}},this.boxRectMap={},this.mousedownHandle=function(e){if(t.toolInstance.enableDraw){var r=t.toolInstance,n=r.whiteboardNode,i=r.graphicList;t.mouseInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect(),i.forEach((function(e){if(e.type!==a.f.Laser){var r=t.toolInstance.getBoxHandle(e.graphic_id);r&&(t.boxRectMap[e.graphic_id]=r.getBoundingClientRect())}})),t.mousemoveHandle(e),t.toolInstance.toolAddEL(n,o.a.mouseEvents.move,t.mousemoveHandle)}},this.mousemoveHandle=function(e){if(t.toolInstance.enableDraw){var r=e instanceof MouseEvent?e:e.changedTouches[0],o=r.clientX,n=r.clientY;if(t.toolInstance.isTouchLeaveWhenMove(e,t.mouseInfo.touchLeaveRect))t.mouseupHandle();else{var i=0,s="";t.toolInstance.graphicList.forEach((function(e){var r=t.boxRectMap[e.graphic_id];if(r){var a=r.left,c=r.right,u=r.top,l=r.bottom;if(o>=a&&o<=c&&n>=u&&n<=l){var d=e.zorder||1;(!i||d>i)&&(i=d,s=e.graphic_id)}}})),t.toolInstance.graphicList.forEach((function(e){e.selected=!!s&&e.graphic_id===s&&t.toolInstance.getGraphicIsEndDraw(e.graphic_id),t.toolInstance.updateBoxBorder(e)}))}}},this.mouseupHandle=function(){t.boxRectMap={};var e=t.toolInstance.whiteboardNode;t.toolInstance.toolRmEl(e,o.a.mouseEvents.move,t.mousemoveHandle),t.toolInstance.deleteSelectedGraphics(a.c.EraserTool)},this.toolInstance=e}return e.prototype.bindEventsHandle=function(){if(!this.bindFlag){this.bindFlag=!0;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(e,o.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolAddEL(e,o.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolAddEL(e,o.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,o.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolRmEl(e,o.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolRmEl(e,o.a.mouseEvents.leave,this.mouseupHandle)}},e}(),v=(r(382),r(395),function(){function e(e){this.editBoxMap={w:0,h:0,tx:0,ty:0,x:0,y:0,mx:0,my:0,tx1:0,ty1:0,w0:0,h0:0,board:8,wdiff:9,tdiff:4,interrupt:!1,target:null,graphic:null,parent:document.createElement("div"),box:document.createElement("div"),img:document.createElementNS("http://www.w3.org/2000/svg","image")},this.toolInstance=e,this.setEditorBox()}return e.prototype.startEditTarget=function(e,t){this.endEditTarget();var r=e.target,n=r.className;if(n.includes("operation-point-desktop")){var i=this.editBoxMap.graphic;i&&((this.toolInstance.getUserAuth().update||i.creator_id===this.toolInstance.getUserID())&&(i.operate_id=Object(s.d)(),i.is_end_draw=!1,this.toolInstance.updateToRemoteNewHandle([i],a.a.Update)),Object.assign(i.oldData,i.data)),this.editBoxMap.target=r;var c=window.getComputedStyle(this.editBoxMap.parent),u=c.transform.match(/(-?\d+),\s?(-?\d+)\)$/)||[],l=this.toolInstance.getMouseChangedPoint(e),d=l.clientX,h=l.clientY;this.editBoxMap.w=+c.width.replace("px",""),this.editBoxMap.h=+c.height.replace("px",""),this.editBoxMap.tx=+u[1]||0,this.editBoxMap.ty=+u[2]||0,this.editBoxMap.x=d,this.editBoxMap.y=h;var p=n.substr(n.lastIndexOf(" ")+1);"L"==p?this.editBoxMap.mx=d+this.editBoxMap.w:"R"==p?this.editBoxMap.mx=d-this.editBoxMap.w:"T"==p?this.editBoxMap.my=h+this.editBoxMap.h:"B"==p?this.editBoxMap.my=h-this.editBoxMap.h:"LT"==p?(this.editBoxMap.mx=d+this.editBoxMap.w,this.editBoxMap.my=h+this.editBoxMap.h):"RB"==p?(this.editBoxMap.mx=d-this.editBoxMap.w,this.editBoxMap.my=h-this.editBoxMap.h):"LB"==p?(this.editBoxMap.mx=d+this.editBoxMap.w,this.editBoxMap.my=h-this.editBoxMap.h):"RT"==p&&(this.editBoxMap.mx=d-this.editBoxMap.w,this.editBoxMap.my=h+this.editBoxMap.h);var f=this.toolInstance,_=f.whiteboardNode,g=f.conNode;return this.toolInstance.toolAddEL(_,o.a.mouseEvents.move,t),g.style.cursor=n.replace(/.+cursor-(\w+).+/,"$1")+"-resize",!1}return!0},e.prototype.moveEditTarget=function(e){var t=this.editBoxMap,r=t.target,o=t.interrupt;if(!r)return!o;var n=r.className.substr(r.className.lastIndexOf(" ")+1),i=this.toolInstance.getMouseChangedPoint(e),s=i.clientX,a=i.clientY;return this["moveEditTarget"+n](s,a),!1},e.prototype.endEditTarget=function(){var e=this.editBoxMap,t=e.target,r=e.graphic;if(t&&r)if(this.toolInstance.getUserAuth().update||r.creator_id===this.toolInstance.getUserID()){var o=r.data,n=o.x,s=o.y;r.initX=n-r.x,r.initY=s-r.y,r.is_end_draw=!0,this.toolInstance.updateToRemoteNewHandle([r],a.a.Update)}else{Object.assign(r.data,r.oldData),this.initEditBox(r);var c=this.editBoxMap,u=c.w,l=c.h,d=c.tx1,h=c.ty1;this.updateSVGImageAttr(u,l,d,h,!0),Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthUpdateGraphic)}this.editBoxMap.target=null,this.toolInstance.conNode.style.cursor="auto"},e.prototype.setEditorBox=function(){this.editBoxMap.parent=this.toolInstance.whiteboardNode.querySelector(".img-editor-box")},e.prototype.initEditBox=function(e){var t,r=e.graphic_id,o=null===(t=this.toolInstance.getGraphicsHandle(r))||void 0===t?void 0:t.children[0];if(o){var n=this.editBoxMap,i=n.parent,s=n.board,a=n.wdiff,c=n.tdiff,u=e.data,l=u.x,d=u.y,h=u.ex-l+a,p=u.ey-d+a;l-=c,d-=c,l|=0,d|=0,this.editBoxMap.tx1=l,this.editBoxMap.ty1=d,this.editBoxMap.graphic=e,this.editBoxMap.w0=+o.getAttribute("width"),this.editBoxMap.h0=+o.getAttribute("height"),this.editBoxMap.img=o,this.editBoxMap.box=this.toolInstance.getBoxHandle(r),i.style.cssText+="display:block;width:"+h+"px;height:"+p+"px;transform:translate("+l+"px,"+d+"px);",i.children[4].style.cssText+="left:"+(h/2-s)+"px;",i.children[6].style.cssText+="left:"+(h/2-s)+"px;",i.children[5].style.cssText+="top:"+(p/2-s)+"px;",i.children[7].style.cssText+="top:"+(p/2-s)+"px;"}},e.prototype.hideEditBox=function(e){this.editBoxMap.target=null,this.editBoxMap.graphic=null,this.editBoxMap.interrupt=!!e;var t=this.editBoxMap.parent;t&&(t.style.display="none")},e.prototype.hideEditBoxByList=function(e){var t,r=null===(t=this.editBoxMap.graphic)||void 0===t?void 0:t.graphic_id;e.some((function(e){return e.graphic_id===r}))&&this.hideEditBox()},e.prototype.hideEditBoxByIds=function(e){var t,r=null===(t=this.editBoxMap.graphic)||void 0===t?void 0:t.graphic_id;e.some((function(e){return e===r}))&&this.hideEditBox()},e.prototype.moveEditTargetL=function(e,t,r){var o=this.editBoxMap,n=o.x,i=o.mx,s=o.w,a=o.h,c=o.tx,u=o.ty,l=o.parent,d=o.board;if(e<=i){e=n-e;var h=0|(r?e-s:e+s),p=0|(r?c-e+s:c-e);l.style.cssText+="width:"+h+"px;transform:translate("+p+"px,"+u+"px);",l.children[4].style.cssText+="left:"+(h/2-d)+"px;",l.children[6].style.cssText+="left:"+(h/2-d)+"px;",this.editBoxMap.tx1=p,this.editBoxMap.ty1=u,this.updateSVGImageAttr(h,a,p,u)}else this.moveEditTargetR(e,0,!0)},e.prototype.moveEditTargetR=function(e,t,r){var o=this.editBoxMap,n=o.x,i=o.mx,s=o.w,a=o.h,c=o.tx1,u=o.ty1,l=o.parent,d=o.board;e>i?(e=0|(r?e-n-s:e-n+s),l.style.cssText+="width:"+e+"px;",l.children[4].style.cssText+="left:"+(e/2-d)+"px;",l.children[6].style.cssText+="left:"+(e/2-d)+"px;",this.updateSVGImageAttr(e,a,c,u)):this.moveEditTargetL(e,0,!0)},e.prototype.moveEditTargetT=function(e,t,r){var o=this.editBoxMap,n=o.y,i=o.my,s=o.w,a=o.h,c=o.tx,u=o.ty,l=o.parent,d=o.board;if(t<=i){t=n-t;var h=0|(r?t-a:t+a),p=0|(r?u-t+a:u-t);l.style.cssText+="height:"+h+"px;transform:translate("+c+"px,"+p+"px);",l.children[5].style.cssText+="top:"+(h/2-d)+"px;",l.children[7].style.cssText+="top:"+(h/2-d)+"px;",this.editBoxMap.tx1=c,this.editBoxMap.ty1=p,this.updateSVGImageAttr(s,h,c,p)}else this.moveEditTargetB(0,t,!0)},e.prototype.moveEditTargetB=function(e,t,r){var o=this.editBoxMap,n=o.y,i=o.my,s=o.w,a=o.h,c=o.tx1,u=o.ty1,l=o.parent,d=o.board;t>i?(t=0|(r?t-n-a:t-n+a),l.style.cssText+="height:"+t+"px;",l.children[5].style.cssText+="top:"+(t/2-d)+"px;",l.children[7].style.cssText+="top:"+(t/2-d)+"px;",this.updateSVGImageAttr(s,t,c,u)):this.moveEditTargetT(0,t,!0)},e.prototype.moveEditTargetLT=function(e,t,r){var o=this.editBoxMap,n=o.x,i=o.y,s=o.mx,a=o.my,c=o.w,u=o.h,l=o.tx,d=o.ty,h=o.parent,p=o.board;if(e>n-4&&t>i-4||e<n-4&&t<i-4)if(c<=u&&e<=s||u<c&&t<=a){var f=0,_=0,g=0,m=0;if(r?(e=Math.min(n-e-c,i-t-u),u<c?(_=e,f=Math.round(c*_/u),m=d-e,g=Math.round(l-c*e/u)):(f=e,_=Math.round(f*u/c),g=l-e,m=Math.round(d-u*e/c))):(t-=i,e=(e-=n)<0||t<0?Math.max(e,t):Math.min(e,t),u<c?(_=u-e,f=Math.round(c*_/u),m=d+e,g=Math.round(l+c*e/u)):(f=c-e,_=Math.round(f*u/c),g=l+e,m=Math.round(d+u*e/c))),f<0||_<0)return;f|=0,_|=0,g|=0,m|=0,h.style.cssText+="width:"+f+"px;height:"+_+"px;transform:translate("+g+"px,"+m+"px);",h.children[4].style.cssText+="left:"+(f/2-p)+"px;",h.children[6].style.cssText+="left:"+(f/2-p)+"px;",h.children[5].style.cssText+="top:"+(_/2-p)+"px;",h.children[7].style.cssText+="top:"+(_/2-p)+"px;",this.editBoxMap.tx1=g,this.editBoxMap.ty1=m,this.updateSVGImageAttr(f,_,g,m)}else this.moveEditTargetRB(e,t,!0)},e.prototype.moveEditTargetRB=function(e,t,r){var o=this.editBoxMap,n=o.x,i=o.y,s=o.mx,a=o.my,c=o.w,u=o.h,l=o.tx1,d=o.ty1,h=o.parent,p=o.board;if(e>n-4&&t>i-4||e<n-4&&t<i-4)if(c<=u&&e>=s||u<c&&t>=a){e-=n,t-=i;var f=0,_=0;if(r?u<c?(_=Math.min(e,t)-u,f=Math.round(c*_/u)):(f=Math.min(e,t)-c,_=Math.round(f*u/c)):(e=e<0||t<0?Math.max(e,t):Math.min(e,t),u<c?(_=e+u,f=Math.round(c*_/u)):(f=e+c,_=Math.round(f*u/c))),f<0||_<0)return;f|=0,_|=0,h.style.cssText+="width:"+f+"px;height:"+_+"px;",h.children[4].style.cssText+="left:"+(f/2-p)+"px;",h.children[6].style.cssText+="left:"+(f/2-p)+"px;",h.children[5].style.cssText+="top:"+(_/2-p)+"px;",h.children[7].style.cssText+="top:"+(_/2-p)+"px;",this.updateSVGImageAttr(f,_,l,d)}else this.moveEditTargetLT(e,t,!0)},e.prototype.moveEditTargetLB=function(e,t,r){var o=this.editBoxMap,n=o.x,i=o.y,s=o.mx,a=o.my,c=o.w,u=o.h,l=o.tx,d=o.ty,h=o.parent,p=o.board;if(e<n-4&&t>i-4||e>n-4&&t<i-4)if(c<=u&&e<s||u<c&&t>a){var f=0,_=0,g=0,m=d;r?(e=Math.min(n-e-c,t-i-u),e=Math.abs(e),u<c?(_=e,f=Math.round(c*_/u)):(f=e,_=Math.round(f*u/c)),g=l-f,m=d+u):(t-=i,e=(e-=n)<0||t>0?Math.min(-e,t):-Math.min(e,-t),u<c?(_=u+e,g=l+c-(f=Math.round(c*_/u))):(f=c+e,_=Math.round(f*u/c),g=l-e)),f|=0,_|=0,g|=0,m|=0,h.style.cssText+="width:"+f+"px;height:"+_+"px;transform:translate("+g+"px,"+m+"px);",h.children[4].style.cssText+="left:"+(f/2-p)+"px;",h.children[6].style.cssText+="left:"+(f/2-p)+"px;",h.children[5].style.cssText+="top:"+(_/2-p)+"px;",h.children[7].style.cssText+="top:"+(_/2-p)+"px;",this.editBoxMap.tx1=g,this.editBoxMap.ty1=m,this.updateSVGImageAttr(f,_,g,m)}else this.moveEditTargetRT(e,t,!0)},e.prototype.moveEditTargetRT=function(e,t,r){var o=this.editBoxMap,n=o.x,i=o.y,s=o.mx,a=o.my,c=o.w,u=o.h,l=o.tx,d=o.ty,h=o.parent,p=o.board;if(e>n-4&&t<i-4||e<n-4&&t>i-4)if(c<=u&&e>s||u<c&&t<a){var f=0,_=0,g=l,m=0;r?(e=Math.min(e-n-c,i-t-u),e=Math.abs(e),u<c?(_=e,f=Math.round(c*_/u)):(f=e,_=Math.round(f*u/c)),g=l+c,m=d-_):(t-=i,e=(e-=n)<0||t>0?-Math.min(-e,t):Math.min(e,-t),u<c?(_=u+e,f=Math.round(c*_/u),m=d-e):(f=c+e,m=d+u-(_=Math.round(f*u/c)))),f|=0,_|=0,g|=0,m|=0,h.style.cssText+="width:"+f+"px;height:"+_+"px;transform:translate("+g+"px,"+m+"px);",h.children[4].style.cssText+="left:"+(f/2-p)+"px;",h.children[6].style.cssText+="left:"+(f/2-p)+"px;",h.children[5].style.cssText+="top:"+(_/2-p)+"px;",h.children[7].style.cssText+="top:"+(_/2-p)+"px;",this.editBoxMap.tx1=g,this.editBoxMap.ty1=m,this.updateSVGImageAttr(f,_,g,m)}else this.moveEditTargetLB(e,t,!0)},e.prototype.updateSVGImageAttr=function(e,t,r,o,n){var i=this.editBoxMap,s=i.w0,a=i.h0,c=i.wdiff,u=i.tdiff,l=i.img,d=i.box,h=i.graphic;if(l&&d){e|=0,t|=0,r|=0,o|=0,d.style.cssText+="width:"+e+"px;height:"+t+"px;left:"+r+"px;top:"+o+"px;",e-=c,t-=c,r+=u,o+=u;var p=Number((e/s).toFixed(7)),f=Number((t/a).toFixed(7));if(l.setAttribute("transform","translate("+r+", "+o+") scale("+p+", "+f+")"),!n){var _=null==h?void 0:h.data;_.x=r,_.y=o,_.ex=r+e,_.ey=o+t}}},e}()),y=function(){return(y=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},b=function(){function e(e){var t=this;this.bindFlag=!1,this.authFlag=!0,this.noMoveUp=!0,this.isWillMove=!1,this.mouseInfo={moveCount:0,touchLeaveRect:{left:0,top:0,right:0,bottom:0}},this.moveSelectedGraphicIds="",this.userId="",this.selectBoxMap={l:0,t:0,r:0,b:0,box:document.createElement("div")},this.mousedownHandle=function(e){if(t.toolInstance.enableDraw&&t.toolInstance.downCommonHandle(e)&&t.imageTool.startEditTarget(e,t.mousemoveHandle)){t.setGraphicsBox(),t.authFlag=!0,t.imageTool.editBoxMap.interrupt=!1;var r=t.selectBoxMap,n=r.l,l=r.t,d=r.r,h=r.b,p=t.toolInstance.getMouseStartPoint(e),f=p.clientX,_=p.clientY,g=t.toolInstance.getUserAuth(),m=t.toolInstance,v=m.graphicList,b=m.whiteboardNode;t.mouseInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect();var S=t.getCoveredMaxZorderGraphic(e);if(S){var E=S.rect,T=E.left,w=E.top,C=E.right,I=E.bottom,O=t.toolInstance.transLocationHandle({clientX:T,clientY:w}),k=t.toolInstance.transLocationHandle({clientX:C,clientY:I});T=O.clientX,w=O.clientY,C=k.clientX,I=k.clientY;var R=S.graphic,A=R.graphic_id,P=R.selected,L=R.type,N=R.creator_id,D=g.update||N===t.userId;P||(c.a.getInstance().info1(u.e.Selector_MousedownHandle,{GraphicType:L,update:!0}),v.forEach((function(e){e.selected=e.graphic_id===A})),L===a.f.Image?D?(t.imageTool.initEditBox(S.graphic),t.hideSelectBox(A)):(t.initSelectBox(T,w,C,I),Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthUpdateGraphic)):(t.hideImageEditBox(),c.a.getInstance().info1(u.e.Selector_MousedownHandle,"\u9f20\u6807\u843d\u5728\u56fe\u5143\u4e0a"),t.initSelectBox(T,w,C,I))),P&&L===a.f.Text&&1==v.filter((function(e){return e.selected})).length&&(D?(t.noMoveUp=A,setTimeout((function(){return t.hideSelectBox(A)}),50)):Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthUpdateGraphic)),t.isWillMove=!0}else d>n&&n<=f&&f<=d&&l<=_&&_<=h?(t.isWillMove=!0,c.a.getInstance().info1(u.e.Selector_MousedownHandle,"\u843d\u5728\u9009\u62e9\u6846\u4e2d\u7684\u7a7a\u767d\u5904\uff0c\u8868\u793a\u5c06\u8981\u6267\u884c\u79fb\u52a8\u64cd\u4f5c")):(t.hideSelectBox(),c.a.getInstance().info1(u.e.Selector_MousedownHandle,"\u843d\u5728\u975e\u9009\u62e9\u6846\u4e2d\u7684\u7a7a\u767d\u5904\uff0c\u6e05\u9664\u6240\u6709\u9009\u4e2d"));t.mouseInfo.moveCount=0,t.moveSelectedGraphicIds="",t.toolInstance.updateMousePointsHandle(f,_),t.isWillMove?v.forEach((function(e){e.selected&&(g.move||e.creator_id===t.userId)&&(e.px=e.x,e.py=e.y,e.is_end_draw=!1,e.operate_id=Object(s.d)())})):(t.toolInstance.updateProtoGraphic(y(y({graphic_id:Object(s.d)()},o.a.basicState),{x:0,y:0,px:0,py:0,data:[f,_]})),t.hideImageEditBox(),t.hideSelectBox()),t.toolInstance.toolAddEL(b,o.a.mouseEvents.move,t.mousemoveHandle)}},this.mousemoveHandle=function(e){if(t.toolInstance.enableDraw){if(e instanceof MouseEvent&&!e.buttons)return t.resetMouse();if(t.imageTool.moveEditTarget(e))if(t.toolInstance.isTouchLeaveWhenMove(e,t.mouseInfo.touchLeaveRect))t.mouseupHandle();else{t.mouseInfo.moveCount++,t.noMoveUp=!1;var r=t.toolInstance.getMouseChangedPoint(e);if(t.isWillMove)t.updateGraphicsOnMoving(r);else{t.toolInstance.updateGraphicsDataHandle(r);var o=t.toolInstance.protoGraphic;t.svgTool.drawGraphicsRect(o,a.e.Local,o.color,.3),t.mouseInfo.moveCount%10==0&&t.updateBoxBorderOnSelector()}}}},this.mouseupHandle=function(){if(!t.toolInstance.enableDraw||!0===t.noMoveUp)return t.imageTool.endEditTarget(),void t.resetMouse();if(t.isWillMove){var e=t.selectBoxMap,r=e.l,o=e.t,n=e.r,i=e.b;if(t.selectBoxMap.l=+t.selectBoxMap.box.style.left.replace("px",""),t.selectBoxMap.t=+t.selectBoxMap.box.style.top.replace("px",""),t.selectBoxMap.r=t.selectBoxMap.l+n-r,t.selectBoxMap.b=t.selectBoxMap.t+i-o,!t.noMoveUp){var s=t.toolInstance.graphicList.filter((function(e){return!!t.moveSelectedGraphicIds.includes(e.graphic_id)&&(e.is_end_draw=!0,!0)}));c.a.getInstance().info1(u.e.Selector_MouseupHandle,{list:s,Action:"Move"}),t.toolInstance.updateToRemoteNewHandle(s,a.a.Move)}}else t.setSelectBox(!0);!t.imageTool.editBoxMap.interrupt&&t.noMoveUp&&t.toolInstance.getGraphicIsEndDraw(t.noMoveUp)&&t.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolText).focusHandle(t.noMoveUp),t.resetMouse()},this.toolInstance=e,this.userId=e.getUserID(),this.svgTool=e.getInstanceHandle(a.k.ZegoWhiteboardViewToolLine),this.imageTool=new v(e),this.setGraphicsBox()}return e.prototype.setGraphicsBox=function(){this.selectBoxMap.box=this.toolInstance.whiteboardNode.querySelector(".graphics-box"),this.imageTool.setEditorBox()},e.prototype.initSelectBox=function(e,t,r,o){var n=this;this.selectBoxMap.l=e,this.selectBoxMap.t=t,this.selectBoxMap.r=r,this.selectBoxMap.b=o,r-=e,o-=t,this.toolInstance.graphicList.forEach((function(e){return n.toolInstance.updateBoxBorder(e)}));var i="left:"+e+"px;top:"+t+"px;width:"+r+"px;height:"+o+"px;display:block;";this.setSelectBoxStyle(i),c.a.getInstance().info1(u.e.Selector_InitSelectBox,{l:e,t:t,r:r,b:o})},e.prototype.hideSelectBox=function(e){var t=this;this.selectBoxMap.l=0,this.selectBoxMap.t=0,this.selectBoxMap.r=0,this.selectBoxMap.b=0,this.selectBoxMap.box.style.display="none",e?this.toolInstance.graphicList.forEach((function(e){!e.selected||e.type!==a.f.Image&&e.type!==a.f.Text?t.toolInstance.updateBoxBorder(e):t.toolInstance.updateBoxBorder(e,!0)})):this.toolInstance.graphicList.forEach((function(e){e.selected=!1,t.toolInstance.updateBoxBorder(e)}))},e.prototype.setSelectBox=function(e){var t,r=this;if("none"===(null===(t=this.imageTool.editBoxMap.parent)||void 0===t?void 0:t.style.display)){var o=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=0,s=0,c=0,u=0;if(this.toolInstance.graphicList.forEach((function(e){if(e.selected){var t=r.toolInstance.getBoxInfoByGraphic(e);if(t){u++,e.type===a.f.Image&&c++;var l=t.x,d=t.y,h=t.width,p=t.height;o=Math.min(o,l),n=Math.min(n,d),i=Math.max(i,l+h),s=Math.max(s,d+p)}}r.toolInstance.updateBoxBorder(e)})),i>0&&s>0){this.selectBoxMap.l=o,this.selectBoxMap.t=n,this.selectBoxMap.r=i,this.selectBoxMap.b=s;var l="left:"+o+"px;top:"+n+"px;width:"+(i-=o)+"px;height:"+(s-=n)+"px;display:block;";if(e&&1==c&&1==u){var d=this.toolInstance.graphicList.find((function(e){return e.selected&&e.type==a.f.Image}));d&&(d.creator_id==this.userId||this.toolInstance.getUserAuth().update)&&(l=l.replace("block","none"),this.toolInstance.updateBoxBorder(d,!0),this.imageTool.initEditBox(d))}this.setSelectBoxStyle(l)}else this.selectBoxMap.l=0,this.selectBoxMap.t=0,this.selectBoxMap.r=0,this.selectBoxMap.b=0,this.selectBoxMap.box.style.display="none"}},e.prototype.setSelectBoxStyle=function(e){this.selectBoxMap.box.style.cssText+=e},e.prototype.resetMouse=function(){var e=this.toolInstance,t=e.protoGraphic,r=e.whiteboardNode;this.toolInstance.toolRmEl(r,o.a.mouseEvents.move,this.mousemoveHandle);var n=this.toolInstance.getGraphicsHandle(t.graphic_id);Object(s.o)(null==n?void 0:n.parentElement),this.toolInstance.initDrawHandle(),this.isWillMove=!1,this.noMoveUp=!0},e.prototype.getCanMovedGraphicList=function(){var e=this,t=0,r=0,o=[],n=!this.moveSelectedGraphicIds,s=this.toolInstance.getUserAuth().move,c=this.toolInstance.graphicList.filter((function(i){if(i.selected){if(t++,!n&&e.moveSelectedGraphicIds.includes(i.graphic_id))return r++,!0;if(n&&(s||i.creator_id===e.userId))return r++,o.push(i.graphic_id),!0}return e.authFlag&&e.toolInstance.updateBoxBorder(i,!0),!1}));return n&&(this.moveSelectedGraphicIds=o.join(",")),t!==r&&(Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthMoveGraphic),this.authFlag=!1),c},e.prototype.updateGraphicsOnMoving=function(e){var t=this,r=e.clientX,o=e.clientY,n=this.getCanMovedGraphicList();if(n.length){this.toolInstance.updateMousePointsHandle(r,o);var i=this.toolInstance.calMoveHandle(),s=i[0],c=i[1],u=this.imageTool.editBoxMap,l=u.tdiff,d=u.parent,h=u.graphic,p=null==h?void 0:h.graphic_id,f=1==n.length&&(n[0].creator_id==this.userId||!!this.toolInstance.getUserAuth().update);n.forEach((function(e){t.toolInstance.updateGraphicsOffsetHandle(e,s,c);var r=e.graphic_id,o=e.type;if(o===a.f.Image){var n=(e.initX||0)+e.x|0,i=(e.initY||0)+e.y|0,u=e.data,h=e.oldData;h.x=u.x,h.y=u.y,h.ex=u.ex,h.ey=u.ey,u.ex=n+u.ex-u.x,u.ey=i+u.ey-u.y,u.x=n,u.y=i,t.toolInstance.moveGraphicsHandle(r,n,i),p===r&&(n-=l,i-=l,t.imageTool.editBoxMap.tx1=n,t.imageTool.editBoxMap.ty1=i,d.style.cssText+="transform:translate("+n+"px,"+i+"px)"),t.toolInstance.updateBoxHandle(e,f)}else o!==a.f.Laser&&(t.toolInstance.moveGraphicsHandle(r,e.x,e.y),t.toolInstance.updateBoxHandle(e))}));var _=this.selectBoxMap,g=_.l,m=_.t,v=this.toolInstance.mousePoints,y="left:"+(g+v.boxX)+"px;top:"+(m+v.boxY)+"px;";this.setSelectBoxStyle(y),this.mouseInfo.moveCount%10==0&&this.toolInstance.updateToRemoteNewHandle(n,a.a.Move)}},e.prototype.updateBoxBorderOnSelector=function(){var e=this,t=this.toolInstance.graphicList,r=this.toolInstance.getGraphicsHandle(this.toolInstance.protoGraphic.graphic_id);if(r){var o=r.getBoundingClientRect(),n=o.left,i=o.right,s=o.top,c=o.bottom;t.forEach((function(t){if(t.type!==a.f.Laser){var r=e.toolInstance.getGraphicsHandle(t.graphic_id);if(r){var o=r.getBoundingClientRect(),u=o.left,l=o.top,d=o.right,h=o.bottom;u===d&&d++,l===h&&h++,t.selected=Math.max(n,u)<Math.min(i,d)&&Math.max(s,l)<Math.min(c,h)&&e.toolInstance.getGraphicIsEndDraw(t.graphic_id)}}})),this.setSelectBox()}},e.prototype.getCoveredMaxZorderGraphic=function(e){var t=this,r=e instanceof MouseEvent?e:e.changedTouches[0],o=r.clientX,n=r.clientY,i=0,s=null,c=null;return this.toolInstance.graphicList.forEach((function(e){if(e.type!==a.f.Laser&&t.toolInstance.getGraphicIsEndDraw(e.graphic_id)){var r=t.toolInstance.getBoxHandle(e.graphic_id);if(r){var u=r.getBoundingClientRect(),l=u.left,d=u.top,h=u.right,p=u.bottom;if(o>=l&&o<=h&&n>=d&&n<=p){var f=e.zorder||1;(!i||f>i)&&(i=f,s=e,c=u)}}}})),s&&c?{graphic:s,rect:c}:null},e.prototype.bindEventsHandle=function(){if(!this.bindFlag){this.bindFlag=!0;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(e,o.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolAddEL(e,o.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolAddEL(e,o.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,o.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolRmEl(e,o.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolRmEl(e,o.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.hideImageEditBox=function(){this.imageTool.hideEditBox()},e.prototype.hideImageEditBoxByList=function(e){this.imageTool.hideEditBoxByList(e)},e.prototype.hideImageEditBoxByIds=function(e){this.imageTool.hideEditBoxByIds(e)},e.prototype.updateSelectorBoxHandle=function(e,t){if(this.hideImageEditBoxByIds(t),this.hideImageEditBoxByList(e),"none"!=this.selectBoxMap.box.style.display){var r=e.map((function(e){return e.graphic_id}));r.push.apply(r,t),this.toolInstance.graphicList.forEach((function(e){r.includes(e.graphic_id)&&(e.selected=!1)})),this.toolInstance.graphicList.some((function(e){return e.selected}))||this.setSelectBox(!0)}},e}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(){return(E=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},T=function(){function e(e,t){this.isRemote=!1,this.backgroundInfo={image:"",pos:"",mode:0},this.toolInstance=e,this.createContainer(t)}return e.prototype.createContainer=function(e){var t;this.graphicsBgConNode&&(this.graphicsBgConNode.innerHTML="");var r=this.toolInstance,n=r.whiteboardID,i=r.viewInfo,s=o.a.reservedPrefix,c=s.graphicsBgContainer,u=s.graphicsBgImageContainer,l=document.createElement("div");l.id=""+c+n;for(var d=0,h=i.pageCount||1;d<h;d++){var p=document.createElement("div");p.id=u+d+n,l.appendChild(p)}this.graphicsBgConNode=l,this.toolInstance.viewInfo.direction===a.p.Vertical&&(this.graphicsBgConNode.style.flexDirection="column"),null===(t=e.firstChild)||void 0===t||t.before(l)},e.prototype.drawBackgroundImage=function(e,t){var r=this,o="";switch(t){case a.n.ZegoWhiteboardViewImageFitModeLeft:o="left";break;case a.n.ZegoWhiteboardViewImageFitModeRight:o="right";break;case a.n.ZegoWhiteboardViewImageFitModeBottom:o="bottom";break;case a.n.ZegoWhiteboardViewImageFitModeTop:o="top";break;case a.n.ZegoWhiteboardViewImageFitModeCenter:o="center"}var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){for(var n=r.graphicsBgConNode.childNodes,i=0,s=n.length;i<s;i++){var a=n[i];a.style.backgroundImage="url("+e+")",a.style.backgroundPosition=o,a.style.backgroundRepeat="no-repeat",a.style.backgroundSize="contain"}r.backgroundInfo.image=e,r.backgroundInfo.pos=o,r.backgroundInfo.mode=t},n.src=e},e.prototype.clearBackgroundImageLocal=function(){var e=this,t=this.toolInstance.graphicList.filter((function(e){return e.type===a.f.BgImage}));this.backgroundInfo.image="",this.backgroundInfo.pos="",this.backgroundInfo.mode=0,t.map((function(t){e.toolInstance.deleteHandle(t.graphic_id)}));for(var r=this.graphicsBgConNode.childNodes,o=0,n=r.length;o<n;o++)r[o].style.backgroundImage="none"},e.prototype.backgroundImageUpdateToRemote=function(e,t){if(this.isRemote)this.isRemote=!1;else{var r=t?a.a.Update:a.a.Create;this.toolInstance.updateToRemoteNewHandle([e],r)}},e.prototype.updateToLocal=function(e){return this.isRemote=e,this},e.prototype.setBackgroundColor=function(e){this.graphicsBgConNode.style.backgroundColor=e},e.prototype.setBackgroundImage=function(e,t,r){var o=this;if(!e||t>4){var n=Object(i.b)(a.j.ZegoWhiteboardViewErrorParamInvalid);return Promise.reject(n)}if(!this.toolInstance.enableDraw)return Promise.reject({});if(!this.toolInstance.getUserAuth().create)return n=Object(i.b)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic),Promise.reject(n);var s=!!this.backgroundInfo.image,l=this.toolInstance.graphicList.find((function(e){return e.type==a.f.BgImage}));if(s&&l&&!this.toolInstance.getUserAuth().update&&l.creator_id!==this.toolInstance.getUserID())return n=Object(i.b)(a.j.ZegoWhiteboardViewErrorNoAuthUpdateGraphic),Promise.reject(n);if("string"==typeof e){var d=e;return d.startsWith("https://")?new Promise((function(r,n){var s=!0,l=new XMLHttpRequest;l.open("HEAD",d,!0),l.onreadystatechange=function(){if(4==l.readyState){if(200!=l.status){s=!1;var r=404===l.status?a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl:a.j.ZegoWhiteboardViewErrorInvalidRsp;return n(Object(i.b)(r))}var h=(l.getResponseHeader("Content-Type")||"").replace("image/",""),p=+l.getResponseHeader("Content-Length");if(!"jpg,jpeg,png".includes(h)){var f=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return n(f)}if(p>10485760)return f=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit),n(f);c.a.getInstance().info1(u.e.SetBackgroundImage,{params:{address:e}}),o.addBackgroundImageGraphic(d,t)}},l.onerror=function(){if(s){var e=404===l.status?a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl:a.j.ZegoWhiteboardViewErrorInvalidRsp;n(Object(i.b)(e))}},l.send(null)})):(n=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl),Promise.reject(n))}if(this.toolInstance.serviceHandle.isElectron&&"object"==S(e))return/(\.jpg|\.jpeg|\.png)$/.test(e.path)?(c.a.getInstance().info1(u.e.SetBackgroundImage,{params:{address:e.path}}),this.toolInstance.serviceHandle.uploadImage(e.path,r).then((function(e){return o.addBackgroundImageGraphic(e,t)}))):(n=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport),Promise.reject(n));var h=e.type.replace("image/","");return"jpg,jpeg,png".includes(h)?e.size>10485760?(n=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit),Promise.reject(n)):(c.a.getInstance().info1(u.e.SetBackgroundImage,{params:{address:e.name}}),this.toolInstance.serviceHandle.uploadImage(e,r).then((function(e){if(e.code){var r=Object(i.b)(e.code,e.msg);return Promise.reject(E(E({},r),{error:e}))}return o.addBackgroundImageGraphic(e,t)}))):(n=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport),Promise.reject(n))},e.prototype.remoteAddBackgroundImageGraphic=function(e){var t=this.toolInstance.graphicList,r=t.find((function(e){return e.type===a.f.BgImage}));r?(r=Object.assign(r,e),this.toolInstance.setDataToGraphicList(r.graphic_id,{data:r.data})):t.push(e);var o=e.data,n=o.url,i=o.fit_mode;this.drawBackgroundImage(n,i)},e.prototype.addBackgroundImageGraphic=function(e,t){var r=this.toolInstance.graphicList,n={x:0,y:0,ex:0,ey:0,url:e,fit_mode:t,hash:""},i=Object(s.d)(),c=r.find((function(e){return e.type===a.f.BgImage})),u=!!c;if(c){var l=c.data;c=E(E({},c),{data:n,oldData:l,operate_id:Object(s.d)()}),this.toolInstance.setDataToGraphicList(c.graphic_id,{data:n})}else{c=E(E({graphic_id:i,operate_id:i,creator_id:this.toolInstance.getUserID()},o.a.basicState),{type:a.f.BgImage,x:0,y:0,initX:0,initY:0,data:n,oldData:{},zorder:0,layer:1,is_end_draw:!0});var d=JSON.parse(JSON.stringify(c));r.push(d)}return this.drawBackgroundImage(e,t),this.backgroundImageUpdateToRemote(c,u),Promise.resolve(e)},e.prototype.clearBackgroundImage=function(){return function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var e;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(t){return this.isRemote?(this.clearBackgroundImageLocal(),this.isRemote=!1,[2]):this.toolInstance.enableDraw?(e=this.toolInstance.graphicList.find((function(e){return e.type==a.f.BgImage})),this.backgroundInfo.image&&e&&!this.toolInstance.getUserAuth().delete&&e.creator_id!==this.toolInstance.getUserID()?(Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthDeleteGraphic),[2]):(e&&(e.operate_id=Object(s.d)(),this.clearBackgroundImageLocal(),this.toolInstance.updateToRemoteNewHandle([e],a.a.Delete)),[2])):[2]}))}))},e}(),w=function(){return(w=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},C=function(){function e(e){var t,r=this;this.defaultCursorMap=((t={})[a.k.ZegoWhiteboardViewToolPen]={url:"https://storage.zego.im/goclass/wbCursor/defaultCursor.png",offsetX:0,offsetY:18},t),this.defaultCursorPen=this.defaultCursorMap[o.a.basicState.type],this.authFlag=!0,this.roomFlag=!0,this.mousemoveHandle=function(e){var t=o.a.customCursor;if(t.enable)if(r.cursorInied){if("DISCONNECTED"===r.toolInstance.serviceHandle.getRoomState())return r.toolInstance.whiteboardNode.style.cursor="initial",r.roomFlag&&(Object(i.a)(a.j.ZegoWhiteboardViewErrorNoLoginRoom),c.a.getInstance().warn1(u.e.Cursor_MousemoveHandle,"room state is DISCONNECTED")),void(r.roomFlag=!1);if(!r.toolInstance.getUserAuth().create)return r.authFlag&&Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic),void(r.authFlag=!1);var n=JSON.parse(t.attributes);if(t.enable&&n.url&&o.a.basicState.type===a.k.ZegoWhiteboardViewToolPen){!Object(s.k)()&&r.show(),r.toolInstance.updateOffsetAndScrollHandle();var l=r.getMouseChangedPoint(e),d=r.addCursorHandle(void 0,l);d.data=[l.clientX,l.clientY];var h=JSON.parse(d.attributes);h.cursor=w({type:o.a.customCursor.type},n),h.hidden=!1,d.attributes=JSON.stringify(h),d.is_end_draw=!1,r.drawGraphicsHandle(d,!0),r.sendTimer||(r.sendTimer=window.setTimeout((function(){r.toolInstance.updateToRemoteNewHandle([r.calCursorPlaceHandle(d)],a.a.Update,!0,{isUndoAndRedo:!0},void 0,(function(e){})),clearTimeout(r.sendTimer),r.sendTimer=null}),100)),r.hideTimer&&(clearTimeout(r.hideTimer),r.hideTimer=null),r.hideTimer=window.setTimeout((function(){r.hide()}),3e3)}else r.hide()}else r.cursorInied=!0},this.mouseleaveHandle=function(){o.a.customCursor.enable&&r.toolInstance.getUserAuth().create&&r.hide()},this.toolInstance=e,this.init(),this.bindEventsHandle()}return e.prototype.init=function(){var e=this;this.cursorInied=!1;var t=this.defaultCursorMap[o.a.basicState.type],r=o.a.customCursor,i=JSON.parse(r.attributes);i.url||(i.url=t.url,i.pox_x=t.offsetX,i.pox_y=t.offsetY,r.attributes=JSON.stringify(i)),n.f.on(n.d.RoomDisConnected,(function(){o.a.basicState.type=a.k.ZegoWhiteboardViewToolPen,o.a.customCursor={enable:!1,remoteVisible:!0,type:a.i.pen,attributes:'{"url": "", "pox_x": 0, "pox_y": 0 }'},e.toolInstance.whiteboardNode.style.cursor="initial",clearTimeout(e.sendTimer),e.sendTimer=null,clearTimeout(e.hideTimer),e.hideTimer=null})),n.f.on(n.d.RemoteDelMod,(function(){clearTimeout(e.sendTimer),e.sendTimer=null,clearTimeout(e.hideTimer),e.hideTimer=null}))},e.prototype.bindEventsHandle=function(){var e=o.a.mouseEvents;this.toolInstance.toolAddEL(this.toolInstance.whiteboardNode,e.move,this.mousemoveHandle),this.toolInstance.toolAddEL(this.toolInstance.whiteboardNode,e.leave,this.mouseleaveHandle)},e.prototype.removeEventsHandle=function(){var e=this.toolInstance.getUserID();this.toolInstance.graphicList.splice(this.toolInstance.graphicList.findIndex((function(t){return t.type===a.f.Cursor&&t.creator_id===e})),1)},e.prototype.transLocationHandle=function(e){var t=e.clientX,r=e.clientY,o=this.toolInstance,n=o.offsetData,i=o.scrollData,s=n.offsetLeft,a=n.offsetTop,c=i.scrollTop,u=i.scrollLeft,l=this.toolInstance.conNode,d=l.scrollLeft,h=l.scrollTop;return{clientX:Math.round(t-s+u-d),clientY:Math.round(r-a+c-h)}},e.prototype.getMouseChangedPoint=function(e){var t;if(e instanceof MouseEvent){var r=e,o=r.clientX,n=r.clientY;t=this.transLocationHandle({clientX:o,clientY:n})}else{var i=e.changedTouches[0];o=i.clientX,n=i.clientY,t=this.transLocationHandle({clientX:o,clientY:n})}return t},e.prototype.toggleOtherCursorHandle=function(e){var t=""+o.a.reservedPrefix.cursorCon+e.graphic_id,r=this.toolInstance.whiteboardNode.querySelector("#"+t);if(r){var n=o.a.customCursor.remoteVisible;return r.style.display=n?"block":"none",!n}return!1},e.prototype.addCursorHandle=function(e,t){var r=this,n=this.toolInstance.graphicList;if(!e){var i=this.findSelfCursorHandle();if(i)return i;e=w(w({graphic_id:Object(s.d)(),creator_id:this.toolInstance.getUserID(),operate_id:Object(s.d)()},o.a.basicState),{type:a.f.Cursor,x:0,y:0,px:0,py:0,data:[],layer:2,size:0,zorder:this.toolInstance.serviceHandle.createZorder(),is_end_draw:!1})}e.data=[(null==t?void 0:t.clientX)||0,(null==t?void 0:t.clientY)||0];var l=JSON.parse(e.attributes),d=JSON.parse(o.a.customCursor.attributes);return l.cursor=w({type:o.a.customCursor.type},d),e.attributes=JSON.stringify(l),n.push(e),this.drawGraphicsHandle(e,!0),this.toolInstance.updateToRemoteNewHandle([e],a.a.Create,!0,{isUndoAndRedo:!0},void 0,(function(e){r.removeEventsHandle(),c.a.getInstance().error1(u.e.Cursor_AddCursorHandle,"create cursor error")})),e},e.prototype.findSelfCursorHandle=function(e){var t=this.toolInstance.getUserID();return this.toolInstance.graphicList.find((function(r){return e?r.graphic_id===e:r.type===a.f.Cursor&&r.creator_id===t}))},e.prototype.drawGraphicsHandle=function(e,t){if(Object(s.k)()||!t){var r=this.toolInstance.getUserID(),n=e.graphic_id,i=e.creator_id;if(i!==r){var a=JSON.parse(e.attributes);if(a){var l=a.cursor;if(i!==r){if(this.toggleOtherCursorHandle(e))return void c.a.getInstance().info1(u.e.Cursor_drawGraphicsHandle_hidden,"\u5bf9\u7aef\u9690\u85cf\u7684\u5149\u6807")}else if(!this.toolInstance.getUserAuth().create)return c.a.getInstance().info1(u.e.Cursor_DrawGraphicsHandle_Create,"\u65e0\u521b\u5efa\u56fe\u5143\u6743\u9650"),void this.hide();var d=this.toolInstance.whiteboardNode,h=o.a.reservedPrefix.cursorCon,p=d.querySelector("#"+h+n);if(p){var f=p.childNodes[0];f&&f.src!==l.url&&(f.parentNode.removeChild(f),(f=new Image).setAttribute("crossOrigin","anonymous"),f.onload=function(){f.width=f.width,f.height=f.height,p.appendChild(f)},f.src=l.url)}else{if(this.cursorConOldId){var _=d.querySelector("#"+this.cursorConOldId);d&&(null==d||d.removeChild(_))}var g=""+h+n;this.cursorConOldId=g,(p=p=document.createElement("div")).id=g;var m=new Image;m.setAttribute("crossOrigin","anonymous"),m.onload=function(){m.width=m.width,m.height=m.height,p.appendChild(m)},m.src=l.url,d&&d.appendChild(p),r==i&&((S=o.a.customCursor).enable=!0,S.attributes=JSON.stringify(l))}var v=e.data,y=v[0],b=v[1];if(a.hidden&&(y=-1024,b=-1024),i===r&&(this.cursorConNode=p,!t)){var S=o.a.customCursor,E=JSON.parse(S.attributes);l&&(E.url=l.url,E.pox_x=l.pox_x,E.pox_y=l.pox_y,S.attributes=JSON.stringify(E))}p.style.cssText="transform:translate("+(y||0)+"px, "+(b||0)+"px) scale("+1/this.toolInstance.viewInfo.zoom+");transform-origin:0 0;left:"+-l.pox_x/this.toolInstance.viewInfo.zoom+"px;top: "+-l.pox_y/this.toolInstance.viewInfo.zoom+"px;"}else c.a.getInstance().info1(u.e.Cursor_DrawGraphicsHandle,"no attr")}}},e.prototype.show=function(){var e;if(this.findSelfCursorHandle()){this.toolInstance.whiteboardNode.style.cursor="initial";var t=o.a.customCursor,r=JSON.parse(t.attributes),n=r.pox_x?Number(r.pox_x)-1:0,i=r.pox_y?Number(r.pox_y)-1:0;(null===(e=this.defaultCursorPen)||void 0===e?void 0:e.url)&&(this.toolInstance.whiteboardNode.style.cursor="url("+this.defaultCursorPen.url+") "+this.defaultCursorPen.offsetX+" "+this.defaultCursorPen.offsetY+", auto"),this.toolInstance.whiteboardNode.style.cursor="url("+r.url+") "+n+" "+i+", auto"}},e.prototype.hide=function(){var e=this.findSelfCursorHandle();if(e){var t=o.a.basicState.type===a.k.ZegoWhiteboardViewToolPen;this.cursorConNode&&(this.cursorConNode.style.display="none");var r=o.a.customCursor.enable;this.toolInstance.whiteboardNode.style.cursor=r&&t?"none":"initial";var n=JSON.parse(e.attributes);n.hidden=!0,e.attributes=JSON.stringify(n),e.data=[-1024,-1024],this.toolInstance.updateToRemoteNewHandle([e],a.a.Update,!0,{isUndoAndRedo:!0},void 0,(function(e){}))}},e.prototype.deleteCursorElement=function(e){var t,r,n=this.toolInstance.whiteboardNode,i=o.a.reservedPrefix.cursorCon,s=n.querySelector("#"+i+e);s&&(s.id==(null===(t=this.cursorConNode)||void 0===t?void 0:t.id)&&(this.cursorConNode=null),null===(r=null==s?void 0:s.parentNode)||void 0===r||r.removeChild(s))},e.prototype.updateCursorAttr=function(e){void 0===e&&(e=!1);var t=o.a.customCursor,r=JSON.parse(t.attributes),n=this.findSelfCursorHandle();if(n){var i=JSON.parse(n.attributes);i.cursor=w({type:o.a.customCursor.type},r),i.hidden=!1,n.attributes=JSON.stringify(i),this.drawGraphicsHandle(n,!0),e&&this.toolInstance.updateToRemoteNewHandle([n],a.a.Update,!0,{isUndoAndRedo:!0})}},e.prototype.updateOtherCursor=function(){var e=this,t=o.a.reservedPrefix.cursorCon,r=this.toolInstance,n=r.whiteboardNode,i=r.graphicList,s=this.toolInstance.getUserID();i.filter((function(e){return 1024===e.type&&e.creator_id!==s})).forEach((function(r){var o=JSON.parse(r.attributes).cursor,i=r.data,s=i[0],a=i[1],c=n.querySelector("#"+t+r.graphic_id);c&&(c.style.cssText="transform:translate("+(s||0)+"px, "+(a||0)+"px) scale("+1/e.toolInstance.viewInfo.zoom+");transform-origin:0 0;left:"+-o.pox_x/e.toolInstance.viewInfo.zoom+"px;top: "+-o.pox_y/e.toolInstance.viewInfo.zoom+"px;")}))},e.prototype.pushActualPlaceHandle=function(){var e=this.findSelfCursorHandle();if(e){var t=e.data,r=t[0],o=t[1];if(r<0&&o<0)return;this.toolInstance.updateOffsetAndScrollHandle(),this.toolInstance.updateToRemoteNewHandle([this.calCursorPlaceHandle(e)],a.a.Update,!0,{isUndoAndRedo:!0})}},e.prototype.calCursorPlaceHandle=function(e){e=JSON.parse(JSON.stringify(e));var t=this.toolInstance.viewInfo,r=t.zoom,o=t.zoomTX,n=t.zoomTY,i=t.offsetPageX,s=t.offsetPageY,a=e.data,c=a[0],u=a[1],l=this.toolInstance.conNode,d=l.scrollLeft,h=l.scrollTop,p=Math.round((c+d-o)/r+i),f=Math.round((u+h-n)/r+s);return e.data=[p,f],e},e}(),I=function(){return(I=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},O=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,n++)o[n]=i[s];return o},k=function(){function e(e){this.mousePoints={sx:-1,sy:-1,ex:-1,ey:-1,boxX:0,boxY:0},this.graphicList=[],this.enableDraw=!0,this.graphicTaskList=[],this.undoList=[],this.clearUndoData=null,this.redoList=[],this.doTaskSeq=0,this.canDo=!0,this.isReloading=!1,this.graphicExtraMap={},this.customCursor=null,this.instancesMap={};var t=e.whiteboardID,r=e.zoomNode,o=e.conNode,n=e.serviceHandle,i=e.graphicsConNode,s=e.graphicsBoxConNode,a=e.viewInfo,c=e.whiteboardNode;this.whiteboardID=t,this.conNode=o,this.zoomNode=r,this.userNode=r.parentNode,this.graphicsConNode=i,this.whiteboardNode=c,this.graphicsBoxConNode=s,this.serviceHandle=n,this.viewInfo=a,this.updateOffsetAndScrollHandle(),this.initDrawHandle()}return e.prototype.getTranslateXY=function(e){if(!e)return{x:0,y:0};var t=e.match(/translate\((-?\d*.?\d*)px(\,\s*(-?\d*.?\d*)px)?\)/);return{x:+t[1]||0,y:+t[3]||0}},e.prototype.clearRealTimeInterval=function(e){clearInterval(this.graphicExtraMap[e].realTimeId),delete this.graphicExtraMap[e]},e.prototype.realTimeHandle=function(e,t){var r,n,i=this,s=t.graphic_id,l=t.is_end_draw,d=t.operate_id,h=this.graphicList.find((function(e){return e.graphic_id==s&&e.operate_id==d}));if(h){var p=o.a.realTimeState,f=p.remoteDrawDelay,_=p.remoteDrawCount,g=p.remoteDrawEndDelay;l?l&&(null===(n=this.graphicExtraMap[s])||void 0===n?void 0:n.realTimeId)&&(this.clearRealTimeInterval(s),c.a.getInstance().info1(u.e.Gra_remote_draw_realtime_end,s)):this.graphicExtraMap[s]&&this.graphicExtraMap[s].realTimeId?(r=h.data).push.apply(r,t.data):(this.graphicExtraMap[s]=this.graphicExtraMap[s]||{},this.graphicExtraMap[s].realTimeIndex=0,this.graphicExtraMap[s].realTimeId=setInterval((function(t){var r,o=i.graphicList.find((function(e){return e.graphic_id===t}));if(o&&i.graphicExtraMap[t]){var n=o.data,s=i.graphicExtraMap[t].realTimeIndex>=n.length;s?s&&Date.now()-i.graphicExtraMap[t].realTimeLast>g&&(o.is_end_draw=!0,i.clearRealTimeInterval(t),c.a.getInstance().info1(u.e.Gra_remote_draw_realtime_timeout,t)):(i.graphicExtraMap[t].realTimeLast=Date.now(),(o=JSON.parse(JSON.stringify(o))).data=n.slice(0,i.graphicExtraMap[t].realTimeIndex+=_),e.drawGraphicsHandle(o,a.e.Remote))}else!o&&(null===(r=i.graphicExtraMap[t])||void 0===r?void 0:r.realTimeId)&&(i.clearRealTimeInterval(t),c.a.getInstance().info1(u.e.Gra_remote_draw_realtime_deleted,t))}),f,s))}},e.prototype.createHandle=function(e,t,r){var o=e.graphic_id;this.graphicList.some((function(e){return e.graphic_id===o}))||(this.graphicList.push(e),e.type===a.f.Text?t.drawGraphicsHandle(e,!1):r.drawGraphicsHandle(e,a.e.UnReDo))},e.prototype.moveHandle=function(e,t){var r=e.graphic_id,o=e.x,n=e.y,i=e.type;if(i===a.f.Image)this.assingImageGraphicData(e,a.a.Move),t.updateGraphicsImage(e);else{this.setDataToGraphicList(r,{x:o,y:n});var s=i===a.f.Laser?""+1/this.viewInfo.zoom:void 0;this.moveGraphicsHandle(r,o,n,s)}},e.prototype.updateHandle=function(e,t,r){switch(e.type){case a.f.Text:t.backUpdateGraphicsHandle(e);break;case a.f.Image:this.assingImageGraphicData(e,a.a.Update),r.updateGraphicsImage(e);break;case a.f.BgImage:this.background.remoteAddBackgroundImageGraphic(e)}},e.prototype.assingImageGraphicData=function(e,t){var r=e.graphic_id;this.graphicList.some((function(o){if(o.graphic_id===r){if(Object.assign(o.data,e.data),Object.assign(o.oldData,e.oldData),t===a.a.Move)o.x=e.x,o.y=e.y,o.px=e.px,o.py=e.py;else if(t===a.a.Update){var n=o.data,i=n.x,s=n.y;o.initX=i-o.x,o.initY=s-o.y}return!0}return!1}))},e.prototype.reverseGraphicByMove=function(e){if(e.x=[e.px||0,e.px=e.x][0],e.y=[e.py||0,e.py=e.y][0],e.type===a.f.Image){var t=e.data,r=t.ex-t.x,o=t.ey-t.y;t.x=e.x+(e.initX||0),t.y=e.y+(e.initY||0),t.ex=t.x+r,t.ey=t.y+o}},e.prototype.resetImageGraphicOrigin=function(e){var t=e.data,r=t.x,o=t.y;e.initX=r-e.x,e.initY=o-e.y},e.prototype.createUndoData=function(e){var t=this;if(!(e=e.filter((function(e){return e.type!==a.f.Cursor}))).length)return[];var r=JSON.parse(JSON.stringify(e)),o=r[0],n=o.action,i=o.type,c=o.oldData,u=o.data;if(n===a.a.Create||n===a.a.Append||n===a.a.Update)switch(i){case a.f.Text:var l=Object(s.r)(c).text,d=Object(s.r)(u).text;if(!l&&!d)return[];l?(o.action=d?a.a.Update:a.a.Create,o.data=c,o.oldData=u):o.action=a.a.Delete;break;case a.f.Pencil:case a.f.Line:case a.f.Rect:case a.f.Ellipse:o.action=a.a.Delete;break;case a.f.Image:n===a.a.Create?o.action=a.a.Delete:(o.data=c,o.oldData=u,this.resetImageGraphicOrigin(o));case a.f.BgImage:n===a.a.Create?o.action=a.a.Delete:(o.data=c,o.oldData=u)}else n===a.a.Delete?r.forEach((function(e){e.action=a.a.Create,e.type===a.f.Image&&t.resetImageGraphicOrigin(e)})):n===a.a.Move&&r.forEach((function(e){return t.reverseGraphicByMove(e)}));return r.forEach((function(e){e.operate_id=Object(s.d)(),e.is_end_draw=!0})),r},e.prototype.reverseData=function(e){var t=this;e.length&&e.forEach((function(e){var r=e.action,o=e.data,n=e.oldData;switch(r){case a.a.Create:e.action=a.a.Delete;break;case a.a.Delete:e.action=a.a.Create;break;case a.a.Move:t.reverseGraphicByMove(e);break;case a.a.Update:e.data=n,e.oldData=o}e.operate_id=Object(s.d)(),e.is_end_draw=!0}))},e.prototype.createBackground=function(e,t){this.background||(this.background=new T(this,e)),t&&this.background.createContainer(e)},e.prototype.setCustomCursor=function(e){void 0===e&&(e=!1),this.customCursor?this.customCursor.updateCursorAttr():this.customCursor=new C(this)},e.prototype.triggerAnimateHandle=function(e,t){t===a.e.Remote?e.classList.add("transition"):e.classList.remove("transition")},e.prototype.transLocationHandle=function(e,t){var r=e.clientX,o=e.clientY,n=this.offsetData,i=n.offsetLeft,s=n.offsetTop,a=this.scrollData,c=a.scrollLeft,u=a.scrollTop,l=this.viewInfo,d=l.zoom,h=l.zoomTX,p=l.zoomTY,f={clientX:(r-i+c-h)/d+l.offsetPageX,clientY:(o-s+u-p)/d+l.offsetPageY};return t||(f.clientX=Math.round(f.clientX),f.clientY=Math.round(f.clientY)),f},e.prototype.transLocationOrigin=function(e){var t=e.clientX,r=e.clientY,o=this.viewInfo,n=o.offsetPageX,i=o.offsetPageY,s=o.zoom,a=this.whiteboardNode.parentNode,c=a.scrollLeft,u=a.scrollTop;return{clientX:Math.round(t+c/s+n),clientY:Math.round(r+u/s+i)}},e.prototype.bindEventsHandle=function(e){this.initDrawHandle();var t=this.instancesMap[e];t&&t.bindEventsHandle(),c.a.getInstance().info1(u.e.Tool_bindEventsHandle,{type:e})},e.prototype.bindCursorEventsHandle=function(){var e;null===(e=this.customCursor)||void 0===e||e.bindEventsHandle()},e.prototype.removeEventsHandle=function(e){var t=this.instancesMap[e];t&&t.removeEventsHandle()},e.prototype.moveGraphicsHandle=function(e,t,r,o){var n=this.getGraphicsHandle(e);if(n)if("g"===n.tagName){var i=Object(s.g)(n)[0];o=(o=i.getAttribute("transform")||"")&&o.includes("scale(")?o.replace(/.*(scale\(\d+(.\d+)?,(\s*)?\d+(.\d+)?\)).*/," $1"):"",i.setAttribute("transform","translate("+(t||0)+", "+(r||0)+")"+o)}else{var a="translate("+(t||0)+"px, "+(r||0)+"px)",c=n.style.transform.match(/scale\((\d*.?\d*)\)/),u=c?c[1]:"";!o&&u?a=a+" scale("+u+")":o&&(a=a+" scale("+o+")"),n.style.transform=a}},e.prototype.getGraphicsHandle=function(e,t){void 0===t&&(t=this.userNode);var r=t.querySelector("#"+o.a.reservedPrefix.graphics+e);return r&&(r=r.parentNode),r},e.prototype.batchGetGraphicsHandle=function(e,t){return void 0===e&&(e=this.userNode),e.querySelectorAll("[id^="+t+"]")},e.prototype.getBoxSelHandle=function(e){return"#"+o.a.reservedPrefix.graphicsBox+e},e.prototype.updateOffsetAndScrollHandle=function(){this.offsetData=Object(s.h)(this.conNode),this.scrollData=Object(s.i)(this.conNode)},e.prototype.updateGraphicsOffsetHandle=function(e,t,r){var o=e.x,n=e.y;e.x=o+t,e.y=n+r},e.prototype.calMoveHandle=function(){var e=this.mousePoints,t=e.sx,r=e.sy,o=e.ex,n=e.ey;return-1!==t&&-1!==r?(this.mousePoints.boxX+=o-t,this.mousePoints.boxY+=n-r,[o-t,n-r]):[0,0]},e.prototype.updateMousePointsHandle=function(e,t){null==e||null==t?this.mousePoints={sx:-1,sy:-1,ex:-1,ey:-1,boxX:0,boxY:0}:(-1!==this.mousePoints.ex&&-1!==this.mousePoints.ey&&(this.mousePoints.sx=this.mousePoints.ex,this.mousePoints.sy=this.mousePoints.ey),this.mousePoints.ex=e,this.mousePoints.ey=t)},e.prototype.updateToRemoteNewHandle=function(e,t,r,o,n,i){if(void 0===r&&(r=!0),e.length)if(this.pushClear)this.pushClear=!1;else{var c=Object(s.u)(e,t);if((!o||!o.isUndoAndRedo)&&(this.redoList.length=0),r){var u=this.graphicTaskList.length,l={taskStatus:u?a.h.Pending:a.h.InProgress,graphicList:c};!u&&this.graphicTaskList.push(l),this.syncUpdateToRemoteQueue(l,i)}else this.unSyncUpdateToRemoteQueue(c,o,n,i)}},e.prototype.unSyncUpdateToRemoteQueue=function(e,t,r,o){var i=this;this.serviceHandle.updateToRemoteHandle(this.whiteboardID,e,(function(){if(!t||!t.isUndoAndRedo){var o=i.createUndoData(e);i.undoList.push(o)}r&&r()}),(function(e){n.f.emit(n.c.Error,e),o&&o(e)}))},e.prototype.syncUpdateToRemoteQueue=function(e,t){var r=this;e.taskStatus===a.h.Pending?-1===this.graphicTaskList.findIndex((function(e){return e.taskStatus===a.h.Pending}))?this.graphicTaskList.push(e):this.mergegGraphicTaskList(e):this.serviceHandle.updateToRemoteHandle(this.whiteboardID,e.graphicList,(function(){r.graphicTaskCallbackHandle(a.g.success)}),(function(e){r.graphicTaskCallbackHandle(a.g.error,t,e)}))},e.prototype.filterUndoAndRedo=function(e){var t=this;return e.filter((function(e){var r=e.action,o=e.graphic_id,n=t.graphicList.some((function(e){return e.graphic_id===o}));return!n&&r===a.a.Create||n&&(r===a.a.Delete||r===a.a.Move||r===a.a.Update||r===a.a.Append)}))},e.prototype.undoClearPage=function(){this.clearUndoData&&this.updatePushLocalHandle(this.clearUndoData,[])},e.prototype.undoNewHandle=function(){var e=this;if((!this.graphicTaskList[0]||this.graphicTaskList[0].taskStatus!==a.h.InProgress)&&this.canDo){var t=this.undoList.length;if(t){var r=this.filterUndoAndRedo(this.undoList[t-1]);r.length?(this.canDo=!1,this.updateToRemoteNewHandle(r,void 0,!1,{isUndoAndRedo:!0},(function(){e.undoList.pop();var t=JSON.parse(JSON.stringify(r));e.updateLocalHandle(t),e.reverseData(t),e.redoList.push(t),e.canDo=!0}),(function(t){e.canDo=!0}))):this.undoList.pop()}}},e.prototype.redoNewHandle=function(){var e=this;if((!this.graphicTaskList[0]||this.graphicTaskList[0].taskStatus!==a.h.InProgress)&&this.canDo){var t=this.redoList.length;if(t){var r=this.filterUndoAndRedo(this.redoList[t-1]);r.length?(this.canDo=!1,this.updateToRemoteNewHandle(r,void 0,!1,{isUndoAndRedo:!0},(function(){e.redoList.pop();var t=JSON.parse(JSON.stringify(r));e.updateLocalHandle(t),e.reverseData(t),e.undoList.push(t),e.canDo=!0}),(function(t){e.canDo=!0}))):this.redoList.pop()}}},e.prototype.findLastTaskIndex=function(e,t){var r=this.graphicTaskList.slice(1);r.reverse();var o=r.findIndex((function(r){return r.graphicList[0][e]===t}));return-1!==o?r.length-o:-1},e.prototype.mergeMoveActionTaskList=function(e){var t=e.graphicList[0].operate_id,r=this.findLastTaskIndex("operate_id",t);-1===r?this.graphicTaskList.push(e):this.graphicTaskList.splice(r+1,1,e)},e.prototype.mergeOtherActionTaskList=function(e){switch(e.graphicList[0].type){case a.f.Text:this.mergeTextTaskList(e);break;case a.f.Pencil:this.mergePathTaskList(e);break;case a.f.Ellipse:case a.f.Rect:case a.f.Line:case a.f.Image:case a.f.BgImage:this.mergeOtherTaskList(e)}},e.prototype.mergeLaserTaskList=function(e){var t=e.graphicList[0],r=t.action,o=t.graphic_id;if(r===a.a.Move){var n=this.findLastTaskIndex("graphic_id",o);-1===n?this.graphicTaskList.push(e):this.graphicTaskList.splice(n,1,e)}else this.graphicTaskList.push(e)},e.prototype.mergeTextTaskList=function(e){var t=e.graphicList[0].operate_id;this.findLastTaskIndex("operate_id",t),this.graphicTaskList.push(e)},e.prototype.mergePathTaskList=function(e){var t=e.graphicList[0],r=t.operate_id,o=t.action,n=this.findLastTaskIndex("operate_id",r);if(-1===n)this.graphicTaskList.push(e);else{var i=this.graphicTaskList[n];i.graphicList[0].action===a.a.Create||o===a.a.Update?this.graphicTaskList.push(e):i.graphicList.forEach((function(t,r){t.data=t.data.concat(e.graphicList[r].data)}))}},e.prototype.mergeOtherTaskList=function(e){var t=e.graphicList[0].operate_id,r=this.findLastTaskIndex("operate_id",t);-1===r||this.graphicTaskList[r].graphicList[0].action===a.a.Create?this.graphicTaskList.push(e):this.graphicTaskList.splice(r,1,e)},e.prototype.mergegGraphicTaskList=function(e){var t=e.graphicList[0],r=t.action;t.type===a.f.Laser?this.mergeLaserTaskList(e):r===a.a.Move?this.mergeMoveActionTaskList(e):this.mergeOtherActionTaskList(e)},e.prototype.graphicTaskCallbackHandle=function(e,t,r){var o=this.graphicTaskList[0];if(o)if(o.taskStatus===a.h.InProgress){var i=o.graphicList[0],s=i.is_end_draw,c=i.type;if(i.action,i.graphic_id,s)if(e===a.g.success){if(c!==a.f.Laser&&c!==a.f.BgImage){var u=this.createUndoData(o.graphicList);this.undoList.push(u)}}else c!==a.f.Laser&&(u=this.createUndoData(o.graphicList),this.updateLocalHandle(u)),t?t&&t(r):n.f.emit(n.c.Error,r);else e===a.g.error&&(t?t&&t(r):n.f.emit(n.c.Error,r));this.graphicTaskList.shift();var l=this.graphicTaskList[0];l&&(l.taskStatus=a.h.InProgress)&&this.syncUpdateToRemoteQueue(l)}else o.taskStatus=a.h.InProgress,this.syncUpdateToRemoteQueue(o)},e.prototype.updateLocalHandle=function(e){var t=this;c.a.getInstance().info1(u.e.Gra_draw_local,e),this.updateOffsetAndScrollHandle();var r=this.getInstanceHandle(a.k.ZegoWhiteboardViewToolText),o=this.getInstanceHandle(a.k.ZegoWhiteboardViewToolLine),n=this.getInstanceHandle(a.k.ZegoWhiteboardViewToolSelector);n.hideImageEditBox(),n.hideSelectBox(),e.forEach((function(e){switch(e.action){case a.a.Delete:t.deleteHandle(e.graphic_id,e.type);break;case a.a.Create:e.type==a.f.BgImage||(t.createHandle(e,r,o),t.updateBoxHandle(e));break;case a.a.Move:t.moveHandle(e,o),t.updateBoxHandle(e);break;case a.a.Update:e.type==a.f.BgImage?t.updateHandle(e,r,o):(t.updateHandle(e,r,o),t.updateBoxHandle(e))}}))},e.prototype.updatePushLocalHandle=function(e,t){var r=this;c.a.getInstance().info1(u.e.Gra_Remote_draw,{graphicList:e,delGraphicList:t,actionMsg:"transValue"}),this.updateOffsetAndScrollHandle(),e.sort((function(e,t){return(e.zorder||0)-(t.zorder||0)})),t.forEach((function(e){return r.deleteHandle(e)}));var n=this.instancesMap[a.k.ZegoWhiteboardViewToolLaser],i=this.instancesMap[a.k.ZegoWhiteboardViewToolText],s=this.instancesMap[a.k.ZegoWhiteboardViewToolLine],l=this.instancesMap[a.k.ZegoWhiteboardViewToolSelector];l&&l.updateSelectorBoxHandle(e,t),e.forEach((function(e){var t,l=e.graphic_id,d=e.type,h=r.graphicList.some((function(t){return l===t.graphic_id&&(e.type!==a.f.RealTime&&(Object.assign(t,e),d===a.f.Image&&Object.assign(t.data,e.data)),!0)}));h||(d===a.f.Image&&(e.oldData=I({},e.data)),r.graphicList.push(e));var p="#"+o.a.reservedPrefix.graphicsBox+l;switch(h=h&&!!r.whiteboardNode.querySelector(p),d){case a.f.Cursor:null===(t=r.customCursor)||void 0===t||t.drawGraphicsHandle(e,!1);break;case a.f.Laser:n.drawGraphicsHandle(e,!1);break;case a.f.Text:h?i.updateGraphicsHandle(e):i.drawGraphicsHandle(e,!1),r.updateBoxHandle(e);break;default:d===a.f.RealTime?r.realTimeHandle(s,e):(h?(d===a.f.Pencil&&e.is_end_draw&&r.graphicExtraMap[l]&&(r.clearRealTimeInterval(l),c.a.getInstance().info1(u.e.Gra_Remote_draw_realtime_end,l)),s.updateGraphicsHandle(e)):s.drawGraphicsHandle(e,a.e.Remote),r.updateBoxHandle(e))}}))},e.prototype.deleteHandle=function(e,t){var r,o,n=this.graphicList.find((function(t){return t.graphic_id==e}));if((null==n?void 0:n.type)==a.f.Cursor&&(null===(r=this.customCursor)||void 0===r||r.deleteCursorElement(e)),t==a.f.BgImage)this.background.updateToLocal(!0).clearBackgroundImage();else{Object(s.o)(this.getBoxHandle(e));var i=this.getGraphicsHandle(e);Object(s.o)("g"===(null==i?void 0:i.tagName)?i.parentNode:i);var c=this.graphicList.findIndex((function(t){return t.graphic_id===e}));if(-1!==c){var u=null===(o=this.graphicExtraMap[e])||void 0===o?void 0:o.realTimeId;u&&clearInterval(u),this.graphicList.splice(c,1)}}},e.prototype.updateBoxHandle=function(e,t){if(e.type===a.f.Laser)return null;var r=this.getBoxInfoByGraphic(e);if(!r)return null;var n=r.x,i=r.y,s=r.width,c=r.height,u=e.type,l=e.graphic_id,d=e.selected,h=e.zorder,p=this.getBoxHandle(l);if(!p){(p=document.createElement("div")).setAttribute("id",""+o.a.reservedPrefix.graphicsBox+l),u===a.f.Text&&(p.style.pointerEvents="initial");var f=null;if(h)for(var _=this.graphicsBoxConNode.querySelectorAll("[data-z]"),g=0;g<_.length;g++)if(+(_[g].getAttribute("data-z")||"")>h){f=_[g];break}this.graphicsBoxConNode.insertBefore(p,f),h&&this.updateGraphicsDomIndex(h)}var m="width:"+s+"px;height:"+c+"px;border:"+(d&&!0!==t?o.a.selectedBorderCss:o.a.unSelectedBorderCss)+";";return"blur"!==t&&(m+="left:"+n+"px;top:"+i+"px;"),p.style.cssText+=m,h&&p.setAttribute("data-z",h+""),p},e.prototype.updateBoxBorder=function(e,t){if(e.type!==a.f.Laser){var r=this.getBoxHandle(e.graphic_id);r&&(r.style.border=e.selected&&!t?o.a.selectedBorderCss:o.a.unSelectedBorderCss)}},e.prototype.updateGraphicsDomIndex=function(e){var t=this,r=Array.from(this.graphicsBoxConNode.querySelectorAll('[data-z="'+e+'"]')).map((function(e){return e.id.replace(/\D/g,"")}));if(r.length>1){var o=Array.from(this.graphicsConNode.querySelectorAll('[data-z="'+e+'"]')),n=o.map((function(e){return e.id.replace(/\D/g,"")}));if(r.join()!==n.join()){var i=o[o.length-1].nextSibling;r.forEach((function(e){t.graphicsConNode.insertBefore(o[n.findIndex((function(t){return t===e}))],i)}))}}},e.prototype.getInstanceHandle=function(e){var t=this.instancesMap[e];if(!t){switch(e){case a.k.ZegoWhiteboardViewToolLaser:t=new d(this);break;case a.k.ZegoWhiteboardViewToolLine:t=new p(this);break;case a.k.ZegoWhiteboardViewToolText:t=new g(this);break;case a.k.ZegoWhiteboardViewToolEraser:t=new m(this);break;case a.k.ZegoWhiteboardViewToolSelector:t=new b(this)}this.instancesMap[e]=t}return t},e.prototype.getUserID=function(){return this.serviceHandle.getUserID()},e.prototype.getUserAuth=function(){return this.serviceHandle.getUserAuth()},e.prototype.getRoomState=function(){return this.serviceHandle.getRoomState()},e.prototype.getBoxHandle=function(e){var t=this.getBoxSelHandle(e);return this.userNode.querySelector(t)},e.prototype.setGraphicsDomZorder=function(e){var t=e.graphic_id,r=e.type,n=e.zorder,i=o.a.reservedPrefix,s=i.textareaCon,c=i.graphicsSvg,u=i.graphicsBox,l=r===a.f.Text?"#"+s+t:"#"+c+t,d=this.whiteboardNode.querySelector(l);d&&n&&d.setAttribute("data-z",n+""),l="#"+u+t,(d=this.whiteboardNode.querySelector(l))&&n&&d.setAttribute("data-z",n+"")},e.prototype.appendGraphicsDomHandle=function(e,t){if(a.f.Laser===t)this.graphicsConNode.appendChild(e);else{var r=+(e.getAttribute("data-z")||"");if(r)for(var n=this.graphicsConNode.querySelectorAll("[data-z]"),i=0;i<n.length;i++)if(+(n[i].getAttribute("data-z")||"")>r)return void this.graphicsConNode.insertBefore(e,n[i]);var s=this.graphicsConNode.querySelector("[id^="+o.a.reservedPrefix.laserCon+"]");this.graphicsConNode.insertBefore(e,s)}},e.prototype.getImageDomHandle=function(e){var t=o.a.reservedPrefix,r=t.graphics,n=t.graphicsBox;return[this.userNode.querySelector("#"+r+e),this.userNode.querySelector("#"+n+e)]},e.prototype.appendImageDomHandle=function(e,t){var r=o.a.reservedPrefix,n=r.graphicsSvg,i=r.graphics,s=r.laserCon,a=r.graphicsBox,c=document.createElementNS("http://www.w3.org/2000/svg","g"),u=document.createElementNS("http://www.w3.org/2000/svg","image");u.id=""+i+e,c.appendChild(u);var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.id=""+n+e,l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("version","1.1"),l.appendChild(c);var d=document.createElement("div");if(d.id=""+a+e,t){l.setAttribute("data-z",t+""),d.setAttribute("data-z",t+"");for(var h=this.graphicsConNode.querySelectorAll("[data-z]"),p=0;p<h.length;p++)if(+(h[p].getAttribute("data-z")||"")>t){this.graphicsConNode.insertBefore(l,h[p]);var f=this.graphicsBoxConNode.querySelectorAll("[data-z]")[p];return void this.graphicsBoxConNode.insertBefore(d,f)}}var _=this.graphicsConNode.querySelector("[id ^= "+s+"]");this.graphicsConNode.insertBefore(l,_),this.graphicsBoxConNode.appendChild(d)},e.prototype.resetImageBox=function(){var e=this;this.graphicList.forEach((function(t){if(t.type===a.f.Image){var r=e.getBoxHandle(t.graphic_id),o=t.y+(t.initY||0);r&&Math.abs(Number(r.style.top.replace("px",""))-o)>3&&e.updateBoxHandle(t)}}))},e.prototype.checkMultipointHandle=function(e){return e.touches.length>1},e.prototype.downCommonHandle=function(e){if(window.TouchEvent&&e instanceof TouchEvent){if(this.checkMultipointHandle(e))return!1;"touchstart"!==e.type&&e.preventDefault()}else if(e instanceof MouseEvent&&(e.button||"mouseup"!==e.type&&!e.buttons))return!1;return this.updateOffsetAndScrollHandle(),!0},e.prototype.updateProtoGraphic=function(e){if(e)Object.assign(this.protoGraphic,e);else{var t=o.a.basicState.type;this.protoGraphic=I(I({zorder:0,graphic_id:"",data:[],oldData:"",selected:!1,x:0,y:0,px:0,py:0},o.a.basicState),{type:t,operate_id:"",is_end_draw:!0})}},e.prototype.updateGraphicsDataHandle=function(e){var t=null;switch(this.protoGraphic.type){case a.f.Pencil:(t=this.protoGraphic.data)[t.length-2]===e.clientX&&t[t.length-1]===e.clientY||(t.push(e.clientX),t.push(e.clientY));break;case a.f.Image:(t=this.protoGraphic.data).ex=e.clientX,t.ey=e.clientY;break;default:(t=this.protoGraphic.data).splice(2,2,e.clientX,e.clientY)}},e.prototype.initDrawHandle=function(){this.updateProtoGraphic(),this.updateMousePointsHandle()},e.prototype.getBoxInfoByGraphic=function(e){var t=e.type,r=e.graphic_id,n=this.getGraphicsHandle(r);if(!n)return null;var i=Object(s.j)(e),c=t===a.f.Text||t===a.f.Image?0:e.size||o.a.basicState.size,u=this.viewInfo,l=u.zoom,d=u.offsetPageY,h=u.isScroll,p=o.a.boxBorderWidth,f=n.getBoundingClientRect(),_=f.left,g=f.top,m=f.width,v=f.height;!h&&g>d&&this.isReloading&&(g-=d);var y=this.transLocationHandle({clientX:_,clientY:g},i),b=y.clientX,S=y.clientY;return{x:_=Math.floor(b-p-c/2),y:g=Math.floor(S-p-c/2),width:m=Math.ceil(m/l+c+p),height:v=Math.ceil(v/l+c+p)}},e.prototype.getMouseStartPoint=function(e,t){var r;if(e instanceof MouseEvent){var o=e,n=o.clientX,i=o.clientY;r=this.transLocationHandle({clientX:n,clientY:i},t)}else{var s=e.touches[0];n=s.clientX,i=s.clientY,r=this.transLocationHandle({clientX:n,clientY:i},t)}return r},e.prototype.getMouseChangedPoint=function(e,t){var r;if(e instanceof MouseEvent){var o=e,n=o.clientX,i=o.clientY;r=this.transLocationHandle({clientX:n,clientY:i},t)}else{var s=e.changedTouches[0];n=s.clientX,i=s.clientY,r=this.transLocationHandle({clientX:n,clientY:i},t)}return r},e.prototype.getWhiteboardNodeRect=function(){var e=this.offsetData,t=e.offsetLeft,r=e.offsetTop,o=this.viewInfo,n=o.zoom,i=o.viewWidth,s=o.viewHeight;return n>1?{left:t,top:r,right:t+i,bottom:r+s}:this.whiteboardNode.getBoundingClientRect()},e.prototype.isTouchLeaveWhenMove=function(e,t){if(o.a.isTouch&&window.TouchEvent&&e instanceof TouchEvent){var r=e.changedTouches[0],n=r.clientX,i=r.clientY,s=t.left,a=t.right,c=t.top,u=t.bottom;return n<=s||n>=a||i<=c||i>=u}return!1},e.prototype.setDataToGraphicList=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var o=0,n=this.graphicList.length;o<n;o++){var i=this.graphicList[o];if(e===i.graphic_id){Object.assign.apply(Object,O([i],t));break}}},e.prototype.getDataFromGraphicList=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var o={},n=function(r,n){var s=i.graphicList[r];if(e===s.graphic_id)return t.forEach((function(e){o[e]=s[e]})),"break"},i=this,s=0,a=this.graphicList.length;s<a;s++){var c=n(s,a);if("break"===c)break}return o},e.prototype.filterExistingHandle=function(e){var t=this;return e.filter((function(e){var r=e.graphic_id;return e.action===a.a.Create||t.graphicList.some((function(e){return e.graphic_id===r}))}))},e.prototype.clearLocalHandle=function(){var e;this.graphicTaskList.length=0;var t=o.a.basicState.type;if(t!==a.k.ZegoWhiteboardViewToolClick&&!t){var r=this.getInstanceHandle(t===a.k.ZegoWhiteboardViewToolPen||t===a.k.ZegoWhiteboardViewToolRect||t===a.k.ZegoWhiteboardViewToolEllipse||t===a.k.ZegoWhitebaordViewToolCustomImage?a.k.ZegoWhiteboardViewToolLine:t);r.removeEventsHandle(),r.bindEventsHandle()}this.clearUndoData=JSON.parse(JSON.stringify(this.graphicList)),this.undoList.length=0,this.redoList.length=0,this.pushClear=!0;var n=this.getInstanceHandle(a.k.ZegoWhiteboardViewToolLaser),i=n.findLaserHandle(),s=this.graphicList.find((function(e){return e.type===a.f.BgImage})),c=this.graphicList.filter((function(e){return e.type===a.f.Cursor}));this.graphicList.length=0,s&&this.graphicList.push(s),(e=this.graphicList).push.apply(e,c),this.graphicsConNode.innerHTML="",i&&n.addLaserHandle(i)},e.prototype.reverseZoomHandle=function(e){var t=this;if(e===a.k.ZegoWhiteboardViewToolLaser){var r=this.viewInfo.zoom;this.batchGetGraphicsHandle(this.graphicsConNode,o.a.reservedPrefix.laserCon).forEach((function(e){var o=e.style.transform,n=t.getTranslateXY(o),i=n.x,s=n.y;e.style.transform="translate("+i+"px, "+s+"px) scale("+1/r+")"}))}},e.prototype.getGraphicIsEndDraw=function(e){return this.serviceHandle.getGraphicIsEndDraw(e)},e.prototype.clearPage=function(e){this.enableDraw&&(this.updateGraphicPage(),this.graphicList.forEach((function(t){var r;t.selected=null===(r=t.page)||void 0===r?void 0:r.includes(e)})),this.deleteSelectedGraphics(a.c.ClearPage))},e.prototype.deleteSelectedGraphics=function(e){var t=this;if(this.enableDraw){var r=this.getUserID(),o=this.getUserAuth().delete,n=0,l=0,d=this.graphicList.filter((function(e){var i=!!e.selected&&e.type!==a.f.BgImage&&t.getGraphicIsEndDraw(e.graphic_id),s=o||r===e.creator_id;return i&&n++,i&&s&&l++,i&&s}));if(n!==l&&Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthDeleteGraphic),d.length){var h=this.getInstanceHandle(a.k.ZegoWhiteboardViewToolSelector);h.hideImageEditBox(),h.hideSelectBox(),d.forEach((function(e){e.is_end_draw=!0,e.operate_id=Object(s.d)(),t.deleteHandle(e.graphic_id)})),c.a.getInstance().info1(u.e.Gra_DeleteSelectedGraphics,{action:e,page:this.viewInfo.page,params:d.map((function(e){return e.graphic_id+","+e.page}))}),this.updateToRemoteNewHandle(d,a.a.Delete)}}},e.prototype.updateGraphicPage=function(){var e=this,t=this.graphicList.filter((function(t){return e.graphicsBoxConNode.querySelector(e.getBoxSelHandle(t.graphic_id))}));this.viewInfo.vpageAspecCache?t.forEach((function(t){var r=e.graphicsBoxConNode.querySelector(e.getBoxSelHandle(t.graphic_id))||{offsetTop:0,offsetHeight:0},o=r.offsetTop,n=r.offsetHeight,i=e.getPageByAspec(o,o+n);t.page=i||[e.viewInfo.page||1]})):!this.serviceHandle.getFileInfo(this.whiteboardID)&&this.conNode?t.forEach((function(t){var r=e.graphicsBoxConNode.querySelector(e.getBoxSelHandle(t.graphic_id)),o=[];if(1===e.viewInfo.direction){var n=r||{offsetLeft:0,offsetWidth:0},i=n.offsetLeft,s=n.offsetWidth;o=e.getPageByViewInfo(i,i+s,e.viewInfo.viewWidth)}else{var a=r||{offsetTop:0,offsetHeight:0},c=a.offsetTop,u=a.offsetHeight;o=e.getPageByViewInfo(c,c+u,e.viewInfo.viewHeight)}t.page=o||[e.viewInfo.page||1]})):this.graphicList.forEach((function(t){t.page=[e.viewInfo.page||1]}))},e.prototype.getPageByAspec=function(e,t){var r=this.viewInfo.vpageAspecCache;if(!r.hasOwnProperty("2"))return[1];for(var o=r.vs,n=r[o].h;n<=e&&r[o+1];)n+=r[o+1].h,o++;for(var i=o;n<=t&&r[i+1];)n+=r[i+1].h,i++;if(i===o)return[r[o].p];if(i-o>1){var s=new Array(i-o-1).fill(null);return s=s.map((function(e,t){return r[o+t+1].p})),O([r[o].p],s,[r[i].p])}return[r[o].p,r[i].p]},e.prototype.getPageByViewInfo=function(e,t,r){var o=Math.floor(e/r)+1,n=Math.floor(t/r)+1;if(n===o)return[o];if(n-o>1){var i=new Array(n-o-1).fill(null).map((function(e,t){return o+t+1}));return O([o],i,[n])}return[o,n]},e.prototype.toolAddEL=function(e,t,r){e.addEventListener(t,r);var n=o.a.mouseEvents[t];n&&e.addEventListener(n,r)},e.prototype.toolRmEl=function(e,t,r){e.removeEventListener(t,r);var n=o.a.mouseEvents[t];n&&e.removeEventListener(n,r)},e.prototype.updateOffsetPage=function(){var e=this.viewInfo,t=e.page,r=e.viewWidth,o=e.viewHeight,n=e.direction;e.isScroll||(n===a.p.Horizontal?this.viewInfo.offsetPageX=(t-1)*r:this.viewInfo.offsetPageY=(t-1)*o)},e}(),R=r(33),A=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,n++)o[n]=i[s];return o},P=function(){function e(e,t){this.snapshotResult={image:""},this.canvasRatio=window.devicePixelRatio||1,this.toolInstance=e,this.backgroundInstance=t,this.file=this.toolInstance.serviceHandle.getFileInfo(this.toolInstance.whiteboardID),this.snapshotId=String(Date.now())}return e.prototype.snapshot=function(e){var t=this;return new Promise((function(r,o){return function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}(t,void 0,void 0,(function(){var t=this;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(o){return e&&(this.snapshotResult.userData=e),this.createCtx(),this.setWbBgColor(),this.setWbBgImage().then((function(){var e;if(t.file){var o={action:R.b.Snapshot,ctx:t.docsCtx,snapshotId:t.snapshotId};t.toolInstance.conNode.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:o}))}t.wbSnapshot();var n=null===(e=t.file)||void 0===e?void 0:e.fileType;n===a.d.PPTH5||n===a.d.CUSTOM_H5?t.snapshotResolve=r:(t.snapshotResult.image=t.mergeCanvas(),r(t.snapshotResult))})),[2]}))}))}))},e.prototype.getH5Snapshot=function(e){var t=this,r=this.toolInstance.viewInfo,o=r.viewWidth,n=r.viewHeight,i=new Image;i.src=e,i.onload=function(){t.docsCtx.drawImage(i,0,0,o,n),t.snapshotResult.image=t.mergeCanvas(),t.snapshotResolve(t.snapshotResult)}},e.prototype.mergeCanvas=function(){var e=this.toolInstance.viewInfo,t=e.viewWidth,r=e.viewHeight,o=document.createElement("canvas");o.width=t*this.canvasRatio,o.height=r*this.canvasRatio;var n=o.getContext("2d");return n.scale(this.canvasRatio,this.canvasRatio),n.drawImage(this.docsCanvas,0,0,t,r),n.drawImage(this.wbCanvas,0,0,t,r),o.toDataURL("image/png",1)},e.prototype.createCtx=function(){var e=this.toolInstance.viewInfo,t=e.viewWidth,r=e.viewHeight;this.wbCanvas=document.createElement("canvas"),this.wbCanvas.width=t*this.canvasRatio,this.wbCanvas.height=r*this.canvasRatio,this.wbCtx=this.wbCanvas.getContext("2d"),this.wbCtx.scale(this.canvasRatio,this.canvasRatio),this.docsCanvas=document.createElement("canvas"),this.docsCanvas.width=t*this.canvasRatio,this.docsCanvas.height=r*this.canvasRatio,this.docsCtx=this.docsCanvas.getContext("2d"),this.docsCtx.scale(this.canvasRatio,this.canvasRatio)},e.containImg=function(e,t,r,o,n,i,s){var a=e,c=t,u=r,l=o;return n>i?(l=i/n*u,n/i<=r/o&&(u=n/i*o)):n<=i&&(u=n/i*l),"top"==s?(c=0,a=e+(r-u)/2):"bottom"==s?(c=t+(o-l),a=e+(r-u)/2):"left"==s?(a=0,c=t+(o-l)/2):"right"==s?(a=e+(r-u),c=t+(o-l)/2):"center"==s&&(a=e+(r-u)/2,c=t+(o-l)/2),{dx:a,dy:c,dWidth:u,dHeight:l}},e.prototype.setWbBgColor=function(){var e=this.file?o.a.basicExtraState.defaultFileBgColor:o.a.basicState.bgColor;this.setBgColor(this.wbCtx,e)},e.prototype.setWbBgImage=function(){var t=this;return new Promise((function(r){var o=t.backgroundInstance.backgroundInfo,n=o.image,i=o.pos,s=t.toolInstance.viewInfo,a=s.viewWidth,c=s.height;if(n){var u=new Image;u.setAttribute("crossOrigin","Anonymous"),u.onload=function(){var o=e.containImg(0,0,a,c,u.width,u.height,i);t.wbCtx.drawImage(u,o.dx,o.dy,o.dWidth,o.dHeight),r()},u.src=n}else r()}))},e.prototype.setBgColor=function(e,t){var r=this.toolInstance.viewInfo,o=r.viewWidth,n=r.viewHeight;e.fillStyle=t,e.fillRect(0,0,o,n)},e.prototype.wbSnapshot=function(){var e=this.sortGraphics();if(e)for(var t=0,r=e;t<r.length;t++){var o=r[t],n=this.getCorrectData(o);switch(o.type){case a.f.Pencil:case a.f.Line:this.renderPencil(o,this.wbCtx,n);break;case a.f.Rect:this.renderRect(o,this.wbCtx,n);break;case a.f.Ellipse:this.renderEllipse(o,this.wbCtx,n);break;case a.f.Text:this.renderText(o,this.wbCtx,n);break;case a.f.Image:this.renderImage(o,this.wbCtx,n)}}},e.prototype.renderPencil=function(e,t,r){var o=Object(s.s)(r);this.setCtxStyle(e,t),t.beginPath(),t.moveTo(o.moveTo[0],o.moveTo[1]),o.path.forEach((function(e){t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])})),t.stroke()},e.prototype.renderRect=function(e,t,r){var o=r[0],n=r[1],i=r[2]-o,s=r[3]-n;this.setCtxStyle(e,t),t.beginPath(),t.strokeRect(o,n,i,s)},e.prototype.renderEllipse=function(e,t,r){var o=r[0],n=r[1],i=(r[2]-o)/2,s=(r[3]-n)/2,a=o+i,c=n+s,u=i>s?Math.abs(i):Math.abs(s);this.setCtxStyle(e,t),t.beginPath(),t.save(),t.translate(a,c),t.scale(i/u,s/u),t.arc(0,0,u,0,2*Math.PI),t.restore(),t.stroke()},e.prototype.renderText=function(e,t,r){this.setCtxStyle(e,t);var n=r.split(","),i=n[0],s=n[1],a=n[2],c=this.toolInstance.getGraphicsHandle(e.graphic_id),u=this.getComputedFs(c.querySelector("pre")||c,"fontSize"),l=this.getComputedLh(c.querySelector("pre")||c,"lineHeight",u),d=(l-1)/2,h=a.split("\n"),p=o.a.textareaHPadding,f=o.a.textareaConBorderWidth;h.forEach((function(e,r){var o=+i+p+f,n=+s+u*l*r+u*d*1+f;t.fillText(""+e,o,n)}))},e.prototype.getComputedStyle=function(e,t,r){var o=window.getComputedStyle(e)[t];return r?r(o):o},e.prototype.getComputedLh=function(e,t,r){return this.getComputedStyle(e,t,(function(e){var t=1.2;return e.includes("px")&&(t=+e.replace(/px/,"")/r),t}))},e.prototype.getComputedFs=function(e,t){return this.getComputedStyle(e,t,(function(e){var t=12;return e.includes("px")&&(t=+e.replace(/px/,"")),t}))},e.prototype.renderImage=function(e,t,r){var n=r[0],i=r[1],s=r[2]-n,a=r[3]-i,c=this.toolInstance.graphicsConNode.querySelector("#"+o.a.reservedPrefix.graphics+e.graphic_id);"image"===(null==c?void 0:c.nodeName)&&t.drawImage(c,n,i,s,a)},e.prototype.setCtxStyle=function(e,t){var r=this.toolInstance.viewInfo.viewWidth,o=Object(s.c)(e.size,a.f.Pencil,r,!1);if(t.strokeStyle=e.color,t.fillStyle=e.color,e.type!==a.f.Text)t.lineWidth=o,t.lineJoin="round",t.lineCap="round";else{var n=this.toolInstance.getGraphicsHandle(e.graphic_id),i=this.getComputedFs(n.querySelector("pre")||n,"fontSize")+"px",c="string"==typeof e.attributes?JSON.parse(e.attributes):{},u=c.bold?"bold":"",l=c.italic?"italic":"",d=window.getComputedStyle(n.querySelector("pre")||n).fontFamily.replace(/"/g,"");t.textBaseline="hanging",t.font=l+" "+u+" "+i+" "+d+" "}},e.prototype.sortGraphics=function(){var e=this;return JSON.parse(JSON.stringify(this.toolInstance.graphicList)).filter((function(t){return e.toolInstance.getGraphicsHandle(t.graphic_id)})).sort((function(e,t){return(e.zorder||0)-(t.zorder||0)}))},e.prototype.getCorrectData=function(e){var t=e.type,r=e.data;switch(t){case a.f.Image:var o=e.data;r=this.correctData([o.x,o.y,o.ex,o.ey]);break;case a.f.Pencil:case a.f.Line:case a.f.Rect:case a.f.Ellipse:var n=this.correctData(e.data);r=this.getTransData(e,n);break;case a.f.Text:var i=e.data.split(","),s=i[2],c=this.correctData([+i[0],+i[1]]),u=this.getTransData(e,A(c));r=A(u,[s]).join(",")}return r},e.prototype.correctData=function(e){var t,r=this.toolInstance.viewInfo,o=r.direction,n=r.page,i=r.viewWidth,s=r.viewHeight,c=r.isScroll,u=r.zoom;if(o===a.p.Center)return e;if(o===a.p.Horizontal&&n)t=e.map((function(e,t){return t%2==0&&(e-=(n-1)*i),e}));else if(o===a.p.Vertical&&n){var l=this.toolInstance.whiteboardNode.parentNode.scrollTop;t=e.map((function(e,t){return t%2==1&&(e-=c?l/u:(n-1)*s),e}))}return t},e.prototype.getTransData=function(e,t){var r=e.x,o=e.y;return t.map((function(e,t){return e+(t%2==0?r:o)}))},e}(),L=r(54);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=function(){return(D=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},M=function(){function e(e,t){var r=this;this.operationModes=Object.freeze({none:!1,scroll:!0,draw:!0,scale:!0}),this.canDraw=!0,this.activited=!1,this.viewInfo={},this.scaleInfo={x:-1,y:-1,syncTimer:0},this.snapshotInstances={},this.handleDragStart=function(e){if(r.operationModes.scale&&r.toolInstance.getUserAuth().scale&&(r.viewInfo.zoomX=r.viewInfo.zoomY=0,r.viewInfo.zoom>1&&!r.canDraw&&r.parentDom)){var t=e instanceof MouseEvent?e:e.changedTouches[0],o=t.clientX,n=t.clientY;r.viewInfo.zoomX=o,r.viewInfo.zoomY=n,c.a.getInstance().info1(u.e.HandleDragStart,{clientX:o,clientY:n})}},this.handleDragEnd=function(e){r.handleDragMove(e,!0)},this.handleDragMove=function(e,t){if(r.operationModes.scale&&r.toolInstance.getUserAuth().scale&&r.viewInfo.zoom>1&&r.viewInfo.zoomX&&!r.canDraw){if(e instanceof MouseEvent&&!t&&e.buttons<1)return;"touchmove"===e.type&&e.preventDefault(),r.dragPage(e,!!t)}},this.preventDefaultDragEvent=function(e){e.preventDefault()},this.docsviewEventCallback=function(e){var t=e.detail,n=t.action;if(n!==R.b.H5Snapshot&&n!==R.b.DocsAspect&&c.a.getInstance().info1(u.e.Zegoeventdocs,{data:t}),n===R.b.Page)r.handleDocsPageEvent(t);else if(n===R.b.Animation)r.serviceHandle.appendH5Extra(r.whiteboardID,t.data);else if(n===R.b.DocsAspect)r.viewInfo.vpageAspecCache=t.data;else if(n===R.b.H5Snapshot)r.getH5SnapshotResult(t);else if(n===R.b.ReloadView)r.reinitView();else if(n===R.b.WbError){if(!r.serviceHandle.isPlayback&&(1e3==t.data||1001==t.data))return;Object(i.a)(t.data)}else if(n===R.b.Step)o.a.basicState.type===a.k.ZegoWhiteboardViewToolSelector&&r.hideSelectBox();else if(n===R.b.SyncDrag){var s=t,l=s.x,d=s.y,h=s.notify;r.viewInfo.isScroll||(r.viewInfo.zoomTX=l,r.viewInfo.zoomTY=d),h&&r.emitScaleFactor(l,d)}},this.whiteboardID=e,this.serviceHandle=t,this.bindEventUpdate()}return e.prototype.bindEventUpdate=function(){var e=this;n.f.on(n.d.SuperDocsLogoutRoom,(function(){e.clearEvent()}))},e.prototype.setWhiteboardTransform=function(e,t,r){r||(this.viewInfo.zoomTX=e,this.viewInfo.zoomTY=t);var o=this.viewInfo,n=o.viewWidth,i=o.viewHeight,s=o.zoom,c=o.direction,u=this.viewInfo.page||1;c===a.p.Horizontal?e-=(u-1)*n*s:t-=(u-1)*i*s,this.whiteboardNode.style.cssText+="transform:translate("+e+"px,"+t+"px) scale("+s+");"},e.prototype.dragPage=function(e,t){var r=this.viewInfo,o=r.zoom,n=r.zoomTX,i=r.zoomTY,s=r.zoomX,a=r.zoomY,l=r.viewWidth,d=r.viewHeight,h=e instanceof MouseEvent?e:e.changedTouches[0],p=n+h.clientX-s,f=i+h.clientY-a,_=l*(1-o);p>0?p=0:p<_&&(p=_),_=d*(1-o),f>0?f=0:f<_&&(f=_),t&&(this.viewInfo.zoomX=0,this.viewInfo.zoomY=0,this.emitScaleFactor(p,f)),this.setWhiteboardTransform(p,f,!t),c.a.getInstance().info1(u.e.DragPage,{x:p,y:f,end:!t})},e.prototype.initDragEvents=function(){this.viewInfo.hasOwnProperty("offsetPageX")||(this.viewInfo.offsetPageX=0,this.viewInfo.offsetPageY=0,this.viewInfo.zoom=1,this.viewInfo.zoomX=0,this.viewInfo.zoomY=0,this.viewInfo.zoomTX=0,this.viewInfo.zoomTY=0),this.parentDom&&!this.getFileInfo()&&(this.parentDom.addEventListener("mousedown",this.handleDragStart),this.parentDom.addEventListener("mousemove",this.handleDragMove),this.parentDom.addEventListener("mouseup",this.handleDragEnd),this.parentDom.addEventListener("mouseleave",this.handleDragEnd),this.parentDom.addEventListener("touchstart",this.handleDragStart),this.parentDom.addEventListener("touchmove",this.handleDragMove),this.parentDom.addEventListener("touchend",this.handleDragEnd),this.parentDom.addEventListener("touchcancel",this.handleDragEnd))},e.prototype.updateBindEvents=function(){this.toolInstance.removeEventsHandle(a.k.ZegoWhiteboardViewToolLaser),this.toolInstance.removeEventsHandle(a.k.ZegoWhiteboardViewToolLine),this.toolInstance.removeEventsHandle(a.k.ZegoWhiteboardViewToolText),this.toolInstance.removeEventsHandle(a.k.ZegoWhiteboardViewToolSelector),this.toolInstance.removeEventsHandle(a.k.ZegoWhiteboardViewToolEraser),this.toolInstance.bindCursorEventsHandle();var e=o.a.basicState.type;switch(e){case a.k.ZegoWhiteboardViewToolPen:case a.k.ZegoWhiteboardViewToolLine:case a.k.ZegoWhiteboardViewToolEllipse:case a.k.ZegoWhiteboardViewToolRect:case a.k.ZegoWhitebaordViewToolCustomImage:this.toolInstance.bindEventsHandle(a.k.ZegoWhiteboardViewToolLine);break;case a.k.ZegoWhiteboardViewToolLaser:case a.k.ZegoWhiteboardViewToolText:this.toolInstance.bindEventsHandle(e);break;case a.k.ZegoWhiteboardViewToolSelector:case a.k.ZegoWhiteboardViewToolEraser:this.toolInstance.getInstanceHandle(e),this.toolInstance.bindEventsHandle(e)}},e.prototype.initToolHandle=function(){this.toolInstance?(this.toolInstance.zoomNode=this.zoomNode,this.toolInstance.conNode=this.parentDom,this.toolInstance.graphicsConNode=this.graphicsConNode,this.toolInstance.whiteboardNode=this.whiteboardNode,this.toolInstance.graphicsBoxConNode=this.graphicsBoxConNode,this.penetrateEventHandle(o.a.basicState.type),this.getUniqueID()?this.setToolType(o.a.basicState.type):this.updateBindEvents()):(this.toolInstance=new k({whiteboardID:this.whiteboardID,zoomNode:this.zoomNode,conNode:this.parentDom,graphicsConNode:this.graphicsConNode,whiteboardNode:this.whiteboardNode,graphicsBoxConNode:this.graphicsBoxConNode,serviceHandle:this.serviceHandle,viewInfo:this.viewInfo}),this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLaser),this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLine),this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolText),this.setToolType(o.a.basicState.type))},e.prototype.updateStateSizeHandle=function(){var e=this.viewInfo.viewWidth,t=o.a.basicState,r=t.size,n=t.fontSize;o.a.basicExtraState.drawSize=Object(s.c)(r,a.f.Line,e,!1),o.a.basicExtraState.drawFontSize=Object(s.c)(n,a.f.Text,e,!1)},e.prototype.getDocsViewAspect=function(e,t,r,o){var n=e.firstChild;if(n){var i=t.fileType,s="0"==e.getAttribute("data-mode"),c=Number(e.getAttribute("data-page")),u=n.clientWidth,l=n.clientHeight;if(u&&l||(u=+n.style.width.replace("px",""),l=+n.style.height.replace("px","")),i===a.d.PPTH5||i===a.d.CUSTOM_H5){var d=e.previousElementSibling;d&&(d.style.zIndex="0")}var h=document.getElementById(this.viewInfo.root),p=h.clientWidth,f=h.clientHeight,_=s&&l>o;this.updateViewInfo({isScroll:s,isOriginScroll:_,direction:a.p.Vertical,pageCount:c,width:u,height:l,viewWidth:r,viewHeight:o,page:this.viewInfo.page||1,zoom:this.viewInfo.zoom||1,parentWidth:p,parentHeight:f})}return{x:0,y:0,width:this.viewInfo.viewWidth,height:this.viewInfo.viewHeight}},e.prototype.getWhiteboardAspect=function(e,t,r){var o=this.getAspectRatio().split(":").map((function(e){return+e})),n=o[0],i=o[1];if(r){var s=this.viewInfo.pageCount,c=this.getWhiteboardLayout(e,t,n/s,i),u={parentWidth:e,parentHeight:t,width:c.width*s,height:c.height,viewWidth:c.width,viewHeight:c.height};return this.updateViewInfo(u),c}var l=this.serviceHandle.getPageCount(this.whiteboardID),d={zoom:1,page:1,pageCount:l,direction:l>1?a.p.Horizontal:a.p.Center,parentWidth:e,parentHeight:t},h=this.getWhiteboardLayout(e,t,n/l,i);return d.width=h.width*l,d.height=h.height,d.viewWidth=h.width,d.viewHeight=h.height,this.updateViewInfo(d),h},e.prototype.getWhiteboardLayout=function(e,t,r,o){var n=e,i=o*n/r;return(i>t||Math.abs(i-t)<=1)&&(n=t*e/i|0,i=t),{x:(e-n)/2,y:(t-(i|=0))/2,width:n,height:i}},e.prototype.checkParentSize=function(e,t){if(e<=0||t<=0){var r=Object(i.b)(a.j.ZegoWhiteboardViewErrorViewParentNotExist);throw n.f.emit(n.c.Error,r),new Error("\u65e0\u6cd5\u83b7\u53d6\u5bb9\u5668\u5bbd\u9ad8")}},e.prototype.createModule=function(e){var t=this;e&&this.toolInstance&&this.stopLocalDrawHandle(this.serviceHandle.getScrollPercent(this.whiteboardID).verticalPercent);var r=this.getFileInfo(),n=document.getElementById(this.viewInfo.parent);r?this.viewInfo.root=n.parentNode.parentNode.id:(this.viewInfo.root=this.viewInfo.parent,n.style.cssText+="position:relative;display:inherit!important;");var i=n.clientWidth,c=n.clientHeight;i&&c||(i=+n.style.width.replace("px",""),c=+n.style.height.replace("px","")),this.checkParentSize(i,c);var u=e&&!r?{x:this.viewInfo.zoomTX/this.viewInfo.viewWidth,y:this.viewInfo.zoomTY/this.viewInfo.viewHeight}:{x:0,y:0},l=r?this.getDocsViewAspect(n,r,i,c):this.getWhiteboardAspect(i,c,e),d=l.x,h=l.y,p=o.a.reservedPrefix,f=p.whiteboardZoom,_=p.whiteboardCon,g=p.whiteboard,m=p.boxContainer,v=p.graphicsContainer,y=document.createDocumentFragment();[v,m].forEach((function(e){var r=document.createElement("div");r.id=""+e+t.whiteboardID,y.appendChild(r)}));var b=Object(s.g)(y);this.graphicsConNode=b[0],this.graphicsBoxConNode=b[1],this.createGraphicsBox();var S=this.viewInfo,E=S.width,T=S.height,w=S.viewWidth,C=S.viewHeight;if(this.whiteboardNode=document.createElement("div"),this.whiteboardNode.id=""+g+this.whiteboardID,this.whiteboardNode.style.cssText+="width:"+E+"px;height:"+T+"px;",this.whiteboardNode.appendChild(y),r)this.parentDom=n,this.zoomNode=n.parentNode,n.innerHTML="",n.appendChild(this.whiteboardNode),this.handleDocsviewEvent(n);else{var I="left:"+d+"px;top:"+h+"px;width:"+w+"px;height:"+C+"px;overflow:hidden;";if(this.parentDom=n.querySelector("#"+_+this.whiteboardID),e&&this.parentDom)this.parentDom.innerHTML="",this.parentDom.style.cssText+=I,this.parentDom.appendChild(this.whiteboardNode),this.setWhiteboardTransform(u.x*w|0,u.y*C|0);else{var O=document.createElement("div");O.id=""+f+this.whiteboardID,this.zoomNode=O;var k=document.createElement("div");k.id=""+_+this.whiteboardID,k.style.cssText=I,k.appendChild(this.whiteboardNode),O.appendChild(k),n.appendChild(O),this.parentDom=k}}o.a.basicState.type!==a.k.ZegoWhiteboardViewToolText&&(this.parentDom.style.userSelect="none"),this.parentDom.addEventListener("dragenter",this.preventDefaultDragEvent),this.serviceHandle.setViewSize(this.whiteboardID,w,C),this.serviceHandle.setSize(this.whiteboardID,E,T)},e.prototype.activitView=function(){var e;if(this.zoomNode){var t=(null===(e=this.getFileInfo())||void 0===e?void 0:e.fileID)||"",r=document.getElementById(this.viewInfo.root);if(r){var n=this.zoomNode.id;Array.from(Object(s.g)(r)).forEach((function(e){e.style.display=e.id===n?"block":"none"}))}var i=t?o.a.basicExtraState.defaultFileBgColor:o.a.basicState.bgColor;this.toolInstance.background.setBackgroundColor(i),this.setDragStyle(this.getToolType()||0)}},e.prototype.updateViewInfo=function(e){Object.assign(this.viewInfo,e)},e.prototype.isChangeStepInnerPage=function(e){var t,r=null===(t=this.getFileInfo())||void 0===t?void 0:t.fileType;if(r===a.d.PPTH5||r===a.d.CUSTOM_H5){var o=this.viewInfo,n=o.page,i=o.pageCount;return n===Math.min(Math.round(e*i)+1,i)}return!1},e.prototype.stopLocalDrawHandle=function(e){var t;try{var r=o.a.basicState.type,n=a.k.ZegoWhiteboardViewToolLaser,i=a.k.ZegoWhiteboardViewToolSelector,s=a.k.ZegoWhiteboardViewToolText,c=this.isChangeStepInnerPage(e);switch(r){case n:var u=this.toolInstance.getInstanceHandle(n);!c&&u&&u.pushActualPlaceHandle();break;case i:var l=this.toolInstance.getInstanceHandle(i);if(!c&&l){var d=document.activeElement;d&&d.id&&this.whiteboardNode.querySelector("#"+d.id)&&"TEXTAREA"===d.tagName?d.blur():(this.toolInstance.updateOffsetAndScrollHandle(),l.mouseupHandle(),l.hideImageEditBox(),l.hideSelectBox())}break;case s:var h=document.activeElement;!c&&h&&h.id&&this.whiteboardNode.querySelector("#"+h.id)&&"TEXTAREA"===h.tagName&&h.blur();break;case a.k.ZegoWhiteboardViewToolPen:var p=this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLine);!c&&p&&(this.toolInstance.updateOffsetAndScrollHandle(),p.mouseupHandle(),null===(t=this.toolInstance.customCursor)||void 0===t||t.pushActualPlaceHandle());break;case a.k.ZegoWhiteboardViewToolRect:case a.k.ZegoWhiteboardViewToolLine:case a.k.ZegoWhiteboardViewToolEllipse:case a.k.ZegoWhitebaordViewToolCustomImage:var f=this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLine);!c&&f&&(this.toolInstance.updateOffsetAndScrollHandle(),f.mouseupHandle())}this.toolInstance.resetImageBox()}catch(e){}},e.prototype.setClassNameHandle=function(e){var t,r=o.a.reservedPrefix,n=r.whiteboard,i=r.whiteboardCon,s=r.whiteboardZoom;null===(t=this.zoomNode.parentNode)||void 0===t||t.querySelectorAll("[id^="+n+"]").forEach((function(t){-1===t.id.indexOf(""+i)&&-1===t.id.indexOf(""+s)&&(t.className=a.k[e]||"")}))},e.prototype.penetrateEventHandle=function(e){var t,r=null===(t=this.getFileInfo())||void 0===t?void 0:t.fileType;if((r===a.d.PPTH5||r===a.d.CUSTOM_H5)&&this.parentDom){var o=this.operationModes.none||e!==a.k.ZegoWhiteboardViewToolClick?"initial":"none";this.parentDom.style.pointerEvents=o,this.graphicsBoxConNode.style.pointerEvents=o}},e.prototype.jumpPage=function(e,t){var r,o=this.viewInfo,n=o.viewWidth,i=o.viewHeight,s=o.pageCount,c=o.direction;s>=1&&(c===a.p.Horizontal?(r=Math.min(Math.round(e*s)+1,s))<=s&&(this.updateViewInfo({offsetPageX:(r-1)*n,page:r}),this.setWhiteboardTransform(this.viewInfo.zoomTX,this.viewInfo.zoomTY)):(r=Math.min(Math.round(t*s)+1,s))<=s&&(this.updateViewInfo({offsetPageY:(r-1)*i,page:r}),this.setWhiteboardTransform(this.viewInfo.zoomTX,this.viewInfo.zoomTY))),this.notifyScrollEvent(this.viewInfo.page,1,e,t)},e.prototype.handleDocsviewEvent=function(e){var t={action:R.b.WbInit,data:this.whiteboardID};e.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:t})),e.addEventListener(R.a.Docs,this.docsviewEventCallback)},e.prototype.handleDocsPageEvent=function(e){var t,r=e.page,n=e.pageCount,i=e.step,s=e.percent,a=e.notify,c=e.ofsX,u=this.viewInfo,l=u.isScroll,d=u.viewHeight,h=u.zoom;this.viewInfo.page=r,this.viewInfo.pageCount=n,l||(this.viewInfo.offsetPageY=(r-1)*d),a&&l&&"number"==typeof c&&(t={scaleFactor:h,scaleOffsetX:c,scaleOffsetY:+o.a.scaleModes.sync},this.scaleInfo.y=0),this.emitScroll(0,s,i,a,t),this.notifyScrollEvent(r,i,0,s)},e.prototype.getH5SnapshotResult=function(e){var t=e.dataUrl,r=e.snapshotId;this.snapshotInstances[r].getH5Snapshot(t)},e.prototype.hideSelectBox=function(){var e=this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolSelector);e.hideImageEditBox(),e.hideSelectBox()},e.prototype.setDragStyle=function(e){if(this.parentDom){var t=this.toolInstance.getUserAuth(),r=t.scale,o=t.scroll,n=this.operationModes.scale&&!!r&&!e;this.parentDom.style.cursor=n?"move":"auto",this.parentDom.style.touchAction=n?"auto":"none";var i={action:R.b.WbDragTool,enable:this.operationModes.scroll&&!!o,remoteScroll:!!o,isDrag:n};this.parentDom.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:i}))}},e.prototype.addImageGraphic=function(e,t,r){var o=this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLine),n=this.toolInstance.transLocationOrigin({clientX:t,clientY:r});return o.drawLocalGraphicImage(e,n.clientX,n.clientY)},e.prototype.initBackground=function(e){this.toolInstance.createBackground(this.whiteboardNode,e)},e.prototype.canReloadView=function(){var e=document.getElementById(this.viewInfo.parent);e.style.cssText+="position:relative;display:block!important;";var t=e.clientWidth,r=e.clientHeight;this.checkParentSize(t,r);var o=this.viewInfo,n=o.viewWidth,i=o.viewHeight,s=this.getWhiteboardAspect(t,r,!0),a=s.x,l=s.y,d=s.width,h=s.height;return!(Math.abs(n-d)<5&&Math.abs(i-h)<5)||(this.parentDom.style.cssText+="left:"+a+"px;top:"+l+"px;",c.a.getInstance().info1(u.e.ReloadViewLayou,{w0:n,h0:i,w:d,h:h}),!1)},e.prototype.reinitView=function(){this.toolInstance.isReloading=!0,this.parentDom=null,this.init(this.viewInfo.parent,!0),this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLaser).updateLaserConSize(),this.toolInstance.isReloading=!1},e.prototype.updateLaser=function(){this.toolInstance.reverseZoomHandle(a.k.ZegoWhiteboardViewToolLaser);var e=this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLaser);e.updateLaserConSize(),e.pushActualPlaceHandle()},e.prototype.remoteUpdateBackgroundImage=function(e){this.toolInstance.background.remoteAddBackgroundImageGraphic(e)},e.prototype.remoteClearBackgroundImage=function(){this.toolInstance.background.updateToLocal(!0).clearBackgroundImage()},e.prototype.createGraphicsBox=function(){this.graphicsBoxConNode.innerHTML='\n        <div class="img-editor-box">\n            <div class="operation-point-desktop left-top cursor-nwse LT"></div>\n            <div class="operation-point-desktop right-top cursor-nesw RT"></div>\n            <div class="operation-point-desktop left-bottom cursor-nesw LB"></div>\n            <div class="operation-point-desktop right-bottom cursor-nwse RB"></div>\n            <div class="operation-point-desktop top cursor-ns T"></div>\n            <div class="operation-point-desktop right cursor-ew R"></div>\n            <div class="operation-point-desktop bottom cursor-ns B"></div>\n            <div class="operation-point-desktop left cursor-ew L"></div>\n        </div>\n        <div class="graphics-box"></div>'},e.prototype.emitScroll=function(e,t,r,o,n){this.serviceHandle.loadCurrentGraphics(this.whiteboardID,e,t),o&&this.serviceHandle.scroll(this.whiteboardID,e,t,r,n)},e.prototype.notifyScrollEvent=function(e,t,r,o){n.f.emit(n.c.ViewScroll,{id:this.whiteboardID,horizontalPercent:r,verticalPercent:o,page:e,step:t});var i=this.getUniqueID();n.f.emit(n.e.SubViewScrollChanged,i,e,t)},e.prototype.emitScaleFactor=function(e,t,r){if(!r){e=0|Math.abs(e),t=0|Math.abs(t);var n=this.viewInfo,i=n.zoom,s=n.width,a=n.height;e=e&&Number((e/s/i).toFixed(7)),t=t&&Number((t/a/i).toFixed(7)),this.scaleInfo.x=e,this.scaleInfo.y=t}o.a.scaleModes.sync&&this.serviceHandle.scale(this.whiteboardID,this.viewInfo.zoom,e,t)},e.prototype.setViewCursorHandle=function(e){var t;null===(t=this.toolInstance)||void 0===t||t.setCustomCursor(e)},e.prototype.hideViewCursorHandle=function(){var e;null===(e=this.toolInstance.customCursor)||void 0===e||e.hide()},e.prototype.scaleToHandle=function(e,t,r,o){var i,s,a,c=this;if(this.activited){if(this.scaleInfo.x=t,this.scaleInfo.y=r,this.viewInfo.zoom=e||1,null===(i=this.toolInstance.customCursor)||void 0===i||i.updateCursorAttr(!0),null===(s=this.toolInstance.customCursor)||void 0===s||s.updateOtherCursor(),this.getFileInfo()){this.scaleInfo.syncTimer&&clearTimeout(this.scaleInfo.syncTimer);var u=o?50:100;this.scaleInfo.syncTimer=window.setTimeout((function(){var n,i={action:R.b.WbScale,scale:e,x:t,y:r,notify:o};c.parentDom&&c.parentDom.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:i})),c.updateLaser(),null===(n=c.toolInstance.customCursor)||void 0===n||n.pushActualPlaceHandle()}),u)}else{var l=this.viewInfo,d=l.viewWidth,h=l.viewHeight,p=l.width,f=l.height,_=l.zoom,g=-t*p*_,m=-r*f*_;o&&(g=d*(1-e)*.5|0,m=h*(1-e)*.5|0,this.emitScaleFactor(g,m)),this.setWhiteboardTransform(g,m),this.updateLaser(),null===(a=this.toolInstance.customCursor)||void 0===a||a.pushActualPlaceHandle()}n.f.emit(n.c.ViewScale,this.whiteboardID,this.viewInfo.zoom);var v=this.getUniqueID();n.f.emit(n.e.SubViewScaleChanged,v,this.viewInfo.zoom)}},e.prototype.init=function(e,t){this.viewInfo.parent=e;var r=document.getElementById(""+o.a.reservedPrefix.whiteboard+this.whiteboardID);this.parentDom&&r||this.createModule(!!t),this.initToolHandle(),this.initBackground(!!t||!r),this.updateStateSizeHandle(),this.initDragEvents(),this.activitView();var n=this.serviceHandle.getScrollPercent(this.whiteboardID),i=n.horizontalPercent,s=n.verticalPercent,a=n.pptStep;if(t){this.toolInstance.updateOffsetAndScrollHandle(),this.toolInstance.updateOffsetPage(),this.serviceHandle.isElectron?this.emitScroll(i,s,a,!1):(this.serviceHandle.reloadViewGraphics(this.whiteboardID,this.toolInstance.graphicList),this.updateRemoteToLocal(this.toolInstance.graphicList,[]));var l=this.scaleInfo,d=l.x,h=l.y;-1!==d&&-1!==h&&this.scaleToHandle(this.viewInfo.zoom,d,h,!1)}else{if(this.scrollToHandle(i,s,a,!1),o.a.scaleModes.response){var p=this.serviceHandle.getScale(this.whiteboardID),f=p.scaleFactor,_=p.scaleOffsetX,g=p.scaleOffsetY;this.scaleToHandle(f,_,g,!1)}this.playAnimation(this.serviceHandle.getH5Extra(this.whiteboardID),!1)}c.a.getInstance().info1(u.e.Init,{horizontalPercent:i,verticalPercent:s,step:a});var m=this.zoomNode.parentNode,v=m.clientWidth,y=m.clientHeight;!t&&(Math.abs(v-this.viewInfo.parentWidth)>5||Math.abs(y-this.viewInfo.parentHeight)>5)&&this.reloadView(),this.setViewCursorHandle(t)},e.prototype.reissuedPlayAnimation=function(){this.playAnimation(this.serviceHandle.getH5Extra(this.whiteboardID),!1)},e.prototype.getContentSize=function(){return{width:this.viewInfo.width,height:this.viewInfo.height}},e.prototype.getRootDomID=function(){return this.viewInfo.root},e.prototype.setActivited=function(e,t){e?this.activited=!0:this.viewInfo.root&&this.viewInfo.root!=t||(this.activited=!1)},e.prototype.getActivited=function(){return this.activited},e.prototype.scrollToHandle=function(e,t,r,o){if(this.activited)if(this.stopLocalDrawHandle(t),this.getFileInfo()){var n=this.serviceHandle.getScale(this.whiteboardID),i=n.scaleOffsetX,s=n.scaleOffsetY,a={action:R.b.Page,percent:t,step:r||1,ofsX:i,ofsY:s,notify:o};this.parentDom&&this.parentDom.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:a}))}else this.emitScroll(e,t,1,o),this.jumpPage(e,t)},e.prototype.syncScaleToHandle=function(){var e=this.scaleInfo,t=e.x,r=e.y;-1!==t&&-1!==r&&this.emitScaleFactor(t,r,!0)},e.prototype.clearLaserHandle=function(e){this.toolInstance&&this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolLaser).clearLaserHandle(e)},e.prototype.clearLocalHandle=function(e){e&&e.includes(1)?this.remoteClearBackgroundImage():(this.toolInstance.clearLocalHandle(),this.createGraphicsBox())},e.prototype.updateRemoteToLocal=function(e,t){var r=this.toolInstance.graphicList.some((function(e){return t.length&&t.includes(e.graphic_id)&&e.type==a.f.BgImage})),o=e.filter((function(e){return e.type==a.f.BgImage}));if(o.length){var n=o.pop();this.remoteUpdateBackgroundImage(n)}r&&this.remoteClearBackgroundImage(),e=e.filter((function(e){return e.type!==a.f.BgImage})),this.toolInstance.updatePushLocalHandle(e,t)},e.prototype.destroyDomHandle=function(){if(this.parentDom){c.a.getInstance().info1(u.e.Destroy_dom,{domID:this.parentDom.id});var e={action:R.b.WbDestroy,data:this.whiteboardID};this.parentDom.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:e})),Object(s.o)(this.parentDom.parentElement),this.parentDom=null}},e.prototype.clearCanvasCache=function(){if(this.parentDom){c.a.getInstance().info1(u.e.Clear_canvas,{domID:this.parentDom.id});var e={action:R.b.WbSwitch,data:this.whiteboardID};this.parentDom.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:e}))}},e.prototype.clearEvent=function(){if(this.parentDom){c.a.getInstance().info1(u.e.ClearEvent);var e={action:R.b.ClearEvent};this.parentDom.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:e}))}},e.prototype.playAnimation=function(e,t){var r;if(this.activited){var o={action:R.b.Animation,data:e,notify:!t};null===(r=this.parentDom)||void 0===r||r.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:o}))}},e.prototype.onAuthChange=function(){this.activited&&this.setDragStyle(this.getToolType()||0)},e.prototype.clear=function(){var e=this;if(!this.operationModes.draw)return Promise.resolve(!1);if(!this.toolInstance.getUserAuth().clear)return Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthClearGraphic),Promise.resolve(!1);c.a.getInstance().info1(u.e.API_clear,{whiteboardID:this.whiteboardID});var t=this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolSelector);return t.hideImageEditBox(),t.hideSelectBox(),this.serviceHandle.clearView(this.whiteboardID,[0]).then((function(){return e.clearLocalHandle(),c.a.getInstance().info1(u.e.Clear_cb,"success"),Promise.resolve(!0)})).catch((function(e){var t=Object(i.a)(a.j.ZegoWhiteboardViewErrorClearFail);return c.a.getInstance().error1(u.e.Clear_cb,t),Promise.resolve(!1)}))},e.prototype.scroll=function(e,t){return isNaN(+e)||isNaN(+t)?(Object(i.a)(a.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef: horizontalPercent\u3001verticalPercent\u53d6\u503c\u4e3a0~1",!0),!1):!!this.operationModes.scroll&&(this.toolInstance.getUserAuth().scroll?(c.a.getInstance().info1(u.e.Scroll,{params:{horizontalPercent:e,verticalPercent:t}}),e<0&&(e=0),e>1&&(e=1),t<0&&(t=0),t>1&&(t=1),e=Number(e.toFixed(7)),t=Number(t.toFixed(7)),c.a.getInstance().info1(u.e.Scroll,{params:{horizontalPercent:e,verticalPercent:t}}),this.viewInfo.pageCount>1&&this.viewInfo.page>0&&(this.scrollToHandle(e,t,1,!0),c.a.getInstance().info1(u.e.Scroll,{transParams:{horizontalPercent:e,verticalPercent:t},status:!0}),!0)):(Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthScroll),!1))},e.prototype.getCurrentScrollPercent=function(){var e=D(D({},this.serviceHandle.getScrollPercent(this.whiteboardID)),{direction:this.viewInfo.direction});return c.a.getInstance().info1(u.e.API_getCurrentScrollPercent,{percent:e}),e},e.prototype.getHorizontalPercent=function(){return c.a.getInstance().info1(u.e.API_getHorizontalPercent,{horizontalPercent:this.getCurrentScrollPercent().horizontalPercent}),this.getCurrentScrollPercent().horizontalPercent},e.prototype.getVerticalPercent=function(){return c.a.getInstance().info1(u.e.API_getVerticalPercent,{verticalPercent:this.getCurrentScrollPercent().verticalPercent}),this.getCurrentScrollPercent().verticalPercent},e.prototype.undo=function(){this.operationModes.draw&&(this.serviceHandle.isElectron?this.serviceHandle.undo(this.whiteboardID):this.toolInstance.undoNewHandle(),c.a.getInstance().info1(u.e.API_undo))},e.prototype.redo=function(){this.operationModes.draw&&(this.serviceHandle.isElectron?this.serviceHandle.redo(this.whiteboardID):this.toolInstance.redoNewHandle(),c.a.getInstance().info1(u.e.API_redo))},e.prototype._undoClear=function(){this.toolInstance.undoClearPage()},e.prototype.getAspectRatio=function(){var e=this.serviceHandle.getAspectRatio(this.whiteboardID);return c.a.getInstance().info1(u.e.API_getAspectRatio,{aspectRatio:e}),e},e.prototype.getFileInfo=function(){var e=this.serviceHandle.getFileInfo(this.whiteboardID);return c.a.getInstance().info1(u.e.API_getFileInfo,{fileInfo:e}),e},e.prototype.getID=function(){return this.whiteboardID},e.prototype.getName=function(){return this.serviceHandle.getModName(this.whiteboardID)},e.prototype.getCreateTime=function(){return this.serviceHandle.getCreateTime(this.whiteboardID)},e.prototype.getRoomID=function(){return this.serviceHandle.getRoomID(this.whiteboardID)},e.prototype.getUniqueID=function(){return this.serviceHandle.getUniqueID(this.whiteboardID)},e.prototype.getCurrentPage=function(){var e=this.viewInfo.page||1;return c.a.getInstance().info1(u.e.API_getCurrentPage,{cp:e}),e},e.prototype.getPageCount=function(){var e=this.viewInfo.pageCount||1;return c.a.getInstance().info1(u.e.API_getPageCount,{pageCount:e}),e},e.prototype.setBackgroundImage=function(e,t,r){var o=e instanceof File?{name:e.name,size:e.size,type:e.type}:e;return c.a.getInstance().info1(u.e.API_setBackgroundImage,{address:o,mode:t}),this.toolInstance.background.setBackgroundImage(e,t,r)},e.prototype.clearBackgroundImage=function(){this.toolInstance.background.clearBackgroundImage(),c.a.getInstance().info1(u.e.API_clearBackgroundImage)},e.prototype.setToolType=function(e){var t,r;if(c.a.getInstance().info1(u.e.API_setToolType,{type:e}),e=e||0,!Object(L.o)(e)||this.operationModes.none)return!1;if(e===a.k.ZegoWhiteboardViewToolClick){var n=null===(t=this.getFileInfo())||void 0===t?void 0:t.fileType;if(n!==a.d.PPTH5&&n!==a.d.CUSTOM_H5)return!1}return o.a.basicState.type=e,!this.toolInstance||(e!==a.k.ZegoWhiteboardViewToolPen&&(null===(r=this.toolInstance.customCursor)||void 0===r||r.hide()),this.parentDom.style.userSelect=e!==a.k.ZegoWhiteboardViewToolText?"none":"auto",this.canDraw=this.operationModes.draw&&!!e&&e!==a.k.ZegoWhiteboardViewToolClick,this.setClassNameHandle(e),this.setDragStyle(e),this.penetrateEventHandle(e),this.updateBindEvents(),this.hideSelectBox(),c.a.getInstance().info1(u.e.API_setToolType,"true"),!0)},e.prototype.getToolType=function(){var e=Object(L.e)();return c.a.getInstance().info1(u.e.API_getToolType,{toolType:e}),e},e.prototype.setBrushColor=function(e){var t=Object(L.j)(e);return c.a.getInstance().info1(u.e.API_setBrushColor,{color:e,res:t}),t},e.prototype.getBrushColor=function(){var e=Object(L.b)();return c.a.getInstance().info1(u.e.API_getBrushColor,{color:e}),e},e.prototype.setBrushSize=function(e){var t=Object(L.k)(e);return t&&this.updateStateSizeHandle(),c.a.getInstance().info1(u.e.API_setBrushSize,{thin:e,res:t}),t},e.prototype.getBrushSize=function(){var e=Object(L.c)();return c.a.getInstance().info1(u.e.API_getBrushSize,{size:e}),e},e.prototype.setFontSize=function(e){var t=Object(L.n)(e);return t&&this.updateStateSizeHandle(),c.a.getInstance().info1(u.e.API_setFontSize,{thin:e,res:t}),t},e.prototype.getFontSize=function(){var e=Object(L.d)();return c.a.getInstance().info1(u.e.API_getFontSize,{size:e}),e},e.prototype.setTextSize=function(e){var t=this.setFontSize(e);return c.a.getInstance().info1(u.e.API_setTextSize,{thin:e,res:t}),t},e.prototype.getTextSize=function(){var e=this.getFontSize();return c.a.getInstance().info1(u.e.API_getFontSize,{size:e}),this.getFontSize()},e.prototype.setFontBold=function(e){var t=Object(L.l)(e);return c.a.getInstance().info1(u.e.API_setFontBold,{bold:e,res:t}),t},e.prototype.isFontBold=function(){var e=Object(L.f)();return c.a.getInstance().info1(u.e.API_isFontBold,{res:e}),e},e.prototype.setFontItalic=function(e){var t=Object(L.m)(e);return c.a.getInstance().info1(u.e.API_setFontItalic,{italic:e,res:t}),t},e.prototype.isFontItalic=function(){var e=Object(L.g)();return c.a.getInstance().info1(u.e.API_getFontItalic,{res:e}),e},e.prototype.setBackgroundColor=function(e){return!(!Object(L.i)(e)||!this.toolInstance.enableDraw)&&(this.toolInstance.background.setBackgroundColor(e),c.a.getInstance().info1(u.e.API_setBackgroundColor,{color:e}),!0)},e.prototype.getBackgroundColor=function(){var e=Object(L.a)();return c.a.getInstance().info1(u.e.API_getBackgroundColor,{res:e}),e},e.prototype.setScaleFactor=function(e,t,r){var o=+e;(!o||o<1)&&(o=1),this.viewInfo.zoom!==o&&this.operationModes.scale&&this.getToolType()!==a.k.ZegoWhiteboardViewToolClick&&(this.toolInstance.getUserAuth().scale?(this.scaleToHandle(o,t||0,r||0,!0),c.a.getInstance().info1(u.e.API_setScaleFactor,{params:{zoom:o,x:t,y:r}})):Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthScale))},e.prototype.getScaleFactor=function(){var e={scaleFactor:this.viewInfo.zoom,scaleOffsetX:0,scaleOffsetY:0};return c.a.getInstance().info1(u.e.API_getScaleFactor,{scaleFactor:e}),e},e.prototype.getScaleOffsetX=function(){var e=this.getScaleFactor().scaleOffsetX;return c.a.getInstance().info1(u.e.API_getScaleOffsetX,{scaleOffsetX:e}),e},e.prototype.getScaleOffsetY=function(){var e=this.getScaleFactor().scaleOffsetY;return c.a.getInstance().info1(u.e.API_getScaleOffsetY,{scaleOffsetY:e}),e},e.prototype.clearCurrentPage=function(){this.toolInstance.clearPage(this.viewInfo.page||1),c.a.getInstance().info1(u.e.API_clearCurrentPage,{page:this.viewInfo.page||1})},e.prototype.deleteSelectedGraphics=function(){this.toolInstance.deleteSelectedGraphics(a.c.BatchSelete),c.a.getInstance().info1(u.e.API_deleteSelectedGraphics)},e.prototype.addText=function(e,t,r){if(this.operationModes.draw&&this.getToolType()===a.k.ZegoWhiteboardViewToolText)if(!e||!Object(s.l)(t)||!Object(s.l)(r)||t<0||r<0||t>this.viewInfo.viewWidth||r>this.viewInfo.viewHeight)Object(i.a)(a.j.ZegoWhiteboardViewErrorParamInvalid);else if(this.toolInstance.getUserAuth().create){var o=this.toolInstance.getInstanceHandle(a.k.ZegoWhiteboardViewToolText);this.toolInstance.updateOffsetAndScrollHandle();var n=this.toolInstance.transLocationOrigin({clientX:t,clientY:r});t=n.clientX,r=n.clientY,o.addTextGraphics(e,t,r),c.a.getInstance().info1(u.e.API_addText,{params:{text:e,positionX:t,positionY:r}})}else Object(i.a)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic)},e.prototype.addImage=function(e,t,r,n,l){var d=this,h=this.viewInfo.viewWidth,p=this.viewInfo.viewHeight,f=a.o.ZegoWhiteboardViewImageGraphic,_=a.o.ZegoWhiteboardViewImageCustom;if(!n||e!==f&&e!==_||!Object(s.l)(t)||!Object(s.l)(r)||e===f&&(t<0||r<0||t>h||r>p)||e===_&&"string"!=typeof n){var g=Object(i.b)(a.j.ZegoWhiteboardViewErrorParamInvalid);return Promise.reject(g)}if(!this.operationModes.draw)return Promise.reject({});if(!this.toolInstance.getUserAuth().create)return g=Object(i.b)(a.j.ZegoWhiteboardViewErrorNoAuthCreateGraphic),Promise.reject(g);var m=e===f?10485760:512e3;if("string"==typeof n){var v=n;return v.startsWith("https://")?new Promise((function(s,l){var h=!0,p=new XMLHttpRequest;p.open("HEAD",v,!0),p.onreadystatechange=function(){if(4==p.readyState){if(200!=p.status){h=!1;var f=404===p.status?a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl:a.j.ZegoWhiteboardViewErrorInvalidRsp;return l(Object(i.b)(f))}var g=(p.getResponseHeader("Content-Type")||"").replace("image/",""),y=+p.getResponseHeader("Content-Length");if(!"jpg,jpeg,png,svg+xml".includes(g)){var b=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return l(b)}if(y>m)return b=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit),l(b);if(c.a.getInstance().info1(u.e.API_addImage,{params:{type:e,positionX:t,positionY:r,address:n}}),e===_){o.a.basicExtraState.customImage.url=v;var S=new Image;S.setAttribute("crossOrigin","anonymous"),S.onload=function(){o.a.basicExtraState.customImage.w=S.width,o.a.basicExtraState.customImage.h=S.height},S.src=v,s(v)}else d.addImageGraphic(v,t,r).then(s)}},p.onerror=function(){if(h){var e=404===p.status?a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl:a.j.ZegoWhiteboardViewErrorInvalidRsp;l(Object(i.b)(e))}},p.send(null)})):(g=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl),Promise.reject(g))}if(this.serviceHandle.isElectron&&e===f&&"object"===N(n))return/(\.jpg|\.jpeg|\.png|\.svg)$/.test(n.path)?(c.a.getInstance().info1(u.e.API_addImage,{params:{type:e,positionX:t,positionY:r,address:n.path}}),this.serviceHandle.uploadImage(n.path,l).then((function(e){return d.addImageGraphic(e,t,r)}))):(g=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport),Promise.reject(g));var y=n.type.replace("image/","");return"jpg,jpeg,png,svg+xml".includes(y)?n.size>m?(g=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit),Promise.reject(g)):(c.a.getInstance().info1(u.e.API_addImage,{params:{type:e,positionX:t,positionY:r,address:n.name}}),this.serviceHandle.uploadImage(n,l).then((function(e){if(e.code){var o=Object(i.b)(e.code,e.msg);return Promise.reject(D(D({},o),{error:e}))}return d.addImageGraphic(e,t,r)}))):(g=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport),Promise.reject(g))},e.prototype.setWhiteboardOperationMode=function(e){if(e&&Object(s.l)(e)){var t=!!(e%2),r=!t&&[2,6,10,14].includes(e),n=!t&&[4,6,12,14].includes(e),l=!t&&[8,10,12,14].includes(e);this.operationModes=Object.freeze({none:t,scroll:r,draw:n,scale:l});var d=o.a.basicState.type;this.toolInstance&&(this.toolInstance.enableDraw=n),this.canDraw=n&&!!d&&d!==a.k.ZegoWhiteboardViewToolClick,this.setDragStyle(d),this.penetrateEventHandle(d),c.a.getInstance().info1(u.e.API_setWhiteboardOperationMode,{params:e,result:this.operationModes})}else Object(i.a)(a.j.ZegoWhiteboardViewErrorParamInvalid)},e.prototype.snapshot=function(e){return function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t,r,o;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(n){switch(n.label){case 0:return t=null==e?void 0:e.userData,r=new P(this.toolInstance,this.toolInstance.background),this.snapshotInstances[r.snapshotId]=r,[4,r.snapshot(t)];case 1:return o=n.sent(),delete this.snapshotInstances[r.snapshotId],c.a.getInstance().info1(u.e.API_snapshot,{snapshotResult:o}),[2,o]}}))}))},e.prototype.reloadView=function(e){if(this.getFileInfo()){var t={action:R.b.ReloadView,data:{options:e}};this.parentDom&&this.parentDom.dispatchEvent(new CustomEvent(R.a.Whiteboard,{detail:t}))}else this.canReloadView()&&this.reinitView();c.a.getInstance().info1(u.e.API_reloadView)},e.prototype.getVisibleSize=function(){var e={width:this.viewInfo.viewWidth,height:this.viewInfo.viewHeight};return c.a.getInstance().info1(u.e.API_getVisibleSize,{size:e}),e},e}(),x=function(){return(x=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},B=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},U=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},j=function(){function e(e){this.modIdMapInstance={},this.fileInfoMap={},this.signallingDelay=0,this.serviceHandle=e,this.registerLoadfileListener(),this.registerPushCallbackHandle(),this.registerPullCallbackHandle()}return e.prototype.registerLoadfileListener=function(){var e=this;document.body.addEventListener("loadfile",(function(t){var r=t.detail.fileID;e.fileInfoMap[r]=t.detail,c.a.getInstance().info1(u.e.Update_File_Info,{fileID:r,detail:t.detail})}))},e.prototype.registerPushCallbackHandle=function(){var e=this;n.f.on(n.d.PushClearPageGraphics,(function(t,r){e.signallingDelay?setTimeout((function(){e.clearGraphicsPushCallback(t,r)}),e.signallingDelay):e.clearGraphicsPushCallback(t,r)})),n.f.on(n.d.PushDrawPageGraphics,(function(t,r,o){e.signallingDelay?setTimeout((function(){e.drawGraphicsPushCallback(t,r,o)}),e.signallingDelay):e.drawGraphicsPushCallback(t,r,o)})),n.f.on(n.d.PushAddMod,(function(t,r){e.signallingDelay?setTimeout((function(){e.addModPushCallback(t,r)}),e.signallingDelay):e.addModPushCallback(t,r)})),n.f.on(n.d.PushRemovedMod,(function(t,r){e.signallingDelay?setTimeout((function(){e.removedModPushCallback(t,r)}),e.signallingDelay):e.removedModPushCallback(t,r)})),n.f.on(n.d.PushScroll,(function(t,r,o,n){e.signallingDelay?setTimeout((function(){e.scrollPushCallback(t,r,o,n)}),e.signallingDelay):e.scrollPushCallback(t,r,o,n)})),n.f.on(n.d.PushScale,(function(t,r,o,n){e.signallingDelay?setTimeout((function(){e.scalePushCallback(t,r,o,n)}),e.signallingDelay):e.scalePushCallback(t,r,o,n)})),n.f.on(n.d.PushH5ExtraAppended,(function(t,r){e.signallingDelay?setTimeout((function(){e.h5ExtraAppendedPushCallback(t,r)}),e.signallingDelay):e.h5ExtraAppendedPushCallback(t,r)})),n.f.on(n.d.PushAuthChange,(function(t,r){e.onPushAuthChange(t,r)}))},e.prototype.registerPullCallbackHandle=function(){var e=this;n.f.on(n.d.GetPageGraphicsList,(function(t,r,o){var n=e.getMapInstance(t);n&&n.updateRemoteToLocal(r,o)})),n.f.on(n.d.AppendH5Extra,(function(t){var r=t.whiteboardID,o=t.code,i=t.msg,s=t.modExtra,c=t.isH5;0!==o&&(o===a.j.ZegoWhiteboardViewErrorAnimationInfoLimit?n.f.emit(n.c.Error,{code:o,msg:i}):c?e.h5ExtraAppendedPushCallback(r,s):n.f.emit(n.c.Error,{code:o,msg:i}))})),n.f.on(n.d.Scroll,(function(t){var r=t.whiteboardID,o=t.code,n=t.horizontalPercent,i=t.verticalPercent,s=t.step;0!==o&&e.scrollPushCallback(r,n,i,s)})),n.f.on(n.d.Scale,(function(t){var r=t.whiteboardID,o=t.code,n=t.mod_scale;0!==o&&e.scalePushCallback(r,n.scale,n.ofs_x,n.ofs_y)}))},e.prototype.addModPushCallback=function(e,t){var r=this.getMapInstance(e);r||(c.a.getInstance().info1(u.e.Remote_Add,{whiteboardID:e}),r=new M(e,this.serviceHandle),this.setMapInstance(r)),n.f.emit(n.e.RemoteModAdd,r),n.f.emit(n.c.ViewAdd,r)},e.prototype.removedModPushCallback=function(e,t){var r=this.getMapInstance(e);r&&(c.a.getInstance().info1(u.e.Remote_Removed,{whiteboardID:e}),r.destroyDomHandle(),r=null,this.deleteMapInstance(e),n.f.emit(n.e.RemoteModRemoved,t,e),n.f.emit(n.c.ViewRemoved,e))},e.prototype.scrollPushCallback=function(e,t,r,o){var n=this.getMapInstance(e);n&&(c.a.getInstance().warn1(u.e.Remote_Scroll,"whiteboardID="+e+",hPercent="+t+",vPercent="+r+",step="+o),n.scrollToHandle(t,r,o,!1))},e.prototype.scalePushCallback=function(e,t,r,n){var i=this.getMapInstance(e);i&&(c.a.getInstance().warn1(u.e.Remote_Scale,"whiteboardID="+e+",scale="+t+",ofsX="+r+",ofsY="+n),o.a.scaleModes.response&&i.scaleToHandle(t,r,n,!1))},e.prototype.h5ExtraAppendedPushCallback=function(e,t){var r=this.getMapInstance(e);r&&(c.a.getInstance().warn1(u.e.Remote_Extra,"whiteboardID="+e+",modExtra="+t),r.playAnimation(t,!0))},e.prototype.clearGraphicsPushCallback=function(e,t){var r=this.getMapInstance(e);r&&(r.clearLocalHandle(t),r.stopLocalDrawHandle(this.serviceHandle.getScrollPercent(e).verticalPercent))},e.prototype.drawGraphicsPushCallback=function(e,t,r){var o=this.getMapInstance(e);o&&(0!==t.length||r)&&o.updateRemoteToLocal(t,r)},e.prototype.onPushAuthChange=function(e,t){t&&(n.f.emit(n.c.WhiteboardGraphicAuthChange,t),n.f.emit(n.e.RemoteGraphicAuthChange,t)),e&&(n.f.emit(n.c.WhiteboardAuthChange,e),n.f.emit(n.e.RemoteAuthChange,e),e&&Object.values(this.modIdMapInstance).forEach((function(e){return e&&e.onAuthChange()})))},e.prototype.setFileInfo=function(e){var t;if(e.fileInfo){var r=e.fileInfo,o=r.fileID,n=r.fileName,i=this.fileInfoMap[o];(i=i&&i[n])&&(e.aspectWidth=i.width,e.aspectHeight=i.height,e.pageCount=i.pageCount,c.a.getInstance().info1(u.e.Update_File_Info_Set,{fileID:o,detail:(t={fileID:o},t[n]=i,t)}))}},e.prototype.deleteMapInstance=function(e){delete this.modIdMapInstance[e]},e.prototype.getMapInstance=function(e){return this.modIdMapInstance[e]},e.prototype.setMapInstance=function(e){this.modIdMapInstance[e.getID()]=e},e.prototype.setActivitedView=function(e,t){this.serviceHandle.isPlayback?n.f.emit(n.d.AttachedView,[]):Object.values(this.modIdMapInstance).forEach((function(r){r.setActivited(r.getID()==e,t)}))},e.prototype.getActivitedViews=function(){return Object.values(this.modIdMapInstance).filter((function(e){return e.getActivited()}))},e.prototype.checkAttachingParent=function(e){return!!document.getElementById(e)},e.prototype.checkCreatingView=function(e){return!(!e||!e.name||isNaN(+e.aspectWidth)||!+e.aspectWidth||isNaN(+e.aspectHeight)||!+e.aspectHeight||isNaN(+e.pageCount)||!+e.pageCount)},e.prototype.setViewSize=function(e){var t=this.getMapInstance(e);if(t){var r=t.getContentSize(),o=r.width,n=r.height;this.serviceHandle.setSize(e,o,n)}},e.prototype.createErrorStr=function(e){return void 0!==e.code?JSON.stringify(e):""+e},e.prototype.loginRoom=function(e,t,r,o){return this.serviceHandle.loginRoom(e,t,r,o)},e.prototype.logoutRoom=function(e){return this.serviceHandle.logoutRoom(e)},e.prototype.config=function(e){return this.serviceHandle.config(e)},e.prototype.renewToken=function(e,t){return this.serviceHandle.renewToken(e,t)},e.prototype.getCurrentActivitedView=function(){return this.serviceHandle.getCurrentActivitedView()},e.prototype.setDeferredRenderingTime=function(e){this.signallingDelay=e||0},e.prototype.clear=function(e){Object.values(this.modIdMapInstance).forEach((function(t){t&&t.clearLaserHandle(e)})),c.a.getInstance().info1(u.e.API_Clear,{userID:e})},e.prototype.getViewList=function(){return B(this,void 0,void 0,(function(){var e,t,r=this;return U(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.serviceHandle.getModList()];case 1:return e=o.sent(),Object.keys(this.modIdMapInstance).forEach((function(t){-1===e.indexOf(t)&&r.deleteMapInstance(t)})),e.forEach((function(e){r.modIdMapInstance[e]||r.setMapInstance(new M(e,r.serviceHandle)),r.setViewSize(e)})),c.a.getInstance().info1(u.e.API_GetViewList,Object.keys(this.modIdMapInstance)),[2,Object.values(this.modIdMapInstance).sort((function(e,t){return r.serviceHandle.getCreateTime(t.getID())-r.serviceHandle.getCreateTime(e.getID())}))];case 2:return t=o.sent(),c.a.getInstance().error1(u.e.API_GetViewList_Catch,this.createErrorStr(t)),[2,Promise.reject(void 0!==t.code?t:Object(i.b)(a.j.ZegoWhiteboardViewErrorGetListFail))];case 3:return[2]}}))}))},e.prototype.createView=function(e,t){var r=this;return new Promise((function(o,n){return B(r,void 0,void 0,(function(){var r,s,l,d;return U(this,(function(h){switch(h.label){case 0:if(!this.checkCreatingView(e))return r=Object(i.b)(a.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef\uff1aroomID\u3001name\u4e3a\u5b57\u7b26\u4e32\uff0caspectWidth\u3001aspectHeight\u3001pageCount\u4e3a\u6b63\u6574\u6570",!0),c.a.getInstance().error1(u.e.API_CreateView_Check,this.createErrorStr(r)),n(r),[2];this.setFileInfo(e),c.a.getInstance().info1(u.e.API_CreateView,{whiteboardModel:e}),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.serviceHandle.createMod(e,t)];case 2:return s=h.sent(),(l=this.getMapInstance(s))||(l=new M(s,this.serviceHandle),this.setMapInstance(l),c.a.getInstance().info1(u.e.API_CreateView_Success,"success")),o(l),[3,4];case 3:return d=h.sent(),c.a.getInstance().error1(u.e.API_CreateView_Error,this.createErrorStr(d)),n(void 0!==d.code?d:Object(i.b)(a.j.ZegoWhiteboardViewErrorViewCreateFail)),[3,4];case 4:return[2]}}))}))}))},e.prototype.destroyView=function(e){var t=this;return new Promise((function(r,o){return B(t,void 0,void 0,(function(){var t,n,s;return U(this,(function(l){switch(l.label){case 0:if(!e||!e.getID)return t=Object(i.b)(a.j.ZegoWhiteboardViewErrorViewNotExist),c.a.getInstance().error1(u.e.API_DestroyView,{whiteboardView:e,errorData:t}),o(t),[2];l.label=1;case 1:return l.trys.push([1,3,,4]),n=e.getID(),[4,this.serviceHandle.destroyMod(n)];case 2:return l.sent(),this.deleteMapInstance(n),e.destroyDomHandle(),e=null,c.a.getInstance().info1(u.e.API_DestroyView_Success,"success"),r(),[3,4];case 3:return s=l.sent(),c.a.getInstance().error1(u.e.API_DestroyView_Error,this.createErrorStr(s)),o(void 0!==s.code?s:Object(i.b)(a.j.ZegoWhiteboardViewErrorDestroyFail)),[3,4];case 4:return[2]}}))}))}))},e.prototype.attachView=function(e,t){var r=this;return new Promise((function(o,n){if(!r.checkAttachingParent(t)){var s=Object(i.b)(a.j.ZegoWhiteboardViewErrorViewParentNotExist);return c.a.getInstance().error1(u.e.API_AttachView_Check_Parent,{parent:t,errorData:s}),void n(s)}if(!e||!e.getID)return s=Object(i.b)(a.j.ZegoWhiteboardViewErrorViewNotExist),c.a.getInstance().error1(u.e.API_AttachView_Null,{whiteboardView:e,errorData:s}),void n(s);c.a.getInstance().info1(u.e.API_AttachView,{whiteboardID:e.getID(),parent:t});try{var l=e,d=l.getFileInfo();(null==d?void 0:d.fileID)?r.serviceHandle.setFileInfo(r.fileInfoMap[d.fileID].data):r.serviceHandle.setFileInfo({});var h=l.getID();l.init(t),r.setMapInstance(l),r.setActivitedView(h,l.getRootDomID()),l.clearCanvasCache();var p=r.serviceHandle.getScrollPercent(h),f=p.horizontalPercent,_=p.verticalPercent,g=p.pptStep;l.scrollToHandle(f,_,g,!1),l.clearCanvasCache(),c.a.getInstance().info1(u.e.API_AttachView_Success,"success"),l.reissuedPlayAnimation(),o()}catch(e){c.a.getInstance().error1(u.e.API_AttachView_Error,r.createErrorStr(e)),n(Object(i.b)(a.j.ZegoWhiteboardViewErrorAttachFail))}}))},e.prototype.enableSyncScale=function(e){o.a.scaleModes.sync=!!e,e&&this.getActivitedViews().forEach((function(e){return e.syncScaleToHandle()}))},e.prototype.enableResponseScale=function(e){var t=this;o.a.scaleModes.response=!!e,e&&this.getActivitedViews().forEach((function(e){var r=t.serviceHandle.getScale(e.getID()),o=r.scaleFactor,n=r.scaleOffsetX,i=r.scaleOffsetY;e.scaleToHandle(o,n,i,!1)}))},e.prototype.enableHandwriting=function(e){if("boolean"==typeof e){var t=o.a.basicState.attributes,r=JSON.parse(t);r.stroke=!!e,o.a.basicState.attributes=JSON.stringify(r),this.serviceHandle.enableHandwriting(r.stroke),c.a.getInstance().info1(u.e.API_EnableHandwriting_Success,"success")}else{var n=Object(i.b)(a.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef",!0);c.a.getInstance().error1(u.e.API_EnableHandwriting,this.createErrorStr(n))}},e.prototype.enableCustomCursor=function(e){if("boolean"==typeof e)o.a.customCursor.enable=e,Object.values(this.modIdMapInstance).forEach((function(t){t.setViewCursorHandle(),e||t.hideViewCursorHandle()}));else{var t=Object(i.b)(a.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef",!0);c.a.getInstance().error1(u.e.API_EnableCustomCursor,this.createErrorStr(t))}},e.prototype.enableRemoteCursorVisible=function(e){if("boolean"==typeof e)o.a.customCursor.remoteVisible=e;else{var t=Object(i.b)(a.j.ZegoWhiteboardViewErrorParamInvalid,"\u53c2\u6570\u9519\u8bef",!0);c.a.getInstance().error1(u.e.API_EnableRemoteCursorVisible,this.createErrorStr(t))}},e.prototype.setCustomCursorAttribute=function(e,t){var r=this,n=t.iconPath;if("string"==typeof n){var s=n;if(!s.startsWith("https://")){var l=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl);return Promise.reject(l)}return new Promise((function(l,d){var h=!0,p=new XMLHttpRequest;p.open("HEAD",s,!0),p.onreadystatechange=function(){if(4==p.readyState){if(200!=p.status){h=!1;var s=404===p.status?a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl:a.j.ZegoWhiteboardViewErrorInvalidRsp;return d(Object(i.b)(s))}var f=(p.getResponseHeader("Content-Type")||"").replace("image/",""),_=+p.getResponseHeader("Content-Length");if(!"png".includes(f)){var g=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return d(g)}if(_>51200)return g=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit),d(g);c.a.getInstance().info1(u.e.SetCursorImage,{params:{address:n}});var m=new Image;m.onload=function(){if(Math.abs(t.offsetX)>m.width||Math.abs(t.offsetY)>m.height){var s=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit);return d(s)}var c=o.a.customCursor,u=JSON.parse(c.attributes);c.type=e,u.url=n,u.pox_x=t.offsetX,u.pox_y=t.offsetY,c.attributes=JSON.stringify(u),Object.values(r.modIdMapInstance).forEach((function(e){e.setViewCursorHandle()})),l(),m=null},m.src=n}},p.onerror=function(){if(h){var e=404===p.status?a.j.ZegoWhiteboardViewErrorGraphicIllegalUrl:a.j.ZegoWhiteboardViewErrorInvalidRsp;d(Object(i.b)(e))}},p.send(null)}))}var d=n.type.replace("image/","");return"png".includes(d)?n.size>51200?(l=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageSizeLimit),Promise.reject(l)):new Promise((function(s,l){try{r.serviceHandle.uploadImage(n,(function(){})).then((function(n){if(n.code){var c=Object(i.b)(n.code,n.msg);return Promise.reject(x(x({},c),{error:n}))}var u=new Image;u.onload=function(){if(Math.abs(t.offsetX)>u.width||Math.abs(t.offsetY)>u.height){var c=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit);return l(c)}var d=o.a.customCursor,h=JSON.parse(d.attributes);d.type=e,h.url=n,h.pox_x=t.offsetX,h.pox_y=t.offsetY,d.attributes=JSON.stringify(h),Object.values(r.modIdMapInstance).forEach((function(e){e.setViewCursorHandle()})),s(),u=null},u.src=n}))}catch(e){c.a.getInstance().info1(u.e.API_SetCustomCursorAttribute,{error:e}),l(e)}})):(l=Object(i.b)(a.j.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport),Promise.reject(l))},e.prototype.undoClearAction=function(){this.getActivitedViews().forEach((function(e){return e._undoClear()}))},e.prototype.switchView=function(e){return c.a.getInstance().info1(u.e.API_SwitchView,{whiteboardID:e}),this.serviceHandle.switchView(e)},e.prototype.on=function(e,t){return n.f.on(e,t)},e.prototype.off=function(e,t){return n.f.off(e,t)},e.prototype.setLogConfig=function(e){return this.serviceHandle.setLogConfig(e)},e.prototype.clearLog=function(){return c.a.getInstance().uploadLog()},e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return N})),r(302),r(303),r(39),r(25),r(47),r(60),r(61),r(62),r(36),r(46),r(53),r(226),r(67),r(49),r(50),r(218),r(55),r(56),r(307),r(37),r(69),r(87);var o,n,i,s,a=r(306),c=(r(379),r(403),r(210),r(105),r(3)),u=r(21),l=r(33),d=function(){return/iPad|iPhone|iPod/i.test(navigator.userAgent)||/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1},h=(d()?1:2)*(window.devicePixelRatio||1),p="zego-docsview-zoom",f="zego-docsview-con",_="zego-docsview-iframe";!function(e){e[e.PDF=0]="PDF",e[e.PPT=1]="PPT",e[e.H5_PPT=2]="H5_PPT",e[e.H5_CUSTOM=3]="H5_CUSTOM"}(o||(o={})),function(e){e.Load="onDocsLoadPdf",e.GetPageImage="onDocsGetPDFPageImage",e.Uploading="onDocsUploading",e.Convert="onDocsConvertStatus",e.Downloading="onDocsDownloading",e.QueryCache="onDocsCachExist",e.CancelCache="onDocsCancelCache",e.DownloadCache="onDocsDownloadCache",e.LoadFile="docsLoad",e.Upload="docsUpload",e.UploadH5File="docsUploadH5File"}(n||(n={})),function(e){e.InitPlatform="initPlatform",e.GetAllPageStepCount="getAllPageStepCount",e.SetCustomizedConfig="setCustomizedConfig",e.GotoPage="gotoPage",e.PreviousStep="previousStep",e.NextStep="nextStep",e.TriggerElementsClick="triggerElementsClick",e.SnapshotForH5="snapshotForH5",e.StopPlay="stopPlay",e.SetVolume="setVolume",e.HideLoadingStyle="hideLoadingStyle",e.SwitchSpeaker="switchSpeaker"}(i||(i={})),function(e){e.Scale="scale",e.SyncDOMEvent="syncDOMEvent",e.PptOperationAuth="pptOperationAuth"}(s||(s={}));var g=function(){function e(){var e;this.isElectron=!1,this.store=((e={})[c.c.PptStepMode]=1,e[c.c.DisableH5ImageDrag]=!1,e[c.c.UnloadVideoSrc]=!1,e[c.c.DisableH5Mouse]=!1,e.multiDocsQueue=null,e.syncPPTH5Queue=null,e.syncQueueRuning=!1,e.logLevel="error",e)}return e.prototype.setStore=function(e){return Object.assign(this.store,e),!0},e.prototype.getStore=function(){return this.store},e}(),m=(r(296),r(323),r(325),r(168),r(227),r(115),r(402),r(94),r(228),r(106),r(77),r(405),r(382),r(250),r(123),r(229),r(151),new Image);m.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAN90lEQVR4Xu1dC3BcVRn+/7tJ82ybNu8mezZt6qAoLx2dmm42TZPY2g74Qh3EQZ6KOoMoA47gW1EHfOCgIg8RcQYVEWRgoG0SQjbbUhwc0aK0hdLee7N59f3MY3fvcQ6kJU33ce9/d3Pv9p4z02mb/N/5z/m+797de+55IMjiaQbQ072XnQdpAI+bQBpAGsDjDHi8+/IOIA3gcQY83n15B5AG8DgDHu++vANIA3icAY93X94BpAE8zsCs7quq+jAi1iNijHMeB4CY+CP+LX528ueIGJ/+2Zt/K4oSTyQSGwOBwOZ8YlTeAWaopapqEBEHiAI+yRj7KBHrGEwaYAb1mqZFAGAlRQ1FUaoaGxv3U7BOYqQBptkfHBy8wjCMP1DE4JzfEQgEvk7BOo2RBphWQNO0IQCoJwjCGWMKAecKiDQAAKiq+j1E/DZRkasZY78nYh2Hed4AmqYtAYAoUYlXGWPnErGugHneALqu/5Fz/lmKGoZhtDQ1Nb1AwboFk9EA3f0D303VWEQMcM5Vt3TGajsWlpcH6qorr7SKE/ETk7Ht6tDQXyjYbGIyadDV1ppSP9GOjAboCUf6AGBV0kZzeBkQLsxmh+ayLn99LZQUFZFS7tIHIZEwSNisgjJo0BkKptXYswZYUF4GdVWVJC0OHD4C+w4eImGzDpIGoFHa7G8An89HAu/co5FwOQFJA1intbJiIYg/lDKybz8cOXacAs0NRhrAGq8FPh8s8zdYA01HT8VisCc6TMLmDCQNYI3a+upKmF9WZg00Ha0Pj8L45CQJmzOQCwzgkm9DmSkuKylZ2FBbfVHmyDMjxicm9uojY/+lYHOK4VCR7kksp08BPMHbu9pbn89pB7NYua7rL3DOV1CqnDdvXm1dXd0YBZtLTHffwCr0oXhUT1qkAaZp0TRNDPhQx+x/xBi7LZdCUuuWBjDJnKZp4uqtNhk+MyzGGJtHwM0JRBrABM2apv0QAKhX8FWMsYdMpHEkRBogA+0jIyM1U1NToxR1EHGb3+8/n4KdK4w0QAamdV1/hHN+GUUQznlrIBAQ08RcW6QB0kgTjUZbEokEaZYu5/yxQCDwSdcqP90waYA0Cmma9iIAfIAiYiKRqF+6dOkIBTuXGM8aoK+vrzzm812qcLwIEM/nnG/1+XDblKJsWNvSckBV1SsQkTTJEwBc+9g321yeNEBv/5YWUIz7OId3n3G1IQyBAbecsyxwF+e8inA1TjLGigk4RyCeM8CmcPhKBZS0Azp23vYZhnFNU1PTg46oSUjqKQM829fXVOgreAUAU77N8fkUaPY3Eqh8E/IfxtgFVLATOE8ZoCccuQMAbk5HdH11FcwvK6Vq0cYYC1PBTuA8ZoDNGwD4mlREFxcVAauvJemAiI/5/X7XP/Z5+ktgTzhyGAAWpFKY1ddBcRF52L6BMSZWB+VV8dYdYCDyL+DJZyHbmeSJiD/x+/3fyCvlvTgQ1B2O3IMA1ycTqpk1gk8hLdEbZ4yRvzQ4bRqP3QEG1gLHZ2eTbuexDxGv9fv9v3NaSGp+TxlAkNQbjtzDZ9wFxFUvrn5iybvHPk9/CTzZebFcDRG/I/5fV10JC4iTPBFxld/v7yeaxxUwz90BTrIuhoPLyopuXlJTTd2W5XHG2CdcoaKNRnjWAIKz4eHh6lgsRpqoaRjGLU1NTXfa4N4VUE8bQCig6/oqznnKWbHpVDIMY31TU9MzrlCS2AjPG0DwpmnalwHgVxQO4/F407Jly/J2ibs0wLTqmqb9BgC+SDDBMcbYfALOFRBpgBkyaJomvtGHCMq8yBgjLRgh5MoqRBpgFp2apu0DAMrC/wcZY9dkVZ05qEwaYBbJu3fvrvP5fNQlvDcxxn4+B7plLYU0QBIqVVXtQMQeIstrGWMbzWB7BgbWcgNFrtXAjRpAfreiKE+uDgZ3mMFnI0YaIAWLqqregIi/pJCsKIq/sbFxMBV2UySyROF4G3D+pWQxnMPlXW3BRyi5rWKkAdIwpqrqvYj4eaukAsBhxlhFMlxPf+TTgHA7ADSnqxcBr+oIrcz5kjJpgAzqqqoaQUTLG0Bzzl8IBAItM6vvDoevQ1DuM2soBLiuIxR8wGw8JU4awARrqqoeRMSkV3Q6OOf8gUAgcJ2I6QlHxFV/q4l0p4Xk+uNAGsCEIjt27GgoKSlJ+ZmewQRffU3VLwaA1SZSpQgxPtYZCv2djk+NlAYwyWo0Gu1KJBKbTIafFjY4OgYnxico0FMY5Limo20lKX+6xNIAFmQZHBy80TCMX1iAnAp9Q49CPJGgQE9hEgk8b037yldsVTILLA1gkU1d1+/nnF9rEQYJw4BdGulT5LRUvkSspL293d7tZEaN0gBWlXzrFfIWzvkHrULHJyZBHyHtNXEqFefweldb8B1Wc6eKlwYgMqlpWto1BqmqPXz0GIzuP0DM+haMA/9TV6j1M7YqmQZLAxBZjEaj/kQiQdr0d+zAQTh05Cgx8zQM8abO1pW23zuctQbYuHFjma+o/FzuM/Z3tba+YY/t5Ghd19dyzs+YZm4m1+DIGJyYsPdRrihw+eqgvSHjs84A3eHIjQj8KgA8tTkTB/gnIL+vq7XV9CicGRFFjKZpNwHAT83Gz4zbpUchYfPJADl2dLStfI6SX2DOGgP0hMPnAvhuB+CpZ/kiPAsJ+HHnqiD1cMekPG/fufPV0uLid1oVIRtPBgiwl4OxqjMU+p/V/GeNAfq2bFmeiPPHAfh55kjI3shab//ANzniD6gLS7PxZIAAm2MFyiViaxtz/X87Ku/vAL29mwO80HgcAN9rpfO+RGxRe3u7rY2qu/sHrkbEU8vClgf8oGDGQ1TOaOaho8dgzOaTAQD8rTMUvNQKB3l/BwiHw/VToHQDJNnrJzMTE52hYEnmsOQR3eEtaxCMpwCg8GREYUEBLG0Up8hZL2P7D8KhozafDADu7AwFb7GSPW/vAE/19VWVFhRu5Tz9e/V0ZCDC9o7W4LusEPbmVdPffx6iT4gfmI21s8NINp4MQIHrO4PBe832KS8N8MzWrQvmTcVfBQDa5XY6Oxs6Q8EPmyVsQzhcX8CVJwHh/bMxZaUl0FBD2U8aIBsDRNPtiYEB6ztXBcWdMWPJOwP09fUVJ3yFYieORRl7ZzKAc/hrV1vwU5nCX3rppcKDJyaeRoAPJYtdzhpBIewxYBgcXtf0TOlN/x4RtxtgrDcz/pFXBnj00Ud9lXVLjnIA8md3KhYReC8Av7UjFPpHsphN4XCHD5QbOMAlyX5fs3gRVCygrQ8ZGtsLx06MmxbYTCDn8ExXW3B9pti8MkBPOMIzdcjm748iwq8NQ3mkq61lm6jruYGB9xkcxa4iKd8Ain2FxGMgpRw9fgKG94qlCNkvCHB3Ryh4Q7qa88YAPeGIeI1Wk32aUtYoxvnFEHLyU09nwJoa6mFe4amHAUtNfE3VgfMc+hr5jZ2trSlnN+eFAbr7I9sQ4T2WmJ2j4MUVC6GKeobg3v1w5PgcnCGIysWdrS1PJ6PE9QboDW/u4cA75khPS2kKCwtgaQPtQeT4+DhER/daymcjeA+AsT7ZcLGrDdA7sJl8WIMNskxD/XW1UFKcH4dHI2Dv5LHD69etW3fawYWuNUDPwOa7gPOvmFZjjgMXzi+H2srFpKxi2FcM/8514cDv7wq1nrbQxZUGyNSouSZudj47x8dm4+WPnf7PPqsxE9eOnBuYqVF2CMgGdklNFZSX0vaG3D04BLF4PBvNINUhDUCi7W1QeWkJLCEO9+47eAgOHD5iswX24NIANvgTw7zLGpeQhnsnp2KgDlG3HbDR6FlQaQAbXNZULoaK+eWkGtShEZicmiJhswmSBiCyWVpSDI21tIFIcdsXt383FGkAogpiooeY8GG1iC984oufW4o0AEEJO7uJZ2WSB6HNqSDSABbJLCkqAj/xGBmx+EMsAnFTkQawqIYQX5jAasnGlG+rOc3ESwOYYWk6ZtGC+VC9mDbxKBeTPCw0PWVo3hggG521U0fl4ormqkULSfvzTMXjG3er0Z/YyZ9LbFd76/Mn68806urIUHAuO2+2bk3TngAAy2cJcM5j8Xi8urm5Wawedn2RBkgikaqqX0DE31LU45x/LhAIPEzBOoGRBpjFuq7ryznn/wYAytueJxhjH3dCSGpORw0AAA9xzl211z6rr/1ISXHxhRRC9wyN3DU5OZkXt/6T/UNEsbjlylT9zel3AODwMmDygxwpAtjFiMOjxCFSlJKVTR8oie1iMmjgGQOISR7imZ8y3Cs2ehAjfnlZpAHeks3Owg7xmle87s3LIg0AkO+TPGwZz+sGEJM8xGteyqnhE5NToA2P2OLfcbDXDVC1qAIWL0x5onxaffThURifPG2WteN6Wm7AHBkgebs4VACCYzMl5peVLqqvrrrAMmniQICjx/TR/Qd2UbCuwmTQoDMUbE/XXuv7obik92Kl8YoVK8SxMBnX/iVp8k7G2Dku6YqjzchbA2ia9i0A+D6FPURc5/f7SfsDUvK5GZOXBohGoy3xeLwPEecRyL2XMSaWi8sCAHlpAF3Xn+acZ9w8YbbCnPNRRVGW+v3+7O7mkMdWyjsDaJr2NQD4GZHzyxhjfyZiz0pY3hngrFTBwU5JAzhIvhtSSwO4QQUH2yAN4CD5bkgtDeAGFRxsgzSAg+S7IbU0gBtUcLAN0gAOku+G1NIAblDBwTZIAzhIvhtSSwO4QQUH2yAN4CD5bkgtDeAGFRxsgzSAg+S7IbU0gBtUcLAN0gAOku+G1P8HXF8j+YvhwMkAAAAASUVORK5CYII=";var v=r(4),y=r(1),b=r(2);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E,T=function(){return(T=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},w=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,n++)o[n]=i[s];return o},C=function(){function e(e,t,r){var i=this;this.parent="",this.id="",this.wbId="",this.urlObject="",this.canvasArray=[],this.renderMode=o.PDF,this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0,this.renderMaxZoom=h,this.viewInfo={ticking:!1,percent:0,total:1,sheet:0,sheetName:"",parentWidth:0,parentHeight:0,width:0,height:0,viewWidth:0,viewHeight:0,rate:1,canvasMaxPage:5,scrollTop:0,scrollLeft:0,lastTime:0,lastTimeId:0,scrollTimeId:0,isParentScale:!1,fillPPT:!1,h5CDNUsedMap:{},imgInfo:{isSmall:!1,isScale:!1,width:0,height:0,min_w:640,min_h:400},firstInfo:{page:0,step:0,h5Extra:"",loadedFile:!1,scrollTop:0},maxSteps:{},isClearCanvas:!1,filePageSize:void 0},this.zoomInfo={zoom:1,x:0,y:0,tx:0,ty:0,isDrag:!1,enableScroll:!0,remoteScroll:!0,dragRectTop:0,dragRectBottom:0},this.ppth5Info={page:1,step:1,scene:0,targetPage:0,targetStep:0,lastStep:-1,goPage:0,goStep:0,notify:!0,loaded:!1,scale:1,goTimer:0,syncTimer:0,pageChangeTimer:0,p:"",loadRetryTimer:0},this.fileInfo={},this.vpageImgCache={},this.vpageAspecCache={},this.vpageDrawImgCache={},this.domEventListeners=null,this.loadFileListenerMap={},this.PPTReady=!1,this.speakerLabel="",this.loadFileCallback=function(){var e=i.getLoadFileModelForCallback();i.loadFileListenerMap[e.fileID]&&"function"==typeof i.loadFileListenerMap[e.fileID]?i.loadFileListenerMap[e.fileID](e):v.f.emit(v.a.LoadFile,e),y.a.getInstance().info1(b.b.LoadFileCallback)},this.reloadViewCallback=function(){var e={action:l.b.ReloadView,data:i.getLoadFileModelForCallback()};if(i.docDom.dispatchEvent(new CustomEvent(l.a.Docs,{detail:e})),i.renderMode===o.PDF){var t=i.zoomInfo.zoom,r=i.viewInfo.scrollLeft*t|0,n=i.viewInfo.scrollTop*t|0;i.docDom.scrollTo(r,n),i.renderDom.scrollTo(r,n),clearTimeout(i.viewInfo.scrollTimeId),i.viewInfo.scrollTimeId=window.setTimeout((function(){i.viewInfo.ticking=!1}),34)}else i.setDocsViewDomTransform(i.zoomInfo.tx,i.zoomInfo.ty);y.a.getInstance().info1(b.b.ReloadViewCallback)},this.handleWhiteboardEvent=function(e){var t=e&&e.detail,r=t.action;if(y.a.getInstance().info1(b.b.Zegoeventwb,{data:t}),r===l.b.Page)i.handleWhiteboardPageEvent(t);else if(r===l.b.WbScale){var o=t,n=o.scale,s=o.x,a=o.y,c=o.notify;i.handleSetScaleFactor(n,s,a,c)}else if(r===l.b.WbDragTool)i.handleWhiteboardDragToolEvent(t);else if(r===l.b.WbInit)i.handleWhiteboardInitEvent(t);else if(r===l.b.Animation)i.handleWhiteboardAnimationEvent(t);else if(r===l.b.WbDestroy)i.unloadFile();else if(r===l.b.Snapshot)i.docsSnapshot(t);else if(r===l.b.ReloadView){var u=t.data.options;i.reloadView(u)}else r==l.b.WbSwitch?i.reloadCanvas():r==l.b.ClearEvent&&window.removeEventListener("message",i.handleIframeMessage)},this.handleIframeMessage=function(e){var t=e.data;if(t&&"zegodocsview"===t.source){var r=t.action,o=t.res,n=t.hash;if(!n||n==="#"+i.id)if("syncDOMEvent"!==r&&"getH5SnapshotResult"!==r&&y.a.getInstance().info1(b.b.H5_iframe,{data:t}),y.a.getInstance().info1(b.b.H5_iframe,{action:r,res:o}),"syncCurrentPage"===r)i.syncCurrentPage(o);else if("syncCurrentStep"===r&&i.ppth5Info.loaded)i.syncCurrentStep(o);else if("syncCurrentPageStep"===r)i.syncCurrentPageStep(o);else if("syncCurrentElement"===r)i.syncCurrentElement(o);else if("syncDOMEvent"===r&&i.domEventListeners){var s=i.domEventListeners[o.type];s&&s(o)}else if("syncCurrentError"===r)i.syncCurrentError(o);else if("onload"===r)i.initIframe();else if("didLoadFinish"===r)y.a.getInstance().info1(b.b.DidLoadFinish,{fileid:i.fileInfo.file_id,time:(new Date).toLocaleString()}),i.ppth5Info.loadRetryTimer&&clearTimeout(i.ppth5Info.loadRetryTimer),i.PPTReady&&v.f.emit(v.b.LoadFinish,i.fileInfo.file_id),(i.resolveSpeaker||i.rejectSpeaker)&&i.setDynamicPPTH5Speaker();else if("getAllPageStepCount"===r)i.viewInfo.maxSteps=Object.freeze(JSON.parse(o));else if("getH5SnapshotResult"===r)i.getH5SnapshotResult(o);else if("switchSpeakerFinish"===r&&(i.resolveSpeaker||i.rejectSpeaker)){var a=o.code,c=o.message;"boolean"==typeof o?i.resolveSpeaker(!0):i.rejectSpeaker({code:a,message:c})}}},this.handleScrollEvent=function(e){i.zoomInfo.enableScroll&&!i.viewInfo.ticking&&(requestAnimationFrame((function(){i.ppth5Info.notify=!0;var t=i.zoomInfo,r=t.zoom,o=t.dragRectTop,n=t.dragRectBottom,s=e.target,a=Math.ceil(s.scrollTop),c=Math.ceil(s.scrollLeft),u=Math.ceil(a/r),l=Math.ceil(c/r),d=Math.ceil(a-i.viewInfo.percent*i.viewInfo.height*r);l!==i.viewInfo.scrollLeft?(i.viewInfo.scrollLeft=l,i.renderDom.scrollLeft=c,i.postSyncDragMessage(c,d)):u!==i.viewInfo.scrollTop&&(i.renderDom.scrollTop=a,1==r||a<o||a>n?(i.updateCurViewMax(a,r),i.onScrollCallback(c,a)):i.postSyncDragMessage(c,d),i.viewInfo.scrollTop=u),i.viewInfo.ticking=!1})),i.viewInfo.ticking=!0)},this.handleDragStart=function(e){i.zoomInfo.x=i.zoomInfo.y=0;var t=i.zoomInfo,r=t.isDrag,n=t.enableScroll,s=t.zoom;if(r){if(!n&&1===s)return;var a=e instanceof MouseEvent?e:e.changedTouches[0],c=a.clientX,u=a.clientY;if(i.renderMode===o.PDF){var l=i.docDom.getBoundingClientRect(),d=l.bottom;if(c>l.right-15||u>d-15)return;i.zoomInfo.tx=i.docDom.scrollLeft||i.viewInfo.scrollLeft*s,i.zoomInfo.ty=i.docDom.scrollTop||i.viewInfo.scrollTop*s}(s>1||i.viewInfo.height>i.viewInfo.viewHeight)&&(i.zoomInfo.x=c,i.zoomInfo.y=u)}},this.handleDragMove=function(e,t){if(i.zoomInfo.isDrag&&i.zoomInfo.x){if(e instanceof MouseEvent&&!t&&e.buttons<1)return;"touchmove"===e.type&&e.preventDefault(),i.ppth5Info.notify=!0,i.renderMode===o.PDF?i.dragPDF(e,!!t):i.dragPPT(e,!!t)}},this.handleDragEnd=function(e){i.handleDragMove(e,!0)},this.serviceHandle=e,this.id=t,this.setSheet(r),this.serviceHandle.registerEventHandler(this.id,n.Load,(function(e){i.viewInfo.firstInfo.loadedFile=!0,i.tranlateFileAspec(e),Object.assign(i.fileInfo,e),i.checkRenderType(),i.loadCurrentSheet(!0)})),v.f.on(v.b.LoadFinish,this.loadFileCallback)}return e.prototype.clearCanvasCache=function(){if(this.getFileType()==c.e.ZegoDocsViewFileTypeIMG){for(var e=0,t=this.canvasArray.length;e<t;e++)this.canvasArray[e].width=this.canvasArray[e].height=0;this.viewInfo.isClearCanvas=!0}},e.prototype.reloadCanvas=function(){return function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return this.viewInfo.isClearCanvas?[4,this.drawImg("",this.canvasArray[0])]:[3,2];case 1:e.sent(),this.viewInfo.isClearCanvas=!1,e.label=2;case 2:return[2]}}))}))},e.prototype.getCanvasSize=function(){var e;return(null===(e=this.canvasArray)||void 0===e?void 0:e[0])?this.canvasArray[0].width*this.canvasArray[0].height:0},e.prototype.unload=function(){for(var e=0,t=this.canvasArray.length;e<t;e++)this.canvasArray[e].width=this.canvasArray[e].height=0;window.removeEventListener("message",this.handleIframeMessage),URL.revokeObjectURL(this.urlObject),this.urlObject=null,this.docDom=null,this.renderDom=null,this.iframeDom=null,this.loadingDom=null,this.canvasArray=null,this.fileInfo=null,this.vpageImgCache=null,this.vpageDrawImgCache=null,this.domEventListeners=null,this.loadFileListener=null,this.serviceHandle.removeEventHandler(this.id)},e.prototype.setParentWidthHeight=function(){var e=document.getElementById(this.parent);e.style.cssText+="position:relative;display:inherit!important;";var t=e.clientWidth,r=e.clientHeight;if(t<=0||r<=0)throw v.f.emit(v.c.Error,Object(u.b)(c.d.ZegoDocsViewErrorSizeInvalid)),new Error("\u65e0\u6cd5\u83b7\u53d6\u5bb9\u5668\u5bbd\u9ad8");y.a.getInstance().info1(b.b.SetParentWidthHeight,{clientWidth:t,clientHeight:r}),this.viewInfo.parentWidth=t,this.viewInfo.parentHeight=r},e.prototype.setDocsViewDomOverflow=function(){var e=this.zoomInfo,t=e.zoom,r=e.enableScroll;if(y.a.getInstance().info1(b.b.SetDocsViewDomOverflow,{zoom:t,enableScroll:r}),t>1){var n=this.renderMode===o.PDF&&r?"auto":"hidden";this.docDom.style.overflowX=n,this.docDom.style.overflowY=n,this.renderDom&&(this.renderDom.style.overflowX=n,this.renderDom.style.overflowY=n)}else{var i=this.viewInfo,s=i.height,a=i.viewHeight;y.a.getInstance().info1(b.b.SetDocsViewDomOverflow,{height:s,viewHeight:a}),n=this.renderMode===o.PDF&&r&&s>a?" auto":"hidden",this.docDom.style.overflowX="hidden",this.docDom.style.overflowY=n,this.renderDom&&(this.renderDom.style.overflowX="hidden",this.renderDom.style.overflowY=n)}},e.prototype.setDocsViewDomTransform=function(e,t){var r=function(e,t,r){return"transform:translate("+e+"px,"+t+"px) scale("+r+");"},o=this.zoomInfo.zoom,n=t-(this.ppth5Info.page-1)*this.viewInfo.viewHeight*o,i=this.renderDom.firstChild;i.style.cssText+=r(e,t,o),(i=this.getDocViewChild()).style.cssText+=r(e,n,o)},e.prototype.getCanvasSplit=function(e){var t=this.viewInfo,r=t.canvasMaxPage,o=t.total,n=(e-1)/r|0;return{index:n,start:n*r+1,end:Math.min(n*r+r,o)}},e.prototype.getCanvasHeight=function(e){var t=this.viewInfo,r=t.sheet,n=t.total,i=t.height,s=t.viewHeight,a=t.canvasMaxPage,u=this.vpageAspecCache[r],l=u.h[e]||0;if(l)return l;if(this.getFileType()===c.e.ZegoDocsViewFileTypeIMG)return l=i,u.h[e]=l,l;if(this.renderMode===o.PPT)return l=s,u.h[e]=l,l;for(var d=e?u.p[e*a]+1:u.vs,h=u.p[Math.min((e+1)*a,n)],p=d;p<=h;p++)l+=u[p].h;return l=Math.round(l),u.h[e]=l,l},e.prototype.getImgErrorAspec=function(e,t,r){var o=128*this.renderMaxZoom;return[(e-o)/2,r+=(t-o)/2,o,o]},e.prototype.clearImgError=function(e,t,r,o){e.clearRect.apply(e,this.getImgErrorAspec(t,r,o))},e.prototype.drawImgError=function(e,t,r,o,n){e.drawImage.apply(e,w([m],this.getImgErrorAspec(t,r,o))),y.a.getInstance().error1(b.b.Draw_error,{p:this.ppth5Info.page,vpage:n})},e.prototype.drawDividingLine=function(e,t,r,o,n,i,s){e.lineWidth=this.renderMaxZoom,e.beginPath(),s?(e.moveTo(r,0),e.lineTo(r,i)):(e.moveTo(0,o),e.lineTo(n,o)),e.stroke()},e.prototype.getCurrentCDNHost=function(e){return/^https?:\/\//.test(e)&&e.indexOf(".zego.im")>0?e.substr(0,e.indexOf(".zego.im")+8):""},e.prototype.changeDecryptImageCDNHost=function(e,t,r,o){var n=this,i=this.getCurrentCDNHost(r),s=this.getCDNHostList();if(i&&s.length){t[i]=1;var a=(s.findIndex((function(e){return e===i}))+1)%s.length;if(!t[s[a]]){var c=r.replace(i,s[a]);return this.serviceHandle.decryptImage(c).then((function(t){return e.src=t})).catch((function(){return n.changeDecryptImageCDNHost(e,t,c,o)})),void y.a.getInstance().info1(b.b.Draw_img_cdn,{src:c,action:"DecryptImage"})}}var u={src:r,action:"DecryptImageLoadError",usedMap:t};this.postErrorMessage(u),y.a.getInstance().error1(b.b.Draw_img_error,{error:u}),o()},e.prototype.changeImageCDNHost=function(e,t,r,o){var n,i=this.getCurrentCDNHost(e.src),s=this.getCDNHostList();switch(r){case"ppt":n=b.b.Draw_ppt_cdn;break;case"pdf":n=b.b.Draw_pdf_cdn;break;case"img":n=b.b.Draw_img_cdn;break;default:n=""}if(i&&s.length){t[i]=1;var a=(s.findIndex((function(e){return e===i}))+1)%s.length;if(!t[s[a]])return e.src=e.src.replace(i,s[a])+(o?"?p="+o:""),y.a.getInstance().info1(n,{src:e.src,page:o}),!0}var u={src:e.src,page:o,action:"ImageLoadError",code:c.d.ZegoDocsViewErrorNetworkTimeout};return this.postErrorMessage(u),y.a.getInstance().error1(n,{error:u}),!1},e.prototype.changeH5CDNHost=function(){var e=this,t=this.viewInfo.h5CDNUsedMap,r=this.iframeDom.src,o=this.getCurrentCDNHost(r),n=this.getCDNHostList();if(o&&n.length){t[o]=(t[o]||0)+1;var i=(n.findIndex((function(e){return e===o}))+1)%n.length,s=n[i];if(i>0&&!t[s])return this.iframeDom.src=r.replace(o,s),this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.ppth5Info.loadRetryTimer=window.setTimeout((function(){return e.changeH5CDNHost()}),3e4),void y.a.getInstance().info1(b.b.Draw_h5_cdn,{src:this.iframeDom.src});if(0==i&&1==t[s]){for(var a=1;a<n.length;a++)t[n[a]]=0;if(1==n.length){this.renderDom.removeChild(this.iframeDom);var u=this.vpageAspecCache[0][1],l=u.w,d=u.h;this.createIFrame(_+this.id,l,d),this.iframeDom.src=r,this.renderDom.appendChild(this.iframeDom)}else this.iframeDom.src=r.replace(o,s);return this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.ppth5Info.loadRetryTimer=window.setTimeout((function(){return e.changeH5CDNHost()}),3e4),void y.a.getInstance().info1(b.b.Draw_h5_cdn_retry,{src:this.iframeDom.src})}}this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer);var h={src:r,action:"H5LoadError",code:c.d.ZegoDocsViewErrorNetworkTimeout};this.postErrorMessage(h),y.a.getInstance().error1(b.b.Draw_h5_error,{error:h})},e.prototype.drawPPT=function(e,t,r,o,n){var i=this;return new Promise((function(s,a){t*=i.renderMaxZoom,r*=i.renderMaxZoom;var l={},d=n.getContext("2d");if(!d)return v.f.emit(v.c.Error,Object(u.b)(c.d.ZegoDocsViewErrorGetContextFail)),a();var h=new Image;h.setAttribute("crossOrigin","anonymous"),h.onload=i.delayDraw((function(){d.clearRect(0,0,t,r),d.fillStyle="white",d.fillRect(0,0,t,r),d.drawImage(h,0,0,t,r),y.a.getInstance().info1(b.b.Draw_ppt,{p:i.ppth5Info.page,vpage:e,w:t,h:r}),s()})),h.onerror=function(o){i.changeImageCDNHost(h,l,"ppt",e)||(d.clearRect(0,0,t,r),i.drawImgError(d,t,r,0,e),a(o))},h.src=/^https?:\/\//.test(o)?o+"?p="+e:"data:image/png;base64,"+o}))},e.prototype.drawPDF=function(e,t,r,o,n,i,s){var a=this;r*=this.renderMaxZoom,o*=this.renderMaxZoom,n*=this.renderMaxZoom,i*=this.renderMaxZoom;var l=this.vpageAspecCache[this.viewInfo.sheet],d=this.getCanvasSplit(e),h=d.index,p=d.start,f=d.end,_=this.canvasArray[h].getContext("2d");return _?this.vpageDrawImgCache[t]?(y.a.getInstance().info1(b.b.Draw_pdf_cache_aspec,""+!l.o),l.o?this.addtionalDraw(_,s,r,0):this.addtionalDraw(_,s,0,o),Promise.resolve()):e<p||e>f?Promise.resolve():(t-=l.vs-1,new Promise((function(c,u){var d={},h=new Image;h.setAttribute("crossOrigin","anonymous"),h.onload=a.delayDraw((function(){a.clearImgError(_,n,i,o),_.fillStyle="white",y.a.getInstance().info1(b.b.Draw_pdf_no_cache_aspec,""+!l.o),l.o?(_.fillRect(r,0,n,i),_.drawImage(h,r,0,n,i),a.addtionalDraw(_,s,r,0)):(_.fillRect(0,o,n,i),_.drawImage(h,0,o,n,i),a.addtionalDraw(_,s,0,o)),a.vpageDrawImgCache[t]=1,t>1&&t===l.p[e-1]+1&&a.drawDividingLine(_,e,r,o,n,i,l.o),c()})),h.onerror=function(s){a.changeImageCDNHost(h,d,"pdf",t)||(a.drawImgError(_,n,i,o,t),a.vpageDrawImgCache[t]=0,t>1&&t===l.p[e-1]+1&&a.drawDividingLine(_,e,r,o,n,i,l.o),u(s))},h.src=/^https?:\/\//.test(s)?s+"?p="+t:"data:image/png;base64,"+s}))):(v.f.emit(v.c.Error,Object(u.b)(c.d.ZegoDocsViewErrorGetContextFail)),y.a.getInstance().info1(b.b.Draw_pdf,"Get canvas context Fail"),Promise.reject())},e.prototype.drawImg=function(e,t){var r=this;return new Promise((function(o,n){var i={},s=r.viewInfo,a=s.parentWidth,l=s.parentHeight,d=s.viewWidth,h=s.viewHeight,p=s.rate,f=r.vpageAspecCache[0][1],_=t.getContext("2d");if(!_)return v.f.emit(v.c.Error,Object(u.b)(c.d.ZegoDocsViewErrorGetContextFail)),n();var g=new Image;if(g.setAttribute("crossOrigin","anonymous"),g.onload=function(){var e=r.viewInfo.imgInfo,n=e.min_w,i=e.min_h,s=g.width,c=g.height,u=c/s,m=s<=n&&c<=i,v=s<=1440&&u<=2.2&&u>=614/1280;if(r.viewInfo.imgInfo.isSmall=m,r.viewInfo.imgInfo.isScale=v,r.viewInfo.imgInfo.width=s,r.viewInfo.imgInfo.height=c,r.clearImgError(_,d*r.renderMaxZoom,h*r.renderMaxZoom,0),m||v){var S=m?Math.min(n,a)/s:a/s,E=m?Math.min(i,l)/c:l/c,T=Math.min(S,E),w=(a-(I=s*T|0))/2,C=(l-(O=c*T|0))/2;Object.assign(f,{x:w,y:C,w:I,h:O}),r.viewInfo.height=f.h,r.updateDocsViewLayout(w,C,I,O),r.setCanvasWidthHeight(t,I,O),_.fillStyle="white",_.fillRect(0,0,t.width,t.height),_.drawImage(g,0,0,t.width,t.height),y.a.getInstance().info1(b.b.Draw_img_scale,{width:s,height:c,draw_w:I,draw_h:O,rate:T})}else{var I=s*p|0,O=c*p|0;C=Math.max((l-O)/2,0),Object.assign(f,{x:0,y:C,w:a,h:O}),r.viewInfo.height=f.h,r.updateDocsViewLayout(0,C,a,Math.min(l,O)),r.setCanvasWidthHeight(t,a,O),_.fillStyle="white",_.fillRect(0,0,t.width,t.height),_.drawImage(g,0,0,t.width,t.height),y.a.getInstance().info1(b.b.Draw_img_full,{width:s,height:c,draw_w:I,draw_h:O,rate:p})}var k=r.getFile();k.max_width=f.w,k.total_height=f.h,o()},""==e&&r.getFileType()==c.e.ZegoDocsViewFileTypeIMG&&r.urlObject)return r.setCanvasWidthHeight(t,a,l),void(g.src=r.urlObject);if(/^https?:\/\//.test(e)){var m=function(){r.setCanvasWidthHeight(t,a,l),r.drawImgError(_,t.width,t.height,0,1),n()};r.serviceHandle.decryptImage(e).then((function(e){r.urlObject=e,g.src=e})).catch((function(){return r.changeDecryptImageCDNHost(g,i,e,m)}))}else g.onerror=function(){r.changeImageCDNHost(g,i,"img")||(r.setCanvasWidthHeight(t,a,l),r.drawImgError(_,t.width,t.height,0,1),n())},g.src="file://"+e}))},e.prototype.createDocsView=function(){var e=this,t=f+this.id;if(!document.getElementById(t)){this.canvasArray=[],this.vpageDrawImgCache={};var r=document.createElement("div");r.id="zego-docsview-render"+this.id,this.renderDom=r,(r=document.createElement("div")).id=t,r.setAttribute("data-page",this.viewInfo.total+""),r.setAttribute("data-mode",this.renderMode+""),r.addEventListener(l.a.Whiteboard,this.handleWhiteboardEvent),this.docDom=r;var o=document.createElement("div");o.id=p+this.id,o.appendChild(this.renderDom),this.createImageLoading(o),o.appendChild(this.docDom),document.getElementById(this.parent).appendChild(o),r.addEventListener("scroll",this.handleScrollEvent),r.addEventListener("mousedown",this.handleDragStart),r.addEventListener("mousemove",this.handleDragMove),r.addEventListener("mouseup",this.handleDragEnd),r.addEventListener("mouseleave",this.handleDragEnd),r.addEventListener("touchstart",this.handleDragStart),r.addEventListener("touchmove",this.handleDragMove),r.addEventListener("touchend",this.handleDragEnd),r.addEventListener("touchcancel",this.handleDragEnd),this.serviceHandle.existCanvasDrawLimit&&window.addEventListener("unload",(function(){e.releaseCanvas(1)}))}},e.prototype.createImageLoading=function(e){if(this.renderMode===o.PDF||this.renderMode===o.PPT){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t.setAttribute("viewBox","0 0 1024 1024"),t.setAttribute("width","48"),t.setAttribute("height","48"),t.setAttribute("class","loading"),t.innerHTML='<path d="M834.7648 736.3584a5.632 5.632 0 1 0 11.264 0 5.632 5.632 0 0 0-11.264 0z m-124.16 128.1024a11.1616 11.1616 0 1 0 22.3744 0 11.1616 11.1616 0 0 0-22.3744 0z m-167.3216 65.8944a16.7936 16.7936 0 1 0 33.6384 0 16.7936 16.7936 0 0 0-33.6384 0zM363.1616 921.6a22.3744 22.3744 0 1 0 44.7488 0 22.3744 22.3744 0 0 0-44.7488 0z m-159.744-82.0224a28.0064 28.0064 0 1 0 55.9616 0 28.0064 28.0064 0 0 0-56.0128 0zM92.672 700.16a33.6384 33.6384 0 1 0 67.2256 0 33.6384 33.6384 0 0 0-67.2256 0zM51.2 528.9984a39.168 39.168 0 1 0 78.336 0 39.168 39.168 0 0 0-78.336 0z m34.1504-170.0864a44.8 44.8 0 1 0 89.6 0 44.8 44.8 0 0 0-89.6 0zM187.904 221.7984a50.432 50.432 0 1 0 100.864 0 50.432 50.432 0 0 0-100.864 0zM338.432 143.36a55.9616 55.9616 0 1 0 111.9232 0 55.9616 55.9616 0 0 0-111.9744 0z m169.0112-4.9152a61.5936 61.5936 0 1 0 123.2384 0 61.5936 61.5936 0 0 0-123.2384 0z m154.7776 69.632a67.1744 67.1744 0 1 0 134.3488 0 67.1744 67.1744 0 0 0-134.3488 0z m110.0288 130.816a72.8064 72.8064 0 1 0 145.5616 0 72.8064 72.8064 0 0 0-145.5616 0z m43.7248 169.472a78.3872 78.3872 0 1 0 156.8256 0 78.3872 78.3872 0 0 0-156.8256 0z" fill="#cdcdcd"></path>',this.loadingDom=t,e.appendChild(this.loadingDom)}},e.prototype.showImageLoading=function(e){this.loadingDom.style.display=e?"block":"none"},e.prototype.hideOtherDocsView=function(){var e=document.getElementById(this.parent);if(e){var t=p+this.serviceHandle.getStore()[this.parent+"_activited"];Array.from(e.children||e.childNodes).forEach((function(e){e.style.display=e.id==t?"block":"none"}))}},e.prototype.updateDocsViewLayout=function(e,t,r,o){e|=0,t|=0,r|=0,o|=0,this.viewInfo.width=r,this.viewInfo.viewWidth=r,this.viewInfo.viewHeight=o;var n="width:"+r+"px;height:"+o+"px;";this.docDom.style.cssText+=n,this.renderDom.style.cssText+=n,this.docDom.parentElement.style.cssText=n+"left:"+e+"px;top:"+t+"px;",y.a.getInstance().info1(b.b.UpdateDocsViewLayout,{x:e,y:t,w:r,h:o,h0:this.viewInfo.height})},e.prototype.setCanvasWidthHeight=function(e,t,r){e.style.cssText+="width:"+t+"px;height:"+r+"px;",e.width=t*this.renderMaxZoom,e.height=r*this.renderMaxZoom,this.getFileType()==c.e.ZegoDocsViewFileTypeIMG&&this.serviceHandle.calcCanvasSize(this.id)},e.prototype.createCanvas=function(){if(this.canvasArray.length)return!1;var e=document.createElement("canvas");e.setAttribute("data-i","0"),this.canvasArray.push(e);var t=this.viewInfo,r=t.parentWidth,n=t.parentHeight,i=t.height,s=t.sheet,a=t.canvasMaxPage,u=t.fillPPT,l=this.getFileType();if(l===c.e.ZegoDocsViewFileTypeIMG)return this.updateDocsViewLayout(0,0,r,n),!0;var d=this.vpageAspecCache[0][1],h=d.x,p=d.y,f=d.w,_=d.h;if(this.renderMode===o.PPT)this.setCanvasWidthHeight(e,f,_),this.updateDocsViewLayout(h,p,f,_);else{var g=u?f:r;this.setCanvasWidthHeight(e,g,this.getCanvasHeight(0));var m=this.getPageCount();if(m>a){m=Math.ceil(m/a);for(var v=0,S=this.vpageAspecCache[s],E=0;E<m;E++)v+=this.getCanvasHeight(E);if(v=i-v,Math.abs(v)>10&&m>2){var T=v>0?1:-1;v*=T;var w=Math.ceil(m>v?m/v:1);T=1==w?Math.round(T*v/m):T;var C="diff="+v+",step="+w+",count="+m+",equal="+this.getFile().isEqualAspec;for(y.a.getInstance().info1(b.b.Pdf_diff_canvas,{log:C}),E=1;E<=m;)S.h[E]+=T,E+=w}for(E=1;E<m;E++){var I=document.createElement("canvas");I.setAttribute("data-i",E+"");var O=u?f:r;this.setCanvasWidthHeight(I,O,this.getCanvasHeight(E)),this.canvasArray.push(I)}}if(l===c.e.ZegoDocsViewFileTypeELS&&this.getDocViewChild())this.resetVisibleSize();else if(u)this.updateDocsViewLayout(h,p,f,_);else{var k=Math.max((n-i)/2,0),R=Math.min(n,i);this.updateDocsViewLayout(0,k,r,R)}}return!0},e.prototype.renderCanvas=function(){var e=this.zoomInfo.zoom,t=this.viewInfo,r=t.width,n=t.height,i=this.getDocViewChild(),s=!!i,a="width:"+r+"px;height:"+n+"px;"+(e>1?"transform:scale("+e+");":"");if(i||(i=document.createElement("div"),this.docDom.appendChild(i)),i.style.cssText=a,s){if(this.getFileType()==c.e.ZegoDocsViewFileTypeELS){var u=document.createDocumentFragment();this.canvasArray.forEach((function(e){return u.appendChild(e)})),(i=this.renderDom.firstChild).style.cssText=a,i.innerHTML="",i.appendChild(u)}}else if(this.renderMode===o.PPT)this.renderDom.appendChild(this.canvasArray[0]);else{var l=document.createDocumentFragment();(i=document.createElement("div")).style.cssText=a,this.canvasArray.forEach((function(e){return i.appendChild(e)})),l.appendChild(i),this.renderDom.appendChild(l)}this.setDocsViewDomOverflow(),this.viewInfo.firstInfo.scrollTop>0&&this.handleScroll(this.viewInfo.firstInfo.scrollTop),this.viewInfo.firstInfo.scrollTop=-1},e.prototype.drawCanvas=function(e,t){var r=this,n=this.renderMode===o.PPT;n&&(e=e.filter((function(e){return e.virtual_page_number===r.ppth5Info.page}))),this.createDocsView(),this.showImageLoading(!0);for(var i=this.createCanvas(),s=this.canvasArray[0],a=0,c=0,u={id:this.id},l=[],d=this.vpageAspecCache[this.viewInfo.sheet],h=0;h<e.length;++h){var p=e[h],f=p.image_data,_=p.image_path,g=p.virtual_page_number;if(f)if(n){var m=d[g],v=m.w,S=m.h,E=this.drawPPT(g,v,S,f,s);l.push(E)}else{var T=d[g],w=T.p;v=T.w,S=T.h,E=this.drawPDF(w,g,c,a,v,S,f),l.push(E),a+=S,c+=v,u[g]=this.vpageDrawImgCache[g]}else _&&(E=this.drawImg(_,s),l.push(E))}if(this.canvasArray.length>1){var C=this.canvasArray.reduce((function(e,t){return e+t.height/r.renderMaxZoom}),0),I=this.viewInfo.height-C;this.canvasArray.forEach((function(e,t){t!==r.canvasArray.length-1&&(e.style.marginBottom=I/(r.canvasArray.length-1)+"px")})),y.a.getInstance().info1(b.b.Draw_cache,{log:u})}var O=function(){r.docDom&&i&&r.renderCanvas(),r.hideOtherDocsView(),t&&t(),r.showImageLoading(!1)};Promise.all(l).then(O,O)},e.prototype.getIframeDom=function(){return this.iframeDom},e.prototype.drawHtml=function(e,t){var r=this;this.createDocsView();var o=_+this.id;if(!document.getElementById(o)){var n=this.vpageAspecCache[0][1],i=n.x,s=n.y,a=n.w,c=n.h,u=this.getFile().page_list[0].width;(this.isTouch||a-u>4)&&(this.ppth5Info.scale=Number((a/u).toFixed(4))),this.createIFrame(o,a,c);var l=this.serviceHandle.getStore();this.iframeDom.src=e[0].image_data+"?logLevel="+l.logLevel+"&disableH5Mouse="+l.disableH5Mouse+"#"+this.id,this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.ppth5Info.loadRetryTimer=window.setTimeout((function(){return r.changeH5CDNHost()}),3e4);var d="width:"+a+"px;height:"+this.viewInfo.height+"px;",h=document.createElement("div");h.style.cssText=d,this.docDom.appendChild(h),this.renderDom.style.zIndex="1",this.renderDom.appendChild(this.iframeDom),this.updateDocsViewLayout(i,s,a,c),this.setDocsViewDomOverflow(),window.addEventListener("message",this.handleIframeMessage)}this.hideOtherDocsView(),!this.PPTReady&&t&&t()},e.prototype.createIFrame=function(e,t,r){var o=document.createElement("iframe");o.id=e,o.allow="autoplay;camera;microphone",o.width=t+"",o.height=r+"",this.iframeDom=o},e.prototype.execDraw=function(e,t){var r=this,n=e,i=e;if(this.renderMode===o.PDF){var s=this.getCanvasSplit(e);n=s.start,i=s.end}var a=this.getAllVirtualInPageRange(n-1,i-1);this.startGetImageByVirtualPageList(a,(function(e){r.renderMode===o.H5_PPT||r.renderMode===o.H5_CUSTOM?r.drawHtml(e,t):r.drawCanvas(e,t)}))},e.prototype.execScrollFileAndDraw=function(e,t,r){var o=this;if(this.canvasArray.length>1){var n=Date.now(),i=n-this.viewInfo.lastTime;if(this.viewInfo.lastTime=n,i<100)return this.viewInfo.lastTimeId&&clearTimeout(this.viewInfo.lastTimeId),void(this.viewInfo.lastTimeId=window.setTimeout((function(){r?r.forEach((function(e){return o.execDraw(e,t)})):o.execDraw(o.ppth5Info.page,t);var n={p:o.ppth5Info.page,page:e,zoom:o.zoomInfo.zoom,pages:r};y.a.getInstance().info1(b.b.Draw_scrolled,{log:n})}),100))}this.execDraw(e,t)},e.prototype.onScrollCallback=function(e,t){var r=this.viewInfo,o=r.total,n=r.width,i=r.height,s=r.viewHeight,a=r.scrollTop;if(i>s){var c=this.zoomInfo.zoom,u=this.getPageByScrollTop(t),l=Number((t/i/c).toFixed(7));this.ppth5Info.page=u,this.triggerOnScrollEventListener(t,u,l);var d=e&&Number((e/n/c).toFixed(7));if(this.postPageChangeMessage(d),this.ppth5Info.page!==u)this.execScrollFileAndDraw(u),this.viewInfo.isParentScale&&(h=document.getElementById(this.parent))&&this.drawPDFBlank(h.clientHeight,t/c);else if(u>1&&u<o)if(this.viewInfo.isParentScale){var h;(h=document.getElementById(this.parent))&&this.drawPDFBlank(h.clientHeight,t/c)}else{var p=t>a*c?1:-1;this.getCanvasSplit(u).index!==this.getCanvasSplit(u+p).index&&this.execScrollFileAndDraw(u+p)}}else this.postSyncDragMessage(e,t)},e.prototype.getLoadFileModelForAPI=function(e){var t={parent:this.parent,fileID:e.file_id,fileName:e.file_list[0].file_name,fileType:e.file_type,fileUrls:e.file_urls,pageCount:e.file_list[0].page_count,width:e.width,height:e.height};return e.file_hash?t.fileHash=e.file_hash:t.seq=e.seq,e.file_type===c.e.ZegoDocsViewFileTypeELS&&(t.name=e.file_list[0].name,t.sheets=e.file_list.map((function(e){return e.file_name}))),t},e.prototype.getLoadFileModelForCallback=function(){var e,t=this.viewInfo,r=t.width,o=t.height,n=t.filePageSize,i=this.getFile(),s=this.getFileType(),a={parent:this.parent,fileID:this.fileInfo.file_id,fileName:i.file_name,fileType:s,pageCount:i.page_count,width:r,height:o};this.fileInfo.file_hash?a.fileHash=this.fileInfo.file_hash:a.seq=this.fileInfo.seq,this.parent&&(a.viewID=f+this.id);var u=((e={fileID:a.fileID})[a.fileName]={width:r,height:o,pageCount:a.pageCount},e.data={width:r,height:o,pageCount:a.pageCount,filePageSize:n},e);return s===c.e.ZegoDocsViewFileTypeELS&&(a.name=i.name,a.sheets=this.fileInfo.file_list.map((function(e){return u[e.file_name]={width:e.max_width,height:e.total_height,pageCount:e.page_count},e.file_name}))),document.body.dispatchEvent(new CustomEvent("loadfile",{detail:u})),a},e.prototype.loadCurrentSheet=function(e,t){var r=this.getFile();if(r){var n=this.getFileType();this.viewInfo.width=r.max_width,this.viewInfo.height=r.total_height,this.viewInfo.total=r.page_count,this.viewInfo.rate=r.rate,this.viewInfo.filePageSize=r.filePageSize,n===c.e.ZegoDocsViewFileTypePPT?this.renderMode=o.PPT:n===c.e.ZegoDocsViewFileTypeDynamicPPTH5?this.renderMode=o.H5_PPT:n===c.e.ZegoDocsViewFileTypeCustomH5&&(this.renderMode=o.H5_CUSTOM),n===c.e.ZegoDocsViewFileTypeELS&&t&&(this.docDom.scrollTop=0,this.renderDom.scrollTop=0,this.canvasArray.length=0),this.execScrollFileAndDraw(this.ppth5Info.page,e?this.loadFileCallback:void 0)}},e.prototype.resetDocsViewLayout=function(e,t){var r=this.viewInfo,o=r.parentWidth,n=r.parentHeight,i=r.viewWidth,s=r.viewHeight;if(Math.abs(e-i)<5&&Math.abs(t-s)<5){var a=(o-e)/2,c=(n-t)/2;return this.docDom.parentElement.style.cssText+="left:"+a+"px;top:"+c+"px;",y.a.getInstance().info1(b.b.ReloadViewLayou,{w0:i,h0:s,w:e,h:t}),!1}return!0},e.prototype.canReloadView=function(){var e=this.viewInfo.viewWidth;this.setParentWidthHeight();var t=this.viewInfo,r=t.parentWidth,n=t.parentHeight,i=t.height,s=t.viewHeight;if(this.renderMode===o.PPT||this.renderMode===o.H5_PPT||this.renderMode===o.H5_CUSTOM||this.viewInfo.fillPPT){var a=this.fileInfo.file_list[0].page_list[0],u=a.width;return((E=a.height*(S=r)/u)>n||Math.abs(E-n)<=1)&&(S=n*r/E|0,E=n),this.viewInfo.fillPPT||(E|=0),this.resetDocsViewLayout(S,E)}if(this.getFileType()===c.e.ZegoDocsViewFileTypeIMG){var l=this.viewInfo.imgInfo,d=l.isSmall,h=l.isScale,p=(u=l.width,l.height),f=l.min_w,_=l.min_h;if(d||h){var g=d?Math.min(f,r)/u:r/u,m=d?Math.min(_,n)/p:n/p,v=Math.min(g,m),S=u*v|0,E=p*v|0;return this.resetDocsViewLayout(S,E)}}if(Math.abs(r-e)<5){var T=Math.max((n-i)/2,0),w=Math.min(n,i);return this.updateDocsViewLayout(0,T,r,w),y.a.getInstance().info1(b.b.ReloadViewLayou,{w0:e,h0:s,w:r,h:w}),!1}return!0},e.prototype.checkPPT2PDF=function(e,t){if(e===c.e.ZegoDocsViewFileTypePDF){var r=t.page_list[0],o=r.width,n=r.height,i=Number((n/o).toFixed(3));if(i<=1&&i>=614/1280)return t.page_list.map((function(e){return Number((e.height/e.width).toFixed(3))})).every((function(e){return e===i}))}return!1},e.prototype.calculateFileAspec=function(e,t){var r=e.page_list[0],o=r.width,n=r.height,i=o,s=n,a=o,c=n;if(!t){i=0,s=0,a=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER;for(var u=0,l=e.page_list;u<l.length;u++){var d=l[u];d.width>i&&(i=d.width),d.width<a&&(a=d.width),d.height>s&&(s=d.height),d.height<c&&(c=d.height)}}return e.origin_max_width=i,e.max_width=i,e.min_width=a,e.max_height=s,e.min_height=c,e},e.prototype.checkRenderType=function(){8==this.fileInfo.expect_file_type&&this.postErrorMessage(c.d.ZegoDocsViewErrorUnsupportRenderType)},e.prototype.calculateFileAspecWithNoParent=function(e){for(var t=e.file_type,r=this.viewInfo.sheetName,o=function(o){var i=e.file_list[o];if(t===c.e.ZegoDocsViewFileTypeELS?(i.page_count=i.page_list.length,i.file_name===r&&(n.viewInfo.sheet=o)):i.page_count||(i.page_count=i.page_list.length),t===c.e.ZegoDocsViewFileTypePPT||t===c.e.ZegoDocsViewFileTypeDynamicPPTH5||t===c.e.ZegoDocsViewFileTypeCustomH5){var s=i.page_list[0],a=s.width,u=s.height;i.max_width=a,i.total_height=u*i.page_count}else{var l=n.checkPPT2PDF(t,i);if(n.viewInfo.fillPPT=l,l){var d=i.page_list[0];a=d.width,u=d.height,i.max_width=a,i.total_height=u*i.page_count}else{var h=n.calculateFileAspec(i,l),p=h.max_width,f=h.min_width,_=h.max_height,g=h.min_height,m=Math.abs(p-f)<5&&Math.abs(_-g)<5,v=0;m?v=i.page_count*_:i.page_list.forEach((function(e){v+=e.height*p/e.width})),i.max_width=p,i.total_height=Math.round(v)}}},n=this,i=0;i<e.file_list.length;++i)o(i)},e.prototype.tranlateFileAspec=function(e){var t=this;this.setParentWidthHeight();for(var r=e.file_type,o=this.viewInfo,n=o.sheetName,i=o.parentWidth,s=o.parentHeight,a=function(o){var a={vs:1,p:{0:0},h:{}};u.vpageAspecCache[o]=a;var l=e.file_list[o];if(r===c.e.ZegoDocsViewFileTypeELS?(l.page_count=l.page_list.length,l.file_name===n&&(u.viewInfo.sheet=o)):l.page_count||(l.page_count=l.page_list.length),r===c.e.ZegoDocsViewFileTypePPT||r===c.e.ZegoDocsViewFileTypeDynamicPPTH5||r===c.e.ZegoDocsViewFileTypeCustomH5){var d=l.page_list[0],h=d.width;((v=(g=d.height)*(m=i)/h)>s||Math.abs(v-s)<=1)&&(m=s*i/v|0,v=s),l.max_width=m,l.total_height=v*l.page_count|0,l.rate=i/h,l.filePageSize={width:h,height:g};for(var p={p:1,x:(i-m)/2,y:(s-(v|=0))/2,w:m,h:v},f=1;f<=l.page_count;++f)a[f]=T(T({},p),{p:f}),a.p[f]=1}else{a.vs=l.page_list[0].virtual_page_list[0].virtual_page_number,a.o=!1;var _=u.checkPPT2PDF(r,l);if(u.viewInfo.fillPPT=_,_){var g,m,v,y=l.page_list[0];h=y.width,((v=(g=y.height)*(m=i)/h)>s||Math.abs(v-s)<=1)&&(m=s*i/v|0,v=s),l.isEqualAspec=!0,l.max_width=m,l.total_height=v*l.page_count|0,l.rate=i/h,l.filePageSize={width:h,height:g,fillPPT:!0};var b={p:1,x:(i-m)/2,y:(s-v)/2,w:m,h:v},S=a.vs-1;l.page_list.forEach((function(e,t){S+=e.virtual_page_list.length,a.p[t+1]=S;for(var r=0,o=e.virtual_page_list;r<o.length;r++){var n=o[r];a[n.virtual_page_number]=T(T({},b),{p:t+1})}}))}else{var E=u.calculateFileAspec(l,_),w=E.max_width,C=E.min_width,I=E.max_height,O=E.min_height;l.rate=i/w;var k=Math.abs(w-C)<5&&Math.abs(I-O)<5,R=k?l.page_count*I*i/C:0,A=a.vs-1;l.page_list.forEach((function(e,t){var r=e.virtual_page_list.length;A+=r,a.p[t+1]=A;var o={p:t+1,x:0,y:0,w:i};k?o.h=Number((R/l.page_count/r).toFixed(4)):(o.h=Number((e.height*i/w/r).toFixed(4)),R+=e.height*i/w);for(var n=0,s=e.virtual_page_list;n<s.length;n++){var c=s[n];a[c.virtual_page_number]=o}})),l.isEqualAspec=k,l.max_width=i,l.total_height=Math.round(R)}var P=Math.floor(16e3*l.page_count/(u.renderMaxZoom*l.total_height))||1;P>=5&&(P=5),u.viewInfo.canvasMaxPage=P,u.serviceHandle.existCanvasDrawLimit&&function e(){if(!(t.renderMaxZoom<=1)){for(var r=t.vpageAspecCache[0][1].w,o=l.page_count,n=Math.ceil(o/P),s=_?r:i,c=0,u=0,d=0;d<n;d++){for(var h=0,p=d?a.p[d*P]+1:a.vs,f=a.p[Math.min((d+1)*P,o)],g=p;g<=f;g++)h+=a[g].h;var m=s*(h=Math.round(h));c=m>c?m:c,u+=m}var v=c*t.renderMaxZoom*t.renderMaxZoom>16777216;if(u*t.renderMaxZoom*t.renderMaxZoom>100663296||v)return t.renderMaxZoom>3?t.renderMaxZoom--:t.renderMaxZoom=(10*t.renderMaxZoom-1)/10,e()}}()}},u=this,l=0;l<e.file_list.length;++l)a(l)},e.prototype.handleScroll=function(e,t,r){var n=this;if(this.docDom){var i=this.zoomInfo,s=i.zoom,a=i.enableScroll,c=this.viewInfo,u=c.height,l=c.total,d=this.ppth5Info.page,h=this.renderMode===o.PDF;if(h&&(a&&(this.viewInfo.ticking=!0,clearTimeout(this.viewInfo.scrollTimeId),this.viewInfo.scrollTimeId=window.setTimeout((function(){return n.viewInfo.ticking=!1}),34)),this.docDom.scrollTop=e,this.renderDom.scrollTop=e,this.viewInfo.scrollTop=Math.ceil(e/s)),this.renderMode===o.PDF||this.renderMode===o.PPT){if(this.viewInfo.isParentScale){this.execScrollFileAndDraw(d);var p=document.getElementById(this.parent);p&&this.drawPDFBlank(p.clientHeight,this.viewInfo.scrollTop)}else this.execScrollFileAndDraw(d);t="number"==typeof t?t:Number((h?e/u/s:(d-1)/l).toFixed(7)),this.triggerOnScrollEventListener(e,d,t),this.postPageChangeMessage(r)}}},e.prototype.getScrollTopByPage=function(e){var t=this.zoomInfo.zoom;if(this.viewInfo.total<=1||e<=1)return this.updateCurViewMax(0,t),0;if(this.renderMode!==o.PDF)return(e-1)*this.viewInfo.viewHeight*t+2;for(var r=this.vpageAspecCache[this.viewInfo.sheet],n=r.p[e-1],i=0,s=r.vs;s<=n;s++)i+=r[s].h;return i*=t,this.updateCurViewMax(i,t),i},e.prototype.getPageByScrollTop=function(e){var t=this.viewInfo,r=t.sheet,n=t.viewHeight,i=t.total,s=this.zoomInfo.zoom,a=this.getFileType(),u=Math.ceil(.5*n);if(a===c.e.ZegoDocsViewFileTypeIMG)return 1;if(this.renderMode!==o.PDF)return Math.round(e/s/n)+1;for(var l=this.vpageAspecCache[r],d=-u,h=l.vs;d<=e&&l[h];)d+=l[h].h*s,h++;return Math.min(i,Math.max(1,l[h-1].p))},e.prototype.getDocViewChild=function(){return this.docDom.firstChild},e.prototype.postWhiteboardMessage=function(e,t){if(this.wbId){var r={action:e,data:t};this.docDom&&this.docDom.dispatchEvent(new CustomEvent(l.a.Docs,{detail:r}))}},e.prototype.postSyncDragMessage=function(e,t,r){if(r||this.renderMode===o.PDF||(this.zoomInfo.tx=e,this.zoomInfo.ty=t),this.wbId){var n={action:l.b.SyncDrag,x:e,y:t,scale:this.zoomInfo.zoom,notify:this.ppth5Info.notify};this.docDom.dispatchEvent(new CustomEvent(l.a.Docs,{detail:n}))}},e.prototype.postPageChangeMessage=function(e){if(this.wbId){var t={action:l.b.Page,page:this.ppth5Info.page,step:this.ppth5Info.step,pageCount:this.viewInfo.total,ofsX:e,percent:this.viewInfo.percent,notify:this.ppth5Info.notify};this.docDom.dispatchEvent(new CustomEvent(l.a.Docs,{detail:t})),this.renderMode!==o.PDF&&this.setDocsViewDomTransform(this.zoomInfo.tx,this.zoomInfo.ty)}},e.prototype.validateFileInfo=function(e,t){return!t&&(y.a.getInstance().warn1(e,"fileinfo is null"),!0)},e.prototype.postStepChangeMessage=function(){if(!this.validateFileInfo(b.b.PostStepChangeMessage,this.fileInfo)){var e={parent:this.parent,page:this.ppth5Info.page,step:this.ppth5Info.step,fileID:this.getFileID(),fileType:this.getFileType(),fileName:this.getFile().file_name,notify:this.ppth5Info.notify};this.ppth5Info.scene&&(e.scene=this.ppth5Info.scene),y.a.getInstance().info1(b.b.Emit_StepChange,{payload:e}),v.f.emit(v.a.StepChange,e),this.triggerH5OnScrollEventListener(),this.postPageChangeMessage(),this.ppth5Info.scene=0}},e.prototype.postErrorMessage=function(e){if(2000001!==(e="object"===S(e)?e:Object(u.b)(e)).code)if(1e3===e.code||1001===e.code)this.postWhiteboardMessage(l.b.WbError,e.code);else if(String(e.code).startsWith("3"))this.postWhiteboardMessage(l.b.WbError,e.code);else{var t=T({parent:this.parent,fileID:this.getFileID(),fileType:this.getFileType(),fileName:this.getFile().file_name},e);y.a.getInstance().info1(b.b.Emit_Error,{payload:t}),v.f.emit(v.c.Error,t)}},e.prototype.triggerOnScrollEventListener=function(e,t,r){this.viewInfo.percent=r;var o=this.getFile(),n={parent:this.parent,percent:r,page:t,y:e,fileID:this.fileInfo.file_id,fileType:this.getFileType(),fileName:o.file_name,name:o.name||""};y.a.getInstance().info1(b.b.Emit_Scroll,{payload:n}),v.f.emit(v.a.Scroll,n)},e.prototype.triggerH5OnScrollEventListener=function(){var e=this.ppth5Info.page,t=(e-1)*this.viewInfo.viewHeight,r=Number(((e-1)/this.viewInfo.total).toFixed(7));this.triggerOnScrollEventListener(t,e,r)},e.prototype.postMessage2iframe=function(e,t){var r=this.iframeDom;r&&r.contentWindow&&r.contentWindow.postMessage({source:"zegodocsview",action:e,args:t||[]},"*")},e.prototype.handleWhiteboardPageEvent=function(e){var t=e.percent,r=e.step,n=e.notify,i=e.ofsX,s=e.ofsY;this.ppth5Info.notify=n;var a=0,c=1;n?(c=Math.min(Math.round(t*this.viewInfo.total)+1,this.viewInfo.total),a=this.getScrollTopByPage(c)):(a=Math.floor((t+s)*this.viewInfo.height*this.zoomInfo.zoom),c=this.getPageByScrollTop(a));var u={oldpage:this.ppth5Info.page,oldstep:this.ppth5Info.step,page:c,step:r};if(y.a.getInstance().info1(b.b.Zegoeventwb_page,{log:u}),this.renderMode===o.H5_PPT||this.renderMode===o.H5_CUSTOM)this.syncWhiteboardPPTH5Queue(c,r);else{this.ppth5Info.page=c;var l=n&&this.renderMode===o.PDF?i:void 0;this.handleScroll(a,t,l)}},e.prototype.handleWhiteboardDragToolEvent=function(e){var t=e.enable,r=this.zoomInfo.enableScroll;this.zoomInfo.enableScroll=t,this.zoomInfo.remoteScroll=e.remoteScroll,this.zoomInfo.isDrag=e.isDrag,r!==t&&(this.setDocsViewDomOverflow(),this.postMessage2iframe(i.SetCustomizedConfig,[s.PptOperationAuth,JSON.stringify({scroll:+t})]))},e.prototype.handleWhiteboardInitEvent=function(e){var t=this;this.wbId=e.data,setTimeout((function(){var e={action:l.b.DocsAspect,data:JSON.parse(JSON.stringify(t.vpageAspecCache[t.viewInfo.sheet]))};t.docDom.dispatchEvent(new CustomEvent(l.a.Docs,{detail:e}))}))},e.prototype.handleWhiteboardAnimationEvent=function(e){this.ppth5Info.notify=!1,e.notify?(this.viewInfo.firstInfo.page=this.ppth5Info.page,this.viewInfo.firstInfo.step=this.ppth5Info.step,this.viewInfo.firstInfo.h5Extra=e.data):this.playAnimation(e.data)},e.prototype.tryInitPageStep=function(e,t){var r=this;if(this.ppth5Info.goPage&&this.ppth5Info.goStep){if(this.ppth5Info.goTimer&&clearTimeout(this.ppth5Info.goTimer),this.ppth5Info.goPage===e&&this.ppth5Info.goStep===t)return void(this.ppth5Info.goPage=this.ppth5Info.goStep=0);this.ppth5Info.goTimer=window.setTimeout((function(){var o=r.ppth5Info,n=o.goPage,i=o.goStep;n&&i&&(r.execGotoPage(n,i,!1),y.a.getInstance().info1(b.b.H5_init_timeout,{id:r.id,page:e,step:t,h5:r.ppth5Info}))}),2e3)}},e.prototype.setDynamicPPTH5Speaker=function(){return this.speakerLabel?this.fileInfo.file_type!==c.e.ZegoDocsViewFileTypeDynamicPPTH5?(y.a.getInstance().info1(b.b.SetDynamicPPTH5Speaker,{file_type:this.fileInfo.file_type}),this.rejectSpeaker(Object(u.b)(c.d.ZegoDocsViewErrorSwitchSpeakerFail))):this.iframeDom&&this.iframeDom.contentWindow?void this.iframeDom.contentWindow.postMessage({source:"zegodocsview",action:i.SwitchSpeaker,args:[this.speakerLabel]},"*"):(y.a.getInstance().info1(b.b.SetDynamicPPTH5Speaker,"iframeDom \u4e0d\u5b58\u5728"),this.rejectSpeaker(Object(u.b)(c.d.ZegoDocsViewErrorSwitchSpeakerFail))):(y.a.getInstance().warn1(b.b.SetDynamicPPTH5Speaker,"speaker label \u503c\u4e0d\u5b58\u5728"),void this.rejectSpeaker(Object(u.b)(c.d.ZegoDocsViewErrorParamInvalid)))},e.prototype.switchSpeaker=function(e){var t=this;return new Promise((function(r,o){if(y.a.getInstance().info1(b.b.API_switchSpeaker,{label:e}),!e||"string"!=typeof e)return o(Object(u.b)(c.d.ZegoDocsViewErrorParamInvalid));t.speakerLabel=e,t.resolveSpeaker=r,t.rejectSpeaker=o,t.setDynamicPPTH5Speaker()}))},e.prototype.syncCurrentPageStep=function(e){var t=!1;if(!this.ppth5Info.loaded){y.a.getInstance().info1(b.b.H5_init_page,{id:this.id,h5:this.ppth5Info}),this.ppth5Info.loaded=!0;var r=this.ppth5Info,o=r.targetPage,n=r.targetStep;o&&n&&(this.ppth5Info.page=o,this.ppth5Info.step=n,this.gotoPage(!1),t=!0)}!t&&Object.assign(this.ppth5Info,e),this.ppth5Info.page===this.ppth5Info.targetPage&&this.ppth5Info.step===this.ppth5Info.targetStep&&(this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0),t||(this.firstNeedPlayAnimation(),this.postStepChangeMessage(),this.execSyncPPTH5Queue())},e.prototype.syncCurrentPage=function(e){var t=this;if(this.ppth5Info.loaded){"boolean"==typeof e.notify&&(this.ppth5Info.notify=e.notify);var r=+e.page+1,o=(e.step||0)+1;this.ppth5Info.pageChangeTimer&&clearTimeout(this.ppth5Info.pageChangeTimer),this.ppth5Info.pageChangeTimer=window.setTimeout((function(e){t.ppth5Info.page=e[0],t.ppth5Info.step=e[1],t.ppth5Info.scene=e[2],t.postStepChangeMessage()}),2e3,[r,o,e.scene]),this.tryInitPageStep(r,o)}else{y.a.getInstance().info1(b.b.H5_init_page,{id:this.id,h5:this.ppth5Info}),this.ppth5Info.loaded=!0;var n=this.ppth5Info,i=n.targetPage,s=n.targetStep;i>1?(this.ppth5Info.goPage=i,this.ppth5Info.goStep=s,this.ppth5Info.page=i,this.gotoPage(!1)):s<=1&&(this.postStepChangeMessage(),this.firstNeedPlayAnimation())}},e.prototype.syncCurrentStep=function(e){this.ppth5Info.pageChangeTimer&&clearTimeout(this.ppth5Info.pageChangeTimer);var t=e.page+1,r=+e.step+1,o=this.ppth5Info.lastStep;if(this.ppth5Info.lastStep=t===this.ppth5Info.page?r:-1,0!=r&&(0!=o||1!=r)&&("boolean"==typeof e.notify&&(this.ppth5Info.notify=e.notify),y.a.getInstance().info1(b.b.H5_step,{id:this.id,page:t,step:r,notify:e.notify,h5:this.ppth5Info}),r===this.ppth5Info.step&&t===this.ppth5Info.page||(this.ppth5Info.page=t,this.ppth5Info.step=r,this.tryInitPageStep(t,r),this.ppth5Info.targetPage||this.ppth5Info.targetStep||(y.a.getInstance().info1(b.b.H5_queue_done,{id:this.id,page:t,step:r,action:"step"}),this.firstNeedPlayAnimation(),this.postStepChangeMessage(),this.execSyncPPTH5Queue(),this.execMultiDocsQueue())),this.ppth5Info.page===this.ppth5Info.targetPage)){var n="h5step:"+t+","+r+"-"+this.ppth5Info.page+","+this.ppth5Info.targetStep+")";this.ppth5Info.targetStep<r?this.previousStep(this.ppth5Info.notify,n):this.ppth5Info.targetStep>r?this.nextStep(this.ppth5Info.notify,n):(this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0,this.ppth5Info.goPage=0,this.ppth5Info.goStep=0,y.a.getInstance().info1(b.b.H5_queue_done,{id:this.id,page:t,step:r,action:"page"}),this.firstNeedPlayAnimation(),this.postStepChangeMessage(),this.execSyncPPTH5Queue(),this.execMultiDocsQueue())}},e.prototype.syncCurrentElement=function(e){var t={parent:this.parent,page:this.ppth5Info.page,step:this.ppth5Info.step,fileID:this.getFileID(),fileType:this.getFileType(),fileName:this.getFile().file_name,data:e};if(v.f.emit(v.a.PlayAnimation,t),this.wbId){var r={action:l.b.Animation,data:e,notify:!0};this.docDom.dispatchEvent(new CustomEvent(l.a.Docs,{detail:r}))}},e.prototype.syncCurrentError=function(e){e.code===c.d.ZegoDocsViewErrorNetworkTimeout?(this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.changeH5CDNHost()):this.postErrorMessage(e)},e.prototype.initIframe=function(){var e=this;this.postMessage2iframe(i.InitPlatform,[4]),this.postMessage2iframe(i.GetAllPageStepCount),this.renderMode===o.H5_PPT&&this.postMessage2iframe(i.SetCustomizedConfig,[s.Scale,this.ppth5Info.scale]),this.domEventListeners&&this.postMessage2iframe(i.SetCustomizedConfig,[s.SyncDOMEvent]),this.postMessage2iframe(i.SetCustomizedConfig,[s.PptOperationAuth,JSON.stringify({scroll:+this.zoomInfo.enableScroll})]);var t=this.serviceHandle.getStore();[c.c.UnloadVideoSrc,c.c.PptStepMode,c.c.DisableH5ImageDrag].forEach((function(r){return e.postMessage2iframe(i.SetCustomizedConfig,[r,t[r]])}))},e.prototype.dragPDF=function(e,t){var r=this.zoomInfo,o=r.tx,n=r.ty,i=r.zoom,s=r.enableScroll,a=r.remoteScroll,c=r.dragRectTop,d=r.dragRectBottom,h=this.viewInfo,p=h.width,f=h.height,_=h.viewHeight,g=h.percent,m=e instanceof MouseEvent?e:e.changedTouches[0],v=m.clientX,y=m.clientY,b=o+this.zoomInfo.x-v,S=n+this.zoomInfo.y-y,E=p*(i-1);E=Math.floor(E),b<0?b=0:b>E&&(b=E);var T=s?0:Math.ceil(g*f*i);if(E=s?f*i-_:T+(i-1)*_,E=Math.floor(E),S<T?S=T:S>E&&(S=E),s&&(this.viewInfo.scrollLeft=Math.ceil(b/i),this.viewInfo.scrollTop=Math.ceil(S/i)),this.viewInfo.ticking=!0,this.docDom.scrollTo(b,S),this.renderDom.scrollTo(b,S),t)if(this.zoomInfo.x=0,this.zoomInfo.y=0,this.viewInfo.ticking=!1,i>1&&S>=c&&S<=d)this.postSyncDragMessage(b,S-g*f*i);else{if(!s)return!a&&this.postWhiteboardMessage(l.b.WbError,u.a.ZegoWhiteboardViewErrorNoAuthScroll),this.viewInfo.ticking=!0,this.docDom.scrollTo(o,n),this.renderDom.scrollTo(o,n),void(this.viewInfo.ticking=!1);this.updateCurViewMax(S,i),this.onScrollCallback(b,S)}},e.prototype.dragPPT=function(e,t){var r=this.zoomInfo,o=r.tx,n=r.ty,i=r.zoom,s=this.viewInfo,a=s.viewWidth,c=s.viewHeight,u=e instanceof MouseEvent?e:e.changedTouches[0],l=u.clientX,d=u.clientY,h=o+l-this.zoomInfo.x,p=n+d-this.zoomInfo.y,f=a*(1-i);h>0?h=0:h<f&&(h=f),f=c*(1-i),p>0?p=0:p<f&&(p=f),t&&(this.zoomInfo.x=0,this.zoomInfo.y=0,this.postSyncDragMessage(h,p,!t)),this.setDocsViewDomTransform(h,p)},e.prototype.handleSetScaleFactor=function(e,t,r,n){var i=this;this.ppth5Info.notify=n,this.zoomInfo.zoom=e;var s=this.viewInfo,a=s.viewWidth,c=s.viewHeight,u=s.width,l=s.height,d=s.scrollTop,h=s.percent;if(this.setDocsViewDomOverflow(),this.renderMode===o.PDF){var p=this.getDocViewChild();p.style.cssText+="transform:scale("+e+");",(p=this.renderDom.firstChild).style.cssText+="transform:scale("+e+");";var f=t*u*e,_=(r+h)*l*e;n&&(f=a*(e-1)*.5,_=(_=d)*e+c*(e-1)*.5),f=Math.round(f),_=Math.round(_),this.viewInfo.ticking=!0,this.docDom.scrollTo(f,_),this.renderDom.scrollTo(f,_),this.postSyncDragMessage(f,_-h*l*e),this.updateCurViewMax(Math.ceil(h*l*e),e),clearTimeout(this.viewInfo.scrollTimeId),this.viewInfo.scrollTimeId=window.setTimeout((function(){i.viewInfo.ticking=!1}),34)}else f=Math.round(n?a*(1-e)*.5:-t*u*e),_=Math.round(n?c*(1-e)*.5:-r*l*e),this.setDocsViewDomTransform(f,_),this.postSyncDragMessage(f,_);this.wbId||(this.zoomInfo.isDrag=e>1,this.docDom.style.cursor=e>1?"move":"auto"),this.renderMode!==o.PDF&&this.renderMode!==o.PPT||this.loadCurrentSheet()},e.prototype.updateCurViewMax=function(e,t){t>1?(this.zoomInfo.dragRectTop=e-2,this.zoomInfo.dragRectBottom=Math.ceil(e+this.viewInfo.viewHeight*(t-1))):(this.zoomInfo.dragRectTop=0,this.zoomInfo.dragRectBottom=0)},e.prototype.drawPDFBlank=function(e,t){var r=this;if(!(this.canvasArray.length<2)){for(var o=t,n=0,i=0;i<o;)i+=this.getCanvasHeight(n++);var s=n>0?n-1:0;for(o+=e,n=0,i=0;i<o;){var a=this.getCanvasHeight(n++);if(i+=a,0===a)break}for(var c=this.viewInfo,u=c.canvasMaxPage,l=c.isParentScale,d=n>0?n-1:0,h=[];s<=d;s++)h.push(s*u+1);if(l)this.execScrollFileAndDraw(h[0],void 0,h);else{h.forEach((function(e){return r.execDraw(e,void 0)}));var p={id:this.id,pages:h};y.a.getInstance().info1(b.b.Draw_scrolled,{log:p})}}},e.prototype.firstNeedPlayAnimation=function(){var e=this.viewInfo.firstInfo,t=e.page,r=e.step,o=e.h5Extra;t&&o&&t==this.ppth5Info.page&&r==this.ppth5Info.step&&(this.playAnimation(o),this.viewInfo.firstInfo.page=0,this.viewInfo.firstInfo.step=0)},e.prototype.getAllVirtualInPageRange=function(e,t){var r=this.getFile().page_list,o=[];e<0&&(e=0),t>=r.length&&(t=r.length-1);for(var n=e;n<=t;++n)for(var i=0,s=r[n].virtual_page_list;i<s.length;i++){var a=s[i];o.push(a.virtual_page_number)}return o},e.prototype.startGetImageByVirtualPageList=function(e,t){for(var r=[],o=this.vpageImgCache[this.viewInfo.sheet],n=0;n<e.length;){var i=o&&o[e[n]];i?(r.push(i),e.splice(n,1)):n++}this.getImageByVirtualPageList(r,e,t)},e.prototype.sortVirtualPageListRule=function(e,t){return e.virtual_page_number-t.virtual_page_number},e.prototype.getImageByVirtualPageList=function(e,t,r){var o=this;if(t.length<=0)return e.sort(this.sortVirtualPageListRule),void r(e);this.serviceHandle.registerEventHandler(this.id,n.GetPageImage,(function(n){for(var i=n.virtual_page_number,s=0;s<t.length;++s)if(t[s]==i){t.splice(s,1);break}var a=o.vpageImgCache[o.viewInfo.sheet]||{};a[i]=n,o.vpageImgCache[o.viewInfo.sheet]=a;var c=!1;for(s=0;s<e.length;++s)e[s].virtual_page_number==i&&(e[s]=n,c=!0);c||e.push(n),o.getImageByVirtualPageList(e,t,r)}));var i=this.viewInfo,s=i.sheet,a=i.rate;this.serviceHandle.getPageImage(this.id,{sheet:s,rate:a*this.renderMaxZoom*1.5,virtual_page_number:t[0],virtual_start:this.vpageAspecCache[s].vs-1,res:this.fileInfo})},e.prototype.getFile=function(){return this.fileInfo.file_list[this.viewInfo.sheet]},e.prototype.execGotoPage=function(e,t,r){e!==this.ppth5Info.page?(this.ppth5Info.page=e,this.ppth5Info.step=this.renderMode===o.H5_CUSTOM?t:1,this.gotoPage(r)):t<this.ppth5Info.step?this.previousStep(this.ppth5Info.notify,"execGotoPage("+e+","+t+","+this.ppth5Info.step+")"):t>this.ppth5Info.step?this.nextStep(this.ppth5Info.notify,"execGotoPage("+e+","+t+","+this.ppth5Info.step+")"):t!==this.ppth5Info.step||1===this.ppth5Info.targetPage&&1===this.ppth5Info.targetStep||(this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0)},e.prototype.runGotoPageQueue=function(e,t,r,o){var n=this;this.ppth5Info.targetPage=e,this.ppth5Info.targetStep=t,this.execGotoPage(e,t,r);var i=this.ppth5Info.loaded?1e3:2e4;this.ppth5Info.syncTimer&&clearTimeout(this.ppth5Info.syncTimer),this.validateFileInfo(b.b.RunGotoPageQueue,this.fileInfo)||(this.ppth5Info.syncTimer=window.setTimeout((function(){return n[o](!0)}),i))},e.prototype.syncWhiteboardPPTH5Queue=function(e,t){var r=this,o=this.ppth5Info,n=o.page,i=o.step,s=o.loaded,a=o.notify;if(e!=n||t!=i){var c={page:e,step:t,notify:a,loaded:s,id:this.id},u=this.serviceHandle.getStore();u.syncPPTH5Queue=u.syncPPTH5Queue&&u.syncPPTH5Queue.length?u.syncPPTH5Queue.filter((function(e){return e.id===r.id})):[];var l=u.syncPPTH5Queue[u.syncPPTH5Queue.length-1];if(!l||l.page===e&&l.step===t)l||(u.syncPPTH5Queue=[c],y.a.getInstance().info1(b.b.H5_wbqueue_init,{task:c}),this.runGotoPageQueue(c.page,c.step,c.notify,"execSyncPPTH5Queue"));else{var d={page:n,step:i,task:c,queue:u.syncPPTH5Queue.map((function(e){return e.page+"-"+e.step})).join()};u.syncPPTH5Queue.push(c),y.a.getInstance().info1(b.b.H5_wbqueue_push,{log:d})}}},e.prototype.execSyncPPTH5Queue=function(e){var t=this.serviceHandle.getStore(),r=t.syncPPTH5Queue,o=e&&t.syncQueueRuning;if(o&&this.execQueueTimeout(r),t.syncQueueRuning=!1,r&&r.length){t.syncQueueRuning=!0;var n=r.shift();o&&!r[0]||(n=r[0]),n&&(y.a.getInstance().info1(b.b.H5_wbqueue_pop,{timeout:e,task:n,store:t}),this.runGotoPageQueue(n.page,n.step,n.notify,"execSyncPPTH5Queue"))}},e.prototype.execMultiDocsQueue=function(e){var t=this;if(!this.validateFileInfo(b.b.ExecMultiDocsQueue,this.fileInfo)){var r=this.serviceHandle.getStore(),o=r.multiDocsQueue;if(e&&r.syncQueueRuning&&this.execQueueTimeout(o),r.syncQueueRuning=!1,o&&o.length){r.syncQueueRuning=!0;var n=[],i=o.shift();n.push(i);for(var s=0;s<o.length;s++){var a=o[s];a&&a.id!==i.id&&a.p!==i.p&&(i=a,n.push(i),o.splice(s,1))}y.a.getInstance().info1(b.b.H5_mdqueue_pop,{timeout:e,tasks:n,store:r}),n.forEach((function(e){t.serviceHandle.execViewFuction("runGotoPageQueue",e.id,w(e.args,["execMultiDocsQueue"]))}))}}},e.prototype.execQueueTimeout=function(e){if(e&&e.length){for(var t=[],r=0;r<e.length-1;r++)e[r]&&!e[r].loaded&&(t.push(e[r]),e.splice(r,1));var o={id:this.id,loaded:this.ppth5Info.loaded,queue:e,tasks:t};y.a.getInstance().info1(b.b.H5_queue_timeout,{log:o})}this.ppth5Info.loaded=!0,this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0,this.postStepChangeMessage(),this.postMessage2iframe(i.HideLoadingStyle)},e.prototype.gotoPage=function(e){this.ppth5Info.notify=e,this.renderMode===o.H5_PPT?(y.a.getInstance().info1(b.b.GotoPage,{id:this.id,notify:e,page:this.ppth5Info.page}),this.postMessage2iframe(i.GotoPage,[this.ppth5Info.page-1,e])):this.renderMode===o.H5_CUSTOM?this.postMessage2iframe(i.GotoPage,[this.ppth5Info.page,this.ppth5Info.step,e]):this.handleScroll(this.getScrollTopByPage(this.ppth5Info.page))},e.prototype.checkParamsPage=function(e){var t=this.getPageCount();return e<1?e=1:e>t?e=t:e|=0,e},e.prototype.delayDraw=function(e){var t=this;return function(r){t.isAppleDevice()?setTimeout(e.bind(t,r)):e(r)}},e.prototype.addtionalDraw=function(e,t,r,o){this.isAppleDevice()&&setTimeout((function(){try{var n=e.getImageData(r+5,o+5,3,3).data,i=!1,s="";n.forEach((function(e,t){(t+1)%4!=0?s+=e:("000"===s&&(i=!0),s="")})),i&&(v.f.emit(v.c.Error,Object(u.b)(c.d.ZegoDocsViewErrorDrawImageFail)),y.a.getInstance().error1(b.b.Addtional_draw,"isTransparent:"+i+",img:"+t))}catch(e){y.a.getInstance().error1(b.b.Addtional_draw,e)}}),500)},e.prototype.isAppleDevice=function(){var e=navigator.userAgent,t=e.includes("Mac"),r=!e.includes("Chrome")&&e.includes("Safari");return this.isTouch?t:r},e.prototype.getCDNHostList=function(){return this.fileInfo.cdn_hosts||[]},e.prototype.docsSnapshot=function(e){var t=e.ctx,r=e.snapshotId;this.renderMode===o.H5_PPT||this.renderMode===o.H5_CUSTOM?this.postMessage2iframe(i.SnapshotForH5,[r]):this.snapshotForStatic(t)},e.prototype.getH5SnapshotResult=function(e){var t=T(T({},e),{action:l.b.H5Snapshot});this.docDom.dispatchEvent(new CustomEvent(l.a.Docs,{detail:t}))},e.prototype.snapshotForStatic=function(e){var t=this.viewInfo,r=t.width,o=t.height,n=t.viewWidth,i=t.viewHeight,s=t.scrollTop,a=t.sheet,c=Math.min(r,n),u=Math.min(o,i),l=this.getCanvasInds(i,s);e.clearRect(0,0,n,i);for(var d=0,h=0;h<=l[0];)d+=this.getCanvasHeight(h++);var p=(s-d+this.vpageAspecCache[a].h[l[0]])*this.renderMaxZoom,f=c*this.renderMaxZoom,_=u*this.renderMaxZoom;if(e.drawImage(this.canvasArray[l[0]],0,p,f,_,0,0,c,u),2===l.length){var g=d-s,m=(u-g)*this.renderMaxZoom;e.drawImage(this.canvasArray[l[1]],0,0,f,m,0,g,c,u-g)}},e.prototype.getCanvasInds=function(e,t){if(this.canvasArray.length<2)return[0];for(var r=0,o=0;o<t;)o+=this.getCanvasHeight(r++);var n=r>0?r-1:0,i=t+e;for(r=0,o=0;o<i;){var s=this.getCanvasHeight(r++);if(o+=s,0===s)break}var a=r>0?r-1:0;return n===a?[n]:[n,a]},e.prototype.setSheet=function(e){"string"==typeof e?this.viewInfo.sheetName=e:"number"==typeof e&&(this.viewInfo.sheet=e)},e.prototype.resetVisibleSize=function(){if(this.docDom&&this.renderMode===o.PDF){var e=document.getElementById(this.parent),t=e.clientWidth,r=e.clientHeight,n="width:"+t+"px;height:"+r+"px;",i=this.docDom.parentElement;this.docDom.style.cssText+=n+"overflow: hidden auto;",this.renderDom.style.cssText+=n+"overflow: hidden auto;",i.style.cssText+=n+"top:"+Math.max(0,(r-this.viewInfo.height)/2)+"px;",this.drawPDFBlank(r,this.viewInfo.scrollTop),this.viewInfo.isParentScale=!0}},e.prototype.addDOMEventListener=function(e,t){this.domEventListeners||(this.domEventListeners={}),this.domEventListeners[e]=t},e.prototype.enableDOMEvent=function(e){var t=this.docDom&&this.docDom.parentElement;t&&this.renderMode===o.H5_PPT&&(t.style.cssText+="pointer-events:"+(e?"initial":"none")+";")},e.prototype.setParent=function(e){this.parent=e,this.ppth5Info.p=e},e.prototype.mergeRemoteFileInfo=function(e){this.parent?this.tranlateFileAspec(e):this.calculateFileAspecWithNoParent(e);var t=e.file_list[this.viewInfo.sheet],r=t.max_width,o=t.total_height,n=t.filePageSize;return this.viewInfo.width=r,this.viewInfo.filePageSize=n,this.viewInfo.height=o,Object.assign(this.fileInfo,e),Promise.resolve(this.getLoadFileModelForCallback())},e.prototype.getExcelSheetNameList=function(){return this.fileInfo.file_type===c.e.ZegoDocsViewFileTypeELS?this.fileInfo.file_list.map((function(e){return e.file_name})):[]},e.prototype.loadFile=function(e,t,r,o){var n,i=this;return this.PPTReady=(null==o?void 0:o.PPTReady)||!1,this.loadFileListenerMap[e]=r,this.serviceHandle.setStore(((n={})[this.parent+"_activited"]=this.id,n)),this.viewInfo.ticking=!1,this.fileInfo.file_id===e&&this.viewInfo.firstInfo.loadedFile?(setTimeout((function(){i.hideOtherDocsView(),i.loadFileCallback()})),Promise.resolve(this.getLoadFileModelForAPI(this.fileInfo))):this.serviceHandle.load(this.id,{fileID:e,authKey:t},!0).then((function(e){return i.getLoadFileModelForAPI(e)}))},e.prototype.unloadFile=function(){var e,t,r=null===(e=this.docDom)||void 0===e?void 0:e.parentElement;r&&(null===(t=r.parentElement)||void 0===t||t.removeChild(r),y.a.getInstance().info1(b.b.API_unloadFile)),this.serviceHandle.execViewFuction("unloadFile",this.id,[])},e.prototype.getContentSize=function(){var e={width:this.viewInfo.width,height:this.viewInfo.height};return y.a.getInstance().info1(b.b.API_getContentSize,{size:e}),e},e.prototype.getVisibleSize=function(){var e={width:this.viewInfo.viewWidth,height:this.viewInfo.viewHeight};return y.a.getInstance().info1(b.b.API_getVisibleSize,{size:e}),e},e.prototype.getFileID=function(){var e=this.fileInfo.file_id;return y.a.getInstance().info1(b.b.API_getFileID,{id:e}),e},e.prototype.getFileType=function(){var e=this.fileInfo.file_type;return y.a.getInstance().info1(b.b.API_getFileType,{type:e}),e},e.prototype.getCurrentPage=function(){var e=this.ppth5Info.page;return y.a.getInstance().info1(b.b.API_getCurrentPage,{page:e}),e},e.prototype.getCurrentStep=function(){var e=this.ppth5Info.step;return y.a.getInstance().info1(b.b.API_getCurrentStep,{step:e}),e},e.prototype.getPageCount=function(){var e=this.viewInfo.total;return y.a.getInstance().info1(b.b.API_getPageCount,{pageCount:e}),e},e.prototype.getPPTNotes=function(e){e=this.checkParamsPage(e);var t=this.fileInfo.notes[e-1]||"";return y.a.getInstance().info1(b.b.API_getPPTNotes,{note:t}),t},e.prototype.getThumbnailUrlList=function(){return y.a.getInstance().info1(b.b.API_getThumbnailUrlList,{thumbnails:this.fileInfo.thumbnails}),this.fileInfo.thumbnails},e.prototype.getVerticalPercent=function(){return y.a.getInstance().info1(b.b.API_getVerticalPercent,{verticalPercent:this.viewInfo.percent}),this.viewInfo.percent},e.prototype.scrollTo=function(e,t){this.ppth5Info.notify=void 0===t||!!t;var r=Math.ceil(this.viewInfo.height*e*this.zoomInfo.zoom),o=this.getPageByScrollTop(r);this.ppth5Info.page=o,this.handleScroll(r),-1!==this.viewInfo.firstInfo.scrollTop&&(this.viewInfo.firstInfo.scrollTop=r),y.a.getInstance().info1(b.b.API_scrollTo,{id:this.id,params:e,page:o,top:r})},e.prototype.flipPage=function(e,t,r){e=this.checkParamsPage(e),t="number"==typeof t?Math.max(1,0|t):1,r=void 0===r||!!r,this.ppth5Info.notify=r;var n=this.renderMode===o.H5_PPT||this.renderMode===o.H5_CUSTOM,i=n&&this.viewInfo.maxSteps[e-1];if(i&&t>i)y.a.getInstance().info1(b.b.API_flipPage,{actionMsg:"error step",params:{page:e,step:t,maxStep:i}});else if(n&&this.wbId)this.syncWhiteboardPPTH5Queue(e,t);else{n&&(this.ppth5Info.targetPage=e,this.ppth5Info.targetStep=t);var s=this.ppth5Info.loaded,a=this.serviceHandle.getStore();if(n&&(s||!s&&(e>1||t>1))){if(a.multiDocsQueue&&a.syncQueueRuning){for(var c=!0,u=this.id,l=a.multiDocsQueue.length-1;l>=0;l--){var d=a.multiDocsQueue[l];if(d.id==u&&d.args.page==e&&d.args.step==t){c=!1;break}}if(c){var h={p:this.parent,id:this.id,loaded:s,args:[e,t,r]};return a.multiDocsQueue.push(h),void y.a.getInstance().info1(b.b.H5_mdqueue_push,{task:h})}}a.syncQueueRuning=!0,a.multiDocsQueue=a.multiDocsQueue||[]}a.multiDocsQueue?this.runGotoPageQueue(e,t,r,"execMultiDocsQueue"):(-1!==this.viewInfo.firstInfo.scrollTop&&(this.viewInfo.firstInfo.scrollTop=this.getScrollTopByPage(e)),this.execGotoPage(e,t,r)),y.a.getInstance().info1(b.b.API_flipPage,{id:this.id,params:{page:e,step:t}})}},e.prototype.previousStep=function(e,t){var r=this.ppth5Info,o=r.page,n=r.step;1===o&&1===n||(e=void 0===e||!!e,this.zoomInfo.enableScroll||!e||1!==n?(this.ppth5Info.notify=e,this.postMessage2iframe(i.PreviousStep,[e]),e&&this.postWhiteboardMessage(l.b.Step,""),y.a.getInstance().info1(b.b.API_previousStep,{id:this.id,notify:e,action:t})):!this.zoomInfo.remoteScroll&&this.postWhiteboardMessage(l.b.WbError,u.a.ZegoWhiteboardViewErrorNoAuthScroll))},e.prototype.nextStep=function(e,t){var r=this.ppth5Info,o=r.page,n=r.step;e=void 0===e||!!e,this.zoomInfo.enableScroll||!e||n!==this.viewInfo.maxSteps[o-1]?(this.ppth5Info.notify=e,this.postMessage2iframe(i.NextStep,[e]),e&&this.postWhiteboardMessage(l.b.Step,""),y.a.getInstance().info1(b.b.API_nextStep,{id:this.id,notify:e,action:t})):!this.zoomInfo.remoteScroll&&this.postWhiteboardMessage(l.b.WbError,u.a.ZegoWhiteboardViewErrorNoAuthScroll)},e.prototype.switchSheet=function(e){this.getFileType()===c.e.ZegoDocsViewFileTypeELS&&this.viewInfo.sheet!==e&&e>=0&&e<this.fileInfo.file_list.length&&(this.viewInfo.sheet=e,this.vpageDrawImgCache={},this.loadCurrentSheet(!1,!0),y.a.getInstance().info1(b.b.API_switchSheet,{id:this.id,params:e}))},e.prototype.setScaleFactor=function(e,t,r){var n=e;(!n||n<1)&&(n=1),this.zoomInfo.zoom!==n&&(this.renderMode!==o.H5_PPT&&this.renderMode!==o.H5_CUSTOM||this.iframeDom)&&(this.renderMode!==o.PDF&&this.renderMode!==o.PPT||this.canvasArray[0])&&(y.a.getInstance().info1(b.b.API_setScaleFactor,{zoom:n,x:t,y:r}),this.handleSetScaleFactor(n,t||0,r||0,!0))},e.prototype.getScaleFactor=function(){return{scaleFactor:this.zoomInfo.zoom,scaleOffsetX:0,scaleOffsetY:0}},e.prototype.playAnimation=function(e){this.postMessage2iframe(i.TriggerElementsClick,[e]),y.a.getInstance().info1(b.b.API_playAnimation,{data:e})},e.prototype.stopPlay=function(e){this.postMessage2iframe(i.StopPlay,[e]),y.a.getInstance().info1(b.b.API_stopPlay,{pageNumber:e})},e.prototype.setVolume=function(e){this.postMessage2iframe(i.SetVolume,[e]),y.a.getInstance().info1(b.b.API_setVolume,{volume:e})},e.prototype.releaseCanvas=function(e){var t,r=this,o=e==c.h.All?null===(t=document.querySelector("#"+this.parent))||void 0===t?void 0:t.querySelectorAll("canvas"):this.renderDom.querySelectorAll("canvas");o&&Array.from(o).forEach((function(e){r.serviceHandle.releaseCanvas(e)}))},e.prototype.reloadView=function(e){y.a.getInstance().info1(b.b.API_reloadView,{options:e});var t=e||{forceReload:!1,reloadType:1},r=t.forceReload,n=t.reloadType;if(r||this.canReloadView()){var a=this.viewInfo.scrollLeft/this.viewInfo.width,c=this.viewInfo.scrollTop/this.viewInfo.height,u=this.zoomInfo.tx/this.viewInfo.viewWidth,l=this.zoomInfo.ty/this.viewInfo.viewHeight;this.tranlateFileAspec(this.fileInfo);var d=this.getFile();if(this.viewInfo.width=d.max_width,this.viewInfo.filePageSize=d.filePageSize,this.viewInfo.height=d.total_height,this.viewInfo.total=d.page_count,this.viewInfo.rate=d.rate,this.ppth5Info.notify=!1,this.renderMode===o.H5_PPT||this.renderMode===o.H5_CUSTOM){var h=this.vpageAspecCache[0][1],p=h.x,f=h.y,_=h.w,g=h.h;this.iframeDom.width=_,this.iframeDom.height=g,this.postSyncDragMessage(u*_|0,l*g|0),this.updateDocsViewLayout(p,f,_,g),this.setDocsViewDomOverflow(),this.getDocViewChild().style.cssText+="width:"+this.viewInfo.width+"px;height:"+this.viewInfo.height+"px;",this.reloadViewCallback();var m=this.getFile().page_list[0].width;this.ppth5Info.scale=Number((_/m).toFixed(4)),this.renderMode===o.H5_PPT&&this.postMessage2iframe(i.SetCustomizedConfig,[s.Scale,this.ppth5Info.scale])}else{if(y.a.getInstance().info1(b.b.ReloadView_safari,{safari:this.isAppleDevice(),forceReload:r}),this.isAppleDevice()&&r&&(this.releaseCanvas(n),y.a.getInstance().info1(b.b.ReleaseCanvas,"done")),this.canvasArray=[],this.vpageDrawImgCache={},this.docDom.innerHTML="",this.renderDom.innerHTML="",this.renderMode===o.PDF)this.viewInfo.ticking=!0,this.viewInfo.scrollLeft=a*this.viewInfo.width,this.viewInfo.scrollTop=c*this.viewInfo.height;else{var v=this.vpageAspecCache[0][1];_=v.w,g=v.h,this.postSyncDragMessage(u*_|0,l*g|0)}this.execScrollFileAndDraw(this.ppth5Info.page,this.reloadViewCallback)}}},e}(),I=r(181),O=r(78),k=r.n(O),R=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),A=function(){return(A=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},P=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},L=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},N=function(e){function t(t){var r,o=e.call(this)||this;o.listeners={},o.docsviews={},o.canvasMaxSize=2e6,o.canvasAmountSize=0,o.env="prod",o.requestStatus=1,o.accessConfig={appID:0,isAccesshub:!0,isTestEnv:!1,userID:"",env:"",token:""},o.existCanvasDrawLimit=!1,o.initSDK(t),o.getConnectedResult=new Promise((function(e){return P(o,void 0,void 0,(function(){var r=this;return L(this,(function(o){switch(o.label){case 0:return[4,this.initAccess(t)];case 1:return o.sent(),[4,new Promise((function(t){1===r.requestStatus?(v.f.on(v.d.AccesshubConnected,(function(){r.requestStatus=2,t(r.requestStatus)})),v.f.on(v.d.DirectConnected,(function(){r.requestStatus=3,t(r.requestStatus)}))):e(r.requestStatus)}))];case 2:return o.sent(),v.f.off(v.d.AccesshubConnected),v.f.off(v.d.DirectConnected),e(this.requestStatus),[2]}}))}))})),o.zegoDocs=new a.a(t);try{(d()||(r=navigator.userAgent.toLowerCase()).indexOf("applewebkit")>-1&&r.indexOf("mobile")>-1&&r.indexOf("safari")>-1&&-1===r.indexOf("linux")&&-1===r.indexOf("android")&&-1===r.indexOf("chrome")&&-1===r.indexOf("ios")&&-1===r.indexOf("browser"))&&(Date.now(),o.probeHasCanvasAreaLimit())}catch(e){}return o}return R(t,e),t.prototype.initSDK=function(e){var t=this;Object(y.b)(0,e,"Docs",{Docs_VER:"2.9.0"}),y.a.getInstance().initInfo({appID:e.appID,version:"2.9.0",isTestEnv:!!e.isTestEnv,isProd:!0}),y.a.getInstance().initRoomInfo({roomID:"",userID:e.userID,token:e.token,logLevel:y.a.getInstance().getLogLevel()}),this.accessConfig.env="alpha"!==this.accessConfig.env&&e.isTestEnv?"test":"prod",v.f.off(v.d.AccesshubConnected),v.f.off(v.d.DirectConnected),v.f.on(v.d.AccesshubConnected,(function(){t.requestStatus=2})),v.f.on(v.d.DirectConnected,(function(){t.requestStatus=3}))},t.prototype.initAccess=function(e){return P(this,void 0,void 0,(function(){var t,r,o,n,i,s,a;return L(this,(function(c){switch(c.label){case 0:return[4,this.getAccesshubConfig(e)];case 1:return t=c.sent(),r=e.appID,o=e.isAccesshub,n=e.isTestEnv,i=e.userID,s=e.token,this.accessConfig.appID=r,this.accessConfig.isAccesshub=o,this.accessConfig.isTestEnv=n,this.accessConfig.userID=i,this.accessConfig.token=s,t?0===(a=t.config).code?this.accessConfig.isAccesshub=a.data.initConfig.is_access_hub:(this.accessConfig.isAccesshub=!1,y.a.getInstance().error1(b.a.Cloud_setting,"query accesshub config error!, code: "+a.code)):this.accessConfig.isAccesshub=!1,[4,I.a.setAccesshubConfig(this.accessConfig)];case 2:return c.sent(),[2]}}))}))},t.prototype.getAccesshubConfig=function(e){return P(this,void 0,void 0,(function(){var t,r,o;return L(this,(function(n){switch(n.label){case 0:return t=e.appID,[4,k.a.post("https://cloud-setting-api.zego.im/cloud-setting/get",{product:"docsshare",files:["config"],appid:t,id_name:e.userID,token:e.token,mode:"online"})];case 1:if(r=n.sent(),o=r.data,y.a.getInstance().info1(b.a.GetAccesshubConfig,{res:o}),0==o.code)return[2,o.data];throw o}}))}))},t.prototype.renewToken=function(e){return this.zegoDocs.renewToken(e)},t.prototype.setLogConfig=function(e){return e.logLevel&&(this.setStore({logLevel:e.logLevel}),Object.values(this.docsviews).forEach((function(t){var r=t.getIframeDom();if(r){var o=r.contentWindow;o&&o.postMessage({logLevel:e.logLevel,source:"logLevel"},"*")}}))),y.a.getInstance().setLogConfig(e)},t.prototype.clearLog=function(){return y.a.getInstance().uploadLog()},t.prototype.setTestEnv=function(e){this.zegoDocs.setTestEnv(e),e&&(this.env="test",this.accessConfig.env="test")},t.prototype.setConfig=function(e,t){var r,o;return y.a.getInstance().info1(b.a.API_setConfig,{key:e,value:t}),["set_alpha_env","dynamicPPT_HD","dynamicPPT_AutomaticPage",c.c.Domain,c.c.ThumbnailMode].includes(e)?(o=this.zegoDocs.setConfig(e,t),"set_alpha_env"==e&&(this.env="alpha",this.accessConfig.env="alpha")):o=this.setStore(((r={})[e]=t,r)),o},t.prototype.getConfig=function(e){return e===c.c.Domain||e===c.c.ThumbnailMode?this.zegoDocs.getConfig(e):this.getStore()[e]},t.prototype.calcCanvasSize=function(e){this.canvasAmountSize=0;var t=0;for(var r in this.docsviews){var o=this.docsviews[r];if(o.getFileType()==c.e.ZegoDocsViewFileTypeIMG){var n=o.getCanvasSize();this.canvasAmountSize+=n,n>t&&(t=n)}}this.canvasMaxSize=t,this.canvasAmountSize>this.canvasMaxSize&&this.clearCanvasCache(e)},t.prototype.clearCanvasCache=function(e){for(var t in this.docsviews){var r=this.docsviews[t];if(e!==r.id&&r.getFileType()==c.e.ZegoDocsViewFileTypeIMG){var o=r.getCanvasSize();if(this.canvasAmountSize-=o,r.clearCanvasCache(),this.canvasAmountSize<this.canvasMaxSize)break}}},t.prototype.execViewFuction=function(e,t,r){if("unloadFile"===e)return this.docsviews[t].unload(),this.docsviews[t]=null,void delete this.docsviews[t];var o=this.docsviews[t];o&&o[e].apply(o,r)},t.prototype.registerEventHandler=function(e,t,r){this.listeners[t]=this.listeners[t]||{},this.listeners[t][e]=r},t.prototype.removeEventHandler=function(e){for(var t in this.listeners)this.listeners[t][e]=null},t.prototype.load=function(e,t,r){return P(this,void 0,void 0,(function(){var o=this;return L(this,(function(n){switch(n.label){case 0:return[4,this.getConnectedResult];case 1:return n.sent(),[2,this.zegoDocs.loadFile(t.fileID).then(this.resolveLoad.bind(this,e,t.fileID,r)).catch((function(){return o.zegoDocs.loadFile(t.fileID).then(o.resolveLoad.bind(o,e,t.fileID,r)).catch((function(e){throw e=e||{code:c.d.ZegoDocsViewErrorNetworkTimeout,message:"\u7f51\u7edc\u8d85\u65f6"},v.f.emit(v.c.Error,A(A({},t),e)),y.a.getInstance().error1(b.a.Load_error,{params:t,result:e}),e}))}))]}}))}))},t.prototype.cacheFile=function(e,t){return P(this,void 0,void 0,(function(){return L(this,(function(r){switch(r.label){case 0:return[4,this.getConnectedResult];case 1:return r.sent(),[2,this.zegoDocs.cacheFile(e,t)]}}))}))},t.prototype.cancelCacheFile=function(e){return this.zegoDocs.cancelCacheFile(e)},t.prototype.getPageImage=function(e,t){var r=this.listeners[n.GetPageImage][e];r&&r(this.transImage(t))},t.prototype.decryptImage=function(e){return P(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.zegoDocs.decryptImage(e)]}))}))},t.prototype.on=function(e,t){return v.f.on(e,t)},t.prototype.off=function(e,t){return v.f.off(e,t)},t.prototype.getVersion=function(){return this.zegoDocs.getVersion()},t.prototype.createView=function(e,t){var r={ID:e=(e||Date.now()+Math.floor(1e3*Math.random()))+"",sheet:t},o=this.docsviews[e];if(o)return y.a.getInstance().info1(b.a.CreateView,{actionMsg:"find in cache",params:r}),o;var n=document.getElementById("zego-whiteboard"+e);if(n=n&&n.parentElement){var i=n.id.replace(f,"");if(o=this.docsviews[i])return this.docsviews[e]=o,r.wbID=i,y.a.getInstance().info1(b.a.CreateView,{actionMsg:"find in cache on whiteboard",params:r}),o}return o=new C(this,e,t||0),this.docsviews[e]=o,y.a.getInstance().info1(b.a.CreateView,{params:r}),o},t.prototype.setDocsViewParent=function(e,t){e.setParent(t)},t.prototype.getDocsViewFileInfo=function(e,t){return P(this,void 0,void 0,(function(){return L(this,(function(r){switch(r.label){case 0:return[4,this.getConnectedResult];case 1:return r.sent(),[2,this.zegoDocs.loadFile(t).then((function(t){return e.mergeRemoteFileInfo(t)}))]}}))}))},t.prototype.uploadFile=function(e,t,r,o,n){return P(this,void 0,void 0,(function(){var i;return L(this,(function(s){return i=o&&"function"==typeof o?o:function(e){v.f.emit(v.a.Upload,Object.assign(e,r))},[2,this.zegoDocs.uploadFile({file:e,renderType:t,onProgress:i,uploadOptions:n})]}))}))},t.prototype.cancelUploadFile=function(e){return P(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.zegoDocs.cancelUploadFile({fileHash:e})]}))}))},t.prototype.uploadH5File=function(e,t,r){return P(this,void 0,void 0,(function(){return L(this,(function(o){return[2,this.zegoDocs.uploadH5File(e,t,r)]}))}))},t.prototype.resolveLoad=function(e,t,r,o){if(r&&o.file_type!==c.e.ZegoDocsViewFileTypeAudio&&o.file_type!==c.e.ZegoDocsViewFileTypeVideo){var i=this.listeners[n.Load][e];i&&setTimeout((function(){return i(o)}))}var s=A(A({},o),{preload:void 0,notes:void 0,thumbnails:void 0,file_list:void 0,file_urls:void 0});return y.a.getInstance().info1(b.a.ResolveLoad,{params:t,result:s}),o},t.prototype.transImage=function(e){var t=e.file_id,r=e.virtual_page_number,o=e.virtual_start,n=e.res,i=e.sheet,s=n.file_type===c.e.ZegoDocsViewFileTypeIMG,a=n.file_list[i].page_list[r-o-1].src;return{error_code:0,file_id:t,image_data:s?"":a,image_path:s?a:"",virtual_page_number:r}},t.prototype.probeHasCanvasAreaLimit=function(){var e=document.createElement("canvas");e.width=4101,e.height=4101;var t=e.getContext("2d");if(null==t)return this.existCanvasDrawLimit=!0;t.fillStyle="rgba(245,172,193)",t.fillRect(0,0,4101,4101);var r=t.getImageData(4097,4097,4,4),o=r[0],n=r[1],i=r[2];return this.releaseCanvas(e),this.existCanvasDrawLimit=245!==o||172!==n||193!==i,this.existCanvasDrawLimit},t.prototype.releaseCanvas=function(e){e.width=1,e.height=1;var t=e.getContext("2d");t&&t.clearRect(0,0,1,1)},t}(g)},function(e,t,r){"use strict";var o=r(6),n=r(183).left,i=r(83),s=r(84),a=r(152);o({target:"Array",proto:!0,forced:!i("reduce")||!a&&s>79&&s<83},{reduce:function(e){var t=arguments.length;return n(this,e,t,t>1?arguments[1]:void 0)}})},function(e,t,r){var o=r(380),n=r(404);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]),o(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,r){(t=r(381)(!1)).push([e.i,"[id^='zego-docsview-zoom'],\n[id^='zego-docsview-render'],\n[id^='zego-docsview-render'] > div,\n[id^='zego-docsview-con'],\n[id^='zego-docsview-con'] > div {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n/* [id^='zego-docsview-con'], */\n[id^='zego-docsview-con'] > div,\n[id^='zego-docsview-render'] > div,\n[id^='zego-docsview-iframe'] {\n  transform-origin: 0 0;\n}\n\n[id^='zego-docsview-render'] {\n  text-align: initial;\n}\n\n[id^='zego-docsview-render'] iframe {\n  border: none;\n}\n[id^='zego-docsview-render'] canvas {\n  display: block;\n  transform-origin: 0 0;\n}\n\n[id^='zego-docsview-zoom'] svg.loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -24px;\n  display: none;\n  animation: loading 2s infinite linear;\n  -webkit-animation: loading 2s infinite linear;\n  -moz-animation: loading 2s infinite linear;\n  -o-animation: loading 2s infinite linear;\n}\n@keyframes loading {\n  from {\n    transform: rotate(0deg);\n    -ms-transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes loading {\n  from {\n    -webkit-transform: rotate(0deg);\n  }\n  to {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@-moz-keyframes loading {\n  from {\n    -moz-transform: rotate(0deg);\n  }\n  to {\n    -moz-transform: rotate(360deg);\n  }\n}\n@-o-keyframes loading {\n  from {\n    -o-transform: rotate(0deg);\n  }\n  to {\n    -o-transform: rotate(360deg);\n  }\n}\n",""]),e.exports=t},function(e,t,r){"use strict";var o=r(6),n=r(31).every;o({target:"Array",proto:!0,forced:!r(83)("every")},{every:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var o=r(380),n=r(407);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]),o(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,r){(t=r(381)(!1)).push([e.i,"#zego-whiteboard-input {\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  padding: 0px;\n  border: none;\n}\n\n[id^='zego-whiteboard-zoom'] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  user-select:none;\n}\n\n[id^='zego-whiteboard-con'],\n[id^='zego-whiteboard-con'] > div {\n  transform-origin: 0 0;\n}\n\n[id^='zego-whiteboard'] {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  position: absolute;\n}\n[id^='zego-whiteboard'] *,\n[id^='zego-whiteboard'] ::after,\n[id^='zego-whiteboard'] ::before {\n  box-sizing: border-box !important;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-bg-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  display: flex;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-bgImage-container'] {\n  flex: 1;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n}\n\n[id^='zego-graphics-container'] [id^='zego-laser'] {\n  transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear;\n  -moz-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Firefox 4 */\n  -webkit-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Safari \u548c Chrome */\n  -o-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Opera */\n  -ms-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear;\n  margin-left: -8px;\n  margin-top: -8px;\n}\n\n/* [id^='zego-graphics-container'] path.transition {\n    transition: transform 0.2s linear;\n    -moz-transition: transform 0.2s linear;\n    -webkit-transition: transform 0.2s linear;\n    -o-transition: transform 0.2s linear;\n    -ms-transition: transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] line.transition {\n    transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -moz-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -webkit-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -o-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -ms-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] rect.transition {\n    transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -moz-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -webkit-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -o-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -ms-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] ellipse.transition {\n    transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -moz-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -webkit-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -o-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -ms-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n} */\n\n[id^='zego-whiteboard'] [id^='zego-box-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n}\n[id^='zego-whiteboard'] svg {\n  transform-origin: 0px 0px 0px;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n}\n[id^='zego-whiteboard'] textarea {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  border: none;\n  outline: none;\n  background: transparent;\n  resize: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  padding: 0;\n  line-height: 1;\n  font-family: inherit;\n  font-size: inherit;\n  box-sizing: border-box;\n  color: inherit;\n  font-style: inherit;\n  font-weight: inherit;\n  white-space: pre-wrap;\n  word-break: break-all;\n  overflow: hidden;\n}\n[id^='zego-whiteboard'] pre {\n  display: block;\n  visibility: hidden;\n  margin: 0px 0px;\n  font-family: inherit;\n  font-size: inherit;\n  color: inherit;\n  font-style: inherit;\n  font-weight: inherit;\n  line-height: 1;\n  padding: 0;\n  overflow: hidden;\n}\n[id^='zego-graphics-box'] {\n  position: absolute;\n}\n[id^='zego-textarea'] {\n  position: absolute;\n  border: 1px dashed transparent;\n  overflow: hidden;\n}\n[id^='zego-other-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  cursor: none;\n  overflow: hidden;\n}\n[id^='zego-other-container'] div {\n  box-sizing: border-box;\n}\n[id^='zego-laser'] {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: rgba(255, 78, 51, 1);\n  border: 2px solid rgba(255, 144, 128, 1);\n  box-shadow: 0px 0px 8px 0px rgba(254, 94, 70, 0.7);\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n[id^='zego-cursor'] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  /* cursor: none; */\n}\n\n[id^='zego-cursor'] > img {\n  user-select: none;\n  -webkit-user-drag: none;\n  /* cursor: none; */\n}\n\n[id^='zego-box-container'] .img-editor-box,\n[id^='zego-box-container'] .graphics-box {\n  display: none;\n  position: absolute;\n  overflow: visible;\n  margin: 0;\n  padding: 0;\n  z-index: 2;\n  border: 2px solid #b0b3b8;\n  box-shadow: 0 0 1px 0 #ffffff, inset 0 0 1px 0 #ffffff;\n  transform-origin: 0px 0px 0px;\n  transition: border 0.3s;\n  -moz-transition: border 0.3s; /* Firefox 4 */\n  -webkit-transition: border 0.3s; /* Safari \u548c Chrome */\n  -o-transition: border 0.3s; /* Opera */\n}\n\n[id^='zego-box-container'] .operation-point-desktop {\n  width: 12px;\n  height: 12px;\n  position: absolute;\n  background-color: #ffffff;\n  border: 2px solid #b0b3b8;\n}\n[id^='zego-box-container'] .operation-point-desktop:active,\n[id^='zego-box-container'] .operation-point-desktop:hover {\n  transform: scale(1.5);\n  border: 2px solid #eb98c7;\n}\n\n[id^='zego-box-container'] .operation-point-desktop.left-top {\n  left: -6px;\n  top: -6px;\n  cursor: nwse-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right-top {\n  right: -6px;\n  top: -6px;\n  cursor: nesw-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.left-bottom {\n  left: -6px;\n  bottom: -6px;\n  cursor: nesw-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right-bottom {\n  right: -6px;\n  bottom: -6px;\n  cursor: nwse-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.top {\n  top: -6px;\n  cursor: ns-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right {\n  right: -6px;\n  cursor: ew-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.bottom {\n  bottom: -6px;\n  cursor: ns-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.left {\n  left: -6px;\n  cursor: ew-resize;\n}\n",""]),e.exports=t},function(e,t,r){var o=r(6),n=r(409);o({global:!0,forced:parseInt!=n},{parseInt:n})},function(e,t,r){var o=r(11),n=r(8),i=r(7),s=r(23),a=r(248).trim,c=r(249),u=o.parseInt,l=o.Symbol,d=l&&l.iterator,h=/^[+-]?0x/i,p=i(h.exec),f=8!==u(c+"08")||22!==u(c+"0x16")||d&&!n((function(){u(Object(d))}));e.exports=f?function(e,t){var r=a(s(e));return u(r,t>>>0||(p(h,r)?16:10))}:u},function(e,t,r){var o=r(6),n=r(411);o({global:!0,forced:parseFloat!=n},{parseFloat:n})},function(e,t,r){var o=r(11),n=r(8),i=r(7),s=r(23),a=r(248).trim,c=r(249),u=i("".charAt),l=o.parseFloat,d=o.Symbol,h=d&&d.iterator,p=1/l(c+"-0")!=-1/0||h&&!n((function(){l(Object(h))}));e.exports=p?function(e){var t=a(s(e)),r=l(t);return 0===r&&"-"==u(t,0)?-0:r}:l},function(e,t,r){"use strict";var o=r(6),n=r(295).start;o({target:"String",proto:!0,forced:r(413)},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var o=r(65);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},function(e,t,r){"use strict";var o=t;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=r(396),o.BufferWriter=r(416),o.Reader=r(397),o.BufferReader=r(417),o.util=r(188),o.rpc=r(418),o.roots=r(420),o.configure=n,n()},function(e,t,r){"use strict";e.exports=n;var o=r(188);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===s?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=i;var o=r(396);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(188);function i(){o.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,r){"use strict";e.exports=i;var o=r(397);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(188);function i(e){o.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,r){"use strict";t.Service=r(419)},function(e,t,r){"use strict";e.exports=n;var o=r(188);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return o.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},,function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},function(e,t,r){var o,n,i,s,a;o=r(434),n=r(422).utf8,i=r(435),s=r(422).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):n.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=o.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,h=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var f=a._ff,_=a._gg,g=a._hh,m=a._ii;for(p=0;p<r.length;p+=16){var v=u,y=l,b=d,S=h;u=f(u,l,d,h,r[p+0],7,-680876936),h=f(h,u,l,d,r[p+1],12,-389564586),d=f(d,h,u,l,r[p+2],17,606105819),l=f(l,d,h,u,r[p+3],22,-1044525330),u=f(u,l,d,h,r[p+4],7,-176418897),h=f(h,u,l,d,r[p+5],12,1200080426),d=f(d,h,u,l,r[p+6],17,-1473231341),l=f(l,d,h,u,r[p+7],22,-45705983),u=f(u,l,d,h,r[p+8],7,1770035416),h=f(h,u,l,d,r[p+9],12,-1958414417),d=f(d,h,u,l,r[p+10],17,-42063),l=f(l,d,h,u,r[p+11],22,-1990404162),u=f(u,l,d,h,r[p+12],7,1804603682),h=f(h,u,l,d,r[p+13],12,-40341101),d=f(d,h,u,l,r[p+14],17,-1502002290),u=_(u,l=f(l,d,h,u,r[p+15],22,1236535329),d,h,r[p+1],5,-165796510),h=_(h,u,l,d,r[p+6],9,-1069501632),d=_(d,h,u,l,r[p+11],14,643717713),l=_(l,d,h,u,r[p+0],20,-373897302),u=_(u,l,d,h,r[p+5],5,-701558691),h=_(h,u,l,d,r[p+10],9,38016083),d=_(d,h,u,l,r[p+15],14,-660478335),l=_(l,d,h,u,r[p+4],20,-405537848),u=_(u,l,d,h,r[p+9],5,568446438),h=_(h,u,l,d,r[p+14],9,-1019803690),d=_(d,h,u,l,r[p+3],14,-187363961),l=_(l,d,h,u,r[p+8],20,1163531501),u=_(u,l,d,h,r[p+13],5,-1444681467),h=_(h,u,l,d,r[p+2],9,-51403784),d=_(d,h,u,l,r[p+7],14,1735328473),u=g(u,l=_(l,d,h,u,r[p+12],20,-1926607734),d,h,r[p+5],4,-378558),h=g(h,u,l,d,r[p+8],11,-2022574463),d=g(d,h,u,l,r[p+11],16,1839030562),l=g(l,d,h,u,r[p+14],23,-35309556),u=g(u,l,d,h,r[p+1],4,-1530992060),h=g(h,u,l,d,r[p+4],11,1272893353),d=g(d,h,u,l,r[p+7],16,-155497632),l=g(l,d,h,u,r[p+10],23,-1094730640),u=g(u,l,d,h,r[p+13],4,681279174),h=g(h,u,l,d,r[p+0],11,-358537222),d=g(d,h,u,l,r[p+3],16,-722521979),l=g(l,d,h,u,r[p+6],23,76029189),u=g(u,l,d,h,r[p+9],4,-640364487),h=g(h,u,l,d,r[p+12],11,-421815835),d=g(d,h,u,l,r[p+15],16,530742520),u=m(u,l=g(l,d,h,u,r[p+2],23,-995338651),d,h,r[p+0],6,-198630844),h=m(h,u,l,d,r[p+7],10,1126891415),d=m(d,h,u,l,r[p+14],15,-1416354905),l=m(l,d,h,u,r[p+5],21,-57434055),u=m(u,l,d,h,r[p+12],6,1700485571),h=m(h,u,l,d,r[p+3],10,-1894986606),d=m(d,h,u,l,r[p+10],15,-1051523),l=m(l,d,h,u,r[p+1],21,-2054922799),u=m(u,l,d,h,r[p+8],6,1873313359),h=m(h,u,l,d,r[p+15],10,-30611744),d=m(d,h,u,l,r[p+6],15,-1560198380),l=m(l,d,h,u,r[p+13],21,1309151649),u=m(u,l,d,h,r[p+4],6,-145523070),h=m(h,u,l,d,r[p+11],10,-1120210379),d=m(d,h,u,l,r[p+2],15,718787259),l=m(l,d,h,u,r[p+9],21,-343485551),u=u+v>>>0,l=l+y>>>0,d=d+b>>>0,h=h+S>>>0}return o.endian([u,l,d,h])})._ff=function(e,t,r,o,n,i,s){var a=e+(t&r|~t&o)+(n>>>0)+s;return(a<<i|a>>>32-i)+t},a._gg=function(e,t,r,o,n,i,s){var a=e+(t&o|r&~o)+(n>>>0)+s;return(a<<i|a>>>32-i)+t},a._hh=function(e,t,r,o,n,i,s){var a=e+(t^r^o)+(n>>>0)+s;return(a<<i|a>>>32-i)+t},a._ii=function(e,t,r,o,n,i,s){var a=e+(r^(t|~o))+(n>>>0)+s;return(a<<i|a>>>32-i)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=o.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):o.bytesToHex(r)}},,,,,,,,,,function(e,t,r){r(6)({target:"Number",stat:!0},{isInteger:r(214)})},function(e,t){var r,o;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&o.rotl(e,8)|4278255360&o.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=o.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,o=0;r<e.length;r++,o+=8)t[o>>>5]|=e[r]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],o=0;o<e.length;o+=3)for(var n=e[o]<<16|e[o+1]<<8|e[o+2],i=0;i<4;i++)8*o+6*i<=8*e.length?t.push(r.charAt(n>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],o=0,n=0;o<e.length;n=++o%4)0!=n&&t.push((r.indexOf(e.charAt(o-1))&Math.pow(2,-2*n+8)-1)<<2*n|r.indexOf(e.charAt(o))>>>6-2*n);return t}},e.exports=o},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";r.r(t),r.d(t,"ZegoSuperBoardManager",(function(){return Z})),r(39),r(25),r(47),r(60),r(61),r(62),r(36),r(46),r(53),r(433),r(94),r(167),r(168),r(250),r(106),r(184),r(77),r(123),r(49),r(50),r(124),r(402);var o,n,i,s,a,c,u,l,d,h,p,f,_=r(400),g=r(399),m=r(401),v=r(1),y=r(2),b=r(4),S=r(54),E=r(3),T=(r(67),r(423)),w=r.n(T),C=r(9);!function(e){e[e.CURRENT=1]="CURRENT",e[e.ALL=2]="ALL"}(o||(o={})),function(e){e[e.None=0]="None",e[e.Pen=1]="Pen",e[e.Text=2]="Text",e[e.Line=4]="Line",e[e.Rect=8]="Rect",e[e.Ellipse=16]="Ellipse",e[e.Selector=32]="Selector",e[e.Eraser=64]="Eraser",e[e.Laser=128]="Laser",e[e.Click=256]="Click",e[e.CustomImage=512]="CustomImage"}(n||(n={})),function(e){e[e.None=1]="None",e[e.Draw=2]="Draw",e[e.Scroll=4]="Scroll",e[e.Zoom=8]="Zoom"}(i||(i={})),function(e){e[e.Graphic=0]="Graphic",e[e.Custom=1]="Custom"}(s||(s={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Bottom=2]="Bottom",e[e.Top=3]="Top",e[e.Center=4]="Center"}(a||(a={})),function(e){e.DisableH5ImageDrag="disableH5ImageDrag",e.PptStepMode="pptStepMode",e.Domain="domain",e.ThumbnailMode="thumbnailMode",e.DisableH5Mouse="disableH5Mouse"}(c||(c={})),function(e){e[e.Unknown=0]="Unknown",e[e.PPT=1]="PPT",e[e.DOC=2]="DOC",e[e.ELS=4]="ELS",e[e.PDF=8]="PDF",e[e.IMG=16]="IMG",e[e.TXT=32]="TXT",e[e.DynamicPPTH5=512]="DynamicPPTH5",e[e.CustomH5=4096]="CustomH5"}(u||(u={})),function(e){e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.WAITING=4]="WAITING",e[e.CONVERTING=8]="CONVERTING",e[e.CONVERTED=16]="CONVERTED",e[e.CONVERTFAIL=32]="CONVERTFAIL",e[e.CONVERTCANCEL=64]="CONVERTCANCEL"}(l||(l={})),function(e){e[e.Vector=1]="Vector",e[e.IMG=2]="IMG",e[e.VectorAndIMG=3]="VectorAndIMG",e[e.DynamicPPTH5=6]="DynamicPPTH5",e[e.CustomH5=7]="CustomH5"}(d||(d={})),function(e){e[e.ZegoSuperBoardSuccess=0]="ZegoSuperBoardSuccess",e[e.ZegoSuperBoardErrorInternal=3100001]="ZegoSuperBoardErrorInternal",e[e.ZegoSuperBoardErrorParamInvalid=3100002]="ZegoSuperBoardErrorParamInvalid",e[e.ZegoSuperBoardErrorNetworkTimeout=3100003]="ZegoSuperBoardErrorNetworkTimeout",e[e.ZegoSuperBoardErrorNetworkDisconnect=3100004]="ZegoSuperBoardErrorNetworkDisconnect",e[e.ZegoSuperBoardErrorResponse=3100005]="ZegoSuperBoardErrorResponse",e[e.ZegoSuperBoardErrorRequestTooFrequent=3100006]="ZegoSuperBoardErrorRequestTooFrequent",e[e.ZegoSuperBoardErrorVersionMismatch=3100007]="ZegoSuperBoardErrorVersionMismatch",e[e.ZegoSuperBoardErrorLogFolderNotAccess=3140010]="ZegoSuperBoardErrorLogFolderNotAccess",e[e.ZegoSuperBoardErrorCacheFolderNotAccess=3140011]="ZegoSuperBoardErrorCacheFolderNotAccess",e[e.ZegoSuperBoardErrorNoLoginRoom=3110001]="ZegoSuperBoardErrorNoLoginRoom",e[e.ZegoSuperBoardErrorUserNotExist=3110002]="ZegoSuperBoardErrorUserNotExist",e[e.ZegoSuperBoardErrorViewNotExist=3120001]="ZegoSuperBoardErrorViewNotExist",e[e.ZegoSuperBoardErrorViewCreateFail=3120002]="ZegoSuperBoardErrorViewCreateFail",e[e.ZegoSuperBoardErrorViewModifyFail=3120003]="ZegoSuperBoardErrorViewModifyFail",e[e.ZegoSuperBoardErrorViewNameLimit=3120004]="ZegoSuperBoardErrorViewNameLimit",e[e.ZegoSuperBoardErrorViewParentNotExist=3120005]="ZegoSuperBoardErrorViewParentNotExist",e[e.ZegoSuperBoardErrorViewNumLimit=3120006]="ZegoSuperBoardErrorViewNumLimit",e[e.ZegoSuperBoardErrorAnimationInfoLimit=3120007]="ZegoSuperBoardErrorAnimationInfoLimit",e[e.ZegoSuperBoardErrorGraphicNotExist=3130001]="ZegoSuperBoardErrorGraphicNotExist",e[e.ZegoSuperBoardErrorGraphicCreateFail=3130002]="ZegoSuperBoardErrorGraphicCreateFail",e[e.ZegoSuperBoardErrorGraphicModifyFail=3130003]="ZegoSuperBoardErrorGraphicModifyFail",e[e.ZegoSuperBoardErrorGraphicUnableDraw=3130004]="ZegoSuperBoardErrorGraphicUnableDraw",e[e.ZegoSuperBoardErrorGraphicDataLimit=3130005]="ZegoSuperBoardErrorGraphicDataLimit",e[e.ZegoSuperBoardErrorGraphicNumLimit=3130006]="ZegoSuperBoardErrorGraphicNumLimit",e[e.ZegoSuperBoardErrorGraphicTextLimit=3130007]="ZegoSuperBoardErrorGraphicTextLimit",e[e.ZegoSuperBoardErrorGraphicImageSizeLimit=3130008]="ZegoSuperBoardErrorGraphicImageSizeLimit",e[e.ZegoSuperBoardErrorGraphicImageTypeNotSupport=3130009]="ZegoSuperBoardErrorGraphicImageTypeNotSupport",e[e.ZegoSuperBoardErrorGraphicIllegalAddress=3130010]="ZegoSuperBoardErrorGraphicIllegalAddress",e[e.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit=3130011]="ZegoWhiteboardViewErrorGraphicCursorOffsetLimit",e[e.ZegoSuperBoardErrorInitFail=3140001]="ZegoSuperBoardErrorInitFail",e[e.ZegoSuperBoardErrorGetListFail=3140002]="ZegoSuperBoardErrorGetListFail",e[e.ZegoSuperBoardErrorCreateFail=3140003]="ZegoSuperBoardErrorCreateFail",e[e.ZegoSuperBoardErrorDestroyFail=3140004]="ZegoSuperBoardErrorDestroyFail",e[e.ZegoSuperBoardErrorAttachFail=3140005]="ZegoSuperBoardErrorAttachFail",e[e.ZegoSuperBoardErrorClearFail=3140006]="ZegoSuperBoardErrorClearFail",e[e.ZegoSuperBoardErrorScrollFail=3140007]="ZegoSuperBoardErrorScrollFail",e[e.ZegoSuperBoardErrorUndoFail=3140008]="ZegoSuperBoardErrorUndoFail",e[e.ZegoSuperBoardErrorRedoFail=3140009]="ZegoSuperBoardErrorRedoFail",e[e.ZegoSuperBoardErrorSwitchFail=3140012]="ZegoSuperBoardErrorSwitchFail",e[e.ZegoSuperBoardErrorNoAuthScale=3150001]="ZegoSuperBoardErrorNoAuthScale",e[e.ZegoSuperBoardErrorNoAuthScroll=3150002]="ZegoSuperBoardErrorNoAuthScroll",e[e.ZegoSuperBoardErrorNoAuthCreateGraphic=3150003]="ZegoSuperBoardErrorNoAuthCreateGraphic",e[e.ZegoSuperBoardErrorNoAuthUpdateGraphic=3150004]="ZegoSuperBoardErrorNoAuthUpdateGraphic",e[e.ZegoSuperBoardErrorNoAuthMoveGraphic=3150005]="ZegoSuperBoardErrorNoAuthMoveGraphic",e[e.ZegoSuperBoardErrorNoAuthDeleteGraphic=3150006]="ZegoSuperBoardErrorNoAuthDeleteGraphic",e[e.ZegoSuperBoardErrorNoAuthClearGraphic=3150007]="ZegoSuperBoardErrorNoAuthClearGraphic",e[e.ZegoSuperBoardErrorDocParamInvalid=3100002]="ZegoSuperBoardErrorDocParamInvalid",e[e.ZegoSuperBoardErrorFileNotExist=3111001]="ZegoSuperBoardErrorFileNotExist",e[e.ZegoSuperBoardErrorUploadFailed=3111002]="ZegoSuperBoardErrorUploadFailed",e[e.ZegoSuperBoardErrorUnsupportRenderType=3111003]="ZegoSuperBoardErrorUnsupportRenderType",e[e.ZegoSuperBoardErrorFileEncrypt=3121001]="ZegoSuperBoardErrorFileEncrypt",e[e.ZegoSuperBoardErrorFileSizeLimit=3121002]="ZegoSuperBoardErrorFileSizeLimit",e[e.ZegoSuperBoardErrorFileSheetLimit=3121003]="ZegoSuperBoardErrorFileSheetLimit",e[e.ZegoSuperBoardErrorConvertFail=3121004]="ZegoSuperBoardErrorConvertFail",e[e.ZegoSuperBoardErrorConvertCancel=3121005]="ZegoSuperBoardErrorConvertCancel",e[e.ZegoSuperBoardErrorFileContentEmpty=3121006]="ZegoSuperBoardErrorFileContentEmpty",e[e.ZegoSuperBoardErrorFileReadOnly=3121007]="ZegoSuperBoardErrorFileReadOnly",e[e.ZegoSuperBoardErrorConvertElementNotSupported=3121008]="ZegoSuperBoardErrorConvertElementNotSupported",e[e.ZegoSuperBoardErrorConvertFileTypeInvalid=3121009]="ZegoSuperBoardErrorConvertFileTypeInvalid",e[e.ZegoSuperBoardErrorFileCorruption=3131018]="ZegoSuperBoardErrorFileCorruption",e[e.ZegoSuperBoardErrorFileContentIncomplete=3131019]="ZegoSuperBoardErrorFileContentIncomplete",e[e.ZegoSuperBoardErrorAuthParamInvalid=3131001]="ZegoSuperBoardErrorAuthParamInvalid",e[e.ZegoSuperBoardErrorFilePathNotAccess=3131002]="ZegoSuperBoardErrorFilePathNotAccess",e[e.ZegoSuperBoardErrorInitFailed=3131003]="ZegoSuperBoardErrorInitFailed",e[e.ZegoSuperBoardErrorSizeInvalid=3131004]="ZegoSuperBoardErrorSizeInvalid",e[e.ZegoSuperBoardErrorFreeSpaceLimit=3131005]="ZegoSuperBoardErrorFreeSpaceLimit",e[e.ZegoSuperBoardErrorUploadNotSupported=3131006]="ZegoSuperBoardErrorUploadNotSupported",e[e.ZegoSuperBoardErrorUploadDuplicated=3131007]="ZegoSuperBoardErrorUploadDuplicated",e[e.ZegoSuperBoardErrorEmptyDomain=3131008]="ZegoSuperBoardErrorEmptyDomain",e[e.ZegoSuperBoardErrorDuplicateInit=3131009]="ZegoSuperBoardErrorDuplicateInit",e[e.ZegoSuperBoardErrorServerFileNotExist=3131010]="ZegoSuperBoardErrorServerFileNotExist",e[e.ZegoSuperBoardErrorDocLogFolderNotAccess=3131011]="ZegoSuperBoardErrorDocLogFolderNotAccess",e[e.ZegoSuperBoardErrorDocCacheFolderNotAccess=3131012]="ZegoSuperBoardErrorDocCacheFolderNotAccess",e[e.ZegoSuperBoardErrorDocDataFolderNotAccess=3131013]="ZegoSuperBoardErrorDocDataFolderNotAccess",e[e.ZegoSuperBoardErrorCacheNotSupported=3131014]="ZegoSuperBoardErrorCacheNotSupported",e[e.ZegoSuperBoardErrorCacheFailed=3131015]="ZegoSuperBoardErrorCacheFailed",e[e.ZegoSuperBoardErrorZipFileInvalid=3131016]="ZegoSuperBoardErrorZipFileInvalid",e[e.ZegoSuperBoardErrorH5FileInvalid=3131017]="ZegoSuperBoardErrorH5FileInvalid",e[e.ZegoBridgeErrorNotReady=3112001]="ZegoBridgeErrorNotReady",e[e.ZegoBridgeErrorParamInvalid=3112002]="ZegoBridgeErrorParamInvalid",e[e.ZegoBridgeErrorRecordListLimit=3112003]="ZegoBridgeErrorRecordListLimit",e[e.ZegoBridgeErrorH5=3112006]="ZegoBridgeErrorH5",e[e.ZegoSuperBoardErrorConvertFileUnsafe=3121010]="ZegoSuperBoardErrorConvertFileUnsafe",e[e.ZegoSuperBoardErrorConvertElementNotExported=3121011]="ZegoSuperBoardErrorConvertElementNotExported",e[e.ZegoSuperBoardErrorRequestFailure=3100009]="ZegoSuperBoardErrorRequestFailure",e[e.ZegoSuperBoardErrorWhiteboardTokenInvalid=3100010]="ZegoSuperBoardErrorWhiteboardTokenInvalid",e[e.ZegoSuperBoardErrorDocsTokenInvalid=3100011]="ZegoSuperBoardErrorDocsTokenInvalid",e[e.ZegoSuperBoardErrorGetContextFail=3130021]="ZegoSuperBoardErrorGetContextFail",e[e.ZegoSuperBoardErrorDrawImageFail=3130022]="ZegoSuperBoardErrorDrawImageFail",e[e.ZegoSuperBoardErrorSwitchSpeakerFail=3130023]="ZegoSuperBoardErrorSwitchSpeakerFail"}(h||(h={})),function(e){e[e.PNG=1]="PNG",e[e.SVG=2]="SVG"}(p||(p={})),function(e){e[e.Caching=1]="Caching",e[e.Cached=2]="Cached"}(f||(f={}));var I,O,k=r(35),R=((I={})[h.ZegoSuperBoardErrorInternal]="\u5185\u90e8\u9519\u8bef",I[h.ZegoSuperBoardErrorParamInvalid]="\u53c2\u6570\u9519\u8bef",I[h.ZegoSuperBoardErrorNetworkTimeout]="\u7f51\u7edc\u8d85\u65f6",I[h.ZegoSuperBoardErrorNetworkDisconnect]="\u7f51\u7edc\u65ad\u5f00",I[h.ZegoSuperBoardErrorResponse]="\u7f51\u7edc\u56de\u5305\u9519\u8bef",I[h.ZegoSuperBoardErrorRequestTooFrequent]="\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41",I[h.ZegoSuperBoardErrorNoLoginRoom]="\u672a\u767b\u5f55\u623f\u95f4",I[h.ZegoSuperBoardErrorUserNotExist]="\u7528\u6237\u4e0d\u5b58\u5728",I[h.ZegoSuperBoardErrorViewNotExist]="\u767d\u677fview\u4e0d\u5b58\u5728",I[h.ZegoSuperBoardErrorViewCreateFail]="\u521b\u5efa\u767d\u677fview\u5931\u8d25",I[h.ZegoSuperBoardErrorViewModifyFail]="\u4fee\u6539\u767d\u677fview\u5931\u8d25",I[h.ZegoSuperBoardErrorViewNameLimit]="\u767d\u677fview\u540d\u79f0\u6216\u8005content\u8fc7\u957f",I[h.ZegoSuperBoardErrorViewParentNotExist]="\u767d\u677fview\u7684parent\u4e0d\u5b58\u5728",I[h.ZegoSuperBoardErrorViewNumLimit]="\u8d85\u8fc7\u767d\u677f\u6700\u5927\u6570\u91cf\u9650\u5236",I[h.ZegoSuperBoardErrorGraphicNotExist]="\u56fe\u5143\u4e0d\u5b58\u5728",I[h.ZegoSuperBoardErrorGraphicCreateFail]="\u521b\u5efa\u56fe\u5143\u9519\u8bef",I[h.ZegoSuperBoardErrorGraphicModifyFail]="\u4fee\u6539\u56fe\u5143\u9519\u8bef",I[h.ZegoSuperBoardErrorGraphicUnableDraw]="\u672a\u5f00\u542f\u7ed8\u5236",I[h.ZegoSuperBoardErrorGraphicDataLimit]="\u56fe\u5143\u6570\u636e\u5927\u5c0f\u8d85\u8fc7\u9650\u5236",I[h.ZegoSuperBoardErrorGraphicNumLimit]="\u8d85\u8fc7\u56fe\u5143\u6700\u5927\u6570\u91cf\u9650\u5236",I[h.ZegoSuperBoardErrorGraphicTextLimit]="\u6587\u672c\u5b57\u6570\u8d85\u8fc7\u4e0a\u9650",I[h.ZegoSuperBoardErrorGraphicImageSizeLimit]="\u56fe\u7247\u56fe\u5143\u5927\u5c0f\u8d85\u9650\u5236",I[h.ZegoSuperBoardErrorGraphicImageTypeNotSupport]="\u4e0d\u652f\u6301\u7684\u56fe\u7247\u7c7b\u578b",I[h.ZegoSuperBoardErrorGraphicIllegalAddress]="\u65e0\u6548\u56fe\u7247\u5730\u5740",I[h.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit]="\u5149\u6807\u8bbe\u7f6e\u504f\u79fb\u503c\u8d85\u51fa\u9650\u5236",I[h.ZegoSuperBoardErrorInitFail]="\u521d\u59cb\u5316\u5931\u8d25",I[h.ZegoSuperBoardErrorGetListFail]="\u62c9\u53d6\u767d\u677fview\u5217\u8868\u5931\u8d25",I[h.ZegoSuperBoardErrorCreateFail]="\u521b\u5efa\u767d\u677fview\u5931\u8d25",I[h.ZegoSuperBoardErrorDestroyFail]="\u9500\u6bc1\u767d\u677fview\u5931\u8d25",I[h.ZegoSuperBoardErrorAttachFail]="attach\u767d\u677fview\u5931\u8d25",I[h.ZegoSuperBoardErrorClearFail]="\u6e05\u7a7a\u767d\u677fview\u5931\u8d25",I[h.ZegoSuperBoardErrorScrollFail]="\u6eda\u52a8\u767d\u677fview\u5931\u8d25",I[h.ZegoSuperBoardErrorUndoFail]="\u64a4\u9500\u64cd\u4f5c\u5931\u8d25",I[h.ZegoSuperBoardErrorRedoFail]="\u91cd\u505a\u64cd\u4f5c\u5931\u8d25",I[h.ZegoSuperBoardErrorNoAuthScale]="\u65e0\u767d\u677f\u7f29\u653e\u6743\u9650",I[h.ZegoSuperBoardErrorNoAuthScroll]="\u65e0\u767d\u677f\u6eda\u52a8\u6743\u9650",I[h.ZegoSuperBoardErrorNoAuthCreateGraphic]="\u65e0\u56fe\u5143\u521b\u5efa\u6743\u9650",I[h.ZegoSuperBoardErrorNoAuthUpdateGraphic]="\u65e0\u56fe\u5143\u7f16\u8f91\u6743\u9650",I[h.ZegoSuperBoardErrorNoAuthMoveGraphic]="\u65e0\u56fe\u5143\u79fb\u52a8\u6743\u9650",I[h.ZegoSuperBoardErrorNoAuthDeleteGraphic]="\u65e0\u56fe\u5143\u5220\u9664\u6743\u9650",I[h.ZegoSuperBoardErrorNoAuthClearGraphic]="\u65e0\u767d\u677f\u6e05\u7a7a\u6743\u9650",I[h.ZegoSuperBoardErrorAnimationInfoLimit]="\u52a8\u753b\u4fe1\u606f\u8fc7\u957f",I[h.ZegoSuperBoardErrorFileNotExist]="\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u672c\u5730\u6587\u4ef6",I[h.ZegoSuperBoardErrorUploadFailed]="\u4e0a\u4f20\u5931\u8d25",I[h.ZegoSuperBoardErrorUnsupportRenderType]="\u4e0d\u652f\u6301\u6e32\u67d3\u6a21\u5f0f",I[h.ZegoSuperBoardErrorFileEncrypt]="\u9700\u8981\u8f6c\u7801\u7684\u6587\u4ef6\u88ab\u52a0\u5bc6",I[h.ZegoSuperBoardErrorFileSizeLimit]="\u6587\u4ef6\u5185\u5bb9\u8fc7\u5927",I[h.ZegoSuperBoardErrorFileSheetLimit]="\u6587\u4ef6\u9875\u6570\u8fc7\u591a",I[h.ZegoSuperBoardErrorConvertFail]="\u683c\u5f0f\u8f6c\u6362\u5931\u8d25",I[h.ZegoSuperBoardErrorConvertCancel]="\u683c\u5f0f\u8f6c\u6362\u88ab\u53d6\u6d88",I[h.ZegoSuperBoardErrorFileContentEmpty]="\u6587\u4ef6\u5185\u5bb9\u4e3a\u7a7a",I[h.ZegoSuperBoardErrorFileReadOnly]="\u6587\u4ef6\u4e3a\u53ea\u8bfb\u6a21\u5f0f",I[h.ZegoSuperBoardErrorConvertElementNotSupported]="\t\u6e90\u6587\u4ef6\u4e2d\u5b58\u5728\u4e0d\u652f\u6301\u8f6c\u7801\u7684\u5143\u7d20",I[h.ZegoSuperBoardErrorConvertFileTypeInvalid]="\u6587\u4ef6\u540e\u7f00\u540d\u4e0d\u7b26\u5408 ZEGO \u5b9a\u4e49\u7684\u6587\u4ef6\u89c4\u8303",I[h.ZegoSuperBoardErrorFileCorruption]="\u6587\u4ef6\u635f\u574f",I[h.ZegoSuperBoardErrorFileContentIncomplete]="\u6587\u4ef6\u5185\u5bb9\u4e0d\u5b8c\u6574",I[h.ZegoSuperBoardErrorAuthParamInvalid]="\u8ba4\u8bc1\u53c2\u6570\u9519\u8bef",I[h.ZegoSuperBoardErrorInitFailed]="\u521d\u59cb\u5316\u5931\u8d25",I[h.ZegoSuperBoardErrorFreeSpaceLimit]="\u672c\u5730\u7a7a\u95f4\u4e0d\u8db3",I[h.ZegoSuperBoardErrorUploadNotSupported]="\u4e0d\u652f\u6301\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd",I[h.ZegoSuperBoardErrorUploadDuplicated]="\u6b63\u5728\u4e0a\u4f20\u76f8\u540c\u6587\u4ef6",I[h.ZegoSuperBoardErrorEmptyDomain]="\u7a7a\u57df\u540d",I[h.ZegoSuperBoardErrorSizeInvalid]="\u65e0\u6cd5\u83b7\u53d6\u5f53\u524d view \u5bbd\u9ad8",I[h.ZegoSuperBoardErrorServerFileNotExist]="\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u8f6c\u7801\u540e\u6587\u4ef6",I[h.ZegoSuperBoardErrorCacheNotSupported]="\u4e0d\u652f\u6301\u9884\u52a0\u8f7d\u8be5\u6587\u4ef6",I[h.ZegoSuperBoardErrorCacheFailed]="\u9884\u52a0\u8f7d\u5931\u8d25",I[h.ZegoSuperBoardErrorZipFileInvalid]="\u65e0\u6548\u7684 ZIP \u6587\u4ef6",I[h.ZegoSuperBoardErrorH5FileInvalid]="\u65e0\u6548\u7684 H5 \u6587\u4ef6",I[h.ZegoSuperBoardErrorConvertFileUnsafe]="\u6e90\u6587\u4ef6\u4e2d\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff0c\u65e0\u6cd5\u6b63\u5e38\u6253\u5f00",I[h.ZegoSuperBoardErrorConvertElementNotExported]="\u8f6c\u7801\u7ed3\u675f\u540e\u5b58\u5728\u56fe\u7247\u3001\u97f3\u89c6\u9891\u6587\u4ef6\u672a\u6b63\u5e38\u5bfc\u51fa",I[h.ZegoSuperBoardErrorInternal]="\u5185\u90e8\u9519\u8bef",I[h.ZegoSuperBoardErrorNetworkTimeout]="\u7f51\u7edc\u8d85\u65f6",I[h.ZegoSuperBoardErrorDuplicateInit]="\u5df2\u521d\u59cb\u5316",I[h.ZegoSuperBoardErrorRequestFailure]="\u8bf7\u6c42\u5931\u8d25",I[h.ZegoSuperBoardErrorGetContextFail]="Get canvas context Fail",I[h.ZegoSuperBoardErrorDrawImageFail]="Cavnas DrawImage Fail",I[h.ZegoBridgeErrorNotReady]="H5 \u6ca1\u6709\u8c03\u7528 getReady",I[h.ZegoBridgeErrorParamInvalid]="\u53c2\u6570\u9519\u8bef",I[h.ZegoBridgeErrorRecordListLimit]="recordList \u5b57\u8282\u957f\u5ea6\u8d85\u8fc7\u9650\u5236",I[h.ZegoBridgeErrorH5]="H5 \u5185\u90e8\u4ee3\u7801\u6267\u884c\u51fa\u9519",I),A=((O={})[k.b.ZegoWhiteboardViewErrorInternal]=h.ZegoSuperBoardErrorInternal,O[k.b.ZegoWhiteboardViewErrorParamInvalid]=h.ZegoSuperBoardErrorParamInvalid,O[k.b.ZegoWhiteboardViewErrorNetworkTimeout]=h.ZegoSuperBoardErrorNetworkTimeout,O[k.b.ZegoWhiteboardViewErrorNetworkDisconnect]=h.ZegoSuperBoardErrorNetworkDisconnect,O[k.b.ZegoWhiteboardViewErrorInvalidRsp]=h.ZegoSuperBoardErrorResponse,O[k.b.ZegoWhiteboardViewErrorRequestTooMany]=h.ZegoSuperBoardErrorRequestTooFrequent,O[k.b.ZegoWhiteboardViewErrorVersionMismatch]=h.ZegoSuperBoardErrorVersionMismatch,O[k.b.ZegoWhiteboardViewErrorNoLoginRoom]=h.ZegoSuperBoardErrorNoLoginRoom,O[k.b.ZegoWhiteboardViewErrorUserNotExist]=h.ZegoSuperBoardErrorUserNotExist,O[k.b.ZegoWhiteboardViewErrorViewNotExist]=h.ZegoSuperBoardErrorViewNotExist,O[k.b.ZegoWhiteboardViewErrorViewCreateFail]=h.ZegoSuperBoardErrorViewCreateFail,O[k.b.ZegoWhiteboardViewErrorViewModifyFail]=h.ZegoSuperBoardErrorViewModifyFail,O[k.b.ZegoWhiteboardViewErrorViewNameLimit]=h.ZegoSuperBoardErrorViewNameLimit,O[k.b.ZegoWhiteboardViewErrorViewParentNotExist]=h.ZegoSuperBoardErrorViewParentNotExist,O[k.b.ZegoWhiteboardViewErrorViewNumLimit]=h.ZegoSuperBoardErrorViewNumLimit,O[k.b.ZegoWhiteboardViewErrorAnimationInfoLimit]=h.ZegoSuperBoardErrorAnimationInfoLimit,O[k.b.ZegoWhiteboardViewErrorGraphicNotExist]=h.ZegoSuperBoardErrorGraphicNotExist,O[k.b.ZegoWhiteboardViewErrorGraphicCreateFail]=h.ZegoSuperBoardErrorGraphicCreateFail,O[k.b.ZegoWhiteboardViewErrorGraphicModifyFail]=h.ZegoSuperBoardErrorGraphicModifyFail,O[k.b.ZegoWhiteboardViewErrorGraphicUnableDraw]=h.ZegoSuperBoardErrorGraphicUnableDraw,O[k.b.ZegoWhiteboardViewErrorGraphicDataLimit]=h.ZegoSuperBoardErrorGraphicDataLimit,O[k.b.ZegoWhiteboardViewErrorGraphicNumLimit]=h.ZegoSuperBoardErrorGraphicNumLimit,O[k.b.ZegoWhiteboardViewErrorGraphicTextLimit]=h.ZegoSuperBoardErrorGraphicTextLimit,O[k.b.ZegoWhiteboardViewErrorGraphicImageSizeLimit]=h.ZegoSuperBoardErrorGraphicImageSizeLimit,O[k.b.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport]=h.ZegoSuperBoardErrorGraphicImageTypeNotSupport,O[k.b.ZegoWhiteboardViewErrorInitFail]=h.ZegoSuperBoardErrorInitFail,O[k.b.ZegoWhiteboardViewErrorGetListFail]=h.ZegoSuperBoardErrorGetListFail,O[k.b.ZegoWhiteboardViewErrorCreateFail]=h.ZegoSuperBoardErrorCreateFail,O[k.b.ZegoWhiteboardViewErrorDestroyFail]=h.ZegoSuperBoardErrorDestroyFail,O[k.b.ZegoWhiteboardViewErrorAttachFail]=h.ZegoSuperBoardErrorAttachFail,O[k.b.ZegoWhiteboardViewErrorClearFail]=h.ZegoSuperBoardErrorClearFail,O[k.b.ZegoWhiteboardViewErrorScrollFail]=h.ZegoSuperBoardErrorScrollFail,O[k.b.ZegoWhiteboardViewErrorUndoFail]=h.ZegoSuperBoardErrorUndoFail,O[k.b.ZegoWhiteboardViewErrorRedoFail]=h.ZegoSuperBoardErrorRedoFail,O[k.b.ZegoWhiteboardViewErrorNoAuthScale]=h.ZegoSuperBoardErrorNoAuthScale,O[k.b.ZegoWhiteboardViewErrorNoAuthScroll]=h.ZegoSuperBoardErrorNoAuthScroll,O[k.b.ZegoWhiteboardViewErrorNoAuthCreateGraphic]=h.ZegoSuperBoardErrorNoAuthCreateGraphic,O[k.b.ZegoWhiteboardViewErrorNoAuthUpdateGraphic]=h.ZegoSuperBoardErrorNoAuthUpdateGraphic,O[k.b.ZegoWhiteboardViewErrorNoAuthMoveGraphic]=h.ZegoSuperBoardErrorNoAuthMoveGraphic,O[k.b.ZegoWhiteboardViewErrorNoAuthDeleteGraphic]=h.ZegoSuperBoardErrorNoAuthDeleteGraphic,O[k.b.ZegoWhiteboardViewErrorNoAuthClearGraphic]=h.ZegoSuperBoardErrorNoAuthClearGraphic,O[k.b.ZegoWhiteboardViewErrorGraphicIllegalUrl]=h.ZegoSuperBoardErrorGraphicIllegalAddress,O[k.b.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit]=h.ZegoWhiteboardViewErrorGraphicCursorOffsetLimit,O[k.b.ZegoWhiteboardViewErrorLogFolderNotAccess]=h.ZegoSuperBoardErrorLogFolderNotAccess,O[k.b.ZegoWhiteboardViewErrorCacheFolderNotAccess]=h.ZegoSuperBoardErrorCacheFolderNotAccess,O[k.b.ZegoWhiteboardViewErrorTokenInvalid]=h.ZegoSuperBoardErrorWhiteboardTokenInvalid,O[E.d.ZegoDocsViewErrorInternal]=h.ZegoSuperBoardErrorInternal,O[E.d.ZegoDocsViewErrorNetworkTimeout]=h.ZegoSuperBoardErrorNetworkTimeout,O[E.d.ZegoDocsViewErrorParamInvalid]=h.ZegoSuperBoardErrorDocParamInvalid,O[E.d.ZegoDocsViewErrorFileNotExist]=h.ZegoSuperBoardErrorFileNotExist,O[E.d.ZegoDocsViewErrorUploadFailed]=h.ZegoSuperBoardErrorUploadFailed,O[E.d.ZegoDocsViewErrorUnsupportRenderType]=h.ZegoSuperBoardErrorUnsupportRenderType,O[E.d.ZegoDocsViewErrorFileEncrypt]=h.ZegoSuperBoardErrorFileEncrypt,O[E.d.ZegoDocsViewErrorFileSizeLimit]=h.ZegoSuperBoardErrorFileSizeLimit,O[E.d.ZegoDocsViewErrorFileSheetLimit]=h.ZegoSuperBoardErrorFileSheetLimit,O[E.d.ZegoDocsViewErrorConvertFail]=h.ZegoSuperBoardErrorConvertFail,O[E.d.ZegoDocsViewErrorConvertCancel]=h.ZegoSuperBoardErrorConvertCancel,O[E.d.ZegoDocsViewErrorFileContentEmpty]=h.ZegoSuperBoardErrorFileContentEmpty,O[E.d.ZegoDocsViewErrorFileReadOnly]=h.ZegoSuperBoardErrorFileReadOnly,O[E.d.ZegoDocsViewErrorConvertElementNotSupported]=h.ZegoSuperBoardErrorConvertElementNotSupported,O[E.d.ZegoDocsViewErrorConvertFileTypeInvalid]=h.ZegoSuperBoardErrorConvertFileTypeInvalid,O[E.d.ZegoDocsViewErrorFileCorruption]=h.ZegoSuperBoardErrorFileCorruption,O[E.d.ZegoDocsViewErrorFileContentIncomplete]=h.ZegoSuperBoardErrorFileContentIncomplete,O[E.d.ZegoDocsViewErrorAuthParamInvalid]=h.ZegoSuperBoardErrorAuthParamInvalid,O[E.d.ZegoDocsViewErrorFilePathNotAccess]=h.ZegoSuperBoardErrorFilePathNotAccess,O[E.d.ZegoDocsViewErrorInitFailed]=h.ZegoSuperBoardErrorInitFailed,O[E.d.ZegoDocsViewErrorSizeInvalid]=h.ZegoSuperBoardErrorSizeInvalid,O[E.d.ZegoDocsViewErrorFreeSpaceLimit]=h.ZegoSuperBoardErrorFreeSpaceLimit,O[E.d.ZegoDocsViewErrorUploadNotSupported]=h.ZegoSuperBoardErrorUploadNotSupported,O[E.d.ZegoDocsViewErrorUploadDuplicated]=h.ZegoSuperBoardErrorUploadDuplicated,O[E.d.ZegoDocsViewErrorEmptyDomain]=h.ZegoSuperBoardErrorEmptyDomain,O[E.d.ZegoDocsViewErrorServerFileNotExist]=h.ZegoSuperBoardErrorServerFileNotExist,O[E.d.ZegoDocsViewErrorCacheNotSupported]=h.ZegoSuperBoardErrorCacheNotSupported,O[E.d.ZegoDocsViewErrorCacheFailed]=h.ZegoSuperBoardErrorCacheFailed,O[E.d.ZegoDocsViewErrorZipFileInvalid]=h.ZegoSuperBoardErrorZipFileInvalid,O[E.d.ZegoDocsViewErrorH5FileInvalid]=h.ZegoSuperBoardErrorH5FileInvalid,O[E.d.ZegoDocsViewErrorHaveInit]=h.ZegoSuperBoardErrorDuplicateInit,O[E.d.ZegoDocsViewErrorConvertFileUnsafe]=h.ZegoSuperBoardErrorConvertFileUnsafe,O[E.d.ZegoDocsViewErrorConvertElementNotExported]=h.ZegoSuperBoardErrorConvertElementNotExported,O[E.d.ZegoDocsViewErrorRequestFailure]=h.ZegoSuperBoardErrorRequestFailure,O[E.d.ZegoDocsViewErrorTokenInvalid]=h.ZegoSuperBoardErrorDocsTokenInvalid,O[E.d.ZegoDocsViewErrorGetContextFail]=h.ZegoSuperBoardErrorGetContextFail,O[E.d.ZegoDocsViewErrorDrawImageFail]=h.ZegoSuperBoardErrorDrawImageFail,O[E.d.ZegoDocsViewErrorSwitchSpeakerFail]=h.ZegoSuperBoardErrorSwitchSpeakerFail,O[60011]=h.ZegoSuperBoardErrorAuthParamInvalid,O[10001]="H5 \u6ca1\u6709\u8c03\u7528 getReady",O[10002]="\u53c2\u6570\u9519\u8bef",O[10003]="recordList \u5b57\u8282\u957f\u5ea6\u8d85\u8fc7\u9650\u5236",O[10006]="H5 \u5185\u90e8\u4ee3\u7801\u6267\u884c\u51fa\u9519",O),P=function(){return w()("webSuperboard"+((new Date).getTime()+Math.round(1e3*Math.random())))},L=function(){return Object(C.d)()},N=function(e,t){var r;return{code:r=function(e){return A[e]||e}(e),message:t=R[r]||t||R[h.ZegoSuperBoardErrorInternal]}};function D(e){var t;try{t=new Blob([e]).size}catch(r){t=unescape(encodeURIComponent(e)).length}return t}var M=function(e){if(D(e)<=128)return e;for(var t=e.length/2|0,r=t,o=t+1;r>0&&o<e.length;){var n=e.substr(0,r)+"..."+e.substr(o);if(D(n)<=128)return n;r--,o++}return e},x=function(){function e(){if(this.parentDomID="",this.isUseBoardView=!0,this.curSubView=null,e.instance)return e.instance;e.instance=this}return e.getInstance=function(){return this.instance||(this.instance=new e)},e.prototype.setParentDomID=function(e){return this.parentDomID=e,v.a.getInstance().info1(y.c.SetParentDomID,{parentDomID:e}),this},e.prototype.getParentDomID=function(){return v.a.getInstance().info1(y.c.GetParentDomID,{parentDomID:this.parentDomID}),this.parentDomID},e.prototype.enableUseBoardView=function(e){this.isUseBoardView=e},e.prototype.setCurrentSuperBoardSubView=function(e,t){return v.a.getInstance().info1(y.c.SetCurrentSuperBoardSubView,{subView:null==e?void 0:e.getModel(),sheetIndex:t}),this.isUseBoardView?(this.curSubView=e,this.curSubView&&this.curSubView.switchWhiteboardView(t)):this.curSubView=null,this},e.prototype.getCurrentSuperBoardSubView=function(){var e;return v.a.getInstance().info1(y.c.API_getCurrentSuperBoardSubView,{curSubView:null===(e=this.curSubView)||void 0===e?void 0:e.getModel()}),this.curSubView},e.prototype.switchSuperBoardSubView=function(e,t){return v.a.getInstance().info1(y.c.API_switchSuperBoardSubView,{uniqueID:e,sheetIndex:t}),new Promise((function(r,o){b.f.emit(b.e.SyncSwitchMod,e,t,r,o)}))},e}(),B=(r(296),function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}),U=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},j=function(){function e(e,t,r){var o;this.curDocsView=null,this.whiteboardViews=e,this.docsViews=t;var n=e.findIndex((function(e){return!!e}));this.switchWhiteboardView(n);var i,s=this.curWhiteboardView.getFileInfo(),a=[];if(r)if(s&&s.fileType===u.ELS){var c=null===(o=this.curDocsView)||void 0===o?void 0:o.getExcelSheetNameList();c&&c.findIndex((function(t,r){e.map((function(e){var r;(null===(r=e.getFileInfo())||void 0===r?void 0:r.fileName)==t&&a.push(e.getID())}))}))}else a.push(this.curWhiteboardView.getID());(i=this.curWhiteboardView.getUniqueID())||(i=s&&s.fileType===u.ELS?s.fileID:this.curWhiteboardView.getID()),this.model=Object.freeze({uniqueID:i,name:this.curWhiteboardView.getName(),createTime:this.curWhiteboardView.getCreateTime(),fileID:s?s.fileID:"",fileType:s?s.fileType:0,whiteboardIDList:r?a:e.map((function(e){return e.getID()}))})}return e.prototype.getWhiteboardViewList=function(){return this.whiteboardViews},e.prototype.getCurrentWhiteboardView=function(){return this.curWhiteboardView},e.prototype.findWhiteboardView=function(e){return this.whiteboardViews[e]||this.whiteboardViews[0]},e.prototype.switchWhiteboardView=function(e){this.curWhiteboardView=this.whiteboardViews[e],this.curDocsView=this.docsViews[e]},e.prototype.insertView=function(e,t,r){this.whiteboardViews[e]=t,this.docsViews[e]=r,this.model.whiteboardIDList[e]=t.getID()},e.prototype.getModel=function(){return this.model},e.prototype.getPageCount=function(){var e=this.curWhiteboardView.getPageCount();return v.a.getInstance().info1(y.c.API_getPageCount,{pageCount:e}),e},e.prototype.getCurrentPage=function(){var e=this.curWhiteboardView.getCurrentPage();return v.a.getInstance().info1(y.c.API_getCurrentPage,{currentPage:e}),e},e.prototype.getCurrentStep=function(){var e=this.curDocsView?this.curDocsView.getCurrentStep():1;return v.a.getInstance().info1(y.c.API_getCurrentStep,{currentStep:e}),e},e.prototype.getVisibleSize=function(){var e=this.curWhiteboardView.getVisibleSize();return v.a.getInstance().info1(y.c.API_getVisibleSize,{visibleSize:e}),e},e.prototype.flipToPage=function(e){v.a.getInstance().info1(y.c.API_flipToPage,{page:e});var t=(e-1)/this.getPageCount();return v.a.getInstance().info1(y.c.FlipToPage,{percent:t}),this.model.fileID?this.curWhiteboardView.scroll(0,t):this.curWhiteboardView.scroll(t,0)},e.prototype.flipToPrePage=function(){var e=this.getCurrentPage();return v.a.getInstance().info1(y.c.API_flipToPrePage,{page:e-1}),e>1&&this.flipToPage(e-1)},e.prototype.flipToNextPage=function(){var e=this.getCurrentPage();return v.a.getInstance().info1(y.c.API_flipToNextPage,{page:e+1}),e<this.getPageCount()&&this.flipToPage(e+1)},e.prototype.switchSpeaker=function(e){return v.a.getInstance().info1(y.c.API_switchSpeaker,{label:e}),this.curDocsView?this.curDocsView.switchSpeaker(e):Promise.resolve(!0)},e.prototype.preStep=function(){v.a.getInstance().info1(y.c.API_preStep,"API.preStep"),this.curDocsView&&this.curDocsView.previousStep()},e.prototype.nextStep=function(){v.a.getInstance().info1(y.c.API_nextStep),this.curDocsView&&this.curDocsView.nextStep()},e.prototype.addText=function(e,t,r){v.a.getInstance().info1(y.c.API_addText,{text:e,positionX:t,positionY:r}),this.curWhiteboardView.addText(e,t,r)},e.prototype.addImage=function(e,t,r,o,n){var i=this;return v.a.getInstance().info1(y.c.API_addImage,{type:e,positionX:t,positionY:r,address:o}),new Promise((function(s,a){return B(i,void 0,void 0,(function(){var i,c,u;return U(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.curWhiteboardView.addImage(e,t,r,o,n)];case 1:return i=l.sent(),s(i),[3,3];case 2:return c=l.sent(),u=N(c.code,c.msg),v.a.getInstance().error1(y.c.API_addImage,{transErr:u}),a(u),[3,3];case 3:return[2]}}))}))}))},e.prototype.setBackgroundImage=function(e,t,r){var o=this;return v.a.getInstance().info1(y.c.API_setBackgroundImage,{address:e,mode:t}),new Promise((function(n,i){return B(o,void 0,void 0,(function(){var o,s,a;return U(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.curWhiteboardView.setBackgroundImage(e,t,r)];case 1:return o=c.sent(),n(o),[3,3];case 2:return s=c.sent(),a=N(s.code,s.msg),v.a.getInstance().error1(y.c.API_setBackgroundImage,a),i(a),[3,3];case 3:return[2]}}))}))}))},e.prototype.clearBackgroundImage=function(){v.a.getInstance().info1(y.c.API_clearBackgroundImage),this.curWhiteboardView.clearBackgroundImage()},e.prototype.clearAllPage=function(){return v.a.getInstance().info1(y.c.API_clearAllPage),this.curWhiteboardView.clear()},e.prototype.clearCurrentPage=function(){v.a.getInstance().info1(y.c.API_clearCurrentPage),this.curWhiteboardView.clearCurrentPage()},e.prototype.clearSelected=function(){v.a.getInstance().info1(y.c.API_clearSelected),this.curWhiteboardView.deleteSelectedGraphics()},e.prototype.undo=function(){v.a.getInstance().info1(y.c.API_undo),this.curWhiteboardView.undo()},e.prototype.redo=function(){v.a.getInstance().info1(y.c.API_redo),this.curWhiteboardView.redo()},e.prototype.setScaleFactor=function(e,t,r){v.a.getInstance().info1(y.c.API_setScaleFactor,{scaleFactor:e,scaleOffsetX:t,scaleOffsetY:r}),this.curWhiteboardView.setScaleFactor(e,t,r)},e.prototype.getScaleFactor=function(){var e=this.curWhiteboardView.getScaleFactor();return v.a.getInstance().info1(y.c.API_getScaleFactor,{scaleFactor:e}),e},e.prototype.setOperationMode=function(e){v.a.getInstance().info1(y.c.API_setOperationMode,{mode:e}),this.curWhiteboardView.setWhiteboardOperationMode(e)},e.prototype.snapshot=function(e){var t=this;return v.a.getInstance().info1(y.c.API_snapshot,{customData:e}),new Promise((function(r,o){return B(t,void 0,void 0,(function(){var t,n;return U(this,(function(i){try{t=this.curWhiteboardView.snapshot(e),r(t)}catch(e){n=N(e.code,e.msg),o(n)}return[2]}))}))}))},e.prototype.reloadView=function(e){v.a.getInstance().info1(y.c.API_reloadView),this.curWhiteboardView.reloadView(e)},e.prototype.getCurrentSheetName=function(){var e=this.model.fileID&&this.model.fileType===u.ELS?this.curWhiteboardView.getFileInfo().fileName:"";return v.a.getInstance().info1(y.c.API_getCurrentSheetName,{currentSheetName:e}),e},e.prototype.getExcelSheetNameList=function(){var e=this.curDocsView?this.curDocsView.getExcelSheetNameList():[];return v.a.getInstance().info1(y.c.API_getExcelSheetNameList,{list:e}),e},e.prototype.getThumbnailUrlList=function(){var e=this.curDocsView?this.curDocsView.getThumbnailUrlList():[];return v.a.getInstance().info1(y.c.API_getThumbnailUrlList,{list:e}),e},e.prototype.getPPTNotes=function(e){var t=this.curDocsView?this.curDocsView.getPPTNotes(e):"";return v.a.getInstance().info1(y.c.API_getPPTNotes,{page:e,notes:t}),t},e.prototype.stopPlayPPTVideo=function(e){v.a.getInstance().info1(y.c.API_stopPlayPPTVideo,{page:e}),this.curDocsView&&this.curDocsView.stopPlay(e)},e}(),H=function(e){var t=this;this.standarWebRTC={},this.RTC={},this.RTM={},this.RTC=e,this.RTM=this.RTC.hasOwnProperty("zegoWebRTM")?this.RTC.zegoWebRTM:this.RTC.RTM,this.standarWebRTC={},this.standarWebRTC.RTCType=this.RTC.hasOwnProperty("zegoWebRTM")?1:0,this.standarWebRTC.SDKType=1;var r=this.standarWebRTC.RTCType;this.standarWebRTC.getVersion=function(){return t.standarWebRTC.RTCType?t.RTM.getVersion():e.getCurrentVersion()},this.standarWebRTC.isSwitch=function(){return!!t.RTM.isUseNetAgent&&t.RTM.isUseNetAgent()},this.standarWebRTC.isPB=function(){return!!t.RTM.sendPB},this.standarWebRTC.setDebugVerbose=function(e){if(r)return!!t.RTC.setDebugVerbose&&t.RTC.setDebugVerbose(e)},this.standarWebRTC.setLogConfig=function(){return r?t.RTC.setLogConfig:t.RTC.stateCenter},this.standarWebRTC.getState=function(){return r?t.RTC.zegoWebRTM.stateCenter:t.zegoWebRTC.RTM.stateCenter},this.standarWebRTC.getSocket=function(){var e;return r?t.RTM.socketCenter||(null===(e=t.RTM.modules)||void 0===e?void 0:e.service):t.zegoWebRTC.RTM.service},this.standarWebRTC.getHeader=function(e){return r?t.RTM.getHeader(e):t.zegoWebRTC.RTM.getHeader(e)},this.standarWebRTC.sendMessage=function(e,r,o,n){return t.standarWebRTC.getSocket().sendMessage(e,r,o,n)},this.standarWebRTC.setAccess=function(e){return t.RTM.setAccess(e)},this.standarWebRTC.isUseNetAgent=function(){return!!r&&!!t.RTM.isUseNetAgent&&t.RTM.isUseNetAgent()},this.standarWebRTC.sendSwitchMessage=function(e,o,n,i){return r?t.RTM.sendSwitchMessage(e,o,n,i):t.zegoWebRTC.RTM.sendSwitchMessage(e,o,n,i)},this.standarWebRTC.getReqHead=function(e){var o;if(r){if(o=t.RTM.getReqHead(e))return o}else if(o=t.zegoWebRTC.RTM.getReqHead(e))return o},this.standarWebRTC.onSwitchMessage=function(e){return r?t.RTM.onSwitchMessage(e):t.zegoWebRTC.RTM.onSwitchMessage(e)},this.standarWebRTC.sendPB=function(e){return!!r&&t.RTM.sendPB(e)},this.standarWebRTC.setSdkLoginRelateService=function(e){return r?t.RTM.setSdkLoginRelateService(e):t.zegoWebRTC.RTM.setSdkLoginRelateService(e)},this.standarWebRTC.setProtoFormat=function(e){return!!r&&t.RTM.setProtoFormat(e)},this.standarWebRTC.on=function(e,o){return r?t.RTM.on(e,o):t.zegoWebRTC.RTM.on(e,o)},this.standarWebRTC.off=function(e){return r?t.RTM.off(e):_super.prototype.off.call(t,e)},this.standarWebRTC._on=function(e,o){return r?t.RTC.zegoWebRTM._on(e,o):t.zegoWebRTC.RTM._on(e,o)}},z=function(){return(z=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},V=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},q=function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},G=function(){function e(){this.subViews=[],this.isUseBoardView=!0,this.isLoginAttached=!1,this.viewAddTaskList=[],this.viewAddTaskIndex=0,this.viewAddTaskPending=!1,this.whiteboardViewMaxLength=50,this.localSwitch=!1,this.logConfig={logLevel:"debug",remoteLogLevel:"debug"}}return e.prototype.init=function(e,t){if(e&&t&&t.parentDomID&&t.appID&&t.token||Promise.reject(new Error("\u53c2\u6570\u9519\u8bef\uff0c\u521d\u59cb\u5316\u5931\u8d25")),Object(v.b)(0,t,"SuperBoard",{SUPER_VER:this.getSDKVersion()}),!Number.isInteger(t.appID))return Promise.reject(new Error("appid must be positive integer number and not empty"));var r=z({userID:"",isTestEnv:!1},t);this.zegoDocsService=new m.a(r);var o=new H(e);return this.zegoWhiteboard=new _.a(new g.a(o)),v.a.getInstance().info1(y.c.Init,t),this.getSuperBoardView().setParentDomID(t.parentDomID),this.bindRoomStateUpdate(),this.bindEvents(),Promise.resolve(!0)},e.prototype.bindRoomStateUpdate=function(){var e=this;b.f.on(b.d.SuperRoomDisConnected,(function(){e.subViews=[],e.isLoginAttached=!1,e.getSuperBoardView().setCurrentSuperBoardSubView(null,0)}))},e.prototype.bindEvents=function(){var e=this;b.f.on(b.e.SyncSwitchMod,(function(t,r,o,n){e.onSyncSwitchViewEvent(t,r,o,n)})),b.f.on(b.e.RemoteSwitchMod,(function(t,r){if(e.localSwitch){var o=e.subViews.find((function(e){return e.getModel().uniqueID==t})),n=0;return o&&(n=o.getWhiteboardViewList().findIndex((function(e){return e.getID()==r}))),void b.f.emit(b.e.RemoteSubViewSwitched,t,n)}e.viewAddTaskList.length?e.viewAddTaskHandle({name:"RemoteSwitchMod",fn:function(){return V(e,void 0,void 0,(function(){return q(this,(function(e){switch(e.label){case 0:return[4,this.onRemoteSwitchViewEvent(t,r)];case 1:return e.sent(),[2]}}))}))}}):e.onRemoteSwitchViewEvent(t,r)})),b.f.on(b.e.RemoteModAdd,(function(t){e.isLoginAttached&&(e.stopVideo(),e.viewAddTaskHandle({name:"RemoteModAdd",fn:function(){return V(e,void 0,void 0,(function(){return q(this,(function(e){switch(e.label){case 0:return[4,this.onRemoteModAddEvent(t)];case 1:return e.sent(),[2]}}))}))}}))})),b.f.on(b.e.RemoteModRemoved,(function(t,r){e.viewAddTaskHandle({name:"RemoteModRemoved",fn:function(){e.onRemoteModRemovedEvent(t,r)}})}))},e.prototype.viewAddTaskHandle=function(e){return V(this,void 0,void 0,(function(){return q(this,(function(t){switch(t.label){case 0:if(this.viewAddTaskList.push(e),this.viewAddTaskPending&&this.viewAddTaskList.length)return[2];t.label=1;case 1:return this.viewAddTaskIndex<=this.viewAddTaskList.length?(this.viewAddTaskPending=!0,this.viewAddTaskList[this.viewAddTaskIndex]?[4,this.viewAddTaskList[this.viewAddTaskIndex].fn()]:[3,3]):[3,5];case 2:t.sent(),t.label=3;case 3:this.viewAddTaskIndex++,t.label=4;case 4:return[3,1];case 5:return this.viewAddTaskList.length=0,this.viewAddTaskIndex=0,this.viewAddTaskPending=!1,[2]}}))}))},e.prototype.setCustomizedConfig=function(e,t){return v.a.getInstance().info1(y.c.SetCustomizedConfig,{key:e,value:t}),"localSwitch"===e?(this.localSwitch="true"==t,!0):this.zegoDocsService.setConfig(e,t)},e.prototype.getCustomizedConfig=function(e){var t=this.zegoDocsService.getConfig(e);return v.a.getInstance().info1(y.c.GetCustomizedConfig,{key:e,value:t}),t},e.prototype.on=function(e,t){var r;return"error"==e&&t&&(r=function(e){var r=String(e.code);r.startsWith("10")||(r.startsWith("31")||(e=N(e.code,e.msg||e.message)),v.a.getInstance().error1(y.c.OnError,{error:e}),t(e))}),b.f.on(e,r||t)},e.prototype.off=function(e,t){return b.f.off(e,t)},e.prototype.getSDKVersion=function(){return"2.9.0"},e.prototype.getSuperBoardView=function(){var e=x.getInstance();return e.enableUseBoardView(this.isUseBoardView),v.a.getInstance().info1(y.c.API_getSuperBoardView,JSON.stringify(""+!!e)),e},e.prototype.enableSuperBoardView=function(e){v.a.getInstance().info1(y.c.EnableSuperBoardView,{enable:e}),this.isUseBoardView=e},e.prototype.getSuperBoardSubView=function(e){var t=this.isUseBoardView?null:this.subViews.find((function(t){return t.getModel().uniqueID===e}))||null;return v.a.getInstance().info1(y.c.GetSuperBoardSubView,{uniqueID:e,subView:null==t?void 0:t.getModel()}),t},e.prototype.attachSuperBoardSubView=function(e,t){var r=this;if(v.a.getInstance().info1(y.c.AttachSuperBoardSubView,{view:e.getModel(),parentDomID:t}),this.isUseBoardView)return Promise.reject(new Error("\u4ec5\u9650\u4e8e\u4e0d\u4f7f\u7528 ZegoSuperBoardView \u7684\u573a\u666f"));var o=e;if(!o||!o.getCurrentWhiteboardView())return Promise.reject(new Error("\u767d\u677f\u4e0d\u5b58\u5728"));var n=o.getCurrentWhiteboardView(),i=n.getRootDomID();if(i&&i!==t)return v.a.getInstance().error1(y.c.AttachSuperBoardSubView,{rootDomID:i,parentDomID:t}),Promise.reject(new Error("\u4e0d\u5141\u8bb8\u6302\u8f7d\u5230\u591a\u4e2a\u5bb9\u5668"));var s=o.getModel().fileID;return s?new Promise((function(e,o){var i,a=null===(i=n.getFileInfo())||void 0===i?void 0:i.fileName,c=r.zegoDocsService.createView(n.getID(),a);r.zegoDocsService.setDocsViewParent(c,t),c.loadFile(s,"",(function(t){v.a.getInstance().error1(y.c.AttachSuperBoardSubView,{fileID:s,fileName:a,whiteboardID:n.getID(),viewID:t.viewID}),r.zegoWhiteboard.attachView(n,t.viewID).then(e,o)})).catch(o)})):(v.a.getInstance().info1(y.c.AttachSuperBoardSubView,{whiteboardViewID:n.getID(),parentDomID:t}),this.zegoWhiteboard.attachView(n,t))},e.prototype.createWhiteboardView=function(e){return V(this,void 0,void 0,(function(){var t,r,o,n;return q(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),this.stopVideo(),[4,this.zegoWhiteboard.getViewList()];case 1:return i.sent().length>=this.whiteboardViewMaxLength?[2,Promise.reject(N(h.ZegoSuperBoardErrorViewNumLimit))]:(e.perPageWidth|=0,e.perPageHeight|=0,e.pageCount|=0,t={uniqueID:P(),name:M(e.name),aspectWidth:e.perPageWidth*e.pageCount,aspectHeight:e.perPageHeight,pageCount:e.pageCount},v.a.getInstance().info1(y.c.CreateWhiteboardView,{model:t}),[4,this.zegoWhiteboard.createView(t)]);case 2:return r=i.sent(),o=new j([r],[],this.localSwitch),this.isUseBoardView?(this.getSuperBoardView().setCurrentSuperBoardSubView(o,0),[4,this.zegoWhiteboard.attachView(r,this.getSuperBoardView().getParentDomID())]):[3,4];case 3:i.sent(),this.zegoWhiteboard.switchView(r.getID()),i.label=4;case 4:return this.subViews.push(o),v.a.getInstance().info1(y.c.API_CreateWhiteboardView,{subViewModel:o.getModel()}),this.lastSwitchUniqueID=t.uniqueID,this.lastSwitchWhiteboardID=r.getID(),[2,o.getModel()];case 5:throw n=i.sent(),N(n.code,n.msg);case 6:return[2]}}))}))},e.prototype.createFileView=function(e){var t=this;return v.a.getInstance().info1(y.c.API_CreateFileView,{config:e}),new Promise((function(r,o){return V(t,void 0,void 0,(function(){var t,n,i,s,a,c,u,l,d,p,f,_,g=this;return q(this,(function(m){switch(m.label){case 0:t=e.fileID,n=this.getSuperBoardView().getParentDomID(),i=P(),s=L(),m.label=1;case 1:return m.trys.push([1,3,,4]),this.stopVideo(),a=this.zegoDocsService.createView(s),[4,this.zegoDocsService.getDocsViewFileInfo(a,e.fileID)];case 2:return c=m.sent(),[3,4];case 3:return u=m.sent(),[2,o(N(u.code,u.msg))];case 4:return[4,this.zegoWhiteboard.getViewList()];case 5:if(l=m.sent(),c.fileType===E.e.ZegoDocsViewFileTypeELS){if((d=null===(_=c.sheets)||void 0===_?void 0:_.length)&&l.length+d>=this.whiteboardViewMaxLength)return o(N(h.ZegoSuperBoardErrorViewNumLimit)),[2]}else if(l.length>=this.whiteboardViewMaxLength)return o(N(h.ZegoSuperBoardErrorViewNumLimit)),[2];return p=function(e){return V(g,void 0,void 0,(function(){var c,u,l,d,h,p,f,_,g,m;return q(this,(function(b){switch(b.label){case 0:v.a.getInstance().info1(y.c.OnCreateView,{fileType:e.fileType,sheets:e.sheets}),b.label=1;case 1:if(b.trys.push([1,16,,17]),e.fileType!==E.e.ZegoDocsViewFileTypeELS)return[3,10];c=e.sheets,u=[],l=[],d=c.length-1,b.label=2;case 2:return d>0?[4,this.createExcelRestFileView(n,i,t,c[d])]:[3,5];case 3:h=b.sent(),p=h[0],f=h[1],u.push(p),l.push(f),b.label=4;case 4:return d--,[3,2];case 5:return[4,this.createAndAttachFileView(i,s,e)];case 6:return _=b.sent(),u.push(_),l.push(a),u.reverse(),l.reverse(),g=new j(u,l,this.localSwitch),this.subViews.push(g),this.isUseBoardView?(this.getSuperBoardView().setCurrentSuperBoardSubView(g,0),v.a.getInstance().info1(y.c.SwitchView,{whiteboardID:s}),[4,this.zegoWhiteboard.attachView(_,e.viewID)]):[3,9];case 7:return b.sent(),[4,this.zegoWhiteboard.switchView(s)];case 8:b.sent(),b.label=9;case 9:return r(g.getModel()),[3,15];case 10:return[4,this.createAndAttachFileView(i,s,e)];case 11:return _=b.sent(),g=new j([_],[a],this.localSwitch),this.subViews.push(g),this.isUseBoardView?(this.getSuperBoardView().setCurrentSuperBoardSubView(g,0),v.a.getInstance().info1(y.c.SwitchView,{whiteboardID:s}),[4,this.zegoWhiteboard.attachView(_,e.viewID)]):[3,14];case 12:return b.sent(),[4,this.zegoWhiteboard.switchView(s)];case 13:b.sent(),b.label=14;case 14:this.lastSwitchUniqueID=i,this.lastSwitchWhiteboardID=s,r(g.getModel()),b.label=15;case 15:return[3,17];case 16:return m=b.sent(),m=N(m.code,m.msg),o(m),[3,17];case 17:return[2]}}))}))},c.fileType!=E.e.ZegoDocsViewFileTypeVideo&&c.fileType!=E.e.ZegoDocsViewFileTypeAudio?[3,7]:[4,a.loadFile(t,"",void 0)];case 6:return f=m.sent(),[2,r(f.fileUrls)];case 7:this.isUseBoardView?(this.zegoDocsService.setDocsViewParent(a,n),a.loadFile(t,"",p).catch((function(e){o(N(e.code,e.msg))}))):(v.a.getInstance().info1(y.c.GetDocsViewFileInfo,{fileID:t}),this.zegoDocsService.getDocsViewFileInfo(a,t).then(p).catch((function(e){o(N(e.code,e.msg))}))),m.label=8;case 8:return[2]}}))}))}))},e.prototype.destroySuperBoardSubView=function(e){var t,r=this;v.a.getInstance().info1(y.c.API_DestroySuperBoardSubView,{uniqueID:e});var o=this.subViews.findIndex((function(t){return t.getModel().uniqueID==e}));if(-1!=o){var n=null===(t=this.getSuperBoardView().getCurrentSuperBoardSubView())||void 0===t?void 0:t.getModel().uniqueID,i=this.subViews.splice(o,1)[0].getWhiteboardViewList().map((function(e){return V(r,void 0,void 0,(function(){return q(this,(function(t){switch(t.label){case 0:return[4,this.zegoWhiteboard.destroyView(e)];case 1:return t.sent(),[2]}}))}))}));return Promise.all(i).then((function(){return V(r,void 0,void 0,(function(){return q(this,(function(e){switch(e.label){case 0:return[4,this.findZorderSubView(n)];case 1:return e.sent(),[2]}}))}))})).catch((function(e){}))}return Promise.reject(new Error("\u767d\u677f\u4e0d\u5b58\u5728"))},e.prototype.findZorderSubView=function(e){return V(this,void 0,void 0,(function(){var t,r,o,n,i;return q(this,(function(s){switch(s.label){case 0:return this.isUseBoardView?0===this.subViews.length?[3,2]:(t=this.zegoWhiteboard.getCurrentActivitedView(),r=t[0],o=t[1],v.a.getInstance().info1(y.c.CurrentActivitedView,{UniqueID:r,whiteboardID:o}),(n=this.subViews.find((function(e){return e.getModel().uniqueID==r})))&&e!==r?(i=n.getWhiteboardViewList().findIndex((function(e){return e.getID()==o})),[4,this.onSyncSwitchViewEvent(r,i)]):[2]):[2];case 1:return s.sent(),[3,3];case 2:this.getSuperBoardView().setCurrentSuperBoardSubView(null,0),s.label=3;case 3:return[2]}}))}))},e.prototype.querySuperBoardSubViewModelList=function(){return V(this,void 0,void 0,(function(){var e,t,r,o,n,i,s,a,c,u,l,d,h;return q(this,(function(p){switch(p.label){case 0:return this.subViews.length?(e=this.subViews.map((function(e){return e.getModel()})),v.a.getInstance().info1(y.c.API_querySuperBoardSubViewModelList,{modelList:e}),[2,Promise.resolve(e)]):[4,this.zegoWhiteboard.getViewList()];case 1:t=p.sent(),r={},t.forEach((function(e){var t=e,o=t.getUniqueID();r[o]?r[o].push(t):r[o]=[t]})),o=Object.keys(r),n=function(e){var t,n,s,a;return q(this,(function(c){switch(c.label){case 0:return t=o[e],i.subViews.find((function(e){return e.getModel().uniqueID===t}))?[3,2]:(n=r[t],[4,i.generateDocsViews(n,null===(c=n[0].getFileInfo())||void 0===c?void 0:c.fileID)]);case 1:s=c.sent(),a=new j(n,s,i.localSwitch),i.subViews.push(a),c.label=2;case 2:return[2]}}))},i=this,s=0,p.label=2;case 2:return s<o.length?[5,n(s)]:[3,5];case 3:p.sent(),p.label=4;case 4:return s++,[3,2];case 5:return a=this.zegoWhiteboard.getCurrentActivitedView(),c=a[0],u=a[1],(l=this.subViews.find((function(e){return e.getModel().uniqueID==c})))?(d=l.getWhiteboardViewList().findIndex((function(e){return e.getID()==u})),this.getSuperBoardView().setCurrentSuperBoardSubView(l,d)):this.getSuperBoardView().setCurrentSuperBoardSubView(null,0),this.isLoginAttached=!0,h=this.subViews.map((function(e){return e.getModel()})),v.a.getInstance().info1(y.c.API_querySuperBoardSubViewModelList,{modelList:h}),[2,Promise.resolve(h)]}}))}))},e.prototype.clearCache=function(){return v.a.getInstance().info1(y.c.API_ClearCach,"clearCache"),this.zegoWhiteboard.clear()},e.prototype.setDeferredRenderingTime=function(e){v.a.getInstance().info1(y.c.API_ClearCasetDeferredRenderingTimech,{delay:e}),this.zegoWhiteboard.setDeferredRenderingTime(e)},e.prototype.enableSyncScale=function(e){v.a.getInstance().info1(y.c.API_EnableSyncScale,{enable:e}),this.zegoWhiteboard.enableSyncScale(e)},e.prototype.enableResponseScale=function(e){v.a.getInstance().info1(y.c.API_EnableResponseScale,{enable:e}),this.zegoWhiteboard.enableResponseScale(e)},e.prototype.enableHandwriting=function(e){v.a.getInstance().info1(y.c.API_EnableHandwriting,{enable:e}),this.zegoWhiteboard.enableHandwriting(e)},e.prototype.enableCustomCursor=function(e){v.a.getInstance().info1(y.c.API_EnableCustomCursor,{enable:e}),this.zegoWhiteboard.enableCustomCursor(e)},e.prototype.enableRemoteCursorVisible=function(e){v.a.getInstance().info1(y.c.API_EnableRemoteCursorVisible,{enable:e}),this.zegoWhiteboard.enableRemoteCursorVisible(e)},e.prototype.setCustomCursorAttribute=function(e,t){var r=this;return v.a.getInstance().info1(y.c.API_EnableCustomCursor_Param,{type:e,attr:t}),new Promise((function(o,n){return V(r,void 0,void 0,(function(){var r,i;return q(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.zegoWhiteboard.setCustomCursorAttribute(e,t)];case 1:return r=s.sent(),o(r),[3,3];case 2:return i=s.sent(),n(N(i.code,i.msg)),[3,3];case 3:return[2]}}))}))}))},e.prototype.setToolType=function(e){v.a.getInstance().info1(y.c.API_SetToolType,{type:e});var t=Object(S.o)(e);return t&&this.zegoWhiteboard.getActivitedViews().forEach((function(t){return t.setToolType(e)})),t},e.prototype.getToolType=function(){var e=Object(S.e)();return v.a.getInstance().info1(y.c.API_GetToolType,{val:e}),e},e.prototype.setFontBold=function(e){return v.a.getInstance().info1(y.c.API_SetFontBold,{isBold:e}),Object(S.l)(e)},e.prototype.isFontBold=function(){var e=Object(S.f)();return v.a.getInstance().info1(y.c.API_GetToolType_FontBold,{val:e}),e},e.prototype.setFontItalic=function(e){return v.a.getInstance().info1(y.c.API_SetFontItalic,{isItalic:e}),Object(S.m)(e)},e.prototype.isFontItalic=function(){var e=Object(S.g)();return v.a.getInstance().info1(y.c.API_IsFontItalic,{val:e}),e},e.prototype.setFontSize=function(e){v.a.getInstance().info1(y.c.API_SetFontSize,{size:e});var t=Object(S.n)(e);return t&&this.zegoWhiteboard.getActivitedViews().forEach((function(t){return t.setFontSize(e)})),t},e.prototype.getFontSize=function(){var e=Object(S.d)();return v.a.getInstance().info1(y.c.API_GetFontSize,{val:e}),e},e.prototype.setBrushSize=function(e){v.a.getInstance().info1(y.c.API_SetBrushSize,{size:e});var t=Object(S.k)(e);return t&&this.zegoWhiteboard.getActivitedViews().forEach((function(t){return t.setBrushSize(e)})),t},e.prototype.getBrushSize=function(){var e=Object(S.c)();return v.a.getInstance().info1(y.c.API_GetBrushSize,{val:e}),e},e.prototype.setBrushColor=function(e){return v.a.getInstance().info1(y.c.API_SetBrushColor,{color:e}),Object(S.j)(e)},e.prototype.getBrushColor=function(){var e=Object(S.b)();return v.a.getInstance().info1(y.c.API_GetBrushColor,{val:e}),e},e.prototype.setWhiteboardBackgroundColor=function(e){v.a.getInstance().info1(y.c.API_SetWhiteboardBackgroundColor,{color:e});var t=Object(S.i)(e);return t&&this.zegoWhiteboard.getActivitedViews().forEach((function(t){return t.setBackgroundColor(e)})),t},e.prototype.isHandwritingEnabled=function(){var e=Object(S.h)();return v.a.getInstance().info1(y.c.API_IsHandwritingEnabled,{val:e}),e},e.prototype.getWhiteboardBackgroundColor=function(){var e=Object(S.a)();return v.a.getInstance().info1(y.c.API_GetBackgroundColor,{val:e}),e},e.prototype.uploadFile=function(e,t,r,o){var n=this;return v.a.getInstance().info1(y.c.API_UploadFile,{file:e,renderType:t,uploadOptions:o}),new Promise((function(i,s){return V(n,void 0,void 0,(function(){var n,a;return q(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.zegoDocsService.uploadFile(e,t,{},r,o)];case 1:return n=c.sent(),i(n),[3,3];case 2:return a=c.sent(),s(N(a.code,a.msg)),[3,3];case 3:return[2]}}))}))}))},e.prototype.cancelUploadFile=function(e){var t=this;return v.a.getInstance().info1(y.c.API_CancelUploadFile,{fileHash:e}),new Promise((function(r,o){return V(t,void 0,void 0,(function(){var t,n;return q(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.zegoDocsService.cancelUploadFile(e)];case 1:return t=i.sent(),r(t),[3,3];case 2:return n=i.sent(),o(N(n.code,n.msg)),[3,3];case 3:return[2]}}))}))}))},e.prototype.uploadH5File=function(e,t,r){var o=this;return v.a.getInstance().info1(y.c.API_UploadH5File,{fileObject:function(){return{lastModified:e.lastModified,name:e.name,size:e.size,type:e.type}},config:t}),new Promise((function(n,i){return V(o,void 0,void 0,(function(){var o,s;return q(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.zegoDocsService.uploadH5File(e,t,r)];case 1:return o=a.sent(),n(o),[3,3];case 2:return s=a.sent(),i(N(s.code,s.msg)),[3,3];case 3:return[2]}}))}))}))},e.prototype.cacheFile=function(e,t){var r=this;return v.a.getInstance().info1(y.c.API_CacheFile,{fileID:e}),new Promise((function(o,n){return V(r,void 0,void 0,(function(){var r,i;return q(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.zegoDocsService.cacheFile(e,t)];case 1:return r=s.sent(),o(r),[3,3];case 2:return i=s.sent(),n(N(i.code,i.msg)),[3,3];case 3:return[2]}}))}))}))},e.prototype.cancelCacheFile=function(e){return this.zegoDocsService.cancelCacheFile(e)},e.prototype.setLogConfig=function(e){return e.logLevel&&(this.logConfig.logLevel=e.logLevel),this.zegoDocsService.setLogConfig(e)},e.prototype.clearLog=function(){return v.a.getInstance().uploadLog()},e.prototype.renewToken=function(e){return v.a.getInstance().updateDocToken(e),this.zegoDocsService.renewToken(e)},e.prototype.createAndAttachFileView=function(e,t,r){return V(this,void 0,void 0,(function(){var o;return q(this,(function(n){switch(n.label){case 0:return o={uniqueID:e,name:M(r.name||r.fileName),aspectWidth:r.width,aspectHeight:r.height,pageCount:r.pageCount,fileInfo:{fileID:r.fileID,fileName:r.fileName,fileType:r.fileType}},v.a.getInstance().info1(y.c.CreateAndAttachFileView,{model:o,whiteboardID:t,viewID:r.viewID}),[4,this.zegoWhiteboard.createView(o,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.createExcelRestFileView=function(e,t,r,o){var n=this;return new Promise((function(i,s){var a=L(),c=n.zegoDocsService.createView(a,o);n.isUseBoardView&&n.zegoDocsService.setDocsViewParent(c,e),n.zegoDocsService.getDocsViewFileInfo(c,r).then((function(e){return V(n,void 0,void 0,(function(){var r,n,u;return q(this,(function(l){switch(l.label){case 0:r={uniqueID:t,name:M(e.name),aspectWidth:e.width,aspectHeight:e.height,pageCount:e.pageCount,fileInfo:{fileID:e.fileID,fileName:o,fileType:e.fileType}},v.a.getInstance().info1(y.c.CreateExcelRestFileView,{model:r,whiteboardID:a}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.zegoWhiteboard.createView(r,a)];case 2:return n=l.sent(),i([n,c]),[3,4];case 3:return u=l.sent(),s(N(u.code,u.msg)),[3,4];case 4:return[2]}}))}))}))}))},e.prototype.stopVideo=function(){var e=this.getSuperBoardView().getCurrentSuperBoardSubView();v.a.getInstance().info1(y.c.StopVideo,{fileID:null==e?void 0:e.getModel().fileID,fileType:null==e?void 0:e.getModel().fileType}),e&&(e.getModel().fileID&&e.getModel().fileType===u.CustomH5||e.getModel().fileType===u.DynamicPPTH5)&&e.stopPlayPPTVideo(0)},e.prototype.generateDocsViews=function(e,t){var r=this;if(t){var o=e.map((function(e,o){var n=r.zegoDocsService.createView(e.getID(),o);return r.zegoDocsService.getDocsViewFileInfo(n,t).then((function(){return n}))}));return Promise.all(o)}return Promise.resolve([])},e.prototype.emitRemoteSubViewAddEvent=function(e,t,r){var o=this.subViews.find((function(t){return t.getModel().uniqueID===e}));o||(o=new j([t],r?[r]:[],this.localSwitch),this.subViews.push(o)),this.isUseBoardView&&this.getSuperBoardView().setCurrentSuperBoardSubView(o,0),v.a.getInstance().info1(y.c.RemoteSubViewAdd,{uniqueID:e}),b.f.emit(b.e.RemoteSubViewAdd,e)},e.prototype.onSyncSwitchViewEvent=function(e,t,r,o){return V(this,void 0,void 0,(function(){var n,i,s,a,c,l,d,h,p=this;return q(this,(function(f){switch(f.label){case 0:if(!this.isUseBoardView)return[2,o&&o(!1)];if(v.a.getInstance().info1(y.c.OnSyncSwitchViewEvent,{uniqueID:e,sheetIndex:t}),this.stopVideo(),!(n=this.subViews.find((function(t){return t.getModel().uniqueID==e}))))return[3,8];f.label=1;case 1:return f.trys.push([1,6,,7]),n.getModel().fileType===u.ELS?(i=n.getExcelSheetNameList(),t="number"==typeof t?t:+i.findIndex((function(e){return e===n.getCurrentSheetName()}))):t=0,s=n.findWhiteboardView(t),a=s.getID(),[4,this.zegoWhiteboard.switchView(a)];case 2:return f.sent(),c=this.getSuperBoardView().getParentDomID(),(l=n.getModel().fileID)?(d=this.zegoDocsService.createView(a,t),this.zegoDocsService.setDocsViewParent(d,c),this.getSuperBoardView().setCurrentSuperBoardSubView(n,t),d.loadFile(l,"",(function(e){return V(p,void 0,void 0,(function(){var t;return q(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.zegoWhiteboard.attachView(s,e.viewID)];case 1:return n.sent(),r&&r(!0),[3,3];case 2:return t=n.sent(),o&&o(N(t.code,t.msg)),[3,3];case 3:return[2]}}))}))})),[3,5]):[3,3];case 3:return this.getSuperBoardView().setCurrentSuperBoardSubView(n,0),[4,this.zegoWhiteboard.attachView(s,c)];case 4:f.sent(),r&&r(!0),f.label=5;case 5:return this.lastSwitchUniqueID=e,this.lastSwitchWhiteboardID=a,[3,7];case 6:return h=f.sent(),o&&o(N(h.code,h.msg)),[3,7];case 7:return[3,9];case 8:v.a.getInstance().error1(y.c.OnSyncSwitchViewEvent_Error,"\u767d\u677f\u4e0d\u5b58\u5728"),o&&o(new Error("\u767d\u677f\u4e0d\u5b58\u5728")),f.label=9;case 9:return[2]}}))}))},e.prototype.onRemoteSwitchViewEvent=function(e,t){return!this.isUseBoardView||this.lastSwitchUniqueID===e&&this.lastSwitchWhiteboardID===t?(v.a.getInstance().warn1(y.c.OnRemoteSwitchViewEvent,"\u5207\u6362\u767d\u677f\u4e0e\u5f53\u524d\u5c55\u793a\u76f8\u540c"),Promise.resolve()):this.switchView(e,t)},e.prototype.switchView=function(e,t){return V(this,void 0,void 0,(function(){var r,o,n,i,s,a,c=this;return q(this,(function(u){switch(u.label){case 0:return v.a.getInstance().info1(y.c.SwitchView,{uniqueID:e,whiteboardID:t}),this.stopVideo(),(r=this.subViews.find((function(t){return t.getModel().uniqueID==e})))?(o=r.getWhiteboardViewList().findIndex((function(e){return e.getID()==t})),n=r.findWhiteboardView(o),i=this.getSuperBoardView().getParentDomID(),(s=r.getModel().fileID)?(a=this.zegoDocsService.createView(t,o),this.zegoDocsService.setDocsViewParent(a,i),v.a.getInstance().info1(y.c.SwitchView,{whiteboardID:n.getID(),uniqueID:e,fileID:s,msg:"\u5207\u6362\u6587\u4ef6\u767d\u677f"}),a.loadFile(s,"",(function(t){return V(c,void 0,void 0,(function(){var i;return q(this,(function(s){switch(s.label){case 0:return v.a.getInstance().info1(y.c.SwitchView_LoadFile,{viewID:t.viewID}),this.getSuperBoardView().setCurrentSuperBoardSubView(r,o),[4,this.zegoWhiteboard.attachView(n,t.viewID)];case 1:return s.sent(),(null==(i=this.getSuperBoardView().getCurrentSuperBoardSubView())?void 0:i.getModel().uniqueID)==e?b.f.emit(b.e.RemoteSubViewExcelSwitched,e,o):b.f.emit(b.e.RemoteSubViewSwitched,e),[2]}}))}))})),[3,3]):[3,1]):[3,4];case 1:return v.a.getInstance().info1(y.c.SwitchView,{whiteboardID:n.getID(),uniqueID:e,msg:"\u5207\u6362\u767d\u677f"}),this.getSuperBoardView().setCurrentSuperBoardSubView(r,0),[4,this.zegoWhiteboard.attachView(n,i)];case 2:u.sent(),b.f.emit(b.e.RemoteSubViewSwitched,e),u.label=3;case 3:this.lastSwitchUniqueID=e,this.lastSwitchWhiteboardID=t,u.label=4;case 4:return[2]}}))}))},e.prototype.onRemoteModAddEvent=function(e){return V(this,void 0,void 0,(function(){var t,r,o,n,i,s,a,c,u,l,d,h,p,f,_;return q(this,(function(g){switch(g.label){case 0:return this.isLoginAttached?(t=this.getSuperBoardView().getParentDomID(),r=e.getID(),o=e.getFileInfo(),n=e.getUniqueID(),v.a.getInstance().info1(y.c.OnRemoteModAddEvent,{uniqueID:n,whiteboardID:r,file:o}),(i=this.subViews.find((function(e){return e.getModel().uniqueID===n})))?o?(a=o.fileID,s=o.fileName,o.fileType!==E.e.ZegoDocsViewFileTypeELS?[3,5]:(l=i.getExcelSheetNameList(),d=l.findIndex((function(e){return e===s})),_=this.zegoDocsService.createView(r,s),this.isUseBoardView&&this.zegoDocsService.setDocsViewParent(_,t),i.getWhiteboardViewList().reduce((function(e,t){return t?++e:e}),0)+1<l.length?[4,this.zegoDocsService.getDocsViewFileInfo(_,a)]:[3,2])):[3,7]:[3,9]):[2];case 1:return g.sent(),i.insertView(d,e,_),[3,4];case 2:return[4,this.zegoDocsService.getDocsViewFileInfo(_,a)];case 3:g.sent(),i.insertView(d,e,_),i.switchWhiteboardView(0),b.f.emit(b.e.RemoteSubViewAdd,n),g.label=4;case 4:return[3,6];case 5:v.a.getInstance().info1(y.c.RemoteSubViewAdd,{uniqueID:n}),b.f.emit(b.e.RemoteSubViewAdd,n),g.label=6;case 6:return[3,8];case 7:v.a.getInstance().info1(y.c.RemoteSubViewAdd,{uniqueID:n}),b.f.emit(b.e.RemoteSubViewAdd,n),g.label=8;case 8:return[3,18];case 9:return o?(a=o.fileID,c=o.fileName,o.fileType!==E.e.ZegoDocsViewFileTypeELS?[3,11]:(_=this.zegoDocsService.createView(r,c),this.isUseBoardView&&this.zegoDocsService.setDocsViewParent(_,t),[4,this.zegoDocsService.getDocsViewFileInfo(_,a)])):[3,17];case 10:return u=g.sent(),l=u.sheets,d=l.findIndex((function(e){return e===c})),(h=this.subViews.find((function(e){return e.getModel().uniqueID===n})))||(f=[],(p=[])[d]=e,f[d]=_,h=new j(p,f,this.localSwitch),this.subViews.push(h),h.switchWhiteboardView(d),this.getSuperBoardView().setCurrentSuperBoardSubView(h,d),1===l.length&&this.emitRemoteSubViewAddEvent(n,e,_)),[3,16];case 11:_=this.zegoDocsService.createView(r),g.label=12;case 12:return g.trys.push([12,14,,15]),[4,this.zegoDocsService.getDocsViewFileInfo(_,a)];case 13:case 14:return g.sent(),[3,15];case 15:this.emitRemoteSubViewAddEvent(n,e,_),g.label=16;case 16:return[3,18];case 17:this.emitRemoteSubViewAddEvent(n,e),g.label=18;case 18:return[2]}}))}))},e.prototype.onRemoteModRemovedEvent=function(e,t){var r=this.subViews.findIndex((function(t){return t.getModel().uniqueID===e}));if(-1==r)v.a.getInstance().info1(y.c.RemoteSubViewRemoved,{uniqueID:e}),b.f.emit(b.e.RemoteSubViewRemoved,e);else{var o=this.subViews[r],n=o.getModel(),i=n.fileType;if(n.fileID&&i==u.ELS){var s=o.getWhiteboardViewList(),a=s.findIndex((function(e){return e.getID()==t}));if(s.splice(a,1),0!==s.reduce((function(e,t){return t?++e:e}),0))return}this.subViews.splice(r,1),this.isUseBoardView&&0===this.subViews.length&&this.getSuperBoardView().setCurrentSuperBoardSubView(null,0),v.a.getInstance().info1(y.c.RemoteSubViewRemoved,{uniqueID:e}),b.f.emit(b.e.RemoteSubViewRemoved,e)}},e}(),Z=function(){function e(){if(e.instance)return e.instance;this.zegoSuperBoardService=new G,e.instance=this}return e.getInstance=function(){return this.instance||(this.instance=new e)},e.prototype.init=function(e,t){return this.zegoSuperBoardService.init(e,t)},e.prototype.setCustomizedConfig=function(e,t){return this.zegoSuperBoardService.setCustomizedConfig(e,t)},e.prototype.getCustomizedConfig=function(e){return this.zegoSuperBoardService.getCustomizedConfig(e)},e.prototype.on=function(e,t){return this.zegoSuperBoardService.on(e,t)},e.prototype.off=function(e,t){return this.zegoSuperBoardService.off(e,t)},e.prototype.getSDKVersion=function(){return this.zegoSuperBoardService.getSDKVersion()},e.prototype.getSuperBoardView=function(){return this.zegoSuperBoardService.getSuperBoardView()},e.prototype.enableSuperBoardView=function(e){this.zegoSuperBoardService.enableSuperBoardView(e)},e.prototype.getSuperBoardSubView=function(e){return this.zegoSuperBoardService.getSuperBoardSubView(e)},e.prototype.attachSuperBoardSubView=function(e,t){return this.zegoSuperBoardService.attachSuperBoardSubView(e,t)},e.prototype.createWhiteboardView=function(e){return this.zegoSuperBoardService.createWhiteboardView(e)},e.prototype.createFileView=function(e){return this.zegoSuperBoardService.createFileView(e)},e.prototype.destroySuperBoardSubView=function(e){return this.zegoSuperBoardService.destroySuperBoardSubView(e)},e.prototype.querySuperBoardSubViewList=function(){return this.zegoSuperBoardService.querySuperBoardSubViewModelList()},e.prototype.clearCache=function(){return this.zegoSuperBoardService.clearCache()},e.prototype.setDeferredRenderingTime=function(e){this.zegoSuperBoardService.setDeferredRenderingTime(e)},e.prototype.enableSyncScale=function(e){this.zegoSuperBoardService.enableSyncScale(e)},e.prototype.enableResponseScale=function(e){this.zegoSuperBoardService.enableResponseScale(e)},e.prototype.enableHandwriting=function(e){this.zegoSuperBoardService.enableHandwriting(e)},e.prototype.enableCustomCursor=function(e){this.zegoSuperBoardService.enableCustomCursor(e)},e.prototype.enableRemoteCursorVisible=function(e){this.zegoSuperBoardService.enableRemoteCursorVisible(e)},e.prototype.setCustomCursorAttribute=function(e,t){return this.zegoSuperBoardService.setCustomCursorAttribute(e,t)},e.prototype.setToolType=function(e){return this.zegoSuperBoardService.setToolType(e)},e.prototype.getToolType=function(){return this.zegoSuperBoardService.getToolType()},e.prototype.setFontBold=function(e){return this.zegoSuperBoardService.setFontBold(e)},e.prototype.isFontBold=function(){return this.zegoSuperBoardService.isFontBold()},e.prototype.setFontItalic=function(e){return this.zegoSuperBoardService.setFontItalic(e)},e.prototype.isFontItalic=function(){return this.zegoSuperBoardService.isFontItalic()},e.prototype.setFontSize=function(e){return this.zegoSuperBoardService.setFontSize(e)},e.prototype.getFontSize=function(){return this.zegoSuperBoardService.getFontSize()},e.prototype.setBrushSize=function(e){return this.zegoSuperBoardService.setBrushSize(e)},e.prototype.getBrushSize=function(){return this.zegoSuperBoardService.getBrushSize()},e.prototype.setBrushColor=function(e){return this.zegoSuperBoardService.setBrushColor(e)},e.prototype.getBrushColor=function(){return this.zegoSuperBoardService.getBrushColor()},e.prototype.setWhiteboardBackgroundColor=function(e){return this.zegoSuperBoardService.setWhiteboardBackgroundColor(e)},e.prototype.getWhiteboardBackgroundColor=function(){return this.zegoSuperBoardService.getWhiteboardBackgroundColor()},e.prototype.isHandwritingEnabled=function(){return this.zegoSuperBoardService.isHandwritingEnabled()},e.prototype.uploadFile=function(e,t,r,o){return this.zegoSuperBoardService.uploadFile(e,t,r,o)},e.prototype.cancelUploadFile=function(e){return this.zegoSuperBoardService.cancelUploadFile(e)},e.prototype.uploadH5File=function(e,t,r){return this.zegoSuperBoardService.uploadH5File(e,t,r)},e.prototype.cacheFile=function(e,t){return this.zegoSuperBoardService.cacheFile(e,t)},e.prototype.cancelCacheFile=function(e){return this.zegoSuperBoardService.cancelCacheFile(e)},e.prototype.setLogConfig=function(e){return this.zegoSuperBoardService.setLogConfig(e)},e.prototype.clearLog=function(){return this.zegoSuperBoardService.clearLog()},e.prototype.renewToken=function(e){return this.zegoSuperBoardService.renewToken(e)},e}()}])},module.exports=t()},3259:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAABaCAYAAAB+HuKoAAAAAXNSR0IArs4c6QAACV9JREFUeF7tXWtsXFcR/ubuJn7EiROTxthN+Rdk0aQOqGrhR5OCwmO96xQstva6ASK1WEKtRAUoEj9AFvxAingUqRGS20oBUu86iwyN99FCVFoqIYoQkFZBEflHHbtuguPH+hXv3kHn2hvW+7z7uNfr9dw/UeRzZs6Z73wzc+49e4aw/jAzdXX7niLGk0x8PxhNyb/JvxZYgBAjpqtMeCky5n+RiNgCLTlFkvpLT8+ptuU78QvM/Bk7lYuuNQsQ0ev1O52nRkcvTNplE1JMd3f7Lq+BTuOk0Zn6HY437ByEXZOtJj0G2VYTj7LOZwE+qMAPj/lP2MV8cnn6vg7mIQV6U+OuzmDwpelqMlCtj8XrfbIltrhwRYEPooFoKPCCHXOmLnffXxj8MGlaf2TM77dDqejYaIGubp+PdX2YQG9HwoFP2mEfcnl651Ui11C3o13cux0mz9Sh3P7SyuoECLFoaGR3rlF0dw80xnk2SKD9Dz3Y8anBwUG91BGTy91rZJPR8IiR6KU+PT1PHFxeSZxl4FGA20pVkr8fjUPjgejYSFS1c3X3uqDTkOH6LH3s1kuTBLxRX+c4Mzr68nj61PLhoNp6vYM7FxavhRj8WSK6/tCDHR2WAK9AX1qJXwHQYqn91/La8Wg4cJ8BvLvvPetBT85oU/RON9Q5O9PBzwe813vREVsaDYL5S0Q0pUF7JBQavl4OLjkZ3+XuG2awrxzhxfRNepykAYrpW07bzdBLIH8kHOhPHXcu4Nd3Xb9k5q8Q6DacjuORV15+t5w5G1TLpdDl7puwzr1nDnszAEgNcfYuOJqMhgPtZoDv8vQ9z8xPq/hPDjoReSXwdrmgFwB+Lfbb9Wwv4DNzqmwEdHkeD4LpywDFQXgVjAmzeBDhA6dGwUuX/O9k65OH8QK8WSOX0i49mc4OfG8cDEcp8g1WE+4QO06Gw8OvpcsQ4Nd3M/a6enOM93h8Z3Twj5hZI8YwEd40uwgY9AiDT4HoH9FQ4BMCfJoFNjvEJIeTM9e6+2YVrDm0r4Yv+S+YAf/06dP1UzeXlgDEo+GRHQL8FgNeDdfl9n0b0H+sQISmeaNj/t+ZAT/fFlFcfRW7+lRw3Z6+H+jM3wOwosHhCYeHLxcCX4DPY6Fqd/WpQ+/y+J5j1r+p9vMH793TOjQ0tJoPfAG+RoA3Dst4+gcJ+v5IeORpYXwhC9QI8MVOUxgvwGd8gJPkboskd8WyfW03kPvLqwAvwG/8Hr9Zb7K2m95CL3BKYboZmcJ4Ybwwvhx2FdvXzEeaYmWmt3d5esPExJFwwCOvbLfgK9tyF0C2/uLqa9jV51swArwAnx7jK3vocXU1joWFRSyvrCAe18Fc8slgKzxfDcqkGIj/Q8DvNXa8eOXKH6+mTjI34yt2zJlxe2YOsdhiDRp3y0xJJ8IvOg61fisYDN5Ro857rr7caXm93p3X/j0VZcD4MabT6cSePU1oqN8JTSv5RFG5w9oW/XU9gaXlO5ibiyEejxtzJuD1jo+2uhT4lgJ/5Oix55lhfEXau7cZu5sat4XRq22S87FFzMzMroFPOPfuP//0jGWuXsX096duGsqSoMcTCczOzmNlZQWJhMR4KxeIw6Ghrq4Ozc274XQ4kAK+7oDjgXzn6sv6RcvMzBzmYwuGe2/78D1QoE9N3YKuC+BWAp4uW9M0tLbuN8CffP+m4faJ8Jxl2znFdsX6lpa92NXYgP9Oz2BxUZ39k8duCzQ2NuBDLXuxsLiE6ekZFez/ZRnw4zemjC3bve0HjERuYnJK3LvdiK/rU26/va0VKuG7MfGBivQxy4B/b3ztVo/7Dq79yDb5/9S5K/ejYpCKRWpwtfioEHf79iyWl1eM6dXX12HfvmbD9VbyUTmTyp1UDqV0pj/pOGwa8GriKvaoGFTrjwJiclIxDWhrO1Bx0FPtp3IolUulg181wKuYo2LPdnnSPaCV81a5lMqpUp+qAV7FnFp179lAtRN45fZVTlWVwCdXoJUrv5pk2wl8tpyqahgvwFu7LNOTaQHeWnvnlC6MXzeNMN7aFSiMt9a+pqUL44XxphdLOQ2F8eVYr4J9hfHC+Aoup9yihPG2mLmwEmG8ML7wKqlAC2F8BYxYCRHCeGF8JdZRQRnC+IImsqeBMF4Yb8tKK4Px5f2SptAJHHllay3+pQNf5i9pBPiNwFafq7eoNMnhzmPG7de5ztxtV8ZbffRK2Tz1qFdy+WV8lrWqGJEAn53xVh22TGpLP9yZE3iryo8J8NmBtzay55aewXirCg4K8FUOvBqeFSVGJbmrclefHF6liwoL8NmBr5rkzqqYI66+yrdzArxVFhDgDQvkepNkj9k3X0vVvcBJNYm6EE/9PxoacZdrKnH1W4jxheqbFrMYBHgBXlx9Sqiz61V1wY80G1x9nvvNi2G7aiuMF8YL44Xx/2eBXS6vWE9lVfvqzurF1VuF+93trF0L3rIY3+XuPcfQbkVCw4NElFF5WmJ8Dcb4gYGBHeM35qYYvI9I+3kk5H82nSoCfA0Cr6bkdvef0JEIAajTiH4YDgW+nzpVAb5GgVfTcnX7vghdD6r7iQHtO9Gw/yfJ6QrwWwt4VavU2XpPQ8P58+eXzWQ67pO+U3pC/5VxOTLRQDQUeEH28ZmWq+6s3tP3dzB/nEAXCPyWGeBVG2YcZ0I/Eeka6LuhkP+sMH4LMd7t7v88U+ISM3aaBT2jHSERDY04CwEv152VbGFTHYvazimJJ0/6Hojr7GXGAVMaVCNCOxhfANgJ4t9EQxe9hYCXCw5NW7ekhkUDX6yWrsf6HuYEXwajiYjORUKBZ8zEeLnStFhLm29v6ly9eXGZLbsee+II4ok31/bz9OvwmP9ryZc5hRivpMklxuVYP3tf0+fqS1Xt8fQf0qG/xcytIPptU0OPNxh8/O61yYc7j88D3CTXlpdq4cr1y3pteSniBwcHtb/+7do1Zj5EoD/sauzwBIODRnWj5HP46LGrYHxMChWUYuHK9slaqKAUFV7vRcfC0uifGXzLSc3esbGhjNpiR44e+xkznpXSJKVYuHJ9cpYmqZyKjZI6Oz99fwKJdwBoUozIKivnlluwGJGVQ5LyY1Za17zsrOXHzHcvvqUUHCzeZpXqUbDgYKUU5ZJjgH996qfM+IZy+1brE/lZLZBZYtQuQ6mYr1PiKQY+B6aPqK2eXbq3p578RYX/BwWdZwPB7iWgAAAAAElFTkSuQmCC"},5550:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAABYBAMAAADFDY6tAAAAAXNSR0IArs4c6QAAAC1QTFRFAAAA////////////////////////////////////////////////////////oUirmwAAAA90Uk5TAAEEBQYPEhUiJiguMDEzKAwKUAAAANJJREFUWMPt2L0JAkEQBeAHJ7Yg1mBykbEF2IGJYAU2YAMHgg3YgQaCYLSRVRiY+rM4NVzgmpyCe/OM5E047AfH7jEDD+htzFmnOVCszV23Ev04g7OGYYXFDu4aXLCd+nn3jnPp58UDBnSqxpXsMbGvrcMIMBgwbp6NCBmtY+LLtxeBZbSuiQcfj4mbj5u4uLh4Ox58o/I1rDKm8ufWk/vrF5z8ePLq9NOKi4try2jLaMuIi4v/3ZxvF32QwQsZ+zChExl5kYEbGfeRYSMZdXJBaw1shYOUZpCypwAAAABJRU5ErkJggg=="},1636:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAABYBAMAAADFDY6tAAAAAXNSR0IArs4c6QAAAC1QTFRFAAAA////////////////////////////////////////////////////////oUirmwAAAA90Uk5TAAEEBQYPEhUiJiguMDEzKAwKUAAAAMtJREFUWMNjYBBf+45McKuQgYF53juywUsDBsnXyQxkArN9ExnqNjGQDbSfM6xLIF872yuGewbka2d+y/COgYGlm6iA2soQjczd4cAA1AzU7kNcOL9m2IfCPwLV3kdkPDGgcl9Ate8jT/trqPZ35Gl/N6p9VPuo9lHtNNK+j7LCKhqt4CZROwagq3YKHU9h0I0m2lHto9pHtY/WMqO1zGgtM6p9VPuo9kGqncKhDwoHXigc9qFk0InCIS8KB9woHO6jcLCRwqFOygZaAdDuZUmBDjBXAAAAAElFTkSuQmCC"},2480:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,r){return __webpack_require__.f[r](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".6b8eaea0.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="zegocloud_client_sdk_web:";__webpack_require__.l=function(r,o,n,i){if(e[r])e[r].push(o);else{var s,a;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==t+n){s=l;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+n),s.src=r),e[r]=[o];var d=function(t,o){s.onerror=s.onload=null,clearTimeout(h);var n=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((function(e){return e(o)})),t)return t(o)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),a&&document.head.appendChild(s)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="./",function(){var e={179:0};__webpack_require__.f.j=function(t,r){var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise((function(r,n){o=e[t]=[r,n]}));r.push(o[2]=n);var i=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(i,(function(r){if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",s.name="ChunkLoadError",s.type=n,s.request=i,o[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var o,n,i=r[0],s=r[1],a=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in s)__webpack_require__.o(s,o)&&(__webpack_require__.m[o]=s[o]);if(a)a(__webpack_require__)}for(t&&t(r);c<i.length;c++)n=i[c],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkzegocloud_client_sdk_web=self.webpackChunkzegocloud_client_sdk_web||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var __webpack_exports__={};!function(){"use strict";var e=__webpack_require__(9867),t=__webpack_require__(8192);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var n=t&&t.prototype instanceof p?t:p,i=Object.create(n.prototype),s=new C(o||[]);return i._invoke=function(e,t,r){var o="suspendedStart";return function(n,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===n)throw i;return O()}for(r.method=n,r.arg=i;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var c=d(e,t,r);if("normal"===c.type){if(o=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o="completed",r.method="throw",r.arg=c.arg)}}}(e,r,s),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var h={};function p(){}function f(){}function _(){}var g={};u(g,s,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(I([])));v&&v!==t&&n.call(v,s)&&(g=v);var y=_.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(i,s,a,c){var u=d(e[i],e,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==r(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(u.arg)}var i;this._invoke=function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var n=o.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=_,u(y,"constructor",_),u(_,"constructor",f),f.displayName=u(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,o,n,i){void 0===i&&(i=Promise);var s=new S(l(t,r,o,n),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),u(y,c,"Generator"),u(y,s,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var o=t.pop();if(o in e)return r.value=o,r.done=!1,r}return r.done=!0,r}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;w(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function n(e,t,r,o,n,i,s){try{var a=e[i](s),c=a.value}catch(error){return void r(error)}a.done?t(c):Promise.resolve(c).then(o,n)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var s=e.apply(t,r);function a(e){n(s,o,i,a,c,"next",e)}function c(e){n(s,o,i,a,c,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=d(e);if(t){var n=d(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return p(this,r)}}__webpack_require__(3248);var _,g,m,v,y,b,S={app:"App_app__GuJBs",nav:"App_nav__n5Po7",LOGO:"App_LOGO__LLW1y",link:"App_link__hUoGZ",link_item:"App_link_item__09zJ7",icon__doc:"App_icon__doc__xCJSV",icon__github:"App_icon__github__AZGLq",icon_settings:"App_icon_settings__PTvHv",myMeeting:"App_myMeeting__LJOlm",serviceTips:"App_serviceTips__TQAWH",pcServiceTips:"App_pcServiceTips__yU6jx",pcSettingsModel:"App_pcSettingsModel__CSfYO",settingsWrapper:"App_settingsWrapper__cu58X",settingsHeader:"App_settingsHeader__sfrGZ",settingsClose:"App_settingsClose__TZaqB",settingsBody:"App_settingsBody__KZ568",settingsMode:"App_settingsMode__EMqkU",settingsModeItem:"App_settingsModeItem__yP7EC",settingsModeItemSelected:"App_settingsModeItemSelected__hdEZa",settingsBtn:"App_settingsBtn__h5yaD",mobileApp:"App_mobileApp__QvcBL",mobileNav:"App_mobileNav__k4qfq",mobileLOGO:"App_mobileLOGO__AKgip",mobileLink:"App_mobileLink__HY6NQ",mobileMeeting:"App_mobileMeeting__M3bcz",mobileServiceTips:"App_mobileServiceTips__zvV8R",mobileSettingsModel:"App_mobileSettingsModel__T6Kbz"};function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function I(e,t){if(e){if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function O(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.log("\u3010ZEGOCLOUD\u3011Async: Copying to clipboard was successful!")}),(function(e){console.error("\u3010ZEGOCLOUD\u3011 Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var r=document.execCommand("copy")?"successful":"unsuccessful";console.log("\u3010ZEGOCLOUD\u3011 Fallback: Copying text command was "+r)}catch(o){console.error("\u3010ZEGOCLOUD\u3011Fallback: Oops, unable to copy",o)}document.body.removeChild(t)}(e)}function R(e){return/^http:\/\//.test(e)?e.replace(/http:/,"https:"):e}!function(e){e.Host="Host",e.Cohost="Cohost",e.Audience="Audience"}(_||(_={})),function(e){e.OneONoneCall="OneONoneCall",e.GroupCall="GroupCall",e.VideoConference="VideoConference",e.LiveStreaming="LiveStreaming"}(g||(g={})),function(e){e._180P="180p",e._360P="360p",e._480P="480p",e._720P="720p"}(m||(m={})),function(e){e.StandardLive="StandardLive",e.PremiumLive="PremiumLive",e.RealTimeLive="RealTimeLive"}(v||(v={})),function(e){e[e.main=0]="main",e[e.media=1]="media",e[e.screensharing=2]="screensharing"}(y||(y={})),function(e){e[e.notSupportCDNLive=10001]="notSupportCDNLive",e[e.notSupportStandardLive=10002]="notSupportStandardLive"}(b||(b={}));var A=__webpack_require__(1998);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(c){a=!0,n=c}finally{try{s||null==r.return||r.return()}finally{if(a)throw n}}return i}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=__webpack_require__(6686),N=__webpack_require__.n(L);function D(e){var t,r="",o="123456789",n=o.length;for(e=e||5,t=0;t<e;t++)r+=o.charAt(Math.floor(Math.random()*n));return Number.parseInt(r)}function M(){var e=navigator.platform,t={win:0===e.indexOf("Win"),mac:0===e.indexOf("Mac")};return"yes"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PATH:"video_conference",REACT_APP_ENV:"test"}.REACT_APP_MOBILE&&(t.win||t.mac)}function x(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function B(){var e=navigator.userAgent;return e.indexOf("Android")>-1||e.indexOf("Adr")>-1}function U(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)}function j(){return!!navigator.userAgent.match(/firefox|fxios/i)}function H(){var e=navigator.userAgent.toLowerCase().indexOf("safari/")>-1,t=navigator.userAgent.match("CriOS"),r=navigator.userAgent.match("FxiOS"),o=navigator.userAgent.match(/iPhone OS .*?(?= )/),n=0;if(o&&o.length>0)try{var i=o[0].split(" ")[o[0].split(" ").length-1].split("_")[0];n=Number.parseInt(i)}catch(error){console.error("\u3010ZEGOCLOUD\u3011get safari version failed",error)}return e&&!t&&!r&&n<14}function z(e,t){var r=new Date(e),o={"M+":r.getMonth()+1+"","d+":r.getDate()+"","h+":r.getHours()>=12?r.getHours()-12+"":r.getHours()+"","m+":r.getMinutes()+"","s+":r.getSeconds()+"","q+":Math.floor((r.getMonth()+3)/3)+"",S:r.getMilliseconds()+""};return Object.entries(o).forEach((function(e){var r=P(e,2),o=r[0],n=r[1];new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n:("00"+n).substr((""+n).length)))})),t}var V={};function q(e){var t=["#557BFF","#1FAD40","#06A1E5","#E9473A","#BB9B21","#B755FF","#10BD8E","#FF2F5F"];return V[e]||(V[e]=t[Object.keys(V).length%t.length]),V[e]}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=e.split("?")[1];return new URLSearchParams(t)}function Z(e){var t=640,r=360,o=400;return"180p"===e?(t=320,r=180,o=140):"360p"===e?(t=640,r=360,o=400):"480p"===e?(t=640,r=480,o=500):"720p"===e&&(t=1280,r=720,o=1130),{width:t,height:r,bitrate:o,frameRate:15}}var F=function(e,t){var r=!0;return function(){var o=arguments,n=this;r&&(r=!1,setTimeout((function(){e.apply(n,o),r=!0}),t))}};function W(e){var t=55296,r=127995,o=127999,n=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520];function i(e,n){var i=n[e];if(!function(e){return e&&h(e[0].charCodeAt(0),t,56319)}(i)||e===n.length-1)return 1;var a=i+n[e+1],c=n.substring(e+2,e+5);return s(a)&&s(c)||function(e){return h(d(e),r,o)}(c)?4:2}function s(e){return h(d(e),127462,127487)}function a(e){return"string"===typeof e&&h(e.charCodeAt(0),65024,65039)}function c(e){return"string"===typeof e&&h(e.charCodeAt(0),8400,8447)}function u(e){return"string"===typeof e&&-1!==n.indexOf(e.charCodeAt(0))}function l(e){return"string"===typeof e&&8205===e.charCodeAt(0)}function d(e){return(e.charCodeAt(0)-t<<10)+(e.charCodeAt(1)-56320)+65536}function h(e,t,r){return e>=t&&e<=r}if("string"!==typeof e)throw new Error("string cannot be undefined or null");for(var p=[],f=0,_=0;f<e.length;)u(e[f+(_+=i(f+_,e))])&&_++,a(e[f+_])&&_++,c(e[f+_])&&_++,l(e[f+_])?_++:(p.push(e.substring(f,f+_)),f+=_,_=0);return p}function Y(e){return W(e).shift()||""}function Q(e){var t=document.createElement("input");t.setAttribute("id","zego_whiteboard_UIKits_file"),t.setAttribute("type","file"),t.setAttribute("name","file"),t.setAttribute("style","visibility:hidden"),t.setAttribute("accept","image/jpeg,image/png"),document.body.appendChild(t),document.querySelector("#zego_whiteboard_UIKits_file").addEventListener("change",(function(r){var o=r.target;o.files&&e(o.files[0]),document.body.removeChild(t)})),t.click()}var K=function(){function e(t){s(this,e),this.zg=t,this.showNonVideo=!0,this.showOnlyAudioUser=!1,this.screenNumber=M()?6:10,this.sidebarEnabled=!1,this.remoteUserList=[],this.remoteScreenStreamList=[],this.scenario=g.OneONoneCall,this.role=_.Host,this.liveStreamingMode=v.RealTimeLive,this.userOrderList=[],this.waitingPullStreams=[],this.isLive="0"}return c(e,[{key:"isL3Live",get:function(){return this.scenario===g.LiveStreaming&&this.role===_.Audience&&this.liveStreamingMode===v.PremiumLive}},{key:"setPin",value:function(e,t){this.remoteUserList=this.remoteUserList.map((function(t){return t.userID===e?t.pin=!t.pin:t.pin=!1,t}))}},{key:"setShowNonVideo",value:function(e){return this.showNonVideo=e,this.updateStream()}},{key:"setMaxScreenNum",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.screenNumber=t,e.next=3,this.updateStream();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSidebarLayOut",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sidebarEnabled=t,e.next=3,this.updateStream();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateStream",value:function(){var e=i(o().mark((function e(){var t,r,n,i,s,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteUserList.length){e.next=2;break}return e.abrupt("return",!0);case 2:t=0,r=[],n=this.remoteUserList.filter((function(e){return a.showNonVideo?e:a.showOnlyAudioUser?e.streamList.length>0&&("OPEN"===e.streamList[0].micStatus||"OPEN"===e.streamList[0].cameraStatus):e.streamList.length>0&&"OPEN"===e.streamList[0].cameraStatus})),this.sidebarEnabled?((i=n.findIndex((function(e){return e.pin})))>-1?(r=this.remoteUserList.filter((function(e){return!e.pin})),this.openVideo(this.remoteUserList[i])):(r=n.slice(0,n.length-1),this.openVideo(n[n.length-1])),t++):r=n,s=0;case 6:if(!(s<r.length)){e.next=19;break}if(!(this.showNonVideo||r[s].streamList.length>0&&("OPEN"===r[s].streamList[0].cameraStatus||r[s].overScreenMuteVideo))){e.next=16;break}if(!(++t>this.screenNumber||t===this.screenNumber&&r[s+1]&&r[s+1].streamList.length>0&&("OPEN"===r[s+1].streamList[0].cameraStatus||"OPEN"===r[s+1].streamList[0].micStatus))){e.next=14;break}return e.next=12,this.muteVideo(r[s]);case 12:e.next=16;break;case 14:return e.next=16,this.openVideo(r[s]);case 16:s++,e.next=6;break;case 19:return e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openVideo",value:function(){var e=i(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.streamList.length){e.next=16;break}r=0;case 2:if(!(r<t.streamList.length)){e.next=16;break}if(!t.overScreenMuteVideo){e.next=13;break}return e.prev=4,e.next=7,this.zg.mutePlayStreamVideo(t.streamList[r].streamID,!1);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("\u3010ZEGOCLOUD\u3011openVideo failed:",e.t0);case 12:t.overScreenMuteVideo=!1;case 13:r++,e.next=2;break;case 16:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"muteVideo",value:function(){var e=i(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.streamList.length){e.next=16;break}r=0;case 2:if(!(r<t.streamList.length)){e.next=16;break}if(t.overScreenMuteVideo){e.next=13;break}return e.prev=4,e.next=7,this.zg.mutePlayStreamVideo(t.streamList[r].streamID,!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("muteVideo failed:",e.t0);case 12:t.overScreenMuteVideo=!0;case 13:r++,e.next=2;break;case 16:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"userUpdate",value:function(){var e=i(o().mark((function e(t,r,n){var i,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ADD"===r?(this.userOrderList=[].concat(O(this.userOrderList),O(n.map((function(e){return e.userID})))),n.forEach((function(e){s.remoteUserList.some((function(t){return t.userID===e.userID}))?(s.remoteUserList.sort((function(e,t){return s.userOrderList.findIndex((function(e){return e===t.userID}))-s.userOrderList.findIndex((function(t){return t===e.userID}))})),console.error("\u3010ZEGOCLOUD\u3011 repeat u ser add!!")):s.remoteUserList.unshift({userID:e.userID,userName:e.userName,streamList:[],pin:!1})}))):"DELETE"===r&&n.forEach((function(e){var t=s.remoteUserList.findIndex((function(t){return t.userID===e.userID}));t>-1&&s.remoteUserList.splice(t,1),(t=s.userOrderList.findIndex((function(t){return t===e.userID})))>-1&&s.userOrderList.splice(t,1)})),console.warn("\u3010ZEGOCLOUD\u3011userUpdate",r,this.remoteUserList),e.next=4,this.updateStream();case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,o){return e.apply(this,arguments)}}()},{key:"mainStreamUpdate",value:function(){var e=i(o().mark((function e(t,r){var n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.filter((function(e){if(e&&e.streamID&&e.streamID.includes("_main"))return!0;console.error("\u3010ZEGOCLOUD\u3011mainStreamUpdate stream empty",e)})).forEach((function(e){if(console.warn("\u3010ZEGOCLOUD\u3011mainStreamUpdate",t,r),i.remoteUserList.some((function(t){return t.userID===e.fromUser.userID}))){var o=i.remoteUserList.findIndex((function(t){return t.userID===e.fromUser.userID})),n=i.remoteUserList[o].streamList.findIndex((function(t){return t.streamID===e.streamID}));"ADD"===t?i.remoteUserList[o].streamList.push(e):"DELETE"===t&&n>-1?(i.remoteUserList[o].streamList.splice(n,1),0!=i.remoteUserList[o].streamList.length||i.userOrderList.some((function(e){return e===i.remoteUserList[o].userID}))||i.remoteUserList.splice(o,1)):"UPDATE"===t&&n>-1&&(i.remoteUserList[o].streamList[n]=e)}else"ADD"===t&&i.remoteUserList.push({userID:e.fromUser.userID,userName:e.fromUser.userName,streamList:[e],pin:!1})})),e.next=3,this.updateStream();case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"screenStreamUpdate",value:function(e,t){var r=this;t.filter((function(e){if(e&&e.streamID&&e.streamID.includes("_screensharing"))return!0})).forEach((function(t){if(r.remoteScreenStreamList.some((function(e){return e.userID===t.fromUser.userID}))){var o=r.remoteScreenStreamList.findIndex((function(e){return e.userID===t.fromUser.userID})),n=r.remoteScreenStreamList[o].streamList.findIndex((function(e){return e.streamID===t.streamID}));"ADD"===e?r.remoteScreenStreamList[o].streamList.push(t):"DELETE"===e&&n>-1?r.remoteScreenStreamList.splice(o,1):"UPDATE"===e&&n>-1&&(r.remoteScreenStreamList[o].streamList[n]=t)}else"ADD"===e&&r.remoteScreenStreamList.push({userID:t.fromUser.userID,userName:t.fromUser.userName,streamList:[t],pin:!1})}))}},{key:"setLiveStates",value:function(){var e=i(o().mark((function e(t){var r,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scenario!==g.LiveStreaming||this.role!==_.Audience){e.next=14;break}if(this.isLive=t,"1"!==t){e.next=12;break}r=o().mark((function e(t){var r,n,s,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.zg.startPlayingStream(i.waitingPullStreams[t].streamID,{resourceMode:i.isL3Live?2:0});case 3:r=e.sent,i.waitingPullStreams[t].streamID.includes("_screensharing")?(n=i.remoteScreenStreamList.findIndex((function(e){return e.userID===i.waitingPullStreams[t].userID})),s=i.remoteScreenStreamList[n].streamList.findIndex((function(e){return e.streamID===i.waitingPullStreams[t].streamID})),i.remoteScreenStreamList[n].streamList[s].media=r):(a=i.remoteUserList.findIndex((function(e){return e.userID===i.waitingPullStreams[t].userID})),c=i.remoteUserList[a].streamList.findIndex((function(e){return e.streamID===i.waitingPullStreams[t].streamID})),i.remoteUserList[a].streamList[c].media=r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("\u3010ZEGOCLOUD\u3011 playStream failed ,ignore continue !!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),n=0;case 5:if(!(n<this.waitingPullStreams.length)){e.next=10;break}return e.delegateYield(r(n),"t0",7);case 7:n++,e.next=5;break;case 10:e.next=14;break;case 12:this.remoteUserList=this.remoteUserList.map((function(e){return e.streamList=e.streamList.map((function(e){return e.media&&i.zg.stopPlayingStream(e.streamID),i.waitingPullStreams.some((function(t){return t.streamID===e.streamID}))||i.waitingPullStreams.push({streamID:e.streamID,userID:e.fromUser.userID}),e.media=void 0,e})),e})),this.remoteScreenStreamList=this.remoteScreenStreamList.map((function(e){return e.streamList=e.streamList.map((function(e){return e.media&&i.zg.stopPlayingStream(e.streamID),i.waitingPullStreams.some((function(t){return t.streamID===e.streamID}))||i.waitingPullStreams.push({streamID:e.streamID,userID:e.fromUser.userID}),e.media=void 0,e})),e}));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startPullStream",value:function(){var e=i(o().mark((function e(t,r){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scenario!==g.LiveStreaming||this.role!==_.Audience){e.next=13;break}if("1"!==this.isLive){e.next=8;break}return e.next=4,this.zg.startPlayingStream(r,{resourceMode:this.isL3Live?2:0});case 4:return n=e.sent,e.abrupt("return",n);case 8:if("0"!==this.isLive){e.next=11;break}return this.waitingPullStreams.push({streamID:r,userID:t}),e.abrupt("return",void 0);case 11:e.next=17;break;case 13:return e.next=15,this.zg.startPlayingStream(r,{resourceMode:this.isL3Live?2:0});case 15:return i=e.sent,e.abrupt("return",i);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"stopPullStream",value:function(e,t){if(this.scenario===g.LiveStreaming&&this.role===_.Audience){if("1"===this.isLive)this.zg.stopPlayingStream(t);else if("0"===this.isLive){var r=this.waitingPullStreams.findIndex((function(e){return e.streamID===t}));r>-1&&this.waitingPullStreams.splice(r,1)}}else this.zg.stopPlayingStream(t)}},{key:"reset",value:function(){this.remoteUserList=[],this.waitingPullStreams=[],this.isLive="0",this.screenNumber=0,this.sidebarEnabled=!1,this.remoteUserList=[],this.remoteScreenStreamList=[]}},{key:"updateUserInfo",value:function(e,t,r){this.remoteUserList.some((function(o){return o.userID===e&&(o[t]=r,!0)})),this.remoteScreenStreamList.some((function(o){return o.userID===e&&(o[t]=r,!0)}))}},{key:"updateStreamInfo",value:function(e,t,r,o){this.remoteUserList.some((function(n){return n.userID===e&&n.streamList.some((function(e){return e.streamID===t&&(e[r]=o,!0)})),!1})),this.remoteScreenStreamList.some((function(n){return n.userID===e&&n.streamList.some((function(e){return e.streamID===t&&(e[r]=o,!0)})),!1}))}}]),e}(),J=function(){function e(){var t=this;s(this,e),this.zum=void 0,this._expressConfig=void 0,this.zegoSuperBoard=void 0,this.zegoSuperBoardView=void 0,this.status={loginRsp:!1,videoRefuse:!1,audioRefuse:!1},this.remoteStreamMap={},this.waitingHandlerStreams={add:[],delete:[]},this._config={container:void 0,preJoinViewConfig:{title:"Join Room",invitationLink:window.location.href},showPreJoinView:!0,turnOnMicrophoneWhenJoining:!0,turnOnCameraWhenJoining:!0,showMyCameraToggleButton:!0,showMyMicrophoneToggleButton:!0,showAudioVideoSettingsButton:!0,showTextChat:!0,showUserList:!0,lowerLeftNotification:{showUserJoinAndLeave:!0,showTextChat:!0},branding:{logoURL:""},showLeavingView:!0,maxUsers:0,layout:"Auto",showNonVideoUser:!0,showOnlyAudioUser:!1,useFrontFacingCamera:!0,onJoinRoom:function(){},onLeaveRoom:function(){},onUserJoin:function(e){},onUserLeave:function(e){},onUserAvatarSetter:function(e){},sharedLinks:[],showScreenSharingButton:!0,scenario:{mode:g.OneONoneCall,config:{role:_.Host,liveStreamingMode:void 0}},facingMode:"user",joinRoomCallback:function(){},leaveRoomCallback:function(){},userUpdateCallback:function(){},showLayoutButton:!0,showPinButton:!0,whiteboardConfig:{showAddImageButton:!1},videoResolutionList:[],plugins:{}},this._currentPage="BrowserCheckPage",this.extraInfoKey="extra_info",this._roomExtraInfo={live_status:{v:0,u:"xxx",r:0}},this.NetworkStatusTimer=null,this.subscribeUserListCallBack=void 0,this.subscribeScreenStreamCallBack=void 0,this.subscribeWhiteBoardCallBack=void 0,this.onRemoteMediaUpdateCallBack=function(){var e=i(o().mark((function e(r,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.zum.mainStreamUpdate(r,n);case 2:return e.next=4,t.zum.screenStreamUpdate(r,n);case 4:t.subscribeUserListCallBack&&t.subscribeUserListCallBack(O(t.zum.remoteUserList)),t.subscribeScreenStreamCallBack&&t.subscribeScreenStreamCallBack(O(t.zum.remoteScreenStreamList));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.onNetworkStatusQualityCallBack=void 0,this.onRemoteUserUpdateCallBack=void 0,this.onSoundLevelUpdateCallBack=void 0,this.onRoomLiveStateUpdateCallBack=void 0,this.onRoomMessageUpdateCallBack=void 0,this.onScreenSharingEndedCallBack=void 0,this.onNetworkStatusCallBack=void 0,this.coreErrorCallback=void 0}return c(e,[{key:"isCDNLive",get:function(){var e,t;return(null===(e=this._config.scenario)||void 0===e?void 0:e.mode)===g.LiveStreaming&&(null===(t=this._config.scenario.config)||void 0===t?void 0:t.role)===_.Audience&&this._config.scenario.config.liveStreamingMode===v.StandardLive}},{key:"addPlugins",value:function(e){this._config.plugins=e}},{key:"setConfig",value:function(e){var t,r,o,n,i,s,a;if(e.scenario&&e.scenario.mode===g.LiveStreaming){if(!0===e.showNonVideoUser)return console.error("\u3010ZEGOCLOUD\u3011 showNonVideoUser have be false scenario.mode is LiveStreaming!!"),!1;if(e.showNonVideoUser=!1,e.showOnlyAudioUser=!0,e.scenario.config&&e.scenario.config.role===_.Host){if(!1===e.turnOnMicrophoneWhenJoining&&!1===e.turnOnCameraWhenJoining&&!1===e.showMyCameraToggleButton&&!1===e.showAudioVideoSettingsButton)return console.error("\u3010ZEGOCLOUD\u3011 Host could turn on at least one of the camera and the microphone!!"),!1}else if(e.scenario.config&&e.scenario.config.role===_.Audience&&(!0===e.turnOnMicrophoneWhenJoining||!0===e.turnOnCameraWhenJoining||!0===e.showMyCameraToggleButton||!0===e.showMyMicrophoneToggleButton||!0===e.showAudioVideoSettingsButton||!0===e.showScreenSharingButton||!0===e.useFrontFacingCamera||e.layout&&"Grid"!==e.layout))return console.error("\u3010ZEGOCLOUD\u3011 Audience cannot configure camera and microphone related params"),!1;e.maxUsers||(e.maxUsers=0),e.scenario.config&&e.scenario.config.role===_.Audience&&(e.turnOnMicrophoneWhenJoining=!1,e.turnOnCameraWhenJoining=!1,e.showMyCameraToggleButton=!1,e.showMyMicrophoneToggleButton=!1,e.showAudioVideoSettingsButton=!1,e.showScreenSharingButton=!1,e.useFrontFacingCamera=!1,e.useFrontFacingCamera=!1,e.showUserList=void 0!==e.showUserList&&e.showUserList,e.showPinButton=!1,e.showLayoutButton=!1,e.layout="Grid",e.lowerLeftNotification={showTextChat:!1,showUserJoinAndLeave:!1})}(e.scenario&&e.scenario.mode===g.OneONoneCall&&(e.maxUsers||(e.maxUsers=0),e.showLayoutButton=!1,e.showPinButton=!1),e.scenario&&e.scenario.mode===g.GroupCall&&(e.maxUsers||(e.maxUsers=0)),e.facingMode&&(e.useFrontFacingCamera="user"===e.facingMode),e.joinRoomCallback&&(e.onJoinRoom=e.joinRoomCallback),e.leaveRoomCallback&&(e.onLeaveRoom=e.leaveRoomCallback),e.userUpdateCallback&&(e.onUserJoin=function(t){e.userUpdateCallback&&e.userUpdateCallback("ADD",t)},e.onUserLeave=function(t){e.userUpdateCallback&&e.userUpdateCallback("DELETE",t)}),e.preJoinViewConfig&&e.preJoinViewConfig.invitationLink&&(e.sharedLinks=[{name:"Share the link",url:e.preJoinViewConfig.invitationLink}]),e.videoResolutionDefault)&&(e.videoResolutionList||(e.videoResolutionList=[]),null===(a=e.videoResolutionList)||void 0===a||a.unshift(e.videoResolutionDefault));if(e.videoResolutionList&&e.videoResolutionList.length>0){var c=Array.from(new Set(e.videoResolutionList)).filter((function(e){return e===m._180P||e===m._360P||e===m._480P||e===m._720P}));e.videoResolutionList=c.length>0?c:[m._360P]}else e.videoResolutionList=[m._360P];return e.preJoinViewConfig&&(e.preJoinViewConfig=w(w({},this._config.preJoinViewConfig),e.preJoinViewConfig)),e.scenario&&e.scenario.config&&(e.scenario.config=w(w({},null===(t=this._config.scenario)||void 0===t?void 0:t.config),e.scenario.config)),this._config=w(w({},this._config),e),this.zum.scenario=(null===(r=this._config.scenario)||void 0===r?void 0:r.mode)||g.OneONoneCall,this.zum.role=(null===(o=this._config.scenario)||void 0===o||null===(n=o.config)||void 0===n?void 0:n.role)||_.Host,this.zum.liveStreamingMode=(null===(i=this._config.scenario)||void 0===i||null===(s=i.config)||void 0===s?void 0:s.liveStreamingMode)||v.RealTimeLive,this.zum.showOnlyAudioUser=!!this._config.showOnlyAudioUser,this.zum.setShowNonVideo(!!this._config.showNonVideoUser),!0}},{key:"checkWebRTC",value:function(){var t=i(o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isCDNLive){t.next=8;break}return t.next=3,e._zg.checkSystemRequirements("webRTC");case 3:return r=t.sent,t.next=6,e._zg.checkSystemRequirements("H264");case 6:return n=t.sent,t.abrupt("return",!!r.result&&!!n.result);case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setPin",value:function(e,t,r){this.zum.setPin(e,t),r||this.subscribeUserListCallBack&&this.subscribeUserListCallBack(O(this.zum.remoteUserList))}},{key:"setMaxScreenNum",value:function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.zum.setMaxScreenNum(t);case 2:r||this.subscribeUserListCallBack&&this.subscribeUserListCallBack(O(this.zum.remoteUserList));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setSidebarLayOut",value:function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.zum.setSidebarLayOut(t);case 2:r||this.subscribeUserListCallBack&&this.subscribeUserListCallBack(O(this.zum.remoteUserList));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setShowNonVideo",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.zum.setShowNonVideo(t);case 2:this.subscribeUserListCallBack&&this.subscribeUserListCallBack(O(this.zum.remoteUserList));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setCurrentPage",value:function(e){this._currentPage=e}},{key:"getCameras",value:function(){return e._zg.getCameras()}},{key:"useVideoDevice",value:function(t,r){return e._zg.useVideoDevice(t,r)}},{key:"getMicrophones",value:function(){return e._zg.getMicrophones()}},{key:"getSpeakers",value:function(){return e._zg.getSpeakers()}},{key:"setVolume",value:function(e,t){e.volume=t}},{key:"createStream",value:function(){var t=i(o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._zg.createStream(r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAndPublishWhiteboard",value:function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.zegoSuperBoard.setToolType(1),this.zegoSuperBoard.setBrushColor("#333333"),this.zegoSuperBoard.setBrushSize(6),this.zegoSuperBoard.setFontItalic(!1),this.zegoSuperBoard.setFontBold(!1),this.zegoSuperBoard.setFontSize(24),e.next=8,this.zegoSuperBoard.createWhiteboardView({name:r,perPageWidth:1480.3,perPageHeight:758.5,pageCount:5});case 8:return e.abrupt("return",this.zegoSuperBoard.getSuperBoardView());case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setWhiteboardToolType",value:function(){var e=i(o().mark((function e(t,r,n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:512===t?(i=this.zegoSuperBoard.getSuperBoardView().getCurrentSuperBoardSubView())&&i.clearCurrentPage():(this.zegoSuperBoard.setToolType(t),[1,4,8,16].includes(t)&&(r&&this.zegoSuperBoard.setBrushSize(r),n&&this.zegoSuperBoard.setBrushColor(n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,o){return e.apply(this,arguments)}}()},{key:"setWhiteboardFont",value:function(e,t,r){"BOLD"===e?this.zegoSuperBoard.setFontBold(!0):"NO_BOLD"===e?this.zegoSuperBoard.setFontBold(!1):"ITALIC"===e?this.zegoSuperBoard.setFontItalic(!0):"NO_ITALIC"===e&&this.zegoSuperBoard.setFontItalic(!1),t&&this.zegoSuperBoard.setFontSize(t),r&&this.zegoSuperBoard.setBrushColor(r)}},{key:"setVideoConfig",value:function(){var t=i(o().mark((function t(r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._zg.setVideoConfig(r,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"stopPublishingStream",value:function(t){return e._zg.stopPublishingStream(t)}},{key:"destroyStream",value:function(t){e._zg.destroyStream(t)}},{key:"destroyAndStopPublishWhiteboard",value:function(){var e=i(o().mark((function e(){var t,r,n,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=null===(t=this.zegoSuperBoard.getSuperBoardView())||void 0===t||null===(r=t.getCurrentSuperBoardSubView())||void 0===r?void 0:r.getModel().uniqueID)&&this.zegoSuperBoard.destroySuperBoardSubView(n),e.next=4,this.zegoSuperBoard.querySuperBoardSubViewList();case 4:i=e.sent,s=0;case 6:if(!(s<i.length)){e.next=12;break}return e.next=9,this.zegoSuperBoard.destroySuperBoardSubView(i[s].uniqueID);case 9:s++,e.next=6;break;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"useCameraDevice",value:function(t,r){return e._zg.useVideoDevice(t,r)}},{key:"useMicrophoneDevice",value:function(t,r){return e._zg.useAudioDevice(t,r)}},{key:"useSpeakerDevice",value:function(){var t=i(o().mark((function t(r,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.srcObject){t.next=2;break}return t.abrupt("return",Promise.resolve({errorCode:-1}));case 2:return t.prev=2,t.next=5,e._zg.useAudioOutputDevice(r,n);case 5:return i=t.sent,t.abrupt("return",{errorCode:i?0:-1});case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",{errorCode:-1});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"enableVideoCaptureDevice",value:function(){var t=i(o().mark((function t(r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._zg.enableVideoCaptureDevice(r,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"mutePublishStreamVideo",value:function(){var t=i(o().mark((function t(r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._zg.mutePublishStreamVideo(r,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"mutePublishStreamAudio",value:function(){var t=i(o().mark((function t(r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._zg.mutePublishStreamAudio(r,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"muteMicrophone",value:function(){var t=i(o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._zg.muteMicrophone(r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"roomExtraInfo",get:function(){return this._roomExtraInfo},set:function(e){var t=this;"Room"===this._currentPage?(this._roomExtraInfo=e,this.zum.setLiveStates(this._roomExtraInfo.live_status),this._config.onLiveStart&&"1"==this._roomExtraInfo.live_status?this._config.onLiveStart({userID:this._expressConfig.userID,userName:this._expressConfig.userID}):this._config.onLiveEnd&&"0"==this._roomExtraInfo.live_status&&this._config.onLiveEnd({userID:this._expressConfig.userID,userName:this._expressConfig.userID}),this.onRoomLiveStateUpdateCallBack&&this.onRoomLiveStateUpdateCallBack(this._roomExtraInfo.live_status)):"BrowserCheckPage"!==this._currentPage&&"RejoinRoom"!==this._currentPage||setTimeout((function(){t.roomExtraInfo=e}),1e3)}},{key:"setLive",value:function(){var t=i(o().mark((function t(r){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=w(w({},this._roomExtraInfo),{live_status:"live"===r?"1":"0"}),t.next=3,e._zg.setRoomExtraInfo(e._instance._expressConfig.roomID,"extra_info",JSON.stringify(n));case 3:return 0===(i=t.sent).errorCode&&(this.roomExtraInfo=n),t.abrupt("return",0===i.errorCode);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"enterRoom",value:function(){var t=i(o().mark((function t(){var r,n,s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.status.loginRsp){t.next=2;break}return t.abrupt("return",Promise.resolve(0));case 2:return null!==(r=this._config.plugins)&&void 0!==r&&r.ZegoSuperBoardManager&&(this.zegoSuperBoard=this._config.plugins.ZegoSuperBoardManager.getInstance(),this.zegoSuperBoard.init(e._zg,{isTestEnv:!1,parentDomID:"ZegoCloudWhiteboardContainer",appID:this._expressConfig.appID,userID:this._expressConfig.userID,token:this._expressConfig.token}),this.zegoSuperBoard.setWhiteboardBackgroundColor("#ffffff")),e._zg.off("roomExtraInfoUpdate"),e._zg.off("roomStreamUpdate"),e._zg.off("remoteCameraStatusUpdate"),e._zg.off("remoteMicStatusUpdate"),e._zg.off("playerStateUpdate"),e._zg.off("roomUserUpdate"),e._zg.off("IMRecvBroadcastMessage"),e._zg.off("roomStateUpdate"),e._zg.off("publisherStateUpdate"),e._zg.off("publishQualityUpdate"),e._zg.off("soundLevelUpdate"),this.zegoSuperBoard&&(this.zegoSuperBoard.off("remoteSuperBoardSubViewAdded"),this.zegoSuperBoard.off("remoteSuperBoardSubViewRemoved")),e._zg.on("roomStreamUpdate",function(){var e=i(o().mark((function e(t,r,n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"ADD"===r?(s.waitingHandlerStreams.add=[].concat(O(s.waitingHandlerStreams.add),O(n)),s.waitingHandlerStreams.delete=s.waitingHandlerStreams.delete.filter((function(e){return!n.some((function(t){return t.streamID===e.streamID}))}))):(a=[],s.waitingHandlerStreams.add=s.waitingHandlerStreams.add.filter((function(e){return!n.some((function(t){return t.streamID===e.streamID&&(a.push(t.streamID),!0)}))})),n=n.filter((function(e){return!a.some((function(t){return t==e.streamID}))})),s.waitingHandlerStreams.delete=[].concat(O(s.waitingHandlerStreams.delete),O(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,r,o,n){return e.apply(this,arguments)}}()),e._zg.on("roomExtraInfoUpdate",(function(e,t){t.forEach((function(e){e.key===s.extraInfoKey&&(s.roomExtraInfo=JSON.parse(e.value))}))})),e._zg.on("remoteCameraStatusUpdate",(function(e,t){s.remoteStreamMap[e]&&(s.remoteStreamMap[e].cameraStatus=t,s.onRemoteMediaUpdateCallBack&&s.onRemoteMediaUpdateCallBack("UPDATE",[s.remoteStreamMap[e]]))})),e._zg.on("remoteMicStatusUpdate",(function(e,t){s.remoteStreamMap[e]&&(s.remoteStreamMap[e].micStatus=t,s.onRemoteMediaUpdateCallBack&&s.onRemoteMediaUpdateCallBack("UPDATE",[s.remoteStreamMap[e]]))})),e._zg.on("playerStateUpdate",(function(e){console.warn("\u3010ZEGOCLOUD\u3011",e),s.remoteStreamMap[e.streamID]&&(s.remoteStreamMap[e.streamID].state=e.state,s.onRemoteMediaUpdateCallBack&&s.onRemoteMediaUpdateCallBack("UPDATE",[s.remoteStreamMap[e.streamID]])),1104038===e.errorCode&&s.coreErrorCallback(b.notSupportStandardLive,e.extendedData)})),e._zg.on("roomUserUpdate",(function(e,t,r){console.warn("\u3010ZEGOCLOUD\u3011roomUserUpdate",t,r,s.onRemoteUserUpdateCallBack),s.onRemoteUserUpdateCallBack?s.onRemoteUserUpdateCallBack(e,t,r):setTimeout((function(){s.onRemoteUserUpdateCallBack&&s.onRemoteUserUpdateCallBack(e,t,r)}),1e3)})),e._zg.on("IMRecvBroadcastMessage",(function(e,t){s.onRoomMessageUpdateCallBack&&s.onRoomMessageUpdateCallBack(e,t)})),e._zg.on("publisherStateUpdate",(function(t){var r="DISCONNECTED";"PUBLISHING"===t.state?r="CONNECTED":"NO_PUBLISH"===t.state?r="DISCONNECTED":"PUBLISH_REQUESTING"===t.state&&(r="CONNECTING"),s.onNetworkStatusCallBack&&s.onNetworkStatusCallBack(e._instance._expressConfig.roomID,"STREAM",r)})),e._zg.on("playQualityUpdate",(function(e,t){s.onNetworkStatusQualityCallBack&&s.onNetworkStatusQualityCallBack(e,Math.max(t.video.videoQuality,t.audio.audioQuality))})),e._zg.on("publishQualityUpdate",(function(e,t){s.onNetworkStatusQualityCallBack&&s.onNetworkStatusQualityCallBack(e,Math.max(t.video.videoQuality,t.audio.audioQuality))})),e._zg.on("soundLevelUpdate",(function(e){s.onSoundLevelUpdateCallBack&&s.onSoundLevelUpdateCallBack(e)})),e._zg.on("screenSharingEnded",(function(e){s.onScreenSharingEndedCallBack&&s.onScreenSharingEndedCallBack(e)})),this.zegoSuperBoard&&(this.zegoSuperBoard.on("remoteSuperBoardSubViewAdded",function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.zegoSuperBoard.querySuperBoardSubViewList();case 2:s.zegoSuperBoard.setToolType(1),s.zegoSuperBoard.setBrushColor("#333333"),s.zegoSuperBoard.setBrushSize(6),s.zegoSuperBoard.setFontItalic(!1),s.zegoSuperBoard.setFontBold(!1),s.zegoSuperBoard.setFontSize(24),s.zegoSuperBoardView=s.zegoSuperBoard.getSuperBoardView();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.zegoSuperBoard.on("remoteSuperBoardSubViewRemoved",(function(e){s.zegoSuperBoardView=null}))),this.isCDNLive&&e._zg.on("streamExtraInfoUpdate",(function(e,t){e===s._expressConfig.roomID&&(console.warn("streamExtraInfoUpdate",t),s.streamExtraInfoUpdateCallBack(t))})),t.next=31,new Promise(function(){var t=i(o().mark((function t(r,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._zg.on("roomStateUpdate",(function(e,t,o,n){s.onNetworkStatusCallBack&&s.onNetworkStatusCallBack(e,"ROOM",t),"CONNECTED"!==t&&"DISCONNECTED"!==t||(s.status.loginRsp=0===o,r(o))})),t.next=3,e._zg.loginRoom(e._instance._expressConfig.roomID,e._instance._expressConfig.token,{userID:e._instance._expressConfig.userID,userName:e._instance._expressConfig.userName},{userUpdate:!0,maxMemberCount:e._instance._config.maxUsers});case 3:if(!s.zegoSuperBoard){t.next=14;break}return s.zegoSuperBoard.setToolType(1),s.zegoSuperBoard.setBrushColor("#333333"),s.zegoSuperBoard.setBrushSize(6),s.zegoSuperBoard.setFontItalic(!1),s.zegoSuperBoard.setFontBold(!1),s.zegoSuperBoard.setFontSize(24),t.next=12,s.zegoSuperBoard.querySuperBoardSubViewList();case 12:t.sent.length>0&&(s.zegoSuperBoardView=s.zegoSuperBoard.getSuperBoardView());case 14:i={userID:e._instance._expressConfig.userID,userName:e._instance._expressConfig.userName,setUserAvatar:function(e){e&&"string"===typeof e&&(s._expressConfig.avatar=e)}},s._config.onUserAvatarSetter&&s._config.onUserAvatarSetter([i]);case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 31:return n=t.sent,e._zg.setSoundLevelDelegate(!0,300),this.streamUpdateTimer(this.waitingHandlerStreams),t.abrupt("return",n);case 35:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"streamUpdateTimer",value:function(){var e=i(o().mark((function e(t){var r,n,i,s,a,c,u,l,d=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status.loginRsp){e.next=3;break}return console.warn("\u3010ZEGOCLOUD\u3011logoutRoom,stop streamUpdateTimer"),e.abrupt("return");case 3:if("Room"!==this._currentPage){e.next=50;break}if(r=[],!(t.add.length>0)){e.next=31;break}n=0;case 7:if(!(n<t.add.length)){e.next=30;break}if(i=t.add[n],e.prev=9,!this.isCDNLive){e.next=16;break}i.urlsFLV||this.coreErrorCallback(b.notSupportCDNLive,"urlsFLV is empty"),s=JSON.parse(i.extraInfo),this.remoteStreamMap[i.streamID]={fromUser:i.user,media:void 0,micStatus:s.isMicrophoneOn?"OPEN":"MUTE",cameraStatus:s.isCameraOn?"OPEN":"MUTE",state:"PLAYING",streamID:i.streamID,urlsHttpsFLV:R(i.urlsHttpsFLV||i.urlsFLV),urlsHttpsHLS:R(i.urlsHttpsHLS||i.urlsHLS),hasAudio:s.hasAudio,hasVideo:s.hasVideo},e.next=20;break;case 16:return e.next=18,this.zum.startPullStream(i.user.userID,i.streamID);case 18:a=e.sent,this.remoteStreamMap[i.streamID]={fromUser:i.user,media:a,micStatus:a&&a.getAudioTracks().length>0?"OPEN":"MUTE",cameraStatus:a&&a.getVideoTracks().length>0?"OPEN":"MUTE",state:"PLAYING",streamID:i.streamID};case 20:r.push(this.remoteStreamMap[i.streamID]),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(9),console.warn("\u3010ZEGOCLOUD\u3011startPlayingStream error:",e.t0),110438===(null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)&&this.coreErrorCallback(b.notSupportStandardLive,null===e.t0||void 0===e.t0?void 0:e.t0.extendedData);case 27:n++,e.next=7;break;case 30:this.onRemoteMediaUpdateCallBack&&r.length>0&&this.onRemoteMediaUpdateCallBack("ADD",r);case 31:if(!(t.delete.length>0)){e.next=44;break}r=[],c=0;case 34:if(!(c<t.delete.length)){e.next=43;break}return u=t.delete[c],this.remoteStreamMap[u.streamID]&&r.push(this.remoteStreamMap[u.streamID]),e.next=39,this.zum.stopPullStream(u.user.userID,u.streamID);case 39:delete this.remoteStreamMap[u.streamID];case 40:c++,e.next=34;break;case 43:this.onRemoteMediaUpdateCallBack&&r.length>0&&this.onRemoteMediaUpdateCallBack("DELETE",r);case 44:void 0!==this.zegoSuperBoardView&&(this.subscribeWhiteBoardCallBack(this.zegoSuperBoardView),this.zegoSuperBoardView=void 0),l={add:this.waitingHandlerStreams.add.filter((function(e){return!t.add.some((function(t){return t.streamID===e.streamID}))})),delete:this.waitingHandlerStreams.delete.filter((function(e){return!t.delete.some((function(t){return t.streamID===e.streamID}))}))},this.waitingHandlerStreams=l,setTimeout((function(){d.streamUpdateTimer(d.waitingHandlerStreams)}),700),e.next=51;break;case 50:"BrowserCheckPage"!==this._currentPage&&"RejoinRoom"!==this._currentPage||setTimeout((function(){d.streamUpdateTimer(t)}),1e3);case 51:case"end":return e.stop()}}),e,this,[[9,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"publishLocalStream",value:function(t,r){if(!t)return!1;var o,n,i,s=(o=this._expressConfig.userID,n=this._expressConfig.roomID,i=(i=r)||"main","".concat(n,"_").concat(o,"_").concat(i));return e._zg.startPublishingStream(s,t)&&s}},{key:"replaceTrack",value:function(){var t=i(o().mark((function t(r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._zg.replaceTrack(r,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"subscribeUserList",value:function(e){this.subscribeUserListCallBack=e}},{key:"subscribeScreenStream",value:function(e){this.subscribeScreenStreamCallBack=e}},{key:"subscribeWhiteBoard",value:function(e){this.subscribeWhiteBoardCallBack=e}},{key:"onNetworkStatusQuality",value:function(e){this.onNetworkStatusQualityCallBack=e}},{key:"onRemoteUserUpdate",value:function(e){var t=this;this.onRemoteUserUpdateCallBack=function(){var r=i(o().mark((function r(n,i,s){var a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("BrowserCheckPage"!==t._currentPage&&"RejoinRoom"!==t._currentPage){r.next=4;break}setTimeout((function(){t.onRemoteUserUpdateCallBack(n,i,s)}),1e3),r.next=11;break;case 4:if("Room"!==t._currentPage){r.next=11;break}return e(n,i,s),r.next=8,t.zum.userUpdate(n,i,s);case 8:a=s.map((function(e){return e.setUserAvatar=function(r){r&&"string"===typeof r&&t.zum.updateUserInfo(e.userID,"avatar",r)},e})),"ADD"===i?(t._config.onUserAvatarSetter&&t._config.onUserAvatarSetter(a),t._config.onUserJoin&&t._config.onUserJoin(s)):t._config.onUserLeave&&t._config.onUserLeave(s),setTimeout((function(){console.warn("\u3010ZEGOCLOUD\u3011roomUserUpdate",O(t.zum.remoteUserList),O(t.zum.remoteUserList).length),t.subscribeUserListCallBack&&t.subscribeUserListCallBack(O(t.zum.remoteUserList))}),0);case 11:case"end":return r.stop()}}),r)})));return function(e,t,o){return r.apply(this,arguments)}}()}},{key:"onSoundLevelUpdate",value:function(e){this.onSoundLevelUpdateCallBack=e}},{key:"onRoomLiveStateUpdate",value:function(e){this.onRoomLiveStateUpdateCallBack=e}},{key:"sendRoomMessage",value:function(t){return e._zg.sendBroadcastMessage(e._instance._expressConfig.roomID,t)}},{key:"onRoomMessageUpdate",value:function(e){this.onRoomMessageUpdateCallBack=e}},{key:"onScreenSharingEnded",value:function(e){this.onScreenSharingEndedCallBack=e}},{key:"onNetworkStatus",value:function(e){var t=this;this.onNetworkStatusCallBack=function(r,o,n){"CONNECTING"===n?!t.NetworkStatusTimer&&(t.NetworkStatusTimer=setTimeout((function(){e(r,o,"DISCONNECTED")}),6e4)):t.NetworkStatusTimer&&(clearTimeout(t.NetworkStatusTimer),t.NetworkStatusTimer=null),e(r,o,n)}}},{key:"streamExtraInfoUpdateCallBack",value:function(e){var t=this;e.forEach((function(e){var r=JSON.parse(e.extraInfo);console.warn("extraInfo",r),void 0!==r.isCameraOn&&t.zum.updateStreamInfo(e.user.userID,e.streamID,"cameraStatus",r.isCameraOn?"OPEN":"MUTE"),void 0!==r.isMicrophoneOn&&t.zum.updateStreamInfo(e.user.userID,e.streamID,"micStatus",r.isMicrophoneOn?"OPEN":"MUTE"),void 0!==r.hasVideo&&t.zum.updateStreamInfo(e.user.userID,e.streamID,"hasVideo",!!r.hasVideo),void 0!==r.hasAudio&&t.zum.updateStreamInfo(e.user.userID,e.streamID,"hasAudio",!!r.hasAudio)})),this.subscribeUserListCallBack&&this.subscribeUserListCallBack(O(this.zum.remoteUserList)),this.subscribeScreenStreamCallBack&&this.subscribeScreenStreamCallBack(O(this.zum.remoteScreenStreamList))}},{key:"onCoreError",value:function(e){this.coreErrorCallback=e}},{key:"leaveRoom",value:function(){var t=this;if(this.status.loginRsp){for(var r in e._zg.off("streamExtraInfoUpdate"),e._zg.off("roomExtraInfoUpdate"),e._zg.off("roomStreamUpdate"),e._zg.off("remoteCameraStatusUpdate"),e._zg.off("remoteMicStatusUpdate"),e._zg.off("playerStateUpdate"),e._zg.off("roomUserUpdate"),e._zg.off("IMRecvBroadcastMessage"),e._zg.off("roomStateUpdate"),e._zg.off("publisherStateUpdate"),e._zg.off("publishQualityUpdate"),e._zg.off("soundLevelUpdate"),e._zg.off("screenSharingEnded"),e._zg.setSoundLevelDelegate(!1),this.onNetworkStatusCallBack=function(){},this.onRemoteMediaUpdateCallBack=function(){var e=i(o().mark((function e(r,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.zum.mainStreamUpdate(r,n);case 2:return e.next=4,t.zum.screenStreamUpdate(r,n);case 4:t.subscribeUserListCallBack&&t.subscribeUserListCallBack(O(t.zum.remoteUserList)),t.subscribeScreenStreamCallBack&&t.subscribeScreenStreamCallBack(O(t.zum.remoteScreenStreamList));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.onRemoteUserUpdateCallBack=function(){},this.onRoomMessageUpdateCallBack=function(){},this.onRoomLiveStateUpdateCallBack=function(){},this.subscribeUserListCallBack=function(){},this.zum.reset(),this.remoteStreamMap)e._zg.stopPlayingStream(r);this.remoteStreamMap={},this.waitingHandlerStreams={add:[],delete:[]},e._zg.logoutRoom(),this.status.loginRsp=!1}}},{key:"setStreamExtraInfo",value:function(t,r){return e._zg.setStreamExtraInfo(t,r)}}],[{key:"getInstance",value:function(t){var r=function(e){if(e.split("#").length>1){var t=JSON.parse(window.atob(e.split("#")[1]));return{appID:1*t.appID,userID:t.userID,userName:t.userName,roomID:t.roomID,token:e.split("#")[0]}}console.error("\u3010ZEGOCLOUD\u3011kitToken error")}(t);return!e._instance&&r&&(e._instance=new e,e._instance._expressConfig=r,e._zg=new A.ZegoExpressEngine(e._instance._expressConfig.appID,"wss://webliveroom"+e._instance._expressConfig.appID+"-api.zegocloud.com/ws"),e._instance.zum=new K(e._zg)),e._instance}}]),e}();J._instance=void 0,J._zg=void 0;var X="ZegoBrowserCheck_support__sbd6B",$="ZegoBrowserCheck_supportWrapper__r3z77",ee="ZegoBrowserCheck_videoWrapper__NOFS1",te="ZegoBrowserCheck_video__VbfN7",re="ZegoBrowserCheck_videoTip__dWf-m",oe="ZegoBrowserCheck_noCamera__9xMxX",ne="ZegoBrowserCheck_toolsWrapper__hEq27",ie="ZegoBrowserCheck_buttonTip__ykVWM",se="ZegoBrowserCheck_audioButton__v0Onk",ae="ZegoBrowserCheck_close__4hHbt",ce="ZegoBrowserCheck_videoButton__UqONc",ue="ZegoBrowserCheck_settingsButton__FvRs3",le="ZegoBrowserCheck_joinScreenWrapper__SJkEy",de="ZegoBrowserCheck_title__Jctj4",he="ZegoBrowserCheck_joinFormWrapper__psYI6",pe="ZegoBrowserCheck_userName__Zr9FC",fe="ZegoBrowserCheck_joinRoomButtonWrapper__zH-ZS",_e="ZegoBrowserCheck_joinRoomButton__7qzWa",ge="ZegoBrowserCheck_joinRoomButtonLoading__sImQI",me="ZegoBrowserCheck_joinRoomButtonTip__lUHG3",ve="ZegoBrowserCheck_shareLinkWrapper__tZYY3",ye="ZegoBrowserCheck_inviteLinkWrapper__RKXdK",be="ZegoBrowserCheck_inviteLinkWrapperLeft__L8o4j",Se="ZegoBrowserCheck_inviteLink__7dJaM",Ee="ZegoBrowserCheck_copyLinkButton__vjpz3",Te="ZegoBrowserCheck_smallSize__ms+Oy",we="zegoSetting_whiteTheme__nMYCQ",Ce="zegoSetting_blackTheme__W-0Rh",Ie="zegoSetting_right__ChTSN",Oe="zegoSetting_closeIcon__IM7U7",ke="zegoSetting_leftAudioTab__CPmPO",Re="zegoSetting_leftVideoTab__QsgcJ",Ae="zegoSetting_left__HUrZ0",Pe="zegoSetting_tabActive__6qZku",Le="zegoSetting_volumeWrapper__7p4if",Ne="zegoSetting_micIcon__cs4Lb",De="zegoSetting_micIconAcitve__9VAir",Me="zegoSetting_speakerIcon__gaTQ2",xe="zegoSetting_speakerIconAcitve__a2xCn",Be="zegoSetting_frame__bRXcp",Ue="zegoSetting_noFrame__JF8+8",je="zegoSetting_body__nPp9h",He="zegoSetting_header__DE0rs",ze="zegoSetting_content__n9L7P",Ve="zegoSetting_device__bNog8",qe="zegoSetting_volume__ZFHP1",Ge="zegoSetting_volumeActive__EPWiF",Ze="zegoSetting_speakerTestButton__gfrL3",Fe="zegoSetting_checkboxWrapper__m8qGj",We="zegoSetting_checkbox__XUpkO",Ye="zegoSetting_selected__1a7Tf",Qe="zegoSetting_rightAudio__ECjhV",Ke="zegoSetting_rightVideo__2Nu0p",Je="zegoSetting_previewVideo__9PTWS",Xe="zegoSelect_whiteTheme__6evPM",$e="zegoSelect_blackTheme__EdSmj",et="zegoSelect_optionsWrapper__RLuSr",tt="zegoSelect_selectInputWrapper__S+JmA",rt="zegoSelect_inputActived__7jVHQ",ot="zegoSelect_selectWrapper__1yY13",nt="zegoSelect_selectLabel__8uA0F",it="zegoSelect_noOptions__tWxy7",st="zegoSelect_showList__d7WlK",at="zegoSelect_option__gVcDM",ct="zegoSelect_optionSelected__9xBog",ut=__webpack_require__(2834),lt=function(t){l(o,t);var r=f(o);function o(){var t;s(this,o);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=r.call.apply(r,[this].concat(i))).state={value:"",name:"",showList:!1},t.listRef=e.createRef(),t.selectRef=e.createRef(),t.onCloseList=function(e){var r,o;t.listRef.current===e.target||null!==(r=t.listRef.current)&&void 0!==r&&r.contains(e.target)||t.selectRef.current===e.target||null!==(o=t.selectRef.current)&&void 0!==o&&o.contains(e.target)||t.setState({showList:!1})},t}return c(o,[{key:"handleChange",value:function(e){this.state.value!==e.value&&(this.setState(w({},e)),this.props.onChange&&this.props.onChange(e.value)),this.setState({showList:!1})}},{key:"handleClickInput",value:function(){var e;null!==(e=this.props.options)&&void 0!==e&&e.length&&this.setState({showList:!this.state.showList})}},{key:"setInitValue",value:function(){var e,t=this;if(null!==(e=this.props.options)&&void 0!==e&&e.length)if(this.props.initValue){var r=this.props.options.filter((function(e){return e.value===t.props.initValue}));this.setState(w({},r[0]))}else this.setState(w({},this.props.options[0]))}},{key:"componentDidMount",value:function(){this.setInitValue(),document.addEventListener("click",this.onCloseList)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onCloseList)}},{key:"componentDidUpdate",value:function(e){var t,r;(null===(t=this.props.options)||void 0===t?void 0:t.length)!==(null===(r=e.options)||void 0===r?void 0:r.length)&&this.setInitValue()}},{key:"render",value:function(){var e,t=this;return(0,ut.jsxs)("div",{className:"".concat(ot," ").concat("black"===this.props.theme?$e:Xe),children:[(0,ut.jsx)("label",{className:nt,children:this.props.label}),(0,ut.jsxs)("div",{ref:this.selectRef,className:"".concat(tt," ").concat(this.state.showList&&rt),onClick:function(){t.handleClickInput()},children:[(0,ut.jsx)("p",{className:this.state.name?"":it,children:this.state.name||this.props.placeholder}),(0,ut.jsx)("span",{})]}),(0,ut.jsx)("div",{ref:this.listRef,className:"".concat(et," ").concat(this.state.showList&&st),children:null===(e=this.props.options)||void 0===e?void 0:e.map((function(e){return(0,ut.jsx)("div",{className:"".concat(at," ").concat(t.state.value===e.value&&ct),onClick:function(){t.handleChange(e)},children:e.name},e.value)}))})]})}}]),o}(e.Component),dt="data:audio/mpeg;base64,SUQzBAAAAAAAOlRFTkMAAAANAAADTGF2ZjUxLjEyLjIAVFNTRQAAAA8AAANMYXZmNTguMjAuMTAwAAAAAAAAAAAAAAD/80DEABBhwqRzSCgABEQQCFxcXPgOAFAaUKChiIiIju9/8kJ5PQnyf5znOc//t1Oc53///kIQhBAjCYAAQOEcIATB8H//5cP///iMH+J1ABArrStslttbICCrZfSLE4HoS5nr7xPzI//zQsQZGoIq2l2PKADTVXzjdnVou6lIMQFVlOat3QrM9LMojChx3IQOpMYRRRrqei3mkJo1Ru/hMFp8rf1HM9GXFmxwkn0Ztxz6hE6ouSe5gpqNOfblH3IbD//t/5YAKoPy+thBUdShuP/zQMQLFyLC0l/PUACJL9c3LJxWvItHOfG5/n71/LZTTy6pNnOjGtIiiGKctjBcLYKixytRzzVJrmWRfq5j/U4pU//+pZkOLGHu//0ob5py6/c3/z//U7cppeuMOeGFADskskbaSUEp//NCxAkWOyrmXmHLCgY8NuTy8fPKC4N0vIaTDiSIw9LL/tairSmyOuxRlfRTC4Qx3y91HVZ0/ZSD/JKzEIP/+lhaLsp6zf/vzo496v7O/v4o4x9P6J+TUn9G8YDMUucslaEnDEhEzGOJ//NAxAwWkx7RtsMKX8+4A7EVJdRF6NnsQLK3ReteUMFpWt4MLPvr4pvaKPsfpr0PUTVAVPP9oxxNZOpUUW/rp9v5WeNppX//2AZRbf3jv+z00f/jV/506fh1nKoAWRIpmtjMQaNgFez/80LEDBZS3s58ewRVZYp0n0QlHlWhWx1hvuw9XtsCihrCVjO3SAjEMIVWDOZCvwQMBFzGerfwwsEVPqEenUd8rf+ijCbAIunL//yHAg4l/t/2+n/JBkhPjPoqJFalkj0iSVHYwsoZNNP/80DEDhei3uJeeoT+VWGTpUKpq1T+NmNti9YBsU4n8mRBk8xzhrNb5ppASNd/ox8hPcZCd+oML6zRkWRihbp+geEpZihMrNz/71fnHIVvogpvy/6o3nrr1BYq/+IKbWtZ4dr7I5MIPv/zQsQKE+M7Bn5SSh4XyQho78QjR+o1cZarhD8gNEiygfLTggd0RjI4/9GOZFeT+Jhxwwlx/9P7rP9fozmMsZlb/9///kOPf6Nl+3/ZPX///zjqBF0OJmbtk9OIEUSUMpJW51rQtD5Ocf/zQMQWE7pW3n5ZiwS7lZMtZLRh/FQ8JRsuEN2jzIpl+348zHK+V9CPpskS+v6JKdxmhGr/q/+z/swTDO7/PB7ZTo6iZV0Mes3l3tzVTY8QVJ2kIdMOpXBrzY6nzecbKyGaZhABrV0X//NCxCIT0gbWfnoEeH0yy0h38N1BPJq+X8gMwoX33ON+Lb/+hUM0Fa9v+pRb8p6w1p3/zdKZmJQ155UAatbSfpAkMHAEzAFhiDe0pF2/3BdW1CfFZQmdWFa0tSGbvZ2ge48o5f8ilCBW//NAxC4UScK+VHrElPivpEGjN/X6mT//wb1Cxs5W6aUg8S6hKN9D3N019hYP1uoKqgB7mmYj6MxyDQuD+xv5N+50kfh7b3NptJ2xdxlB3E5a6fSNWuDcgS3ee4MAmf1b6GD5f4J/spn/80LENxQaWtZ+YYUEXb/+r1V7ro3//f6zTYhuTKLtdsU7lD3kMnUM+VnlV9kSag6SEs8G6sKrFg6HBE380hprsnH1iSFGr6UWOzKaw50wL0zuziWVf/OWj/wT/hllb/+tSBhMp4a/xI//80DEQhO5ws5+ewQc5kQOkM3ErtVmlX8EWCzrJbbZGkVBiYjFMOEq3ngqEaK2s9ju5EV/ExqXagJc9nKigNWs0Cqd9hMqOtOZ1RUHixJH+o+/81//05Vkuz2r/1+q2/9v///7O30qUf/zQsROFFLq3l5iTnbZ7UaqMThESJZY2wQOMRjGmJLRmyT1AvZsWr5IP/dLnj4Oj1dQhB//bD04bYOnHu9vE4kD/r+ysKsnepX+hTv//0PGwiTVb6pISdQBb/8qI/JeoAWOduay/6iqNP/zQMRYE+m+ux57CsjatNgtc9cCdH2QAQBLz8H5vPtGUg6OLOwXf5N3M0cZzlN0I4g1G/+5Dg/53t0qRn+39n9E7p/RtNeN4d1eujKnXi+hNmYVbtrstskhoDVC5cuQEMRJsjYaDiCF//NCxGMTUi7SVnpEciHtDnxAKCZCfjLHpWOhCXXMqUW0vH5bsACBgFZGsvcxlHOnn46putNuTyLAKwI9ryRQellqa5bgcQPiWudw+MToiAmXAfA2Zkw4BopsiEM2ZNPMNJCm3XZacbYL//NAxHEkiZLmXM4YeuWjQ/JY8IZ90p1ylTAgsTAlquoN4IBbBwTAmDgWXaaiRqoiaGTbbS1CsPmnQlYgEDAgu6/RQeLSmhwCowQsxRVCYXjJIBFRLi7YKdF4AqgUCqRRIomiHq9zCtT/80LEOSBJWtL8y9Lw2vqkFKrR7IUpDJhNrLdTsTbGZ9r7g2KpRLgkKOhHUhaoau4uRHeroGiQJTFaAloc15cRkgwGAwrrSx7vZhWA1vNMrDH+IOIHVRl+U8JgS0QiKNXIDInVISLOuRL/80DEExcjMtROYJseiBMHfUFyIcUWI+KTgLZApcU7tBamW6CipfUtmRNVkoy1azTJRyfp61otUW7J/6+VH8xs3UYt/Tb//mQ7ief/lB/+Ymy0ViYgV2WAN/qTmHsjrcpy21Q6MxLLcv/zQsQRFVj+zPZ5huDMKq6QmEz/OvkqX6Mu2AZiviyljJM2QiUs26FGMMGiTHJucHWXj1u6cUJGkpVcsNVMEsRVMPSwciFxIY2dxLBp/kPSo8oIUAx92LUuS9EfqMqDVI0ylRZi0ejcBv/zQMQXFTm2tEzDxFicqerBv4x0FOk5Yz3wugfnE/LBA3KY6r7d3avcxgS5HbbRNLrUlv/6jPiau3QnUEiezpqnuVAgcH7dPm1NKYAEEOnbXe23j2x8Rs4Mc7yrvViZxnw/wYU5F7mn//NCxB0T4yrefkvKyJi2QDWt+zVqgbdLamu1v+qGVauV9Kv0qVCmdv9ujInSlXv//paqeiv9uuX/5c3/p/+PdYAK9LdLG5R/H2ND/BOQyfGbyhGGJC5pevgDCQNNT9CPi2+600pISlYq//NAxCkUAd7FvkjFKLV2h9PDEn7ZKP/y5qjKdpn/u7PAYRF9wVr/iR3o9k/wrez+iig8BOCYIi5ff3Xfib/Msuai5iOFH0ypXnEs/mguEAoeqo1IwT81fFSmEiJrhloOiMuzgl/NfoT/80LENBMbKtp+YEU8l/+QyAElkre6/+ZL/jX76//s7v///d8UyoACFWHW7R12isn+TI6DUgeagf9kB1slcpnxxkzG1NTdGrTdrxXv48n2KW2CyE+VgahDF/BjfRgEVI/Imh7qVsYj4oH/80DEQxP5bsJ+S8TIi/ENXvU/sBnBryFcR4AAHK5G0E5xcWOmeUTAVMRHmmmNXK5ggq9saE/GQKFqFD2qZ/gYGbtmEBiwD60M0pIWcJ/8064wPhSZUAHZMPyfp0oVeV/UcmM/6gEEf//zQsROFHEetl5LxoxX/xE9gAbqoCpBUqo+YpjiNhiIGWZD+DmPGWy0SIfNrJJsz639dZqRMsj/Z8vvI////v+XKf/B5F708f6NpgPf/5REPHKBR5atMBEP4ho/FpmAiuLWLSFp88WqiP/zQMRYFYs+wZZoTT+GHdrLW25RK8+Srg70nLQTo6goW/8eC0BVK4qnS4BnOOG8mYd+RkT5ZT9ov/Y/3X8VcQ3Ipz2T//mRev12/zLP/M33o/HsJNyt8rGIDg2ICh33S2NuQKu5Wgg9//NCxFwTuzraXkhLP/iLwsEGeGxkzMrptQ0ITzveQpBj03aseAoake3ORX/99Am1v8gYYW84Ugv//qVuqLt0ft16G6L+K/1/Zl/xAXWMBgIhmksjT4zn6upsaIPCIC6pY7YUAS2v6R9E//NAxGkTIlbSXjsKWnshNleY4n+ak1SXJ88jf/oRzu/boIl2QxVH/b7uriKmUdngn//6Pon6AHb2kvQ6v/EQZDcRKrUqVeHff27Wj1usmPx2IzMrBF0h8lRR6Klia2pZU4Uhotd3opz/80LEdxRKWrZ+esR0aVbo5Q12po/tJGmHFG+ji2d6LGjevnVe2b0P5jav/nFyJd0Pb5QFq+PvlCbpL0t/u4eqsSpR4Z/9ZbaOE3bwBmURiuCnVH4yqNvZqMymlqcQeG/361bruqvhU9L/80DEgRXSgup+S07KwTvVXR2R9wAQ4Db6FFvbRioDV+dv3tRFS2mf/+5QaV/BET2/8b9tH+f/CN/B1RAGHbbY203B5OPMMUEg4phHKRAGxC+dbmA1K26MowCD9q3E8LXpOviTXHwv1f/zQsSEFYsm4n5CxH5OI+VzVTryD/Tir9m7UMDKcOfKh/TtT+pV1/QDO/TSvoN/yE//z5a8Y6oMiCWW2RtuUf7U9woZhkszR4GkuVZC3pf/pyCW5kVS+rPc/woSCtDbTb/woU4oK3fdP//zQMSJFYsqwl5SxH5mk+rfSzVKZVTTbtRvWoW1n+b/t07aNLoddW/+n+UMuqAABs5WQWYV8auBoUE6P8LdB3HHn6aHKTVJSMglgbDbeissJCcVnqVFawYgQMVBA60e1DZzns0aOdJr//NCxI0UYyrKXliNeskYpz9Xo75CfXX/53/prQ3/f6fXb3fSw//+/9fkauAEmVVNBCjIqEiByU6DjsiQmszC8U9Hlp45A76M+BQOR19ahAOypM+0fP25a7em0syQGgWUujsFEhPo5lfq//NAxJcWElquXMJEtKQymDE2fRQnks/K/o1KzHIz60/VvetqaDVPR3BspEDln6gwPHQHicgX1F9BCqk6tttv9t7xkCUF3EhzjlmrWxfFfM0eDFcEnet1N8etKZ90n1E9KUN/R9nVWij/80LEmRqiPqVi2wSszZn6KvfL9P9tuvUvrq/Sjei//ylr2YGN/7+j/9P4p2SqAAhjklkkltFBCWAxQnC3Ch0bibkTsIJwsSzUGfcRHYROHlpRZdQzGyWsMP8Z+XdW/ydDXP/+j3V1diP/80DEihOTJwZeekQe5Em+X+luTfS3neryNZR33tQNb/yat/FB1QCGbcbbjo0FKYQsaTMVON5uRjtgr274lI45ngI/bSKry4xKBj0qhWZWdIwwtqSqWKN6aZ+RjSf/6p9Heif1+7oVuv/zQsSWFNsq2l5iisK9eevENHWisqP/yft/X+oGBA+qBd1sut1t2GNh8ZFdNlN6K5ho5gaokGdRCS3HQ+E46987SDUWwZXOi7vB+itU39M3ilMXadH0MtlOU7GVFf/1b8xfT///1+fzDP/zQMSeFQsuxZ55yqbeTt4M5rMVA8Vc320s2FRAxgiaC6n2o7kcjW5BLib5XRD4rl+Pm/z8fkgltMrwod0LqRofGqoffwS0MEP1+/e/HEG22anFDt7/Xzoa9Zz+3bKH8xZW7kA2AKrt//NCxKQT2wLlvllE4tv9vt9xK3DXvYyBMhemNC9LYMj0mVwHErqmP0EOjPNoJTuFTjakdIn+M14gdRcK/VvnOqGY3GJ9GQXjPb/5R3rt8jdwK/n//9fH+lfd//jnACil2+11uuED0YJm//NAxLAUOXK9vnlG6AujCKZQ55GXykfHDt5ADW5+Sy8kSHg0/L15KztgsR+iMGKGp+LEfZwcE3/6mK//8gyBjh0WelP9W9aMXRFbUwCj4a/1lzko/Z8kZhlJLZJJHRkWeCIkXbB1YbL/80LEuhTDLu5eYorODGaJZs+izPG/H650xehXJxHR55QvY1xMG6DWhKQbrSJ9edyjKN9G+pXb/+o0OGFnybPdi2+pR3D9C2J9Dqv/I0m5G0knhUTAmZvJJGDpgI+FDrL6eSHuJ8Ir/H//80DEwxWyWuJeWI9Wmf+ngfFPNnbZW8CNk4QKpjCzye38mKL+jfv/5/lm//5/oRvJv+jf/5CdTrcTdEIyPeQjc708tpQTLQ4AQNCuqtep+gHbddbbJLxJZEdFni3nZ1NLPuPd0Qr0ev/zQsTHE/m6yR55xPKOqqL7or1H7vnDbLV9WrlYF9Qpoyrqj7Urn/Qqor7tZm/lQ3/dG7tX6/2p///DsUZGOMPOzK4P984lTyUt4DEmVR6E8ZkJpCWMoXHUKuQNYfUss2OI5xmB5LQNzf/zQMTTF6tOwH55WV7KJxdcEAv8bYoIrZMuwqeEi/C2oLBL+3wkxxhCmNYvWqsyZT6gq8ilQ+f+RDUgdnbaxpiPegLnftpddJRzsfHm37Veb0knw7p7tG4v44om/4jRWuJqQ662lf0o//NCxM8WG0blvmiTX/sf6LYCAlZv1+oNwzgm//OgZf/mR2RCqVtmKG/Df0dRxEnltHq/2fyy1wBI5ftrdbbhpLSk6r5htHw0aE4jJtSE2Mf/0JbvH/fh73VUZYnz29lr+XGGtHbY1Cj4//NAxNIT6L6UKtKEpKI/yc1GV5h31/UFEHMr/+IqJAmujsqt//mV+b0MJN/+v/2z6WL/b6ah2J6FBMj1+/211vEsnLqFGn69TpwvRzsCsuhIzYKw+2cIo5lzeXTk8s09hijeziquMEn/80LE3RP6Jtm+ekTq/0ppioOUWZR31b6mVi/O37Id1XXt+3+6nff8jff9X/9LN5v/9OYwiDauGHtfa29nhzCO8Vh3Ox9ZTrZHcW6lvBPKIrfsQNA79MNpqfzaco1424v/8yZdXiilChj/80DE6RdjKtZeY8rOOf7lDt0UAdFXR9W+zEz+jfsgxCyOVW/kb+HKHFcvkLA8KpnjA35r1Jft5vr//r6HeL2Iy9WACt1QyYO7aB04cA5bjmT57zRnDWVKrJ2bHVt/+wqAWnUkp8kc/v/zQMTmFntG3l5jSs5jEJJm1ZmL/Wr+eTzn6+30eqFP/6KyHf2vMQv/Uoa6v/lAb0WaMgpZ+W/4cyoBSEYRBSckcsrlct9YDZFGm6NCeB2zilyDaFAQ47kv6n7A8xMOAEB6xvEV5Dh+//NCxOcZS06cfniVVHEpZMQzQsIUd4e1dI6ZVMCDy+kio00UdvDyUIIkLFysF3tprUFoUHY0YNzz96s/BsczpDJfJOPyNxui+1h4OUi/i9h76IclvNO7z3yiSHOmW1M/Vdvhtfxbf9mz//NAxN0VAlKRF09QAKr9m7/lN/DP4Ycx7v+SAUm22ytvpLVRUBUK4ldSKRMPPXDcvd2ect0DRU+CcCaHg1LAIy9A4JiObKE4Q3GjDQCchTig2pIZMp77Aek0dBhQ8wojT3v/tDXs8SD/80LE5CXDBpJdmFgAdiyvduWhjmVf5UuZq3SVFUGqstuFJ9lb/ZWzTXHejKTkYVk5LU3x6633HX/Ff19+nexrqe+p4Xhq0sIlhMcOf+t3/NqW9RttyNyUTp/p6uSf50u1QLpyG1lddqn/80DEqSQq1tDLmFgASaCI3NmljRswuHiKIeaVHRaayWLmlKnt2E4UJpQxWPuRKDcUGKeazFWaPGHsVNNyNXMf6dzWmVeh5vNmMl2v++VbQ59C+c5d/3f/zHZalPXuNd5UUPXCQISFRP/zQsRzG1su/b/MOAJ0mQSAph5i76L6yHtOMg26YTaxBOj6tvmA5NFawXz0ENrAYCJY3dmQy8UVUyhh5M1b6rQzUzNVaVuhU65nyzodkq8yPOklWUCzouv55vr30ZZk8s1/Igz0FIGFP//zQMRhGUMSxYZ4xRD8GJ4aQ0R8dkskvHiZ51QawDpnzIHP2KU3FYLf8HnCQiNI0BtqO3Z+1YkjTXUYmpUQG2Yza5jXfSXKQVM7HsVTJ/6llzOW9+uqGq+/95WXf/6ffRWfq3/6p8Ev//NCxFcWI0LZvkhFINBlwAABqKtFQDyoBm6UkgR0AdUnUkLt01KLJlLbs4rDELKScqlYW/i+OoYk0QHCyz0SODUXUd13wRCwyKL44i2Vvt7uzBurdbljU8kBQ+qIWEDyVty3gS0fLk5k//NAxFoTGLLCVmJK5E646gNFJNPCh+N093q6gaLQHPElYhE2og8PLPFSQEnAMJgQWlJ7HmC2vDWR6dSc5hoNa9Z1ETYi1aO7kYAh+TWM9yxBOEvLwR5WlfTqPxGRXo5ye0U7GzTYD+L/80LEaBJAkspeYdjAWrRYpxbR7VdkfyOc+rY9L0pfrZv/qv3f/Trv/Vk7ff0f//9AH/RvI3nn//CTyVWAIGEZz5RnymYsuKqQpMzwnBea2L4PId1U36fHA2OZvD5xQFfEyk4xEZp63/r/80DEexNLMrTuewpWg8LnC3CPfKqW4qstDolVdpZpEn+hqKpZlJPJn/qdt3+UP4LK4kasbkkklF1XsSMagZIpJ//HuPRjwOkChNIVIEecZ2W9X0lb9gVrqjo82t6nd6qj0VytP9EzNP/zQsSIFBkanPTDBlQ/buben/zs3ZH9GO3Z5fL/Z/R///7aG4J6tesVoZvtttsMreBi0+OBIhRQx/kLXOzNpkyGw9KrXdX05YflJ4jbOEkM/snw8sM8xYlT7OynjR6rQJ9wgcRdv3VvqP/zQMSTE+M6zb5JxMbk/sEDu8QOoL4Ylw/VDQTVX4SbcrJQvXB9Fo+3taQN1Vb/873UKSmL8wChfYMM2pyefVc1l+ZbXWr/4JuZu39T9vdpkZG//D/WfWA9pfGnVBwLCEOoPCoViRIC//NCxJ4TyRryfjMGVjVSgZn5ywoSxxCqfK9Ui6WTgx+KdydFP3WrJOoVO0OGM1FcqEMy3+9G+2PRnsWu6G+R/0VvfO3M7TPq2jZqf/zKX6to6dW/+FOV30+WcWqRSOXa26W20R408Gpz//NAxKoTOlKYQnhFEMLLQSK/UthP9ulSM09YFTnenfbm7irrrzLRjGPo/OzFEAjFdgvKwr/v18r5TlBENWvOOShCztjvDr/v9K3PqV/mKgrJJG5HQ2zDQhJwoHslOKcOcg+0ZAwHaY7/80LEuBPixpR0ewRUYENgslMd+NIp7q4Rv4KBoMyoJA2mCCLKzpppOJHJiASheVEb8o7kRK8selG+p1eu3vmfVE4wKlIhUzlVlkcdw/1lsfs2Fczq2VJvP48SZl+M30UWCWHFhWv3s4v/80DExBORutJeMwTKhHttn1bJb/0e1w27SlZN+9kWAOr3l1X10Bq0v/RWuYJ6I/XvJn56tRyuvUV/1y/0TK8vqd6eb/g3Qu0xIx4p4+3m2w/2CA1Hm8xwOs1xSsK61KlfiEIMDDnn0//zQsTQFDDulH5ChqSTaOWWZLRBEJVH3Y7NgRqPZBpX3MOB970NkdpH2IIMJj//SjHX0Pf95kIRXKheY82tRrpfDDeWlyOVcx3ycPozZ3y3SKyMTlVUZP/ClYtojktO1PK3Ovs5ulUMF//zQMTbF6smkd55hQ0tYqsK1noqx4uioHK8HKqaCwuldjMsTxbiE2DYKW8xX1WGEndUMQ0hP/NnQr6ERgQlCNBpQMxnW042INoZ4F93yCzHvmQ71NPSUpQOCcZMrjkg7T73DL+bBqMZ//NCxNcXqlaefjMKkL6Kjn8NIm01Nz7nzuNNtJoEHVlHGMV7mOcUDh2ipDvHyDyMVGxx0dGHKHkHJ25ypRjxATOcw18ifXVvVnjWce2z/xtUZCIVaZ9duhFb+iaPJ70/nPxI9NUoUCMW//NAxNQaQoaFvmIFLIEFYrFIpNYDIA5uULTBrQSGQ1XXihbCEyfTkQIy55GUYkqI2MseoXQZHAkCaUw/jCD9fDnnDQ2GDGDJceFXLjFwuGgXc3GEHgUWs11GibnjN0y6SixhSmXhhb//80LExhmLGn5dTygA8vubvT4yyEbl53N2eeVXr9lpoM5oyZohVRN0EZqmieXV//+bvTdkPqQakkm5kZgAYCIr///1KlP7vr9yUMhaH4ghuqW2KQniI2oEVmOAe1x9nTC3zJnMswsUyEf/80DEuyVK9q5fmGgAeCUUjQxjJN0TsYpXvmoZ1ZzOXNNKVX9q/M62r+96q9HsVtSlN+vo+Y3VCpdPVneZJyOVGjanqrAzUY1SCeSqApb0s220vGMBlF2sh0ISw7FecYo6BFtLqtW6/f/zQsSAGNMq4ZfMEAKtb3FtH02T657MvOU9AnvaMqwVIUisrmUBKLONXSiGdyosjmS//YGjS1kM8hrB01fVZioCNVkv5urfzWoZ7/R5bGC0M1a06G7ahSegIaoshpqyoF/zdGJUABa1A//zQMR4GlNCxb7DBFyAdtxaRrLrsdQhhQ1KaxDHjQ9VSnDtSyeuHtdxB+JsUMYCcfMNeIs/I/5I3iz42GKpA0idOCyHT7Qqaby2OUaIvN44176kZ9AK2J73v9yVcHTVNQGQq405JJR1//NCxGkYGSKcVMsQcA4pMYkSrQDnAmeDVFQirK6im8tffUv2WLg/lRzE7VO/PPAIsRNa0N7jz1kcy+o/mf/dHXZUWyN6pySTtF+5j2cWvoq/fpRT+riiADkd11m22/E1DZkmcp1KkNo1//NAxGQUabbFvsMOPkcU6gl+WVdtjJv3a1pdHXu9jCxvWtTbUFZgV8fT4jcQtT1Ict1AqYyJVWed1oM3HpD7KH8l2f3J7QKVJJJJJgBkUwLk5AjLweXNxtUjtfcMbw53faXU1poprFz/80LEbRLBHuZeYkReoBBWoIaooa9I4fSmN+IAjWTojHAOQVoObdaGNW51LRvXq7+/LP+X9v9la8/1EUUBtSOR2Wz0VHsP9iG3OGOm7yF5Til5OFW7pTX7oOIN4Ux7kw81D+CcadVQHWz/80DEfhQqUsW+egTvNbl1Q3DD3R/k/vTN1f+jaac30/f/X9H////mDg3xD/RtVFq1E6cl2k224HfCJn+dmVq71U4cDHm5WtCx4uqET4yH+Ba3efdZ6AdxR6Tzl1RuNJodp/Ufqhub///zQsSIFCMazb57Cjq31FPVe9H7V/qw3X//tm/Rf/f//qG5LqeVfwCxZ/qEAgI7QjZAEaC8jBTwixFy2iQoNtaUgEzFNN4HW8zkjSAxOnybb0gDIvGi3jQGfSX+EKjYRvlJiiv3JfheNv/zQMSTFALG1b56yn5qdTch9D1v6vU7uT2f/0IGgInLaJoqRQAQAELk48PFmdCaLX8KeyAHjaiOf+4X/f//6f3Rf2/9VO6EV7E5PV2PzkeiqEbkV1fVnp8jThBqADhBF1OjK4AxgASL//NCxJ4UaR6AANvQVCGalTkM7HrnOymEBhKJf4KExP4kaZUZDYGcQkuQTTB50j0cSC+pAI9bCtb1CF+z6vqBunVP99Ldf76f//VjfZfbrMbqORK2a/lb8i87/VTGQxv1VhpAaDmIjP16//NAxKgWeyqwXsGESc8hAEjdtktrsmHSAoaoDSF+dXKSEvLdNNb7vco1pbXRV3tVJHXvsC5ppV+EupzcT/kehi8A/p/p+n7//+27lWi5SGr/+Cfbiz/rBU75Z/vIB9UD52WS3S24VGn/80LEqRPyxpgA0spUJmEu8nRl6mrvW6eT1aMSUOpq1KQFbz7ldvUi2u0bd4zdw9tD1+QR5OQDsn/yLVBJ+d/R/9/6ehsy27I6/9xat3qf/FTv1CEqYQBG3trdtf+BUwga8dLc5+3TpNX/80DEtRPSUtJeecUGUL47Uw9v6hklWTRGuvtQppIIe8EwxmZfnqg7NErbjatOgfj5YgWwwSHfT87qWVj5B+1/qXdU/Vyoteh3Gqj7zhsY8qV/LEoc/+s6AFhUdcskuAGCe4u8+6uKqP/zQsTAFHJWyb56ywZI28ZsAxDJTzi88ib0pOW5Y00C6EOlu9Ds1aOLn4MZdu/mxc9/cpOqBhjD24+Eh8UqRZSIuX/81+Tq8r7f3MfmlSuxxyv8edD1h1Yb1Mw/E9UAgLfp4hMoR45q6f/zQMTKF3pSyl57TyJQIZcGuwZirx4wYKjKj0WT3cmH+xNm1WB8xQP9vNEnuWyqJBLQfIxILnV9Mzhf5bVsy+zYDcQD9E9iJCxcdwX/9BiNVKr9S/41+xRr0dDP/+OZ9iC/hArc4J2A//NCxMcYCgquXsvOXkb/b/9SUlgDDw0xXpP8KDFh4DAQqLiJCDhcoFlPqbtZbvP6yaO4ltvZejNNXowwqwlGYGs+58S5BJR02zATVK5x9y9ui/NqlO1TG369yNZPlrp//sp5H1NzlZLL//NAxMIaqoZ9jt4KXi2SvV7P+fv+fwagUU+pqgIp08je2MQhiGCccRlT1zt516A4apmiZqUy+U1kcxJp9Q8C+brUTkluSKgvZTVsdTRlN3cd48wkYmZT0/Wikb2TJdNyXJM3Jf/WaNT/80LEshUZHngtW2gAU3QdzM3NS/Jcvub1fv1LWb71Xsycvl9zMvpp5QT//+/+/y4MIYkui6BqkXD6BoXzf//////+OcIVDyv3esT8CZBGCYEGJGWMe6nQtksm5ZGIuKHeWC2jkUKNCXD/80DEuSVTxupfmGgDRAYmQigVIUhipsopTN1eDbBxEihNS0WkcRESkyqKCs3rRrPOsIlu1aVp5SaqH+lsl4sfPLzWxEu6Df9Wz/CryWXknJf1HvX/XvFV4xfRJF0Ud/zQptmvzOlZhP/zQsR+IQJayMvPSAFU3/CirwpCba/+bnHo9yFU/eMik+H8uZo8mJsh/6MjyIqWyuy2uWDv8s0lCX8el/xhzyzTqnI10MDTlR0HQpCS//2r37fZ9svZ+32nZJX/2+nsg3NeX60A0SYCd//zQMRWFDK+9ZZJhNbORVBMORlSEwSwa6ryXKI+exL+wfUElWhw20RQ+bDaTYLIF0jXh2s6NLmAMJZIKEAg0qVEqMVHbCSuOUmdSc7j2v6+RnQ5iR3WGflwIoUU3E5JZbtxqgneTR/Y//NCxGAUaLLEBlvSDq6mSV/Mref1a6BUcjZrQH9EE22uhl36+14IyvQFCUctEVm+2a65jSyOTM61dW/7On99xg/b/8QfiDeoj////+NBmqkm5NbbtdtxR09XNKcpSzrNxpPbrsb6JAbF//NAxGoT8zsCXliK9qamSyx2id6q33mevGxyHlrezv3Ogh8uSOylG0zTCovne37xCJXSpgafuSmXc+us987/n/rDVYAG5V7dw95UwYKyJ9Lnjh/5+M7u+CIuDa9GuHZOs5GK9H0wRKP/80LEdRPZawZeSsbqJGvH/TdtNU9LpbsqmRSu3//fTOV/5f5jU5qohqOVv0fT//6f/hAfxg7BBdSW5bJbbrhU3FsfR7KxkTcsherWA0SE0pTszxDi6gZ/ugzTUtpBirtyK1K6oWZ0yoz/80DEgRPjGtEWSsqWj6HxXaVPKWXZn8v/p/eT5OrEHr8qeq9Py4HdxCqACuuvboEKbNKhNoKrHKNNM6sWvrq1/NPhYJFI2GkcBsKM+gMg7TCxk5WrumnRrv37bzs//tGtV3lfmU1NDf/zQsSME1pS6b5SROr/3/9PerZG2/oP9dHCYeqoqO36227bAe67G1z9MWSGfGEHBY52yJpvHugSwuTYjHpL45fbR3yO1XcR0i7uInVnz1qhKQtvoTNeKMjlK+f+TqGgQWIMPJemaKu/Q//zQMSaEyKmwZYTCh7XqD3BmuOQWWWYZ4lAhWlWhQKBQDR+44nrkX2LnDUepUMtHrnb2//9WQz+oH/8h8EpCFO7f9X//RffhKuMjyddCVHYhCEJ+3vX//9RYtRZABofwINckdLaWE2o//NAxKgT+NbqXjPGki3oX6OZ+YdabTAZIufYhg4H3dbJFzEP8WZacjf9MvbUisdUV3Qan/0fendP7XpfZ1dlq2i6V9v/l//f2VLXalPZf+UpCg4oUNUQwSNx2S/Pn2TFVwgozVXTSAL/80LEsxPDPuG+CkSOPr0ytywLLBa/xHwrN6t/W17Ri3rvzX/981Q0WhCDi+JeaB8dF1xdfFw0F0OVx7t+V7dNfT75WJn4xMJX/1hNgIMskmiMYHzT7iX2MCqsW2CeDRjCei0/g6up0Yr/80DEwBRjTrm+K8osSDV+3lK+H/PLd1vyX+EdBmT+dSeVLQHcEAXYU4wdcKFCvT8bX///gFwdyvOrGArs/eloCB3XXfWbgcxwf8f3EQ8KjhTkUoKiFvdyD9Grj2iHqEU0Ep90ikzt1P/zQsTJFDGiwbxrEFJhQ9BOktu5iZGCyRMGmpk76zw7WOfatziWv9l3///6fu0VNbv/5kfIQjqXVzG+an+QdSnbja9Q1jqxOxCWvuahKqEVSDQR0oOkGy1IfhZNFbnLX5t1n7W8cs6X1v/zQMTUE8GGub54yy6e/y/ztESOueBCWD2dpvTQ70zGQOQfBH4cbAZliucRo6P/0HuT91ab/yqIP8QFWKIsKjs5SiQt+rI83+KP4a/7lSTaiaj4+VReWQ0z9iTPDK2mLiwsmewtoMkf//NCxOAWoxrKXltFFnBCg0SE2zXdPol7PUFN7ey6yUG8616akU+I2rndgugpO7jtTXaMOphExrmQiiMwqxSmf8Y/mUhmQhhj+dRlUb02935BUuanv/r3yP+VAIEjztlmgH6vfYlWN0Q1//NAxOEaksaAXtDLLMwVV0gW5t7YuCownWqTyr5oVm5Lwa0xCPnQ7dahW8gUCUMJXKEOhDkmipXOuCYzkMg/oZ72sj1OjPZvqzqY/VMurfzcO/oKdtAt/+RVkMTcbjkcoEIAlAX8hD3/80LE0RnCPnhe08qwKmcq4ucKcY0VQM8BtjMl1pzeN76JuQfTmr4Go+4hr1PuRDvDoQ6OEyGToy+j3q89daj/6f89yf/9f2sy1oT//brUjcjP0ZT7agadZYIMQwOU6MMTInQ8oNe3AwL/80DExhbSPoW+y8SsKAaQaKo8TYCweo0gqkWtJDJivc667F2SWMVnAZXEO6cQnBUegjAOauKNEZQtFz7j6q02gwXDcIF5eGoKz3oo8hGiQLyUQiRu1nPhP1nnVlFa51kTfL9PBCIgM//zQsTFFmMKqb4rxD8nPdT99EQ0LKA2oc/n/Yz//0n7bDx8ADD0kdtxf2OGa1mwIYAAWaFvOjg80MgEkQsjQ6kJ6AwSDZCSg3+gp1oAblAY1Ecq7fqsJlutS7VqQ4SqX0QalaQ9FFogZP/zQMTHI3JGkADSRxUZzN0/Bp1YhpSWTX1qww9KgPY3+kdcB/Y5/8/h2TbOnl7ccs9rS2sYUbHw/ArKvD7fZ+tDh9X9SCkOqBBS+oKDDYJiVWQJA/gl/zDTKkAoZbZrrrbxgRR8m5ds//NCxJQhSz6hlNGHET5GaG7EbcsFm5lnAQjZgnEKvy5Cvh+cdxhqjt6KLZ3oiuT7QZjx9jJ7+f0KDdCgd2p/K036L2hrrcjy2Ipa3WE31QAabrdvt7/x0Z1Fj0VzSKPRsEPSHxKm6gSI//NAxGoTyTLqXnsKWqE5eMvJRoO6PlWdgRVi2PubpKGGHASLcdPusTHb/I/f+0qRNaqN9fb//r++UNMplSyf6yIt9dImAIbtkcmmwHJq1g6Dcdo2VGypijfSTvzGPp3m47c6xqE3nVv/80LEdRSCRupeS07C0msjZP2JPPAmyWxgV0epyHp6IvrV8M23xT/+j5xh9A7uW/7sMigsBZR3/Ij3fjkAhOWyS67gQhHjAFhGxEtlJQ3ziu/br6smWPxZLfOrSrGssz8RaV5NFdW66xb/80DEfxRxrsm+egUiPRU7lmB3rx1YB8tR8G2b4bPkJ1386r9hassdAjk+vh+yj91aTbkT3dAFCQvdIXOtJTg++J6pEW6l3m+Q8vk76B1tFofz2WuFaeBLNdD3UnYuDCuxOcqzGZN8p//zQsSIFClaxb54jUpdXxe3+Pm9l7DA0v+RlxKJTuF/6uHa6gnHJP4ABDRvYAVM+zAuSTQBzitgAElw4K8sFb0rwoAfsNBasGpc5pc/Dljq7A4oWsd9UjUQGuxCaVexyOpyIIxbOeVawv/zQMSTE1GutH7D1DoS//bnlejsE3/9+6oAhOyWTfYAQymN0eBmuCjw53gz4c5PRpmifkyxrXNUSjDQesDked5HKTxQXVybyr6r0its3tsX/0Rj2U7zDEW5Q/SNC39vnn555x5557j7//NCxKAUEW6YfsvOdPPZaozGG1ItFodDotFotUMyGhcnMSiqKZUMDIfMubNhoJxGvSMjh+Yg1EUTK42BvHwsEhYZjqGuA2AXG4uIaTOYDYIQBcBsblVci7XYxihIIsG8Q4sFiNrJ+6up//NAxKsUYh7Jv084AiN0HhgtsefRVNd3Rpn6ERgtkcL8RZO2e7F1d5ntYzdN9vNUjLpkZx4X4L43LP+y7Jp///8eDEdBoP/6aomso0oio3Ngqolm4GSkdripTOSpKp1aWfD2tWgpSqX/80LEtCUTfv5fj1ACSpYuJVbm5StefOmj1S1Lt9bKjuRrr//vSiov1z9PRcjZKo/Rfdl1/n/7K///I0nCmm0qfWap7KssKy+GOHzbWLQRLjQ0WUy+mY78YjBkWpmepMFVLqjawVNAzFH/80DEexPzMvJfyxAA71pATgMUHj3WVhoBJS/EOCqZ6103e5YaKtkAJ57U/oO+HPEpmWNV0lu1tstttuHXqyCiJRiljT0oJCiadIKfUFoLNZn7iIh6CWX/7zYyoCJlj1Z61PopyZGBrv/zQsSGFFj63jRiBmxR75G1504Ylq5u/Wx/uLXa8UbWY5XS9ogWDKrARleK4iYBZgiZFRMG1YGkpUJm1ckklbW5FFJ+hh+4iAXYcZSpGOoqNM2EbHkgqBXiwdO2np29yoFI2kqzwPeGQ//zQMSQE4k7Cl4xRsoKfTJFtz/y5+gokRWankkTasB3EispQWrHBE9nilkjky2quRjCpnqN3Knqbm7rJjYQhGLRT4u2wogYZMXVv5pPiXI1vf4kuOvksvtujUhRzORj5VQ6rUDP/W6J//NCxJwUgOK1gkpGcEiIqom2pZLJI3JB7CHKpe8NDbqNcq7eROqq3AboCbSkjpwMooQAwhT23njq9eEZJdTJf9Rr9CrdF3mjqP7CXtv12da2FlAAMX8NRCInfeeP9IgqQAoJX1VQlhaW//NAxKYTEj61rkhFHELxsAw2cjfOCnU42cjjG1KyFQX6mGzJR7yt0HirfDKEBK8rKAxFX6WmWNNXGnIFWGlkiNrNbCoa2zFTjS/reCriSXfs6iUoAYsD6KYoRfSSIA3qO2WWZSG2YKT/80LEtBPRRtpeMwYyCkABI5D1XwxwAJZ1DJ8z8UCNDgUNjx4sjNnzglLSrXhJBZQQNTyxU2ddDBZvBx1dlKmv/kTM+oF25aX+QZAFlJFsIBWb1gYa5jAgtAriGELMtaLYcFewJwt5Czr/80DEwBO4+pQmYkZQ37+O8XJCxYDIq/T6jHg4HjuWfCQiWnzolaUgoZ9YwGii48hJwQHLf8H8oRo//KKBnsgcxO1FFswQtaSQKL8MQ3DyylOK2qCFxlknaGP5bJRvNLsxoN00fX69pf/zQsTMFHDajEQTxhDyk6fMGbz0veJ0mX8+ur0+2W8RdnFEZr5H+t6yE9LVj2baAWSlbjklnGA8wVpJJZuYKYTm4xhovDOxXxhPd8QQzFZ7NWAGp95JFQztOn3tqp1FIdo6EyZKuKFnDf/zQMTWE2kesZDD0FTGpXazW7X1bqIxI3lf37eN0zOb9Dfg34T5n//yG6ldCav0FMb6BjgLVUi1GrZZbt8BpVlad+m1HLTueUykmsWwuU48lWlPigXKwelQJmxCXPJWzyy0lq/A5t3+//NCxOMTYQq8wsGK6J+J8RFCBka8ejGu/V+3q6CvoEH6PM76hb9EM5P8efyDB+R///+M2h0vDqoRem3JdeJQ+0aaFhBCSshdXrw0TNrn5TWUr7tu6DmZGBnvrJ2LIXUmUbkubImdloBM//NAxPEYiy7hvmHFRrpUW+cOLikipKa81C/V1LmnZvqPOKvoNi35EzqWG3TQf/1F2g8Pk35Rv//6DZv4s////gLD2gU61HLLrxkmKbQ6Id9z6RFpFEub27VDfI/cqTZn4M8LEmTZvxD/80LE6RcKuvZeesq2JC9I7GfjD1Gzjwu5oCw2fv/UvER4wWjHiSD/MEyFFH/UOxAW9BrfoZuM/WZ/Wy+phF+VuQ6f/43+j////oAg8TFKWuNyb/CMEAB5AuWNPkELmLetLoyVK0vdXMb/80DE6BmzStD+e08K0otvI88MSFxtJj9H2TfgW/1tWkMZnSM1vMg6Ae7VmkR4NfRhQ9SoalmHns4ufzWYJf/KB7T8df/Px0Hxvoc/8cGjmtx4Rn/0KjVv6+sexKG/nirv/kQVCUuHWP/zQsTcGaNO1R55yybL+o1UJMEhiZPN0KzLxE20kKHGlEYEYaJDgCNwOFoUKFFJgkyaRJaXT8WAwR4cNtjsbmWKRd5M5LS85F/lTttniU3GP+ssaLY4SmxTF6l4mOFLZoacat7rx0vQ4f/zQMTRHEK+vF5513Zml0+X0PMetlNkkO6t/T9TP6Fv/yR7//qbrgoKMtoAjKUjsuuuw02eJMws9AzRxIqjTfPz2qTFmoF+ns56Uck8y3X/rTk9GMJRl3E0zY2Y2tYVT2rSMDO8+c6j//NCxLseck6ADt4Ofui/1vzh7YTCLX3PFPjQXfHt46G1D0PRW4UlbjtOTXZKTKA+z65W3Ix6i02VW5r5LijSQo3S2VYlDp55rDCmUzDZ+RHDP15Um76A2z/Ssvk05664BYOqp9K4jhfi//NAxJ0ZcgqcXsNRLjn/5L+PU+yHt/jiX5IMSEFKmaSb5INoO3zm3DfNtHJV6Bi4Ovf7I2guTvYxJAwlMgZbKEigoTMLORvEA4jOE5QUORgoMk6RR4oi+F0XDDJ8KCxOpyRJldYkTbL/80LEkiTLNpQWwhL+FFUoObbCxQCyh+GkSlPKszH67VLdTO5DXlfb1f9riWGZqS/LZ9Yv+Ci7oy5p8L8v//+/d5XksySkxhFYY3Emj0t0fcA0vIBWQz84dPjRBRDhWSYkdo9EvWKUJpz/80DEWiTTTqgeeNj81fC9TsY5YTHjlccERAVnho/GduFts6OT+EtAdEp1ynLTphSZn5PXiAqHk2UJnbHYUHxotTPsnbyzVQm6+iSKH6Un6SDEbiOugH46UR7hFiaRjTgabBHUFsVcxf/zQsQhE/oOpPRiCpDs+7vZIRXLmspbP/qjyOpjIZS3/a6NL8v/3qh6OfBWFtbv+ecRz1fJWlTK5Y83Kh043LGvgpMyFZHG6M4cdIwxqZ4/9oRiiRyjzJYhlQiaWPJvSDtQcOiD61Zh8v/zQMQtFCk+sRxK0KbrHcR9D9Vkp9/diUKZbXpChoKEzIZetv+d5U7qDVC3km2ysS0cuRyXT8Ki8BkRc8LItKNJnn+TbZqsbk0Olad7Q+WQUXjW+C2heIcFSHj0qLqp9Vupeoi+G5sV//NCxDcUiZ6pHErQjoSBW5q6EE6K/e7KPvYR5VUWnhEz/yPr7rDni6pHbbb3WgdebQ/0inXJjP2SE4nWXRkfkn8n9Bx+tj92FnU4muMZykX3NuPsFY3T75yu7etbEk6Zbkfoaj+pwyO///NAxEAUSgKQfnpEfK1f9zPbxKPvy7PWK/qS75YOVQEYnI/gewDcAbDrQBPA9Eyhx3g0W2H2tHWR22re+b0BC73ROFsi38/gak02q4Qfa6DyM7uRWtqx2r182yX6uruKjDjId6Udz33/80LESRRBmnR8eYroslrCVdf/Z+4AhzS3bf0AUPd/eRsX5GfrllIyq2TqmCoY8MfMiCCURNDodDFKFs4DGb9YBIt4sBBYxFi4qmwg5wiIfMjXA0IqzmwJuoElKw4V/Z1KCLjku2wYEY3/80DEVBLY1oW+ekaM0vQLFnV8BNIzvVEoTzg5y0PGXe3mLsB9I4xEARxJmcrCpRIaRZGynqxmVJbJulqImejmpP5W5u6vM+dmV/6CRziv/VyLjC//6dcVqqqeWqquqkiQPcreNAC4wf/zQsRjFHo2eR9PKAABsMjX075nCVtUyXmTIf1e8+KWWK+IFNBwDTLIyRMIFk6pQcsHdAHZ42Ws3SxYyYYqMZLWgiaIMybk+YHuvboLzUvoGZMGguCz+t/q44BwDliyyJpGjC4+l7/fZP/zQMRtIkJefZWYiAK/WZm5uqYE4xocRIoRS/XtQPz+YieQ4YZ/9H+UgEARUAZEAgDAgEBgADDgN0Po4R9hFnYeQ7cBqXBPrZ0O4aJAqFh4K4tEpBQBOQCJHpEYVhTCwpOTEpxyozio//NCxD8i08rKX49QAFjziQbMaPmdakIizmC4HB+QnuimnlETeg3JCcgYxZIXKtzl03ncwuQNU9zGY9HOazU83djfMrjxpjEhGT0Y+fp1Tqm/+n///////+VVjIARD4wKWSrP0Ag1bSIV//NAxA8UQP6sAdkYAJyzGMymfhq7t8vjd6pdxtaxeyrRLhFWcbB0zjOpHqqa0gQ7yYaPZUydUKrALrnbsVT5hNhhin+7O+/5YsJQ79X1mQhcxoClJvIMW4OCN3EMcFlQAEoa+ja/bef/80DEGRZ5Dpgq29BsnIjlMhrE4PiZs9uvuIs5ph0MRMoQqyNAc2saXinwMGfC18nUi4VNGaCtFMu4qNth3knVnYa/zuc/DmSYeyr5XzIIKJEpWMQTRUukQwoN28wXDDJCWAcDZ0jVjv/zQsQaFZoOsR7DBF4Ec2kqf0YO3KRySoVDl4609dSvyTaT09AZaHbi6qo/KqIzl6MubZKvrI0MJECexzv+j/k4Ydn/kuU///PVAucskku24HSIlF8t2k5tWRT21R3L8u6NuVG6rz1dqf/zQMQfE2IW1b56BO6yEV1a8SUbHARcVdLUhb5L1aEO4W7rDft7oqHo2upaK9xDcGG//oEX4Zv/8Gfh9QPjbLJbtsBz8DzFFTEP/qo4lcstzlBpLA9PNNEquSnbkuYXb0pvyUPtBzI3//NCxCwUAf7RvnpK6nvBLKIm4dorvxHlI0rKd0yZvP0M40crezc3+rCRdB7/1P87kQBK3bf7v8mw2rpD8LjsKaDvQJQJb9xQ9+pvXalQo1xgi9+FeYrQUUHA5AfRn0YnvncRAB/IFxcj//NAxDgTgcbaWHsKmqODulHegUmLivqplDxy4h/jB341OOcDoqyNyfgAVUdhdcNhwr6qemMP+h6zcTo6OpivMUll+aCc95OHIANCegBpHaNc5ekJKu7NXNw1xxqSCyhj8Vt/m83p9+j/80LERRP5trm+ww56zypJnKjV0A1+n9IG5roAFgRgQ18m+BrDykpLEuuxMkZcSQtYQWn3T1r6XqY1lB41tVfNIUT1gFLW37uZQAdqDtBXRF4cb//1f/ty85P/IQihIcgQ/6iTKIVjA7v/80DEURNqNqBW08peTemiqQZVKagi/dsmRclWZ53gilBuA4G5ANdlNSwWBhhwhFXEWphhlXD+U6Dt81MvLb/6yWl5IZv+fEDlB9h+n/yZQED/5/4OOdRh9SEC1ENCJsTkui2UoBpTS//zQsReE6D6jADWThQuUfRGEmJSsx1NC1elxyvYt/BdPEJp7//p7f////LZtl/92+5nRiIv3vWsrej7ORwpSG/KimsNHCKVPWeR4mNDxMoAOJy2W3yyUTAGqJJhDpWYh3nr2mZI4jPvA//zQMRrFBrOpEzKRFTxrRgEctgjzijbiP0M1INs9Zupzcl6dfn8bP4OEv8YDLCQmFwg9nlTvysr9AudWdIyf+Gw1QBYnbrb9/sBIsDVg+47tAd48lsmXwf6yAXfAVl+Zm4h+80OjPy1//NCxHUTqWrWXmpOHkXUMFsraG85+X1fwbZM5b1qYcj//rKt1e//+inEosyR7/+Hf7Mu6HaFAtMcSktsoEySsCNwEl3aBS7Q9XKR3KlZflHatljh5mGCbeeuyxbzQ8tYs1TcIeraF/0K//NAxIITogbWXlvU5pbQv4RL/9T25/UwtJ93tUpUt9f7NbPpu+l1CgRGlXHY7tsBi5ROmw9QKVordg5tWJJAbk1XCSwJ2W9axQUvuQlFvsdZpj1QWXyhJqAsfYqflREf4XBONwv/8Av/80LEjhNZgrG+w84+I6W2bUW6EKIDL9X2aZgh2Nn8//6/g8ys66VIciRyPysAKRgBVAw7HT2JsMDiEHT1nBqA3r0MSipfyM7t0Dm0t6HBLtMlVMGEMtzkCdjnVad4BotjPjMsO8oLOf7/80DEnBf6arJeyoUKkBv/nMl+JP9Bc0eQtoIE//PbkH0poSBgHHcioOAIDPiICKBhK7uye60Yxkf4ACNwMwzbEpciS7KzYSC6ABtAh+qZgPq8U+Htj32MzeYhGrbemcOPeaovWfJF///zQsSXGTGSbB7mDpRlNn/BO2N3qnUcdUFke8J5t/nI+S+f5z6OzpJJyIW65ySOng+CdYdQBEiTmktv+AHqNj5F0O1LFq080+8NK7f+EUnLk/hc3IuZ4xKcnzcEaN5cBsDLQNBoJSgiJP/zQMSOFnm+fN7b1Fwdc4f1q/qWmxmttzA//+XnFz1VUaahE41+uD5ouJmcjY8AQjYUjIaDYaHYjEUjM/3A7SVtgcBxwhA2MbygrIaR0J1wG5ZQAAqE4AYig8V3Egqcw+LHuwPgDFAe//NCxI8VQVa6X1hoAiMcds2LwCwIhMRmx479yw3QuYYNFIDxAaol/4hCdweFhEIg7FqZZTHt//CgSA8Fh4OBECQbESYjnOdY1GPMQ2v//mFzBuKxeYjHlnGhMfJzOia2X///88cIf9BW//NAxJYlc37iX484AIvq779twc4l0pFWttoWID8e0jTS87/OQDBCY45E5IkHVMzMJqqG1RDLUvZK1d3V2R6qioy+T9NVptS+S+jtedKfZn22rL61P/+u6Vf1z//9R9UE4ZXjnqmQnR//80LEWxRLIwmXySgCUWsqLPo2N7juaC6dEKqQpQbZnLoG+HItDzOQyWNLaqeOJf1zXNdjn/cEaUXu+dBIDPaEomgooNsyz3XB8trDv5ZX+mR5JQmHCr4xrtQV4cMVXTiD1M5KWgo1UK7/80DEZROhTtAGeYasjYtv3MNhLgb0dJ64YS0UgAEp3Ui0jrwimWWexgngIcGzotIvMgY0rK1DRQQs2zv2qiiaXRX8Ih2Apin03G3QIS7OYcDtHDQFSMAwMV8PPd1b9gKjP//4kYqlhf/zQsRxE4EiyCx6BuTlUIFo3x7J/sKaxlurJf7Igg6K6r3/s61mpqjd9W8vU33p7fY3/4py/U7wwVWERGv/boGqdiCDEtkqEDNUynJ00vs/QPF3+6x+nku74X29p/l0xxa3Csu2trUtTP/zQMR/E9La6j5iRHYQFraaDdZujWH5ZfMJZfy1hWkbKd5h/+bTf1BNZIBEXmpOgfTRSMT5B4j2IwtHy6xK3IJEor8QijKiu1BbyNabFSyFgVq6A0CmXX0v41adWtLrsVNyyapzbqn///NCxIoS+srZllhFk6aMVP19J9StlLdH8GyVOu+H+iqAZWdp8eSws6iJZguGBUzaM/sXbKxVNnX9Q97F6Ybb3eY4Lm1MmfNadHWxDGMShwwk9YLp1U5F9Fwo4QCGJKP+ysle6D5wutbt//NAxJoUEoLFlnoEsr+S5ZFCDhfkpzwgQIsknErHZGUBgGjxghRUeBORTOd1+2iysUyhbhU8U5bwZyvp/ZLf71T2+r6dVlZzrVOKCgzLNU+95QikwpI+T53T0cYv21UP/RonaoAIESr/80LEpBQA0qSswxCoWWaa0Na7noCz6aJqmFBPMeNR64YngCLc5vCpvLEw4LEEbSkBTD3nRKITqe+Te2jW3+jHf2y/Luv/p/8tUFBOLk2GlgFois2WVkv8nOWAi5l5qlaNBKhrsjqOJlf/80DEsBPRLpgAwkbsM+U1MUWUCUGrsCHFLuVtUf75VWnfoqL9aoiGSjfN+nro3//sav/Rf+7FI9f9j1Rqo30K5HIHh1AGdPe5+ojCUeeCaIoSsskjdcFEuFKsDFlsD2HaKooGdz/pSf/zQsS7FCo6vl5gyrAVtupJwAaoNDbuvfEputLe2tVzTZkxX6+iyjDKy9/T7/v/T9SMcU/WEwEXJeL1vrSMZyWZLbEsJvtt9brh83kZH+JpLHgDrI/Zgmjtb6CwkBhVj2IkgrGkbUdyYv/zQMTGFCrKrNROBC1B08G8vz59/uCMStVzYjag9QNd/8Yykers/s1zSc5XrO2/2XdwXZCqFtbbrr9h2t7iY5sbJ69M1KqNVuvIqZ5/8YcyBlYqZIOLn7zKrmatTYPu1xN6tY6tXoCL//NCxNATekrSXjpKOscUU7AkwxRm/XnbM3wQXXcqsy+2//6hjVm1EONgZ/KYY/mgdi1VmraqAIKqkdlm0H3beHZmMzQ5FHywjMwa/96qSkAs8qk52/ZUadbXbWAw8DPZu8zVZW9p4kgD//NAxN4TMYrmXkjLLhnRnu1LkqQ0PHKcx3o07QdMVSZEfZKM3kZ8U60WlG7tR42yPit9TO0tRX5vN//U3UQ/I4iqcJgl2+222+Hpjbbb5OeMpWlZQuP4Z5I1sg63+kY7liPjTHGBBWz/80LE7BdKZtJeeIc6Yny3M8VmlzbFYBBjGBNmCXw0IbeiPmDM3KJZU0PVnXdqU2KxFQbpVG/xzO3TwFFfj6VZnZTPr//xh2IOXd6gUPpOomyaHdNdb99h5H0ZuZfUtHqkTYcBTLvr6gj/80DE6hnS7pG+ywqwHDsnTZSRy1KYSAgkY1G2IVMSMw8yXdM7a5sKqM1I04STadXZ5konWntM7lowFZB5ShwXUOsJHGtf5uhJx3EAR/Hdd71D1w5/4j//ydVAgxuSSSW8fcx1jb7cS//zQsTdGjKyyl54y07pco5TNkpudvDzSca8tVcRQmazTMnLANzDrpse1zh4tqpKUjtk0bv4ielymyrKpStoJzHIUTnkWZWurcpZJZKurbUko7m4K/q+QdU4P3b/1O3Hx8//rQhIm5I3Lf/zQMTQGUp6vl56yroTn4jC/lzVbYyHbReZE48edINDOz32JOeRkQ2k/zTT5zqt48VjyfWbv38eR4xq+f5fv37+rGzz4y/f31eHe8fFX9HkTUPdX79wu/f7pT0hv2NRs79Xv7vGtkJq//NCxMUY8tKhvsLEunf5G5/+r/qcXZUJOc8DPagQlCK5FbueKEiZP4TnlvUtHV0G5Ch07IyeU1HN0ogRstIIrX5KQMsDKUewYkrWNfVGRPWtBesnhMfhhYIDDju3aoQCMjTI7GRs1ze2//NAxL0kaza5HniTy4NhWfH8EHJWL88kmrXc0UUw25gbVit9jIg6qxU2hSdafujmtR8sOIWrenepb/XRyhsfcwO3et+OhlB5ajEavijt4ENLfMOxpAurfTnmQw4O2VA4QQR9uUYI5bj/80LEhiRrMqQ0yxCxNBcgiUODInxgAAA1pDOKCp56DDjy6SNxnpWu7aaTTILikplzKw0YMgxtAaddeNv9IpK63HJ6ljQz03t0V2NUuraN/ib/Qz+yb69H/mlonV/p6oft/9n7//Vu2wn/80DEUBYS/qAAykqsVNGMJAJ6r4lVAKqst23/23HRKDtYT2q5cWO4C1DJQkG58FW6KWyqiUe+jTS+CKxqohVVKISoV3JUdKEQxDiZWugCaoq5cSRHRSIlDf8z/5v0X4yS5X2/lSSpb//zQsRSFUo67l5Jys6ElROqAAgclsk3n2HIyijLXay2VXrLmq4c4fyfVom+I45e2sdZ1hsoVrfv5e1j0lJQHGUqnXTu3TbGt/gOZ5WHvtE2xgkt3LlslGf//6flwiE39f/mJYRHk9S2df/zQMRYFgpG0l56yyJVAMktul3v4FiePyHHfWtWu7bO2bg9qZZ2PWzbcf9eE/30jorpdQKx+TqxIGqYbCo/ZjUfB+lBtv+G9GVOr8hqlDPgyN//9ur/MOoLAf2f8jQpAIauRS3UCCDT//NCxFoUMj7VvnoFJgzQkAbJts8ceDjItHZEp10L96qs7ANepuO5BGisqpkLuIxLGkiQl048TKKD85dsY//+37+vX2X8rIv/aFv8UlgzEgBcaI+R9ioAGGOTWT/AAVITIDpdJdso+RR6//NAxGUUSjq5nnqKzjkeyMauxjqPEnGW4qMeX+tt7f0R9Jv4k2l1GcxkKfc5lSM/UK7aPhL/gyixilexSssUmuR4l0f//yfCJPi9AZU2t2/wAGB3Hwi0Q5KWEpYa4/mvptRlnvyJu47/80LEbhQqOspeeEtC5dx6mpJARkouCS8WRC/LpwHHe3UU0RdzIwoOxFti5keFzQODB38spv/yL46kNwJ/Q3RllS+ajjtAlIVdoR94VKxAGkwNJSqo2szQe4BEzxt8frT/vyS/q/n/Cnz/80DEeRQRos2+eg8qVfZryImoVY4ou34v6LPHVVw1PtmTL/Pf792/X8z//0/bMpmN9G6knee+Vc5sLiCLg+qTLd22wpjs4KpEKBGBCAFliCC71PHDs38xk1RpbkGMAVp30p7ad9G/Zf/zQsSDFsK6qF7L1D52VGfsqWiuYqMq3dKH/Z2vBOe0l8bRpGQ3SjCbdZS6MgDAgHFCRy8m1wuf50NjAk1swjn133yCZcn1QxO15IDpY835pwLrZC5riMTwLowuiJBAIQLUI0clGWW0b//zQMSEJLNKoB7B0r2sX2lCOZQhHiSYUJgwRjEJqSNNySQUJcyiggrIJu0hlfHTh+hol+xSTi6iKmeDpfQN10rRPp/fK7Zf2/07qQxVapXK9SoaZDCZClYWjBI1uVOZDTK3+pSoY4Dj//NCxEwY6z7JHnqKN9+VlMoxXKrKZZXFWfDwo414kd10MYwjUgP5dtvvtrhwVSQnYjnkXVbVenQjFUzm6AYZ/TsaGtJh42K8hkXoCedo+ffxuQGykdS+UtU3//nPQWlBuMiJZ77QVLzL//NAxEQT4ZrdvkrOxqr/xJEX7GMqfV2++gKEpNtvfvhYgDEV6/s67ywGxpYdrjOJwJvBLi5WbK8idFA8eePdB2eS6NcS/ypmHg4vzqoTcp/MQ4v//7I2hxxzuQpR////1b//nMIWPi3/80LETxU60s2+eJR2zhVsqe4tAITbt134wDCCnMEOphQYhENgs1WancLMjiWjfWCVdvIe1JXNkK6I/i/UbNQvjmUMZwIE0jbKjGIwYzP45zW53eExc5//pPN+PK0s+///+0i3PArQAdb/80DEVhT5/rm+e06y7Lrt+ABpElpYshkDrLB3a/zFIVDkp5W5bZzcrIH5G1/gqSFS9auywN+tHXrWY2UttxOnXkd0o5aoXKKIIkoPXsImVCjCE6clfX+h+c0lLIX/lOjckJ5RZAt8Uv/zQMRdFzICtb7D1H4B1yzbX/gASALxuCAkY2RrKzq7ie2HWetQjl/DTSu/7KUMiLVw8bc/xFi4jQ6EZ1RwE08X0jXmZ+AzLdhOp/hFtf4u3/UU3F9BNyOTpOMDZO4B1OSS//gAeOHf//NCxFsUQa65vnrLRgQra8/C0d3Keb7GqKJfLaS3Fu+u2X578gEABCt5KVL5fawjkmIl/9XKwuSfJXkYsHmCIPPjBPyTlvVkKtlIqn6CZwgo9ctMquXS3//f/f0CjUCgAGDA6M2dx49V//NAxGYUAZ61v1hQAox4iDsBt5ZRCiDaqnbK2kPKCEBRBTjwZbDBp8coOEfCyYWEUuAvo8EXBqYn4XGanyHB2SZnSDjHjsIQcocp0jp4bpTKh0jCHIDYPkEGk50jGaQQtMTDF9h4dBT/80LEcSWLGs5fmZACdPv///l83c3yv//Wf5xvzBjS5uggZm9jP/////sZn6HucQNFm9UADBBiCDDDDDAuZoFxF8tAMpJJw5VC3NNY5JbKNsVwvjQJpqJ7KUmLHF5ZVJ3UKA87aMsRYvv/80DENiGSHtmVj2AAONvnlV9b67S8r18qJ9ylD+j21fpl836O99H7/M+s7LxX6Z2Zys2vu07qUu/7b/07/nJ6lOh48oRFEE11BAEHwfB82OXjGgallmfLn/+Wf/oVkcTYdQCGgFEFW//zQsQKFKFC1AHMGADMRrSN7WtIl2Sz0uEoSJq0QEFErJGzfDNlAfPobc47flrwqnzgIBnSwHYjc4JIiy5xT5V1gxygZCo8oVtM8YGCL38V9brFncGVQ5rqqknRwYqKDi+bgdNEAo0s/P/zQMQTE2i67ZYzBladIHdeZFB2axtN0qgpcTBzWMQwGAaAGVWCM0kDrUkVmblmSVBIBUc6u6mlf1DkHmEdRXziXQ1KfRvqQgIAlRxrOyO0XBQWNCrGzQakcF2nLw9Bn4KoooMvC08t//NCxCAUGI7NlErYIAWLioiMmgaYBQE+aqMLXJBQOikUWfJuWT+9ikLtJmo2ugx1Cui90o/Xrd5qJqCh4nV9fJKD4fW0dqG5Jnc7cFXZyBLNsu5LIdj6u+385ANuDt505DOvGc/7ylSM//NAxCsT0TLENnsGVLI15gwAKlg0GhVbKCz7lRGVIus9T/Az5AgSOQao0+t3/nnriFWAABmabeG6fHy8AwDj8DC0JfERlVI6TMoOhT3gdTM93CbVFA4WSPeGxEGTTJ0VGnaYqoVO2PD/80LENhSYjrmWYlZokEHljuh2fcwlfKkn+gJRC7I1CwFyKn65ap5z8mrCRfqrbjFnU/ZKSwJh6xO2O+z+IGet95xptRrHooLwqJ5+1QTIw2YVbx+lEqdoFfI/PrzDsTs5mz/uufbzZs3/80DEPxMDEsmWSEUz//r+Y3///92yHxbj8sFTfjckt41ja3H4tHocr+VlM1lDMD3H5vk4VnBOXoHBZY1qdgWSSwens/MpDWLGNq9rs+i5a/Syu0rF7/ojaS3VS//VPUvmC+oYBIk9Tv/zQsROFFJmtZ5gxPDyL+Xq0Au+NtyuDaMkUMxJjLG145yypNvs4KG0tQeXCG21Kgkijs4eapyMMmpl6smXRJ7auzIj3cuvp/90e7PKfqKd0Yzqnv9E/qHwMVQe+xnyPhqJJKOySSSWUP/zQMRYFAKSxZ5AywrUS55Nek6Kwv861nrzX/A8cOnrvONjds8ZuZKT739b+zisCVH86L7y5Wf5SU16zISn/X4/mMVeR99bjIx/XL5SW1//iZ1wBBlaUWPd9C0OSBk8RMIT8pH4XH+r//NCxGMTw0bWXjBHeuQtn9jngxLc5Yp4KykfptzR9Fdgr///kNkS17f596JlPq3//v+rLCLRzGaarGNYx2RaOzrOhlqZvyzEHipOJVYBmHHjFOYB1choFDbppFrXbAuphvkOa19UsiOr//NAxHAUM0KgVEhFDfNmaTImYEBNtsm6oa51RNzrrsxKKdbN9/60/srIuv/3b9P3rtXvT/c3q9Oz5G0OJjEejngQMqc/D2qULeiVaxJbEk15lb9uGrHY5BHDQko2Z9BCpL2niZZhFOb/80LEehOzOph0CwQcJlet3Ey8LxG0f3kQZHq38rPKq//9Pt/a9trZHpMK5Vy7yVUh9R2WS3bASLB5JNbrHUshw+9Gbo5etie2D0w9Zf7MErGVOaxQbmdBo1k2HJsbcaxq5QX3NTAyTiX/80DEhxNK3ohMeET85QUNMM7XhWoRZUwirQ488XRRHA7O99oiDAEjkcl1lsGKzw6Lo1d3fEyjzIlLzEwcbWZqesAhWYYoQ2xE7qmCMOvWz67G9UaHDehqgRj5upHFDHRxGVUemDJcIP/zQsSUFEDinb4LBhhJZkEJY/vdtunhYNSbXHXWihuaJPBUqfrneQUB22JuVV24eZzmhOeYJAIBALSKgCRNgLH0MVT41AdjZmqkzGzHsdVYxqJVSaMzMzf0Kv/sa+x/w/1/qw1h3Vfqif/zQMSfF2Fakl4LBhghmS1A0/2RF/KuK1nSroNZH5UZ0olG4AqkyEhcVMgIWFWGfYK6H+LCuoXZu//ULs/1X///29f9Quz9Yo00sVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVV//NCxJwUwdaBvjJGwFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//NAxKULIAH0XghGAlVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",ht=function(){function e(){var t=this;s(this,e),this.context=void 0,this.instant=0,this.slow=0,this.clip=0,this.type="",this.script={},this.mic=void 0,window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,this.script=this.context.createScriptProcessor(4096,1,1),this.script.onaudioprocess=function(e){var r,o=e.inputBuffer.getChannelData(0),n=0,i=0;for(r=0;r<o.length;++r)n+=o[r]*o[r],Math.abs(o[r])>.99&&(i+=1);t.instant=Math.sqrt(n/o.length),t.slow=.95*t.slow+.05*t.instant,t.clip=i/o.length}}return c(e,[{key:"connectToStreamSource",value:function(e,t){console.log("SoundMeter connecting");try{this.type="Stream",this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof t&&t(null)}catch(r){console.error(r),"undefined"!==typeof t&&t(r)}}},{key:"connectToElementSource",value:function(e,t){console.log("SoundMeter connecting");try{this.type="Element",this.mic||(this.mic=this.context.createMediaElementSource(e)),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof t&&t(null)}catch(r){console.error(r),"undefined"!==typeof t&&t(r)}}},{key:"stop",value:function(){var e,t,r,o;(console.log("SoundMeter stopping"),"Element"===this.type)?(null===(e=this.mic)||void 0===e||e.disconnect(this.script),null===(t=this.script)||void 0===t||t.disconnect(this.context.destination)):(null===(r=this.mic)||void 0===r||r.disconnect(),null===(o=this.script)||void 0===o||o.disconnect());this.instant=0,this.slow=0,this.clip=0}}]),e}(),pt=function(t){l(n,t);var r=f(n);function n(){var t;s(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=r.call.apply(r,[this].concat(i))).state={visible:!0,selectTab:"AUDIO",selectMic:void 0,selectSpeaker:void 0,selectCamera:void 0,micDevices:[],speakerDevices:[],cameraDevices:[],localVideoStream:void 0,localAudioStream:void 0,selectVideoResolution:"360p",audioVolume:0,speakerVolume:0,isSpeakerPlaying:!1,renderAudio:!1,showNonVideo:t.props.initDevices.showNonVideoUser},t.videoRef=e.createRef(),t.speakerTimer=null,t.micTimer=null,t.micSounder=new ht,t.speakerSounder=new ht,t.solutionList=t.sortResolution(t.props.core._config.videoResolutionList),t}return c(n,[{key:"componentDidMount",value:function(){var e=i(o().mark((function e(){var t,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDevices();case 2:t=e.sent,this.setState(w({},t),(function(){r.createVideoStream(),r.createAudioStream()})),document.querySelector("#speakerAudioTest").addEventListener("ended",this.onTestMusicEnded.bind(this));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.isSpeakerPlaying&&(this.speakerTimer&&clearTimeout(this.speakerTimer),this.speakerSounder.stop()),this.state.localAudioStream&&(this.state.localAudioStream.getAudioTracks().forEach((function(e){e.stop()})),this.micTimer&&clearTimeout(this.micTimer),this.micSounder.stop()),this.state.localVideoStream&&this.props.core.destroyStream(this.state.localVideoStream);var e=document.querySelector("#speakerAudioTest");null===e||void 0===e||e.removeEventListener("ended",this.onTestMusicEnded.bind(this))}},{key:"getDevices",value:function(){var e=i(o().mark((function e(){var t,r,n,i,s,a,c,u,l,d,h,p,f=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.core.getMicrophones();case 2:return c=e.sent,e.next=5,this.props.core.getSpeakers();case 5:return u=e.sent,e.next=8,this.props.core.getCameras();case 8:return l=e.sent,u.length||(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)||/Firefox/.test(navigator.userAgent))&&u.push({deviceID:"default",deviceName:"Default speaker"}),d=c.filter((function(e){return e.deviceID===f.props.initDevices.mic})),h=l.filter((function(e){return e.deviceID===f.props.initDevices.cam})),p=u.filter((function(e){return e.deviceID===f.props.initDevices.speaker})),e.abrupt("return",{micDevices:c.filter((function(e){return e.deviceID})),speakerDevices:u.filter((function(e){return e.deviceID})),cameraDevices:l.filter((function(e){return e.deviceID})),selectMic:(null===(t=d[0])||void 0===t?void 0:t.deviceID)||(null===(r=c[0])||void 0===r?void 0:r.deviceID)||void 0,selectSpeaker:(null===(n=p[0])||void 0===n?void 0:n.deviceID)||(null===(i=u[0])||void 0===i?void 0:i.deviceID)||void 0,selectCamera:(null===(s=h[0])||void 0===s?void 0:s.deviceID)||(null===(a=l[0])||void 0===a?void 0:a.deviceID)||void 0,selectVideoResolution:this.props.initDevices.videoResolve||void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createVideoStream",value:function(){var e=i(o().mark((function e(){var t,r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Z(this.state.selectVideoResolution),r={camera:w({video:!0,audio:!1,videoInput:this.state.selectCamera,videoQuality:4},t)},e.next=5,this.props.core.createStream(r);case 5:return n=e.sent,this.setState({localVideoStream:n}),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error("\u3010ZEGOCLOUD\u3011settings/localVideoStream failed !!",JSON.stringify(e.t0)),this.props.core._config.turnOnCameraWhenJoining=!1,e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"createAudioStream",value:function(){var e=i(o().mark((function e(){var t,r,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={camera:{video:!1,audio:!0,audioInput:this.state.selectMic}},e.next=4,this.props.core.createStream(t);case 4:return r=e.sent,this.setState({localAudioStream:r},(function(){n.captureMicVolume()})),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.error("\u3010ZEGOCLOUD\u3011settings/localAudioStream failed !!",JSON.stringify(e.t0)),this.props.core._config.turnOnMicrophoneWhenJoining=!1,e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"toggleTab",value:function(e){e!==this.state.selectTab&&("AUDIO"===e?this.captureMicVolume():(this.state.localAudioStream&&(this.micSounder.stop(),this.micTimer&&clearTimeout(this.micTimer),this.setState({audioVolume:0})),this.state.isSpeakerPlaying&&(this.speakerTimer&&clearTimeout(this.speakerTimer),this.speakerSounder.stop(),this.setState({isSpeakerPlaying:!1,speakerVolume:0}))),this.setState({selectTab:e}))}},{key:"toggleMic",value:function(){var e=i(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.localAudioStream){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.props.core.useMicrophoneDevice(this.state.localAudioStream,t);case 4:r=e.sent,this.micSounder.stop(),this.micTimer&&clearTimeout(this.micTimer),this.captureMicVolume(),0===r.errorCode&&(this.setState({selectMic:t}),this.props.onMicChange(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleSpeaker",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({selectSpeaker:t}),this.props.onSpeakerChange(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleCamera",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.localVideoStream){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.props.core.useCameraDevice(this.state.localVideoStream,t);case 4:0===e.sent.errorCode&&(this.setState({selectCamera:t}),this.props.onCameraChange(t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleVideoResolution",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.createVideoStream(),this.setState({selectVideoResolution:t}),this.props.onVideoResolutionChange(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleSpeakerTest",value:function(){var e=this;this.state.speakerDevices.length&&(this.speakerTimer&&clearTimeout(this.speakerTimer),this.setState({isSpeakerPlaying:!this.state.isSpeakerPlaying},i(o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.querySelector("#speakerAudioTest"),n=document.querySelector("#speakerAudio"),!r.paused){t.next=12;break}if(t.t0=null===n||void 0===n?void 0:n.setSinkId,!t.t0){t.next=7;break}return t.next=7,null===n||void 0===n?void 0:n.setSinkId(e.state.selectSpeaker||"");case 7:n.play(),r.play(),e.speakerSounder.connectToElementSource(r,(function(t){t&&console.error("[zegocloud] captureSpeakerVolume!!!",JSON.stringify(t)),e.speakerTimer=setInterval((function(){e.setState({speakerVolume:100*e.speakerSounder.instant})}))})),t.next=17;break;case 12:r.pause(),r.currentTime=0,n.pause(),n.currentTime=0,e.setState({speakerVolume:0});case 17:case"end":return t.stop()}}),t)})))))}},{key:"close",value:function(){sessionStorage.setItem("selectMic",this.state.selectMic||""),sessionStorage.setItem("selectCamera",this.state.selectCamera||""),sessionStorage.setItem("selectSpeaker",this.state.selectSpeaker||""),sessionStorage.setItem("selectVideoResolution",this.state.selectVideoResolution||""),this.setState({visible:!1}),this.props.closeCallBack&&this.props.closeCallBack()}},{key:"captureMicVolume",value:function(){var e=this;this.state.localAudioStream&&this.micSounder.connectToStreamSource(this.state.localAudioStream,(function(t){t&&console.error("[zegocloud] captureMicVolume!!!",JSON.stringify(t)),e.micTimer=setInterval((function(){e.setState({audioVolume:1e3*e.micSounder.instant/5})}))}))}},{key:"onTestMusicEnded",value:function(){var e=document.querySelector("#speakerAudio");e.pause(),e.currentTime=0,this.speakerSounder.stop(),this.speakerTimer&&(clearTimeout(this.speakerTimer),this.speakerTimer=null),this.setState({isSpeakerPlaying:!1,speakerVolume:0})}},{key:"handleShowNonVideo",value:function(){var e;null===(e=this.props)||void 0===e||e.onShowNonVideoChange(!this.state.showNonVideo),this.setState({showNonVideo:!this.state.showNonVideo})}},{key:"sortResolution",value:function(e){return e.sort((function(e,t){return Number(e.replace("p",""))-Number(t.replace("p",""))})).map((function(e){return{name:e,value:e}}))}},{key:"render",value:function(){var e,t,r=this;return(0,ut.jsx)("div",{className:"".concat(this.state.visible?Be:Ue," ").concat("black"===this.props.theme?Ce:we," settings_audio"),children:(0,ut.jsxs)("div",{className:je,children:[(0,ut.jsxs)("div",{className:He,children:[(0,ut.jsx)("div",{children:"Settings"}),(0,ut.jsx)("div",{onClick:function(){r.close()},className:Oe})]}),(0,ut.jsxs)("div",{className:ze,children:[(0,ut.jsxs)("div",{className:Ae,children:[(0,ut.jsx)("div",{className:"".concat(ke," ").concat("AUDIO"===this.state.selectTab&&Pe),onClick:function(){r.toggleTab("AUDIO")},children:"Audio"}),(0,ut.jsx)("div",{className:"".concat(Re," ").concat("VIDEO"===this.state.selectTab&&Pe),onClick:function(){r.toggleTab("VIDEO")},children:"Video"})]}),(0,ut.jsxs)("div",{className:"".concat(Ie," "),children:["AUDIO"===this.state.selectTab&&(0,ut.jsxs)("div",{className:Qe,children:[(0,ut.jsxs)("div",{className:Ve,children:[(0,ut.jsx)(lt,{label:"Microphone",options:this.state.micDevices.map((function(e){return{name:e.deviceName,value:e.deviceID}})),onChange:function(e){r.toggleMic(e)},initValue:this.state.selectMic,placeholder:"No microphone detected",theme:this.props.theme}),(0,ut.jsxs)("div",{className:Le,children:[(0,ut.jsx)("span",{className:"".concat(Ne," ").concat(this.state.localAudioStream?De:"")}),Array(20).fill(1).map((function(e,t){return(0,ut.jsx)("span",{className:"".concat(r.state.audioVolume>=t+1?Ge:""," ").concat(qe)},t)}))]})]}),(0,ut.jsxs)("div",{className:Ve,children:[(0,ut.jsx)(lt,{label:"Speakers",options:this.state.speakerDevices.map((function(e){return{name:e.deviceName,value:e.deviceID}})),onChange:function(e){r.toggleSpeaker(e)},initValue:this.state.selectSpeaker,placeholder:"No speaker detected",theme:this.props.theme}),(0,ut.jsxs)("div",{className:Le,children:[(0,ut.jsx)("span",{className:"".concat(Me," ").concat(this.state.isSpeakerPlaying?xe:"")}),Array(16).fill(1).map((function(e,t){return(0,ut.jsx)("span",{className:"".concat(r.state.speakerVolume>=t+1?Ge:""," ").concat(qe)},t)})),(0,ut.jsx)("div",{className:Ze,onClick:function(){r.toggleSpeakerTest()},children:this.state.isSpeakerPlaying?"Stop":"Test"})]})]})]}),"VIDEO"===this.state.selectTab&&(0,ut.jsxs)("div",{className:Ke,children:[(0,ut.jsx)("div",{className:Ve,children:(0,ut.jsx)(lt,{label:"Camera",options:this.state.cameraDevices.map((function(e){return{name:e.deviceName,value:e.deviceID}})),onChange:function(e){r.toggleCamera(e)},initValue:this.state.selectCamera,placeholder:"No camera detected",theme:this.props.theme})}),(0,ut.jsxs)("div",{className:Ve,children:[(0,ut.jsx)("label",{children:"Preview"}),(0,ut.jsx)("video",{muted:!0,autoPlay:!0,className:Je,ref:function(e){e&&r.state.localVideoStream&&e.srcObject!==r.state.localVideoStream&&(e.srcObject=r.state.localVideoStream)}})]}),(0,ut.jsx)("div",{className:Ve,children:(0,ut.jsx)(lt,{label:"Send resolution",options:this.solutionList,onChange:function(e){r.toggleVideoResolution(e)},initValue:this.state.selectVideoResolution,placeholder:"",theme:this.props.theme})}),(null===(e=this.props.core._config.scenario)||void 0===e?void 0:e.mode)!==g.LiveStreaming&&(null===(t=this.props.core._config.scenario)||void 0===t?void 0:t.mode)!==g.OneONoneCall&&(0,ut.jsx)("div",{className:Ve,children:(0,ut.jsxs)("div",{className:Fe,onClick:function(){return r.handleShowNonVideo()},children:[(0,ut.jsx)("span",{className:"".concat(We," ").concat(this.state.showNonVideo&&Ye)}),(0,ut.jsx)("p",{children:"Show non-video participant"})]})})]})]})]}),(0,ut.jsx)("audio",{style:{width:"1px",height:"1px"},id:"speakerAudioTest",src:dt}),(0,ut.jsx)("audio",{style:{width:"1px",height:"1px"},id:"speakerAudio",src:dt})]})})}}]),n}(e.Component),ft="zegoModel_ZegoBrowserCheckNotSupport__mP9Pj",_t="zegoModel_content__TaXHc",gt="zegoModel_tipsHeader__Qy0YW",mt="zegoModel_tipsText__TTuQ7",vt="zegoModel_buttonWrapper__NZPG5",yt="zegoModel_okButton__VnzTo",bt="zegoModel_cancelButton__qhqAM",St=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){var e=this.props,t=e.header,r=e.contentText,o=e.okText,n=e.cancelText,i=e.onOk,s=e.onCancel;return(0,ut.jsx)("div",{className:ft,children:(0,ut.jsxs)("div",{className:_t,children:[(0,ut.jsx)("p",{className:gt,children:t}),(0,ut.jsx)("p",{className:mt,children:r}),(0,ut.jsxs)("div",{className:vt,children:[n&&(0,ut.jsx)("button",{className:bt,onClick:function(){s&&s()},children:n}),o&&(0,ut.jsx)("button",{className:yt,onClick:function(){i&&i(),s&&s(!1)},children:o})]})]})})}}]),r}(e.Component),Et=function(e,r){var o=document.createElement("div");(r||document.body).appendChild(o);var n=t.createRoot(o);n.render((0,ut.jsx)(St,w(w({},e),{},{onCancel:function(t){n.unmount(),!t&&e.onCancel&&e.onCancel()}})))},Tt=function(t){l(n,t);var r=f(n);function n(t){var o,i;return s(this,n),(i=r.call(this,t)).state={localStream:void 0,localVideoStream:void 0,localAudioStream:void 0,userName:"xxx",videoOpen:!0,audioOpen:!0,isVideoOpening:!0,isCopied:!1,isJoinRoomFailed:!1,joinRoomErrorTip:"Failed to join the room.",showDeviceAuthorAlert:!1,selectMic:void 0,selectSpeaker:void 0,selectCamera:void 0,selectVideoResolution:i.props.core._config.videoResolutionList[0],isJoining:!1,showNonVideo:i.props.core._config.showNonVideoUser,sharedLinks:null===(o=i.props.core._config.sharedLinks)||void 0===o?void 0:o.map((function(e){return{name:e.name,url:e.url,copied:!1}})),showZegoSettings:!1,isSmallSize:!1},i.videoRef=void 0,i.inviteRef=void 0,i.audioRefuse=i.props.core.status.audioRefuse,i.videoRefuse=i.props.core.status.videoRefuse,i.throttleResize=F(i.onResize.bind(h(i)),300),i.videoRef=e.createRef(),i.inviteRef=e.createRef(),i}return c(n,[{key:"componentDidMount",value:function(){var e=i(o().mark((function e(){var t,r,n,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.onResize(),window.addEventListener("resize",this.throttleResize.bind(this),!1),this.setState({userName:this.props.core._expressConfig.userName}),t=!!this.props.core._config.turnOnCameraWhenJoining,r=!!this.props.core._config.turnOnMicrophoneWhenJoining,!t&&!r){e.next=12;break}return e.next=8,this.getDevices();case 8:n=e.sent,this.setState(w({},n),i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t&&!r){e.next=5;break}return e.next=3,s.createStream(t,r);case 3:e.next=6;break;case 5:s.setState({audioOpen:r,videoOpen:t});case 6:case"end":return e.stop()}}),e)})))),e.next=13;break;case 12:this.setState({audioOpen:r,videoOpen:t,isVideoOpening:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.throttleResize.bind(this),!1),this.state.localVideoStream&&this.props.core.destroyStream(this.state.localVideoStream),this.state.localAudioStream&&this.props.core.destroyStream(this.state.localAudioStream)}},{key:"onResize",value:function(){this.props.core._config.container.offsetWidth<960||this.props.core._config.container.offsetHeight<=530?this.setState({isSmallSize:!0}):this.setState({isSmallSize:!1})}},{key:"getDevices",value:function(){var e=i(o().mark((function e(){var t,r,n,i,s,a,c,u,l,d,h,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.core.getMicrophones();case 2:return c=e.sent,e.next=5,this.props.core.getSpeakers();case 5:return u=e.sent,e.next=8,this.props.core.getCameras();case 8:return l=e.sent,u.length||(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)||/Firefox/.test(navigator.userAgent))&&u.push({deviceID:"default",deviceName:"efault speaker"}),d=c.filter((function(e){return e.deviceID===sessionStorage.getItem("selectMic")})),h=l.filter((function(e){return e.deviceID===sessionStorage.getItem("selectCamera")})),p=u.filter((function(e){return e.deviceID===sessionStorage.getItem("selectSpeaker")})),e.abrupt("return",{selectMic:(null===(t=d[0])||void 0===t?void 0:t.deviceID)||(null===(r=c[0])||void 0===r?void 0:r.deviceID)||void 0,selectSpeaker:(null===(n=p[0])||void 0===n?void 0:n.deviceID)||(null===(i=u[0])||void 0===i?void 0:i.deviceID)||void 0,selectCamera:(null===(s=h[0])||void 0===s?void 0:s.deviceID)||(null===(a=l[0])||void 0===a?void 0:a.deviceID)||void 0,selectVideoResolution:sessionStorage.getItem("selectVideoResolution")||this.props.core._config.videoResolutionList[0]});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createStream",value:function(){var e=i(o().mark((function e(t,r){var n,i,s,a,c,u,l=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new MediaStream,e.prev=1,!t){e.next=10;break}return this.setState({isVideoOpening:!0}),c=Z(this.state.selectVideoResolution),e.next=7,this.props.core.createStream({camera:w({video:!0,audio:!1,videoInput:this.state.selectCamera,videoQuality:4},c)});case 7:n=e.sent,null===(a=n)||void 0===a||a.getVideoTracks().map((function(e){s.addTrack(e)})),this.setState({localVideoStream:n,isVideoOpening:!1});case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),this.videoRefuse=!0,this.setState({isVideoOpening:!1}),console.error("\u3010ZEGOCLOUD\u3011toggleStream/createStream failed !!",JSON.stringify(e.t0));case 17:if(e.prev=17,!r){e.next=24;break}return e.next=21,this.props.core.createStream({camera:{video:!1,audio:!0,audioInput:this.state.selectMic}});case 21:i=e.sent,null===(u=i)||void 0===u||u.getAudioTracks().map((function(e){s.addTrack(e)})),this.setState({localAudioStream:i});case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(17),this.audioRefuse=!0,console.error("\u3010ZEGOCLOUD\u3011toggleStream/createStream failed !!",JSON.stringify(e.t1));case 30:return this.setState({localStream:s,audioOpen:r&&!this.audioRefuse,videoOpen:t&&!this.videoRefuse,isVideoOpening:!1},(function(){l.videoRef.current&&s&&(l.videoRef.current.srcObject=s)})),e.abrupt("return",s);case 32:case"end":return e.stop()}}),e,this,[[1,12],[17,26]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"toggleStream",value:function(){var e=i(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("video"!==t){e.next=16;break}if(!this.videoRefuse){e.next=4;break}return Et({header:"Equipment authorization",contentText:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",okText:"Okay"},document.querySelector(".".concat(X))),e.abrupt("return");case 4:if(r=!this.state.videoOpen,this.state.localVideoStream){e.next=10;break}return e.next=8,this.createStream(r,this.state.audioOpen);case 8:e.next=13;break;case 10:this.props.core.destroyStream(this.state.localVideoStream),this.setState({localVideoStream:void 0}),/Firefox/.test(navigator.userAgent)&&this.videoRef.current&&this.state.localStream&&(this.videoRef.current.srcObject=this.videoRef.current.srcObject);case 13:this.setState({videoOpen:r}),e.next=28;break;case 16:if("audio"!==t){e.next=28;break}if(!this.audioRefuse){e.next=20;break}return Et({header:"Equipment authorization",contentText:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",okText:"Okay"},document.querySelector(".".concat(X))),e.abrupt("return");case 20:if(n=!this.state.audioOpen,this.state.localAudioStream){e.next=26;break}return e.next=24,this.createStream(this.state.videoOpen,n);case 24:e.next=27;break;case 26:this.props.core.muteMicrophone(this.state.audioOpen);case 27:this.setState({audioOpen:n});case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"joinRoom",value:function(){var e=i(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.userName.length){e.next=2;break}return e.abrupt("return");case 2:if(!this.state.isJoining){e.next=4;break}return e.abrupt("return");case 4:this.setState({isJoining:!0},i(o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.props.core._expressConfig.userName=t.state.userName,t.props.core._config.turnOnMicrophoneWhenJoining=t.state.audioOpen&&!t.audioRefuse,t.props.core._config.turnOnCameraWhenJoining=t.state.videoOpen&&!t.videoRefuse,t.props.core.status.audioRefuse=t.audioRefuse,t.props.core.status.videoRefuse=t.videoRefuse,t.props.core.status.micDeviceID=t.state.selectMic,t.props.core.status.cameraDeviceID=t.state.selectCamera,t.props.core.status.speakerDeviceID=t.state.selectSpeaker,t.props.core.status.videoResolution=t.state.selectVideoResolution,t.props.core._config.showNonVideoUser=t.state.showNonVideo,e.next=12,t.props.core.enterRoom();case 12:r=e.sent,n="",0===r?(t.state.localAudioStream&&t.props.core.destroyStream(t.state.localAudioStream),t.state.localVideoStream&&t.props.core.destroyStream(t.state.localVideoStream),t.props.joinRoom&&t.props.joinRoom()):n=1002034===r?"Failed to join the room, the number of people in the room has reached the maximum.(2 people)":[1002031,1002053].includes(r)?"There's something wrong with your network. Please check it and try again.":[1102018,1102016,1102020].includes(r)?"Failed to join the room, token authentication error.":1002056===r?"You are on a call in another room, please leave that room first.":"Failed to join the room, please try again.(error code:"+r+")",t.setState({isJoinRoomFailed:!!n,joinRoomErrorTip:n,isJoining:!1});case 16:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({userName:e.target.value.trim().substring(0,255)})}},{key:"openSettings",value:function(){this.setState({showZegoSettings:!0})}},{key:"render",value:function(){var e,t,r,o,n,i=this;return(0,ut.jsxs)("div",{className:"".concat(X," ").concat(this.state.isSmallSize?Te:""),children:[(0,ut.jsxs)("div",{className:$,children:[(0,ut.jsxs)("div",{className:ee,children:[(0,ut.jsx)("video",{className:te,autoPlay:!0,muted:!0,ref:this.videoRef}),!this.props.core._config.showMyCameraToggleButton&&!this.props.core._config.turnOnCameraWhenJoining&&(0,ut.jsx)("div",{className:oe,children:this.state.userName.substring(0,1)||this.props.core._expressConfig.userName.substring(0,1)||"Z"}),(this.props.core._config.showMyCameraToggleButton||this.props.core._config.turnOnCameraWhenJoining)&&(0,ut.jsxs)("div",{className:re,children:[!this.state.videoOpen&&!this.state.isVideoOpening&&"Camera is off",this.state.isVideoOpening&&"Camera is starting\u2026"]}),(0,ut.jsxs)("div",{className:ne,children:[this.props.core._config.showMyMicrophoneToggleButton&&(0,ut.jsx)("div",{className:"".concat(se," ").concat(!this.state.audioOpen&&ae),onClick:function(){i.toggleStream("audio")},children:(0,ut.jsx)("span",{className:ie,children:this.state.audioOpen?"Turn off microphone":"Turn on microphone"})}),this.props.core._config.showMyCameraToggleButton&&(0,ut.jsx)("div",{className:"".concat(ce," ").concat(!this.state.videoOpen&&ae),onClick:function(){i.toggleStream("video")},children:(0,ut.jsx)("span",{className:ie,children:this.state.videoOpen?"Turn off camera":"Turn on camera"})}),this.props.core._config.showAudioVideoSettingsButton&&(0,ut.jsx)("div",{className:ue,onClick:function(){i.openSettings()},children:(0,ut.jsx)("span",{className:ie,children:"Settings"})})]})]}),(0,ut.jsxs)("div",{className:le,children:[(0,ut.jsxs)("div",{className:he,children:[(0,ut.jsx)("div",{className:de,children:null===(e=this.props.core._config.preJoinViewConfig)||void 0===e?void 0:e.title}),(0,ut.jsx)("input",{className:pe,placeholder:"Your Name",value:this.state.userName,onChange:function(e){i.handleChange(e)}}),(0,ut.jsxs)("div",{className:fe,children:[(0,ut.jsxs)("button",{className:_e,disabled:!this.state.userName.length,onClick:function(){i.joinRoom()},children:[this.state.isJoining&&(0,ut.jsx)("span",{className:ge}),"Join"]}),this.state.isJoinRoomFailed&&(0,ut.jsx)("div",{className:me,children:this.state.joinRoomErrorTip})]})]}),(null===(t=this.state)||void 0===t?void 0:t.sharedLinks)&&(null===(r=this.state)||void 0===r||null===(o=r.sharedLinks)||void 0===o?void 0:o.length)>0&&(0,ut.jsxs)("div",{className:ve,children:[(0,ut.jsx)("div",{className:de,children:"Share the link"}),null===(n=this.state.sharedLinks)||void 0===n?void 0:n.map((function(e){return(0,ut.jsxs)("div",{className:ye,children:[(0,ut.jsxs)("div",{className:be,children:[(0,ut.jsx)("h3",{children:e.name}),(0,ut.jsx)("input",{className:Se,placeholder:"inviteLink",readOnly:!0,value:e.url})]}),(0,ut.jsx)("button",{className:Ee,disabled:e.copied,onClick:function(){e&&e.url&&k(e.url),i.setState((function(t){return{sharedLinks:t.sharedLinks.map((function(t){return t.name===e.name&&(t.copied=!0),t}))}})),setTimeout((function(){i.setState((function(t){return{sharedLinks:t.sharedLinks.map((function(t){return t.name===e.name&&(t.copied=!1),t}))}}))}),5e3)}})]},e.name)}))]})]})]}),this.state.showDeviceAuthorAlert&&(0,ut.jsx)(St,{header:"Equipment authorization",contentText:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",okText:"Okay",onOk:function(){i.setState({showDeviceAuthorAlert:!1})}}),this.state.showZegoSettings&&(0,ut.jsx)(pt,{core:this.props.core,initDevices:{mic:this.state.selectMic,cam:this.state.selectCamera,speaker:this.state.selectSpeaker,videoResolve:this.state.selectVideoResolution,showNonVideoUser:this.state.showNonVideo},closeCallBack:function(){i.setState({showZegoSettings:!1})},onMicChange:function(e){i.setState({selectMic:e},(function(){i.createStream(i.state.videoOpen,i.state.audioOpen)}))},onCameraChange:function(e){i.setState({selectCamera:e},(function(){i.createStream(i.state.videoOpen,i.state.audioOpen)}))},onSpeakerChange:function(e){i.setState({selectSpeaker:e})},onVideoResolutionChange:function(e){i.setState({selectVideoResolution:e},(function(){i.createStream(i.state.videoOpen,i.state.audioOpen)}))},onShowNonVideoChange:function(e){i.setState({showNonVideoUser:e})}})]})}}]),n}(e.Component),wt="ZegoBrowserCheckMobile_ZegoBrowserCheckSupport__soE24",Ct="ZegoBrowserCheckMobile_videoScree__hoQ0N",It="ZegoBrowserCheckMobile_video__pB1iu",Ot="ZegoBrowserCheckMobile_hideVideo__1dOOj",kt="ZegoBrowserCheckMobile_videoTip__5JOT-",Rt="ZegoBrowserCheckMobile_noCamera__UxlxJ",At="ZegoBrowserCheckMobile_handler__M4Ye-",Pt="ZegoBrowserCheckMobile_micOpen__OAbJf",Lt="ZegoBrowserCheckMobile_micClose__hp19c",Nt="ZegoBrowserCheckMobile_cameraOpen__8QvUV",Dt="ZegoBrowserCheckMobile_cameraClose__J1cGc",Mt="ZegoBrowserCheckMobile_joinScreen__pahlk",xt="ZegoBrowserCheckMobile_joinRoom__veDLB",Bt="ZegoBrowserCheckMobile_focus__hJoBf",Ut="ZegoBrowserCheckMobile_active__C0P1n",jt="ZegoBrowserCheckMobile_inviteLink__Pgdq8",Ht="ZegoBrowserCheckMobile_inviteLinkWrapperLeft__DaemB",zt="ZegoBrowserCheckMobile_copied__0FRwg",Vt="zegoToast_ZegoToast__0ps1P",qt="zegoToast_content__0MB-Z",Gt="zegoToast_show__MEIJH",Zt=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){return(0,ut.jsx)("div",{className:"".concat(Vt," ").concat(Gt),children:(0,ut.jsx)("div",{className:qt,children:this.props.content})})}}]),r}(e.Component),Ft=function(){var e,r,o=document.createElement("div");return document.body.appendChild(o),function(n){r&&clearTimeout(r),r=setTimeout((function(){var t;n&&n.closeCallBack&&n.closeCallBack(),null===(t=e)||void 0===t||t.unmount(),e=null}),(null===n||void 0===n?void 0:n.duration)||3e3),e&&(e.unmount(),n&&n.closeCallBack&&n.closeCallBack()),(e=t.createRoot(o)).render((0,ut.jsx)(Zt,{closeCallBack:function(){},content:(null===n||void 0===n?void 0:n.content)||"",duration:(null===n||void 0===n?void 0:n.duration)||3}))}}(),Wt="zegoConfirm_ZegoConfirm__b1eY8",Yt="zegoConfirm_content__Mq2KD",Qt="zegoConfirm_tipsHeader__oCjFA",Kt="zegoConfirm_tipsText__mP4ap",Jt="zegoConfirm_handler__K6vHc",Xt=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){var e=this;return(0,ut.jsx)("div",{className:Wt,children:(0,ut.jsxs)("div",{className:Yt,children:[(0,ut.jsx)("p",{className:Qt,children:this.props.title}),(0,ut.jsx)("p",{className:Kt,children:this.props.content}),(0,ut.jsxs)("div",{className:Jt,children:[this.props.cancel&&(0,ut.jsx)("button",{onClick:function(){e.props.closeCallBack(!1)},children:this.props.cancel}),this.props.confirm&&(0,ut.jsx)("button",{onClick:function(){e.props.closeCallBack(!0)},children:this.props.confirm})]})]})})}}]),r}(e.Component),$t=function(e){var r=document.createElement("div");document.body.appendChild(r);var o=t.createRoot(r);o.render((0,ut.jsx)(Xt,{closeCallBack:function(t){o.unmount(),e&&e.closeCallBack&&e.closeCallBack(t)},title:(null===e||void 0===e?void 0:e.title)||"",content:(null===e||void 0===e?void 0:e.content)||"",confirm:(null===e||void 0===e?void 0:e.confirm)||"",cancel:(null===e||void 0===e?void 0:e.cancel)||""}))},er="ZegoLoading_container__30IEp",tr="ZegoLoading_loading__wFDPM",rr=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){return(0,ut.jsxs)("div",{className:er,children:[(0,ut.jsx)("i",{className:tr}),(0,ut.jsx)("p",{children:this.props.content})]})}}]),r}(e.Component),or=function(t){l(n,t);var r=f(n);function n(){var t,o;s(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(o=r.call.apply(r,[this].concat(a))).state={localStream:void 0,localVideoStream:void 0,localAudioStream:void 0,userName:"xxx",videoOpen:!0,audioOpen:!0,copied:!1,isVideoOpening:!0,isJoining:!1,sharedLinks:null===(t=o.props.core._config.sharedLinks)||void 0===t?void 0:t.map((function(e){return{name:e.name,url:e.url,copied:!1}}))},o.videoRef=e.createRef(),o.inviteRef=e.createRef(),o.nameInputRef=e.createRef(),o.audioRefuse=o.props.core.status.audioRefuse,o.videoRefuse=o.props.core.status.videoRefuse,o.isAndroid=B(),o.isIOS=x(),o.clientHeight=0,o.onResize=function(){var e=document.documentElement.clientHeight||document.body.clientHeight;o.clientHeight<=e&&setTimeout((function(){o.nameInputRef.current.scrollIntoView({block:"start"})}),20)},o}return c(n,[{key:"componentDidMount",value:function(){var e=i(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({userName:this.props.core._expressConfig.userName}),t=!!this.props.core._config.turnOnCameraWhenJoining,r=!!this.props.core._config.turnOnMicrophoneWhenJoining,!t&&!r){e.next=8;break}return e.next=6,this.createStream(t,r);case 6:e.next=9;break;case 8:this.setState({audioOpen:r,videoOpen:t,isVideoOpening:!1});case 9:this.clientHeight=document.documentElement.clientHeight||document.body.clientHeight,this.isAndroid&&window.addEventListener("resize",this.onResize,{passive:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.localVideoStream&&this.props.core.destroyStream(this.state.localVideoStream),this.state.localAudioStream&&this.props.core.destroyStream(this.state.localAudioStream),window.removeEventListener("resize",this.onResize)}},{key:"createStream",value:function(){var e=i(o().mark((function e(t,r){var n,i,s,a,c,u=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new MediaStream,e.prev=1,!t||!r){e.next=7;break}return this.setState({isVideoOpening:!0}),e.next=6,this.props.core.createStream({camera:{video:!0,audio:!0,facingMode:this.props.core._config.facingMode}});case 6:s=e.sent;case 7:e.next=39;break;case 9:if(e.prev=9,e.t0=e.catch(1),e.prev=11,!t){e.next=19;break}return this.setState({isVideoOpening:!0}),e.next=16,this.props.core.createStream({camera:{video:!0,audio:!1,facingMode:this.props.core._config.facingMode}});case 16:n=e.sent,null===(a=n)||void 0===a||a.getVideoTracks().map((function(e){s.addTrack(e)})),this.setState({localVideoStream:n});case 19:e.next=26;break;case 21:e.prev=21,e.t1=e.catch(11),this.videoRefuse=!0,this.setState({isVideoOpening:!1}),console.error("\u3010ZEGOCLOUD\u3011toggleStream/createStream failed !!",JSON.stringify(e.t1));case 26:if(e.prev=26,!r){e.next=33;break}return e.next=30,this.props.core.createStream({camera:{video:!1,audio:!0}});case 30:i=e.sent,null===(c=i)||void 0===c||c.getAudioTracks().map((function(e){s.addTrack(e)})),this.setState({localAudioStream:i});case 33:e.next=39;break;case 35:e.prev=35,e.t2=e.catch(26),this.audioRefuse=!0,console.error("\u3010ZEGOCLOUD\u3011toggleStream/createStream failed !!",JSON.stringify(e.t2));case 39:return this.setState({localStream:s,audioOpen:r&&!this.audioRefuse,videoOpen:t&&!this.videoRefuse,isVideoOpening:!1},(function(){u.videoRef.current&&s&&(u.videoRef.current.srcObject=s)})),e.abrupt("return",s);case 41:case"end":return e.stop()}}),e,this,[[1,9],[11,21],[26,35]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"toggleStream2",value:function(){var e=i(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("video"!==t){e.next=15;break}if(!this.videoRefuse){e.next=4;break}return $t({title:"Equipment authorization",content:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",confirm:"Okay"}),e.abrupt("return");case 4:if(r=!this.state.videoOpen,this.state.localVideoStream){e.next=10;break}return e.next=8,this.createStream(r,this.state.audioOpen);case 8:e.next=12;break;case 10:this.state.localVideoStream.getTracks().reverse().forEach((function(e){return e.stop()})),this.setState({localVideoStream:void 0});case 12:this.setState({videoOpen:r}),e.next=27;break;case 15:if("audio"!==t){e.next=27;break}if(!this.audioRefuse){e.next=19;break}return $t({title:"Equipment authorization",content:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",confirm:"Okay"}),e.abrupt("return");case 19:if(n=!this.state.audioOpen,this.state.localAudioStream){e.next=25;break}return e.next=23,this.createStream(this.state.videoOpen,n);case 23:e.next=26;break;case 25:this.props.core.muteMicrophone(n);case 26:this.setState({audioOpen:n});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleStream1",value:function(){var e=i(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"video"===t&&this.state.localStream?(r=!this.state.videoOpen,this.state.localStream.getVideoTracks().map((function(e){e.enabled=r})),this.setState({videoOpen:r})):"audio"===t&&this.state.localStream&&(n=!this.state.audioOpen,this.state.localStream.getAudioTracks().map((function(e){e.enabled=n})),this.setState({audioOpen:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleStream",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.videoOpen&&this.state.audioOpen&&this.state.localStream&&!this.state.localAudioStream&&!this.state.localVideoStream?this.toggleStream1(t):this.toggleStream2(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"joinRoom",value:function(){var e=i(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.userName.length){e.next=2;break}return e.abrupt("return");case 2:if(!this.state.isJoining){e.next=4;break}return e.abrupt("return");case 4:this.setState({isJoining:!0},i(o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.props.core._expressConfig.userName=t.state.userName,t.props.core._config.turnOnMicrophoneWhenJoining=t.state.audioOpen&&!t.audioRefuse,t.props.core._config.turnOnCameraWhenJoining=t.state.videoOpen&&!t.videoRefuse,t.props.core.status.audioRefuse=t.audioRefuse,t.props.core.status.videoRefuse=t.videoRefuse,e.next=7,t.props.core.enterRoom();case 7:r=e.sent,n="",0===r?(t.state.localStream&&t.props.core.destroyStream(t.state.localStream),t.props.joinRoom&&t.props.joinRoom()):n=1002034===r?"Failed to join the room, the number of people in the room has reached the maximum.(2 people)":[1002031,1002053].includes(r)?"There's something wrong with your network. Please check it and try again.":[1102018,1102016,1102020].includes(r)?"Failed to join the room, token authentication error.":1002056===r?"You are on a call in another room, please leave that room first.":"Failed to join the room, please try again.(error code:"+r+")",t.setState({isJoining:!1},(function(){n&&Ft({content:n})}));case 11:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({userName:e.target.value.trim().substring(0,255)})}},{key:"render",value:function(){var e,t=this;return(0,ut.jsxs)("div",{className:wt,children:[(0,ut.jsxs)("div",{className:Ct,children:[(0,ut.jsx)("video",{playsInline:!0,className:"".concat(It," ").concat(this.state.videoOpen?"":Ot),autoPlay:!0,muted:!0,ref:this.videoRef}),!this.props.core._config.showMyCameraToggleButton&&!this.props.core._config.turnOnCameraWhenJoining&&(0,ut.jsx)("div",{className:Rt,children:this.state.userName.substring(0,1)||this.props.core._expressConfig.userName.substring(0,1)||"Z"}),(this.props.core._config.showMyCameraToggleButton||this.props.core._config.turnOnCameraWhenJoining)&&!this.state.videoOpen&&!this.state.isVideoOpening&&(0,ut.jsx)("div",{className:kt,children:"Camera is off"}),this.state.isVideoOpening&&(0,ut.jsx)("div",{className:kt,children:"Camera is starting\u2026"}),(0,ut.jsxs)("div",{className:At,children:[this.props.core._config.showMyMicrophoneToggleButton&&(0,ut.jsx)("a",{className:this.state.audioOpen?Pt:Lt,onClick:function(){t.toggleStream("audio")}}),this.props.core._config.showMyCameraToggleButton&&(0,ut.jsx)("a",{className:this.state.videoOpen?Nt:Dt,onClick:function(){t.toggleStream("video")}})]})]}),(0,ut.jsxs)("div",{className:Mt,children:[(0,ut.jsxs)("div",{className:"".concat(xt," ").concat(Bt),children:[this.state.userName&&(0,ut.jsx)("label",{children:"Your Name"}),(0,ut.jsx)("input",{placeholder:"Your Name",ref:this.nameInputRef,value:this.state.userName,className:this.state.userName!=this.props.core._expressConfig.userName?Bt:"",onChange:function(e){t.handleChange(e)},onFocus:function(e){t.isIOS&&setTimeout((function(){e.target.scrollIntoView({block:"start"})}),50)},onBlur:function(e){t.isAndroid&&setTimeout((function(){e.target.scrollIntoView({block:"start"})}),100)}}),(0,ut.jsx)("button",{className:this.state.userName&&Ut,onClick:function(){t.joinRoom()},children:"Join"})]}),null===(e=this.state.sharedLinks)||void 0===e?void 0:e.map((function(e){return(0,ut.jsxs)("div",{className:jt,children:[(0,ut.jsxs)("div",{className:Ht,children:[(0,ut.jsx)("h3",{children:e.name}),(0,ut.jsx)("input",{placeholder:"inviteLink",readOnly:!0,value:e.url})]}),(0,ut.jsx)("button",{className:e.copied?zt:"",onClick:function(){e&&e.url&&k(e.url),t.setState((function(t){return{sharedLinks:t.sharedLinks.map((function(t){return t.name===e.name&&(t.copied=!0),t}))}})),setTimeout((function(){t.setState((function(t){return{sharedLinks:t.sharedLinks.map((function(t){return t.name===e.name&&(t.copied=!1),t}))}}))}),5e3)}})]},e.name)}))]}),this.state.isJoining&&(0,ut.jsx)(rr,{content:"Loading..."})]})}}]),n}(e.Component),nr="ZegoRoom_ZegoRoom__D979t",ir="ZegoRoom_header__UuKp0",sr="ZegoRoom_headerLeft__liwb3",ar="ZegoRoom_logo__vzpoi",cr="ZegoRoom_liveState__nqCOt",ur="ZegoRoom_goLive__D86a+",lr="ZegoRoom_goLiveEnabled__5klT7",dr="ZegoRoom_content__EMPv3",hr="ZegoRoom_contentLeft__xCJxU",pr="ZegoRoom_network__3PQN8",fr="ZegoRoom_reconnect__vOtg-",_r="ZegoRoom_countDown__9YcvK",gr="ZegoRoom_contentRight__Gr9vm",mr="ZegoRoom_listHeader__ed8Zh",vr="ZegoRoom_listHeaderClose__J4CgM",yr="ZegoRoom_listContent__5Hf8r",br="ZegoRoom_footer__aqbcT",Sr="ZegoRoom_handlerMiddle__FuV1X",Er="ZegoRoom_leaveButton__2gDUd",Tr="ZegoRoom_liveLeaveButton__BD0Lu",wr="ZegoRoom_handlerRight__VvZdV",Cr="ZegoRoom_inviteButton__lBRAX",Ir="ZegoRoom_micButton__QSw1y",Or="ZegoRoom_close__Sv-h6",kr="ZegoRoom_cameraButton__cauag",Rr="ZegoRoom_screenButton__GYHLm",Ar="ZegoRoom_sharing__RYQ3l",Pr="ZegoRoom_forbidden__oImGV",Lr="ZegoRoom_whiteboardButton__ZOVa9",Nr="ZegoRoom_moreButton__hKcHy",Dr="ZegoRoom_memberButton__FAU4K",Mr="ZegoRoom_memberNum__5EFf5",xr="ZegoRoom_msgButton__mnheu",Br="ZegoRoom_msgButtonRed__zUox0",Ur="ZegoRoom_settingsButtonModel__93ksx",jr="ZegoRoom_notify__bx35O",Hr="ZegoRoom_notifyContent__X9XD7",zr="ZegoRoom_nowrap__nVv2K",Vr="ZegoRoom_layoutSettingsMask__QLfUS",qr="ZegoRoom_layoutSettingsWrapper__A8i88",Gr="ZegoRoom_layoutSettingsHeader__oAvfz",Zr="ZegoRoom_layoutSettingsCloseIcon__uK7jh",Fr="ZegoRoom_layoutSettingsContent__OFGrl",Wr="ZegoRoom_layoutSettingsItemRow__cifZz",Yr="ZegoRoom_layoutSettingsItemIcon__ti3if",Qr="ZegoRoom_layoutSettingsItemChecked__zlirT",Kr="ZegoRoom_layoutSettingsItemLoading__gxzYi",Jr="ZegoRoom_screenBottomBar__37-ld",Xr="ZegoRoom_screenBottomBarLeft__+nHay",$r="ZegoRoom_screenBottomBarRight__mAF90",eo="ZegoRoom_liveNotStart__-Nvm8",to="ZegoRoom_noOneStreaming__6MbWU",ro=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={time:0},e}return c(r,[{key:"startTimer",value:function(){var e=this;setTimeout((function(){e.setState((function(e){return{time:++e.time}}),(function(){e.startTimer()}))}),1e3)}},{key:"componentDidMount",value:function(){this.startTimer()}},{key:"render",value:function(){return(0,ut.jsx)("div",{children:(e=this.state.time,[e/3600,e/60,e%60].map((function(e){return(e<10?"0":"")+Math.floor(e)})).join(":"))});var e}}]),r}(e.PureComponent),oo="zegoOne2One_bigVideo__uvBFD",no="zegoOne2One_smallVideo__zu-hy",io=e.createContext({showPinButton:!0,speakerId:"default",userInfo:{userID:""},show:function(){}}),so="zegoVideoPlayer_videoPlayerWrapper__IihXv",ao="zegoVideoPlayer_name__QUTXW",co="zegoVideoPlayer_nameTag__19ufN",uo="zegoVideoPlayer_micIcon__yghiv",lo="zegoVideoPlayer_close__IdJBj",ho="zegoVideoPlayer_cameraMask__nfMLJ",po="zegoVideoPlayer_moreWrapperMask__OYB5R",fo="zegoVideoPlayer_moreMenu__GjC1j",_o="zegoVideoPlayer_moreWrapper__S-YPA",go="zegoVideoPlayer_moreIcon__XTYsc",mo="zegoVideoPlayer_moreMenuItem__pfu+I",vo="zegoVideoPlayer_moreMenuPinIcon__-4u35",yo="zegoVideoPlayer_videoCommon__rsC5C",bo=__webpack_require__(9518),So=__webpack_require__.n(bo),Eo="zegoMedia_video__eeXLG",To="zegoMedia_videoPlayBtn__dzA-x",wo="zegoMedia_mobile__EEAXX",Co="zegoMedia_mirror__qKkUZ",Io=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.videoRef=null,e.flvPlayer=null,e.timer=null,e.loadTimer=null,e.lastDecodedFrame=0,e.retryTime=0,e.retryTimer=null,e.state={isPaused:!1},e.onloadedmetadata=function(){e.loadTimer=setTimeout((function(){var t;null===(t=e.videoRef)||void 0===t||t.load()}),5e3)},e}return c(r,[{key:"componentDidMount",value:function(){this.initVideo(this.videoRef)}},{key:"componentDidUpdate",value:function(e){this.initVideo(this.videoRef)}},{key:"initVideo",value:function(e){var t=this;if(e){var r,o,n,i,s,a,c,u,l,d,h,p,f,_,g,m;if(!this.videoRef&&(this.videoRef=e),e.muted!==this.props.muted&&(e.muted=this.props.muted),(null===e||void 0===e?void 0:e.sinkId)!==(null===(r=this.context)||void 0===r?void 0:r.speakerId))null===e||void 0===e||null===(u=(l=e).setSinkId)||void 0===u||u.call(l,(null===(d=this.context)||void 0===d?void 0:d.speakerId)||"");if(null!==(o=this.props.userInfo)&&void 0!==o&&null!==(n=o.streamList)&&void 0!==n&&null!==(i=n[0])&&void 0!==i&&i.media){if(e.srcObject!==(null===(h=this.props.userInfo)||void 0===h||null===(p=h.streamList)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.media))e.srcObject=null===(_=this.props.userInfo)||void 0===_||null===(g=_.streamList)||void 0===g||null===(m=g[0])||void 0===m?void 0:m.media}else if(null!==(s=this.props.userInfo)&&void 0!==s&&null!==(a=s.streamList)&&void 0!==a&&null!==(c=a[0])&&void 0!==c&&c.urlsHttpsFLV){var v,y,b,S,E;if(U()){if(e.src!==(null===(v=this.props.userInfo)||void 0===v||null===(y=v.streamList)||void 0===y||null===(b=y[0])||void 0===b?void 0:b.urlsHttpsHLS)){var T,w,C;e.onloadedmetadata=this.onloadedmetadata,e.src=null===(T=this.props.userInfo)||void 0===T||null===(w=T.streamList)||void 0===w||null===(C=w[0])||void 0===C?void 0:C.urlsHttpsHLS,e.load();var I=e.play();void 0!==I&&I.catch((function(e){t.setState({isPaused:!0})})).then((function(){t.setState({isPaused:!1})}))}}else this.initFLVPlayer(e,null===(S=this.props.userInfo.streamList)||void 0===S||null===(E=S[0])||void 0===E?void 0:E.urlsHttpsFLV)}}}},{key:"initFLVPlayer",value:function(e,t){var r,o,n,i,s,a,c,u,l,d,h,p,f=this;this.flvPlayer||So().isSupported()&&(this.flvPlayer=So().createPlayer({type:"flv",isLive:!0,url:t,cors:!0,hasAudio:void 0===(null===(r=this.props.userInfo.streamList)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.hasAudio)?"OPEN"===(null===(n=this.props.userInfo.streamList)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.micStatus):null===(s=this.props.userInfo.streamList)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.hasAudio,hasVideo:void 0===(null===(c=this.props.userInfo.streamList)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.hasVideo)?"OPEN"===(null===(l=this.props.userInfo.streamList)||void 0===l||null===(d=l[0])||void 0===d?void 0:d.cameraStatus):null===(h=this.props.userInfo.streamList)||void 0===h||null===(p=h[0])||void 0===p?void 0:p.hasVideo}),this.flvPlayer.on(So().Events.LOADING_COMPLETE,(function(){var e;null===(e=f.flvPlayer)||void 0===e||e.play()})),this.flvPlayer.on(So().Events.ERROR,(function(e){console.error(So().Events.ERROR,e)})),this.flvPlayer.on("statistics_info",(function(e){if(0===f.lastDecodedFrame)return f.lastDecodedFrame=e.decodedFrames,void(f.retryTime=0);f.lastDecodedFrame!==e.decodedFrames?(f.lastDecodedFrame=e.decodedFrames,f.retryTime=0):(f.retryTime+=1,f.retryTimer||(f.retryTimer=setTimeout((function(){f.lastDecodedFrame=0,f.flvPlayer&&(f.flvPlayer.unload(),f.flvPlayer.load())}),5e3)),f.retryTime%10===0&&(f.lastDecodedFrame=0,f.flvPlayer&&(f.flvPlayer.unload(),f.flvPlayer.load(),clearTimeout(f.retryTimer),f.retryTimer=null)))})),this.flvPlayer.attachMediaElement(e),this.flvPlayer.load())}},{key:"componentWillUnmount",value:function(){var e,t;this.flvPlayer?(this.flvPlayer.pause(),this.flvPlayer.unload(),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy(),this.flvPlayer=null):((null===(e=this.videoRef)||void 0===e?void 0:e.srcObject)&&(this.videoRef.srcObject=null),(null===(t=this.videoRef)||void 0===t?void 0:t.src)&&(this.videoRef.src=""));this.timer&&clearInterval(this.timer),this.loadTimer&&(this.videoRef.onloadedmetadata=null,clearTimeout(this.loadTimer),this.loadTimer=null)}},{key:"render",value:function(){var e,t,r,o=this;return(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsx)("video",{autoPlay:!0,className:"".concat(Eo,"  ").concat(this.context.userInfo.userID===this.props.userInfo.userID&&null!==(e=this.props.userInfo.streamList)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(r=t.streamID)&&void 0!==r&&r.includes("_main")?Co:""," ").concat(this.props.classList),playsInline:!0,ref:function(e){!o.videoRef&&(o.videoRef=e)},onPause:function(){o.setState({isPaused:!0}),o.props.onPause&&o.props.onPause()},onCanPlay:function(){var e;o.loadTimer&&(o.videoRef.onloadedmetadata=null,clearTimeout(o.loadTimer),o.loadTimer=null),null===(e=o.videoRef)||void 0===e||e.play().then((function(e){o.setState({isPaused:!1})})).catch((function(e){o.setState({isPaused:!0})})),o.props.onCanPlay&&o.props.onCanPlay()},onPlaying:function(){o.setState({isPaused:!1})}}),this.state.isPaused&&(U()||x())&&(0,ut.jsx)("div",{className:"".concat(To," ").concat(M()?"":wo),onClick:function(){var e,t;null===(e=o.videoRef)||void 0===e||e.load(),null===(t=o.videoRef)||void 0===t||t.play(),o.setState({isPaused:!1})}})]})}}]),r}(e.PureComponent);Io.contextType=io;var Oo=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={hovered:!1},e}return c(r,[{key:"render",value:function(){var e,t,r,o,n,i,s,a,c,u,l,d,h,p,f,_,g,m,v=this,y=null===(e=this.props.volume)||void 0===e?void 0:e[null===(t=this.props.userInfo)||void 0===t||null===(r=t.streamList)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.streamID],b=void 0===y?5:Math.ceil(7*y/100),S=this.context.showPinButton;return(0,ut.jsxs)("div",{className:" ".concat(so," ").concat(this.props.myClass),onMouseEnter:function(){v.setState({hovered:!0})},onMouseLeave:function(){v.setState({hovered:!1})},children:[(0,ut.jsx)(Io,{muted:this.props.muted,classList:yo,userInfo:this.props.userInfo,onPause:function(){v.props.onPause&&v.props.onPause()},onCanPlay:function(){v.props.onCanPlay&&v.props.onCanPlay()}}),(0,ut.jsxs)("div",{className:ho,style:{display:"OPEN"===(null===(n=this.props.userInfo)||void 0===n||null===(i=n.streamList)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.cameraStatus)?"none":"flex"},children:[this.props.userInfo.avatar&&(0,ut.jsx)("img",{src:this.props.userInfo.avatar,onError:function(e){e.target.style.display="none"},alt:""}),(0,ut.jsx)("div",{style:{color:q(null===(a=this.props.userInfo)||void 0===a?void 0:a.userName)},children:Y((null===(c=this.props.userInfo)||void 0===c?void 0:c.userName)||"")})]}),!this.props.hiddenName&&(0,ut.jsxs)("div",{className:ao,children:[!(null!==(u=this.props.userInfo)&&void 0!==u&&null!==(l=u.streamList)&&void 0!==l&&null!==(d=l[0])&&void 0!==d&&d.urlsHttpsFLV)&&(0,ut.jsx)("span",{className:"".concat(uo," ").concat("OPEN"!==(null===(h=this.props.userInfo)||void 0===h||null===(p=h.streamList)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.micStatus)&&lo),children:"OPEN"===(null===(_=this.props.userInfo)||void 0===_||null===(g=_.streamList)||void 0===g||null===(m=g[0])||void 0===m?void 0:m.micStatus)&&(0,ut.jsx)("span",{style:{height:b+"px"}})}),(0,ut.jsx)("p",{className:this.props.userInfo.overScreenMuteVideo?"muteVideo":"unmuteVideo",children:this.props.userInfo.userName}),this.props.muted&&(0,ut.jsx)("span",{className:co,children:"(You)"})]}),!this.props.hiddenMore&&S&&this.state.hovered&&(0,ut.jsx)("div",{className:po,children:(0,ut.jsxs)("div",{className:_o,children:[(0,ut.jsx)("span",{className:go}),(0,ut.jsx)("div",{className:fo,children:(0,ut.jsxs)("div",{className:mo,onClick:function(){v.props.handlePin&&v.props.handlePin(v.props.userInfo.userID)},children:[(0,ut.jsx)("span",{className:vo}),(0,ut.jsx)("p",{children:this.props.userInfo.pin?"Remove Pin":"Pin"})]})})]})})]})}}]),r}(e.PureComponent);Oo.contextType=io;var ko=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"getVideoScreen",value:function(){var e=this;return this.props.userList.length>1?(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsx)(Oo,{myClass:oo,userInfo:this.props.userList[1],muted:!1,handlePin:function(){e.props.handleSetPin(e.props.userList[1].userID)},volume:this.props.soundLevel[this.props.userList[1].userID]||{}}),(0,ut.jsx)(Oo,{onPause:function(){e.props.selfInfo.userID===e.props.userList[0].userID&&e.props.onLocalStreamPaused()},myClass:no,userInfo:this.props.userList[0],muted:this.props.selfInfo.userID===this.props.userList[0].userID,handlePin:function(){e.props.handleSetPin(e.props.userList[0].userID)},volume:this.props.soundLevel[this.props.userList[0].userID]||{}})]}):this.props.userList.length>0?(0,ut.jsx)(Oo,{myClass:oo,onPause:function(){e.props.selfInfo.userID===e.props.userList[0].userID&&e.props.onLocalStreamPaused()},userInfo:this.props.userList[0],handlePin:function(){return e.props.handleSetPin(e.props.userList[0].userID)},muted:this.props.selfInfo.userID===this.props.userList[0].userID,volume:this.props.soundLevel[this.props.userList[0].userID]||{}}):null}},{key:"render",value:function(){return(0,ut.jsx)(ut.Fragment,{children:this.getVideoScreen()})}}]),r}(e.PureComponent),Ro="zegoMessage_msgContentWrapper__B6Nvg",Ao="zegoMessage_msgList__RjYQu",Po="zegoMessage_self__UUtPK",Lo="zegoMessage_msgNameWrapper__x0JXV",No="zegoMessage_loading__0nmiK",Do="zegoMessage_error__yXTnR",Mo="zegoMessage_name__fFi6P",xo="zegoMessage_sendTime__2zfPA",Bo="zegoMessage_sendWrapper__YNNhA",Uo="zegoToast_ZegoToast__zKpnB",jo="zegoToast_content__5Ms4l",Ho=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){return(0,ut.jsx)("div",{className:"".concat(Uo," \n        "),children:(0,ut.jsx)("div",{className:jo,children:this.props.content})})}}]),r}(e.Component),zo=function(){var e,r,o=document.createElement("div");return document.body.appendChild(o),function(n){r&&clearTimeout(r),r=setTimeout((function(){var t;n&&n.closeCallBack&&n.closeCallBack(),null===(t=e)||void 0===t||t.unmount(),e=null}),(null===n||void 0===n?void 0:n.duration)||3e3),e||(e=t.createRoot(o)),e.render((0,ut.jsx)(Ho,{closeCallBack:function(){},content:(null===n||void 0===n?void 0:n.content)||"",duration:(null===n||void 0===n?void 0:n.duration)||3}))}}(),Vo=function(t){l(o,t);var r=f(o);function o(){var t;s(this,o);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=r.call.apply(r,[this].concat(i))).state={message:""},t.sendTime=0,t.msgListRef=e.createRef(),t}return c(o,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){e.messageList.length!==this.props.messageList.length&&this.scrollToBottom()}},{key:"handleSend",value:function(){if(this.state.message.length){var e=(new Date).getTime();if(this.sendTime>0&&this.sendTime+900>e)return zo({content:"Message sent too fast, please send again later"}),!1;this.props.sendMessage(this.state.message),this.setState({message:""}),this.sendTime=e}}},{key:"scrollToBottom",value:function(){this.msgListRef.current.scrollTop=this.msgListRef.current.scrollHeight}},{key:"messageInput",value:function(e){this.setState({message:e.target.value.substring(0,300)})}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:Ro,children:[(0,ut.jsx)("div",{className:Ao,ref:this.msgListRef,children:this.props.messageList.map((function(t){return(0,ut.jsxs)("div",{className:t.fromUser.userID===e.props.selfUserID?Po:"",children:[(0,ut.jsxs)("div",{className:Lo,children:[(0,ut.jsx)("span",{className:Mo,children:t.fromUser.userName}),(0,ut.jsx)("span",{className:xo,children:"".concat(new Date(t.sendTime).getHours()>=12?"PM":"AM","  ").concat(z(t.sendTime,"hh:mm"))})]}),(0,ut.jsx)("p",{className:"".concat("SENDING"===t.status&&No," ").concat("FAILED"===t.status&&Do),children:t.message})]},t.messageID)}))}),(0,ut.jsxs)("div",{className:Bo,children:[(0,ut.jsx)("input",{value:this.state.message,onChange:function(t){e.messageInput(t)},placeholder:"Send a message to everyone",onKeyPress:function(t){"Enter"===t.key&&e.handleSend()}}),(0,ut.jsx)("button",{disabled:!this.state.message.length,onClick:function(){e.handleSend()}})]})]})}}]),o}(e.PureComponent),qo="zegoGridLayout_gridWrapper__pWcb0",Go="zegoGridLayout_double__-u3eL",Zo="zegoGridLayout_three__KMbPH",Fo="zegoGridLayout_six__t9XID",Wo="zegoGridLayout_night__GoYWa",Yo="zegoGridLayout_twoRow__wRVxO",Qo="zegoGridLayout_twoRowFourCol__TUEJ0",Ko="zegoGridLayout_twoRowThreeCol__FSUz1",Jo="zegoGridLayout_twoRowTwoCol__0d5R-",Xo="zegoGridLayout_twoRowOneCol__2UU5W",$o="zegoGridLayout_singleRow__ZgcOn";function en(e){var t,r,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=en(e[t]))&&(o&&(o+=" "),o+=r);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}var tn=function(){for(var e,t,r=0,o="";r<arguments.length;)(e=arguments[r++])&&(t=en(e))&&(o&&(o+=" "),o+=t);return o},rn={otherVideoWrapper:"zegoOthersVideo_otherVideoWrapper__5zb1v",nameWrapper:"zegoOthersVideo_nameWrapper__LylW-",nameCircle:"zegoOthersVideo_nameCircle__LbvK4",othersNumber:"zegoOthersVideo_othersNumber__e07x2"},on=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){return(0,ut.jsxs)("div",{children:[(0,ut.jsx)("video",{muted:!0,className:rn.videoCommon}),(0,ut.jsxs)("div",{className:rn.otherVideoWrapper,children:[(0,ut.jsx)("div",{className:rn.nameWrapper,children:this.props.users.map((function(e,t){return(0,ut.jsxs)("div",{className:rn.nameCircle,style:{color:q(e.userName)},children:[Y(e.userName),e.avatar&&(0,ut.jsx)("img",{src:e.avatar,onError:function(e){e.target.style.display="none"},alt:""})]},e.userID)}))}),this.props.others>0&&(0,ut.jsxs)("p",{className:rn.othersNumber,children:[this.props.others," others"]})]})]})}}]),r}(e.PureComponent),nn=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.audioRef=null,e.flvPlayer=void 0,e}return c(r,[{key:"initAudio",value:function(e){if(e){var t,r,o,n,i,s,a,c,u,l,d,h,p,f,_,g;if(!this.audioRef&&(this.audioRef=e),(null===e||void 0===e?void 0:e.sinkId)!==(null===(t=this.context)||void 0===t?void 0:t.speakerId))null===e||void 0===e||null===(c=(u=e).setSinkId)||void 0===c||c.call(u,(null===(l=this.context)||void 0===l?void 0:l.speakerId)||"");if(null!==(r=this.props.userInfo)&&void 0!==r&&null!==(o=r.streamList)&&void 0!==o&&null!==(n=o[0])&&void 0!==n&&n.media)e.srcObject!==(null===(d=this.props.userInfo)||void 0===d||null===(h=d.streamList)||void 0===h||null===(p=h[0])||void 0===p?void 0:p.media)&&(e.srcObject=null===(f=this.props.userInfo)||void 0===f||null===(_=f.streamList)||void 0===_||null===(g=_[0])||void 0===g?void 0:g.media);else if(null!==(i=this.props.userInfo)&&void 0!==i&&null!==(s=i.streamList)&&void 0!==s&&null!==(a=s[0])&&void 0!==a&&a.urlsHttpsFLV){var m,v,y,b,S,E,T,w;if(this.isSafari())e.src!==(null===(m=this.props.userInfo)||void 0===m||null===(v=m.streamList)||void 0===v||null===(y=v[0])||void 0===y?void 0:y.urlsHttpsHLS)&&(e.src=null===(b=this.props.userInfo)||void 0===b||null===(S=b.streamList)||void 0===S||null===(E=S[0])||void 0===E?void 0:E.urlsHttpsHLS);else this.initFLVPlayer(e,null===(T=this.props.userInfo.streamList)||void 0===T||null===(w=T[0])||void 0===w?void 0:w.urlsHttpsFLV)}}}},{key:"initFLVPlayer",value:function(e,t){var r=this;So().isSupported()&&(this.flvPlayer||(this.flvPlayer=So().createPlayer({type:"flv",isLive:!0,url:t,cors:!0,hasAudio:!0,hasVideo:!1}),this.flvPlayer.on(So().Events.LOADING_COMPLETE,(function(){console.error("LOADING_COMPLETE"),r.flvPlayer.play()})),this.flvPlayer.attachMediaElement(e),this.flvPlayer.load()))}},{key:"isSafari",value:function(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)}},{key:"componentWillUnmount",value:function(){var e,t;this.flvPlayer?(this.flvPlayer.pause(),this.flvPlayer.unload(),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy(),this.flvPlayer=null):((null===(e=this.audioRef)||void 0===e?void 0:e.srcObject)&&(this.audioRef.srcObject=null),(null===(t=this.audioRef)||void 0===t?void 0:t.src)&&(this.audioRef.src=""))}},{key:"render",value:function(){return(0,ut.jsx)("audio",{autoPlay:!0,style:{width:"1px",height:"1px"},muted:this.props.muted||!1,className:this.props.classList,ref:this.initAudio.bind(this),onCanPlay:function(e){e.target.play()}})}}]),r}(e.PureComponent);nn.contextType=io;var sn=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"wrapClassName",get:function(){var e,t;if(3===this.props.gridRowNumber)return tn((E(t={},qo,!0),E(t,Go,this.props.userList.length<=2),E(t,Zo,4===this.props.userList.length||3===this.props.userList.length),E(t,Fo,6===this.props.userList.length||5===this.props.userList.length),E(t,Wo,this.props.userList.length>=7),t));if(2===this.props.gridRowNumber){var r,o=this.props.videoShowNumber/2,n=Math.ceil(this.props.userList.length/2),i=this.props.userList.length>=this.props.videoShowNumber?o:n;return tn((E(r={},qo,!0),E(r,Yo,5===i),E(r,Qo,4===i),E(r,Ko,3===i),E(r,Jo,2===i),E(r,Xo,this.props.userList.length<=2),r))}return tn((E(e={},qo,!0),E(e,$o,!0),e))}},{key:"render",value:function(){var e=this;return(0,ut.jsx)(ut.Fragment,{children:(0,ut.jsx)("div",{className:this.wrapClassName,children:this.props.userList.map((function(t,r,o){if(o.length>e.props.videoShowNumber){if(r===e.props.videoShowNumber-1)return(0,ut.jsx)(on,{users:[o[r],o[r+1]],others:o.length-e.props.videoShowNumber+1},t.userID);if(r>e.props.videoShowNumber-1)return(0,ut.jsx)(nn,{muted:!1,userInfo:t},t.userID)}return(0,ut.jsx)(Oo,{userInfo:t,muted:t.userID===e.props.selfInfo.userID,handlePin:function(){e.props.handleSetPin(t.userID)},volume:e.props.soundLevel[t.userID]||{}},t.userID)}))})})}}]),r}(e.PureComponent),an="zegoSidebarLayout_sidebarWrapper__dc1Nl",cn="zegoSidebarLayout_bigVideo__zdqpe",un="zegoSidebarLayout_rightWrapper__C7g64",ln="zegoSidebarLayout_fiveRow__ohmuO",dn="zegoSidebarLayout_fourRow__mOUTv",hn="zegoSidebarLayout_threeRow__hT4xT",pn="zegoSidebarLayout_twoRow__W79-9",fn="zegoSidebarLayout_oneRow__TSPfI",_n="zegoSidebarLayout_fullScreen__C15sS",gn="zegoSidebarLayout_bigVideoWrapper__QkEsL",mn="zegoSidebarLayout_fullScreenBtn__Vi0Yx",vn="zegoSidebarLayout_screenVideo__uQyzj",yn="zegoSidebarLayout_screenVideoLoading__2L69U",bn="zegoSidebarLayout_expend__nC09p",Sn="zegoSidebarLayout_screenTipWrapper__AoMpL",En="zegoSidebarLayout_bottomWrapper__8piz4",Tn=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"pinUser",get:function(){var e=this.props.userList.findIndex((function(e){return e.pin}));return this.props.userList[e>-1?e:this.props.userList.length-1]}},{key:"render",value:function(){var e,t=this,r=tn((E(e={},un,!0),E(e,ln,5===this.props.videoShowNumber),E(e,dn,4===this.props.videoShowNumber),E(e,hn,3===this.props.videoShowNumber),E(e,pn,2===this.props.videoShowNumber),E(e,fn,1===this.props.videoShowNumber),e));return(0,ut.jsxs)("div",{className:an,children:[(0,ut.jsx)(Oo,{myClass:cn,userInfo:this.pinUser,handlePin:function(){t.props.handleSetPin(t.pinUser.userID)},muted:this.pinUser.userID===this.props.selfInfo.userID,volume:this.props.soundLevel[this.pinUser.userID]||{}},this.pinUser.userID),(0,ut.jsx)("div",{className:r,children:this.props.userList.filter((function(e){return e.userID!==t.pinUser.userID})).map((function(e,r,o){if(o.length>t.props.videoShowNumber){if(r===t.props.videoShowNumber-1)return(0,ut.jsxs)("div",{children:[(0,ut.jsx)(on,{users:[o[r],o[r+1]],others:o.length-t.props.videoShowNumber+1}),(0,ut.jsx)(nn,{muted:e.userID===t.props.selfInfo.userID,userInfo:e})]},"container_"+e.userID);if(r>t.props.videoShowNumber-1)return(0,ut.jsx)(nn,{muted:e.userID===t.props.selfInfo.userID,userInfo:e},e.userID)}return(0,ut.jsx)(Oo,{userInfo:e,muted:e.userID===t.props.selfInfo.userID,handlePin:function(){t.props.handleSetPin(e.userID)},volume:t.props.soundLevel[e.userID]||{}},e.userID)}))})]})}}]),r}(e.PureComponent),wn="zegoRoomInvite_inviteLinkWrapper__7OR9j",Cn="zegoRoomInvite_title__f6ZuN",In="zegoRoomInvite_inviteLink__tUeB-",On="zegoRoomInvite_copyLinkButton__18WiF",kn=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"handleCopy",value:function(e){k(e),zo({content:"Copied"})}},{key:"render",value:function(){var e,t=this;return null===(e=this.props.core._config.sharedLinks)||void 0===e?void 0:e.map((function(e){return(0,ut.jsxs)("div",{className:wn,children:[(0,ut.jsx)("div",{className:Cn,children:e.name}),(0,ut.jsxs)("div",{className:In,children:[(0,ut.jsx)("input",{placeholder:"inviteLink",readOnly:!0,value:e.url}),(0,ut.jsx)("div",{className:On,onClick:function(){e&&e.url&&t.handleCopy(e.url)}})]})]},e.name)}))}}]),r}(e.PureComponent),Rn="zegoUserList_memberListWrapper__54dbu",An="zegoUserList_member__BzXub",Pn="zegoUserList_memberMenuShow__7Ye38",Ln="zegoUserList_memberMenuWrapper__HvgUi",Nn="zegoUserList_memberNameWrapper__YI8+i",Dn="zegoUserList_memberGuestNameWrapper__buoiq",Mn="zegoUserList_selfStatusWrapper__O8QZr",xn="zegoUserList_memberStatusWrapper__mfu5W",Bn="zegoUserList_memberMicIcon__l3ust",Un="zegoUserList_memberMicIconOpen__y+4cu",jn="zegoUserList_memberCameraIcon__DNcxO",Hn="zegoUserList_memberCameraIconOpen__X0Oks",zn="zegoUserList_memberPinIcon__Qo7hp",Vn="zegoUserList_memberPinIconOpen__-kkcD",qn="zegoUserList_memberMenuItem__3lXAe",Gn=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e}return c(r,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onBodyClick.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onBodyClick.bind(this))}},{key:"onBodyClick",value:function(e){var t=document.querySelector(".".concat(An,".").concat(Pn));t&&!t.contains(e.target)&&t.classList.remove("".concat(Pn))}},{key:"expandMemberMenu",value:function(e){document.querySelectorAll(".".concat(An)).forEach((function(t){(null===t||void 0===t?void 0:t.dataset.id)===e?t.classList.toggle("".concat(Pn)):t.classList.remove("".concat(Pn))}))}},{key:"getHeight",value:function(e,t){var r,o=null===(r=this.props.soundLevel[e])||void 0===r?void 0:r[t];return void 0===o?5:Math.ceil(9*o/100)}},{key:"isShownPin",value:function(e){var t;return(null===(t=this.props.core._config.scenario)||void 0===t?void 0:t.mode)!==g.OneONoneCall&&(this.context.showPinButton&&!!(this.props.core._config.showNonVideoUser||e.streamList&&e.streamList[0]&&"OPEN"===e.streamList[0].cameraStatus||e.streamList&&e.streamList[0]&&"OPEN"===e.streamList[0].micStatus&&this.props.core._config.showOnlyAudioUser))}},{key:"render",value:function(){var e=this;return(0,ut.jsx)("div",{className:Rn,children:this.props.userList.map((function(t){var r,o,n,i,s,a,c,u;return(0,ut.jsxs)("div",{className:An,onClick:function(){e.isShownPin(t)&&e.expandMemberMenu(t.userID)},"data-id":t.userID,children:[(0,ut.jsxs)("div",{className:"".concat(Nn," ").concat(Dn),children:[t.avatar&&(0,ut.jsx)("img",{src:t.avatar,onError:function(e){e.target.style.display="none"},alt:""}),(0,ut.jsx)("span",{style:{color:q(t.userName||"")},children:Y(t.userName||"")}),(0,ut.jsx)("p",{children:t.userName}),t.userID===e.props.selfUserID&&"(You)"]}),t.userID===e.props.selfUserID?e.isShownPin(t)&&(0,ut.jsxs)("div",{className:Mn,children:[(0,ut.jsx)("span",{}),(0,ut.jsx)("span",{}),(0,ut.jsx)("span",{})]}):(0,ut.jsxs)("div",{className:xn,children:[(0,ut.jsx)("span",{className:"".concat(Bn," ").concat("OPEN"===(null===(r=t.streamList)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.micStatus)&&Un),children:"OPEN"===(null===t||void 0===t||null===(n=t.streamList)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.micStatus)&&(0,ut.jsx)("span",{style:{height:e.getHeight(t.userID,null===t||void 0===t||null===(s=t.streamList)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.streamID)+"px"}})}),(0,ut.jsx)("span",{className:"".concat(jn," ").concat("OPEN"===(null===(c=t.streamList)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.cameraStatus)&&Hn)}),e.isShownPin(t)&&(0,ut.jsx)("span",{className:"".concat(zn," ").concat(t.pin&&Vn)})]}),(0,ut.jsx)("div",{className:Ln,children:(0,ut.jsx)("div",{className:qn,onClick:function(){return e.props.handleSetPin(t.userID)},children:t.pin?"Remove Pin":"Pin"})})]},t.userID)}))})}}]),r}(e.PureComponent);Gn.contextType=io;var Zn=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={fullScreen:!1,loadingMask:!1,showBottomTip:!1},e}return c(r,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("screen_bottom_tip_".concat(this.props.roomID,"_").concat(this.props.selfInfo.userID));this.props.screenSharingUser.userID===this.props.selfInfo.userID&&!e&&this.setState({showBottomTip:!0})}},{key:"onCanPlay",value:function(){this.setState({loadingMask:!1})}},{key:"handleIgnore",value:function(){this.setState({showBottomTip:!1}),sessionStorage.setItem("screen_bottom_tip_".concat(this.props.roomID,"_").concat(this.props.selfInfo.userID),"1")}},{key:"render",value:function(){var e,t=this,r=tn((E(e={},un,!0),E(e,ln,5===this.props.videoShowNumber),E(e,dn,4===this.props.videoShowNumber),E(e,hn,3===this.props.videoShowNumber),E(e,pn,2===this.props.videoShowNumber),E(e,fn,1===this.props.videoShowNumber),E(e,_n,this.state.fullScreen&&this.props.userList.length>0||0===this.props.userList.length),e));return(0,ut.jsxs)("div",{className:an,children:[(0,ut.jsxs)("div",{className:gn,children:[(0,ut.jsx)(Oo,{myClass:vn,userInfo:this.props.screenSharingUser,handlePin:function(){t.props.handleSetPin(t.props.screenSharingUser.userID)},muted:this.props.screenSharingUser.userID===this.props.selfInfo.userID,volume:{},hiddenMore:!0,hiddenName:!0,onCanPlay:this.onCanPlay.bind(this)},"screen_"+this.props.screenSharingUser.userID),this.state.loadingMask&&(0,ut.jsxs)("div",{className:yn,children:[(0,ut.jsx)("i",{}),(0,ut.jsx)("p",{children:this.props.screenSharingUser.userID===this.props.selfInfo.userID?"You are presenting your screen":"".concat(this.props.screenSharingUser.userName," is presenting the screen")})]}),(0,ut.jsx)("div",{className:"".concat(mn," ").concat(this.state.fullScreen?bn:""),onClick:function(){t.props.handleFullScreen&&t.props.handleFullScreen(!t.state.fullScreen),t.setState({fullScreen:!t.state.fullScreen})},children:(0,ut.jsx)("p",{children:this.state.fullScreen?"Exit full screen":"Full screen"})}),this.state.showBottomTip&&(0,ut.jsx)("div",{className:Sn,children:(0,ut.jsxs)("div",{className:En,children:[(0,ut.jsx)("p",{children:"To avoid an infinity mirror, we suggest you not to share your entire screen or browser window."}),(0,ut.jsx)("div",{onClick:this.handleIgnore.bind(this),children:"Ignore"})]})})]}),(0,ut.jsx)("div",{className:r,children:this.props.userList.map((function(e,r,o){if(o.length>t.props.videoShowNumber){if(r===t.props.videoShowNumber-1)return(0,ut.jsxs)("div",{children:[(0,ut.jsx)(on,{users:[o[r],o[r+1]],others:o.length-t.props.videoShowNumber+1}),(0,ut.jsx)(nn,{muted:e.userID===t.props.selfInfo.userID,userInfo:e})]},"screen_container_"+e.userID);if(r>t.props.videoShowNumber-1)return(0,ut.jsx)(nn,{muted:e.userID===t.props.selfInfo.userID,userInfo:e},e.userID)}return(0,ut.jsx)(Oo,{userInfo:e,muted:e.userID===t.props.selfInfo.userID,handlePin:function(){t.props.handleSetPin(e.userID)},volume:t.props.soundLevel[e.userID]||{}},e.userID)}))})]})}}]),r}(e.PureComponent),Fn={whiteboardWrapper:"zegoWhiteboardSharingLayout_whiteboardWrapper__nXG8h",top:"zegoWhiteboardSharingLayout_top__6iMfm",toolLeft:"zegoWhiteboardSharingLayout_toolLeft__rp-hW",undo:"zegoWhiteboardSharingLayout_undo__FIzhk",redo:"zegoWhiteboardSharingLayout_redo__rB83U",zoom:"zegoWhiteboardSharingLayout_zoom__P2EfD",page:"zegoWhiteboardSharingLayout_page__40nsg",zoom_sub:"zegoWhiteboardSharingLayout_zoom_sub__x26rs",zoom_add:"zegoWhiteboardSharingLayout_zoom_add__-pgT7",page_sub:"zegoWhiteboardSharingLayout_page_sub__aRY3V",page_add:"zegoWhiteboardSharingLayout_page_add__s3KIx",page_value:"zegoWhiteboardSharingLayout_page_value__hYTXV",page_value_total:"zegoWhiteboardSharingLayout_page_value_total__oJH8R",stop:"zegoWhiteboardSharingLayout_stop__OCooy",content:"zegoWhiteboardSharingLayout_content__oe-UY",contentRight:"zegoWhiteboardSharingLayout_contentRight__hve6t"},Wn="ZegoWhiteboardTools_tools__yzP5z",Yn="ZegoWhiteboardTools_tool_select__VMJTw",Qn="ZegoWhiteboardTools_tool_drag__cLZGm",Kn="ZegoWhiteboardTools_tool_pen__7ViZ6",Jn="ZegoWhiteboardTools_tool_text__mtx2M",Xn="ZegoWhiteboardTools_tool_react__WoDnE",$n="ZegoWhiteboardTools_tool_image__U4AGB",ei="ZegoWhiteboardTools_tool_eraser__cFSav",ti="ZegoWhiteboardTools_tool_delete__6PBHS",ri="ZegoWhiteboardTools_tool_snapshot__6Fzu9",oi="ZegoWhiteboardTools_tool_hide__HFK4c",ni="ZegoWhiteboardTools_tool_show__M8D0-",ii="ZegoWhiteboardTools_selected__249fz",si="ZegoWhiteboardToolsPenToolTips_penTools__Jlt9y",ai="ZegoWhiteboardToolsPenToolTips_twoRows__-P97F",ci="ZegoWhiteboardToolsPenToolTips_penTools_bold__0-Tpa",ui="ZegoWhiteboardToolsPenToolTips_penTools_color__Cj+lc",li="ZegoWhiteboardToolsPenToolTips_selected__0bWSg",di=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={fontColor:"",fontSize:0},e}return c(r,[{key:"OnDocumentClick",value:function(e){(e.path||e.composedPath()).some((function(e){return console.log(e.className),e.className&&e.className.includes("ZegoWhiteboardToolsPenToolTips")}))||this.props.onClose()}},{key:"componentDidMount",value:function(){this.setState({fontColor:this.context.whiteboard_brushColor,fontSize:this.context.whiteboard_brushSize}),window.document.addEventListener("click",this.OnDocumentClick.bind(this))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this.OnDocumentClick)}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(si," ").concat(2===this.props.rows?ai:""," ZegoWhiteboardToolsPenToolTips"),children:[(0,ut.jsxs)("div",{className:ci,children:[(0,ut.jsx)("h3",{children:"Thickness"}),(0,ut.jsx)("ul",{children:[4,6,8,10].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({fontSize:t}),e.props.onToolChange(t,e.context.whiteboard_brushColor)},children:(0,ut.jsx)("i",{className:e.state.fontSize===t?li:"",style:{width:t,height:t}})},t)}))})]}),(0,ut.jsxs)("div",{className:ui,children:[(0,ut.jsx)("h3",{children:"Color"}),(0,ut.jsx)("ul",{children:["#FFFFFF","#A4A4A4","#333333","#000000","#F64326","#FD7803","#FBE605","#3FBB54","#00EAE7","#0484FE","#825FD0","#FB7D7D"].map((function(t){return(0,ut.jsx)("li",{style:{backgroundColor:t},onClick:function(r){e.setState({fontColor:t}),e.props.onToolChange(e.context.whiteboard_brushSize,t)},className:e.state.fontColor===t?li:""},t)}))})]})]})}}]),r}(e.PureComponent);di.contextType=io;var hi="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools__aseby",pi="ZegoWhiteboardToolsGraphicsTooTips_twoRows__CG3HY",fi="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools_react__G4vbI",_i="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools_bold__hBtlw",gi="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools_color__demwy",mi="ZegoWhiteboardToolsGraphicsTooTips_selected__dC9g4",vi=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={fontColor:"",react:0,fontSize:0},e}return c(r,[{key:"OnDocumentClick",value:function(e){(e.path||e.composedPath()).some((function(e){return console.log(e.className),e.className&&e.className.includes("ZegoWhiteboardToolsGraphicsTooTips")}))||this.props.onClose()}},{key:"componentDidMount",value:function(){this.setState({fontColor:this.context.whiteboard_brushColor,react:8,fontSize:this.context.whiteboard_brushSize}),this.props.onToolChange(8,this.context.whiteboard_brushSize,this.context.whiteboard_brushColor),window.document.addEventListener("click",this.OnDocumentClick.bind(this))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this.OnDocumentClick)}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(hi," ").concat(2===this.props.rows?pi:""," ZegoWhiteboardToolsGraphicsTooTips"),ref:function(e){},children:[(0,ut.jsxs)("div",{className:fi,children:[(0,ut.jsx)("h3",{children:"Shape"}),(0,ut.jsx)("ul",{children:[8,16,4].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({react:t}),e.props.onToolChange(t,e.context.whiteboard_brushSize,e.context.whiteboard_brushColor)},className:e.state.react===t?mi:""},t)}))})]}),(0,ut.jsxs)("div",{className:_i,children:[(0,ut.jsx)("h3",{children:"Thickness"}),(0,ut.jsx)("ul",{children:[4,6,8,12].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({fontSize:t}),e.props.onToolChange(e.context.whiteboard_toolType,t,e.context.whiteboard_brushColor)},children:(0,ut.jsx)("i",{className:e.state.fontSize===t?mi:"",style:{width:t,height:t}})},t)}))})]}),(0,ut.jsxs)("div",{className:gi,children:[(0,ut.jsx)("h3",{children:"Color"}),(0,ut.jsx)("ul",{children:["#FFFFFF","#A4A4A4","#333333","#000000","#F64326","#FD7803","#FBE605","#3FBB54","#00EAE7","#0484FE","#825FD0","#FB7D7D"].map((function(t){return(0,ut.jsx)("li",{style:{backgroundColor:t},onClick:function(r){e.setState({fontColor:t}),e.props.onToolChange(e.context.whiteboard_toolType,e.context.whiteboard_brushSize,t)},className:e.state.fontColor===t?mi:""},t)}))})]})]})}}]),r}(e.PureComponent);vi.contextType=io;var yi="ZegoWhiteboardToolsTextToolTips_textTools__0396o",bi="ZegoWhiteboardToolsTextToolTips_twoRows__cO5Sv",Si="ZegoWhiteboardToolsTextToolTips_textTools_font__1212b",Ei="ZegoWhiteboardToolsTextToolTips_textTools_size__3qnrL",Ti="ZegoWhiteboardToolsTextToolTips_textTools_color__-542R",wi="ZegoWhiteboardToolsTextToolTips_selected__tLqVF",Ci={12:18,14:24,16:36,18:48},Ii={18:12,24:14,36:16,48:18},Oi=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={fontColor:"",fontSize:0,isFontBold:!1,isFontItalic:!1},e}return c(r,[{key:"OnDocumentClick",value:function(e){(e.path||e.composedPath()).some((function(e){return console.log(e.className),e.className&&e.className.includes("ZegoWhiteboardToolsTextToolTips")}))||this.props.onClose()}},{key:"componentDidMount",value:function(){this.setState({fontColor:this.context.whiteboard_brushColor,fontSize:Ii[this.context.whiteboard_fontSize],isFontBold:this.context.whiteboard_isFontBold,isFontItalic:this.context.whiteboard_isFontItalic}),window.document.addEventListener("click",this.OnDocumentClick.bind(this))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this.OnDocumentClick)}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(yi," ").concat(2===this.props.rows?bi:""," ZegoWhiteboardToolsTextToolTips"),children:[(0,ut.jsxs)("div",{className:Si,children:[(0,ut.jsx)("h3",{children:"Font"}),(0,ut.jsx)("ul",{children:["BOLD","ITALIC"].map((function(t){return(0,ut.jsx)("li",{onClick:function(){var r;"BOLD"===t?(r=e.state.isFontBold?"NO_BOLD":"BOLD",e.setState((function(e){return{isFontBold:!e.isFontBold}}))):"ITALIC"===t&&(r=e.state.isFontItalic?"NO_ITALIC":"ITALIC",e.setState((function(e){return{isFontItalic:!e.isFontItalic}}))),e.props.onFontChange(r,e.context.whiteboard_fontSize,e.context.whiteboard_brushColor)},className:"BOLD"===t&&e.state.isFontBold||"ITALIC"===t&&e.state.isFontItalic?wi:"",style:{fontStyle:t}},t)}))})]}),(0,ut.jsxs)("div",{className:Ei,children:[(0,ut.jsx)("h3",{children:"Thickness"}),(0,ut.jsx)("ul",{children:[12,14,16,18].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({fontSize:t}),e.props.onFontChange(void 0,Ci[t],e.context.whiteboard_brushColor)},className:e.state.fontSize===t?wi:"",style:{fontSize:t+"px"},children:"A"},t)}))})]}),(0,ut.jsxs)("div",{className:Ti,children:[(0,ut.jsx)("h3",{children:"Color"}),(0,ut.jsx)("ul",{children:["#FFFFFF","#A4A4A4","#333333","#000000","#F64326","#FD7803","#FBE605","#3FBB54","#00EAE7","#0484FE","#825FD0","#FB7D7D"].map((function(t){return(0,ut.jsx)("li",{style:{backgroundColor:t},onClick:function(r){e.setState({fontColor:t}),e.props.onFontChange(void 0,e.context.whiteboard_fontSize,t)},className:e.state.fontColor===t?wi:""},t)}))})]})]})}}]),r}(e.PureComponent);Oi.contextType=io;var ki=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={hideTools:!1,selectedTool:3,showTextTools:!1,showFontTools:!1,showGraphicsTools:!1},e}return c(r,[{key:"showTool",value:function(e){return!this.state.hideTools||this.state.selectedTool===e}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsxs)("div",{className:Wn,children:[this.showTool(1)&&(0,ut.jsx)("div",{className:"".concat(Yn," ").concat(1===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:1}),e.props.onToolChange(32)}}),this.showTool(2)&&(0,ut.jsx)("div",{className:"".concat(Qn," ").concat(2===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:2}),e.props.onToolChange(0)}}),this.showTool(3)&&(0,ut.jsx)("div",{className:"ZegoWhiteboardToolsPenToolTips ".concat(Kn," ").concat(3===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:3,showFontTools:!0}),e.props.onToolChange(1)},children:this.state.showFontTools&&(0,ut.jsx)(di,{rows:this.props.rows,onToolChange:function(t,r){e.props.onToolChange(1,t,r)},onClose:function(){e.setState({showFontTools:!1})}})}),this.showTool(4)&&(0,ut.jsx)("div",{className:"ZegoWhiteboardToolsTextToolTips ".concat(Jn," ").concat(4===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:4,showTextTools:!0}),e.props.onToolChange(2)},children:this.state.showTextTools&&(0,ut.jsx)(Oi,{rows:this.props.rows,onFontChange:function(t,r,o){e.props.onFontChange(t,r,o)},onClose:function(){e.setState({showTextTools:!1})}})}),(1===this.props.rows||this.state.hideTools)&&(0,ut.jsxs)(ut.Fragment,{children:[this.showTool(5)&&(0,ut.jsx)("div",{className:"ZegoWhiteboardToolsGraphicsTooTips ".concat(Xn," ").concat(5===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:5,showGraphicsTools:!0}),![4,8,16].includes(e.context.whiteboard_toolType)&&e.props.onToolChange(16)},children:this.state.showGraphicsTools&&(0,ut.jsx)(vi,{rows:this.props.rows,onToolChange:function(t,r,o){e.props.onToolChange(t,r,o)},onClose:function(){e.setState({showGraphicsTools:!1})}})}),this.showTool(6)&&this.context.whiteboard_showAddImage&&(0,ut.jsx)("div",{className:"".concat($n," ").concat(6===this.state.selectedTool?ii:""),onClick:function(){Q((function(t){e.props.onAddImage(t)}))}}),this.showTool(7)&&(0,ut.jsx)("div",{className:"".concat(ei," ").concat(7===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:7}),e.props.onToolChange(64)}}),this.showTool(8)&&(0,ut.jsx)("div",{className:"".concat(ti," ").concat(8===this.state.selectedTool?ii:""),onClick:function(){e.props.onToolChange(512)}}),this.showTool(9)&&(0,ut.jsx)("div",{className:"".concat(ri," ").concat(9===this.state.selectedTool?ii:""),onClick:function(){e.props.onSnapshot()}})]}),(0,ut.jsx)("p",{}),(0,ut.jsx)("div",{className:this.state.hideTools?ni:oi,onClick:function(){e.setState((function(e){return{hideTools:!e.hideTools}}))}})]}),2===this.props.rows&&!this.state.hideTools&&(0,ut.jsxs)("div",{className:Wn,children:[this.showTool(5)&&(0,ut.jsx)("div",{className:"ZegoWhiteboardToolsGraphicsTooTips ".concat(Xn," ").concat(5===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:5,showGraphicsTools:!0}),![4,8,16].includes(e.context.whiteboard_toolType)&&e.props.onToolChange(16)},children:this.state.showGraphicsTools&&(0,ut.jsx)(vi,{rows:this.props.rows,onToolChange:function(t,r,o){e.props.onToolChange(t,r,o)},onClose:function(){e.setState({showGraphicsTools:!1})}})}),this.showTool(6)&&this.context.whiteboard_showAddImage&&(0,ut.jsx)("div",{className:"".concat($n," ").concat(6===this.state.selectedTool?ii:""),onClick:function(){Q((function(t){e.props.onAddImage(t)}))}}),this.showTool(7)&&(0,ut.jsx)("div",{className:"".concat(ei," ").concat(7===this.state.selectedTool?ii:""),onClick:function(){e.setState({selectedTool:7}),e.props.onToolChange(64)}}),this.showTool(8)&&(0,ut.jsx)("div",{className:"".concat(ti," ").concat(8===this.state.selectedTool?ii:""),onClick:function(){e.props.onToolChange(512)}}),this.showTool(9)&&(0,ut.jsx)("div",{className:"".concat(ri," ").concat(9===this.state.selectedTool?ii:""),onClick:function(){e.props.onSnapshot()}})]})]})}}]),r}(e.PureComponent);ki.contextType=io;var Ri,Ai="zegoLoading_container__O9jLf",Pi="zegoLoading_content__qRk8n",Li="zegoLoading_loadSvg__p54HA",Ni="zegoLoading_text__-c+Bk",Di=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){return(0,ut.jsx)("div",{className:Ai,children:(0,ut.jsxs)("div",{className:Pi,children:[(0,ut.jsx)("div",{className:Li}),this.props.contentText&&(0,ut.jsx)("div",{className:Ni,children:this.props.contentText})]})})}}]),r}(e.Component),Mi=function(e,r){var o=document.createElement("div");(r||document.body).appendChild(o),(Ri=t.createRoot(o)).render((0,ut.jsx)(Di,w({},e)))},xi=function(){Ri&&Ri.unmount()},Bi=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).container=null,e.containerWidth=0,e.containerHeight=0,e.state={currentZoom:100,rows:1},e.context=void 0,e}return c(r,[{key:"componentDidMount",value:function(){var e,t,r=null===(e=this.props.zegoSuperBoardView)||void 0===e||null===(t=e.getCurrentSuperBoardSubView())||void 0===t?void 0:t.getScaleFactor().scaleFactor;this.setState({currentZoom:r?100*r:100})}},{key:"render",value:function(){var e,t=this,r=tn((E(e={},un,!0),E(e,ln,5===this.props.videoShowNumber),E(e,dn,4===this.props.videoShowNumber),E(e,hn,3===this.props.videoShowNumber),E(e,pn,2===this.props.videoShowNumber),E(e,fn,1===this.props.videoShowNumber),e));return(0,ut.jsxs)("div",{className:an,children:[(0,ut.jsxs)("div",{className:"".concat(gn,"  ").concat(Fn.whiteboardWrapper),children:[(0,ut.jsxs)("div",{className:Fn.top,children:[(0,ut.jsxs)("div",{className:Fn.toolLeft,children:[(0,ut.jsx)("div",{className:Fn.undo,onClick:function(){var e,r;null===(e=t.props.zegoSuperBoardView)||void 0===e||null===(r=e.getCurrentSuperBoardSubView())||void 0===r||r.undo()}}),(0,ut.jsx)("div",{className:Fn.redo,onClick:function(){var e,r;null===(e=t.props.zegoSuperBoardView)||void 0===e||null===(r=e.getCurrentSuperBoardSubView())||void 0===r||r.redo()}}),(0,ut.jsxs)("div",{className:Fn.zoom,children:[(0,ut.jsx)("a",{className:Fn.zoom_sub,onClick:function(){t.setState((function(e){return{currentZoom:e.currentZoom-25>300?300:e.currentZoom-25<100?100:e.currentZoom-25}}),(function(){var e,r;null===(e=t.props.zegoSuperBoardView)||void 0===e||null===(r=e.getCurrentSuperBoardSubView())||void 0===r||r.setScaleFactor(t.state.currentZoom/100)}))}}),(0,ut.jsx)("span",{className:Fn.zoom_value,children:"".concat(this.state.currentZoom,"%")}),(0,ut.jsx)("a",{className:Fn.zoom_add,onClick:function(){t.setState((function(e){return{currentZoom:e.currentZoom+25>300?300:e.currentZoom+25<100?100:e.currentZoom+25}}),(function(){var e,r;null===(e=t.props.zegoSuperBoardView)||void 0===e||null===(r=e.getCurrentSuperBoardSubView())||void 0===r||r.setScaleFactor(t.state.currentZoom/100)}))}})]}),(0,ut.jsxs)("div",{className:Fn.page,children:[(0,ut.jsx)("a",{className:Fn.page_sub,onClick:function(){var e,r;null===(e=t.props.zegoSuperBoardView)||void 0===e||null===(r=e.getCurrentSuperBoardSubView())||void 0===r||r.flipToPrePage()}}),(0,ut.jsx)("span",{className:Fn.page_value,children:this.context.whiteboard_page}),(0,ut.jsx)("span",{className:Fn.page_value_total,children:"/5"}),(0,ut.jsx)("a",{className:Fn.page_add,onClick:function(){var e,r;null===(e=t.props.zegoSuperBoardView)||void 0===e||null===(r=e.getCurrentSuperBoardSubView())||void 0===r||r.flipToNextPage()}})]})]}),(0,ut.jsx)("div",{className:Fn.stop,onClick:function(){t.props.onclose()},children:"Stop Presenting"})]}),(0,ut.jsxs)("div",{className:Fn.content,children:[(0,ut.jsx)(ki,{rows:this.state.rows,onToolChange:function(){var e=i(o().mark((function e(r,n,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.onToolChange(r,n,i);case 1:case"end":return e.stop()}}),e)})));return function(t,r,o){return e.apply(this,arguments)}}(),onFontChange:function(e,r,o){t.props.onFontChange(e,r,o)},onAddImage:function(){var e=i(o().mark((function e(r){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mi({contentText:"The picture is being uploaded"}),e.next=3,null===(n=t.props.zegoSuperBoardView)||void 0===n||null===(i=n.getCurrentSuperBoardSubView())||void 0===i?void 0:i.addImage(0,10,10,r,(function(e){xi(),zo({content:"add Image Success!!"})})).catch((function(e){xi(),console.error("onAddImage:",e),60022==e.code?zo({content:"Failed to add image, this feature is not supported."}):3130009==e.code?zo({content:"Failed to add image, Unsupported image type."}):zo({content:"Failed to add image, error code:"+e.code})}));case 3:e.sent,xi();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSnapshot:function(){var e,r=null===(e=t.props.zegoSuperBoardView)||void 0===e?void 0:e.getCurrentSuperBoardSubView();null===r||void 0===r||r.snapshot().then((function(e){var t=document.createElement("a");t.href=e.image,t.download="snapshot.png",t.click()}))}}),(0,ut.jsx)("div",{className:"".concat(vn,"  ").concat(Fn.contentRight),id:"ZegoCloudWhiteboardContainer",ref:function(e){e&&(t.setState({rows:e.clientHeight<410?2:1}),t.container?e.clientWidth&&e.clientHeight&&(e.clientWidth!=t.containerWidth||e.clientHeight!=t.containerHeight)&&(t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.props.onResize(e)):(t.container=e,t.containerHeight=e.clientHeight,t.containerWidth=e.clientWidth,t.props.onShow(e)))}})]})]}),this.props.userList.length>0&&(0,ut.jsx)("div",{className:r,children:this.props.userList.map((function(e,r,o){if(o.length>t.props.videoShowNumber){if(r===t.props.videoShowNumber-1)return(0,ut.jsxs)("div",{children:[(0,ut.jsx)(on,{users:[o[r],o[r+1]],others:o.length-t.props.videoShowNumber+1}),(0,ut.jsx)("audio",{autoPlay:!0,muted:e.userID===t.props.selfInfo.userID,ref:function(r){var o,n,i,s,a,c;r&&r.srcObject!==(null===e||void 0===e||null===(o=e.streamList)||void 0===o||null===(n=o[0])||void 0===n?void 0:n.media)&&(r.srcObject=null===e||void 0===e||null===(i=e.streamList)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.media),r&&(null===r||void 0===r||null===(a=(c=r).setSinkId)||void 0===a||a.call(c,t.context.speakerId||""))}})]},"screen_container_"+e.userID);if(r>t.props.videoShowNumber-1)return(0,ut.jsx)("audio",{autoPlay:!0,muted:e.userID===t.props.selfInfo.userID,ref:function(r){var o,n,i,s,a,c;r&&r.srcObject!==(null===e||void 0===e||null===(o=e.streamList)||void 0===o||null===(n=o[0])||void 0===n?void 0:n.media)&&(r.srcObject=null===e||void 0===e||null===(i=e.streamList)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.media),r&&(null===r||void 0===r||null===(a=(c=r).setSinkId)||void 0===a||a.call(c,t.context.speakerId||""))}},e.userID)}return(0,ut.jsx)(Oo,{userInfo:e,muted:e.userID===t.props.selfInfo.userID,handlePin:function(){t.props.handleSetPin(e.userID)},volume:t.props.soundLevel[e.userID]||{}},e.userID)}))})]})}}]),r}(e.PureComponent);Bi.contextType=io;var Ui=function(t){l(n,t);var r=f(n);function n(){var t;s(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=r.call.apply(r,[this].concat(i))).state={localStream:void 0,layOutStatus:"ONE_VIDEO",zegoCloudUserList:[],messageList:[],notificationList:[],micOpen:!!t.props.core._config.turnOnMicrophoneWhenJoining,cameraOpen:!!t.props.core._config.turnOnCameraWhenJoining,showSettings:!1,isNetworkPoor:!1,connecting:!1,firstLoading:!0,selectMic:t.props.core.status.micDeviceID,selectSpeaker:t.props.core.status.speakerDeviceID,selectCamera:t.props.core.status.cameraDeviceID,selectVideoResolution:t.props.core.status.videoResolution||t.props.core._config.videoResolutionList[0],videoShowNumber:9,gridRowNumber:3,layout:t.props.core._config.layout||"Auto",showLayoutSettingsModel:!1,isLayoutChanging:!1,soundLevel:{},showNonVideoUser:t.props.core._config.showNonVideoUser,liveCountdown:-1,liveStatus:"0",isScreenSharingBySelf:!1,screenSharingStream:void 0,zegoSuperBoardView:null,screenSharingUserList:[],showZegoSettings:!1,haveUnReadMsg:!1,isZegoWhiteboardSharing:!1},t.settingsRef=e.createRef(),t.moreRef=e.createRef(),t.micStatus=t.props.core._config.turnOnMicrophoneWhenJoining?1:0,t.cameraStatus=t.props.core._config.turnOnCameraWhenJoining?1:0,t.notifyTimer=void 0,t.msgDelayed=!0,t.localUserPin=!1,t.localStreamID="",t.screenSharingStreamID="",t.isCreatingScreenSharing=!1,t.isCreatingWhiteboardSharing=!1,t.fullScreen=!1,t.showNotSupported=0,t.notSupportMultipleVideoNotice=0,t.userUpdateCallBack=function(){},t.onOpenSettings=function(e){var r,o;t.settingsRef.current===e.target||null!==(r=t.settingsRef.current)&&void 0!==r&&r.contains(e.target)||t.moreRef.current===e.target||null!==(o=t.moreRef.current)&&void 0!==o&&o.contains(e.target)||t.setState({showSettings:!1})},t.onWindowResize=F(t.computeByResize.bind(h(t)),500),t}return c(n,[{key:"isCDNLive",get:function(){var e,t;return(null===(e=this.props.core._config.scenario)||void 0===e?void 0:e.mode)===g.LiveStreaming&&(null===(t=this.props.core._config.scenario.config)||void 0===t?void 0:t.role)===_.Audience&&this.props.core._config.scenario.config.liveStreamingMode===v.StandardLive}},{key:"componentDidMount",value:function(){var e,t,r,o=this;this.setAllSinkId(this.state.selectSpeaker||""),this.computeByResize(),setTimeout((function(){o.msgDelayed=!1}),5e3),this.initSDK(),document.addEventListener("click",this.onOpenSettings),window.addEventListener("resize",this.onWindowResize.bind(this)),(null===(e=this.props.core._config.scenario)||void 0===e?void 0:e.mode)===g.LiveStreaming&&(null===(t=this.props.core._config.scenario)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.role)===_.Audience&&this.toggleLayOut("MESSAGE")}},{key:"componentDidUpdate",value:function(e,t){var r=this;(t.notificationList.length>0&&this.state.notificationList.length>0&&t.notificationList[t.notificationList.length-1].messageID!==this.state.notificationList[this.state.notificationList.length-1].messageID||0===t.notificationList.length&&this.state.notificationList.length>0)&&(this.notifyTimer&&clearTimeout(this.notifyTimer),this.notifyTimer=setTimeout((function(){r.setState({notificationList:[]})}),3e3)),t.layout===this.state.layout&&t.isScreenSharingBySelf===this.state.isScreenSharingBySelf&&t.isZegoWhiteboardSharing===this.state.isZegoWhiteboardSharing||this.computeByResize(),t.videoShowNumber!==this.state.videoShowNumber&&t.zegoCloudUserList===this.state.zegoCloudUserList&&this.userUpdateCallBack()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onOpenSettings),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.state.isScreenSharingBySelf&&this.closeScreenSharing(),this.state.localStream&&this.props.core.destroyStream(this.state.localStream)}},{key:"initSDK",value:function(){var e=i(o().mark((function e(){var t,r,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.core.onNetworkStatusQuality((function(e,t){n.setState({isNetworkPoor:t>2})})),this.props.core.onNetworkStatus((function(e,t,r){"DISCONNECTED"===r&&"ROOM"===t?(n.setState({connecting:!1,firstLoading:!1}),n.leaveRoom()):"CONNECTING"===r&&"STREAM"!==t?n.setState({connecting:!0}):n.setState({connecting:!1,firstLoading:!1})})),this.props.core.onRemoteUserUpdate((function(e,t,r){var o,i=[];null!==(o=n.props.core._config.lowerLeftNotification)&&void 0!==o&&o.showUserJoinAndLeave&&r.forEach((function(e){i.push({content:e.userName+" "+("ADD"===t?"enter":"quite")+" the room",type:"USER",userName:e.userName,messageID:D(5)})})),n.setState((function(e){return{notificationList:[].concat(O(e.notificationList),i)}})),n.computeByResize()})),this.props.core.onRoomMessageUpdate((function(e,t){n.setState((function(e){var r,o=[];return"MESSAGE"!==n.state.layOutStatus&&null!==(r=n.props.core._config.lowerLeftNotification)&&void 0!==r&&r.showTextChat&&(o=[].concat(O(e.notificationList),O(t.map((function(e){return{content:e.message,type:"MSG",userName:e.fromUser.userName,messageID:e.messageID}}))))),{messageList:[].concat(O(e.messageList),O(t)),notificationList:o,haveUnReadMsg:"MESSAGE"!=n.state.layOutStatus}}))})),this.props.core.subscribeUserList((function(e){if(n.userUpdateCallBack(),n.isCDNLive){var t=JSON.parse(JSON.stringify(e)),r=t.filter((function(e){return e.streamList.length>0&&("OPEN"===e.streamList[0].cameraStatus||"OPEN"===e.streamList[0].micStatus)})).length,o=n.state.screenSharingUserList.length>0?5:6;if(U()&&(o=1),r>o){var i=0,s=t.reverse().map((function(e){return e.streamList.length>0&&("OPEN"===e.streamList[0].cameraStatus||"OPEN"===e.streamList[0].micStatus)&&(i>=o?e.streamList=[]:i++),e}));return n.setState({zegoCloudUserList:s.reverse()}),void(U()&&0===n.notSupportMultipleVideoNotice&&(n.notSupportMultipleVideoNotice=1,Et({header:"Notice",contentText:"Your current browser does not support the display of multiple video screens during the live streaming.",okText:"Okay"},document.querySelector(".".concat(nr)))))}}n.setState({zegoCloudUserList:e})})),this.props.core.onRoomLiveStateUpdate((function(e){n.setState((function(t){return{liveStatus:e,liveCountdown:-1===t.liveCountdown||0==t.liveCountdown?"1"===e?0:-1:t.liveCountdown}}))})),this.props.core.subscribeScreenStream((function(e){n.isCDNLive&&U()&&n.state.zegoCloudUserList.filter((function(e){return e.streamList.length>0&&("OPEN"===e.streamList[0].cameraStatus||"OPEN"===e.streamList[0].micStatus)})).length>0?n.setState({screenSharingUserList:[]},(function(){n.computeByResize()})):n.setState({screenSharingUserList:e},(function(){n.computeByResize()}))})),this.props.core.subscribeWhiteBoard((function(e){(!n.state.zegoSuperBoardView&&e||n.state.zegoSuperBoardView&&!e)&&n.setState({zegoSuperBoardView:e,isZegoWhiteboardSharing:!!e},(function(){n.computeByResize()}))})),this.props.core.onSoundLevelUpdate((function(e){var t={};e.forEach((function(e){var r=e.streamID.split("_")[1];t[r]?t[r][e.streamID]=Math.floor(e.soundLevel):t[r]=E({},e.streamID,Math.floor(e.soundLevel))})),n.setState({soundLevel:t})})),this.props.core.onScreenSharingEnded((function(e){e===n.state.screenSharingStream&&n.closeScreenSharing()})),this.props.core.onCoreError((function(e,t){if(e===b.notSupportStandardLive||e===b.notSupportCDNLive){if(n.showNotSupported)return;n.showNotSupported=1,Et({header:"Notice",contentText:"The service is not available, please contact the live streaming service provider to resolve.",okText:"Okay"},document.querySelector(".".concat(nr)))}})),e.next=13,this.props.core.enterRoom();case 13:if(t=e.sent,r="",0!==t){e.next=20;break}return this.createStream(),e.abrupt("return");case 20:r=1002034===t?"Failed to join the room, the number of people in the room has reached the maximum.(2 people)":[1002031,1002053].includes(t)?"There's something wrong with your network. Please check it and try again.":[1102018,1102016,1102020].includes(t)?"Failed to join the room, token authentication error.":1002056===t?"You are on a call in another room, please leave that room first.":"Failed to join the room, please try again.(error code:"+t+")";case 21:Et({header:"Login room Failed",contentText:r,okText:"OK"},document.querySelector(".".concat(nr)));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createStream",value:function(){var e=i(o().mark((function e(){var t,r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.core._config.turnOnCameraWhenJoining||this.props.core._config.turnOnMicrophoneWhenJoining||this.props.core._config.showMyCameraToggleButton||this.props.core._config.showMyMicrophoneToggleButton){e.next=2;break}return e.abrupt("return",!1);case 2:if(this.props.core.status.videoRefuse&&this.props.core.status.audioRefuse){e.next=22;break}return e.prev=3,t=Z(this.state.selectVideoResolution),e.next=7,this.props.core.createStream({camera:w({video:!this.props.core.status.videoRefuse,audio:!this.props.core.status.audioRefuse,videoInput:this.state.selectCamera,audioInput:this.state.selectMic,videoQuality:4},t)});case 7:return r=e.sent,this.props.core.enableVideoCaptureDevice(r,!!this.props.core._config.turnOnCameraWhenJoining),this.props.core.muteMicrophone(!this.props.core._config.turnOnMicrophoneWhenJoining),this.setState({localStream:r}),!1!==(n=this.props.core.publishLocalStream(r))&&(this.localStreamID=n,this.props.core.setStreamExtraInfo(n,JSON.stringify({isCameraOn:!!this.props.core._config.turnOnCameraWhenJoining,isMicrophoneOn:this.props.core._config.turnOnMicrophoneWhenJoining,hasVideo:!this.props.core.status.videoRefuse,hasAudio:!this.props.core.status.audioRefuse}))),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(3),console.error("\u3010ZEGOCLOUD\u3011createStream or publishLocalStream failed,Reason: ",JSON.stringify(e.t0)),e.abrupt("return",!1);case 20:e.next=23;break;case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"toggleMic",value:function(){var e=i(o().mark((function e(){var t,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.core.status.audioRefuse){e.next=3;break}return Et({header:"Equipment authorization",contentText:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",okText:"Okay"},document.querySelector(".".concat(nr))),e.abrupt("return");case 3:if(-1!==this.micStatus){e.next=5;break}return e.abrupt("return");case 5:if(this.micStatus=-1,!(this.state.localStream&&this.state.localStream.getAudioTracks().length>0)){e.next=11;break}return e.next=9,this.props.core.muteMicrophone(this.state.micOpen);case 9:t=e.sent,this.props.core.setStreamExtraInfo(this.localStreamID,JSON.stringify({isCameraOn:this.state.cameraOpen,isMicrophoneOn:!this.state.micOpen,hasVideo:!this.props.core.status.videoRefuse,hasAudio:!this.props.core.status.audioRefuse}));case 11:this.micStatus=this.state.micOpen?0:1,t&&(zo({content:"The microphone is "+(this.micStatus?"on":"off")}),t&&this.setState({micOpen:!!this.micStatus},(function(){r.computeByResize(r.state.cameraOpen||r.state.micOpen)})));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleCamera",value:function(){var e=i(o().mark((function e(){var t,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.core.status.videoRefuse){e.next=3;break}return Et({header:"Equipment authorization",contentText:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",okText:"Okay"},document.querySelector(".".concat(nr))),e.abrupt("return",Promise.resolve(!1));case 3:if(-1!==this.cameraStatus){e.next=5;break}return e.abrupt("return",Promise.resolve(!1));case 5:if(this.cameraStatus=-1,!(this.state.localStream&&this.state.localStream.getVideoTracks().length>0)){e.next=11;break}return e.next=9,this.props.core.enableVideoCaptureDevice(this.state.localStream,!this.state.cameraOpen);case 9:t=e.sent,this.props.core.setStreamExtraInfo(this.localStreamID,JSON.stringify({isCameraOn:!this.state.cameraOpen,isMicrophoneOn:this.state.micOpen,hasVideo:!this.props.core.status.videoRefuse,hasAudio:!this.props.core.status.audioRefuse}));case 11:return this.cameraStatus=this.state.cameraOpen?0:1,t&&(zo({content:"The camera is "+(this.cameraStatus?"on":"off")}),t&&this.setState({cameraOpen:!!this.cameraStatus},(function(){r.computeByResize(r.state.cameraOpen||r.state.micOpen)}))),e.abrupt("return",!!t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleScreenSharing",value:function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.isScreenSharingBySelf?this.closeScreenSharing():this.createScreenSharing();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createScreenSharing",value:function(){var e=i(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isZegoWhiteboardSharing){e.next=2;break}return e.abrupt("return");case 2:if(!(this.state.screenSharingUserList.length>0)){e.next=5;break}return zo({content:"".concat(this.state.screenSharingUserList[0].userName," is presenting now. You cannot share your screen.")}),e.abrupt("return");case 5:if(!this.isCreatingScreenSharing){e.next=7;break}return e.abrupt("return");case 7:return this.isCreatingScreenSharing=!0,e.prev=8,e.next=11,this.props.core.createStream({screen:{videoQuality:2,bitRate:1500,frameRate:15,audio:!j()}});case 11:t=e.sent,(r=this.props.core.publishLocalStream(t,"screensharing"))&&(this.screenSharingStreamID=r),this.props.core.setStreamExtraInfo(r,JSON.stringify({isCameraOn:!0,isMicrophoneOn:!0,hasVideo:t.getVideoTracks().length>0,hasAudio:t.getAudioTracks()[0].enabled})),this.setState({isScreenSharingBySelf:!0,screenSharingStream:t}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),1103043===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?Et({header:"Notice",contentText:"Your browser does not support screen sharing.",okText:"Okay"},document.querySelector(".".concat(nr))):1103010===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&null!==e.t0&&void 0!==e.t0&&e.t0.msg.includes("Permission")?Et({header:"Grant access to share your screen",contentText:"Your system does not have access to share a screen from the browser. Please grant access to share your screen on your system settings.",okText:"Okay"},document.querySelector(".".concat(nr))):1103042!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&zo({content:"Failed to present your screen. error code: ".concat((null===e.t0||void 0===e.t0?void 0:e.t0.code)||-1)});case 21:this.isCreatingScreenSharing=!1;case 22:case"end":return e.stop()}}),e,this,[[8,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"closeScreenSharing",value:function(){try{this.screenSharingStreamID&&this.props.core.stopPublishingStream(this.screenSharingStreamID),this.state.screenSharingStream&&this.props.core.destroyStream(this.state.screenSharingStream),this.setState({isScreenSharingBySelf:!1})}catch(error){console.error(error)}}},{key:"toggleWhiteboardSharing",value:function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.getScreenSharingUser.length>0)){e.next=2;break}return e.abrupt("return");case 2:this.state.zegoSuperBoardView?this.closeWhiteboardSharing():this.state.isZegoWhiteboardSharing||this.createWhiteboardSharing();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createWhiteboardSharing",value:function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.screenSharingUserList.length>0)){e.next=5;break}return zo({content:"".concat(this.state.screenSharingUserList[0].userName," is presenting now. You cannot share your whiteboard.")}),e.abrupt("return");case 5:if(!this.state.zegoSuperBoardView){e.next=8;break}return zo({content:"".concat(null===(t=this.state.zegoSuperBoardView.getCurrentSuperBoardSubView())||void 0===t?void 0:t.getModel.name," is presenting now. You cannot share your whiteboard.")}),e.abrupt("return");case 8:if(!this.isCreatingWhiteboardSharing){e.next=10;break}return e.abrupt("return");case 10:this.isCreatingWhiteboardSharing=!0,this.setState({isZegoWhiteboardSharing:!0});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeWhiteboardSharing",value:function(){try{this.state.zegoSuperBoardView&&this.props.core.destroyAndStopPublishWhiteboard(),this.setState({isZegoWhiteboardSharing:!1,zegoSuperBoardView:null}),this.isCreatingWhiteboardSharing=!1}catch(error){console.error(error)}}},{key:"toggleLayOut",value:function(e){var t=this;this.setState((function(t){return{layOutStatus:t.layOutStatus===e?"ONE_VIDEO":e}}),(function(){t.computeByResize()}))}},{key:"sendMessage",value:function(){var e=i(o().mark((function e(t){var r,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(5),this.setState((function(e){return{messageList:[].concat(O(e.messageList),[{fromUser:{userID:i.props.core._expressConfig.userID,userName:i.props.core._expressConfig.userName},message:t,sendTime:Date.now(),messageID:r,status:"SENDING"}])}})),n={},e.prev=3,e.next=6,this.props.core.sendRoomMessage(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("\u3010ZEGOCLOUD\u3011sendMessage failed!",JSON.stringify(e.t0));case 12:this.setState((function(e){var t=e.messageList.map((function(e){var t;e.messageID===r&&(e.status=0===(null===(t=n)||void 0===t?void 0:t.errorCode)?"SENDED":"FAILED");return e}));return console.log(t),{messageList:t}}));case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openSettings",value:function(){this.setState({showSettings:!this.state.showSettings})}},{key:"handleSetting",value:function(){this.setState({showZegoSettings:!0})}},{key:"handleLeave",value:function(){var e=this;Et({header:"Leave the room",contentText:"Are you sure to leave the room?",okText:"Confirm",cancelText:"Cancel",onOk:function(){e.props.core._config.turnOnCameraWhenJoining=e.state.cameraOpen,e.props.core._config.turnOnMicrophoneWhenJoining=e.state.micOpen,e.props.core.status.micDeviceID=e.state.selectMic,e.props.core.status.cameraDeviceID=e.state.selectCamera,e.props.core.status.speakerDeviceID=e.state.selectSpeaker,e.props.core.status.videoResolution=e.state.selectVideoResolution,e.leaveRoom()}},document.querySelector(".".concat(nr)))}},{key:"leaveRoom",value:function(){this.state.isScreenSharingBySelf&&this.closeScreenSharing(),this.state.localStream&&this.props.core.destroyStream(this.state.localStream),this.props.core.leaveRoom(),this.props.leaveRoom&&this.props.leaveRoom()}},{key:"showSelf",get:function(){return!!this.props.core._config.showNonVideoUser||(this.props.core._config.showOnlyAudioUser?this.localStreamID&&(this.state.micOpen||this.state.cameraOpen):this.localStreamID&&this.state.cameraOpen)}},{key:"computeByResize",value:function(){var e=i(o().mark((function e(){var t,r,n,i,s,a,c,u,l,d,h,p,f,_,g,m,v,y,b=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.length>0&&void 0!==b[0]&&b[0],r=Math.max(this.props.core._config.container.clientWidth,640),n=Math.max(this.props.core._config.container.clientHeight,328),i=0,s=0,!(this.getScreenSharingUser.length>0||this.state.isZegoWhiteboardSharing)){e.next=22;break}if(c=n-(null!==(a=this.props.core._config.branding)&&void 0!==a&&a.logoURL?64:0)-84-(this.state.isZegoWhiteboardSharing?0:38),u=parseInt(String(c/124))||1,i=Math.min(124*u+10*(u-1)<=c?u:u-1||1,5),e.t0=!t,!e.t0){e.next=12;break}return e.next=12,this.props.core.setSidebarLayOut(!1);case 12:if(!this.fullScreen){e.next=18;break}return this.setState({videoShowNumber:0}),e.next=16,this.props.core.setMaxScreenNum(0);case 16:e.next=21;break;case 18:return this.setState({videoShowNumber:i}),e.next=21,this.props.core.setMaxScreenNum(this.showSelf?i-1:i);case 21:case 34:case 44:return e.abrupt("return");case 22:if("Sidebar"!==this.state.layout){e.next=35;break}if(d=n-(null!==(l=this.props.core._config.branding)&&void 0!==l&&l.logoURL?64:0)-84,h=parseInt(String(d/124))||1,i=Math.min(124*h+10*(h-1)<=d?h:h-1||1,5),p=!this.state.cameraOpen&&!this.state.micOpen||!this.localUserPin,e.t1=!t,!e.t1){e.next=31;break}return e.next=31,this.props.core.setSidebarLayOut(p);case 31:return this.setState({videoShowNumber:i}),e.next=34,this.props.core.setMaxScreenNum(this.showSelf?i:i+1);case 35:if("Grid"!==this.state.layout&&"Auto"!==this.state.layout){e.next=45;break}if(n<406-(null!==(f=this.props.core._config.branding)&&void 0!==f&&f.logoURL?0:64)?(g=r-32-("ONE_VIDEO"===this.state.layOutStatus?0:350),m=parseInt(String(g/160)),i=Math.min(160*m+10*(m-1)<=g?m:m-1,10),s=1):n<540-(null!==(_=this.props.core._config.branding)&&void 0!==_&&_.logoURL?0:64)?(v=r-32-("ONE_VIDEO"===this.state.layOutStatus?0:350),y=parseInt(String(v/124)),i=Math.min(124*y+10*(y-1)<=v?2*y:2*(y-1),10),s=2):(i=9,s=3),e.t2=!t,!e.t2){e.next=41;break}return e.next=41,this.props.core.setSidebarLayOut(!1);case 41:return this.setState({videoShowNumber:i,gridRowNumber:s}),e.next=44,this.props.core.setMaxScreenNum(this.showSelf?i-1:i);case 45:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showLayoutSettings",value:function(e){this.setState({showLayoutSettingsModel:e})}},{key:"changeLayout",value:function(){var e=i(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isLayoutChanging){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e,o){r.userUpdateCallBack=function(){r.setState({isLayoutChanging:!1}),e(!0)},"Grid"!==t&&"Auto"!==t||(r.props.core.setPin(),r.localUserPin=!1),r.setState({isLayoutChanging:!0,layout:t}),r.props.core.setSidebarLayOut("Sidebar"===t),setTimeout((function(){r.setState({isLayoutChanging:!1}),e(!1)}),5e3)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllUser",value:function(){return[{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName,pin:this.localUserPin,avatar:this.props.core._expressConfig.avatar,streamList:[{media:this.state.localStream,fromUser:{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName},micStatus:this.state.micOpen?"OPEN":"MUTE",cameraStatus:this.state.cameraOpen?"OPEN":"MUTE",state:"PLAYING",streamID:this.localStreamID}]}].concat(O(this.state.zegoCloudUserList))}},{key:"getShownUser",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.getAllUser().filter((function(r){return!(!e.props.core._config.showNonVideoUser&&!t)||!!(r.streamList&&r.streamList[0]&&(r.streamList[0].media||r.streamList[0].urlsHttpsFLV||r.streamList[0].urlsHttpsHLS))&&("OPEN"===r.streamList[0].cameraStatus||!(!e.props.core._config.showOnlyAudioUser||"OPEN"!==r.streamList[0].micStatus))}));return r}},{key:"getScreenSharingUser",get:function(){return this.state.isScreenSharingBySelf?[{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName,avatar:this.props.core._expressConfig.avatar,pin:!1,streamList:[{media:this.state.screenSharingStream,fromUser:{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName},micStatus:"OPEN",cameraStatus:"OPEN",state:"PLAYING",streamID:this.screenSharingStreamID}]}]:this.state.screenSharingUserList}},{key:"getHiddenUser",value:function(){var e=this,t=this.getAllUser().filter((function(t){return!(e.props.core._config.showNonVideoUser||!t.streamList||!t.streamList[0]||!(t.streamList[0].media||t.streamList[0].urlsHttpsFLV||t.streamList[0].urlsHttpsHLS)||"OPEN"===t.streamList[0].cameraStatus||e.props.core._config.showOnlyAudioUser||"OPEN"!==t.streamList[0].micStatus)}));return(0,ut.jsx)(ut.Fragment,{children:t.map((function(t){return(0,ut.jsx)(nn,{muted:t.userID===e.props.core._expressConfig.userID,userInfo:t},t.userID+"_hiddenAudio")}))})}},{key:"showScreenShareBottomTip",get:function(){var e,t,r;return((null===(e=this.props.core._config.scenario)||void 0===e?void 0:e.mode)!==g.LiveStreaming||(null===(t=this.props.core._config.scenario)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.role)!==_.Audience||"1"===this.state.liveStatus)&&this.getScreenSharingUser.length>0}},{key:"getLayoutScreen",value:function(){var e,t,r,n,s=this;return(null===(e=this.props.core._config.scenario)||void 0===e?void 0:e.mode)===g.LiveStreaming&&(null===(t=this.props.core._config.scenario)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.role)===_.Audience&&"1"!==this.state.liveStatus?(0,ut.jsxs)("div",{className:eo,children:[(0,ut.jsx)("i",{}),(0,ut.jsx)("span",{children:"The Live has not started yet"})]}):[].concat(O(this.getAllUser()),O(this.getScreenSharingUser)).some((function(e){return!!e.streamList&&e.streamList.some((function(e){return"OPEN"===e.cameraStatus||"OPEN"===e.micStatus}))}))||(null===(n=this.props.core._config.scenario)||void 0===n?void 0:n.mode)!==g.LiveStreaming?this.getScreenSharingUser.length>0?(0,ut.jsx)(ut.Fragment,{children:(0,ut.jsx)(Zn,{handleSetPin:function(e){s.handleSetPin(e)},userList:this.getShownUser(),videoShowNumber:this.state.videoShowNumber,selfInfo:{userID:this.props.core._expressConfig.userID},screenSharingUser:this.getScreenSharingUser[0],soundLevel:this.state.soundLevel,handleFullScreen:this.handleFullScreen.bind(this),roomID:this.props.core._expressConfig.roomID})}):this.state.isZegoWhiteboardSharing?(0,ut.jsx)(Bi,{handleSetPin:function(e){s.handleSetPin(e)},userList:this.getShownUser(),videoShowNumber:this.state.videoShowNumber,selfInfo:{userID:this.props.core._expressConfig.userID},soundLevel:this.state.soundLevel,handleFullScreen:this.handleFullScreen.bind(this),roomID:this.props.core._expressConfig.roomID,onShow:function(){var e=i(o().mark((function e(t){var r,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isCreatingWhiteboardSharing||s.state.zegoSuperBoardView){e.next=14;break}return e.prev=1,e.next=4,s.props.core.createAndPublishWhiteboard(t,s.props.core._expressConfig.userName);case 4:r=e.sent,s.setState({zegoSuperBoardView:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Et({header:"Notice",contentText:"Operation too frequent, failed to load the whiteboard.",okText:"Okay"},document.querySelector(".".concat(nr)));case 11:s.isCreatingWhiteboardSharing=!1,e.next=15;break;case 14:s.state.zegoSuperBoardView&&(i=null===(n=s.state.zegoSuperBoardView.getCurrentSuperBoardSubView())||void 0===n?void 0:n.getModel().uniqueID)&&s.state.zegoSuperBoardView.switchSuperBoardSubView(i);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),onResize:function(e){if(s.state.isZegoWhiteboardSharing&&e)try{var t,r;null===(t=s.state.zegoSuperBoardView)||void 0===t||null===(r=t.getCurrentSuperBoardSubView())||void 0===r||r.reloadView()}catch(error){console.warn("\u3010ZEGOCLOUD\u3011onResize",error)}},onclose:function(){s.toggleWhiteboardSharing()},onToolChange:function(e,t,r){s.props.core.setWhiteboardToolType(e,t,r)},onFontChange:function(e,t,r){s.props.core.setWhiteboardFont(e,t,r)},zegoSuperBoardView:this.state.zegoSuperBoardView}):"Auto"===this.state.layout&&this.getShownUser().length<3||this.getShownUser().length<2?(0,ut.jsx)(ko,{onLocalStreamPaused:i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.core.enableVideoCaptureDevice(s.state.localStream,!s.state.cameraOpen);case 2:s.props.core.enableVideoCaptureDevice(s.state.localStream,s.state.cameraOpen);case 3:case"end":return e.stop()}}),e)}))),selfInfo:{userID:this.props.core._expressConfig.userID},handleSetPin:function(e){s.handleSetPin(e)},userList:this.getShownUser(),soundLevel:this.state.soundLevel}):"Grid"===this.state.layout&&this.getShownUser().length>1||"Auto"===this.state.layout&&this.getShownUser().length>2?(0,ut.jsx)(sn,{userList:this.getShownUser(),videoShowNumber:this.state.videoShowNumber,gridRowNumber:this.state.gridRowNumber,selfInfo:{userID:this.props.core._expressConfig.userID},handleSetPin:function(e){s.handleSetPin(e)},soundLevel:this.state.soundLevel}):"Sidebar"===this.state.layout&&this.getShownUser().length>1?(0,ut.jsx)(Tn,{handleSetPin:function(e){s.handleSetPin(e)},userList:this.getShownUser(),videoShowNumber:this.state.videoShowNumber,selfInfo:{userID:this.props.core._expressConfig.userID},soundLevel:this.state.soundLevel}):(0,ut.jsx)(ut.Fragment,{}):(0,ut.jsxs)("div",{className:to,children:[(0,ut.jsx)("i",{}),(0,ut.jsx)("span",{children:"No one has turned on the camera or microphone yet."})]})}},{key:"handleSetPin",value:function(e){e===this.props.core._expressConfig.userID?(this.localUserPin=!this.localUserPin,this.props.core.setPin()):(this.localUserPin=!1,this.props.core.setPin(e)),this.props.core.setSidebarLayOut(!(this.getScreenSharingUser.length>0)&&!1===this.localUserPin),this.setState({layout:"Sidebar"})}},{key:"handleFullScreen",value:function(e){this.fullScreen=e,this.computeByResize()}},{key:"setLive",value:function(){var e=i(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===this.state.liveCountdown?Et({header:"Stop broadcast",contentText:"Are you sure to stop broadcasting?",okText:"Stop",cancelText:"Cancel",onOk:function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.core.setLive("stop");case 2:e.sent,t.setState({liveCountdown:-1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},document.querySelector(".".concat(nr))):-1===this.state.liveCountdown&&this.setState({liveCountdown:3},(function(){setTimeout((function(){t.liveCountdownTimer()}),1e3)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"liveCountdownTimer",value:function(){var e=this;this.setState((function(e){return{liveCountdown:e.liveCountdown-1}}),i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.liveCountdown){t.next=6;break}return t.next=3,e.props.core.setLive("live");case 3:t.sent,t.next=7;break;case 6:setTimeout((function(){e.liveCountdownTimer()}),1e3);case 7:case"end":return t.stop()}}),t)}))))}},{key:"setAllSinkId",value:function(e){var t=document.querySelector(".".concat(nr));null===t||void 0===t||t.querySelectorAll("video").forEach((function(t){var r;null===t||void 0===t||null===(r=t.setSinkId)||void 0===r||r.call(t,e||"")})),null===t||void 0===t||t.querySelectorAll("audio").forEach((function(t){var r;null===t||void 0===t||null===(r=t.setSinkId)||void 0===r||r.call(t,e||"")}))}},{key:"render",value:function(){var e,t,r,n,s,a,c,u,l,d,h,p,f,m,v,y,b,S,E,T,w=this,C=this.state.notificationList.length<4?0:this.state.notificationList.length-2;return(0,ut.jsx)(io.Provider,{value:{showPinButton:!!this.props.core._config.showPinButton&&this.getShownUser().length>1,speakerId:this.state.selectSpeaker,whiteboard_page:(null===(e=this.state.zegoSuperBoardView)||void 0===e||null===(t=e.getCurrentSuperBoardSubView())||void 0===t?void 0:t.getCurrentPage())||1,whiteboard_toolType:(null===(r=this.props.core.zegoSuperBoard)||void 0===r?void 0:r.getToolType())||0,whiteboard_fontSize:(null===(n=this.props.core.zegoSuperBoard)||void 0===n?void 0:n.getFontSize())||0,whiteboard_brushSize:(null===(s=this.props.core.zegoSuperBoard)||void 0===s?void 0:s.getBrushSize())||0,whiteboard_brushColor:(null===(a=this.props.core.zegoSuperBoard)||void 0===a?void 0:a.getBrushColor())||"",whiteboard_isFontBold:null===(c=this.props.core.zegoSuperBoard)||void 0===c?void 0:c.isFontBold(),whiteboard_isFontItalic:null===(u=this.props.core.zegoSuperBoard)||void 0===u?void 0:u.isFontItalic(),whiteboard_showAddImage:null===(l=this.props.core._config.whiteboardConfig)||void 0===l?void 0:l.showAddImageButton,userInfo:{userID:this.props.core._expressConfig.userID}},children:(0,ut.jsxs)("div",{className:nr,children:[((null===(d=this.props.core._config.branding)||void 0===d?void 0:d.logoURL)||this.props.core._config.roomTimerDisplayed||(null===(h=this.props.core._config.scenario)||void 0===h?void 0:h.mode)===g.LiveStreaming)&&(0,ut.jsxs)("div",{className:ir,children:[(0,ut.jsxs)("div",{className:sr,children:[(null===(p=this.props.core._config.branding)||void 0===p?void 0:p.logoURL)&&(0,ut.jsx)("img",{className:ar,src:null===(f=this.props.core._config.branding)||void 0===f?void 0:f.logoURL,alt:"logo"}),(null===(m=this.props.core._config.scenario)||void 0===m?void 0:m.mode)===g.LiveStreaming&&(0===this.state.liveCountdown||"1"==this.state.liveStatus)&&(0,ut.jsx)("div",{className:cr,children:"Live"})]}),(null===(v=this.props.core._config.scenario)||void 0===v?void 0:v.mode)===g.LiveStreaming&&(null===(y=this.props.core._config.scenario)||void 0===y||null===(b=y.config)||void 0===b?void 0:b.role)===_.Host&&(0,ut.jsx)("button",{className:"".concat(ur,"  ").concat(0===this.state.liveCountdown?lr:""),onClick:function(){w.setLive()},children:3===this.state.liveCountdown||-1===this.state.liveCountdown?"Go Live":0===this.state.liveCountdown?"Stop broadcast":"Start stream..."}),this.props.core._config.roomTimerDisplayed&&(0,ut.jsx)(ro,{})]}),(0,ut.jsxs)("div",{className:dr,children:[(0,ut.jsxs)("div",{className:hr,children:[this.getLayoutScreen(),this.getHiddenUser(),(0,ut.jsx)("div",{className:jr,children:this.state.notificationList.slice(C).map((function(e,t){return"MSG"===e.type?(0,ut.jsxs)("div",{className:Hr,children:[(0,ut.jsx)("h5",{children:e.userName}),(0,ut.jsx)("span",{children:e.content})]},t):(0,ut.jsx)("div",{className:Hr,children:(0,ut.jsx)("span",{className:zr,children:e.content})},t)}))}),this.state.isNetworkPoor&&(0,ut.jsx)("div",{className:pr})]}),(0,ut.jsxs)("div",{className:gr,style:{display:"ONE_VIDEO"!==this.state.layOutStatus?"flex":"none"},children:[(0,ut.jsxs)("div",{className:mr,children:["INVITE"===this.state.layOutStatus&&"Room details","USER_LIST"===this.state.layOutStatus&&"Room members","MESSAGE"===this.state.layOutStatus&&"Room messages",(0,ut.jsx)("span",{className:vr,onClick:function(){w.setState({layOutStatus:"ONE_VIDEO"})}})]}),(0,ut.jsxs)("div",{className:yr,children:["INVITE"===this.state.layOutStatus&&(0,ut.jsx)(kn,{core:this.props.core}),"USER_LIST"===this.state.layOutStatus&&(0,ut.jsx)(Gn,{core:this.props.core,userList:this.getShownUser(!0),selfUserID:this.props.core._expressConfig.userID,handleSetPin:this.handleSetPin.bind(this),soundLevel:this.state.soundLevel}),"MESSAGE"===this.state.layOutStatus&&(0,ut.jsx)(Vo,{messageList:this.state.messageList,sendMessage:function(e){w.sendMessage(e)},selfUserID:this.props.core._expressConfig.userID})]})]})]}),this.showScreenShareBottomTip&&(0,ut.jsxs)("div",{className:Jr,children:[(0,ut.jsxs)("div",{className:Xr,children:[(0,ut.jsx)("span",{}),(0,ut.jsx)("p",{children:this.state.isScreenSharingBySelf?"You're presenting to everyone":"".concat(this.state.screenSharingUserList[0].userName," is presenting the screen")})]}),this.state.isScreenSharingBySelf&&(0,ut.jsx)("div",{className:$r,onClick:function(){w.toggleScreenSharing()},children:"Stop Presenting"})]}),(0,ut.jsxs)("div",{className:br,children:[(0,ut.jsxs)("div",{className:Sr,children:[this.props.core._config.showMyMicrophoneToggleButton&&(0,ut.jsx)("div",{className:"".concat(Ir," ").concat(!this.state.micOpen&&Or),onClick:function(){w.toggleMic()}}),this.props.core._config.showMyCameraToggleButton&&(0,ut.jsx)("div",{className:"".concat(kr," ").concat(!this.state.cameraOpen&&Or),onClick:function(){w.toggleCamera()}}),this.props.core._config.showScreenSharingButton&&(0,ut.jsx)("div",{className:"".concat(Rr," ").concat(this.state.isScreenSharingBySelf&&Ar," ").concat(this.state.isZegoWhiteboardSharing&&Pr),onClick:function(){w.toggleScreenSharing()}}),(null===(S=this.props.core._config.plugins)||void 0===S?void 0:S.ZegoSuperBoardManager)&&(0,ut.jsx)("div",{className:"".concat(Lr," ").concat(this.state.isZegoWhiteboardSharing&&Ar,"  ").concat(this.getScreenSharingUser.length>0&&Pr),onClick:function(){w.toggleWhiteboardSharing()}}),(this.props.core._config.showAudioVideoSettingsButton||this.props.core._config.showLayoutButton)&&(0,ut.jsx)("div",{ref:this.moreRef,className:Nr,onClick:function(){w.openSettings()},children:(0,ut.jsxs)("div",{className:Ur,style:{display:this.state.showSettings?"block":"none"},ref:this.settingsRef,children:[this.props.core._config.showLayoutButton&&(0,ut.jsx)("div",{onClick:function(){return w.showLayoutSettings(!0)},children:"Change layout"}),this.props.core._config.showAudioVideoSettingsButton&&this.props.core._config.showLayoutButton&&(0,ut.jsx)("span",{}),this.props.core._config.showAudioVideoSettingsButton&&(0,ut.jsx)("div",{onClick:function(){return w.handleSetting()},children:"Settings"})]})}),(0,ut.jsx)("div",{className:(null===(E=this.props.core._config.scenario)||void 0===E?void 0:E.mode)===g.LiveStreaming?Tr:Er,onClick:function(){w.handleLeave()}})]}),(0,ut.jsxs)("div",{className:wr,children:[(null===(T=this.props.core._config.preJoinViewConfig)||void 0===T?void 0:T.invitationLink)&&(0,ut.jsx)("div",{className:Cr,onClick:function(){w.toggleLayOut("INVITE")}}),this.props.core._config.showUserList&&(0,ut.jsx)("div",{className:Dr,onClick:function(){w.toggleLayOut("USER_LIST")},children:(0,ut.jsx)("span",{className:Mr,children:this.state.zegoCloudUserList.length>99?"99+":this.state.zegoCloudUserList.length+1})}),this.props.core._config.showTextChat&&(0,ut.jsx)("div",{className:"".concat(xr," ").concat(this.state.haveUnReadMsg?Br:""),onClick:function(){w.setState({haveUnReadMsg:!1}),w.toggleLayOut("MESSAGE")}})]})]}),(0,ut.jsxs)("div",{className:fr,style:{display:this.state.connecting?"flex":"none",backgroundColor:this.state.firstLoading?"#1C1F2E":""},children:[(0,ut.jsx)("div",{}),(0,ut.jsx)("p",{children:this.state.firstLoading?"Joining Room":"There's something wrong with your network. Trying to reconnect..."})]}),(0,ut.jsx)("div",{className:_r,style:{display:this.state.liveCountdown>0?"flex":"none"},children:(0,ut.jsx)("div",{children:this.state.liveCountdown})}),this.state.showLayoutSettingsModel&&(0,ut.jsx)("div",{className:Vr,children:(0,ut.jsxs)("div",{className:qr,children:[(0,ut.jsxs)("div",{className:Gr,children:[(0,ut.jsx)("p",{children:"Change layout"}),(0,ut.jsx)("span",{className:Zr,onClick:function(){return w.showLayoutSettings(!1)}})]}),(0,ut.jsxs)("div",{className:Fr,children:[(0,ut.jsxs)("div",{className:Wr,onClick:function(){return w.changeLayout("Auto")},children:[(0,ut.jsxs)("p",{children:[(0,ut.jsx)("span",{className:"".concat(Yr," ").concat("Auto"===this.state.layout?Qr:""," ").concat(this.state.isLayoutChanging&&"Auto"===this.state.layout?Kr:"")}),"Auto"]}),(0,ut.jsx)("img",{src:__webpack_require__(3259),alt:"grid layout"})]}),(0,ut.jsxs)("div",{className:Wr,onClick:function(){return w.changeLayout("Grid")},children:[(0,ut.jsxs)("p",{children:[(0,ut.jsx)("span",{className:"".concat(Yr," ").concat("Grid"===this.state.layout?Qr:""," ").concat(this.state.isLayoutChanging&&"Grid"===this.state.layout?Kr:"")}),"Grid"]}),(0,ut.jsx)("img",{src:__webpack_require__(5550),alt:"grid layout"})]}),(0,ut.jsxs)("div",{className:Wr,onClick:function(){return w.changeLayout("Sidebar")},children:[(0,ut.jsxs)("p",{children:[(0,ut.jsx)("span",{className:"".concat(Yr," ").concat("Sidebar"===this.state.layout?Qr:""," ").concat(this.state.isLayoutChanging&&"Sidebar"===this.state.layout?Kr:"")}),"Sidebar"]}),(0,ut.jsx)("img",{src:__webpack_require__(1636),alt:"Sidebar layout"})]})]})]})}),this.state.showZegoSettings&&(0,ut.jsx)(pt,{core:this.props.core,theme:"black",initDevices:{mic:this.state.selectMic,cam:this.state.selectCamera,speaker:this.state.selectSpeaker,videoResolve:this.state.selectVideoResolution,showNonVideoUser:this.state.showNonVideoUser},closeCallBack:function(){w.setState({showZegoSettings:!1})},onMicChange:function(e){w.setState({selectMic:e},(function(){w.state.localStream&&w.props.core.useMicrophoneDevice(w.state.localStream,e)}))},onCameraChange:function(e){w.setState({selectCamera:e},i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w.state.localStream){t.next=4;break}return t.next=3,w.props.core.useCameraDevice(w.state.localStream,e);case 3:w.setState({cameraOpen:!0});case 4:case"end":return t.stop()}}),t)}))))},onSpeakerChange:function(e){w.setState({selectSpeaker:e},(function(){w.setAllSinkId(e)}))},onVideoResolutionChange:function(e){w.setState({selectVideoResolution:e},(function(){if(w.state.localStream){var t=Z(e),r=t.width,o=t.height,n=t.bitrate,i=t.frameRate;w.props.core.setVideoConfig(w.state.localStream,{width:r,height:o,maxBitrate:n,frameRate:i})}}))},onShowNonVideoChange:function(e){w.props.core._config.showNonVideoUser=e,w.props.core.setShowNonVideo(e),w.setState({showNonVideoUser:e})}})]})})}}]),n}(e.PureComponent),ji={ZegoRoom:"ZegoRoomMobile_ZegoRoom__TjZR2",footer:"ZegoRoomMobile_footer__feV-i",switchCamera:"ZegoRoomMobile_switchCamera__mzxYh",toggleCamera:"ZegoRoomMobile_toggleCamera__wkxCh",cameraClose:"ZegoRoomMobile_cameraClose__ZSwaP",toggleMic:"ZegoRoomMobile_toggleMic__V6lKO",micClose:"ZegoRoomMobile_micClose__dACw4",leaveRoom:"ZegoRoomMobile_leaveRoom__bVCKU",liveLeaveButton:"ZegoRoomMobile_liveLeaveButton__aYVas",goLive:"ZegoRoomMobile_goLive__7FevQ",goLiveEnabled:"ZegoRoomMobile_goLiveEnabled__-Of8a",more:"ZegoRoomMobile_more__aKMmg",popMore:"ZegoRoomMobile_popMore__fj8Mv",popMoreContent:"ZegoRoomMobile_popMoreContent__IzM05",details:"ZegoRoomMobile_details__Lr35c",member:"ZegoRoomMobile_member__Wwi60",chat:"ZegoRoomMobile_chat__Fujxi",layout:"ZegoRoomMobile_layout__Zq3AP",whiteboard:"ZegoRoomMobile_whiteboard__hIAQ1",sharing:"ZegoRoomMobile_sharing__c2ktL",forbiddenSharing:"ZegoRoomMobile_forbiddenSharing__uPLBU",popMoreArray:"ZegoRoomMobile_popMoreArray__Zs4hn",notify:"ZegoRoomMobile_notify__rjei1",notifyContent:"ZegoRoomMobile_notifyContent__WWlkg",network:"ZegoRoomMobile_network__8k6tr",countDown:"ZegoRoomMobile_countDown__4o3Zq",LiveStateButton:"ZegoRoomMobile_LiveStateButton__w9zTR",LiveStateButtonNoFooter:"ZegoRoomMobile_LiveStateButtonNoFooter__o6EDR",liveNotStart:"ZegoRoomMobile_liveNotStart__kYuoy",noOneStreaming:"ZegoRoomMobile_noOneStreaming__ahBOu",screenTopBar:"ZegoRoomMobile_screenTopBar__A+C1g",mask:"ZegoRoomMobile_mask__J6zz+",host:"ZegoRoomMobile_host__i8zxZ",audience:"ZegoRoomMobile_audience__3tklO"},Hi="zegoOne2One_bigVideo__iosJd",zi="zegoOne2One_smallVideo__pHyPQ",Vi="zegoUserVideo_container__olG1Q",qi="zegoUserVideo_videoCommon__jMNYu",Gi="zegoUserVideo_hideVideo__++x6C",Zi="zegoUserVideo_noVideoWrapper__gg67h",Fi="zegoUserVideo_nameWrapper__1sKsv",Wi="zegoUserVideo_nameCircle__yqsm-",Yi="zegoUserVideo_gridCircle__qm2Mh",Qi="zegoUserVideo_sidebarCircle__eqw3A",Ki="zegoUserVideo_othersNumber__zkYay",Ji="zegoUserVideo_bigVideo__eIAh1",Xi="zegoUserVideo_name__VAu+D",$i="zegoUserVideo_micIcon__FsN6Q",es="zegoUserVideo_close__ElnXG",ts="zegoMore_more__1N8dj",rs=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e}return c(r,[{key:"render",value:function(){var e=this,t=this.context,r=t.show,o=t.showPinButton;return(0,ut.jsx)("div",{style:{display:o?"block":"none"},className:"".concat(ts," zegoMore_more"),onClick:function(){r&&r(e.props.user)}})}}]),r}(e.PureComponent);rs.contextType=io;var os=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e}return c(r,[{key:"render",value:function(){var e,t,r,o,n,i,s,a,c,u,l=this,d=null===(e=this.props.volume)||void 0===e?void 0:e[null===(t=this.props.user)||void 0===t||null===(r=t.streamList)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.streamID],h=void 0===d?7:Math.ceil(7*d/100),p=this.context.userInfo;return(0,ut.jsxs)("div",{className:"".concat(Vi," zegoUserVideo_click"),children:[this.props.user.streamList&&this.props.user.streamList[0]&&(this.props.user.streamList[0].media||this.props.user.streamList[0].urlsHttpsFLV)&&(0,ut.jsx)(Io,{muted:this.props.muted,userInfo:this.props.user,classList:"".concat(qi," zegoUserVideo_videoCommon ").concat("MUTE"===this.props.user.streamList[0].cameraStatus?Gi:""),onCanPlay:function(){l.props.onCanPlay&&l.props.onCanPlay()}}),(!this.props.user.streamList||!this.props.user.streamList[0]||"MUTE"===this.props.user.streamList[0].cameraStatus)&&(0,ut.jsx)("div",{className:"".concat(Zi,"  zegoUserVideo_click ").concat(this.props.bigVideo?Ji:""),children:(0,ut.jsx)("div",{className:"".concat(Fi," zegoUserVideo_click"),children:(0,ut.jsxs)("div",{className:"".concat(Wi,"  zegoUserVideo_click  ").concat("SIDEBAR"===this.props.circleSize?Qi:""),style:{color:q(this.props.user.userName)},children:[Y(this.props.user.userName||""),this.props.user.avatar&&(0,ut.jsx)("img",{className:"zegoUserVideo_click",src:this.props.user.avatar,onError:function(e){e.target.style.display="none"},alt:""})]},this.props.user.userID)})}),!this.props.hiddenName&&(0,ut.jsx)("div",{className:Xi,children:(0,ut.jsxs)("div",{children:[(0,ut.jsx)("p",{className:this.props.user.overScreenMuteVideo?"muteVideo":"unmuteVideo",children:this.props.user.userName}),p.userID===this.props.user.userID&&(0,ut.jsx)("span",{children:"\uff08You\uff09"}),!(null!==(n=this.props.user)&&void 0!==n&&null!==(i=n.streamList)&&void 0!==i&&null!==(s=i[0])&&void 0!==s&&s.urlsHttpsFLV)&&(0,ut.jsx)("span",{className:"".concat($i,"  ").concat(this.props.user.streamList[0]&&"OPEN"===this.props.user.streamList[0].micStatus?"":es),children:"OPEN"===(null===(a=this.props.user)||void 0===a||null===(c=a.streamList)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.micStatus)&&(0,ut.jsx)("span",{style:{height:h+"px"}})})]})}),!this.props.hiddenMore&&(0,ut.jsx)(rs,{user:this.props.user})]})}}]),r}(e.PureComponent);os.contextType=io;var ns=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){return(0,ut.jsxs)("div",{className:"".concat(Vi," zegoUserVideo_click"),children:[this.props.user.streamList&&this.props.user.streamList[0]&&(0,ut.jsx)(nn,{muted:!1,classList:qi,userInfo:this.props.user},this.props.user.streamList[0].streamID),(0,ut.jsxs)("div",{className:"".concat(Zi," zegoUserVideo_click"),children:[(0,ut.jsxs)("div",{className:"".concat(Fi," zegoUserVideo_click"),children:[(0,ut.jsxs)("div",{className:"".concat(Wi," zegoUserVideo_click  ").concat("SIDEBAR"===this.props.circleSize?Qi:Yi),style:{color:q(this.props.user.userName)},children:[Y(this.props.user.userName||""),this.props.user.avatar&&(0,ut.jsx)("img",{className:"zegoUserVideo_click",src:this.props.user.avatar,onError:function(e){e.target.style.display="none"},alt:""})]},this.props.user.userID),(0,ut.jsxs)("div",{className:"".concat(Wi,"  zegoUserVideo_click ").concat("SIDEBAR"===this.props.circleSize?Qi:Yi),style:{color:q(this.props.nextUser.userName)},children:[Y(this.props.nextUser.userName||""),this.props.nextUser.avatar&&(0,ut.jsx)("img",{src:this.props.nextUser.avatar,onError:function(e){e.target.style.display="none"},alt:""})]},this.props.nextUser.userID)]}),(0,ut.jsxs)("p",{className:Ki,children:[this.props.othersNumber," others"]})]})]})}}]),r}(e.PureComponent),is=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"getVideoScreen",value:function(){var e,t,r,o,n,i,s=this;return this.props.userList.length>1?(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsx)("div",{className:Hi,children:(0,ut.jsx)(os,{muted:(null===(e=this.props)||void 0===e||null===(t=e.selfInfo)||void 0===t?void 0:t.userID)===this.props.userList[1].userID,user:this.props.userList[1],onLocalStreamPaused:function(){s.props.onLocalStreamPaused&&s.props.onLocalStreamPaused()},volume:this.props.soundLevel[this.props.userList[1].userID]||{},bigVideo:!0})}),(0,ut.jsx)("div",{className:zi,children:(0,ut.jsx)(os,{muted:(null===(r=this.props)||void 0===r||null===(o=r.selfInfo)||void 0===o?void 0:o.userID)===this.props.userList[0].userID,volume:this.props.soundLevel[this.props.userList[0].userID]||{},user:this.props.userList[0],onLocalStreamPaused:function(){s.props.onLocalStreamPaused&&s.props.onLocalStreamPaused()}})})]}):this.props.userList.length>0?(0,ut.jsx)("div",{className:Hi,children:(0,ut.jsx)(os,{muted:(null===(n=this.props)||void 0===n||null===(i=n.selfInfo)||void 0===i?void 0:i.userID)===this.props.userList[0].userID,volume:this.props.soundLevel[this.props.userList[0].userID]||{},user:this.props.userList[0],onLocalStreamPaused:function(){s.props.onLocalStreamPaused&&s.props.onLocalStreamPaused()},bigVideo:!0})}):void 0}},{key:"render",value:function(){return(0,ut.jsx)(ut.Fragment,{children:this.getVideoScreen()})}}]),r}(e.PureComponent),ss="zegoMessage_msgList__-gWED",as="zegoMessage_msgListExpend__AkVyd",cs="zegoMessage_msgListHeader__XfxMB",us="zegoMessage_msgHide__kNJAv",ls="zegoMessage_msgListContent__a5Oat",ds="zegoMessage_msgContent__Djmfl",hs="zegoMessage_msgContentRight__8mdCT",ps="zegoMessage_msgContentRightHeader__N1MyT",fs="zegoMessage_msgContentRightBody__n2ysy",_s="zegoMessage_loading__OFw72",gs="zegoMessage_sendFailed__KSgZ0",ms="zegoMessage_self__OWEUv",vs="zegoMessage_msgFooter__3PDjk",ys="zegoMessage_readySend__aWEka",bs=function(t){l(o,t);var r=f(o);function o(t){var n;return s(this,o),(n=r.call(this,t)).state={message:"",isFocus:!1},n.sendTime=0,n.msgContentListRef=void 0,n.isIOS=x(),n.isFireFox=j(),n.onFocus=function(e){n.isIOS&&(n.isFireFox?setTimeout((function(){e.target.scrollIntoView({block:"start"}),window.scrollTo(0,0)}),50):n.setState({isFocus:!0},(function(){var e;null===(e=n.msgContentListRef.current)||void 0===e||e.scroll(0,n.msgContentListRef.current.scrollHeight-n.msgContentListRef.current.clientHeight)})))},n.onBlur=function(e){n.isIOS&&(n.isFireFox?setTimeout((function(){e.target.scrollIntoView(!1),window.scrollTo(0,0)}),50):n.setState({isFocus:!1}))},n.msgContentListRef=e.createRef(),n}return c(o,[{key:"componentDidMount",value:function(){var e;null===(e=this.msgContentListRef.current)||void 0===e||e.scroll(0,this.msgContentListRef.current.scrollHeight-this.msgContentListRef.current.clientHeight)}},{key:"componentDidUpdate",value:function(e){var t;e.messageList.length!==this.props.messageList.length&&(null===(t=this.msgContentListRef.current)||void 0===t||t.scroll(0,this.msgContentListRef.current.scrollHeight-this.msgContentListRef.current.clientHeight))}},{key:"messageInput",value:function(e){this.setState({message:e.target.value.substring(0,300)})}},{key:"handleSend",value:function(){if(this.state.message.length){var e=(new Date).getTime();if(this.sendTime>0&&this.sendTime+900>e)return Ft({content:"Message sent too fast, please send again later"}),!1;this.props.sendMessage(this.state.message),this.setState({message:""}),this.sendTime=e}}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(ss," ").concat(this.state.isFocus?as:""),children:[(0,ut.jsxs)("div",{className:cs,children:[(0,ut.jsx)("div",{className:us,onClick:function(t){t.stopPropagation(),e.props.closeCallBac()}}),"Chat"]}),(0,ut.jsx)("div",{className:ls,ref:this.msgContentListRef,children:this.props.messageList.map((function(t){var r;return(0,ut.jsxs)("div",{className:"".concat(ds," ").concat(e.props.userID===t.fromUser.userID?ms:""),children:[(0,ut.jsxs)("i",{style:{color:q(t.fromUser.userName)},children:[null===(r=t.fromUser.userName)||void 0===r?void 0:r.substring(0,1),e.props.getAvatar(t.fromUser.userID)&&(0,ut.jsx)("img",{src:e.props.getAvatar(t.fromUser.userID),onError:function(e){e.target.style.display="none"},alt:""})]}),(0,ut.jsxs)("div",{className:hs,children:[(0,ut.jsxs)("div",{className:ps,children:[(0,ut.jsx)("span",{children:t.fromUser.userName}),e.props.userID===t.fromUser.userID&&(0,ut.jsx)("a",{children:"\uff08You\uff09"}),(0,ut.jsx)("span",{children:"".concat(new Date(t.sendTime).getHours()>=12?"PM":"AM","  ").concat(z(t.sendTime,"hh:mm"))})]}),(0,ut.jsxs)("div",{className:fs,children:[t.status&&(0,ut.jsx)("i",{className:"SENDING"===t.status?_s:"SENDED"===t.status?"":gs}),(0,ut.jsx)("p",{children:t.message})]})]})]},t.messageID)}))}),(0,ut.jsxs)("div",{className:vs,children:[(0,ut.jsx)("input",{value:this.state.message,onChange:function(t){e.messageInput(t)},onFocus:this.onFocus,onBlur:this.onBlur,placeholder:"Send a message to everyone",onKeyPress:function(t){"Enter"===t.key&&e.handleSend()}}),(0,ut.jsx)("button",{className:this.state.message?ys:"",onClick:function(){e.handleSend()}})]})]})}}]),o}(e.PureComponent),Ss="zegoUserList_memberList__4-4wm",Es="zegoUserList_memberListHeader__lVMSc",Ts="zegoUserList_memberHide__f0peM",ws="zegoUserList_memberListContent__Htqrg",Cs="zegoUserList_member__Rbjbb",Is="zegoUserList_memberName__lx9cD",Os="zegoUserList_memberHandlers__KIiv0",ks="zegoUserList_memberCameraMute__Pe-jf",Rs="zegoUserList_memberCameraOpen__3-5mv",As="zegoUserList_memberMicMute__ttija",Ps="zegoUserList_memberMicOpen__kOA9J",Ls="zegoUserList_memberUnPin__aLCxg",Ns="zegoUserList_memberPined__wkFlp",Ds=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={message:""},e.context=void 0,e}return c(r,[{key:"messageInput",value:function(e){this.setState({message:e.target.value})}},{key:"isShownPin",value:function(e){var t;return(null===(t=this.props.core._config.scenario)||void 0===t?void 0:t.mode)!==g.OneONoneCall&&(this.context.showPinButton&&(this.props.core._config.showNonVideoUser||e.streamList&&e.streamList[0]&&"OPEN"===e.streamList[0].cameraStatus||e.streamList&&e.streamList[0]&&"OPEN"===e.streamList[0].micStatus&&!!this.props.core._config.showOnlyAudioUser))}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:Ss,children:[(0,ut.jsxs)("div",{className:Es,children:[(0,ut.jsx)("div",{className:Ts,onClick:function(t){t.stopPropagation(),e.props.closeCallBack()}}),"Member"]}),(0,ut.jsx)("div",{className:ws,children:this.props.userList.map((function(t){return(0,ut.jsxs)("div",{className:Cs,onClick:function(r){r.stopPropagation(),e.isShownPin(t)&&e.props.closeCallBack(t)},children:[(0,ut.jsxs)("div",{className:Is,children:[(0,ut.jsxs)("i",{style:{color:q(t.userName)},children:[Y(t.userName||""),t.avatar&&(0,ut.jsx)("img",{src:t.avatar,onError:function(e){e.target.style.display="none"},alt:""})]}),(0,ut.jsx)("a",{style:{maxWidth:e.props.core._expressConfig.userID===t.userID?"30vw":"45vw"},children:t.userName},t.userID),e.props.core._expressConfig.userID===t.userID&&(0,ut.jsx)("a",{children:"\uff08You\uff09"},t.userID+"_me")]}),(0,ut.jsxs)("div",{className:Os,children:[(0,ut.jsx)("i",{className:t.streamList&&t.streamList[0]&&"OPEN"===t.streamList[0].micStatus?Ps:As}),(0,ut.jsx)("i",{className:t.streamList&&t.streamList[0]&&"OPEN"===t.streamList[0].cameraStatus?Rs:ks}),e.isShownPin(t)&&(0,ut.jsx)("i",{className:t.pin?Ns:Ls})]})]},t.userID)}))})]})}}]),r}(e.PureComponent);Ds.contextType=io;var Ms="zegoRoomInvite_roomDetails__7vuK-",xs="zegoRoomInvite_inviteHeader__iJ0r3",Bs="zegoRoomInvite_inviteHide__kG9Dh",Us="zegoRoomInvite_inviteLinkWrapper__0nR7L",js="zegoRoomInvite_title__pqMui",Hs="zegoRoomInvite_inviteLink__28DZH",zs="zegoRoomInvite_copyLinkButton__FH3Xm",Vs=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){var e,t=this;return(0,ut.jsxs)("div",{className:Ms,children:[(0,ut.jsxs)("div",{className:xs,children:[(0,ut.jsx)("div",{className:Bs,onClick:function(e){e.stopPropagation(),t.props.closeCallBack()}}),"Room details"]}),null===(e=this.props.core._config.sharedLinks)||void 0===e?void 0:e.map((function(e){return(0,ut.jsxs)("div",{className:Us,children:[(0,ut.jsx)("div",{className:js,children:e.name}),(0,ut.jsxs)("div",{className:Hs,children:[(0,ut.jsx)("input",{placeholder:"inviteLink",readOnly:!0,value:e.url}),(0,ut.jsx)("div",{className:zs,onClick:function(t){t.stopPropagation(),e&&e.url&&k(e.url),Ft({content:"Copy successfully",duration:3e3})}})]})]},e.name)}))]})}}]),r}(e.PureComponent),qs="ZegoReconnect_container__K9CG5",Gs="ZegoReconnect_loading__4nt3-",Zs=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){return(0,ut.jsxs)("div",{className:qs,children:[(0,ut.jsx)("i",{className:Gs}),(0,ut.jsx)("p",{children:this.props.content})]})}}]),r}(e.PureComponent),Fs="zegoLayout_layoutList__tOHYr",Ws="zegoLayout_layoutHeader__hgZ3M",Ys="zegoLayout_layoutHide__ACwJ1",Qs="zegoLayout_layoutListContent__99Uok",Ks="zegoLayout_layoutContent__l8WwT",Js="zegoLayout_layoutContentLeft__my1hd",Xs="zegoLayout_selected__ydMBw",$s="zegoLayout_default__aQr0s",ea="zegoLayout_grid__--Ud5",ta="zegoLayout_sidebar__Y5KTs",ra=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={selectLayout:e.props.selectLayout||"Auto"},e.checking=!1,e}return c(r,[{key:"select",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.selectCallBack||this.checking){e.next=7;break}return this.checking=!0,this.setState({selectLayout:t}),e.next=5,this.props.selectCallBack(t);case 5:e.sent,this.checking=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:Fs,children:[(0,ut.jsxs)("div",{className:Ws,children:[(0,ut.jsx)("div",{className:Ys,onClick:function(t){t.stopPropagation(),e.props.closeCallBac&&e.props.closeCallBac()}}),"Layout"]}),(0,ut.jsxs)("div",{className:Qs,children:[(0,ut.jsxs)("div",{className:Ks,onClick:function(){e.select("Auto")},children:[(0,ut.jsxs)("div",{className:Js,children:[(0,ut.jsx)("i",{className:$s}),(0,ut.jsx)("span",{children:"Auto"})]}),(0,ut.jsx)("a",{className:"Auto"===this.state.selectLayout?Xs:"",children:" "})]}),(0,ut.jsxs)("div",{className:Ks,onClick:function(){e.select("Grid")},children:[(0,ut.jsxs)("div",{className:Js,children:[(0,ut.jsx)("i",{className:ea}),(0,ut.jsx)("span",{children:"Grid"})]}),(0,ut.jsx)("a",{className:"Grid"===this.state.selectLayout?Xs:"",children:" "})]}),(0,ut.jsxs)("div",{className:Ks,onClick:function(){e.select("Sidebar")},children:[(0,ut.jsxs)("div",{className:Js,children:[(0,ut.jsx)("i",{className:ta}),(0,ut.jsx)("span",{children:"Sidebar"})]}),(0,ut.jsx)("a",{className:"Sidebar"===this.state.selectLayout?Xs:"",children:" "})]})]})]})}}]),r}(e.PureComponent),oa="zegoManage_manageList__BMmFw",na="zegoManage_manageHeader__Sfnzo",ia="zegoManage_manageHide__A4c8e",sa="zegoManage_manageListContent__rPv+7",aa="zegoManage_manageContent__AjJYZ",ca="zegoManage_manageContentLeft__9tcXh",ua="zegoManage_selected__oDzyA",la=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"select",value:function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.selectCallBac&&this.props.selectCallBac("Pin",r);case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:oa,children:[(0,ut.jsxs)("div",{className:na,children:[this.props.selectedUser.userName,(0,ut.jsx)("div",{className:ia,onClick:function(t){t.stopPropagation(),e.props.closeCallBac&&e.props.closeCallBac()}})]}),(0,ut.jsx)("div",{className:sa,children:(0,ut.jsxs)("div",{className:aa,onClick:function(){e.select("Pin",!e.props.selectedUser.pin)},children:[(0,ut.jsxs)("div",{className:ca,children:[(0,ut.jsx)("i",{}),(0,ut.jsx)("span",{children:"Pin"})]}),(0,ut.jsx)("a",{className:this.props.selectedUser.pin?ua:"",children:" "})]})})]})}}]),r}(e.PureComponent),da={gridWrapper:"zegoGrid_gridWrapper__5cVum",double:"zegoGrid_double__S1uVd",three:"zegoGrid_three__pA+Ln",six:"zegoGrid_six__Obwd2"},ha=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){var e,t=this,r=tn((E(e={},da.gridWrapper,!0),E(e,da.double,this.props.userList.length<=2),E(e,da.three,4===this.props.userList.length||3===this.props.userList.length),E(e,da.six,this.props.userList.length>=5),e));return(0,ut.jsx)("div",{className:"".concat(r," zegoUserVideo_click"),children:this.props.userList.map((function(e,r,o){var n,i;if(o.length>t.props.videoShowNumber){if(r===t.props.videoShowNumber-1)return(0,ut.jsx)(ns,{user:e,circleSize:"GRID",nextUser:o[r+1],othersNumber:o.length-t.props.videoShowNumber+1},r);if(r>t.props.videoShowNumber-1)return e.streamList&&e.streamList[0]&&(0,ut.jsx)(nn,{muted:!1,classList:da.videoCommon,userInfo:e},r+"_audio_"+e.userID)}return(0,ut.jsx)(os,{muted:(null===(n=t.props)||void 0===n||null===(i=n.selfInfo)||void 0===i?void 0:i.userID)===e.userID,volume:t.props.soundLevel[e.userID]||{},user:e},e.userID+"_video")}))})}}]),r}(e.PureComponent),pa="zegoSidebar_sidebarWrapper__BD9sG",fa="zegoSidebar_bottomWrapper__undgQ",_a="zegoSidebar_screenLoadingWrapper__Mdjxx",ga="zegoSidebar_upWrapper__C5Pnp",ma="zegoSidebar_fullScreen__NcAhg",va="zegoSidebar_videoCommon__GDLyy",ya=function(e){l(r,e);var t=f(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"userList",get:function(){var e=this;return this.props.userList.filter((function(t){return t.userID!==e.pinUser.userID}))}},{key:"pinUser",get:function(){var e=this,t=this.props.userList.findIndex((function(e){return e.pin}));if(t>-1)return this.props.userList[t];var r=this.props.userList.filter((function(t){var r;return t.userID!==(null===(r=e.props.selfInfo)||void 0===r?void 0:r.userID)}));return r[r.length-1]}},{key:"render",value:function(){var e,t,r=this;return(0,ut.jsxs)("div",{className:pa,children:[(0,ut.jsx)("div",{className:ga,children:this.userList.map((function(e,t,o){var n,i;if(o.length>r.props.videoShowNumber-1){if(t===r.props.videoShowNumber-2)return(0,ut.jsx)(ns,{user:e,circleSize:"SIDEBAR",nextUser:o[t+1],othersNumber:r.props.userList.length-r.props.videoShowNumber+1},e.userID+"_otherVideo");if(t>r.props.videoShowNumber-2)return e.streamList&&e.streamList[0]&&(0,ut.jsx)(nn,{muted:!1,classList:va,userInfo:e},t+"_audio_"+e.userID)}return(0,ut.jsx)(os,{muted:(null===(n=r.props)||void 0===n||null===(i=n.selfInfo)||void 0===i?void 0:i.userID)===e.userID,user:e,circleSize:"SIDEBAR",volume:r.props.soundLevel[e.userID]||{}},e.userID+"_video")}))}),(0,ut.jsxs)("div",{className:fa,children:[(0,ut.jsx)(os,{muted:(null===(e=this.props)||void 0===e||null===(t=e.selfInfo)||void 0===t?void 0:t.userID)===this.pinUser.userID,user:this.pinUser,volume:this.props.soundLevel[this.pinUser.userID]||{}},this.pinUser.userID+"_video"),";"]})]})}}]),r}(e.PureComponent),ba=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={loading:!0},e}return c(r,[{key:"onCanPlay",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){var e,t,r=this;return(0,ut.jsxs)("div",{className:"".concat(pa," ").concat(0===this.props.userList.length?ma:""),children:[(0,ut.jsx)("div",{className:ga,children:this.props.userList.map((function(e,t,o){var n,i;if(o.length>r.props.videoShowNumber-1){if(t===r.props.videoShowNumber-2)return(0,ut.jsx)(ns,{user:e,circleSize:"SIDEBAR",nextUser:o[t+1],othersNumber:o.length-r.props.videoShowNumber+2},e.userID+"_otherVideo");if(t>r.props.videoShowNumber-2)return e.streamList&&e.streamList[0]&&(0,ut.jsx)(nn,{muted:!1,classList:va,userInfo:e},t+"_audio_"+e.userID)}return(0,ut.jsx)(os,{muted:(null===(n=r.props)||void 0===n||null===(i=n.selfInfo)||void 0===i?void 0:i.userID)===e.userID,user:e,circleSize:"SIDEBAR",volume:r.props.soundLevel[e.userID]||{}},e.userID+"_video")}))}),(0,ut.jsxs)("div",{className:fa,children:[(0,ut.jsx)(os,{muted:(null===(e=this.props)||void 0===e||null===(t=e.selfInfo)||void 0===t?void 0:t.userID)===this.props.screenSharingUser.userID,user:this.props.screenSharingUser,volume:{},onCanPlay:function(){r.onCanPlay()},hiddenMore:!0,hiddenName:!0},this.props.screenSharingUser.userID+"_video"),this.state.loading&&(0,ut.jsxs)("div",{className:_a,children:[(0,ut.jsx)("span",{}),(0,ut.jsx)("p",{children:this.props.screenSharingUser.userName+" is presenting the screen"})]})]})]})}}]),r}(e.PureComponent),Sa="zegoWhiteboard_upWrapper__ZDDRf",Ea="zegoWhiteboard_whiteboardWrapper__SuusJ",Ta="zegoWhiteboard_top__WttFx",wa="zegoWhiteboard_toolLeft__lsquP",Ca="zegoWhiteboard_undo__uuBL0",Ia="zegoWhiteboard_redo__QVfOS",Oa="zegoWhiteboard_active__E5HKj",ka="zegoWhiteboard_stop__1co4n",Ra="zegoWhiteboard_content__-v9X5",Aa="zegoWhiteboard_page__pHJbE",Pa="zegoWhiteboard_page_sub__myIn3",La="zegoWhiteboard_page_add__zJApP",Na="zegoWhiteboard_page_value__xDVBf",Da="zegoWhiteboard_page_value_total__vF9pY",Ma="ZegoWhiteboardTools_tools__70e1r",xa="ZegoWhiteboardTools_tool_select__3o9gW",Ba="ZegoWhiteboardTools_tool_drag__OQImM",Ua="ZegoWhiteboardTools_tool_pen__Jnqfm",ja="ZegoWhiteboardTools_tool_text__+LRar",Ha="ZegoWhiteboardTools_tool_react__7i7kL",za="ZegoWhiteboardTools_tool_image__B3A8Y",Va="ZegoWhiteboardTools_tool_eraser__RNDac",qa="ZegoWhiteboardTools_tool_delete__Z0caS",Ga="ZegoWhiteboardTools_tool_hide__eoE-C",Za="ZegoWhiteboardTools_tool_show__J1h9X",Fa="ZegoWhiteboardTools_selected__LrBYU",Wa="ZegoWhiteboardToolsPenToolTips_penTools__jUF3y",Ya="ZegoWhiteboardToolsPenToolTips_penTools_bold__llPeH",Qa="ZegoWhiteboardToolsPenToolTips_penTools_color__UkXmW",Ka="ZegoWhiteboardToolsPenToolTips_selected__AheMz",Ja=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={fontColor:"",fontSize:0},e}return c(r,[{key:"OnDocumentClick",value:function(e){(e.path||e.composedPath()).some((function(e){return console.log(e.className),e.className&&e.className.includes("ZegoWhiteboardToolsPenToolTips")}))||this.props.onClose()}},{key:"componentDidMount",value:function(){this.setState({fontColor:this.context.whiteboard_brushColor,fontSize:this.context.whiteboard_brushSize}),window.document.addEventListener("click",this.OnDocumentClick.bind(this))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this.OnDocumentClick)}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(Wa," ZegoWhiteboardToolsPenToolTips"),children:[(0,ut.jsxs)("div",{className:Ya,children:[(0,ut.jsx)("h3",{children:"Thickness"}),(0,ut.jsx)("ul",{children:[4,6,8,10].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({fontSize:t}),e.props.onToolChange(t,e.context.whiteboard_brushColor)},children:(0,ut.jsx)("i",{className:e.state.fontSize===t?Ka:"",style:{width:t,height:t}})},t)}))})]}),(0,ut.jsxs)("div",{className:Qa,children:[(0,ut.jsx)("h3",{children:"Color"}),(0,ut.jsx)("ul",{children:["#FFFFFF","#A4A4A4","#333333","#000000","#F64326","#FD7803","#FBE605","#3FBB54","#00EAE7","#0484FE","#825FD0","#FB7D7D"].map((function(t){return(0,ut.jsx)("li",{style:{backgroundColor:t},onClick:function(r){e.setState({fontColor:t}),e.props.onToolChange(e.context.whiteboard_brushSize,t)},className:e.state.fontColor===t?Ka:""},t)}))})]})]})}}]),r}(e.PureComponent);Ja.contextType=io;var Xa="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools__qq2tm",$a="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools_react__U33Nn",ec="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools_bold__CDDBM",tc="ZegoWhiteboardToolsGraphicsTooTips_graphicsTools_color__j5P9W",rc="ZegoWhiteboardToolsGraphicsTooTips_selected__79+DG",oc=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={fontColor:"",react:0,fontSize:0},e}return c(r,[{key:"OnDocumentClick",value:function(e){(e.path||e.composedPath()).some((function(e){return console.log(e.className),e.className&&e.className.includes("ZegoWhiteboardToolsGraphicsTooTips")}))||this.props.onClose()}},{key:"componentDidMount",value:function(){this.setState({fontColor:this.context.whiteboard_brushColor,react:8,fontSize:this.context.whiteboard_brushSize}),this.props.onToolChange(8,this.context.whiteboard_brushSize,this.context.whiteboard_brushColor),window.document.addEventListener("click",this.OnDocumentClick.bind(this))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this.OnDocumentClick)}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(Xa," ZegoWhiteboardToolsGraphicsTooTips"),children:[(0,ut.jsxs)("div",{className:$a,children:[(0,ut.jsx)("h3",{children:"Shape"}),(0,ut.jsx)("ul",{children:[8,16,4].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({react:t}),e.props.onToolChange(t,e.context.whiteboard_brushSize,e.context.whiteboard_brushColor)},className:e.state.react===t?rc:""},t)}))})]}),(0,ut.jsxs)("div",{className:ec,children:[(0,ut.jsx)("h3",{children:"Thickness"}),(0,ut.jsx)("ul",{children:[4,6,8,12].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({fontSize:t}),e.props.onToolChange(e.context.whiteboard_toolType,t,e.context.whiteboard_brushColor)},children:(0,ut.jsx)("i",{className:e.state.fontSize===t?rc:"",style:{width:t,height:t}})},t)}))})]}),(0,ut.jsxs)("div",{className:tc,children:[(0,ut.jsx)("h3",{children:"Color"}),(0,ut.jsx)("ul",{children:["#FFFFFF","#A4A4A4","#333333","#000000","#F64326","#FD7803","#FBE605","#3FBB54","#00EAE7","#0484FE","#825FD0","#FB7D7D"].map((function(t){return(0,ut.jsx)("li",{style:{backgroundColor:t},onClick:function(r){e.setState({fontColor:t}),e.props.onToolChange(e.context.whiteboard_toolType,e.context.whiteboard_brushSize,t)},className:e.state.fontColor===t?rc:""},t)}))})]})]})}}]),r}(e.PureComponent);oc.contextType=io;var nc="ZegoWhiteboardToolsTextToolTips_textTools__2slql",ic="ZegoWhiteboardToolsTextToolTips_textTools_font__K46XQ",sc="ZegoWhiteboardToolsTextToolTips_textTools_size__1Ew+g",ac="ZegoWhiteboardToolsTextToolTips_textTools_color__UsKqo",cc="ZegoWhiteboardToolsTextToolTips_selected__U+xn3",uc={12:18,14:24,16:36,18:48},lc={18:12,24:14,36:16,48:18},dc=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={font:"",fontColor:"",fontSize:0,isFontBold:!1,isFontItalic:!1},e}return c(r,[{key:"OnDocumentClick",value:function(e){(e.path||e.composedPath()).some((function(e){return console.log(e.className),e.className&&e.className.includes("ZegoWhiteboardToolsTextToolTips")}))||this.props.onClose()}},{key:"componentDidMount",value:function(){this.setState({isFontBold:this.context.whiteboard_isFontBold,isFontItalic:this.context.whiteboard_isFontItalic,fontColor:this.context.whiteboard_brushColor,fontSize:lc[this.context.whiteboard_fontSize]}),window.document.addEventListener("touchstart",this.OnDocumentClick.bind(this))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("touchstart",this.OnDocumentClick)}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(nc," ZegoWhiteboardToolsTextToolTips"),children:[(0,ut.jsxs)("div",{className:ic,children:[(0,ut.jsx)("h3",{children:"Font"}),(0,ut.jsx)("ul",{children:["BOLD","ITALIC"].map((function(t){return(0,ut.jsx)("li",{onClick:function(){var r;"BOLD"===t?(r=e.state.isFontBold?"NO_BOLD":"BOLD",e.setState((function(e){return{isFontBold:!e.isFontBold}}))):"ITALIC"===t&&(r=e.state.isFontItalic?"NO_ITALIC":"ITALIC",e.setState((function(e){return{isFontItalic:!e.isFontItalic}}))),e.props.onFontChange(r,e.context.whiteboard_fontSize,e.context.whiteboard_brushColor)},className:"BOLD"===t&&e.state.isFontBold||"ITALIC"===t&&e.state.isFontItalic?cc:"",style:{fontStyle:t}},t)}))})]}),(0,ut.jsxs)("div",{className:sc,children:[(0,ut.jsx)("h3",{children:"Thickness"}),(0,ut.jsx)("ul",{children:[12,14,16,18].map((function(t){return(0,ut.jsx)("li",{onClick:function(r){e.setState({fontSize:t}),e.props.onFontChange(void 0,uc[t],e.context.whiteboard_brushColor)},className:e.state.fontSize===t?cc:"",style:{fontSize:t+"px"},children:"A"},t)}))})]}),(0,ut.jsxs)("div",{className:ac,children:[(0,ut.jsx)("h3",{children:"Color"}),(0,ut.jsx)("ul",{children:["#FFFFFF","#A4A4A4","#333333","#000000","#F64326","#FD7803","#FBE605","#3FBB54","#00EAE7","#0484FE","#825FD0","#FB7D7D"].map((function(t){return(0,ut.jsx)("li",{style:{backgroundColor:t},onClick:function(r){e.setState({fontColor:t}),e.props.onFontChange(void 0,e.context.whiteboard_fontSize,t)},className:e.state.fontColor===t?cc:""},t)}))})]})]})}}]),r}(e.PureComponent);dc.contextType=io;var hc=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).context=void 0,e.state={hideTools:!0,selectedTool:3,showTextTools:!1,showFontTools:!1,showGraphicsTools:!1},e}return c(r,[{key:"showTool",value:function(e){return!this.state.hideTools||this.state.selectedTool===e}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:Ma,children:[this.showTool(1)&&(0,ut.jsx)("div",{className:"".concat(xa," ").concat(1===this.state.selectedTool?Fa:""),onClick:function(){e.setState({selectedTool:1}),e.props.onToolChange(32)}}),this.showTool(2)&&(0,ut.jsx)("div",{className:"".concat(Ba," ").concat(2===this.state.selectedTool?Fa:""),onClick:function(){e.setState({selectedTool:2}),e.props.onToolChange(0)}}),this.showTool(3)&&(0,ut.jsx)("div",{className:"ZegoWhiteboardToolsPenToolTips ".concat(Ua," ").concat(3===this.state.selectedTool?Fa:""),onClick:function(){e.setState({selectedTool:3,showFontTools:!0}),e.props.onToolChange(1)},children:this.state.showFontTools&&(0,ut.jsx)(Ja,{onToolChange:function(t,r){e.props.onToolChange(1,t,r)},onClose:function(){e.setState({showFontTools:!1})}})}),this.showTool(4)&&(0,ut.jsx)("div",{className:"ZegoWhiteboardToolsTextToolTips ".concat(ja," ").concat(4===this.state.selectedTool?Fa:""),onClick:function(){e.setState({selectedTool:4,showTextTools:!0}),e.props.onToolChange(2)},children:this.state.showTextTools&&(0,ut.jsx)(dc,{onFontChange:function(t,r,o){e.props.onFontChange(t,r,o)},onClose:function(){e.setState({showTextTools:!1})}})}),this.showTool(5)&&(0,ut.jsx)("div",{className:"ZegoWhiteboardToolsGraphicsTooTips ".concat(Ha," ").concat(5===this.state.selectedTool?Fa:""),onClick:function(){e.setState({selectedTool:5,showGraphicsTools:!0}),![4,8,16].includes(e.context.whiteboard_toolType)&&e.props.onToolChange(16)},children:this.state.showGraphicsTools&&(0,ut.jsx)(oc,{onToolChange:function(t,r,o){e.props.onToolChange(t,r,o)},onClose:function(){e.setState({showGraphicsTools:!1})}})}),this.showTool(6)&&this.context.whiteboard_showAddImage&&(0,ut.jsx)("div",{className:"".concat(za," ").concat(6===this.state.selectedTool?Fa:""),onClick:function(){Q((function(t){e.props.onAddImage(t)}))}}),this.showTool(7)&&(0,ut.jsx)("div",{className:"".concat(Va," ").concat(7===this.state.selectedTool?Fa:""),onClick:function(){e.setState({selectedTool:7}),e.props.onToolChange(64)}}),this.showTool(8)&&(0,ut.jsx)("div",{className:"".concat(qa," ").concat(8===this.state.selectedTool?Fa:""),onClick:function(){e.props.onToolChange(512)}}),this.showTool(9)&&!1,(0,ut.jsx)("p",{}),(0,ut.jsx)("div",{className:this.state.hideTools?Za:Ga,onClick:function(){e.setState((function(e){return{hideTools:!e.hideTools}}))}})]})}}]),r}(e.PureComponent);function pc(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function fc(e,t){var r=e.x-t.x,o=e.y-t.y;return Math.hypot(r,o)}hc.contextType=io;var _c=function(){function e(){s(this,e),this.isPointerdown=!1,this.pointers=[],this.point1={x:0,y:0},this.point2={x:0,y:0},this.diff={x:0,y:0},this.lastPointermove={x:0,y:0},this.lastPoint1={x:0,y:0},this.lastPoint2={x:0,y:0},this.lastCenter={x:0,y:0},this.dom=void 0,this.x=0,this.y=0,this.scale=1,this.maxScale=3,this.minScale=1,this.callBack=void 0}return c(e,[{key:"addDomListener",value:function(e,t){e&&t?(this.callBack=t,this.dom=e,this.pointerDown(),this.pointerMove(),this.pointerUp(),this.pointerCancel()):console.error("\u3010ZEGOCLOUD\u3011call addDomListener: parameter dom and callBack are required")}},{key:"pointerDown",value:function(){var e=this;this.dom.addEventListener("pointerdown",(function(t){e.pointers.push(t),e.point1={x:e.pointers[0].clientX,y:e.pointers[0].clientY},e.lastPoint1={x:e.pointers[0].clientX,y:e.pointers[0].clientY},1===e.pointers.length?(e.isPointerdown=!0,e.dom.setPointerCapture(t.pointerId),e.lastPointermove={x:e.pointers[0].clientX,y:e.pointers[0].clientY}):2===e.pointers.length&&(e.point2={x:e.pointers[1].clientX,y:e.pointers[1].clientY},e.lastPoint2={x:e.pointers[1].clientX,y:e.pointers[1].clientY},e.lastCenter=pc(e.point1,e.point2))}))}},{key:"pointerMove",value:function(){var e=this;this.dom.addEventListener("pointermove",(function(t){if(e.isPointerdown){e.handlePointers(t,"update");var r={x:e.pointers[0].clientX,y:e.pointers[0].clientY};if(1===e.pointers.length)e.diff.x=r.x-e.lastPointermove.x,e.diff.y=r.y-e.lastPointermove.y,e.lastPointermove={x:r.x,y:r.y};else if(2===e.pointers.length){var o={x:e.pointers[1].clientX,y:e.pointers[1].clientY},n=fc(r,o)/fc(e.lastPoint1,e.lastPoint2),i=e.scale*n;i>e.maxScale?(e.scale=e.maxScale,n=e.maxScale/e.scale):i<e.minScale?(e.scale=e.minScale,n=e.minScale/e.scale):e.scale=i;var s=pc(r,o),a={x:(n-1)*e.dom.clientWidth*.5,y:(n-1)*e.dom.clientHeight*.5};e.x-=(n-1)*(s.x-e.x)-a.x-(s.x-e.lastCenter.x),e.y-=(n-1)*(s.y-e.y)-a.y-(s.y-e.lastCenter.y),e.lastCenter={x:s.x,y:s.y},e.lastPoint1={x:r.x,y:r.y},e.lastPoint2={x:o.x,y:o.y}}e.callBack(e.x,e.y,e.scale)}t.preventDefault()}))}},{key:"pointerUp",value:function(){var e=this;this.dom.addEventListener("pointerup",(function(t){e.isPointerdown&&(e.handlePointers(t,"delete"),0===e.pointers.length?e.isPointerdown=!1:1===e.pointers.length&&(e.point1={x:e.pointers[0].clientX,y:e.pointers[0].clientY},e.lastPointermove={x:e.pointers[0].clientX,y:e.pointers[0].clientY}))}))}},{key:"pointerCancel",value:function(){var e=this;this.dom.addEventListener("pointercancel",(function(t){e.isPointerdown&&(e.isPointerdown=!1,e.pointers.length=0)}))}},{key:"handlePointers",value:function(e,t){for(var r=0;r<this.pointers.length;r++)this.pointers[r].pointerId===e.pointerId&&("update"===t?this.pointers[r]=e:"delete"===t&&this.pointers.splice(r,1))}}]),e}(),gc=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).container=null,e.containerWidth=0,e.containerHeight=0,e.state={currentZoom:100},e.context=void 0,e}return c(r,[{key:"componentDidMount",value:function(){var e,t,r=null===(e=this.props.zegoSuperBoardView)||void 0===e||null===(t=e.getCurrentSuperBoardSubView())||void 0===t?void 0:t.getScaleFactor().scaleFactor;this.setState({currentZoom:r?100*r:100})}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(pa," ").concat(0===this.props.userList.length?ma:""),style:{padding:0},children:[(0,ut.jsx)("div",{className:"".concat(ga," ").concat(Sa," zegoUserVideo_click"),children:this.props.userList.map((function(t,r,o){var n,i;if(o.length>e.props.videoShowNumber-1){if(r===e.props.videoShowNumber-2)return(0,ut.jsx)(ns,{user:t,circleSize:"SIDEBAR",nextUser:o[r+1],othersNumber:o.length-e.props.videoShowNumber+2},t.userID+"_otherVideo");if(r>e.props.videoShowNumber-2)return t.streamList&&t.streamList[0]&&(0,ut.jsx)(nn,{muted:!1,classList:va,userInfo:t},r+"_audio_"+t.userID)}return(0,ut.jsx)(os,{muted:(null===(n=e.props)||void 0===n||null===(i=n.selfInfo)||void 0===i?void 0:i.userID)===t.userID,user:t,circleSize:"SIDEBAR",volume:e.props.soundLevel[t.userID]||{}},t.userID+"_video")}))}),(0,ut.jsxs)("div",{className:"".concat(fa," ").concat(Ea," zegoUserVideo_click"),children:[(0,ut.jsxs)("div",{className:"".concat(Ta," zegoUserVideo_click"),children:[(0,ut.jsxs)("div",{className:wa,children:[(0,ut.jsx)("div",{className:Ca,onClick:function(){var t,r;null===(t=e.props.zegoSuperBoardView)||void 0===t||null===(r=t.getCurrentSuperBoardSubView())||void 0===r||r.undo()}}),(0,ut.jsx)("div",{className:Ia,onClick:function(){var t,r;null===(t=e.props.zegoSuperBoardView)||void 0===t||null===(r=t.getCurrentSuperBoardSubView())||void 0===r||r.redo()}})]}),(0,ut.jsx)("div",{className:ka,onClick:function(){e.props.onclose()},children:"Stop Presenting"})]}),(0,ut.jsx)("div",{className:"".concat(Ra," zegoUserVideo_click"),id:"ZegoCloudWhiteboardContainer",ref:function(t){t&&(e.container?t.clientWidth&&t.clientHeight&&(t.clientWidth!=e.containerWidth||t.clientHeight!=e.containerHeight)&&(e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.props.onResize(t)):(e.container=t,e.containerHeight=t.clientHeight,e.containerWidth=t.clientWidth,e.props.onShow(t),(new _c).addDomListener(t,(function(t,r,o){var n,i;null===(n=e.props.zegoSuperBoardView)||void 0===n||null===(i=n.getCurrentSuperBoardSubView())||void 0===i||i.setScaleFactor(o/1)}))))}}),(0,ut.jsx)("div",{className:Aa,children:(0,ut.jsxs)("div",{children:[(0,ut.jsx)("a",{className:"".concat(Pa,"  ").concat(this.context.whiteboard_page&&this.context.whiteboard_page>1?Oa:""),onClick:function(){var t,r;null===(t=e.props.zegoSuperBoardView)||void 0===t||null===(r=t.getCurrentSuperBoardSubView())||void 0===r||r.flipToPrePage()}}),(0,ut.jsx)("span",{className:Na,children:this.context.whiteboard_page}),(0,ut.jsx)("span",{className:Da,children:"/5"}),(0,ut.jsx)("a",{className:"".concat(La," ").concat(this.context.whiteboard_page&&this.context.whiteboard_page<5?Oa:""),onClick:function(){var t,r;null===(t=e.props.zegoSuperBoardView)||void 0===t||null===(r=t.getCurrentSuperBoardSubView())||void 0===r||r.flipToNextPage()}})]})}),(0,ut.jsx)(hc,{onToolChange:function(t,r,o){e.props.onToolChange(t,r,o)},onFontChange:function(t,r,o){e.props.onFontChange(t,r,o)},onAddImage:function(){var t=i(o().mark((function t(r){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Mi({contentText:"The picture is being uploaded"}),t.next=3,null===(n=e.props.zegoSuperBoardView)||void 0===n||null===(i=n.getCurrentSuperBoardSubView())||void 0===i?void 0:i.addImage(0,10,10,r,(function(e){xi(),Ft({content:"add Image Success!!"})})).catch((function(e){xi(),console.error("onAddImage:",e),60022==e.code?Ft({content:"Failed to add image, this feature is not supported."}):3130009==e.code?Ft({content:"Failed to add image, Unsupported image type."}):Ft({content:"Failed to add image, error code:"+e.code})}));case 3:t.sent,xi(),e.props.onImageAdd&&e.props.onImageAdd();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSnapshot:function(){var t,r=null===(t=e.props.zegoSuperBoardView)||void 0===t?void 0:t.getCurrentSuperBoardSubView();null===r||void 0===r||r.snapshot().then((function(e){var t=document.createElement("a");t.href=e.image,t.download="snapshot.png",t.click()}))}})]})]})}}]),r}(e.PureComponent);gc.contextType=io;var mc=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={micOpen:!!e.props.core._config.turnOnMicrophoneWhenJoining,cameraOpen:!!e.props.core._config.turnOnCameraWhenJoining,localStream:void 0,layOutStatus:"ONE_VIDEO",userLayoutStatus:e.props.core._config.layout||"Auto",zegoCloudUserList:[],memberList:[],messageList:[],notificationList:[],showMore:!1,connecting:!1,firstLoading:!0,cameraFront:!0,showFooter:!0,isNetworkPoor:!1,soundLevel:{},liveCountdown:-1,liveStatus:"0",screenSharingUserList:[],zegoSuperBoardView:null,isZegoWhiteboardSharing:!1},e.micStatus=e.props.core._config.turnOnMicrophoneWhenJoining?1:0,e.cameraStatus=e.props.core._config.turnOnCameraWhenJoining?1:0,e.localUserPin=!1,e.faceModel="user"===e.props.core._config.facingMode?1:0,e.notifyTimer=null,e.footerTimer=void 0,e.cameraDevices=[],e.userUpdateCallBack=function(){},e.localStreamID="",e.safariLimitationNoticed=-1,e.iosLimitationNoticed=0,e.showNotSupported=0,e.onblur=function(t){!t.path||t.path.includes(document.querySelector("#ZegoRoomCssMobileMore"))||t.path.includes(document.querySelector("#ZegoRoomCssMobilePopMore"))||(e.setState({showMore:!1}),document.removeEventListener("click",e.onblur))},e._selectedUser=void 0,e.isCreatingWhiteboardSharing=!1,e}return c(r,[{key:"isCDNLive",get:function(){var e,t;return(null===(e=this.props.core._config.scenario)||void 0===e?void 0:e.mode)===g.LiveStreaming&&(null===(t=this.props.core._config.scenario.config)||void 0===t?void 0:t.role)===_.Audience&&this.props.core._config.scenario.config.liveStreamingMode===v.StandardLive}},{key:"componentDidMount",value:function(){var e=this;this.initSDK(),this.footerTimer=setTimeout((function(){e.setState({showFooter:!1})}),5e3)}},{key:"componentWillUnmount",value:function(){this.state.localStream&&this.props.core.destroyStream(this.state.localStream)}},{key:"componentDidUpdate",value:function(e,t){var r=this;(t.notificationList.length>0&&this.state.notificationList.length>0&&t.notificationList[t.notificationList.length-1].messageID!==this.state.notificationList[this.state.notificationList.length-1].messageID||0===t.notificationList.length&&this.state.notificationList.length>0)&&(this.notifyTimer&&(clearTimeout(this.notifyTimer),this.notifyTimer=null),this.notifyTimer=setTimeout((function(){r.setState({notificationList:[]})}),3e3))}},{key:"initSDK",value:function(){var e=i(o().mark((function e(){var t,r,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.core.onNetworkStatusQuality((function(e,t){n.setState({isNetworkPoor:t>2})})),this.props.core.onNetworkStatus((function(e,t,r){"DISCONNECTED"===r?(n.setState({connecting:!1,firstLoading:!1}),n.props.core.leaveRoom(),n.props.leaveRoom&&n.props.leaveRoom()):"CONNECTING"===r?n.setState({connecting:!0}):"CONNECTED"===r&&n.setState({connecting:!1,firstLoading:!1})})),this.props.core.onRemoteUserUpdate((function(e,t,r){var o,i=[];null!==(o=n.props.core._config.lowerLeftNotification)&&void 0!==o&&o.showUserJoinAndLeave&&r.map((function(e){i.push({content:e.userName+" "+("ADD"===t?"enter":"quite")+" the room",type:"USER",userName:e.userName,messageID:D(5)})})),n.setState((function(e){return{notificationList:[].concat(O(e.notificationList),i)}}))})),this.props.core.onRoomMessageUpdate((function(e,t){n.setState((function(e){var r,o=[];return"MESSAGE"!==n.state.layOutStatus&&null!==(r=n.props.core._config.lowerLeftNotification)&&void 0!==r&&r.showTextChat&&(o=[].concat(O(e.notificationList),O(t.map((function(e){return{content:e.message,type:"MSG",userName:e.fromUser.userName,messageID:e.messageID}}))))),{messageList:[].concat(O(e.messageList),O(t)),notificationList:o}}))})),this.props.core.subscribeUserList((function(e){n.userUpdateCallBack();var t=!M()&&x()&&H()&&e.filter((function(e){return e.streamList.length>0&&"OPEN"===e.streamList[0].micStatus})).length>(n.state.screenSharingUserList.length>0?0:1);if(n.isCDNLive){var r=JSON.parse(JSON.stringify(e)),o=r.filter((function(e){return e.streamList.length>0&&("OPEN"===e.streamList[0].cameraStatus||"OPEN"===e.streamList[0].micStatus)})).length,i=1;if(n.isCDNLive&&!x()&&(i=n.state.screenSharingUserList.length>0?5:6),o>i){var s=0,a=r.reverse().map((function(e){return e.streamList.length>0&&("OPEN"===e.streamList[0].cameraStatus||"OPEN"===e.streamList[0].micStatus)&&(s>=i?e.streamList=[]:s++),e})),c=a.reverse();return n.setState({zegoCloudUserList:a,memberList:c},(function(){n.handleLayoutChange(n.state.userLayoutStatus)})),void(x()&&n.isCDNLive&&0===n.iosLimitationNoticed&&(n.iosLimitationNoticed=1,Et({header:"Notice",contentText:"Your current mobile system does not support the display of multiple video screens during the live streaming.",okText:"Okay"})))}}else if(t){var u=e.reverse().find((function(e){return e.streamList.length>0&&"OPEN"===e.streamList[0].micStatus}));return n.setState({zegoCloudUserList:[u],memberList:e,screenSharingUserList:[]}),void(-1===n.safariLimitationNoticed&&(n.safariLimitationNoticed=0,Et({header:"Notice",contentText:"The current browser does not support the display of multiple video screens, we suggest you change your browser.",okText:"Okay",onOk:function(){n.safariLimitationNoticed=1,n.handleLayoutChange(n.state.userLayoutStatus)}})))}n.setState({zegoCloudUserList:e,memberList:e})})),this.props.core.subscribeWhiteBoard((function(e){n.setState({zegoSuperBoardView:e,isZegoWhiteboardSharing:!!e})})),this.props.core.subscribeScreenStream((function(e){var t=!M()&&x()&&(H()||n.isCDNLive)&&n.state.zegoCloudUserList.filter((function(e){return e.streamList.length>0&&("OPEN"===e.streamList[0].micStatus||"OPEN"===e.streamList[0].cameraStatus)})).length>0;n.setState({screenSharingUserList:t?[]:e},(function(){n.handleLayoutChange(n.state.userLayoutStatus)}))})),this.props.core.onSoundLevelUpdate((function(e){var t={};e.forEach((function(e){var r=e.streamID.split("_")[1];t[r]?t[r][e.streamID]=Math.floor(e.soundLevel):t[r]=E({},e.streamID,Math.floor(e.soundLevel))})),n.setState({soundLevel:t})})),this.props.core.onRoomLiveStateUpdate((function(e){n.setState((function(t){return{liveStatus:e,liveCountdown:-1===t.liveCountdown||0==t.liveCountdown?"1"==e?0:-1:t.liveCountdown}}),(function(){console.error("\u3010ZEGOCLOUD\u3011 liveStatus",n.state.liveStatus)}))})),this.props.core.onCoreError((function(e,t){if(e===b.notSupportStandardLive||e===b.notSupportCDNLive){if(n.showNotSupported)return;n.showNotSupported=1,Et({header:"Notice",contentText:"The service is not available, please contact the live streaming service provider to resolve.",okText:"Okay"},document.querySelector(".".concat(ji.ZegoRoom)))}})),e.next=12,this.props.core.enterRoom();case 12:if(t=e.sent,r="",0!==t){e.next=20;break}return this.createStream(),setTimeout(i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.props.core._config.showMyCameraToggleButton,!e.t0){e.next=5;break}return e.next=4,n.props.core.getCameras();case 4:n.cameraDevices=e.sent;case 5:case"end":return e.stop()}}),e)}))),4e3),e.abrupt("return");case 20:r=1002034===t?"Failed to join the room, the number of people in the room has reached the maximum.(2 people)":[1002031,1002053].includes(t)?"There's something wrong with your network. Please check it and try again.":[1102018,1102016,1102020].includes(t)?"Failed to join the room, token authentication error.":1002056===t?"You are on a call in another room, please leave that room first.":"Failed to join the room, please try again.(error code:"+t+")";case 21:Et({header:"Login room Failed",contentText:r,okText:"OK"});case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createStream",value:function(){var e=i(o().mark((function e(){var t,r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.core._config.turnOnCameraWhenJoining||this.props.core._config.turnOnMicrophoneWhenJoining||this.props.core._config.showMyCameraToggleButton||this.props.core._config.showMyMicrophoneToggleButton){e.next=2;break}return e.abrupt("return",!1);case 2:if(this.props.core.status.videoRefuse&&this.props.core.status.audioRefuse){e.next=34;break}return e.prev=3,t=null,e.prev=5,r=Z(this.props.core._config.videoResolutionList[0]),e.next=9,this.props.core.createStream({camera:w({video:!this.props.core.status.videoRefuse,audio:!this.props.core.status.audioRefuse,videoQuality:4,facingMode:this.faceModel?"user":"environment"},r)});case 9:t=e.sent,e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(5),!JSON.stringify(e.t0).includes("constrain")){e.next=18;break}return e.next=17,this.props.core.createStream({camera:{video:!this.props.core.status.videoRefuse,audio:!this.props.core.status.audioRefuse,facingMode:this.faceModel?"user":"environment"}});case 17:t=e.sent;case 18:if(t){e.next=20;break}return e.abrupt("return",!1);case 20:return this.props.core.mutePublishStreamVideo(t,!this.props.core._config.turnOnCameraWhenJoining),this.props.core.muteMicrophone(!this.props.core._config.turnOnMicrophoneWhenJoining),this.setState({localStream:t}),!1!==(n=this.props.core.publishLocalStream(t))&&(this.localStreamID=n,this.props.core.setStreamExtraInfo(n,JSON.stringify({isCameraOn:!!this.props.core._config.turnOnCameraWhenJoining,isMicrophoneOn:this.props.core._config.turnOnMicrophoneWhenJoining,hasVideo:!this.props.core.status.videoRefuse,hasAudio:!this.props.core.status.audioRefuse}))),e.abrupt("return",!0);case 28:return e.prev=28,e.t1=e.catch(3),console.error("\u3010ZEGOCLOUD\u3011createStream or publishLocalStream failed,Reason: ",JSON.stringify(e.t1)),e.abrupt("return",!1);case 32:e.next=35;break;case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,this,[[3,28],[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"toggleMic",value:function(){var e=i(o().mark((function e(){var t,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.core.status.audioRefuse){e.next=3;break}return $t({title:"Equipment authorization",content:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",confirm:"Okay"}),e.abrupt("return");case 3:if(-1!==this.micStatus){e.next=5;break}return e.abrupt("return");case 5:if(this.micStatus=-1,!(this.state.localStream&&this.state.localStream.getAudioTracks().length>0)){e.next=11;break}return e.next=9,this.props.core.muteMicrophone(this.state.micOpen);case 9:t=e.sent,this.props.core.setStreamExtraInfo(this.localStreamID,JSON.stringify({isCameraOn:this.state.cameraOpen,isMicrophoneOn:!this.state.micOpen,hasVideo:!this.props.core.status.videoRefuse,hasAudio:!this.props.core.status.audioRefuse}));case 11:this.micStatus=this.state.micOpen?0:1,t&&(Ft({content:"The microphone is "+(this.micStatus?"on":"off")}),t&&this.setState({micOpen:!!this.micStatus},(function(){r.handleLayoutChange(r.state.userLayoutStatus)})));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleCamera",value:function(){var e=i(o().mark((function e(){var t,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.core.status.videoRefuse){e.next=3;break}return $t({title:"Equipment authorization",content:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",confirm:"Okay"}),e.abrupt("return");case 3:if(-1!==this.cameraStatus){e.next=5;break}return e.abrupt("return");case 5:if(this.cameraStatus=-1,!(this.state.localStream&&this.state.localStream.getVideoTracks().length>0)){e.next=11;break}return e.next=9,this.props.core.mutePublishStreamVideo(this.state.localStream,this.state.cameraOpen);case 9:t=e.sent,this.props.core.setStreamExtraInfo(this.localStreamID,JSON.stringify({isCameraOn:!this.state.cameraOpen,isMicrophoneOn:this.state.micOpen,hasVideo:!this.props.core.status.videoRefuse,hasAudio:!this.props.core.status.audioRefuse}));case 11:this.cameraStatus=this.state.cameraOpen?0:1,t&&(Ft({content:"The camera is "+(this.cameraStatus?"on":"off")}),t&&this.setState({cameraOpen:!!this.cameraStatus},(function(){r.handleLayoutChange(r.state.userLayoutStatus)})));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"switchCamera",value:function(){var e=i(o().mark((function e(){var t,r,n,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.core.status.videoRefuse){e.next=3;break}return $t({title:"Equipment authorization",content:"We can't detect your devices. Please check your devices and allow us access your devices in your browser's address bar. Then reload this page and try again.",confirm:"Okay"}),e.abrupt("return");case 3:if(this.state.localStream&&!(this.cameraDevices.length<2)){e.next=5;break}return e.abrupt("return");case 5:if(t=!1,-1!==this.faceModel){e.next=10;break}return e.abrupt("return");case 10:0===this.faceModel&&(t=!0);case 11:return this.faceModel=-1,this.state.localStream.getVideoTracks()[0].stop(),this.state.localStream.getAudioTracks()[0].stop(),e.prev=14,r=Z(this.props.core._config.videoResolutionList[0]),e.next=18,this.props.core.createStream({camera:w({video:!this.props.core.status.videoRefuse,audio:!this.props.core.status.audioRefuse,videoQuality:4,facingMode:this.state.cameraFront?"environment":"user"},r)});case 18:return n=e.sent,i=n.getVideoTracks()[0],!this.state.cameraOpen&&(i.enabled=!1),s=n.getAudioTracks()[0],e.next=24,this.props.core.replaceTrack(this.state.localStream,i);case 24:return e.next=26,this.props.core.replaceTrack(this.state.localStream,s);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(14),console.error("\u3010ZEGOCLOUD\u3011switch camera failed!",e.t0);case 31:this.faceModel=t?1:0,this.setState({cameraFront:t});case 33:case"end":return e.stop()}}),e,this,[[14,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"toggleLayOut",value:function(e){this.setState((function(t){return{layOutStatus:t.layOutStatus===e?"ONE_VIDEO":e,showMore:!1}}))}},{key:"sendMessage",value:function(){var e=i(o().mark((function e(t){var r,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(3),this.setState((function(e){return{messageList:[].concat(O(e.messageList),[{fromUser:{userID:i.props.core._expressConfig.userID,userName:i.props.core._expressConfig.userName},message:t,sendTime:Date.now(),messageID:r,status:"SENDING"}])}})),n={},e.prev=3,e.next=6,this.props.core.sendRoomMessage(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("\u3010ZEGOCLOUD\u3011sendMessage failed!",JSON.stringify(e.t0));case 12:this.setState((function(e){var t=e.messageList.map((function(e){return e.messageID===r&&(e.status=0===n.errorCode?"SENDED":"FAILED"),e}));return console.log(t),{messageList:t}}));case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openMore",value:function(){var e=this;this.setState((function(e){return{showMore:!e.showMore}}),(function(){e.state.showMore?document.addEventListener("click",e.onblur):document.removeEventListener("click",e.onblur)}))}},{key:"leaveRoom",value:function(){var e=this;$t({title:"Leave the room",content:"Are you sure to leave the room?",cancel:"Cancel",confirm:"Confirm",closeCallBack:function(t){t&&(e.props.core._config.turnOnCameraWhenJoining=e.state.cameraOpen,e.props.core._config.turnOnMicrophoneWhenJoining=e.state.micOpen,e.state.localStream&&e.props.core.destroyStream(e.state.localStream),e.props.core.leaveRoom(),e.props.leaveRoom&&e.props.leaveRoom())}})}},{key:"getAllUser",value:function(){return[{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName,pin:this.localUserPin,avatar:this.props.core._expressConfig.avatar,streamList:[{media:this.state.localStream,fromUser:{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName},micStatus:this.state.micOpen?"OPEN":"MUTE",cameraStatus:this.state.cameraOpen?"OPEN":"MUTE",state:"PLAYING",streamID:this.localStreamID}]}].concat(O(this.state.zegoCloudUserList))}},{key:"getAllMemberList",value:function(){return[{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName,pin:this.localUserPin,avatar:this.props.core._expressConfig.avatar,streamList:[{media:this.state.localStream,fromUser:{userID:this.props.core._expressConfig.userID,userName:this.props.core._expressConfig.userName},micStatus:this.state.micOpen?"OPEN":"MUTE",cameraStatus:this.state.cameraOpen?"OPEN":"MUTE",state:"PLAYING",streamID:this.localStreamID}]}].concat(O(this.state.memberList))}},{key:"getShownUser",value:function(){var e=this,t=this.getAllUser().filter((function(t){return!!e.props.core._config.showNonVideoUser||!!(t.streamList&&t.streamList[0]&&(t.streamList[0].media||t.streamList[0].urlsHttpsFLV||t.streamList[0].urlsHttpsHLS))&&("OPEN"===t.streamList[0].cameraStatus||!(!e.props.core._config.showOnlyAudioUser||"OPEN"!==t.streamList[0].micStatus))}));return this._selectedUser&&!t.some((function(t){return t.userID===e._selectedUser.userID}))&&"MANAGE"===this.state.layOutStatus&&this.setState({layOutStatus:"ONE_VIDEO"}),t}},{key:"getHiddenUser",value:function(){var e=this,t=this.getAllUser().filter((function(t){return!(e.props.core._config.showNonVideoUser||!t.streamList||!t.streamList[0]||!(t.streamList[0].media||t.streamList[0].urlsHttpsFLV||t.streamList[0].urlsHttpsHLS)||"OPEN"===t.streamList[0].cameraStatus||e.props.core._config.showOnlyAudioUser||"OPEN"!==t.streamList[0].micStatus)}));return(0,ut.jsx)(ut.Fragment,{children:t.map((function(t){return(0,ut.jsx)(nn,{muted:t.userID===e.props.core._expressConfig.userID,userInfo:t},t.userID+"_hiddenAudio")}))})}},{key:"showSelf",get:function(){return!!this.props.core._config.showNonVideoUser||(this.props.core._config.showOnlyAudioUser?this.localStreamID&&(this.state.micOpen||this.state.cameraOpen):this.localStreamID&&this.state.cameraOpen)}},{key:"handleLayoutChange",value:function(){var e=i(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Sidebar"!==t&&(this._selectedUser&&(this._selectedUser.pin=!1),this.localUserPin=!1,this.props.core.setPin(void 0,void 0,!0)),this.setState({userLayoutStatus:t}),e.abrupt("return",new Promise(function(){var e=i(o().mark((function e(n,i){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.state.screenSharingUserList.length){e.next=5;break}return e.next=3,r.props.core.setMaxScreenNum(r.showSelf?3:4,!0);case 3:case 8:e.next=12;break;case 5:if("Sidebar"===t){e.next=10;break}return e.next=8,r.props.core.setMaxScreenNum(r.showSelf?5:6,!0);case 10:return e.next=12,r.props.core.setMaxScreenNum(r.showSelf?4:5,!0);case 12:return r.userUpdateCallBack=function(){n(!0)},setTimeout((function(){n(!1)}),5e3),s=!1,"Sidebar"===t&&(s=!r.state.cameraOpen&&!r.state.micOpen||!r.localUserPin),e.next=18,r.props.core.setSidebarLayOut(!(r.state.screenSharingUserList.length>0)&&s);case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListScreen",value:function(){var e,t=this;if("INVITE"===this.state.layOutStatus?e=(0,ut.jsx)(Vs,{core:this.props.core,closeCallBack:function(){t.setState({layOutStatus:"ONE_VIDEO"})}}):"USER_LIST"===this.state.layOutStatus?e=(0,ut.jsx)(Ds,{core:this.props.core,userList:this.getAllMemberList(),closeCallBack:function(e){e&&(t._selectedUser=e),t.setState({layOutStatus:e?"MANAGE":"ONE_VIDEO"})}}):"MESSAGE"===this.state.layOutStatus?e=(0,ut.jsx)(bs,{userID:this.props.core._expressConfig.userID,messageList:this.state.messageList,sendMessage:function(e){t.sendMessage(e)},getAvatar:function(e){var r=t.getAllMemberList().find((function(t){return t.userID===e}));return(null===r||void 0===r?void 0:r.avatar)||""},closeCallBac:function(){t.setState({layOutStatus:"ONE_VIDEO"})}}):"LAYOUT"===this.state.layOutStatus?e=(0,ut.jsx)(ra,{selectLayout:this.state.userLayoutStatus,closeCallBac:function(){t.setState({layOutStatus:"ONE_VIDEO"})},selectCallBack:this.handleLayoutChange.bind(this)}):"MANAGE"===this.state.layOutStatus&&(e=(0,ut.jsx)(la,{closeCallBac:function(){t.setState({layOutStatus:"ONE_VIDEO"})},selectCallBac:function(e,r){"Pin"===e&&"undefined"!=typeof r&&(t._selectedUser.userID!==t.props.core._expressConfig.userID?(t.props.core.setPin(t._selectedUser.userID,r),t.localUserPin=!1):(t.localUserPin=r,t._selectedUser.pin=r,t.props.core.setPin()),t.setState({userLayoutStatus:"Sidebar"},(function(){t.handleLayoutChange("Sidebar")})),t.props.core.setSidebarLayOut(!(t.state.screenSharingUserList.length>0)&&!t.localUserPin))},selectedUser:this._selectedUser})),e)return(0,ut.jsx)("div",{className:"".concat(ji.mask,"  zegocloud_layout_Mask"),onClick:function(e){e.target.className.includes("zegocloud_layout_Mask")&&t.setState({layOutStatus:"ONE_VIDEO"})},children:e})}},{key:"getLayoutScreen",value:function(){var e,t,r,n,s=this;if((null===(e=this.props.core._config.scenario)||void 0===e?void 0:e.mode)===g.LiveStreaming&&(null===(t=this.props.core._config.scenario)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.role)===_.Audience&&"1"!=this.state.liveStatus)return(0,ut.jsxs)("div",{className:"".concat(ji.liveNotStart," zegoUserVideo_click"),children:[(0,ut.jsx)("i",{}),(0,ut.jsx)("span",{children:"The Live has not started yet"})]});if(![].concat(O(this.getAllUser()),O(this.state.screenSharingUserList)).some((function(e){return!!e.streamList&&e.streamList.some((function(e){return"OPEN"===e.cameraStatus||"OPEN"===e.micStatus}))}))&&(null===(n=this.props.core._config.scenario)||void 0===n?void 0:n.mode)===g.LiveStreaming)return(0,ut.jsxs)("div",{className:"".concat(ji.noOneStreaming," zegoUserVideo_click"),children:[(0,ut.jsx)("i",{}),(0,ut.jsx)("span",{children:"No one has turned on the camera or microphone yet."})]});if(this.state.screenSharingUserList.length>0){var a,c=this.getAllMemberList().filter((function(e){return e.userID===s.state.screenSharingUserList[0].userID}));return(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsxs)("div",{className:ji.screenTopBar,children:[(0,ut.jsxs)("span",{style:{color:q(this.state.screenSharingUserList[0].userName)},children:[Y(this.state.screenSharingUserList[0].userName||""),(null===c||void 0===c||null===(a=c[0])||void 0===a?void 0:a.avatar)&&(0,ut.jsx)("img",{src:c[0].avatar,onError:function(e){e.target.style.display="none"},alt:""})]}),(0,ut.jsx)("p",{children:this.state.screenSharingUserList[0].userName+" is presenting"})]}),(0,ut.jsx)(ba,{selfInfo:{userID:this.props.core._expressConfig.userID},userList:this.getShownUser(),screenSharingUser:this.state.screenSharingUserList[0],videoShowNumber:5,soundLevel:this.state.soundLevel})]})}return this.state.isZegoWhiteboardSharing?(0,ut.jsx)(gc,{handleSetPin:function(e){},userList:this.getShownUser(),videoShowNumber:5,selfInfo:{userID:this.props.core._expressConfig.userID},soundLevel:this.state.soundLevel,roomID:this.props.core._expressConfig.roomID,onShow:function(){var e=i(o().mark((function e(t){var r,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isCreatingWhiteboardSharing||s.state.zegoSuperBoardView){e.next=15;break}return e.prev=1,e.next=4,s.props.core.createAndPublishWhiteboard(t,s.props.core._expressConfig.userName);case 4:r=e.sent,s.setState({isWhiteboardSharingBySelf:!0,zegoSuperBoardView:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("createAndPublishWhiteboard",e.t0),Et({header:"Notice",contentText:"Operation too frequent, failed to load the whiteboard.",okText:"Okay"},document.querySelector(".".concat(ji.ZegoRoom)));case 12:s.isCreatingWhiteboardSharing=!1,e.next=16;break;case 15:s.state.zegoSuperBoardView&&(i=null===(n=s.state.zegoSuperBoardView.getCurrentSuperBoardSubView())||void 0===n?void 0:n.getModel().uniqueID)&&s.state.zegoSuperBoardView.switchSuperBoardSubView(i);case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),onResize:function(e){s.state.isZegoWhiteboardSharing},onclose:function(){s.toggleWhiteboardSharing()},onToolChange:function(e,t,r){s.props.core.setWhiteboardToolType(e,t,r)},onFontChange:function(e,t,r){s.props.core.setWhiteboardFont(e,t,r)},onImageAdd:i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),zegoSuperBoardView:this.state.zegoSuperBoardView}):"Auto"===this.state.userLayoutStatus&&this.getShownUser().length<3||this.getShownUser().length<2?(0,ut.jsx)(is,{selfInfo:{userID:this.props.core._expressConfig.userID},userList:this.getShownUser(),soundLevel:this.state.soundLevel,onLocalStreamPaused:i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.core.enableVideoCaptureDevice(s.state.localStream,!s.state.cameraOpen);case 2:s.props.core.enableVideoCaptureDevice(s.state.localStream,s.state.cameraOpen);case 3:case"end":return e.stop()}}),e)})))}):"Grid"===this.state.userLayoutStatus&&this.getShownUser().length>1||"Auto"===this.state.userLayoutStatus&&this.getShownUser().length>2?(0,ut.jsx)(ha,{selfInfo:{userID:this.props.core._expressConfig.userID},userList:this.getShownUser(),videoShowNumber:6,soundLevel:this.state.soundLevel}):"Sidebar"===this.state.userLayoutStatus&&this.getShownUser().length>1?(0,ut.jsx)(ya,{selfInfo:{userID:this.props.core._expressConfig.userID},userList:this.getShownUser(),videoShowNumber:5,soundLevel:this.state.soundLevel}):void 0}},{key:"clickVideo",value:function(e){var t,r,o=this,n=e.target.className,i=!1;(null===(t=e.target)||void 0===t?void 0:t.id).startsWith("zego-whiteboard-")&&e.target.parentElement&&(n=null===(r=e.target.parentElement)||void 0===r?void 0:r.className,i=!0);n.includes("zegoUserVideo_videoCommon")||n.includes("zegoMore_more")||n.includes("ZegoRoomMobile_ZegoRoom")||n.includes("zegoUserVideo_click")?(this.state.showFooter?"ONE_VIDEO"!=this.state.layOutStatus?(this.setState({layOutStatus:"ONE_VIDEO"}),clearTimeout(this.footerTimer),this.footerTimer=setTimeout((function(){o.setState({showFooter:!1,showMore:!1})}),5e3)):this.setState({showFooter:!1,showMore:!1}):this.setState({showFooter:!0}),!i&&e.stopPropagation()):(clearTimeout(this.footerTimer),this.footerTimer=setTimeout((function(){!o.state.showMore&&o.setState({showFooter:!1,showMore:!1})}),5e3))}},{key:"setLive",value:function(){var e=i(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===this.state.liveCountdown?Et({header:"Stop broadcast",contentText:"Are you sure to stop broadcasting?",okText:"Stop",cancelText:"Cancel",onOk:function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.core.setLive("stop");case 2:e.sent,t.setState({liveCountdown:-1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}):-1===this.state.liveCountdown&&this.setState({liveCountdown:3},(function(){setTimeout((function(){t.liveCountdownTimer()}),1e3)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"liveCountdownTimer",value:function(){var e=this;this.setState((function(e){return{liveCountdown:e.liveCountdown-1}}),i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.liveCountdown){t.next=6;break}return t.next=3,e.props.core.setLive("live");case 3:t.sent,t.next=7;break;case 6:setTimeout((function(){e.liveCountdownTimer()}),1e3);case 7:case"end":return t.stop()}}),t)}))))}},{key:"toggleWhiteboardSharing",value:function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.screenSharingUserList.length>0)){e.next=2;break}return e.abrupt("return");case 2:this.state.isZegoWhiteboardSharing?this.closeWhiteboardSharing():this.state.isZegoWhiteboardSharing||this.createWhiteboardSharing();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createWhiteboardSharing",value:function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.screenSharingUserList.length>0)){e.next=5;break}return Ft({content:"".concat(this.state.screenSharingUserList[0].userName," is presenting now. You cannot share your whiteboard.")}),e.abrupt("return");case 5:if(!this.state.zegoSuperBoardView){e.next=8;break}return Ft({content:"".concat(null===(t=this.state.zegoSuperBoardView.getCurrentSuperBoardSubView())||void 0===t?void 0:t.getModel.name," is presenting now. You cannot share your whiteboard.")}),e.abrupt("return");case 8:if(!this.isCreatingWhiteboardSharing){e.next=10;break}return e.abrupt("return");case 10:this.isCreatingWhiteboardSharing=!0,this.setState({isZegoWhiteboardSharing:!0});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeWhiteboardSharing",value:function(){try{this.state.zegoSuperBoardView&&this.props.core.destroyAndStopPublishWhiteboard(),this.setState({isWhiteboardSharingBySelf:!1,isZegoWhiteboardSharing:!1,zegoSuperBoardView:null}),this.isCreatingWhiteboardSharing=!1}catch(error){console.error(error)}}},{key:"render",value:function(){var e,t,r,o,n,i,s,a,c,u,l,d,h,p,f,m,v,y,b,S,E,T,w,C,I,O=this,k=this.state.notificationList.length<4?0:this.state.notificationList.length-2;return(0,ut.jsx)(io.Provider,{value:{show:function(e){e&&(O._selectedUser=e),O.setState({layOutStatus:e?"MANAGE":"ONE_VIDEO"})},showPinButton:!!this.props.core._config.showPinButton&&this.getShownUser().length>1,whiteboard_page:(null===(e=this.state.zegoSuperBoardView)||void 0===e||null===(t=e.getCurrentSuperBoardSubView())||void 0===t?void 0:t.getCurrentPage())||1,whiteboard_toolType:(null===(r=this.props.core.zegoSuperBoard)||void 0===r?void 0:r.getToolType())||0,whiteboard_fontSize:(null===(o=this.props.core.zegoSuperBoard)||void 0===o?void 0:o.getFontSize())||0,whiteboard_brushSize:(null===(n=this.props.core.zegoSuperBoard)||void 0===n?void 0:n.getBrushSize())||0,whiteboard_brushColor:(null===(i=this.props.core.zegoSuperBoard)||void 0===i?void 0:i.getBrushColor())||"",whiteboard_isFontBold:null===(s=this.props.core.zegoSuperBoard)||void 0===s?void 0:s.isFontBold(),whiteboard_isFontItalic:null===(a=this.props.core.zegoSuperBoard)||void 0===a?void 0:a.isFontItalic(),whiteboard_showAddImage:null===(c=this.props.core._config.whiteboardConfig)||void 0===c?void 0:c.showAddImageButton,userInfo:{userID:this.props.core._expressConfig.userID}},children:(0,ut.jsxs)("div",{className:"".concat(ji.ZegoRoom,"  ZegoRoomMobile_ZegoRoom ").concat((null===(u=this.props.core._config.scenario)||void 0===u?void 0:u.mode)===g.LiveStreaming?(null===(l=this.props.core._config.scenario)||void 0===l||null===(d=l.config)||void 0===d?void 0:d.role)===_.Host?ji.host:(null===(h=this.props.core._config.scenario)||void 0===h||null===(p=h.config)||void 0===p?void 0:p.role)===_.Audience?ji.audience:"":""),onClick:function(e){O.clickVideo(e)},children:[this.getLayoutScreen(),this.state.isNetworkPoor&&(0,ut.jsx)("div",{className:ji.network}),!!this.state.showFooter&&(0,ut.jsxs)("div",{className:ji.footer,children:[this.props.core._config.showMyCameraToggleButton&&((null===(f=this.props.core._config.scenario)||void 0===f?void 0:f.mode)!==g.LiveStreaming||(null===(m=this.props.core._config.scenario)||void 0===m||null===(v=m.config)||void 0===v?void 0:v.role)===_.Cohost)&&(0,ut.jsx)("a",{className:"".concat(ji.switchCamera),onClick:function(){O.switchCamera()}}),this.props.core._config.showMyCameraToggleButton&&(0,ut.jsx)("a",{className:this.state.cameraOpen?ji.toggleCamera:ji.cameraClose,onClick:function(){O.toggleCamera()}}),this.props.core._config.showMyMicrophoneToggleButton&&(0,ut.jsx)("a",{className:this.state.micOpen?ji.toggleMic:ji.micClose,onClick:function(){O.toggleMic()}}),(0,ut.jsx)("a",{className:(null===(y=this.props.core._config.scenario)||void 0===y?void 0:y.mode)===g.LiveStreaming?ji.liveLeaveButton:ji.leaveRoom,onClick:function(){O.leaveRoom()}}),(this.props.core._config.showTextChat||this.props.core._config.showUserList||this.props.core._config.sharedLinks)&&(0,ut.jsxs)("a",{id:"ZegoRoomCssMobileMore",className:ji.more,onClick:function(){O.openMore()},children:[!!this.state.showMore&&(0,ut.jsx)("div",{id:"ZegoRoomCssMobilePopMore",className:"".concat(ji.popMore," ").concat(ji.popLiveMore),children:(0,ut.jsxs)("div",{className:ji.popMoreContent,children:[this.props.core._config.showMyCameraToggleButton&&(null===(b=this.props.core._config.scenario)||void 0===b?void 0:b.mode)===g.LiveStreaming&&(null===(S=this.props.core._config.scenario.config)||void 0===S?void 0:S.role)===_.Host&&(0,ut.jsxs)("div",{className:"".concat(ji.switchCamera," zegoUserVideo_click"),onClick:function(){O.switchCamera()},children:[(0,ut.jsx)("i",{className:"".concat(ji.switchCamera," zegoUserVideo_click")}),(0,ut.jsx)("span",{children:"Flip"})]}),(null===(E=this.props.core._config.preJoinViewConfig)||void 0===E?void 0:E.invitationLink)&&(0,ut.jsxs)("div",{className:ji.roomDetail,onClick:function(e){e.stopPropagation(),O.toggleLayOut("INVITE")},children:[(0,ut.jsx)("i",{className:ji.details}),(0,ut.jsx)("span",{children:"Room details"})]}),this.props.core._config.showUserList&&(0,ut.jsxs)("div",{onClick:function(e){e.stopPropagation(),O.toggleLayOut("USER_LIST")},children:[(0,ut.jsx)("i",{className:ji.member}),(0,ut.jsx)("span",{children:"Member"})]}),this.props.core._config.showTextChat&&(0,ut.jsxs)("div",{onClick:function(e){e.stopPropagation(),O.toggleLayOut("MESSAGE")},children:[(0,ut.jsx)("i",{className:ji.chat}),(0,ut.jsx)("span",{children:"Chat"})]}),this.props.core._config.showLayoutButton&&(0,ut.jsxs)("div",{onClick:function(e){e.stopPropagation(),O.toggleLayOut("LAYOUT")},children:[(0,ut.jsx)("i",{className:ji.layout}),(0,ut.jsx)("span",{children:"Layout"})]}),(null===(T=this.props.core._config.plugins)||void 0===T?void 0:T.ZegoSuperBoardManager)&&(0,ut.jsxs)("div",{onClick:function(e){e.stopPropagation(),O.toggleLayOut("WHITEBOARD"),O.toggleWhiteboardSharing()},children:[(0,ut.jsx)("i",{className:"".concat(ji.whiteboard," ").concat(this.state.isZegoWhiteboardSharing?ji.sharing:""," ").concat(this.state.screenSharingUserList.length>0?ji.forbiddenSharing:"")}),(0,ut.jsx)("span",{children:"Whiteboard"})]})]})}),!!this.state.showMore&&(0,ut.jsx)("div",{className:ji.popMoreArray})]}),(null===(w=this.props.core._config.scenario)||void 0===w?void 0:w.mode)===g.LiveStreaming&&(null===(C=this.props.core._config.scenario.config)||void 0===C?void 0:C.role)===_.Host&&(0,ut.jsx)("a",{className:"".concat(ji.goLive,"  ").concat(0===this.state.liveCountdown?ji.goLiveEnabled:""),onClick:function(){O.setLive()},children:3===this.state.liveCountdown||-1===this.state.liveCountdown?"Go Live":0===this.state.liveCountdown?"Stop":"Go Live"})]}),this.getListScreen(),(0,ut.jsx)(ut.Fragment,{children:this.getHiddenUser()}),(0,ut.jsx)("div",{className:ji.notify,children:this.state.notificationList.slice(k).map((function(e){return"MSG"===e.type?(0,ut.jsxs)("div",{className:ji.notifyContent,children:[(0,ut.jsx)("h5",{children:e.userName}),(0,ut.jsx)("span",{children:e.content})]},e.content):(0,ut.jsx)("div",{className:ji.notifyContent,children:(0,ut.jsx)("span",{children:e.content})},e.content)}))}),this.state.liveCountdown>0&&(0,ut.jsx)("div",{className:ji.countDown,children:(0,ut.jsx)("div",{children:this.state.liveCountdown})}),!!this.state.connecting&&(0,ut.jsx)(Zs,{content:this.state.firstLoading?"Joining Room":"Trying to reconnect..."}),(null===(I=this.props.core._config.scenario)||void 0===I?void 0:I.mode)===g.LiveStreaming&&(0===this.state.liveCountdown||"1"==this.state.liveStatus)&&(0,ut.jsx)("button",{className:"".concat(ji.LiveStateButton,"  ").concat(this.state.showFooter?"":ji.LiveStateButtonNoFooter),children:"Live"})]})})}}]),r}(e.PureComponent);mc.contextType=io;var vc=function(e,t){return vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},vc(e,t)};function yc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}vc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var bc=function(){return bc=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},bc.apply(this,arguments)};Object.create;function Sc(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}Object.create;__webpack_require__(9053);var Ec=e.createContext(null),Tc=(Ec.Consumer,Ec.Provider);var wc,Cc,Ic;function Oc(e,t,r){if(void 0===r&&(r=Error),!e)throw new r(t)}function kc(e){return e.type===Cc.literal}function Rc(e){return e.type===Cc.argument}function Ac(e){return e.type===Cc.number}function Pc(e){return e.type===Cc.date}function Lc(e){return e.type===Cc.time}function Nc(e){return e.type===Cc.select}function Dc(e){return e.type===Cc.plural}function Mc(e){return e.type===Cc.pound}function xc(e){return e.type===Cc.tag}function Bc(e){return!(!e||"object"!==typeof e||e.type!==Ic.number)}function Uc(e){return!(!e||"object"!==typeof e||e.type!==Ic.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(wc||(wc={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(Cc||(Cc={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(Ic||(Ic={}));var jc=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Hc=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function zc(e){var t={};return e.replace(Hc,(function(e){var r=e.length;switch(e[0]){case"G":t.era=4===r?"long":5===r?"narrow":"short";break;case"y":t.year=2===r?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===r?"short":5===r?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var Vc=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var qc=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Gc=/^(@+)?(\+|#+)?[rs]?$/g,Zc=/(\*)(0+)|(#+)(0+)|(0+)/g,Fc=/^(0+)$/;function Wc(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(Gc,(function(e,r,o){return"string"!==typeof o?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):"+"===o?t.minimumSignificantDigits=r.length:"#"===r[0]?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+("string"===typeof o?o.length:0)),""})),t}function Yc(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Qc(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var r=e.slice(0,2);if("+!"===r?(t.signDisplay="always",e=e.slice(2)):"+?"===r&&(t.signDisplay="exceptZero",e=e.slice(2)),!Fc.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function Kc(e){var t=Yc(e);return t||{}}function Jc(e){for(var t={},r=0,o=e;r<o.length;r++){var n=o[r];switch(n.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=n.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=n.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=bc(bc(bc({},t),{notation:"scientific"}),n.options.reduce((function(e,t){return bc(bc({},e),Kc(t))}),{}));continue;case"engineering":t=bc(bc(bc({},t),{notation:"engineering"}),n.options.reduce((function(e,t){return bc(bc({},e),Kc(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(n.options[0]);continue;case"integer-width":if(n.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");n.options[0].replace(Zc,(function(e,r,o,n,i,s){if(r)t.minimumIntegerDigits=o.length;else{if(n&&i)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(Fc.test(n.stem))t.minimumIntegerDigits=n.stem.length;else if(qc.test(n.stem)){if(n.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");n.stem.replace(qc,(function(e,r,o,n,i,s){return"*"===o?t.minimumFractionDigits=r.length:n&&"#"===n[0]?t.maximumFractionDigits=n.length:i&&s?(t.minimumFractionDigits=i.length,t.maximumFractionDigits=i.length+s.length):(t.minimumFractionDigits=r.length,t.maximumFractionDigits=r.length),""}));var i=n.options[0];"w"===i?t=bc(bc({},t),{trailingZeroDisplay:"stripIfInteger"}):i&&(t=bc(bc({},t),Wc(i)))}else if(Gc.test(n.stem))t=bc(bc({},t),Wc(n.stem));else{var s=Yc(n.stem);s&&(t=bc(bc({},t),s));var a=Qc(n.stem);a&&(t=bc(bc({},t),a))}}return t}var Xc,$c={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function eu(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r,o=e.language;return"root"!==o&&(r=e.maximize().region),($c[r||""]||$c[o||""]||$c["".concat(o,"-001")]||$c["001"])[0]}var tu=new RegExp("^".concat(jc.source,"*")),ru=new RegExp("".concat(jc.source,"*$"));function ou(e,t){return{start:e,end:t}}var nu=!!String.prototype.startsWith,iu=!!String.fromCodePoint,su=!!Object.fromEntries,au=!!String.prototype.codePointAt,cu=!!String.prototype.trimStart,uu=!!String.prototype.trimEnd,lu=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},du=!0;try{du="a"===(null===(Xc=yu("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===Xc?void 0:Xc[0])}catch(td){du=!1}var hu,pu=nu?function(e,t,r){return e.startsWith(t,r)}:function(e,t,r){return e.slice(r,r+t.length)===t},fu=iu?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,o="",n=e.length,i=0;n>i;){if((r=e[i++])>1114111)throw RangeError(r+" is not a valid code point");o+=r<65536?String.fromCharCode(r):String.fromCharCode(55296+((r-=65536)>>10),r%1024+56320)}return o},_u=su?Object.fromEntries:function(e){for(var t={},r=0,o=e;r<o.length;r++){var n=o[r],i=n[0],s=n[1];t[i]=s}return t},gu=au?function(e,t){return e.codePointAt(t)}:function(e,t){var r=e.length;if(!(t<0||t>=r)){var o,n=e.charCodeAt(t);return n<55296||n>56319||t+1===r||(o=e.charCodeAt(t+1))<56320||o>57343?n:o-56320+(n-55296<<10)+65536}},mu=cu?function(e){return e.trimStart()}:function(e){return e.replace(tu,"")},vu=uu?function(e){return e.trimEnd()}:function(e){return e.replace(ru,"")};function yu(e,t){return new RegExp(e,t)}if(du){var bu=yu("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");hu=function(e,t){var r;return bu.lastIndex=t,null!==(r=bu.exec(e)[1])&&void 0!==r?r:""}}else hu=function(e,t){for(var r=[];;){var o=gu(e,t);if(void 0===o||Tu(o)||wu(o))break;r.push(o),t+=o>=65536?2:1}return fu.apply(void 0,r)};var Su=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,r){for(var o=[];!this.isEOF();){var n=this.char();if(123===n){if((i=this.parseArgument(e,r)).err)return i;o.push(i.val)}else{if(125===n&&e>0)break;if(35!==n||"plural"!==t&&"selectordinal"!==t){if(60===n&&!this.ignoreTag&&47===this.peek()){if(r)break;return this.error(wc.UNMATCHED_CLOSING_TAG,ou(this.clonePosition(),this.clonePosition()))}if(60===n&&!this.ignoreTag&&Eu(this.peek()||0)){if((i=this.parseTag(e,t)).err)return i;o.push(i.val)}else{var i;if((i=this.parseLiteral(e,t)).err)return i;o.push(i.val)}}else{var s=this.clonePosition();this.bump(),o.push({type:Cc.pound,location:ou(s,this.clonePosition())})}}}return{val:o,err:null}},e.prototype.parseTag=function(e,t){var r=this.clonePosition();this.bump();var o=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Cc.literal,value:"<".concat(o,"/>"),location:ou(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var n=this.parseMessage(e+1,t,!0);if(n.err)return n;var i=n.val,s=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Eu(this.char()))return this.error(wc.INVALID_TAG,ou(s,this.clonePosition()));var a=this.clonePosition();return o!==this.parseTagName()?this.error(wc.UNMATCHED_CLOSING_TAG,ou(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Cc.tag,value:o,children:i,location:ou(r,this.clonePosition())},err:null}:this.error(wc.INVALID_TAG,ou(s,this.clonePosition())))}return this.error(wc.UNCLOSED_TAG,ou(r,this.clonePosition()))}return this.error(wc.INVALID_TAG,ou(r,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var r=this.clonePosition(),o="";;){var n=this.tryParseQuote(t);if(n)o+=n;else{var i=this.tryParseUnquoted(e,t);if(i)o+=i;else{var s=this.tryParseLeftAngleBracket();if(!s)break;o+=s}}}var a=ou(r,this.clonePosition());return{val:{type:Cc.literal,value:o,location:a},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(Eu(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(39===r){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(r);this.bump()}return fu.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var r=this.char();return 60===r||123===r||35===r&&("plural"===t||"selectordinal"===t)||125===r&&e>0?null:(this.bump(),fu(r))},e.prototype.parseArgument=function(e,t){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(wc.EXPECT_ARGUMENT_CLOSING_BRACE,ou(r,this.clonePosition()));if(125===this.char())return this.bump(),this.error(wc.EMPTY_ARGUMENT,ou(r,this.clonePosition()));var o=this.parseIdentifierIfPossible().value;if(!o)return this.error(wc.MALFORMED_ARGUMENT,ou(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(wc.EXPECT_ARGUMENT_CLOSING_BRACE,ou(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Cc.argument,value:o,location:ou(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(wc.EXPECT_ARGUMENT_CLOSING_BRACE,ou(r,this.clonePosition())):this.parseArgumentOptions(e,t,o,r);default:return this.error(wc.MALFORMED_ARGUMENT,ou(r,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),r=hu(this.message,t),o=t+r.length;return this.bumpTo(o),{value:r,location:ou(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,r,o){var n,i=this.clonePosition(),s=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(s){case"":return this.error(wc.EXPECT_ARGUMENT_TYPE,ou(i,a));case"number":case"date":case"time":this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition();if((m=this.parseSimpleArgStyleIfPossible()).err)return m;if(0===(p=vu(m.val)).length)return this.error(wc.EXPECT_ARGUMENT_STYLE,ou(this.clonePosition(),this.clonePosition()));c={style:p,styleLocation:ou(u,this.clonePosition())}}if((v=this.tryParseArgumentClose(o)).err)return v;var l=ou(o,this.clonePosition());if(c&&pu(null===c||void 0===c?void 0:c.style,"::",0)){var d=mu(c.style.slice(2));if("number"===s)return(m=this.parseNumberSkeletonFromString(d,c.styleLocation)).err?m:{val:{type:Cc.number,value:r,location:l,style:m.val},err:null};if(0===d.length)return this.error(wc.EXPECT_DATE_TIME_SKELETON,l);var h=d;this.locale&&(h=function(e,t){for(var r="",o=0;o<e.length;o++){var n=e.charAt(o);if("j"===n){for(var i=0;o+1<e.length&&e.charAt(o+1)===n;)i++,o++;var s=1+(1&i),a=i<2?1:3+(i>>1),c=eu(t);for("H"!=c&&"k"!=c||(a=0);a-- >0;)r+="a";for(;s-- >0;)r=c+r}else r+="J"===n?"H":n}return r}(d,this.locale));var p={type:Ic.dateTime,pattern:h,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?zc(h):{}};return{val:{type:"date"===s?Cc.date:Cc.time,value:r,location:l,style:p},err:null}}return{val:{type:"number"===s?Cc.number:"date"===s?Cc.date:Cc.time,value:r,location:l,style:null!==(n=null===c||void 0===c?void 0:c.style)&&void 0!==n?n:null},err:null};case"plural":case"selectordinal":case"select":var f=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(wc.EXPECT_SELECT_ARGUMENT_OPTIONS,ou(f,bc({},f)));this.bumpSpace();var _=this.parseIdentifierIfPossible(),g=0;if("select"!==s&&"offset"===_.value){if(!this.bumpIf(":"))return this.error(wc.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ou(this.clonePosition(),this.clonePosition()));var m;if(this.bumpSpace(),(m=this.tryParseDecimalInteger(wc.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,wc.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return m;this.bumpSpace(),_=this.parseIdentifierIfPossible(),g=m.val}var v,y=this.tryParsePluralOrSelectOptions(e,s,t,_);if(y.err)return y;if((v=this.tryParseArgumentClose(o)).err)return v;var b=ou(o,this.clonePosition());return"select"===s?{val:{type:Cc.select,value:r,options:_u(y.val),location:b},err:null}:{val:{type:Cc.plural,value:r,options:_u(y.val),offset:g,pluralType:"plural"===s?"cardinal":"ordinal",location:b},err:null};default:return this.error(wc.INVALID_ARGUMENT_TYPE,ou(i,a))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(wc.EXPECT_ARGUMENT_CLOSING_BRACE,ou(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(wc.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ou(r,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var r=[];try{r=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],r=0,o=e.split(Vc).filter((function(e){return e.length>0}));r<o.length;r++){var n=o[r].split("/");if(0===n.length)throw new Error("Invalid number skeleton");for(var i=n[0],s=n.slice(1),a=0,c=s;a<c.length;a++)if(0===c[a].length)throw new Error("Invalid number skeleton");t.push({stem:i,options:s})}return t}(e)}catch(o){return this.error(wc.INVALID_NUMBER_SKELETON,t)}return{val:{type:Ic.number,tokens:r,location:t,parsedOptions:this.shouldParseSkeletons?Jc(r):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,r,o){for(var n,i=!1,s=[],a=new Set,c=o.value,u=o.location;;){if(0===c.length){var l=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(wc.EXPECT_PLURAL_ARGUMENT_SELECTOR,wc.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;u=ou(l,this.clonePosition()),c=this.message.slice(l.offset,this.offset())}if(a.has(c))return this.error("select"===t?wc.DUPLICATE_SELECT_ARGUMENT_SELECTOR:wc.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);"other"===c&&(i=!0),this.bumpSpace();var h=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?wc.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:wc.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ou(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,t,r);if(p.err)return p;var f=this.tryParseArgumentClose(h);if(f.err)return f;s.push([c,{value:p.val,location:ou(h,this.clonePosition())}]),a.add(c),this.bumpSpace(),c=(n=this.parseIdentifierIfPossible()).value,u=n.location}return 0===s.length?this.error("select"===t?wc.EXPECT_SELECT_ARGUMENT_SELECTOR:wc.EXPECT_PLURAL_ARGUMENT_SELECTOR,ou(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!i?this.error(wc.MISSING_OTHER_CLAUSE,ou(this.clonePosition(),this.clonePosition())):{val:s,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var r=1,o=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var n=!1,i=0;!this.isEOF();){var s=this.char();if(!(s>=48&&s<=57))break;n=!0,i=10*i+(s-48),this.bump()}var a=ou(o,this.clonePosition());return n?lu(i*=r)?{val:i,err:null}:this.error(t,a):this.error(e,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=gu(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(pu(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),r=this.message.indexOf(e,t);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&Tu(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),r=this.message.charCodeAt(t+(e>=65536?2:1));return null!==r&&void 0!==r?r:null},e}();function Eu(e){return e>=97&&e<=122||e>=65&&e<=90}function Tu(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function wu(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function Cu(e){e.forEach((function(e){if(delete e.location,Nc(e)||Dc(e))for(var t in e.options)delete e.options[t].location,Cu(e.options[t].value);else Ac(e)&&Bc(e.style)||(Pc(e)||Lc(e))&&Uc(e.style)?delete e.style.location:xc(e)&&Cu(e.children)}))}function Iu(e,t){void 0===t&&(t={}),t=bc({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var r=new Su(e,t).parse();if(r.err){var o=SyntaxError(wc[r.err.kind]);throw o.location=r.err.location,o.originalMessage=r.err.message,o}return(null===t||void 0===t?void 0:t.captureLocation)||Cu(r.val),r.val}function Ou(e,t){var r=t&&t.cache?t.cache:Mu,o=t&&t.serializer?t.serializer:Lu;return(t&&t.strategy?t.strategy:Pu)(e,{cache:r,serializer:o})}function ku(e,t,r,o){var n,i=null==(n=o)||"number"===typeof n||"boolean"===typeof n?o:r(o),s=t.get(i);return"undefined"===typeof s&&(s=e.call(this,o),t.set(i,s)),s}function Ru(e,t,r){var o=Array.prototype.slice.call(arguments,3),n=r(o),i=t.get(n);return"undefined"===typeof i&&(i=e.apply(this,o),t.set(n,i)),i}function Au(e,t,r,o,n){return r.bind(t,e,o,n)}function Pu(e,t){return Au(e,this,1===e.length?ku:Ru,t.cache.create(),t.serializer)}var Lu=function(){return JSON.stringify(arguments)};function Nu(){this.cache=Object.create(null)}Nu.prototype.get=function(e){return this.cache[e]},Nu.prototype.set=function(e,t){this.cache[e]=t};var Du,Mu={create:function(){return new Nu}},xu={variadic:function(e,t){return Au(e,this,Ru,t.cache.create(),t.serializer)},monadic:function(e,t){return Au(e,this,ku,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(Du||(Du={}));var Bu,Uu=function(e){function t(t,r,o){var n=e.call(this,t)||this;return n.code=r,n.originalMessage=o,n}return yc(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),ju=function(e){function t(t,r,o,n){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(r,'". Options are "').concat(Object.keys(o).join('", "'),'"'),Du.INVALID_VALUE,n)||this}return yc(t,e),t}(Uu),Hu=function(e){function t(t,r,o){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(r),Du.INVALID_VALUE,o)||this}return yc(t,e),t}(Uu),zu=function(e){function t(t,r){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(r,'"'),Du.MISSING_VALUE,r)||this}return yc(t,e),t}(Uu);function Vu(e){return"function"===typeof e}function qu(e,t,r,o,n,i,s){if(1===e.length&&kc(e[0]))return[{type:Bu.literal,value:e[0].value}];for(var a=[],c=0,u=e;c<u.length;c++){var l=u[c];if(kc(l))a.push({type:Bu.literal,value:l.value});else if(Mc(l))"number"===typeof i&&a.push({type:Bu.literal,value:r.getNumberFormat(t).format(i)});else{var d=l.value;if(!n||!(d in n))throw new zu(d,s);var h=n[d];if(Rc(l))h&&"string"!==typeof h&&"number"!==typeof h||(h="string"===typeof h||"number"===typeof h?String(h):""),a.push({type:"string"===typeof h?Bu.literal:Bu.object,value:h});else if(Pc(l)){var p="string"===typeof l.style?o.date[l.style]:Uc(l.style)?l.style.parsedOptions:void 0;a.push({type:Bu.literal,value:r.getDateTimeFormat(t,p).format(h)})}else if(Lc(l)){p="string"===typeof l.style?o.time[l.style]:Uc(l.style)?l.style.parsedOptions:o.time.medium;a.push({type:Bu.literal,value:r.getDateTimeFormat(t,p).format(h)})}else if(Ac(l)){(p="string"===typeof l.style?o.number[l.style]:Bc(l.style)?l.style.parsedOptions:void 0)&&p.scale&&(h*=p.scale||1),a.push({type:Bu.literal,value:r.getNumberFormat(t,p).format(h)})}else{if(xc(l)){var f=l.children,_=l.value,g=n[_];if(!Vu(g))throw new Hu(_,"function",s);var m=g(qu(f,t,r,o,n,i).map((function(e){return e.value})));Array.isArray(m)||(m=[m]),a.push.apply(a,m.map((function(e){return{type:"string"===typeof e?Bu.literal:Bu.object,value:e}})))}if(Nc(l)){if(!(v=l.options[h]||l.options.other))throw new ju(l.value,h,Object.keys(l.options),s);a.push.apply(a,qu(v.value,t,r,o,n))}else if(Dc(l)){var v;if(!(v=l.options["=".concat(h)])){if(!Intl.PluralRules)throw new Uu('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',Du.MISSING_INTL_API,s);var y=r.getPluralRules(t,{type:l.pluralType}).select(h-(l.offset||0));v=l.options[y]||l.options.other}if(!v)throw new ju(l.value,h,Object.keys(l.options),s);a.push.apply(a,qu(v.value,t,r,o,n,h-(l.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var r=e[e.length-1];return r&&r.type===Bu.literal&&t.type===Bu.literal?r.value+=t.value:e.push(t),e}),[])}(a)}function Gu(e,t){return t?Object.keys(e).reduce((function(r,o){var n,i;return r[o]=(n=e[o],(i=t[o])?bc(bc(bc({},n||{}),i||{}),Object.keys(n).reduce((function(e,t){return e[t]=bc(bc({},n[t]),i[t]||{}),e}),{})):n),r}),bc({},e)):e}function Zu(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(Bu||(Bu={}));var Fu,Wu=function(){function e(t,r,o,n){var i,s=this;if(void 0===r&&(r=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=s.formatToParts(e);if(1===t.length)return t[0].value;var r=t.reduce((function(e,t){return e.length&&t.type===Bu.literal&&"string"===typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return r.length<=1?r[0]||"":r},this.formatToParts=function(e){return qu(s.ast,s.locales,s.formatters,s.formats,e,void 0,s.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=s.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=r,this.resolvedLocale=e.resolveLocale(r),"string"===typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null===n||void 0===n?void 0:n.ignoreTag,locale:this.resolvedLocale})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Gu(e.formats,o),this.formatters=n&&n.formatters||(void 0===(i=this.formatterCache)&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Ou((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Sc([void 0],t,!1)))}),{cache:Zu(i.number),strategy:xu.variadic}),getDateTimeFormat:Ou((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Sc([void 0],t,!1)))}),{cache:Zu(i.dateTime),strategy:xu.variadic}),getPluralRules:Ou((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Sc([void 0],t,!1)))}),{cache:Zu(i.pluralRules),strategy:xu.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if("undefined"!==typeof Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"===typeof e?e:e[0])}},e.__parse=Iu,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(Fu||(Fu={}));var Yu=function(e){function t(r,o,n){var i=this,s=n?n instanceof Error?n:new Error(String(n)):void 0;return(i=e.call(this,"[@formatjs/intl Error ".concat(r,"] ").concat(o,"\n").concat(s?"\n".concat(s.message,"\n").concat(s.stack):""))||this).code=r,"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return yc(t,e),t}(Error),Qu=function(e){function t(t,r){return e.call(this,Fu.UNSUPPORTED_FORMATTER,t,r)||this}return yc(t,e),t}(Yu),Ku=function(e){function t(t,r){return e.call(this,Fu.INVALID_CONFIG,t,r)||this}return yc(t,e),t}(Yu),Ju=function(e){function t(t,r){return e.call(this,Fu.MISSING_DATA,t,r)||this}return yc(t,e),t}(Yu),Xu=function(e){function t(t,r,o){return e.call(this,Fu.FORMAT_ERROR,"".concat(t,"\nLocale: ").concat(r,"\n"),o)||this}return yc(t,e),t}(Yu),$u=function(e){function t(t,r,o,n){var i=e.call(this,"".concat(t,"\nMessageID: ").concat(null===o||void 0===o?void 0:o.id,"\nDefault Message: ").concat(null===o||void 0===o?void 0:o.defaultMessage,"\nDescription: ").concat(null===o||void 0===o?void 0:o.description,"\n"),r,n)||this;return i.descriptor=o,i}return yc(t,e),t}(Xu),el=function(e){function t(t,r){var o=e.call(this,Fu.MISSING_TRANSLATION,'Missing message: "'.concat(t.id,'" for locale "').concat(r,'", using ').concat(t.defaultMessage?"default message (".concat("string"===typeof t.defaultMessage?t.defaultMessage:t.defaultMessage.map((function(e){var t;return null!==(t=e.value)&&void 0!==t?t:JSON.stringify(e)})).join(),")"):"id"," as fallback."))||this;return o.descriptor=t,o}return yc(t,e),t}(Yu);function tl(e,t,r){return void 0===r&&(r={}),t.reduce((function(t,o){return o in e?t[o]=e[o]:o in r&&(t[o]=r[o]),t}),{})}var rl={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){0},onWarn:function(e){0}};function ol(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}function nl(e,t,r,o){var n,i=e&&e[t];if(i&&(n=i[r]),n)return n;o(new Qu("No ".concat(t," format named: ").concat(r)))}var il=bc(bc({},rl),{textComponent:e.Fragment});function sl(e,t){return Object.keys(e).reduce((function(r,o){return r[o]=bc({timeZone:t},e[o]),r}),{})}function al(e,t){return Object.keys(bc(bc({},e),t)).reduce((function(r,o){return r[o]=bc(bc({},e[o]||{}),t[o]||{}),r}),{})}function cl(e,t){if(!t)return e;var r=Wu.formats;return bc(bc(bc({},r),e),{date:al(sl(r.date,t),sl(e.date||{},t)),time:al(sl(r.time,t),sl(e.time||{},t))})}var ul=function(e,t,r,o,n){var i=e.locale,s=e.formats,a=e.messages,c=e.defaultLocale,u=e.defaultFormats,l=e.fallbackOnEmptyString,d=e.onError,h=e.timeZone,p=e.defaultRichTextElements;void 0===r&&(r={id:""});var f=r.id,_=r.defaultMessage;Oc(!!f,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var g=String(f),m=a&&Object.prototype.hasOwnProperty.call(a,g)&&a[g];if(Array.isArray(m)&&1===m.length&&m[0].type===Cc.literal)return m[0].value;if(!o&&m&&"string"===typeof m&&!p)return m.replace(/'\{(.*?)\}'/gi,"{$1}");if(o=bc(bc({},p),o||{}),s=cl(s,h),u=cl(u,h),!m){if(!1===l&&""===m)return m;if((!_||i&&i.toLowerCase()!==c.toLowerCase())&&d(new el(r,i)),_)try{return t.getMessageFormat(_,c,u,n).format(o)}catch(v){return d(new $u('Error formatting default message for: "'.concat(g,'", rendering default message verbatim'),i,r,v)),"string"===typeof _?_:g}return g}try{return t.getMessageFormat(m,i,s,bc({formatters:t},n||{})).format(o)}catch(v){d(new $u('Error formatting message: "'.concat(g,'", using ').concat(_?"default message":"id"," as fallback."),i,r,v))}if(_)try{return t.getMessageFormat(_,c,u,n).format(o)}catch(v){d(new $u('Error formatting the default message for: "'.concat(g,'", rendering message verbatim'),i,r,v))}return"string"===typeof m?m:"string"===typeof _?_:g},ll=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function dl(e,t,r){var o=e.locale,n=e.formats,i=e.onError;void 0===r&&(r={});var s=r.format,a=s&&nl(n,"number",s,i)||{};return t(o,tl(r,ll,a))}function hl(e,t,r,o){void 0===o&&(o={});try{return dl(e,t,o).format(r)}catch(n){e.onError(new Yu(Fu.FORMAT_ERROR,"Error formatting number.",n))}return String(r)}function pl(e,t,r,o){void 0===o&&(o={});try{return dl(e,t,o).formatToParts(r)}catch(n){e.onError(new Yu(Fu.FORMAT_ERROR,"Error formatting number.",n))}return[]}var fl=["numeric","style"];function _l(e,t,r,o,n){void 0===n&&(n={}),o||(o="second"),Intl.RelativeTimeFormat||e.onError(new Uu('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',Du.MISSING_INTL_API));try{return function(e,t,r){var o=e.locale,n=e.formats,i=e.onError;void 0===r&&(r={});var s=r.format,a=!!s&&nl(n,"relative",s,i)||{};return t(o,tl(r,fl,a))}(e,t,n).format(r,o)}catch(i){e.onError(new Xu("Error formatting relative time.",e.locale,i))}return String(r)}var gl=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function ml(e,t,r,o){var n=e.locale,i=e.formats,s=e.onError,a=e.timeZone;void 0===o&&(o={});var c=o.format,u=bc(bc({},a&&{timeZone:a}),c&&nl(i,t,c,s)),l=tl(o,gl,u);return"time"!==t||l.hour||l.minute||l.second||l.timeStyle||l.dateStyle||(l=bc(bc({},l),{hour:"numeric",minute:"numeric"})),r(n,l)}function vl(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var n=r[0],i=r[1],s=void 0===i?{}:i,a="string"===typeof n?new Date(n||0):n;try{return ml(e,"date",t,s).format(a)}catch(c){e.onError(new Yu(Fu.FORMAT_ERROR,"Error formatting date.",c))}return String(a)}function yl(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var n=r[0],i=r[1],s=void 0===i?{}:i,a="string"===typeof n?new Date(n||0):n;try{return ml(e,"time",t,s).format(a)}catch(c){e.onError(new Yu(Fu.FORMAT_ERROR,"Error formatting time.",c))}return String(a)}function bl(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var n=r[0],i=r[1],s=r[2],a=void 0===s?{}:s,c=e.timeZone,u=e.locale,l=e.onError,d=tl(a,gl,c?{timeZone:c}:{});try{return t(u,d).formatRange(n,i)}catch(h){l(new Yu(Fu.FORMAT_ERROR,"Error formatting date time range.",h))}return String(n)}function Sl(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var n=r[0],i=r[1],s=void 0===i?{}:i,a="string"===typeof n?new Date(n||0):n;try{return ml(e,"date",t,s).formatToParts(a)}catch(c){e.onError(new Yu(Fu.FORMAT_ERROR,"Error formatting date.",c))}return[]}function El(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var n=r[0],i=r[1],s=void 0===i?{}:i,a="string"===typeof n?new Date(n||0):n;try{return ml(e,"time",t,s).formatToParts(a)}catch(c){e.onError(new Yu(Fu.FORMAT_ERROR,"Error formatting time.",c))}return[]}var Tl=["type"];function wl(e,t,r,o){var n=e.locale,i=e.onError;void 0===o&&(o={}),Intl.PluralRules||i(new Uu('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',Du.MISSING_INTL_API));var s=tl(o,Tl);try{return t(n,s).select(r)}catch(a){i(new Xu("Error formatting plural.",n,a))}return"other"}var Cl=["type","style"],Il=Date.now();function Ol(e,t,r,o){void 0===o&&(o={});var n=kl(e,t,r,o).reduce((function(e,t){var r=t.value;return"string"!==typeof r?e.push(r):"string"===typeof e[e.length-1]?e[e.length-1]+=r:e.push(r),e}),[]);return 1===n.length?n[0]:n}function kl(e,t,r,o){var n=e.locale,i=e.onError;void 0===o&&(o={}),Intl.ListFormat||i(new Uu('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',Du.MISSING_INTL_API));var s=tl(o,Cl);try{var a={},c=r.map((function(e,t){if("object"===typeof e){var r=function(e){return"".concat(Il,"_").concat(e,"_").concat(Il)}(t);return a[r]=e,r}return String(e)}));return t(n,s).formatToParts(c).map((function(e){return"literal"===e.type?e:bc(bc({},e),{value:a[e.value]||e.value})}))}catch(u){i(new Yu(Fu.FORMAT_ERROR,"Error formatting list.",u))}return r}var Rl=["style","type","fallback"];function Al(e,t,r,o){var n=e.locale,i=e.onError;Intl.DisplayNames||i(new Uu('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',Du.MISSING_INTL_API));var s=tl(o,Rl);try{return t(n,s).of(r)}catch(a){i(new Yu(Fu.FORMAT_ERROR,"Error formatting display name.",a))}}function Pl(e){var t;e.onWarn&&e.defaultRichTextElements&&"string"===typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&e.onWarn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}function Ll(e,t){var r=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,r=Intl.ListFormat,o=Intl.DisplayNames,n=Ou((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Sc([void 0],t,!1)))}),{cache:ol(e.dateTime),strategy:xu.variadic}),i=Ou((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Sc([void 0],t,!1)))}),{cache:ol(e.number),strategy:xu.variadic}),s=Ou((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Sc([void 0],t,!1)))}),{cache:ol(e.pluralRules),strategy:xu.variadic});return{getDateTimeFormat:n,getNumberFormat:i,getMessageFormat:Ou((function(e,t,r,o){return new Wu(e,t,r,bc({formatters:{getNumberFormat:i,getDateTimeFormat:n,getPluralRules:s}},o||{}))}),{cache:ol(e.message),strategy:xu.variadic}),getRelativeTimeFormat:Ou((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,Sc([void 0],e,!1)))}),{cache:ol(e.relativeTime),strategy:xu.variadic}),getPluralRules:s,getListFormat:Ou((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,Sc([void 0],e,!1)))}),{cache:ol(e.list),strategy:xu.variadic}),getDisplayNames:Ou((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(o.bind.apply(o,Sc([void 0],e,!1)))}),{cache:ol(e.displayNames),strategy:xu.variadic})}}(t),o=bc(bc({},rl),e),n=o.locale,i=o.defaultLocale,s=o.onError;return n?!Intl.NumberFormat.supportedLocalesOf(n).length&&s?s(new Ju('Missing locale data for locale: "'.concat(n,'" in Intl.NumberFormat. Using default locale: "').concat(i,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(n).length&&s&&s(new Ju('Missing locale data for locale: "'.concat(n,'" in Intl.DateTimeFormat. Using default locale: "').concat(i,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(s&&s(new Ku('"locale" was not configured, using "'.concat(i,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),o.locale=o.defaultLocale||"en"),Pl(o),bc(bc({},o),{formatters:r,formatNumber:hl.bind(null,o,r.getNumberFormat),formatNumberToParts:pl.bind(null,o,r.getNumberFormat),formatRelativeTime:_l.bind(null,o,r.getRelativeTimeFormat),formatDate:vl.bind(null,o,r.getDateTimeFormat),formatDateToParts:Sl.bind(null,o,r.getDateTimeFormat),formatTime:yl.bind(null,o,r.getDateTimeFormat),formatDateTimeRange:bl.bind(null,o,r.getDateTimeFormat),formatTimeToParts:El.bind(null,o,r.getDateTimeFormat),formatPlural:wl.bind(null,o,r.getPluralRules),formatMessage:ul.bind(null,o,r),$t:ul.bind(null,o,r),formatList:Ol.bind(null,o,r.getListFormat),formatListToParts:kl.bind(null,o,r.getListFormat),formatDisplayName:Al.bind(null,o,r.getDisplayNames)})}function Nl(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function Dl(t){return t?Object.keys(t).reduce((function(r,o){var n,i=t[o];return r[o]=Vu(i)?(n=i,function(t){return n(e.Children.toArray(t))}):i,r}),{}):t}var Ml=function(t,r,o,n){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];var a=Dl(n),c=ul.apply(void 0,Sc([t,r,o,a],i,!1));return Array.isArray(c)?e.Children.toArray(c):c},xl=function(e,t){var r=e.defaultRichTextElements,o=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,["defaultRichTextElements"]),n=Dl(r),i=Ll(bc(bc(bc({},il),o),{defaultRichTextElements:n}),t),s={locale:i.locale,timeZone:i.timeZone,fallbackOnEmptyString:i.fallbackOnEmptyString,formats:i.formats,defaultLocale:i.defaultLocale,defaultFormats:i.defaultFormats,messages:i.messages,onError:i.onError,defaultRichTextElements:n};return bc(bc({},i),{formatMessage:Ml.bind(null,s,i.formatters),$t:Ml.bind(null,s,i.formatters)})},Bl=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},e.state={cache:e.cache,intl:xl(Nl(e.props),e.cache),prevConfig:Nl(e.props)},e}return yc(r,t),r.getDerivedStateFromProps=function(e,t){var r=t.prevConfig,o=t.cache,n=Nl(e);return function(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),o=Object.keys(t),n=r.length;if(o.length!==n)return!1;for(var i=0;i<n;i++){var s=r[i];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}(r,n)?null:{intl:xl(n,o),prevConfig:n}},r.prototype.render=function(){return Oc(this.state.intl,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry."),e.createElement(Tc,{value:this.state.intl},this.props.children)},r.displayName="IntlProvider",r.defaultProps=il,r}(e.PureComponent),Ul=Bl,jl="view_index__jhiYd",Hl="ZegoRejoinRoom_rejoinRoomContainer__r5Vz3",zl="ZegoRejoinRoom_title__os+By",Vl="ZegoRejoinRoom_rejoin__JK0dd",ql="ZegoRejoinRoom_returnHome__mh3wB",Gl="ZegoRejoinRoom_isPC__O1twN",Zl="ZegoRejoinRoom_joinRoomButtonLoading__tN85T",Fl=M()?zo:Ft,Wl=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={isPc:M(),isJoining:!1},e}return c(r,[{key:"joinRoom",value:function(){var e=i(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isJoining){e.next=2;break}return e.abrupt("return");case 2:this.setState({isJoining:!0},i(o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,t.props.core.enterRoom();case 3:0===(n=e.sent)?t.props.joinRoom&&t.props.joinRoom():1002034===n?r="Failed to join the room, the number of people in the room has reached the maximum.(2 people)":[1002031,1002053].includes(n)?r="There's something wrong with your network. Please check it and try again.":[1102018,1102016,1102020].includes(n)||(r=1002056===n?"You are on a call in another room, please leave that room first.":"Failed to join the room, please try again.(error code:"+n+")"),r&&Fl({content:r}),t.setState({isJoining:!1});case 7:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"returnHome",value:function(){this.props.returnHome&&this.props.returnHome()}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(Hl," ").concat(this.state.isPc?Gl:""),children:[(0,ut.jsx)("button",{className:zl,children:"You have left the room."}),(0,ut.jsxs)("button",{className:Vl,onClick:function(){e.joinRoom()},children:[this.state.isJoining&&(0,ut.jsx)("span",{className:Zl})," ","Rejoin"]}),this.props.core._config.showPreJoinView&&(0,ut.jsx)("button",{className:ql,onClick:function(){e.returnHome()},children:"Return to home screen"})]})}}]),r}(e.Component),Yl=function(e){l(r,e);var t=f(r);function r(){var e;s(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={step:e.props.core._config.showPreJoinView?0:1,isSupportWebRTC:!0},e}return c(r,[{key:"componentDidMount",value:function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.core.checkWebRTC();case 2:t=e.sent,this.setState({isSupportWebRTC:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nextPage",value:function(){this.setState((function(e){return{step:++e.step}}))}},{key:"render",value:function(){var e,t=this;if(this.state.isSupportWebRTC)if(0===this.state.step&&this.props.core){if("undefined"===typeof SDK_ENV){document.getElementById("root");var r=document.querySelector("#root .preView_nav"),o=document.querySelector("#root .preView_services"),n=o.previousElementSibling;r&&(r.style.display="flex"),n.style.height="auto",o.style.display="block",M()||(n.style.marginTop="")}e=M()?(0,ut.jsx)(Tt,{core:this.props.core,joinRoom:function(){t.nextPage()}}):(0,ut.jsx)(or,{core:this.props.core,joinRoom:function(){t.nextPage()}}),this.props.core.setCurrentPage("BrowserCheckPage")}else if(1===this.state.step&&this.props.core){if("undefined"===typeof SDK_ENV){document.getElementById("root");var i=document.querySelector("#root .preView_nav"),s=document.querySelector("#root .preView_services"),a=s.previousElementSibling;i&&(i.style.display="none"),a.style.height="100%",s.style.display="none",M()||(a.style.marginTop="0")}setTimeout((function(){var e;t.props.core._config.joinRoomCallback&&(null===(e=t.props.core._config)||void 0===e||e.joinRoomCallback()),t.props.core._config.onJoinRoom&&t.props.core._config.onJoinRoom()}),0),e=M()?(0,ut.jsx)(Ui,{core:this.props.core,leaveRoom:function(){t.props.core._config.showLeavingView&&t.nextPage(),setTimeout((function(){t.props.core._config.leaveRoomCallback&&t.props.core._config.leaveRoomCallback(),t.props.core._config.onLeaveRoom&&t.props.core._config.onLeaveRoom()}),0)}}):(0,ut.jsx)(mc,{core:this.props.core,leaveRoom:function(){t.props.core._config.showLeavingView&&t.nextPage(),setTimeout((function(){t.props.core._config.leaveRoomCallback&&t.props.core._config.leaveRoomCallback(),t.props.core._config.onLeaveRoom&&t.props.core._config.onLeaveRoom()}),0)}}),this.props.core.setCurrentPage("Room")}else 2===this.state.step&&this.props.core&&(e=(0,ut.jsx)(Wl,{core:this.props.core,joinRoom:function(){t.setState({step:1})},returnHome:function(){t.setState({step:0})}}),this.props.core.setCurrentPage("RejoinRoom"));else e=(0,ut.jsx)(St,{header:"Browser not supported",contentText:/Firefox/.test(window.navigator.userAgent)?"Your browser version does not support the features or something wrong with your network. Please check them and try again.":"The current browser is not available for you to join the room."}),this.props.core.setCurrentPage("BrowserCheckPage");return(0,ut.jsx)(Ul,{locale:"en",children:(0,ut.jsx)("div",{className:jl,children:e})})}}]),r}(e.Component),Ql=function(){function e(){s(this,e),this.hasJoinedRoom=!1,this.root=void 0}return c(e,[{key:"addPlugins",value:function(t){var r;null===(r=e.core)||void 0===r||r.addPlugins(t)}},{key:"joinRoom",value:function(r){if(e.core)if(this.hasJoinedRoom)console.error("\u3010ZEGOCLOUD\u3011joinRoom repeat !!");else{if(!r||!r.container){console.warn("\u3010ZEGOCLOUD\u3011joinRoom/roomConfig/container required !!");var o=document.createElement("div");o.style.position="fixed",o.style.width="100vw",o.style.height="100vh",o.style.minWidth="345px",o.style.top="0px",o.style.left="0px",o.style.zIndex="100",o.style.backgroundColor="#FFFFFF",o.style.overflow="auto",document.body.appendChild(o),r=w(w({},r),{container:o})}e.core.setConfig(r)&&(this.root=t.createRoot(r.container),this.root.render((0,ut.jsx)(Yl,{core:e.core})),this.hasJoinedRoom=!0)}else console.error("\u3010ZEGOCLOUD\u3011 please call init frst !!")}},{key:"destroy",value:function(){var t,r,o,n;null===(t=e.core)||void 0===t||null===(r=t.leaveRoom)||void 0===r||r.call(t),e.core=void 0,J._instance=void 0,null===(o=this.root)||void 0===o||null===(n=o.unmount)||void 0===n||n.call(o),this.root=void 0,this.hasJoinedRoom=!1}}],[{key:"generateKitTokenForTest",value:function(e,t,r,o,n,i){return function(e,t,r,o,n,i){if(!r)return console.error("\u3010ZEGOCLOUD\u3011:roomID required!!"),"";if(!o)return console.error("\u3010ZEGOCLOUD\u3011:userID required!!"),"";if(!n)return console.error("\u3010ZEGOCLOUD\u3011:userName required!!"),"";if(!e)return console.error("\u3010ZEGOCLOUD\u3011:appID required!!"),"";if("number"!=typeof e)return console.error("\u3010ZEGOCLOUD\u3011:appID must be number!!"),"";if(!t)return console.error("\u3010ZEGOCLOUD\u3011: serverSecret required!!"),"";var s=Date.now()/1e3|0,a={app_id:e,user_id:o,nonce:2147483647*Math.random()|0,ctime:s,expire:s+(i||7200)},c=N().enc.Utf8.parse(t),u=Math.random().toString().substring(2,18);u.length<16&&(u+=u.substring(0,16-u.length));var l=N().AES.encrypt(JSON.stringify(a),c,{iv:N().enc.Utf8.parse(u)}).toString(),d=Uint8Array.from(Array.from(atob(l)).map((function(e){return e.charCodeAt(0)}))),h=d.length,p=new Uint8Array(28+h);return p.set([0,0,0,0]),p.set(new Uint8Array(Int32Array.from([a.expire]).buffer).reverse(),4),p[8]=u.length>>8,p[9]=u.length-(p[8]<<8),p.set(Uint8Array.from(Array.from(u).map((function(e){return e.charCodeAt(0)}))),10),p[26]=h>>8,p[27]=h-(p[26]<<8),p.set(d,28),"04".concat(btoa(String.fromCharCode.apply(String,O(Array.from(p)))))+"#"+window.btoa(JSON.stringify({userID:o,roomID:r,userName:n,appID:e}))}(e,t,r,o,n,i)}},{key:"generateKitTokenForProduction",value:function(e,t,r,o,n){return t+"#"+window.btoa(JSON.stringify({userID:o,roomID:r,userName:n,appID:e}))}},{key:"create",value:function(t){return!e.core&&t&&(e.core=J.getInstance(t),e._instance=new e),e._instance}}]),e}();function Kl(e){var t="";if(t)return t;var r,o="12345qwertyuiopasdfgh67890jklmnbvcxzMNBVCZXASDQWERTYHGFUIOLKJP",n=o.length;for(e=e||5,r=0;r<e;r++)t+=o.charAt(Math.floor(Math.random()*n));return t}function Jl(){var e=["Oliver","Jake","Noah","James","Jack","Connor","Liam","John","Harry","Callum","Mason","Robert","Jacob","Jacob","Jacob","Michael","Charlie","Kyle","William","William","Thomas","Joe","Ethan","David","George","Reece","Michael","Richard","Oscar","Rhys","Alexander","Joseph","James","Charlie","James","Charles","William","Damian","Daniel","Thomas"],t=Math.round(Math.random()*e.length);return e[t=t==e.length?t-1:t]}Ql.core=void 0,Ql._instance=void 0,Ql.Host=_.Host,Ql.Cohost=_.Cohost,Ql.Audience=_.Audience,Ql.OneONoneCall=g.OneONoneCall,Ql.GroupCall=g.GroupCall,Ql.LiveStreaming=g.LiveStreaming,Ql.VideoConference=g.VideoConference,Ql.VideoResolution_180P=m._180P,Ql.VideoResolution_360P=m._360P,Ql.VideoResolution_480P=m._480P,Ql.VideoResolution_720P=m._720P,Ql.LiveStreamingMode=v,function e(){var t=window.orientation,r=null;function o(){if(null===document.getElementById("preventTran")){(r=document.createElement("div")).setAttribute("id","preventTran"),r.style.position="fixed",r.style.left="0",r.style.top="0",r.style.width="100%",r.style.height="100vh",r.style.overflow="hidden",r.style.backgroundColor="rgb(46 46 46 / 95%)",r.style.textAlign="center",r.style.display="flex",r.style.flexDirection="column",r.style.justifyContent="center",r.style.alignItems="center",document.getElementsByTagName("body")[0].appendChild(r);var e=document.createElement("img");e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABaCAYAAADkUTU1AAAI9ElEQVR4Xu1cfXBcVRU/5+Z1N8GEj2AhFQvUIigfBetYaRVbBhADU2wHVoYk3bx3k8kMcSyFPxzUf8IfOjrqIHYUXbL3vW6mKXbtINapg1ColLEUnYIj9QPGOE0VdUjjlE3tdnffO87J7GY26yZ9H5tNst37X5tzzu/87rl777v3nnMR5rhFo9HLhBDrhRC3AMBqAFgBABfmYU8CwAgAHAGAVwDgJaXUO+Vc6u7uXhkOh0/GYrGxIC5jEOVZdLG3t7fdcZyHiOgORHSL4xDRfiHEE/F4fB8AEGNIKdcS0fMA8IxpmluC+OzWEdcY0Wh0jaZp2wFgjWulMoJE9CoRbRVCEHcCIp4PAOOpVOqSZDJp+7VdMcIbNmzQVqxYMYCIXwEA4dehEj2O+GlEfF/h/xFxfTwef9mv/YoQ7u/vb06n00kA+FypIxweAHgdAJ4DgF9nMpmj4+Pj77Jca2vr0nA4fC0ArAeAO4lotYvh/22l1JfnjXAkEmluaWn5JQB8ukx09hLRgGVZb7hxUNf1m4QQjxHRxlmI/0kpxZ3kqwWNMEopfwIAkRL0fwNAn1Lq51696ujouKKxsfEwAFw6k246nV45PDzMs7vnFoiwlPIRAPhuCeqbjuPcYVnWv7x609nZ+cFwOMzL0xVn0d2qlOKJ0XPzTZjXxYaGhqMAEC5C/aOmaetisRivr55aV1fXsiVLlhxExJVnU+QlyjTNz55NrtzffROWUj4DAJuKjI4j4up4PH7MjyOGYTyNiPe70SWiDCK+XymVciNfLOOLcDQaXaVpGk9EU/qO40Qtyxry6kBB3jCMpUQUEUJsIKIbEPEqANBmsseypmn+1CueL8JSyh8AQH8BjIiOmKb5ca/gs8l3dnae39jYeJfjODxjXw8APNSn1mMiUqZp9njF9EXYMIw3EfG6IsKbTNN81iu4F/mBgQExOjq6DgA2A8AnAeC3SqmHvdhgWb+E/4mIbXkwO5VKXZxMJj1PVF6drYS8X8IPI+K3AKCBiLabprmtEs5Uw4YvwuyYrusXnjlzRtu1a1eg7Vo1SAaepavtZCXxfEe4kk5U01adcDV7ez6w6hGej16vJmY9wtXs7fnAKhvhSCTS1NTUtFQIcZ5t2xUbBYjo+7TRbecIITKZTObk8PDwf8rpTCPT0dFxUTgc/ioA8Kdjg1uQhShHRG8T0bZTp069kEwmMwUfpwgbhnEtIv4GAC5YiAT8+sTEbdu+NZFI/GNqtxSJRFqbm5v/ioiFKxC/9heq3gki+qhpmu9ORrinp+cpIupdqN5WyK+fKaU2Y19f3wW5XO4Eb/XKGHYK9zteQIlIuDhQ92KyIrKO41yNhmF0IWLZsygi6jdN88mKoM2BEcMwHkTEH7o1TUSP8EH64wBQdgNfa4QBwCrcHHyhXC/VIOE9TJiPOu+tE+bZqsZ+wwBQj/C0kV2PsNv5v0pyXpel+pAuDUytDulfAMDd59KyVCdciPYiHdJj2Wx2zdDQ0N90Xf+wEILzRS7Kc5pch2spwg4iLo3H4+OFoEkpPwAAf8/flNYc4f1KqdtL5yMpJSfKfKqwLNVShA8rpW4uJdzT0/M6Ed1Uc4Q56w8RP6OU4ohOtu7u7tuEEM/nDyRqbkgzxywRDRLRbkTsRES9KDmmJgnP9mG7h494ONz/90NnrUW6LM1OWErJidd1wvUIV2nL5wXG7/awPqQX+bf0bIMkyd/S50yEiWi4Trh4PNTaOlyIMGfB3nMunHgQUYy/tL6RrzUqxzlJRFMf4l6WjErJIiJXajXPYG8NIm50izV5mabr+i1CCN+FT27BFoJcLpe7hi/EeeI6lE+6Xgh+zZUPu5VS909mAESj0as1TePqsfPmCm0+7RLRO7Ztr0okEiemklrypLlc7sr5dG4OsF8TQtwzODjIxWPTSwA4P6ulpYWrSh5DxE/MAXi1THKqBpcHfjOVSh0qrkadMelMStmSTqdbGxsbF1W+Vi6XOyOEOGFZVrpc71Ysy65aoQuKUycctAcXun49wgs9QkH9W5QR3rJly/VNTU0jsVjsv147YFERbm9vDy9btoxvA28koveI6POWZR3wQtoP4YLO5Bsb1Wy6rm8UQhSX2T+tlHrAiw+eCRuGsQcRbwOAo1xGK4T4VSaTeXFoaOiUF2A/slJKTpHkVMnJRkRPmqY5VdbrxqYfwuX2z1kA4Az0P/DzMgCwzzTN424c8CIjpdxd/MCC4zjbLMt6wosNz4R1Xb9ZCMHbydkaX+TxmzpcZ/xjpRSXzwdqfX19S3K5HG8ACrf5IIRYOzg4+KoXw54Jc+HysWPHuH74EpdA25VSW13Kziim6zqXy3OEC20slUq1eX2mxjNhRpNSmlxR64LEHk3THojFYjzkAzUp5e8AoLjs/kdKqQe9GvVLmNON+cGS2dpzjuNsmmnX4sVRXdc7hBA7i3R4hfiYUur3XuywrC/C/CBBOBzm93RC5QCJ6MWxsbGNe/fu9fxhUGovGo1e3tDQcAQRLy78jYieNU2z+EkN17x9Ec4P6xcAgJenaY2IDk5MTNyVTCYnXHsxgyB3bCgUehkRbywim7Ft+4ZEIvGWH/u+Ceu6/pAQ4ntlQF87ffr03UFL5Xt7ey+1bXsfP4ZSjOE4zqOWZfH7A76ab8JdXV1XhUKht2cY0qOO48gdO3bs9+OVYRh3AkAcES8r0edSHM7e5yMcX8034fyw/jMAXAMAXFNYehTETvFE83Wl1F/ceNfd3X2dEOJr+Sdqpj1CRkSHJyYmbg/6UwlE2DAMPuyLZLPZezVNiyFi6ZtazJOJ8+0F54Mdymazbx0/fnwyU2758uWtoVDoI7Ztr+WTRSJaW67eiSfBTCazeefOne+56bjZZAIRzhtmG8Q7mba2tu8AwBcrWKTFnfX4yMjIowcOHMgFJcv6lSA8zQ8p5a0AwJPZqiAOEtEb/AigZVkHg9gp1a04YQaIRCINzc3N9yHil4honYeIF4b/9/Pf374np5k6aU4IF4NJKT8EAO355E5+NelyACjcBvJ7WKMAwLusV3K53L5EIsH/nrP2PzAJNfmP9znfAAAAAElFTkSuQmCC",r.appendChild(e),e.style.marginBottom="0.2rem",e.style.width="10%";var t=document.createElement("br"),o=document.createElement("p");o.style.width="100%",o.style.height="auto",o.style.fontSize="1.2rem",o.style.color="#626262",o.style.lineHeight="1.5rem",o.style.textAlign="center",o.innerHTML="For your good experience",o.appendChild(t),o.innerHTML+="Please operate your phone/tablet in portrait orientation",r.appendChild(o)}}90!=t&&-90!=t||(null==r&&null===document.getElementById("preventTran")&&o(),document.getElementById("preventTran").style.zIndex="9999"),window.onorientationchange=function(){null==r&&null==document.getElementById("preventTran")&&o(),document.getElementById("preventTran").style.zIndex="-1",e()}}();var Xl=__webpack_require__(6494),$l=function(e){l(r,e);var t=f(r);function r(e){var n;s(this,r),(n=t.call(this,e)).myMeeting=void 0,n.state={showPreviewHeader:G().get("preHeader")||"show",docs:"https://docs.zegocloud.com/article/14922",showSettings:!1,showSettingsBtn:!1,liveStreamingMode:G().get("liveStreamingMode")||"RealTimeLive"},n.settingsEl=null;var a=G().get("UserName"),c=G().get("roomID")||Kl(5);G().get("roomID")||window.history.replaceState("","You have logged into room: "+c,window.location.origin+window.location.pathname+"?roomID="+c+"&role=Host");var u=G().get("role")||"Host",l="Host"===u?_.Host:"Cohost"===u?_.Cohost:_.Audience,d=[],h=G().get("showNonVideoUser")||void 0,p=g.OneONoneCall;return p=g.VideoConference,d.push({name:"Personal link",url:window.location.origin+window.location.pathname+"?roomID="+c}),n.myMeeting=function(){var e=i(o().mark((function e(t){var r,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Ql.generateKitTokenForTest(1484647939,"22076fd0a8388f31dc1f6e344171b2b1",c,Kl(5),a||Jl(),7200),(n=Ql.create(r)).addPlugins({ZegoSuperBoardManager:Xl.ZegoSuperBoardManager}),i={turnOnMicrophoneWhenJoining:!1,turnOnCameraWhenJoining:!1,showMyCameraToggleButton:!1,showMyMicrophoneToggleButton:!1,showAudioVideoSettingsButton:!1,showNonVideoUser:!1,container:t,preJoinViewConfig:{title:"Join Room"},maxUsers:50,leaveRoomCallback:function(){var e,t;console.log("test:leaveRoomCallback"),null===(e=window)||void 0===e||null===(t=e.parent)||void 0===t||t.postMessage("leaveRoom","*")},joinRoomCallback:function(){var e,t;null===(e=window)||void 0===e||null===(t=e.parent)||void 0===t||t.postMessage("joinRoom","*")},branding:{logoURL:"https://www.zegocloud.com/_nuxt/img/zegocloud_logo_white.ddbab9f.png"},sharedLinks:d,scenario:{mode:p,config:{role:l,liveStreamingMode:undefined}},whiteboardConfig:{showAddImageButton:!0},showUserList:!0,onUserAvatarSetter:function(e){e.forEach((function(e){e.setUserAvatar&&e.setUserAvatar("https://api.multiavatar.com/".concat(e.userID,".svg?apikey=XqHm465NYsdLfb"))}))},videoResolutionList:[Ql.VideoResolution_360P,Ql.VideoResolution_180P,Ql.VideoResolution_480P,Ql.VideoResolution_720P],videoResolutionDefault:Ql.VideoResolution_360P,onLiveStart:function(e){console.warn("onLiveStart",e)},onLiveEnd:function(e){console.warn("onLiveEnd",e)}},void 0!==h&&(i.showNonVideoUser="true"===h),n.joinRoom(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return c(r,[{key:"handleSelectMode",value:function(e){var t=this;this.setState({liveStreamingMode:e},(function(){!M()&&t.handleSettingsConfirm()}))}},{key:"handleSettingsConfirm",value:function(){var e=G();e.get("liveStreamingMode")!==this.state.liveStreamingMode?(e.set("liveStreamingMode",this.state.liveStreamingMode),window.location.href=window.location.origin+window.location.pathname+"?"+e.toString()):this.setState({showSettings:!1})}},{key:"render",value:function(){var e=this;return(0,ut.jsxs)("div",{className:"".concat(S.app," ").concat(M()?"":S.mobileApp),children:["show"===this.state.showPreviewHeader&&(0,ut.jsxs)("div",{className:"".concat(S.nav," ").concat(M()?"":S.mobileNav," preView_nav"),children:[(0,ut.jsx)("div",{className:"".concat(S.LOGO," ").concat(M()?"":S.mobileLOGO),onClick:function(){window.open("https://www.zegocloud.com","_blank")}}),(0,ut.jsxs)("div",{className:"".concat(S.link," ").concat(M()?"":S.mobileLink),children:[this.state.showSettingsBtn&&(0,ut.jsxs)("a",{className:S.link_item,onClick:function(){e.setState({showSettings:!0,liveStreamingMode:G().get("liveStreamingMode")||"RealTimeLive"})},children:[(0,ut.jsx)("span",{className:S.icon_settings})," ",M()&&"Settings"]}),(0,ut.jsxs)("a",{href:this.state.docs,target:"_blank",className:S.link_item,rel:"noreferrer",children:[(0,ut.jsx)("span",{className:S.icon__doc})," ",M()&&"Documentation"]}),(0,ut.jsxs)("a",{href:"https://github.com/ZEGOCLOUD/zego_uikit_prebuilt_web/",target:"_blank",className:S.link_item,rel:"noreferrer",children:[(0,ut.jsx)("span",{className:S.icon__github}),M()&&"View demo code"]})]})]}),(0,ut.jsx)("div",{ref:this.myMeeting,className:"".concat(S.myMeeting,"  ").concat(M()?"":S.mobileMeeting)}),(0,ut.jsxs)("div",{className:"".concat(S.serviceTips,"  ").concat(M()?S.pcServiceTips:S.mobileServiceTips," preView_services"),children:['By clicking "Join", you agree to ',!M()&&(0,ut.jsx)("br",{})," our"," ",(0,ut.jsx)("a",{href:"https://www.zegocloud.com/policy?index=1",target:"_blank",rel:"noreferrer",children:"Terms of Services"})," ","and"," ",(0,ut.jsx)("a",{href:"https://www.zegocloud.com/policy?index=0",target:"_blank",rel:"noreferrer",children:"Privacy Policy"}),"."]}),this.state.showSettings&&(0,ut.jsx)("div",{className:"".concat(M()?S.pcSettingsModel:S.mobileSettingsModel),children:(0,ut.jsxs)("div",{className:S.settingsWrapper,children:[(0,ut.jsxs)("div",{className:S.settingsHeader,children:[(0,ut.jsx)("p",{children:M()?"Settings":"Live streaming mode"}),(0,ut.jsx)("span",{className:S.settingsClose,onClick:function(){e.setState({showSettings:!1})}})]}),(0,ut.jsxs)("div",{className:S.settingsBody,children:[M()&&(0,ut.jsx)("div",{className:S.settingsMode,children:"Live streaming mode"}),(0,ut.jsxs)("div",{className:S.settingsModeList,children:[(0,ut.jsxs)("div",{className:"".concat(S.settingsModeItem," ").concat("StandardLive"===this.state.liveStreamingMode?S.settingsModeItemSelected:""),onClick:function(){e.handleSelectMode("StandardLive")},children:[(0,ut.jsx)("p",{children:"Standard Live"}),(0,ut.jsx)("span",{})]}),(0,ut.jsxs)("div",{className:"".concat(S.settingsModeItem," ").concat("PremiumLive"===this.state.liveStreamingMode?S.settingsModeItemSelected:""),onClick:function(){e.handleSelectMode("PremiumLive")},children:[(0,ut.jsx)("p",{children:"Premium Live"}),(0,ut.jsx)("span",{})]}),(0,ut.jsxs)("div",{className:"".concat(S.settingsModeItem," ").concat("RealTimeLive"===this.state.liveStreamingMode?S.settingsModeItemSelected:""),onClick:function(){e.handleSelectMode("RealTimeLive")},children:[(0,ut.jsx)("p",{children:"Real-time Live"}),(0,ut.jsx)("span",{})]})]}),M()&&(0,ut.jsx)("div",{className:S.settingsBtn,onClick:function(){e.handleSettingsConfirm()},children:"Confirm"})]})]})})]})}}]),r}(e.Component),ed=function(e){e&&e instanceof Function&&__webpack_require__.e(988).then(__webpack_require__.bind(__webpack_require__,4988)).then((function(t){var r=t.getCLS,o=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),o(e),n(e),i(e),s(e)}))};t.createRoot(document.getElementById("root")).render((0,ut.jsx)(e.StrictMode,{children:(0,ut.jsx)($l,{})})),ed()}()})();
//# sourceMappingURL=main.813c3dd7.js.map